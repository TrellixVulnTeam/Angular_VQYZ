(self.webpackChunkangularfiebase_authentication=self.webpackChunkangularfiebase_authentication||[]).push([[179],{2011:(Li,Et,se)=>{"use strict";se.d(Et,{hO:()=>$t,xv:()=>at,Dh:()=>$e,GT:()=>ot,cc:()=>Tt,on:()=>be,pX:()=>Ue});var d=se(5e3),he=se(127),J=se(5813);Li=se.hmd(Li);const Ge=["ngOnDestroy"],Ue=(Xe,Dt,kt,et={})=>new Proxy(Xe,{get:(vt,ct)=>kt.runOutsideAngular(()=>{var ni;if(Xe[ct])return(null===(ni=null==et?void 0:et.spy)||void 0===ni?void 0:ni.get)&&et.spy.get(ct,Xe[ct]),Xe[ct];if(Ge.indexOf(ct)>-1)return()=>{};const He=Dt.toPromise().then(pi=>{const Re=pi&&pi[ct];return"function"==typeof Re?Re.bind(pi):Re&&Re.then?Re.then(it=>kt.run(()=>it)):kt.run(()=>Re)});return new Proxy(()=>{},{get:(pi,Re)=>He[Re],apply:(pi,Re,it)=>He.then(tt=>{var lt;const Ht=tt&&tt(...it);return(null===(lt=null==et?void 0:et.spy)||void 0===lt?void 0:lt.apply)&&et.spy.apply(ct,it,Ht),Ht})})})}),ot=(Xe,Dt)=>{Dt.forEach(kt=>{Object.getOwnPropertyNames(kt.prototype||kt).forEach(et=>{Object.defineProperty(Xe.prototype,et,Object.getOwnPropertyDescriptor(kt.prototype||kt,et))})})};class Pe{constructor(Dt){return Dt}}const $e=new d.OlP("angularfire2.app.options"),at=new d.OlP("angularfire2.app.name");function be(Xe,Dt,kt){const vt="object"==typeof kt&&kt||{};vt.name=vt.name||"string"==typeof kt&&kt||"[DEFAULT]";const ni=he.Z.apps.filter(He=>He&&He.name===vt.name)[0]||Dt.runOutsideAngular(()=>he.Z.initializeApp(Xe,vt));try{JSON.stringify(Xe)!==JSON.stringify(ni.options)&&pe("error",`${ni.name} Firebase App already initialized with different options${Li.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(He){}return new Pe(ni)}const pe=(Xe,...Dt)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Xe](...Dt)},Ne={provide:Pe,useFactory:be,deps:[$e,d.R0b,[new d.FiY,at]]};let $t=(()=>{class Xe{constructor(kt){he.Z.registerVersion("angularfire",J.q4.full,"core"),he.Z.registerVersion("angularfire",J.q4.full,"app-compat"),he.Z.registerVersion("angular",d.q4F.full,kt.toString())}static initializeApp(kt,et){return{ngModule:Xe,providers:[{provide:$e,useValue:kt},{provide:at,useValue:et}]}}}return Xe.\u0275fac=function(kt){return new(kt||Xe)(d.LFG(d.Lbi))},Xe.\u0275mod=d.oAB({type:Xe}),Xe.\u0275inj=d.cJS({providers:[Ne]}),Xe})();function Tt(Xe,Dt,kt,et,vt){const[,ct,ni]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===Xe)||[];if(ct)return function Ft(Xe,Dt){try{return Xe.toString()===Dt.toString()}catch(kt){return Xe===Dt}}(vt,ni)||(Ie("error",`${Dt} was already initialized on the ${kt} Firebase App with different settings.${Wt?" You may need to reload as Firebase is not HMR aware.":""}`),Ie("warn",{is:vt,was:ni})),ct;{const He=et();return globalThis.\u0275AngularfireInstanceCache.push([Xe,He,vt]),He}}const Wt=!!Li.hot,Ie=(Xe,...Dt)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Xe](...Dt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Li,Et,se)=>{"use strict";se.d(Et,{q4:()=>tb,iC:()=>Id,fc:()=>hf,HU:()=>h0,vb:()=>rb,JM:()=>kI});var d=se(5e3),he=se(5867),J=se(5861),Ge=se(9681),Ue=se(2090),ot=se(4859),Pe=se(1877),$e=se(2940);const at="@firebase/installations",Ne="w:0.5.5",$t="FIS_v2",Dt=new Ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function kt(P){return P instanceof Ue.ZR&&P.code.includes("request-failed")}function et({projectId:P}){return`https://firebaseinstallations.googleapis.com/v1/projects/${P}/installations`}function vt(P){return{token:P.token,requestStatus:2,expiresIn:tt(P.expiresIn),creationTime:Date.now()}}function ct(P,H){return ni.apply(this,arguments)}function ni(){return(ni=(0,J.Z)(function*(P,H){const oe=(yield H.json()).error;return Dt.create("request-failed",{requestName:P,serverCode:oe.code,serverMessage:oe.message,serverStatus:oe.status})})).apply(this,arguments)}function He({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function pi(P,{refreshToken:H}){const Z=He(P);return Z.append("Authorization",function lt(P){return`${$t} ${P}`}(H)),Z}function Re(P){return it.apply(this,arguments)}function it(){return(it=(0,J.Z)(function*(P){const H=yield P();return H.status>=500&&H.status<600?P():H})).apply(this,arguments)}function tt(P){return Number(P.replace("s","000"))}function Ht(P,H){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,J.Z)(function*(P,{fid:H}){const Z=et(P),De={method:"POST",headers:He(P),body:JSON.stringify({fid:H,authVersion:$t,appId:P.appId,sdkVersion:Ne})},Ot=yield Re(()=>fetch(Z,De));if(Ot.ok){const Gt=yield Ot.json();return{fid:Gt.fid||H,registrationStatus:2,refreshToken:Gt.refreshToken,authToken:vt(Gt.authToken)}}throw yield ct("Create Installation",Ot)})).apply(this,arguments)}function ns(P){return new Promise(H=>{setTimeout(H,P)})}const Ur=/^[cdef][\w-]{21}$/;function Ri(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const Z=function Zo(P){return function xn(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return Ur.test(Z)?Z:""}catch(P){return""}}function Vn(P){return`${P.appName}!${P.appId}`}const ma=new Map;function En(P,H){const Z=Vn(P);fr(Z,H),function Xh(P,H){const Z=function Ma(){return!To&&"BroadcastChannel"in self&&(To=new BroadcastChannel("[Firebase] FID Change"),To.onmessage=P=>{fr(P.data.key,P.data.fid)}),To}();Z&&Z.postMessage({key:P,fid:H}),function Lc(){0===ma.size&&To&&(To.close(),To=null)}()}(Z,H)}function fr(P,H){const Z=ma.get(P);if(Z)for(const oe of Z)oe(H)}let To=null;const so="firebase-installations-store";let Mc=null;function Gi(){return Mc||(Mc=(0,$e.openDb)("firebase-installations-database",1,P=>{0===P.oldVersion&&P.createObjectStore(so)})),Mc}function Xa(P,H){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,J.Z)(function*(P,H){const Z=Vn(P),_e=(yield Gi()).transaction(so,"readwrite"),De=_e.objectStore(so),Ot=yield De.get(Z);return yield De.put(H,Z),yield _e.complete,(!Ot||Ot.fid!==H.fid)&&En(P,H.fid),H})).apply(this,arguments)}function fn(P){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,J.Z)(function*(P){const H=Vn(P),oe=(yield Gi()).transaction(so,"readwrite");yield oe.objectStore(so).delete(H),yield oe.complete})).apply(this,arguments)}function qi(P,H){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,J.Z)(function*(P,H){const Z=Vn(P),_e=(yield Gi()).transaction(so,"readwrite"),De=_e.objectStore(so),Ot=yield De.get(Z),Gt=H(Ot);return void 0===Gt?yield De.delete(Z):yield De.put(Gt,Z),yield _e.complete,Gt&&(!Ot||Ot.fid!==Gt.fid)&&En(P,Gt.fid),Gt})).apply(this,arguments)}function fs(P){return _n.apply(this,arguments)}function _n(){return(_n=(0,J.Z)(function*(P){let H;const Z=yield qi(P,oe=>{const _e=Xo(oe),De=ws(P,_e);return H=De.registrationPromise,De.installationEntry});return""===Z.fid?{installationEntry:yield H}:{installationEntry:Z,registrationPromise:H}})).apply(this,arguments)}function Xo(P){return su(P||{fid:Ri(),registrationStatus:0})}function ws(P,H){if(0===H.registrationStatus){if(!navigator.onLine)return{installationEntry:H,registrationPromise:Promise.reject(Dt.create("app-offline"))};const Z={fid:H.fid,registrationStatus:1,registrationTime:Date.now()},oe=function Ai(P,H){return fi.apply(this,arguments)}(P,Z);return{installationEntry:Z,registrationPromise:oe}}return 1===H.registrationStatus?{installationEntry:H,registrationPromise:iu(P)}:{installationEntry:H}}function fi(){return(fi=(0,J.Z)(function*(P,H){try{return Xa(P,yield Ht(P,H))}catch(Z){throw kt(Z)&&409===Z.customData.serverCode?yield fn(P):yield Xa(P,{fid:H.fid,registrationStatus:0}),Z}})).apply(this,arguments)}function iu(P){return gd.apply(this,arguments)}function gd(){return(gd=(0,J.Z)(function*(P){let H=yield Xs(P);for(;1===H.registrationStatus;)yield ns(100),H=yield Xs(P);if(0===H.registrationStatus){const{installationEntry:Z,registrationPromise:oe}=yield fs(P);return oe||Z}return H})).apply(this,arguments)}function Xs(P){return qi(P,H=>{if(!H)throw Dt.create("installation-not-found");return su(H)})}function su(P){return function Do(P){return 1===P.registrationStatus&&P.registrationTime+1e4<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function ar(P,H){return de.apply(this,arguments)}function de(){return(de=(0,J.Z)(function*({appConfig:P,platformLoggerProvider:H},Z){const oe=ye(P,Z),_e=pi(P,Z),De=H.getImmediate({optional:!0});De&&_e.append("x-firebase-client",De.getPlatformInfoString());const Gt={method:"POST",headers:_e,body:JSON.stringify({installation:{sdkVersion:Ne}})},oi=yield Re(()=>fetch(oe,Gt));if(oi.ok)return vt(yield oi.json());throw yield ct("Generate Auth Token",oi)})).apply(this,arguments)}function ye(P,{fid:H}){return`${et(P)}/${H}/authTokens:generate`}function Se(P){return gt.apply(this,arguments)}function gt(){return(gt=(0,J.Z)(function*(P,H=!1){let Z;const oe=yield qi(P.appConfig,De=>{if(!ko(De))throw Dt.create("not-registered");const Ot=De.authToken;if(!H&&Qo(Ot))return De;if(1===Ot.requestStatus)return Z=ze(P,H),De;{if(!navigator.onLine)throw Dt.create("app-offline");const Gt=Ro(De);return Z=mn(P,Gt),Gt}});return Z?yield Z:oe.authToken})).apply(this,arguments)}function ze(P,H){return ri.apply(this,arguments)}function ri(){return(ri=(0,J.Z)(function*(P,H){let Z=yield Wi(P.appConfig);for(;1===Z.authToken.requestStatus;)yield ns(100),Z=yield Wi(P.appConfig);const oe=Z.authToken;return 0===oe.requestStatus?Se(P,H):oe})).apply(this,arguments)}function Wi(P){return qi(P,H=>{if(!ko(H))throw Dt.create("not-registered");return function qe(P){return 1===P.requestStatus&&P.requestTime+1e4<Date.now()}(H.authToken)?Object.assign(Object.assign({},H),{authToken:{requestStatus:0}}):H})}function mn(P,H){return zn.apply(this,arguments)}function zn(){return(zn=(0,J.Z)(function*(P,H){try{const Z=yield ar(P,H),oe=Object.assign(Object.assign({},H),{authToken:Z});return yield Xa(P.appConfig,oe),Z}catch(Z){if(!kt(Z)||401!==Z.customData.serverCode&&404!==Z.customData.serverCode){const oe=Object.assign(Object.assign({},H),{authToken:{requestStatus:0}});yield Xa(P.appConfig,oe)}else yield fn(P.appConfig);throw Z}})).apply(this,arguments)}function ko(P){return void 0!==P&&2===P.registrationStatus}function Qo(P){return 2===P.requestStatus&&!function Rs(P){const H=Date.now();return H<P.creationTime||P.creationTime+P.expiresIn<H+36e5}(P)}function Ro(P){const H={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:H})}function ve(){return(ve=(0,J.Z)(function*(P){const H=P,{installationEntry:Z,registrationPromise:oe}=yield fs(H.appConfig);return oe?oe.catch(console.error):Se(H).catch(console.error),Z.fid})).apply(this,arguments)}function Jt(){return(Jt=(0,J.Z)(function*(P,H=!1){const Z=P;return yield Mi(Z.appConfig),(yield Se(Z,H)).token})).apply(this,arguments)}function Mi(P){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,J.Z)(function*(P){const{registrationPromise:H}=yield fs(P);H&&(yield H)})).apply(this,arguments)}function tm(P){return Dt.create("missing-app-config-values",{valueName:P})}const jn="installations",Ns=P=>{const H=P.getProvider("app").getImmediate(),Z=function ga(P){if(!P||!P.options)throw tm("App Configuration");if(!P.name)throw tm("App Name");const H=["projectId","apiKey","appId"];for(const Z of H)if(!P.options[Z])throw tm(Z);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(H);return{app:H,appConfig:Z,platformLoggerProvider:(0,Ge._getProvider)(H,"platform-logger"),_delete:()=>Promise.resolve()}},Yn=P=>{const H=P.getProvider("app").getImmediate(),Z=(0,Ge._getProvider)(H,jn).getImmediate();return{getId:()=>function we(P){return ve.apply(this,arguments)}(Z),getToken:_e=>function xt(P){return Jt.apply(this,arguments)}(Z,_e)}};(function Gl(){(0,Ge._registerComponent)(new ot.wA(jn,Ns,"PUBLIC")),(0,Ge._registerComponent)(new ot.wA("installations-internal",Yn,"PRIVATE"))})(),(0,Ge.registerVersion)(at,"0.5.5"),(0,Ge.registerVersion)(at,"0.5.5","esm2017");const Pc="@firebase/remote-config",ro=new Ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Bg{constructor(H,Z,oe,_e){this.client=H,this.storage=Z,this.storageCache=oe,this.logger=_e}isCachedDataFresh(H,Z){if(!Z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const oe=Date.now()-Z,_e=oe<=H;return this.logger.debug(`Config fetch cache check. Cache age millis: ${oe}. Cache max age millis (minimumFetchIntervalMillis setting): ${H}. Is cache hit: ${_e}.`),_e}fetch(H){var Z=this;return(0,J.Z)(function*(){const[oe,_e]=yield Promise.all([Z.storage.getLastSuccessfulFetchTimestampMillis(),Z.storage.getLastSuccessfulFetchResponse()]);if(_e&&Z.isCachedDataFresh(H.cacheMaxAgeMillis,oe))return _e;H.eTag=_e&&_e.eTag;const De=yield Z.client.fetch(H),Ot=[Z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===De.status&&Ot.push(Z.storage.setLastSuccessfulFetchResponse(De)),yield Promise.all(Ot),De})()}}function ou(P=navigator){return P.languages&&P.languages[0]||P.language}class Kl{constructor(H,Z,oe,_e,De,Ot){this.firebaseInstallations=H,this.sdkVersion=Z,this.namespace=oe,this.projectId=_e,this.apiKey=De,this.appId=Ot}fetch(H){var Z=this;return(0,J.Z)(function*(){const[oe,_e]=yield Promise.all([Z.firebaseInstallations.getId(),Z.firebaseInstallations.getToken()]),Ot=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Z.projectId}/namespaces/${Z.namespace}:fetch?key=${Z.apiKey}`,Gt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":H.eTag||"*"},oi={sdk_version:Z.sdkVersion,app_instance_id:oe,app_instance_id_token:_e,app_id:Z.appId,language_code:ou()},bn={method:"POST",headers:Gt,body:JSON.stringify(oi)},In=fetch(Ot,bn),co=new Promise((Td,yl)=>{H.signal.addEventListener(()=>{const Mm=new Error("The operation was aborted.");Mm.name="AbortError",yl(Mm)})});let bl;try{yield Promise.race([In,co]),bl=yield In}catch(Td){let yl="fetch-client-network";throw"AbortError"===Td.name&&(yl="fetch-timeout"),ro.create(yl,{originalErrorMessage:Td.message})}let Gr=bl.status;const qc=bl.headers.get("ETag")||void 0;let pu,sl;if(200===bl.status){let Td;try{Td=yield bl.json()}catch(yl){throw ro.create("fetch-client-parse",{originalErrorMessage:yl.message})}pu=Td.entries,sl=Td.state}if("INSTANCE_STATE_UNSPECIFIED"===sl?Gr=500:"NO_CHANGE"===sl?Gr=304:("NO_TEMPLATE"===sl||"EMPTY_CONFIG"===sl)&&(pu={}),304!==Gr&&200!==Gr)throw ro.create("fetch-status",{httpStatus:Gr});return{status:Gr,eTag:qc,config:pu}})()}}class SI{constructor(H,Z){this.client=H,this.storage=Z}fetch(H){var Z=this;return(0,J.Z)(function*(){const oe=(yield Z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Z.attemptFetch(H,oe)})()}attemptFetch(H,{throttleEndTimeMillis:Z,backoffCount:oe}){var _e=this;return(0,J.Z)(function*(){yield function wI(P,H){return new Promise((Z,oe)=>{const _e=Math.max(H-Date.now(),0),De=setTimeout(Z,_e);P.addEventListener(()=>{clearTimeout(De),oe(ro.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(H.signal,Z);try{const De=yield _e.client.fetch(H);return yield _e.storage.deleteThrottleMetadata(),De}catch(De){if(!function bd(P){if(!(P instanceof Ue.ZR&&P.customData))return!1;const H=Number(P.customData.httpStatus);return 429===H||500===H||503===H||504===H}(De))throw De;const Ot={throttleEndTimeMillis:Date.now()+(0,Ue.$s)(oe),backoffCount:oe+1};return yield _e.storage.setThrottleMetadata(Ot),_e.attemptFetch(H,Ot)}})()}}class QC{constructor(H,Z,oe,_e,De){this.app=H,this._client=Z,this._storageCache=oe,this._storage=_e,this._logger=De,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function My(P,H){const Z=P.target.error||void 0;return ro.create(H,{originalErrorMessage:Z&&Z.message})}const au="app_namespace_store";class $p{constructor(H,Z,oe,_e=function JC(){return new Promise((P,H)=>{try{const Z=indexedDB.open("firebase_remote_config",1);Z.onerror=oe=>{H(My(oe,"storage-open"))},Z.onsuccess=oe=>{P(oe.target.result)},Z.onupgradeneeded=oe=>{0===oe.oldVersion&&oe.target.result.createObjectStore(au,{keyPath:"compositeKey"})}}catch(Z){H(ro.create("storage-open",{originalErrorMessage:Z}))}})}()){this.appId=H,this.appName=Z,this.namespace=oe,this.openDbPromise=_e}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(H){return this.set("last_fetch_status",H)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(H){return this.set("last_successful_fetch_timestamp_millis",H)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(H){return this.set("last_successful_fetch_response",H)}getActiveConfig(){return this.get("active_config")}setActiveConfig(H){return this.set("active_config",H)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(H){return this.set("active_config_etag",H)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(H){return this.set("throttle_metadata",H)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(H){var Z=this;return(0,J.Z)(function*(){const oe=yield Z.openDbPromise;return new Promise((_e,De)=>{const Gt=oe.transaction([au],"readonly").objectStore(au),oi=Z.createCompositeKey(H);try{const bn=Gt.get(oi);bn.onerror=In=>{De(My(In,"storage-get"))},bn.onsuccess=In=>{const co=In.target.result;_e(co?co.value:void 0)}}catch(bn){De(ro.create("storage-get",{originalErrorMessage:bn&&bn.message}))}})})()}set(H,Z){var oe=this;return(0,J.Z)(function*(){const _e=yield oe.openDbPromise;return new Promise((De,Ot)=>{const oi=_e.transaction([au],"readwrite").objectStore(au),bn=oe.createCompositeKey(H);try{const In=oi.put({compositeKey:bn,value:Z});In.onerror=co=>{Ot(My(co,"storage-set"))},In.onsuccess=()=>{De()}}catch(In){Ot(ro.create("storage-set",{originalErrorMessage:In&&In.message}))}})})()}delete(H){var Z=this;return(0,J.Z)(function*(){const oe=yield Z.openDbPromise;return new Promise((_e,De)=>{const Gt=oe.transaction([au],"readwrite").objectStore(au),oi=Z.createCompositeKey(H);try{const bn=Gt.delete(oi);bn.onerror=In=>{De(My(In,"storage-delete"))},bn.onsuccess=()=>{_e()}}catch(bn){De(ro.create("storage-delete",{originalErrorMessage:bn&&bn.message}))}})})()}createCompositeKey(H){return[this.appId,this.appName,this.namespace,H].join()}}class II{constructor(H){this.storage=H}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var H=this;return(0,J.Z)(function*(){const Z=H.storage.getLastFetchStatus(),oe=H.storage.getLastSuccessfulFetchTimestampMillis(),_e=H.storage.getActiveConfig(),De=yield Z;De&&(H.lastFetchStatus=De);const Ot=yield oe;Ot&&(H.lastSuccessfulFetchTimestampMillis=Ot);const Gt=yield _e;Gt&&(H.activeConfig=Gt)})()}setLastFetchStatus(H){return this.lastFetchStatus=H,this.storage.setLastFetchStatus(H)}setLastSuccessfulFetchTimestampMillis(H){return this.lastSuccessfulFetchTimestampMillis=H,this.storage.setLastSuccessfulFetchTimestampMillis(H)}setActiveConfig(H){return this.activeConfig=H,this.storage.setActiveConfig(H)}}function e0(){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,J.Z)(function*(){if(!(0,Ue.hl)())return!1;try{return yield(0,Ue.eu)()}catch(P){return!1}})).apply(this,arguments)}!function TI(){(0,Ge._registerComponent)(new ot.wA("remote-config",function P(H,{instanceIdentifier:Z}){const oe=H.getProvider("app").getImmediate(),_e=H.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ro.create("registration-window");if(!(0,Ue.hl)())throw ro.create("indexed-db-unavailable");const{projectId:De,apiKey:Ot,appId:Gt}=oe.options;if(!De)throw ro.create("registration-project-id");if(!Ot)throw ro.create("registration-api-key");if(!Gt)throw ro.create("registration-app-id");const oi=new $p(Gt,oe.name,Z=Z||"firebase"),bn=new II(oi),In=new Pe.Yd(Pc);In.logLevel=Pe.in.ERROR;const co=new Kl(_e,Ge.SDK_VERSION,Z,De,Ot,Gt),bl=new SI(co,oi),Gr=new Bg(bl,oi,bn,In),qc=new QC(oe,Gr,bn,oi,In);return function er(P){const H=(0,Ue.m9)(P);H._initializePromise||(H._initializePromise=H._storageCache.loadFromStorage().then(()=>{H._isInitializationComplete=!0}))}(qc),qc},"PUBLIC").setMultipleInstances(!0)),(0,Ge.registerVersion)(Pc,"0.3.4"),(0,Ge.registerVersion)(Pc,"0.3.4","esm2017")}();const om="/firebase-messaging-sw.js",ec="/firebase-cloud-messaging-push-scope",t0="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",lm="google.c.a.c_id",jS="google.c.a.c_l",hm="google.c.a.ts",Lo="google.c.a.e";var Kp=(()=>{return(P=Kp||(Kp={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",Kp;var P})();function gh(P){const H=new Uint8Array(P);return btoa(String.fromCharCode(...H)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oy(P){const Z=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),oe=atob(Z),_e=new Uint8Array(oe.length);for(let De=0;De<oe.length;++De)_e[De]=oe.charCodeAt(De);return _e}const hn="fcm_token_details_db",US="fcm_token_object_Store";function Vg(P){return dm.apply(this,arguments)}function dm(){return dm=(0,J.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(De=>De.name).includes(hn))return null;let H=null;return(yield(0,$e.openDb)(hn,5,function(){var oe=(0,J.Z)(function*(_e){var De;if(_e.oldVersion<2||!_e.objectStoreNames.contains(US))return;const Ot=_e.transaction.objectStore(US),Gt=yield Ot.index("fcmSenderId").get(P);if(yield Ot.clear(),Gt)if(2===_e.oldVersion){const oi=Gt;if(!oi.auth||!oi.p256dh||!oi.endpoint)return;H={token:oi.fcmToken,createTime:null!==(De=oi.createTime)&&void 0!==De?De:Date.now(),subscriptionOptions:{auth:oi.auth,p256dh:oi.p256dh,endpoint:oi.endpoint,swScope:oi.swScope,vapidKey:"string"==typeof oi.vapidKey?oi.vapidKey:gh(oi.vapidKey)}}}else if(3===_e.oldVersion){const oi=Gt;H={token:oi.fcmToken,createTime:oi.createTime,subscriptionOptions:{auth:gh(oi.auth),p256dh:gh(oi.p256dh),endpoint:oi.endpoint,swScope:oi.swScope,vapidKey:gh(oi.vapidKey)}}}else if(4===_e.oldVersion){const oi=Gt;H={token:oi.fcmToken,createTime:oi.createTime,subscriptionOptions:{auth:gh(oi.auth),p256dh:gh(oi.p256dh),endpoint:oi.endpoint,swScope:oi.swScope,vapidKey:gh(oi.vapidKey)}}}});return function(_e){return oe.apply(this,arguments)}}())).close(),yield(0,$e.deleteDb)(hn),yield(0,$e.deleteDb)("fcm_vapid_details_db"),yield(0,$e.deleteDb)("undefined"),s0(H)?H:null}),dm.apply(this,arguments)}function s0(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:H}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof H.auth&&H.auth.length>0&&"string"==typeof H.p256dh&&H.p256dh.length>0&&"string"==typeof H.endpoint&&H.endpoint.length>0&&"string"==typeof H.swScope&&H.swScope.length>0&&"string"==typeof H.vapidKey&&H.vapidKey.length>0}const ic="firebase-messaging-store";let Py=null;function tr(){return Py||(Py=(0,$e.openDb)("firebase-messaging-database",1,P=>{0===P.oldVersion&&P.createObjectStore(ic)})),Py}function Yp(P){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,J.Z)(function*(P){const H=Jo(P),oe=yield(yield tr()).transaction(ic).objectStore(ic).get(H);if(oe)return oe;{const _e=yield Vg(P.appConfig.senderId);if(_e)return yield Zn(P,_e),_e}})).apply(this,arguments)}function Zn(P,H){return um.apply(this,arguments)}function um(){return(um=(0,J.Z)(function*(P,H){const Z=Jo(P),_e=(yield tr()).transaction(ic,"readwrite");return yield _e.objectStore(ic).put(H,Z),yield _e.complete,H})).apply(this,arguments)}function jg(P){return lu.apply(this,arguments)}function lu(){return(lu=(0,J.Z)(function*(P){const H=Jo(P),oe=(yield tr()).transaction(ic,"readwrite");yield oe.objectStore(ic).delete(H),yield oe.complete})).apply(this,arguments)}function Jo({appConfig:P}){return P.appId}const oo=new Ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Bc(P,H){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,J.Z)(function*(P,H){const Z=yield yd(P),oe=Zp(H),_e={method:"POST",headers:Z,body:JSON.stringify(oe)};let De;try{De=yield(yield fetch(Hc(P.appConfig),_e)).json()}catch(Ot){throw oo.create("token-subscribe-failed",{errorInfo:Ot})}if(De.error)throw oo.create("token-subscribe-failed",{errorInfo:De.error.message});if(!De.token)throw oo.create("token-subscribe-no-token");return De.token})).apply(this,arguments)}function qu(P,H){return hu.apply(this,arguments)}function hu(){return(hu=(0,J.Z)(function*(P,H){const Z=yield yd(P),oe=Zp(H.subscriptionOptions),_e={method:"PATCH",headers:Z,body:JSON.stringify(oe)};let De;try{De=yield(yield fetch(`${Hc(P.appConfig)}/${H.token}`,_e)).json()}catch(Ot){throw oo.create("token-update-failed",{errorInfo:Ot})}if(De.error)throw oo.create("token-update-failed",{errorInfo:De.error.message});if(!De.token)throw oo.create("token-update-no-token");return De.token})).apply(this,arguments)}function pm(P,H){return sc.apply(this,arguments)}function sc(){return(sc=(0,J.Z)(function*(P,H){const oe={method:"DELETE",headers:yield yd(P)};try{const De=yield(yield fetch(`${Hc(P.appConfig)}/${H}`,oe)).json();if(De.error)throw oo.create("token-unsubscribe-failed",{errorInfo:De.error.message})}catch(_e){throw oo.create("token-unsubscribe-failed",{errorInfo:_e})}})).apply(this,arguments)}function Hc({projectId:P}){return`https://fcmregistrations.googleapis.com/v1/projects/${P}/registrations`}function yd(P){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,J.Z)(function*({appConfig:P,installations:H}){const Z=yield H.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${Z}`})})).apply(this,arguments)}function Zp({p256dh:P,auth:H,endpoint:Z,vapidKey:oe}){const _e={web:{endpoint:Z,auth:H,p256dh:P}};return oe!==t0&&(_e.web.applicationPubKey=oe),_e}const r0=6048e5;function Ug(P){return Ny.apply(this,arguments)}function Ny(){return(Ny=(0,J.Z)(function*(P){const H=yield mr(P.swRegistration,P.vapidKey),Z={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:H.endpoint,auth:gh(H.getKey("auth")),p256dh:gh(H.getKey("p256dh"))},oe=yield Yp(P.firebaseDependencies);if(oe){if(Wu(oe.subscriptionOptions,Z))return Date.now()>=oe.createTime+r0?Hy(P,{token:oe.token,createTime:Date.now(),subscriptionOptions:Z}):oe.token;try{yield pm(P.firebaseDependencies,oe.token)}catch(_e){console.warn(_e)}return Bs(P.firebaseDependencies,Z)}return Bs(P.firebaseDependencies,Z)})).apply(this,arguments)}function fm(P){return By.apply(this,arguments)}function By(){return(By=(0,J.Z)(function*(P){const H=yield Yp(P.firebaseDependencies);H&&(yield pm(P.firebaseDependencies,H.token),yield jg(P.firebaseDependencies));const Z=yield P.swRegistration.pushManager.getSubscription();return!Z||Z.unsubscribe()})).apply(this,arguments)}function Hy(P,H){return _t.apply(this,arguments)}function _t(){return(_t=(0,J.Z)(function*(P,H){try{const Z=yield qu(P.firebaseDependencies,H),oe=Object.assign(Object.assign({},H),{token:Z,createTime:Date.now()});return yield Zn(P.firebaseDependencies,oe),Z}catch(Z){throw yield fm(P),Z}})).apply(this,arguments)}function Bs(P,H){return Vy.apply(this,arguments)}function Vy(){return(Vy=(0,J.Z)(function*(P,H){const oe={token:yield Bc(P,H),createTime:Date.now(),subscriptionOptions:H};return yield Zn(P,oe),oe.token})).apply(this,arguments)}function mr(P,H){return Xp.apply(this,arguments)}function Xp(){return(Xp=(0,J.Z)(function*(P,H){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Oy(H)})})).apply(this,arguments)}function Wu(P,H){return H.vapidKey===P.vapidKey&&H.endpoint===P.endpoint&&H.auth===P.auth&&H.p256dh===P.p256dh}function bh(P){const H={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function zy(P,H){if(!H.notification)return;P.notification={};const Z=H.notification.title;Z&&(P.notification.title=Z);const oe=H.notification.body;oe&&(P.notification.body=oe);const _e=H.notification.image;_e&&(P.notification.image=_e)}(H,P),function mm(P,H){!H.data||(P.data=H.data)}(H,P),function DI(P,H){if(!H.fcmOptions)return;P.fcmOptions={};const Z=H.fcmOptions.link;Z&&(P.fcmOptions.link=Z);const oe=H.fcmOptions.analytics_label;oe&&(P.fcmOptions.analyticsLabel=oe)}(H,P),H}function o0(P){return"object"==typeof P&&!!P&&lm in P}function Gu(P,H){const Z=[];for(let oe=0;oe<P.length;oe++)Z.push(P.charAt(oe)),oe<H.length&&Z.push(H.charAt(oe));return Z.join("")}function ao(P){return oo.create("missing-app-config-values",{valueName:P})}Gu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Gu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class vd{constructor(H,Z,oe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const _e=function qg(P){if(!P||!P.options)throw ao("App Configuration Object");if(!P.name)throw ao("App Name");const H=["projectId","apiKey","appId","messagingSenderId"],{options:Z}=P;for(const oe of H)if(!Z[oe])throw ao(oe);return{appName:P.name,projectId:Z.projectId,apiKey:Z.apiKey,appId:Z.appId,senderId:Z.messagingSenderId}}(H);this.firebaseDependencies={app:H,appConfig:_e,installations:Z,analyticsProvider:oe}}_delete(){return Promise.resolve()}}function gm(P){return cu.apply(this,arguments)}function cu(){return(cu=(0,J.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(om,{scope:ec}),P.swRegistration.update().catch(()=>{})}catch(H){throw oo.create("failed-service-worker-registration",{browserErrorMessage:H.message})}})).apply(this,arguments)}function nc(P,H){return jy.apply(this,arguments)}function jy(){return(jy=(0,J.Z)(function*(P,H){if(!H&&!P.swRegistration&&(yield gm(P)),H||!P.swRegistration){if(!(H instanceof ServiceWorkerRegistration))throw oo.create("invalid-sw-registration");P.swRegistration=H}})).apply(this,arguments)}function Wg(P,H){return Uy.apply(this,arguments)}function Uy(){return(Uy=(0,J.Z)(function*(P,H){H?P.vapidKey=H:P.vapidKey||(P.vapidKey=t0)})).apply(this,arguments)}function bm(){return(bm=(0,J.Z)(function*(P,H){if(!navigator)throw oo.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw oo.create("permission-blocked");return yield Wg(P,null==H?void 0:H.vapidKey),yield nc(P,null==H?void 0:H.serviceWorkerRegistration),Ug(P)})).apply(this,arguments)}function Qp(P,H,Z){return qy.apply(this,arguments)}function qy(){return(qy=(0,J.Z)(function*(P,H,Z){const oe=Wy(H);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(oe,{message_id:Z[lm],message_name:Z[jS],message_time:Z[hm],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Wy(P){switch(P){case Kp.NOTIFICATION_CLICKED:return"notification_open";case Kp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ym(){return(ym=(0,J.Z)(function*(P,H){const Z=H.data;if(!Z.isFirebaseMessaging)return;P.onMessageHandler&&Z.messageType===Kp.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(bh(Z)):P.onMessageHandler.next(bh(Z)));const oe=Z.data;o0(oe)&&"1"===oe[Lo]&&(yield Qp(P,Z.messageType,oe))})).apply(this,arguments)}const vm="@firebase/messaging",Gy=P=>{const H=new vd(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Z=>function qS(P,H){return ym.apply(this,arguments)}(H,Z)),H},WS=P=>{const H=P.getProvider("messaging").getImmediate();return{getToken:oe=>function Gg(P,H){return bm.apply(this,arguments)}(H,oe)}};function Jp(){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,J.Z)(function*(){try{yield(0,Ue.eu)()}catch(P){return!1}return"undefined"!=typeof window&&(0,Ue.hl)()&&(0,Ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function GS(){(0,Ge._registerComponent)(new ot.wA("messaging",Gy,"PUBLIC")),(0,Ge._registerComponent)(new ot.wA("messaging-internal",WS,"PRIVATE")),(0,Ge.registerVersion)(vm,"0.9.8"),(0,Ge.registerVersion)(vm,"0.9.8","esm2017")}();const Cm="analytics",$u="firebase_id",Ky="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$g="https://www.googletagmanager.com/gtag/js",ba=new Pe.Yd("@firebase/analytics");function Yy(P){return Promise.all(P.map(H=>H.catch(Z=>Z)))}function wd(P,H){const Z=document.createElement("script");Z.src=`${$g}?l=${P}&id=${H}`,Z.async=!0,document.head.appendChild(Z)}function Zy(P,H,Z,oe,_e,De){return Xy.apply(this,arguments)}function Xy(){return(Xy=(0,J.Z)(function*(P,H,Z,oe,_e,De){const Ot=oe[_e];try{if(Ot)yield H[Ot];else{const oi=(yield Yy(Z)).find(bn=>bn.measurementId===_e);oi&&(yield H[oi.appId])}}catch(Gt){ba.error(Gt)}P("config",_e,De)})).apply(this,arguments)}function uu(P,H,Z,oe,_e){return Sm.apply(this,arguments)}function Sm(){return(Sm=(0,J.Z)(function*(P,H,Z,oe,_e){try{let De=[];if(_e&&_e.send_to){let Ot=_e.send_to;Array.isArray(Ot)||(Ot=[Ot]);const Gt=yield Yy(Z);for(const oi of Ot){const bn=Gt.find(co=>co.measurementId===oi),In=bn&&H[bn.appId];if(!In){De=[];break}De.push(In)}}0===De.length&&(De=Object.values(H)),yield Promise.all(De),P("event",oe,_e||{})}catch(De){ba.error(De)}})).apply(this,arguments)}function ir(){const P=window.document.getElementsByTagName("script");for(const H of Object.values(P))if(H.src&&H.src.includes($g))return H;return null}const ei=new Ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Qy=new class Fn{constructor(H={},Z=1e3){this.throttleMetadata=H,this.intervalMillis=Z}getThrottleMetadata(H){return this.throttleMetadata[H]}setThrottleMetadata(H,Z){this.throttleMetadata[H]=Z}deleteThrottleMetadata(H){delete this.throttleMetadata[H]}};function lo(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function ef(P){return Em.apply(this,arguments)}function Em(){return(Em=(0,J.Z)(function*(P){var H;const{appId:Z,apiKey:oe}=P,_e={method:"GET",headers:lo(oe)},De=Ky.replace("{app-id}",Z),Ot=yield fetch(De,_e);if(200!==Ot.status&&304!==Ot.status){let Gt="";try{const oi=yield Ot.json();(null===(H=oi.error)||void 0===H?void 0:H.message)&&(Gt=oi.error.message)}catch(oi){}throw ei.create("config-fetch-failed",{httpStatus:Ot.status,responseMessage:Gt})}return Ot.json()})).apply(this,arguments)}function Ku(P){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,J.Z)(function*(P,H=Qy,Z){const{appId:oe,apiKey:_e,measurementId:De}=P.options;if(!oe)throw ei.create("no-app-id");if(!_e){if(De)return{measurementId:De,appId:oe};throw ei.create("no-api-key")}const Ot=H.getThrottleMetadata(oe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Gt=new tf;return setTimeout((0,J.Z)(function*(){Gt.abort()}),void 0!==Z?Z:6e4),zc({appId:oe,apiKey:_e,measurementId:De},Ot,Gt,H)})).apply(this,arguments)}function zc(P,H,Z){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,J.Z)(function*(P,{throttleEndTimeMillis:H,backoffCount:Z},oe,_e=Qy){const{appId:De,measurementId:Ot}=P;try{yield Jy(oe,H)}catch(Gt){if(Ot)return ba.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ot} provided in the "measurementId" field in the local Firebase config. [${Gt.message}]`),{appId:De,measurementId:Ot};throw Gt}try{const Gt=yield ef(P);return _e.deleteThrottleMetadata(De),Gt}catch(Gt){if(!l0(Gt)){if(_e.deleteThrottleMetadata(De),Ot)return ba.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ot} provided in the "measurementId" field in the local Firebase config. [${Gt.message}]`),{appId:De,measurementId:Ot};throw Gt}const oi=503===Number(Gt.customData.httpStatus)?(0,Ue.$s)(Z,_e.intervalMillis,30):(0,Ue.$s)(Z,_e.intervalMillis),bn={throttleEndTimeMillis:Date.now()+oi,backoffCount:Z+1};return _e.setThrottleMetadata(De,bn),ba.debug(`Calling attemptFetch again in ${oi} millis`),zc(P,bn,oe,_e)}})).apply(this,arguments)}function Jy(P,H){return new Promise((Z,oe)=>{const _e=Math.max(H-Date.now(),0),De=setTimeout(Z,_e);P.addEventListener(()=>{clearTimeout(De),oe(ei.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}function l0(P){if(!(P instanceof Ue.ZR&&P.customData))return!1;const H=Number(P.customData.httpStatus);return 429===H||500===H||503===H||504===H}class tf{constructor(){this.listeners=[]}addEventListener(H){this.listeners.push(H)}abort(){this.listeners.forEach(H=>H())}}function ev(){return gn.apply(this,arguments)}function gn(){return(gn=(0,J.Z)(function*(){if(!(0,Ue.hl)())return ba.warn(ei.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ue.eu)()}catch(P){return ba.warn(ei.create("indexeddb-unavailable",{errorInfo:P}).message),!1}return!0})).apply(this,arguments)}function _m(){return(_m=(0,J.Z)(function*(P,H,Z,oe,_e,De,Ot){var Gt;const oi=Ku(P);oi.then(Gr=>{Z[Gr.measurementId]=Gr.appId,P.options.measurementId&&Gr.measurementId!==P.options.measurementId&&ba.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${Gr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Gr=>ba.error(Gr)),H.push(oi);const bn=ev().then(Gr=>{if(Gr)return oe.getId()}),[In,co]=yield Promise.all([oi,bn]);ir()||wd(De,In.measurementId),_e("js",new Date);const bl=null!==(Gt=null==Ot?void 0:Ot.config)&&void 0!==Gt?Gt:{};return bl.origin="firebase",bl.update=!0,null!=co&&(bl[$u]=co),_e("config",In.measurementId,bl),In.measurementId})).apply(this,arguments)}class nf{constructor(H){this.app=H}_delete(){return delete pl[this.app.options.appId],Promise.resolve()}}let pl={},Yg=[];const rf={};let Im,yh,jc="dataLayer",Xg=!1;function Mo(P,H,Z){!function fl(){const P=[];if((0,Ue.ru)()&&P.push("This is a browser extension environment."),(0,Ue.zI)()||P.push("Cookies are not available."),P.length>0){const H=P.map((oe,_e)=>`(${_e+1}) ${oe}`).join(" "),Z=ei.create("invalid-analytics-context",{errorInfo:H});ba.warn(Z.message)}}();const oe=P.options.appId;if(!oe)throw ei.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw ei.create("no-api-key");ba.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pl[oe])throw ei.create("already-exists",{id:oe});if(!Xg){!function Kg(P){let H=[];Array.isArray(window[P])?H=window[P]:window[P]=H}(jc);const{wrappedGtag:De,gtagCore:Ot}=function SR(P,H,Z,oe,_e){let De=function(...Ot){window[oe].push(arguments)};return window[_e]&&"function"==typeof window[_e]&&(De=window[_e]),window[_e]=function a0(P,H,Z,oe){function De(){return(De=(0,J.Z)(function*(Ot,Gt,oi){try{"event"===Ot?yield uu(P,H,Z,Gt,oi):"config"===Ot?yield Zy(P,H,Z,oe,Gt,oi):P("set",Gt)}catch(bn){ba.error(bn)}})).apply(this,arguments)}return function _e(Ot,Gt,oi){return De.apply(this,arguments)}}(De,P,H,Z),{gtagCore:De,wrappedGtag:window[_e]}}(pl,Yg,rf,jc,"gtag");yh=De,Im=Ot,Xg=!0}return pl[oe]=function sf(P,H,Z,oe,_e,De,Ot){return _m.apply(this,arguments)}(P,Yg,rf,H,Im,jc,Z),new nf(P)}function af(){return(af=(0,J.Z)(function*(P,H,Z,oe,_e){if(_e&&_e.global)P("event",Z,oe);else{const De=yield H;P("event",Z,Object.assign(Object.assign({},oe),{send_to:De}))}})).apply(this,arguments)}function iv(){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,J.Z)(function*(){if((0,Ue.ru)()||!(0,Ue.zI)()||!(0,Ue.hl)())return!1;try{return yield(0,Ue.eu)()}catch(P){return!1}})).apply(this,arguments)}const sv="@firebase/analytics";!function Jg(){(0,Ge._registerComponent)(new ot.wA(Cm,(H,{options:Z})=>Mo(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),Z),"PUBLIC")),(0,Ge._registerComponent)(new ot.wA("analytics-internal",function P(H){try{const Z=H.getProvider(Cm).getImmediate();return{logEvent:(oe,_e,De)=>function ya(P,H,Z,oe){P=(0,Ue.m9)(P),function tv(P,H,Z,oe,_e){return af.apply(this,arguments)}(yh,pl[P.app.options.appId],H,Z,oe).catch(_e=>ba.error(_e))}(Z,oe,_e,De)}}catch(Z){throw ei.create("interop-component-reg-failed",{reason:Z})}},"PRIVATE")),(0,Ge.registerVersion)(sv,"0.7.5"),(0,Ge.registerVersion)(sv,"0.7.5","esm2017")}();var Ed=se(4408),Oo=se(7565);const km=new class Dm extends Oo.v{}(class nv extends Ed.o{constructor(H,Z){super(H,Z),this.scheduler=H,this.work=Z}schedule(H,Z=0){return Z>0?super.schedule(H,Z):(this.delay=Z,this.state=H,this.scheduler.flush(this),this)}execute(H,Z){return Z>0||this.closed?super.execute(H,Z):this._execute(H,Z)}requestAsyncId(H,Z,oe=0){return null!=oe&&oe>0||null==oe&&this.delay>0?super.requestAsyncId(H,Z,oe):H.flush(this)}});var eb=se(4986),gl=se(8505),Ch=se(5363),Rm=se(9468);const tb=new d.GfV("7.2.1"),Xl="__angularfire_symbol__analyticsIsSupportedValue",lf="__angularfire_symbol__analyticsIsSupported",rv="__angularfire_symbol__remoteConfigIsSupportedValue",ib="__angularfire_symbol__remoteConfigIsSupported",As="__angularfire_symbol__messagingIsSupportedValue",sb="__angularfire_symbol__messagingIsSupported";function kI(P,H,Z){if(H){if(1===H.length)return H[0];const De=H.filter(Ot=>Ot.app===Z);if(1===De.length)return De[0]}return Z.container.getProvider(P).getImmediate({optional:!0})}globalThis[lf]||(globalThis[lf]=iv().then(P=>globalThis[Xl]=P).catch(()=>globalThis[Xl]=!1)),globalThis[sb]||(globalThis[sb]=Jp().then(P=>globalThis[As]=P).catch(()=>globalThis[As]=!1)),globalThis[ib]||(globalThis[ib]=e0().then(P=>globalThis[rv]=P).catch(()=>globalThis[rv]=!1));const rb=(P,H)=>{const Z=H?[H]:(0,he.C6)(),oe=[];return Z.forEach(_e=>{_e.container.getProvider(P).instances.forEach(Ot=>{oe.includes(Ot)||oe.push(Ot)})}),oe};function il(){}class Am{constructor(H,Z=km){this.zone=H,this.delegate=Z}now(){return this.delegate.now()}schedule(H,Z,oe){const _e=this.zone;return this.delegate.schedule(function(Ot){_e.runGuarded(()=>{H.apply(this,[Ot])})},Z,oe)}}class ob{constructor(H){this.zone=H,this.task=null}call(H,Z){const oe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",il,{},il,il)),Z.pipe((0,gl.b)({next:oe,complete:oe,error:oe})).subscribe(H).add(oe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let h0=(()=>{class P{constructor(Z){this.ngZone=Z,this.outsideAngular=Z.runOutsideAngular(()=>new Am(Zone.current)),this.insideAngular=Z.run(()=>new Am(Zone.current,eb.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(Z){return new(Z||P)(d.LFG(d.R0b))},P.\u0275prov=d.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function _d(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function hf(P){return P.pipe((0,Ch.Q)(_d().outsideAngular))}function Id(P){return _d(),function ab(P){return function(Z){return(Z=Z.lift(new ob(P.ngZone))).pipe((0,Rm.R)(P.outsideAngular),(0,Ch.Q)(P.insideAngular))}}(_d())(P)}},4929:(Li,Et,se)=>{"use strict";se.d(Et,{$:()=>r0,A:()=>pe,E:()=>Ns,G:()=>ul,I:()=>bd,K:()=>Qo,L:()=>e0,M:()=>t0,N:()=>am,P:()=>tb,Q:()=>lm,R:()=>sv,T:()=>ec,U:()=>cm,V:()=>Kp,W:()=>US,X:()=>Jo,Y:()=>oo,Z:()=>Pa,_:()=>sc,a:()=>ei,a0:()=>Ny,a1:()=>By,a2:()=>_t,a3:()=>Vy,a4:()=>Xp,a5:()=>bh,a6:()=>zy,a7:()=>DI,a8:()=>o0,a9:()=>vd,aA:()=>co,aB:()=>ab,aC:()=>jn,aG:()=>Fn,aJ:()=>hm,aa:()=>cu,ab:()=>jy,ae:()=>bm,af:()=>qy,ag:()=>Wy,aj:()=>n0,ak:()=>$S,am:()=>$y,an:()=>Kg,ao:()=>no,ap:()=>Re,aq:()=>Ps,ar:()=>Mi,as:()=>kt,at:()=>JS,au:()=>d0,av:()=>et,aw:()=>He,ax:()=>tt,ay:()=>Rs,az:()=>sl,b:()=>ir,c:()=>nb,d:()=>il,e:()=>kI,f:()=>P,g:()=>Ot,h:()=>oe,i:()=>Sd,j:()=>bn,k:()=>Dd,l:()=>Oo,m:()=>PI,o:()=>$e,r:()=>km,s:()=>Ed,u:()=>Ch,z:()=>Tt});var d=se(5861),he=se(2090),J=se(9681),Ge=se(655),Ue=se(1877),ot=se(4859);const $e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},pe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Tt=function Ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ft=function $t(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Wt=new he.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new Ue.Yd("@firebase/auth");function Dt(R,...x){Xe.logLevel<=Ue.in.ERROR&&Xe.error(`Auth (${J.SDK_VERSION}): ${R}`,...x)}function kt(R,...x){throw ni(R,...x)}function et(R,...x){return ni(R,...x)}function vt(R,x,I){const M=Object.assign(Object.assign({},Ft()),{[x]:I});return new he.LL("auth","Firebase",M).create(x,{appName:R.name})}function ct(R,x,I){if(!(x instanceof I))throw I.name!==x.constructor.name&&kt(R,"argument-error"),vt(R,"argument-error",`Type of ${x.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ni(R,...x){if("string"!=typeof R){const I=x[0],M=[...x.slice(1)];return M[0]&&(M[0].appName=R.name),R._errorFactory.create(I,...M)}return Wt.create(R,...x)}function He(R,x,...I){if(!R)throw ni(x,...I)}function pi(R){const x="INTERNAL ASSERTION FAILED: "+R;throw Dt(x),new Error(x)}function Re(R,x){R||pi(x)}const it=new Map;function tt(R){Re(R instanceof Function,"Expected a class definition");let x=it.get(R);return x?(Re(x instanceof R,"Instance stored in cache mismatched with class"),x):(x=new R,it.set(R,x),x)}function Qe(){var R;return"undefined"!=typeof self&&(null===(R=self.location)||void 0===R?void 0:R.href)||""}function ns(){return"http:"===xn()||"https:"===xn()}function xn(){var R;return"undefined"!=typeof self&&(null===(R=self.location)||void 0===R?void 0:R.protocol)||null}class Ri{constructor(x,I){this.shortDelay=x,this.longDelay=I,Re(I>x,"Short delay should be less than long delay!"),this.isMobile=(0,he.uI)()||(0,he.b$)()}get(){return function Ur(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ns()||(0,he.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zo(R,x){Re(R.emulator,"Emulator should always be set here");const{url:I}=R.emulator;return x?`${I}${x.startsWith("/")?x.slice(1):x}`:I}class Vn{static initialize(x,I,M){this.fetchImpl=x,I&&(this.headersImpl=I),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ma={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},En=new Ri(3e4,6e4);function ln(R,x){return R.tenantId&&!x.tenantId?Object.assign(Object.assign({},x),{tenantId:R.tenantId}):x}function An(R,x,I,M){return fr.apply(this,arguments)}function fr(){return(fr=(0,d.Z)(function*(R,x,I,M,Y={}){return Xh(R,Y,(0,d.Z)(function*(){let ne={},Fe={};M&&("GET"===x?Fe=M:ne={body:JSON.stringify(M)});const At=(0,he.xO)(Object.assign({key:R.config.apiKey},Fe)).slice(1),Ii=yield R._getAdditionalHeaders();return Ii["Content-Type"]="application/json",R.languageCode&&(Ii["X-Firebase-Locale"]=R.languageCode),Vn.fetch()(fh(R,R.config.apiHost,I,At),Object.assign({method:x,headers:Ii,referrerPolicy:"no-referrer"},ne))}))})).apply(this,arguments)}function Xh(R,x,I){return To.apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(R,x,I){R._canInitEmulator=!1;const M=Object.assign(Object.assign({},ma),x);try{const Y=new Qh(R),ne=yield Promise.race([I(),Y.promise]);Y.clearNetworkTimeout();const Fe=yield ne.json();if("needConfirmation"in Fe)throw so(R,"account-exists-with-different-credential",Fe);if(ne.ok&&!("errorMessage"in Fe))return Fe;{const At=ne.ok?Fe.errorMessage:Fe.error.message,[Ii,es]=At.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ii)throw so(R,"credential-already-in-use",Fe);if("EMAIL_EXISTS"===Ii)throw so(R,"email-already-in-use",Fe);const ms=M[Ii]||Ii.toLowerCase().replace(/[_\s]+/g,"-");if(es)throw vt(R,ms,es);kt(R,ms)}}catch(Y){if(Y instanceof he.ZR)throw Y;kt(R,"network-request-failed")}})).apply(this,arguments)}function Ma(R,x,I,M){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,d.Z)(function*(R,x,I,M,Y={}){const ne=yield An(R,x,I,M,Y);return"mfaPendingCredential"in ne&&kt(R,"multi-factor-auth-required",{_serverResponse:ne}),ne})).apply(this,arguments)}function fh(R,x,I,M){const Y=`${x}${I}?${M}`;return R.config.emulator?Zo(R.config,Y):`${R.config.apiScheme}://${Y}`}class Qh{constructor(x){this.auth=x,this.timer=null,this.promise=new Promise((I,M)=>{this.timer=setTimeout(()=>M(et(this.auth,"network-request-failed")),En.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function so(R,x,I){const M={appName:R.name};I.email&&(M.email=I.email),I.phoneNumber&&(M.phoneNumber=I.phoneNumber);const Y=et(R,x,M);return Y.customData._tokenResponse=I,Y}function Gi(){return(Gi=(0,d.Z)(function*(R,x){return An(R,"POST","/v1/accounts:delete",x)})).apply(this,arguments)}function Xa(R,x){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,d.Z)(function*(R,x){return An(R,"POST","/v1/accounts:update",x)})).apply(this,arguments)}function fn(R,x){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,d.Z)(function*(R,x){return An(R,"POST","/v1/accounts:lookup",x)})).apply(this,arguments)}function qi(R){if(R)try{const x=new Date(Number(R));if(!isNaN(x.getTime()))return x.toUTCString()}catch(x){}}function _n(){return(_n=(0,d.Z)(function*(R,x=!1){const I=(0,he.m9)(R),M=yield I.getIdToken(x),Y=ws(M);He(Y&&Y.exp&&Y.auth_time&&Y.iat,I.auth,"internal-error");const ne="object"==typeof Y.firebase?Y.firebase:void 0,Fe=null==ne?void 0:ne.sign_in_provider;return{claims:Y,token:M,authTime:qi(Xo(Y.auth_time)),issuedAtTime:qi(Xo(Y.iat)),expirationTime:qi(Xo(Y.exp)),signInProvider:Fe||null,signInSecondFactor:(null==ne?void 0:ne.sign_in_second_factor)||null}})).apply(this,arguments)}function Xo(R){return 1e3*Number(R)}function ws(R){const[x,I,M]=R.split(".");if(void 0===x||void 0===I||void 0===M)return Dt("JWT malformed, contained fewer than 3 sections"),null;try{const Y=(0,he.tV)(I);return Y?JSON.parse(Y):(Dt("Failed to decode base64 JWT payload"),null)}catch(Y){return Dt("Caught error parsing JWT payload as JSON",Y),null}}function fi(R,x){return iu.apply(this,arguments)}function iu(){return(iu=(0,d.Z)(function*(R,x,I=!1){if(I)return x;try{return yield x}catch(M){throw M instanceof he.ZR&&gd(M)&&R.auth.currentUser===R&&(yield R.auth.signOut()),M}})).apply(this,arguments)}function gd({code:R}){return"auth/user-disabled"===R||"auth/user-token-expired"===R}class Xs{constructor(x){this.user=x,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(x){var I;if(x){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const Y=(null!==(I=this.user.stsTokenManager.expirationTime)&&void 0!==I?I:0)-Date.now()-3e5;return Math.max(0,Y)}}schedule(x=!1){var I=this;if(!this.isRunning)return;const M=this.getInterval(x);this.timerId=setTimeout((0,d.Z)(function*(){yield I.iteration()}),M)}iteration(){var x=this;return(0,d.Z)(function*(){try{yield x.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===I.code&&x.schedule(!0))}x.schedule()})()}}class su{constructor(x,I){this.createdAt=x,this.lastLoginAt=I,this._initializeTime()}_initializeTime(){this.lastSignInTime=qi(this.lastLoginAt),this.creationTime=qi(this.createdAt)}_copy(x){this.createdAt=x.createdAt,this.lastLoginAt=x.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Do(R){return ar.apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*(R){var x;const I=R.auth,M=yield R.getIdToken(),Y=yield fi(R,fn(I,{idToken:M}));He(null==Y?void 0:Y.users.length,I,"internal-error");const ne=Y.users[0];R._notifyReloadListener(ne);const Fe=(null===(x=ne.providerUserInfo)||void 0===x?void 0:x.length)?gt(ne.providerUserInfo):[],At=Se(R.providerData,Fe),ms=!!R.isAnonymous&&!(R.email&&ne.passwordHash||(null==At?void 0:At.length)),$r={uid:ne.localId,displayName:ne.displayName||null,photoURL:ne.photoUrl||null,email:ne.email||null,emailVerified:ne.emailVerified||!1,phoneNumber:ne.phoneNumber||null,tenantId:ne.tenantId||null,providerData:At,metadata:new su(ne.createdAt,ne.lastLoginAt),isAnonymous:ms};Object.assign(R,$r)})).apply(this,arguments)}function ye(){return(ye=(0,d.Z)(function*(R){const x=(0,he.m9)(R);yield Do(x),yield x.auth._persistUserIfCurrent(x),x.auth._notifyListenersIfCurrent(x)})).apply(this,arguments)}function Se(R,x){return[...R.filter(M=>!x.some(Y=>Y.providerId===M.providerId)),...x]}function gt(R){return R.map(x=>{var{providerId:I}=x,M=(0,Ge._T)(x,["providerId"]);return{providerId:I,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}function ri(){return(ri=(0,d.Z)(function*(R,x){const I=yield Xh(R,{},(0,d.Z)(function*(){const M=(0,he.xO)({grant_type:"refresh_token",refresh_token:x}).slice(1),{tokenApiHost:Y,apiKey:ne}=R.config,Fe=fh(R,Y,"/v1/token",`key=${ne}`),At=yield R._getAdditionalHeaders();return At["Content-Type"]="application/x-www-form-urlencoded",Vn.fetch()(Fe,{method:"POST",headers:At,body:M})}));return{accessToken:I.access_token,expiresIn:I.expires_in,refreshToken:I.refresh_token}})).apply(this,arguments)}class Wi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(x){He(x.idToken,"internal-error"),He(void 0!==x.idToken,"internal-error"),He(void 0!==x.refreshToken,"internal-error");const I="expiresIn"in x&&void 0!==x.expiresIn?Number(x.expiresIn):function Ai(R){const x=ws(R);return He(x,"internal-error"),He(void 0!==x.exp,"internal-error"),He(void 0!==x.iat,"internal-error"),Number(x.exp)-Number(x.iat)}(x.idToken);this.updateTokensAndExpiration(x.idToken,x.refreshToken,I)}getToken(x,I=!1){var M=this;return(0,d.Z)(function*(){return He(!M.accessToken||M.refreshToken,x,"user-token-expired"),I||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(x,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(x,I){var M=this;return(0,d.Z)(function*(){const{accessToken:Y,refreshToken:ne,expiresIn:Fe}=yield function ze(R,x){return ri.apply(this,arguments)}(x,I);M.updateTokensAndExpiration(Y,ne,Number(Fe))})()}updateTokensAndExpiration(x,I,M){this.refreshToken=I||null,this.accessToken=x||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(x,I){const{refreshToken:M,accessToken:Y,expirationTime:ne}=I,Fe=new Wi;return M&&(He("string"==typeof M,"internal-error",{appName:x}),Fe.refreshToken=M),Y&&(He("string"==typeof Y,"internal-error",{appName:x}),Fe.accessToken=Y),ne&&(He("number"==typeof ne,"internal-error",{appName:x}),Fe.expirationTime=ne),Fe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(x){this.accessToken=x.accessToken,this.refreshToken=x.refreshToken,this.expirationTime=x.expirationTime}_clone(){return Object.assign(new Wi,this.toJSON())}_performRefresh(){return pi("not implemented")}}function mn(R,x){He("string"==typeof R||void 0===R,"internal-error",{appName:x})}class zn{constructor(x){var{uid:I,auth:M,stsTokenManager:Y}=x,ne=(0,Ge._T)(x,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=I,this.auth=M,this.stsTokenManager=Y,this.accessToken=Y.accessToken,this.displayName=ne.displayName||null,this.email=ne.email||null,this.emailVerified=ne.emailVerified||!1,this.phoneNumber=ne.phoneNumber||null,this.photoURL=ne.photoURL||null,this.isAnonymous=ne.isAnonymous||!1,this.tenantId=ne.tenantId||null,this.providerData=ne.providerData?[...ne.providerData]:[],this.metadata=new su(ne.createdAt||void 0,ne.lastLoginAt||void 0)}getIdToken(x){var I=this;return(0,d.Z)(function*(){const M=yield fi(I,I.stsTokenManager.getToken(I.auth,x));return He(M,I.auth,"internal-error"),I.accessToken!==M&&(I.accessToken=M,yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)),M})()}getIdTokenResult(x){return function fs(R){return _n.apply(this,arguments)}(this,x)}reload(){return function de(R){return ye.apply(this,arguments)}(this)}_assign(x){this!==x&&(He(this.uid===x.uid,this.auth,"internal-error"),this.displayName=x.displayName,this.photoURL=x.photoURL,this.email=x.email,this.emailVerified=x.emailVerified,this.phoneNumber=x.phoneNumber,this.isAnonymous=x.isAnonymous,this.tenantId=x.tenantId,this.providerData=x.providerData.map(I=>Object.assign({},I)),this.metadata._copy(x.metadata),this.stsTokenManager._assign(x.stsTokenManager))}_clone(x){return new zn(Object.assign(Object.assign({},this),{auth:x,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(x){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=x,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(x){this.reloadListener?this.reloadListener(x):this.reloadUserInfo=x}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(x,I=!1){var M=this;return(0,d.Z)(function*(){let Y=!1;x.idToken&&x.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(x),Y=!0),I&&(yield Do(M)),yield M.auth._persistUserIfCurrent(M),Y&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var x=this;return(0,d.Z)(function*(){const I=yield x.getIdToken();return yield fi(x,function Mc(R,x){return Gi.apply(this,arguments)}(x.auth,{idToken:I})),x.stsTokenManager.clearRefreshToken(),x.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(x=>Object.assign({},x)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(x,I){var M,Y,ne,Fe,At,Ii,es,ms;const $r=null!==(M=I.displayName)&&void 0!==M?M:void 0,Jl=null!==(Y=I.email)&&void 0!==Y?Y:void 0,Pm=null!==(ne=I.phoneNumber)&&void 0!==ne?ne:void 0,pb=null!==(Fe=I.photoURL)&&void 0!==Fe?Fe:void 0,w0=null!==(At=I.tenantId)&&void 0!==At?At:void 0,cv=null!==(Ii=I._redirectEventId)&&void 0!==Ii?Ii:void 0,dv=null!==(es=I.createdAt)&&void 0!==es?es:void 0,uv=null!==(ms=I.lastLoginAt)&&void 0!==ms?ms:void 0,{uid:S0,emailVerified:fb,isAnonymous:x0,providerData:tx,stsTokenManager:ix}=I;He(S0&&ix,x,"internal-error");const sx=Wi.fromJSON(this.name,ix);He("string"==typeof S0,x,"internal-error"),mn($r,x.name),mn(Jl,x.name),He("boolean"==typeof fb,x,"internal-error"),He("boolean"==typeof x0,x,"internal-error"),mn(Pm,x.name),mn(pb,x.name),mn(w0,x.name),mn(cv,x.name),mn(dv,x.name),mn(uv,x.name);const mb=new zn({uid:S0,auth:x,email:Jl,emailVerified:fb,displayName:$r,isAnonymous:x0,photoURL:pb,phoneNumber:Pm,tenantId:w0,stsTokenManager:sx,createdAt:dv,lastLoginAt:uv});return tx&&Array.isArray(tx)&&(mb.providerData=tx.map(BI=>Object.assign({},BI))),cv&&(mb._redirectEventId=cv),mb}static _fromIdTokenResponse(x,I,M=!1){return(0,d.Z)(function*(){const Y=new Wi;Y.updateFromServerResponse(I);const ne=new zn({uid:I.localId,auth:x,stsTokenManager:Y,isAnonymous:M});return yield Do(ne),ne})()}}const Qo=(()=>{class R{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(I,M){var Y=this;return(0,d.Z)(function*(){Y.storage[I]=M})()}_get(I){var M=this;return(0,d.Z)(function*(){const Y=M.storage[I];return void 0===Y?null:Y})()}_remove(I){var M=this;return(0,d.Z)(function*(){delete M.storage[I]})()}_addListener(I,M){}_removeListener(I,M){}}return R.type="NONE",R})();function Rs(R,x,I){return`firebase:${R}:${x}:${I}`}class Ro{constructor(x,I,M){this.persistence=x,this.auth=I,this.userKey=M;const{config:Y,name:ne}=this.auth;this.fullUserKey=Rs(this.userKey,Y.apiKey,ne),this.fullPersistenceKey=Rs("persistence",Y.apiKey,ne),this.boundEventHandler=I._onStorageEvent.bind(I),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(x){return this.persistence._set(this.fullUserKey,x.toJSON())}getCurrentUser(){var x=this;return(0,d.Z)(function*(){const I=yield x.persistence._get(x.fullUserKey);return I?zn._fromJSON(x.auth,I):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(x){var I=this;return(0,d.Z)(function*(){if(I.persistence===x)return;const M=yield I.getCurrentUser();return yield I.removeCurrentUser(),I.persistence=x,M?I.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(x,I,M="authUser"){return(0,d.Z)(function*(){if(!I.length)return new Ro(tt(Qo),x,M);const Y=(yield Promise.all(I.map(function(){var es=(0,d.Z)(function*(ms){if(yield ms._isAvailable())return ms});return function(ms){return es.apply(this,arguments)}}()))).filter(es=>es);let ne=Y[0]||tt(Qo);const Fe=Rs(M,x.config.apiKey,x.name);let At=null;for(const es of I)try{const ms=yield es._get(Fe);if(ms){const $r=zn._fromJSON(x,ms);es!==ne&&(At=$r),ne=es;break}}catch(ms){}const Ii=Y.filter(es=>es._shouldAllowMigration);return ne._shouldAllowMigration&&Ii.length?(ne=Ii[0],At&&(yield ne._set(Fe,At.toJSON())),yield Promise.all(I.map(function(){var es=(0,d.Z)(function*(ms){if(ms!==ne)try{yield ms._remove(Fe)}catch($r){}});return function(ms){return es.apply(this,arguments)}}())),new Ro(ne,x,M)):new Ro(ne,x,M)})()}}function qe(R){const x=R.toLowerCase();if(x.includes("opera/")||x.includes("opr/")||x.includes("opios/"))return"Opera";if(Jt(x))return"IEMobile";if(x.includes("msie")||x.includes("trident/"))return"IE";if(x.includes("edge/"))return"Edge";if(we(x))return"Firefox";if(x.includes("silk/"))return"Silk";if(Ss(x))return"Blackberry";if($s(x))return"Webos";if(ve(x))return"Safari";if((x.includes("chrome/")||xt(x))&&!x.includes("edge/"))return"Chrome";if(Mi(x))return"Android";{const M=R.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==M?void 0:M.length))return M[1]}return"Other"}function we(R=(0,he.z$)()){return/firefox\//i.test(R)}function ve(R=(0,he.z$)()){const x=R.toLowerCase();return x.includes("safari/")&&!x.includes("chrome/")&&!x.includes("crios/")&&!x.includes("android")}function xt(R=(0,he.z$)()){return/crios\//i.test(R)}function Jt(R=(0,he.z$)()){return/iemobile/i.test(R)}function Mi(R=(0,he.z$)()){return/android/i.test(R)}function Ss(R=(0,he.z$)()){return/blackberry/i.test(R)}function $s(R=(0,he.z$)()){return/webos/i.test(R)}function Ps(R=(0,he.z$)()){return/iphone|ipad|ipod/i.test(R)}function no(R=(0,he.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(R)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(R)}function Qa(R=(0,he.z$)()){return Ps(R)||Mi(R)||$s(R)||Ss(R)||/windows phone/i.test(R)||Jt(R)}function ga(R,x=[]){let I;switch(R){case"Browser":I=qe((0,he.z$)());break;case"Worker":I=`${qe((0,he.z$)())}-${R}`;break;default:I=R}const M=x.length?x.join(","):"FirebaseCore-web";return`${I}/JsCore/${J.SDK_VERSION}/${M}`}class tm{constructor(x,I){this.app=x,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ai(this),this.idTokenSubscription=new ai(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=x.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(x,I){var M=this;return I&&(this._popupRedirectResolver=tt(I)),this._initializationPromise=this.queue((0,d.Z)(function*(){var Y,ne;if(!M._deleted&&(M.persistenceManager=yield Ro.create(M,x),!M._deleted)){if(null===(Y=M._popupRedirectResolver)||void 0===Y?void 0:Y._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch(Fe){}yield M.initializeCurrentUser(I),M.lastNotifiedUid=(null===(ne=M.currentUser)||void 0===ne?void 0:ne.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var x=this;return(0,d.Z)(function*(){if(x._deleted)return;const I=yield x.assertedPersistence.getCurrentUser();if(x.currentUser||I){if(x.currentUser&&I&&x.currentUser.uid===I.uid)return x._currentUser._assign(I),void(yield x.currentUser.getIdToken());yield x._updateCurrentUser(I)}})()}initializeCurrentUser(x){var I=this;return(0,d.Z)(function*(){var M;let Y=yield I.assertedPersistence.getCurrentUser();if(x&&I.config.authDomain){yield I.getOrInitRedirectPersistenceManager();const ne=null===(M=I.redirectUser)||void 0===M?void 0:M._redirectEventId,Fe=null==Y?void 0:Y._redirectEventId,At=yield I.tryRedirectSignIn(x);(!ne||ne===Fe)&&(null==At?void 0:At.user)&&(Y=At.user)}return Y?Y._redirectEventId?(He(I._popupRedirectResolver,I,"argument-error"),yield I.getOrInitRedirectPersistenceManager(),I.redirectUser&&I.redirectUser._redirectEventId===Y._redirectEventId?I.directlySetCurrentUser(Y):I.reloadAndSetCurrentUserOrClear(Y)):I.reloadAndSetCurrentUserOrClear(Y):I.directlySetCurrentUser(null)})()}tryRedirectSignIn(x){var I=this;return(0,d.Z)(function*(){let M=null;try{M=yield I._popupRedirectResolver._completeRedirectFn(I,x,!0)}catch(Y){yield I._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(x){var I=this;return(0,d.Z)(function*(){try{yield Do(x)}catch(M){if("auth/network-request-failed"!==M.code)return I.directlySetCurrentUser(null)}return I.directlySetCurrentUser(x)})()}useDeviceLanguage(){this.languageCode=function Pi(){if("undefined"==typeof navigator)return null;const R=navigator;return R.languages&&R.languages[0]||R.language||null}()}_delete(){var x=this;return(0,d.Z)(function*(){x._deleted=!0})()}updateCurrentUser(x){var I=this;return(0,d.Z)(function*(){const M=x?(0,he.m9)(x):null;return M&&He(M.auth.config.apiKey===I.config.apiKey,I,"invalid-user-token"),I._updateCurrentUser(M&&M._clone(I))})()}_updateCurrentUser(x){var I=this;return(0,d.Z)(function*(){if(!I._deleted)return x&&He(I.tenantId===x.tenantId,I,"tenant-id-mismatch"),I.queue((0,d.Z)(function*(){yield I.directlySetCurrentUser(x),I.notifyAuthListeners()}))})()}signOut(){var x=this;return(0,d.Z)(function*(){return(x.redirectPersistenceManager||x._popupRedirectResolver)&&(yield x._setRedirectUser(null)),x._updateCurrentUser(null)})()}setPersistence(x){var I=this;return this.queue((0,d.Z)(function*(){yield I.assertedPersistence.setPersistence(tt(x))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(x){this._errorFactory=new he.LL("auth","Firebase",x())}onAuthStateChanged(x,I,M){return this.registerStateListener(this.authStateSubscription,x,I,M)}onIdTokenChanged(x,I,M){return this.registerStateListener(this.idTokenSubscription,x,I,M)}toJSON(){var x;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(x=this._currentUser)||void 0===x?void 0:x.toJSON()}}_setRedirectUser(x,I){var M=this;return(0,d.Z)(function*(){const Y=yield M.getOrInitRedirectPersistenceManager(I);return null===x?Y.removeCurrentUser():Y.setCurrentUser(x)})()}getOrInitRedirectPersistenceManager(x){var I=this;return(0,d.Z)(function*(){if(!I.redirectPersistenceManager){const M=x&&tt(x)||I._popupRedirectResolver;He(M,I,"argument-error"),I.redirectPersistenceManager=yield Ro.create(I,[tt(M._redirectPersistence)],"redirectUser"),I.redirectUser=yield I.redirectPersistenceManager.getCurrentUser()}return I.redirectPersistenceManager})()}_redirectUserForId(x){var I=this;return(0,d.Z)(function*(){var M,Y;return I._isInitialized&&(yield I.queue((0,d.Z)(function*(){}))),(null===(M=I._currentUser)||void 0===M?void 0:M._redirectEventId)===x?I._currentUser:(null===(Y=I.redirectUser)||void 0===Y?void 0:Y._redirectEventId)===x?I.redirectUser:null})()}_persistUserIfCurrent(x){var I=this;return(0,d.Z)(function*(){if(x===I.currentUser)return I.queue((0,d.Z)(function*(){return I.directlySetCurrentUser(x)}))})()}_notifyListenersIfCurrent(x){x===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var x,I;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(I=null===(x=this.currentUser)||void 0===x?void 0:x.uid)&&void 0!==I?I:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(x,I,M,Y){if(this._deleted)return()=>{};const ne="function"==typeof I?I:I.next.bind(I),Fe=this._isInitialized?Promise.resolve():this._initializationPromise;return He(Fe,this,"internal-error"),Fe.then(()=>ne(this.currentUser)),"function"==typeof I?x.addObserver(I,M,Y):x.addObserver(I)}directlySetCurrentUser(x){var I=this;return(0,d.Z)(function*(){I.currentUser&&I.currentUser!==x&&(I._currentUser._stopProactiveRefresh(),x&&I.isProactiveRefreshEnabled&&x._startProactiveRefresh()),I.currentUser=x,x?yield I.assertedPersistence.setCurrentUser(x):yield I.assertedPersistence.removeCurrentUser()})()}queue(x){return this.operations=this.operations.then(x,x),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(x){!x||this.frameworks.includes(x)||(this.frameworks.push(x),this.frameworks.sort(),this.clientVersion=ga(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var x=this;return(0,d.Z)(function*(){const I={"X-Client-Version":x.clientVersion};return x.app.options.appId&&(I["X-Firebase-gmpid"]=x.app.options.appId),I})()}}function jn(R){return(0,he.m9)(R)}class ai{constructor(x){this.auth=x,this.observer=null,this.addObserver=(0,he.ne)(I=>this.observer=I)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ns(R,x,I){const M=jn(R);He(M._canInitEmulator,M,"emulator-config-failed"),He(/^https?:\/\//.test(x),M,"invalid-emulator-scheme");const Y=!!(null==I?void 0:I.disableWarnings),ne=Yn(x),{host:Fe,port:At}=function Gl(R){const x=Yn(R),I=/(\/\/)?([^?#/]+)/.exec(R.substr(x.length));if(!I)return{host:"",port:null};const M=I[2].split("@").pop()||"",Y=/^(\[[^\]]+\])(:|$)/.exec(M);if(Y){const ne=Y[1];return{host:ne,port:Pc(M.substr(ne.length+1))}}{const[ne,Fe]=M.split(":");return{host:ne,port:Pc(Fe)}}}(x);M.config.emulator={url:`${ne}//${Fe}${null===At?"":`:${At}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:Fe,port:At,protocol:ne.replace(":",""),options:Object.freeze({disableWarnings:Y})}),Y||function Ao(){function R(){const x=document.createElement("p"),I=x.style;x.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",x.classList.add("firebase-emulator-warning"),document.body.appendChild(x)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",R):R())}()}function Yn(R){const x=R.indexOf(":");return x<0?"":R.substr(0,x+1)}function Pc(R){if(!R)return null;const x=Number(R);return isNaN(x)?null:x}class ul{constructor(x,I){this.providerId=x,this.signInMethod=I}toJSON(){return pi("not implemented")}_getIdTokenResponse(x){return pi("not implemented")}_linkToIdToken(x,I){return pi("not implemented")}_getReauthenticationResolver(x){return pi("not implemented")}}function Jn(R,x){return nu.apply(this,arguments)}function nu(){return(nu=(0,d.Z)(function*(R,x){return An(R,"POST","/v1/accounts:resetPassword",ln(R,x))})).apply(this,arguments)}function ro(R,x){return xs.apply(this,arguments)}function xs(){return(xs=(0,d.Z)(function*(R,x){return An(R,"POST","/v1/accounts:update",x)})).apply(this,arguments)}function Pg(R,x){return $l.apply(this,arguments)}function $l(){return($l=(0,d.Z)(function*(R,x){return An(R,"POST","/v1/accounts:update",ln(R,x))})).apply(this,arguments)}function ru(){return(ru=(0,d.Z)(function*(R,x){return Ma(R,"POST","/v1/accounts:signInWithPassword",ln(R,x))})).apply(this,arguments)}function vr(R,x){return ju.apply(this,arguments)}function ju(){return(ju=(0,d.Z)(function*(R,x){return An(R,"POST","/v1/accounts:sendOobCode",ln(R,x))})).apply(this,arguments)}function im(R,x){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,d.Z)(function*(R,x){return vr(R,x)})).apply(this,arguments)}function er(R,x){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,d.Z)(function*(R,x){return vr(R,x)})).apply(this,arguments)}function sm(R,x){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,d.Z)(function*(R,x){return vr(R,x)})).apply(this,arguments)}function mh(R,x){return nm.apply(this,arguments)}function nm(){return(nm=(0,d.Z)(function*(R,x){return vr(R,x)})).apply(this,arguments)}function Fc(){return(Fc=(0,d.Z)(function*(R,x){return Ma(R,"POST","/v1/accounts:signInWithEmailLink",ln(R,x))})).apply(this,arguments)}function Gp(){return(Gp=(0,d.Z)(function*(R,x){return Ma(R,"POST","/v1/accounts:signInWithEmailLink",ln(R,x))})).apply(this,arguments)}class Bg extends ul{constructor(x,I,M,Y=null){super("password",M),this._email=x,this._password=I,this._tenantId=Y}static _fromEmailAndPassword(x,I){return new Bg(x,I,"password")}static _fromEmailAndCode(x,I,M=null){return new Bg(x,I,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(x){const I="string"==typeof x?JSON.parse(x):x;if((null==I?void 0:I.email)&&(null==I?void 0:I.password)){if("password"===I.signInMethod)return this._fromEmailAndPassword(I.email,I.password);if("emailLink"===I.signInMethod)return this._fromEmailAndCode(I.email,I.password,I.tenantId)}return null}_getIdTokenResponse(x){var I=this;return(0,d.Z)(function*(){switch(I.signInMethod){case"password":return function Fg(R,x){return ru.apply(this,arguments)}(x,{returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function ZC(R,x){return Fc.apply(this,arguments)}(x,{email:I._email,oobCode:I._password});default:kt(x,"internal-error")}})()}_linkToIdToken(x,I){var M=this;return(0,d.Z)(function*(){switch(M.signInMethod){case"password":return ro(x,{idToken:I,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function Nc(R,x){return Gp.apply(this,arguments)}(x,{idToken:I,email:M._email,oobCode:M._password});default:kt(x,"internal-error")}})()}_getReauthenticationResolver(x){return this._getIdTokenResponse(x)}}function ou(R,x){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,d.Z)(function*(R,x){return Ma(R,"POST","/v1/accounts:signInWithIdp",ln(R,x))})).apply(this,arguments)}class bd extends ul{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(x){const I=new bd(x.providerId,x.signInMethod);return x.idToken||x.accessToken?(x.idToken&&(I.idToken=x.idToken),x.accessToken&&(I.accessToken=x.accessToken),x.nonce&&!x.pendingToken&&(I.nonce=x.nonce),x.pendingToken&&(I.pendingToken=x.pendingToken)):x.oauthToken&&x.oauthTokenSecret?(I.accessToken=x.oauthToken,I.secret=x.oauthTokenSecret):kt("argument-error"),I}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(x){const I="string"==typeof x?JSON.parse(x):x,{providerId:M,signInMethod:Y}=I,ne=(0,Ge._T)(I,["providerId","signInMethod"]);if(!M||!Y)return null;const Fe=new bd(M,Y);return Fe.idToken=ne.idToken||void 0,Fe.accessToken=ne.accessToken||void 0,Fe.secret=ne.secret,Fe.nonce=ne.nonce,Fe.pendingToken=ne.pendingToken||null,Fe}_getIdTokenResponse(x){return ou(x,this.buildRequest())}_linkToIdToken(x,I){const M=this.buildRequest();return M.idToken=I,ou(x,M)}_getReauthenticationResolver(x){const I=this.buildRequest();return I.autoCreate=!1,ou(x,I)}buildRequest(){const x={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)x.pendingToken=this.pendingToken;else{const I={};this.idToken&&(I.id_token=this.idToken),this.accessToken&&(I.access_token=this.accessToken),this.secret&&(I.oauth_token_secret=this.secret),I.providerId=this.providerId,this.nonce&&!this.pendingToken&&(I.nonce=this.nonce),x.postBody=(0,he.xO)(I)}return x}}function SI(R,x){return XC.apply(this,arguments)}function XC(){return(XC=(0,d.Z)(function*(R,x){return An(R,"POST","/v1/accounts:sendVerificationCode",ln(R,x))})).apply(this,arguments)}function QC(){return(QC=(0,d.Z)(function*(R,x){return Ma(R,"POST","/v1/accounts:signInWithPhoneNumber",ln(R,x))})).apply(this,arguments)}function au(){return(au=(0,d.Z)(function*(R,x){const I=yield Ma(R,"POST","/v1/accounts:signInWithPhoneNumber",ln(R,x));if(I.temporaryProof)throw so(R,"account-exists-with-different-credential",I);return I})).apply(this,arguments)}const EI={USER_NOT_FOUND:"user-not-found"};function JC(){return(JC=(0,d.Z)(function*(R,x){return Ma(R,"POST","/v1/accounts:signInWithPhoneNumber",ln(R,Object.assign(Object.assign({},x),{operation:"REAUTH"})),EI)})).apply(this,arguments)}class $p extends ul{constructor(x){super("phone","phone"),this.params=x}static _fromVerification(x,I){return new $p({verificationId:x,verificationCode:I})}static _fromTokenResponse(x,I){return new $p({phoneNumber:x,temporaryProof:I})}_getIdTokenResponse(x){return function xI(R,x){return QC.apply(this,arguments)}(x,this._makeVerificationRequest())}_linkToIdToken(x,I){return function My(R,x){return au.apply(this,arguments)}(x,Object.assign({idToken:I},this._makeVerificationRequest()))}_getReauthenticationResolver(x){return function _I(R,x){return JC.apply(this,arguments)}(x,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:x,phoneNumber:I,verificationId:M,verificationCode:Y}=this.params;return x&&I?{temporaryProof:x,phoneNumber:I}:{sessionInfo:M,code:Y}}toJSON(){const x={providerId:this.providerId};return this.params.phoneNumber&&(x.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(x.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(x.verificationCode=this.params.verificationCode),this.params.verificationId&&(x.verificationId=this.params.verificationId),x}static fromJSON(x){"string"==typeof x&&(x=JSON.parse(x));const{verificationId:I,verificationCode:M,phoneNumber:Y,temporaryProof:ne}=x;return M||I||Y||ne?new $p({verificationId:I,verificationCode:M,phoneNumber:Y,temporaryProof:ne}):null}}class rm{constructor(x){var I,M,Y,ne,Fe,At;const Ii=(0,he.zd)((0,he.pd)(x)),es=null!==(I=Ii.apiKey)&&void 0!==I?I:null,ms=null!==(M=Ii.oobCode)&&void 0!==M?M:null,$r=function II(R){switch(R){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Y=Ii.mode)&&void 0!==Y?Y:null);He(es&&ms&&$r,"argument-error"),this.apiKey=es,this.operation=$r,this.code=ms,this.continueUrl=null!==(ne=Ii.continueUrl)&&void 0!==ne?ne:null,this.languageCode=null!==(Fe=Ii.languageCode)&&void 0!==Fe?Fe:null,this.tenantId=null!==(At=Ii.tenantId)&&void 0!==At?At:null}static parseLink(x){const I=function TI(R){const x=(0,he.zd)((0,he.pd)(R)).link,I=x?(0,he.zd)((0,he.pd)(x)).deep_link_id:null,M=(0,he.zd)((0,he.pd)(R)).deep_link_id;return(M?(0,he.zd)((0,he.pd)(M)).link:null)||M||I||x||R}(x);try{return new rm(I)}catch(M){return null}}}let e0=(()=>{class R{constructor(){this.providerId=R.PROVIDER_ID}static credential(I,M){return Bg._fromEmailAndPassword(I,M)}static credentialWithLink(I,M){const Y=rm.parseLink(M);return He(Y,"argument-error"),Bg._fromEmailAndCode(I,Y.code,Y.tenantId)}}return R.PROVIDER_ID="password",R.EMAIL_PASSWORD_SIGN_IN_METHOD="password",R.EMAIL_LINK_SIGN_IN_METHOD="emailLink",R})();class Jh{constructor(x){this.providerId=x,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(x){this.defaultLanguageCode=x}setCustomParameters(x){return this.customParameters=x,this}getCustomParameters(){return this.customParameters}}class om extends Jh{constructor(){super(...arguments),this.scopes=[]}addScope(x){return this.scopes.includes(x)||this.scopes.push(x),this}getScopes(){return[...this.scopes]}}class ec extends om{static credentialFromJSON(x){const I="string"==typeof x?JSON.parse(x):x;return He("providerId"in I&&"signInMethod"in I,"argument-error"),bd._fromParams(I)}credential(x){return this._credential(Object.assign(Object.assign({},x),{nonce:x.rawNonce}))}_credential(x){return He(x.idToken||x.accessToken,"argument-error"),bd._fromParams(Object.assign(Object.assign({},x),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(x){return ec.oauthCredentialFromTaggedObject(x)}static credentialFromError(x){return ec.oauthCredentialFromTaggedObject(x.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:x}){if(!x)return null;const{oauthIdToken:I,oauthAccessToken:M,oauthTokenSecret:Y,pendingToken:ne,nonce:Fe,providerId:At}=x;if(!M&&!Y&&!I&&!ne||!At)return null;try{return new ec(At)._credential({idToken:I,accessToken:M,nonce:Fe,pendingToken:ne})}catch(Ii){return null}}}let t0=(()=>{class R extends om{constructor(){super("facebook.com")}static credential(I){return bd._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.FACEBOOK_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return R.credential(I.oauthAccessToken)}catch(M){return null}}}return R.FACEBOOK_SIGN_IN_METHOD="facebook.com",R.PROVIDER_ID="facebook.com",R})(),am=(()=>{class R extends om{constructor(){super("google.com"),this.addScope("profile")}static credential(I,M){return bd._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.GOOGLE_SIGN_IN_METHOD,idToken:I,accessToken:M})}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:M,oauthAccessToken:Y}=I;if(!M&&!Y)return null;try{return R.credential(M,Y)}catch(ne){return null}}}return R.GOOGLE_SIGN_IN_METHOD="google.com",R.PROVIDER_ID="google.com",R})(),lm=(()=>{class R extends om{constructor(){super("github.com")}static credential(I){return bd._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.GITHUB_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return R.credential(I.oauthAccessToken)}catch(M){return null}}}return R.GITHUB_SIGN_IN_METHOD="github.com",R.PROVIDER_ID="github.com",R})();class hm extends ul{constructor(x,I){super(x,x),this.pendingToken=I}_getIdTokenResponse(x){return ou(x,this.buildRequest())}_linkToIdToken(x,I){const M=this.buildRequest();return M.idToken=I,ou(x,M)}_getReauthenticationResolver(x){const I=this.buildRequest();return I.autoCreate=!1,ou(x,I)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(x){const I="string"==typeof x?JSON.parse(x):x,{providerId:M,signInMethod:Y,pendingToken:ne}=I;return M&&Y&&ne&&M===Y?new hm(M,ne):null}static _create(x,I){return new hm(x,I)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class cm extends Jh{constructor(x){He(x.startsWith("saml."),"argument-error"),super(x)}static credentialFromResult(x){return cm.samlCredentialFromTaggedObject(x)}static credentialFromError(x){return cm.samlCredentialFromTaggedObject(x.customData||{})}static credentialFromJSON(x){const I=hm.fromJSON(x);return He(I,"argument-error"),I}static samlCredentialFromTaggedObject({_tokenResponse:x}){if(!x)return null;const{pendingToken:I,providerId:M}=x;if(!I||!M)return null;try{return hm._create(M,I)}catch(Y){return null}}}let Kp=(()=>{class R extends om{constructor(){super("twitter.com")}static credential(I,M){return bd._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.TWITTER_SIGN_IN_METHOD,oauthToken:I,oauthTokenSecret:M})}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthAccessToken:M,oauthTokenSecret:Y}=I;if(!M||!Y)return null;try{return R.credential(M,Y)}catch(ne){return null}}}return R.TWITTER_SIGN_IN_METHOD="twitter.com",R.PROVIDER_ID="twitter.com",R})();function gh(R,x){return Oy.apply(this,arguments)}function Oy(){return(Oy=(0,d.Z)(function*(R,x){return Ma(R,"POST","/v1/accounts:signUp",ln(R,x))})).apply(this,arguments)}class hn{constructor(x){this.user=x.user,this.providerId=x.providerId,this._tokenResponse=x._tokenResponse,this.operationType=x.operationType}static _fromIdTokenResponse(x,I,M,Y=!1){return(0,d.Z)(function*(){const ne=yield zn._fromIdTokenResponse(x,M,Y),Fe=tc(M);return new hn({user:ne,providerId:Fe,_tokenResponse:M,operationType:I})})()}static _forOperation(x,I,M){return(0,d.Z)(function*(){yield x._updateTokensIfNecessary(M,!0);const Y=tc(M);return new hn({user:x,providerId:Y,_tokenResponse:M,operationType:I})})()}}function tc(R){return R.providerId?R.providerId:"phoneNumber"in R?"phone":null}function US(R){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,d.Z)(function*(R){var x;const I=jn(R);if(yield I._initializationPromise,null===(x=I.currentUser)||void 0===x?void 0:x.isAnonymous)return new hn({user:I.currentUser,providerId:null,operationType:"signIn"});const M=yield gh(I,{returnSecureToken:!0}),Y=yield hn._fromIdTokenResponse(I,"signIn",M,!0);return yield I._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class dm extends he.ZR{constructor(x,I,M,Y){var ne;super(I.code,I.message),this.operationType=M,this.user=Y,Object.setPrototypeOf(this,dm.prototype),this.customData={appName:x.name,tenantId:null!==(ne=x.tenantId)&&void 0!==ne?ne:void 0,_serverResponse:I.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(x,I,M,Y){return new dm(x,I,M,Y)}}function s0(R,x,I,M){return("reauthenticate"===x?I._getReauthenticationResolver(R):I._getIdTokenResponse(R)).catch(ne=>{throw"auth/multi-factor-auth-required"===ne.code?dm._fromErrorAndOperation(R,ne,x,M):ne})}function zg(R){return new Set(R.map(({providerId:x})=>x).filter(x=>!!x))}function n0(R,x){return ic.apply(this,arguments)}function ic(){return(ic=(0,d.Z)(function*(R,x){const I=(0,he.m9)(R);yield Yp(!0,I,x);const{providerUserInfo:M}=yield Xa(I.auth,{idToken:yield I.getIdToken(),deleteProvider:[x]}),Y=zg(M||[]);return I.providerData=I.providerData.filter(ne=>Y.has(ne.providerId)),Y.has("phone")||(I.phoneNumber=null),yield I.auth._persistUserIfCurrent(I),I})).apply(this,arguments)}function Py(R,x){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(R,x,I=!1){const M=yield fi(R,x._linkToIdToken(R.auth,yield R.getIdToken()),I);return hn._forOperation(R,"link",M)})).apply(this,arguments)}function Yp(R,x,I){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,d.Z)(function*(R,x,I){yield Do(x);const Y=!1===R?"provider-already-linked":"no-such-provider";He(zg(x.providerData).has(I)===R,x.auth,Y)})).apply(this,arguments)}function Zn(R,x){return um.apply(this,arguments)}function um(){return(um=(0,d.Z)(function*(R,x,I=!1){const{auth:M}=R,Y="reauthenticate";try{const ne=yield fi(R,s0(M,Y,x,R),I);He(ne.idToken,M,"internal-error");const Fe=ws(ne.idToken);He(Fe,M,"internal-error");const{sub:At}=Fe;return He(R.uid===At,M,"user-mismatch"),hn._forOperation(R,Y,ne)}catch(ne){throw"auth/user-not-found"===(null==ne?void 0:ne.code)&&kt(M,"user-mismatch"),ne}})).apply(this,arguments)}function jg(R,x){return lu.apply(this,arguments)}function lu(){return(lu=(0,d.Z)(function*(R,x,I=!1){const M="signIn",Y=yield s0(R,M,x),ne=yield hn._fromIdTokenResponse(R,M,Y);return I||(yield R._updateCurrentUser(ne.user)),ne})).apply(this,arguments)}function Jo(R,x){return Fy.apply(this,arguments)}function Fy(){return(Fy=(0,d.Z)(function*(R,x){return jg(jn(R),x)})).apply(this,arguments)}function oo(R,x){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,d.Z)(function*(R,x){const I=(0,he.m9)(R);return yield Yp(!1,I,x.providerId),Py(I,x)})).apply(this,arguments)}function Pa(R,x){return qu.apply(this,arguments)}function qu(){return(qu=(0,d.Z)(function*(R,x){return Zn((0,he.m9)(R),x)})).apply(this,arguments)}function hu(R,x){return pm.apply(this,arguments)}function pm(){return(pm=(0,d.Z)(function*(R,x){return Ma(R,"POST","/v1/accounts:signInWithCustomToken",ln(R,x))})).apply(this,arguments)}function sc(R,x){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,d.Z)(function*(R,x){const I=jn(R),M=yield hu(I,{token:x,returnSecureToken:!0}),Y=yield hn._fromIdTokenResponse(I,"signIn",M);return yield I._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class yd{constructor(x,I){this.factorId=x,this.uid=I.mfaEnrollmentId,this.enrollmentTime=new Date(I.enrolledAt).toUTCString(),this.displayName=I.displayName}static _fromServerResponse(x,I){return"phoneInfo"in I?Xi._fromServerResponse(x,I):kt(x,"internal-error")}}class Xi extends yd{constructor(x){super("phone",x),this.phoneNumber=x.phoneInfo}static _fromServerResponse(x,I){return new Xi(I)}}function Zp(R,x,I){var M;He((null===(M=I.url)||void 0===M?void 0:M.length)>0,R,"invalid-continue-uri"),He(void 0===I.dynamicLinkDomain||I.dynamicLinkDomain.length>0,R,"invalid-dynamic-link-domain"),x.continueUrl=I.url,x.dynamicLinkDomain=I.dynamicLinkDomain,x.canHandleCodeInApp=I.handleCodeInApp,I.iOS&&(He(I.iOS.bundleId.length>0,R,"missing-ios-bundle-id"),x.iOSBundleId=I.iOS.bundleId),I.android&&(He(I.android.packageName.length>0,R,"missing-android-pkg-name"),x.androidInstallApp=I.android.installApp,x.androidMinimumVersionCode=I.android.minimumVersion,x.androidPackageName=I.android.packageName)}function r0(R,x,I){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,d.Z)(function*(R,x,I){const M=(0,he.m9)(R),Y={requestType:"PASSWORD_RESET",email:x};I&&Zp(M,Y,I),yield er(M,Y)})).apply(this,arguments)}function Ny(R,x,I){return fm.apply(this,arguments)}function fm(){return(fm=(0,d.Z)(function*(R,x,I){yield Jn((0,he.m9)(R),{oobCode:x,newPassword:I})})).apply(this,arguments)}function By(R,x){return Hy.apply(this,arguments)}function Hy(){return(Hy=(0,d.Z)(function*(R,x){yield Pg((0,he.m9)(R),{oobCode:x})})).apply(this,arguments)}function _t(R,x){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(R,x){const I=(0,he.m9)(R),M=yield Jn(I,{oobCode:x}),Y=M.requestType;switch(He(Y,I,"internal-error"),Y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":He(M.newEmail,I,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":He(M.mfaInfo,I,"internal-error");default:He(M.email,I,"internal-error")}let ne=null;return M.mfaInfo&&(ne=yd._fromServerResponse(jn(I),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:ne},operation:Y}})).apply(this,arguments)}function Vy(R,x){return mr.apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*(R,x){const{data:I}=yield _t((0,he.m9)(R),x);return I.email})).apply(this,arguments)}function Xp(R,x,I){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,d.Z)(function*(R,x,I){const M=jn(R),Y=yield gh(M,{returnSecureToken:!0,email:x,password:I}),ne=yield hn._fromIdTokenResponse(M,"signIn",Y);return yield M._updateCurrentUser(ne.user),ne})).apply(this,arguments)}function bh(R,x,I){return Jo((0,he.m9)(R),e0.credential(x,I))}function zy(R,x,I){return mm.apply(this,arguments)}function mm(){return(mm=(0,d.Z)(function*(R,x,I){const M=(0,he.m9)(R),Y={requestType:"EMAIL_SIGNIN",email:x};He(I.handleCodeInApp,M,"argument-error"),I&&Zp(M,Y,I),yield sm(M,Y)})).apply(this,arguments)}function DI(R,x){const I=rm.parseLink(x);return"EMAIL_SIGNIN"===(null==I?void 0:I.operation)}function o0(R,x,I){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,d.Z)(function*(R,x,I){const M=(0,he.m9)(R),Y=e0.credentialWithLink(x,I||Qe());return He(Y._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),Jo(M,Y)})).apply(this,arguments)}function qg(R,x){return ao.apply(this,arguments)}function ao(){return(ao=(0,d.Z)(function*(R,x){return An(R,"POST","/v1/accounts:createAuthUri",ln(R,x))})).apply(this,arguments)}function vd(R,x){return gm.apply(this,arguments)}function gm(){return(gm=(0,d.Z)(function*(R,x){const M={identifier:x,continueUri:ns()?Qe():"http://localhost"},{signinMethods:Y}=yield qg((0,he.m9)(R),M);return Y||[]})).apply(this,arguments)}function cu(R,x){return nc.apply(this,arguments)}function nc(){return(nc=(0,d.Z)(function*(R,x){const I=(0,he.m9)(R),Y={requestType:"VERIFY_EMAIL",idToken:yield R.getIdToken()};x&&Zp(I.auth,Y,x);const{email:ne}=yield im(I.auth,Y);ne!==R.email&&(yield R.reload())})).apply(this,arguments)}function jy(R,x,I){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,d.Z)(function*(R,x,I){const M=(0,he.m9)(R),ne={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield R.getIdToken(),newEmail:x};I&&Zp(M.auth,ne,I);const{email:Fe}=yield mh(M.auth,ne);Fe!==R.email&&(yield R.reload())})).apply(this,arguments)}function Uy(R,x){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,d.Z)(function*(R,x){return An(R,"POST","/v1/accounts:update",x)})).apply(this,arguments)}function bm(R,x){return Qp.apply(this,arguments)}function Qp(){return(Qp=(0,d.Z)(function*(R,{displayName:x,photoURL:I}){if(void 0===x&&void 0===I)return;const M=(0,he.m9)(R),ne={idToken:yield M.getIdToken(),displayName:x,photoUrl:I,returnSecureToken:!0},Fe=yield fi(M,Uy(M.auth,ne));M.displayName=Fe.displayName||null,M.photoURL=Fe.photoUrl||null;const At=M.providerData.find(({providerId:Ii})=>"password"===Ii);At&&(At.displayName=M.displayName,At.photoURL=M.photoURL),yield M._updateTokensIfNecessary(Fe)})).apply(this,arguments)}function qy(R,x){return qS((0,he.m9)(R),x,null)}function Wy(R,x){return qS((0,he.m9)(R),null,x)}function qS(R,x,I){return ym.apply(this,arguments)}function ym(){return(ym=(0,d.Z)(function*(R,x,I){const{auth:M}=R,ne={idToken:yield R.getIdToken(),returnSecureToken:!0};x&&(ne.email=x),I&&(ne.password=I);const Fe=yield fi(R,ro(M,ne));yield R._updateTokensIfNecessary(Fe,!0)})).apply(this,arguments)}class du{constructor(x,I,M={}){this.isNewUser=x,this.providerId=I,this.profile=M}}class Gy extends du{constructor(x,I,M,Y){super(x,I,M),this.username=Y}}class WS extends du{constructor(x,I){super(x,"facebook.com",I)}}class GS extends Gy{constructor(x,I){super(x,"github.com",I,"string"==typeof(null==I?void 0:I.login)?null==I?void 0:I.login:null)}}class Jp extends du{constructor(x,I){super(x,"google.com",I)}}class Vc extends Gy{constructor(x,I,M){super(x,"twitter.com",I,M)}}function $S(R){const{user:x,_tokenResponse:I}=R;return x.isAnonymous&&!I?{providerId:null,isNewUser:!1,profile:null}:function vm(R){var x,I;if(!R)return null;const{providerId:M}=R,Y=R.rawUserInfo?JSON.parse(R.rawUserInfo):{},ne=R.isNewUser||"identitytoolkit#SignupNewUserResponse"===R.kind;if(!M&&(null==R?void 0:R.idToken)){const Fe=null===(I=null===(x=ws(R.idToken))||void 0===x?void 0:x.firebase)||void 0===I?void 0:I.sign_in_provider;if(Fe)return new du(ne,"anonymous"!==Fe&&"custom"!==Fe?Fe:null)}if(!M)return null;switch(M){case"facebook.com":return new WS(ne,Y);case"github.com":return new GS(ne,Y);case"google.com":return new Jp(ne,Y);case"twitter.com":return new Vc(ne,Y,R.screenName||null);case"custom":case"anonymous":return new du(ne,null);default:return new du(ne,M,Y)}}(I)}class $u{constructor(x,I){this.type=x,this.credential=I}static _fromIdtoken(x){return new $u("enroll",x)}static _fromMfaPendingCredential(x){return new $u("signin",x)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(x){var I,M;if(null==x?void 0:x.multiFactorSession){if(null===(I=x.multiFactorSession)||void 0===I?void 0:I.pendingCredential)return $u._fromMfaPendingCredential(x.multiFactorSession.pendingCredential);if(null===(M=x.multiFactorSession)||void 0===M?void 0:M.idToken)return $u._fromIdtoken(x.multiFactorSession.idToken)}return null}}class wm{constructor(x,I,M){this.session=x,this.hints=I,this.signInResolver=M}static _fromError(x,I){const M=jn(x),Y=I.customData._serverResponse,ne=(Y.mfaInfo||[]).map(At=>yd._fromServerResponse(M,At));He(Y.mfaPendingCredential,M,"internal-error");const Fe=$u._fromMfaPendingCredential(Y.mfaPendingCredential);return new wm(Fe,ne,function(){var At=(0,d.Z)(function*(Ii){const es=yield Ii._process(M,Fe);delete Y.mfaInfo,delete Y.mfaPendingCredential;const ms=Object.assign(Object.assign({},Y),{idToken:es.idToken,refreshToken:es.refreshToken});switch(I.operationType){case"signIn":const $r=yield hn._fromIdTokenResponse(M,I.operationType,ms);return yield M._updateCurrentUser($r.user),$r;case"reauthenticate":return He(I.user,M,"internal-error"),hn._forOperation(I.user,I.operationType,ms);default:kt(M,"internal-error")}});return function(Ii){return At.apply(this,arguments)}}())}resolveSignIn(x){var I=this;return(0,d.Z)(function*(){return I.signInResolver(x)})()}}function $y(R,x){var I;const M=(0,he.m9)(R),Y=x;return He(x.customData.operationType,M,"argument-error"),He(null===(I=Y.customData._serverResponse)||void 0===I?void 0:I.mfaPendingCredential,M,"argument-error"),wm._fromError(M,Y)}function Ky(R,x){return An(R,"POST","/v2/accounts/mfaEnrollment:start",ln(R,x))}class Yy{constructor(x){this.user=x,this.enrolledFactors=[],x._onReload(I=>{I.mfaInfo&&(this.enrolledFactors=I.mfaInfo.map(M=>yd._fromServerResponse(x.auth,M)))})}static _fromUser(x){return new Yy(x)}getSession(){var x=this;return(0,d.Z)(function*(){return $u._fromIdtoken(yield x.user.getIdToken())})()}enroll(x,I){var M=this;return(0,d.Z)(function*(){const Y=x,ne=yield M.getSession(),Fe=yield fi(M.user,Y._process(M.user.auth,ne,I));return yield M.user._updateTokensIfNecessary(Fe),M.user.reload()})()}unenroll(x){var I=this;return(0,d.Z)(function*(){const M="string"==typeof x?x:x.uid,Y=yield I.user.getIdToken(),ne=yield fi(I.user,function ba(R,x){return An(R,"POST","/v2/accounts/mfaEnrollment:withdraw",ln(R,x))}(I.user.auth,{idToken:Y,mfaEnrollmentId:M}));I.enrolledFactors=I.enrolledFactors.filter(({uid:Fe})=>Fe!==M),yield I.user._updateTokensIfNecessary(ne);try{yield I.user.reload()}catch(Fe){if("auth/user-token-expired"!==Fe.code)throw Fe}})()}}const wd=new WeakMap;function Kg(R){const x=(0,he.m9)(R);return wd.has(x)||wd.set(x,Yy._fromUser(x)),wd.get(x)}const Zy="__sak";class Xy{constructor(x,I){this.storageRetriever=x,this.type=I}_isAvailable(){try{return this.storage?(this.storage.setItem(Zy,"1"),this.storage.removeItem(Zy),Promise.resolve(!0)):Promise.resolve(!1)}catch(x){return Promise.resolve(!1)}}_set(x,I){return this.storage.setItem(x,JSON.stringify(I)),Promise.resolve()}_get(x){const I=this.storage.getItem(x);return Promise.resolve(I?JSON.parse(I):null)}_remove(x){return this.storage.removeItem(x),Promise.resolve()}get storage(){return this.storageRetriever()}}const ir=(()=>{class R extends Xy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(I,M)=>this.onStorageEvent(I,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function uu(){const R=(0,he.z$)();return ve(R)||Ps(R)}()&&function Oc(){try{return!(!window||window===window.top)}catch(R){return!1}}(),this.fallbackToPolling=Qa(),this._shouldAllowMigration=!0}forAllChangedKeys(I){for(const M of Object.keys(this.listeners)){const Y=this.storage.getItem(M),ne=this.localCache[M];Y!==ne&&I(M,ne,Y)}}onStorageEvent(I,M=!1){if(!I.key)return void this.forAllChangedKeys((At,Ii,es)=>{this.notifyListeners(At,es)});const Y=I.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const At=this.storage.getItem(Y);if(I.newValue!==At)null!==I.newValue?this.storage.setItem(Y,I.newValue):this.storage.removeItem(Y);else if(this.localCache[Y]===I.newValue&&!M)return}const ne=()=>{const At=this.storage.getItem(Y);!M&&this.localCache[Y]===At||this.notifyListeners(Y,At)},Fe=this.storage.getItem(Y);!function Fs(){return(0,he.w1)()&&10===document.documentMode}()||Fe===I.newValue||I.newValue===I.oldValue?ne():setTimeout(ne,10)}notifyListeners(I,M){this.localCache[I]=M;const Y=this.listeners[I];if(Y)for(const ne of Array.from(Y))ne(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((I,M,Y)=>{this.onStorageEvent(new StorageEvent("storage",{key:I,oldValue:M,newValue:Y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(I,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[I]||(this.listeners[I]=new Set,this.localCache[I]=this.storage.getItem(I)),this.listeners[I].add(M)}_removeListener(I,M){this.listeners[I]&&(this.listeners[I].delete(M),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(I,M){var Y=()=>super._set,ne=this;return(0,d.Z)(function*(){yield Y().call(ne,I,M),ne.localCache[I]=JSON.stringify(M)})()}_get(I){var M=()=>super._get,Y=this;return(0,d.Z)(function*(){const ne=yield M().call(Y,I);return Y.localCache[I]=JSON.stringify(ne),ne})()}_remove(I){var M=()=>super._remove,Y=this;return(0,d.Z)(function*(){yield M().call(Y,I),delete Y.localCache[I]})()}}return R.type="LOCAL",R})(),ei=(()=>{class R extends Xy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(I,M){}_removeListener(I,M){}}return R.type="SESSION",R})();let el=(()=>{class R{constructor(I){this.eventTarget=I,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(I){const M=this.receivers.find(ne=>ne.isListeningto(I));if(M)return M;const Y=new R(I);return this.receivers.push(Y),Y}isListeningto(I){return this.eventTarget===I}handleEvent(I){var M=this;return(0,d.Z)(function*(){const Y=I,{eventId:ne,eventType:Fe,data:At}=Y.data,Ii=M.handlersMap[Fe];if(!(null==Ii?void 0:Ii.size))return;Y.ports[0].postMessage({status:"ack",eventId:ne,eventType:Fe});const es=Array.from(Ii).map(function(){var $r=(0,d.Z)(function*(Jl){return Jl(Y.origin,At)});return function(Jl){return $r.apply(this,arguments)}}()),ms=yield function _s(R){return Promise.all(R.map(function(){var x=(0,d.Z)(function*(I){try{return{fulfilled:!0,value:yield I}}catch(M){return{fulfilled:!1,reason:M}}});return function(I){return x.apply(this,arguments)}}()))}(es);Y.ports[0].postMessage({status:"done",eventId:ne,eventType:Fe,response:ms})})()}_subscribe(I,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[I]||(this.handlersMap[I]=new Set),this.handlersMap[I].add(M)}_unsubscribe(I,M){this.handlersMap[I]&&M&&this.handlersMap[I].delete(M),(!M||0===this.handlersMap[I].size)&&delete this.handlersMap[I],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return R.receivers=[],R})();function Fn(R="",x=10){let I="";for(let M=0;M<x;M++)I+=Math.floor(10*Math.random());return R+I}class Qy{constructor(x){this.target=x,this.handlers=new Set}removeMessageHandler(x){x.messageChannel&&(x.messageChannel.port1.removeEventListener("message",x.onMessage),x.messageChannel.port1.close()),this.handlers.delete(x)}_send(x,I,M=50){var Y=this;return(0,d.Z)(function*(){const ne="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ne)throw new Error("connection_unavailable");let Fe,At;return new Promise((Ii,es)=>{const ms=Fn("",20);ne.port1.start();const $r=setTimeout(()=>{es(new Error("unsupported_event"))},M);At={messageChannel:ne,onMessage(Jl){const Pm=Jl;if(Pm.data.eventId===ms)switch(Pm.data.status){case"ack":clearTimeout($r),Fe=setTimeout(()=>{es(new Error("timeout"))},3e3);break;case"done":clearTimeout(Fe),Ii(Pm.data.response);break;default:clearTimeout($r),clearTimeout(Fe),es(new Error("invalid_response"))}}},Y.handlers.add(At),ne.port1.addEventListener("message",At.onMessage),Y.target.postMessage({eventType:x,eventId:ms,data:I},[ne.port2])}).finally(()=>{At&&Y.removeMessageHandler(At)})})()}}function lo(){return window}function Em(){return void 0!==lo().WorkerGlobalScope&&"function"==typeof lo().importScripts}function Yu(){return(Yu=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(R){return null}})).apply(this,arguments)}const Jy="firebaseLocalStorageDb",tf="firebaseLocalStorage",ev="fbase_key";class gn{constructor(x){this.request=x}toPromise(){return new Promise((x,I)=>{this.request.addEventListener("success",()=>{x(this.request.result)}),this.request.addEventListener("error",()=>{I(this.request.error)})})}}function sf(R,x){return R.transaction([tf],x?"readwrite":"readonly").objectStore(tf)}function nf(){const R=indexedDB.open(Jy,1);return new Promise((x,I)=>{R.addEventListener("error",()=>{I(R.error)}),R.addEventListener("upgradeneeded",()=>{const M=R.result;try{M.createObjectStore(tf,{keyPath:ev})}catch(Y){I(Y)}}),R.addEventListener("success",(0,d.Z)(function*(){const M=R.result;M.objectStoreNames.contains(tf)?x(M):(M.close(),yield function _m(){const R=indexedDB.deleteDatabase(Jy);return new gn(R).toPromise()}(),x(yield nf()))}))})}function pl(R,x,I){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,d.Z)(function*(R,x,I){const M=sf(R,!0).put({[ev]:x,value:I});return new gn(M).toPromise()})).apply(this,arguments)}function jc(){return(jc=(0,d.Z)(function*(R,x){const I=sf(R,!1).get(x),M=yield new gn(I).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function Zg(R,x){const I=sf(R,!0).delete(x);return new gn(I).toPromise()}const Sd=(()=>{class R{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var I=this;return(0,d.Z)(function*(){return I.db||(I.db=yield nf()),I.db})()}_withRetries(I){var M=this;return(0,d.Z)(function*(){let Y=0;for(;;)try{const ne=yield M._openDb();return yield I(ne)}catch(ne){if(Y++>3)throw ne;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var I=this;return(0,d.Z)(function*(){return Em()?I.initializeReceiver():I.initializeSender()})()}initializeReceiver(){var I=this;return(0,d.Z)(function*(){I.receiver=el._getInstance(function Ni(){return Em()?self:null}()),I.receiver._subscribe("keyChanged",function(){var M=(0,d.Z)(function*(Y,ne){return{keyProcessed:(yield I._poll()).includes(ne.key)}});return function(Y,ne){return M.apply(this,arguments)}}()),I.receiver._subscribe("ping",function(){var M=(0,d.Z)(function*(Y,ne){return["keyChanged"]});return function(Y,ne){return M.apply(this,arguments)}}())})()}initializeSender(){var I=this;return(0,d.Z)(function*(){var M,Y;if(I.activeServiceWorker=yield function Ku(){return Yu.apply(this,arguments)}(),!I.activeServiceWorker)return;I.sender=new Qy(I.activeServiceWorker);const ne=yield I.sender._send("ping",{},800);!ne||(null===(M=ne[0])||void 0===M?void 0:M.fulfilled)&&(null===(Y=ne[0])||void 0===Y?void 0:Y.value.includes("keyChanged"))&&(I.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(I){var M=this;return(0,d.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function zc(){var R;return(null===(R=null==navigator?void 0:navigator.serviceWorker)||void 0===R?void 0:R.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:I},M.serviceWorkerReceiverAvailable?800:50)}catch(Y){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const I=yield nf();return yield pl(I,Zy,"1"),yield Zg(I,Zy),!0}catch(I){}return!1})()}_withPendingWrite(I){var M=this;return(0,d.Z)(function*(){M.pendingWrites++;try{yield I()}finally{M.pendingWrites--}})()}_set(I,M){var Y=this;return(0,d.Z)(function*(){return Y._withPendingWrite((0,d.Z)(function*(){return yield Y._withRetries(ne=>pl(ne,I,M)),Y.localCache[I]=M,Y.notifyServiceWorker(I)}))})()}_get(I){var M=this;return(0,d.Z)(function*(){const Y=yield M._withRetries(ne=>function rf(R,x){return jc.apply(this,arguments)}(ne,I));return M.localCache[I]=Y,Y})()}_remove(I){var M=this;return(0,d.Z)(function*(){return M._withPendingWrite((0,d.Z)(function*(){return yield M._withRetries(Y=>Zg(Y,I)),delete M.localCache[I],M.notifyServiceWorker(I)}))})()}_poll(){var I=this;return(0,d.Z)(function*(){const M=yield I._withRetries(Fe=>{const At=sf(Fe,!1).getAll();return new gn(At).toPromise()});if(!M)return[];if(0!==I.pendingWrites)return[];const Y=[],ne=new Set;for(const{fbase_key:Fe,value:At}of M)ne.add(Fe),JSON.stringify(I.localCache[Fe])!==JSON.stringify(At)&&(I.notifyListeners(Fe,At),Y.push(Fe));for(const Fe of Object.keys(I.localCache))I.localCache[Fe]&&!ne.has(Fe)&&(I.notifyListeners(Fe,null),Y.push(Fe));return Y})()}notifyListeners(I,M){this.localCache[I]=M;const Y=this.listeners[I];if(Y)for(const ne of Array.from(Y))ne(M)}startPolling(){var I=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return I._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(I,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[I]||(this.listeners[I]=new Set,this._get(I)),this.listeners[I].add(M)}_removeListener(I,M){this.listeners[I]&&(this.listeners[I].delete(M),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return R.type="LOCAL",R})();function fl(R,x){return An(R,"POST","/v2/accounts/mfaSignIn:start",ln(R,x))}function af(){return(af=(0,d.Z)(function*(R){return(yield An(R,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function tl(R){return new Promise((x,I)=>{const M=document.createElement("script");M.setAttribute("src",R),M.onload=x,M.onerror=Y=>{const ne=et("internal-error");ne.customData=Y,I(ne)},M.type="text/javascript",M.charset="UTF-8",function lr(){var R,x;return null!==(x=null===(R=document.getElementsByTagName("head"))||void 0===R?void 0:R[0])&&void 0!==x?x:document}().appendChild(M)})}function Yl(R){return`__${R}${Math.floor(1e6*Math.random())}`}const Un=1e12;class ml{constructor(x){this.auth=x,this.counter=Un,this._widgets=new Map}render(x,I){const M=this.counter;return this._widgets.set(M,new ho(x,this.auth.name,I||{})),this.counter++,M}reset(x){var I;const M=x||Un;null===(I=this._widgets.get(M))||void 0===I||I.delete(),this._widgets.delete(M)}getResponse(x){var I;return(null===(I=this._widgets.get(x||Un))||void 0===I?void 0:I.getResponse())||""}execute(x){var I=this;return(0,d.Z)(function*(){var M;return null===(M=I._widgets.get(x||Un))||void 0===M||M.execute(),""})()}}class ho{constructor(x,I,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Y="string"==typeof x?document.getElementById(x):x;He(Y,"argument-error",{appName:I}),this.container=Y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function rc(R){const x=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<R;M++)x.push(I.charAt(Math.floor(Math.random()*I.length)));return x.join("")}(50);const{callback:x,"expired-callback":I}=this.params;if(x)try{x(this.responseToken)}catch(M){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,I)try{I()}catch(M){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Zl=Yl("rcb"),iv=new Ri(3e4,6e4);class Wr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!lo().grecaptcha}load(x,I=""){return He(function YS(R){return R.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(R)}(I),x,"argument-error"),this.shouldResolveImmediately(I)?Promise.resolve(lo().grecaptcha):new Promise((M,Y)=>{const ne=lo().setTimeout(()=>{Y(et(x,"network-request-failed"))},iv.get());lo()[Zl]=()=>{lo().clearTimeout(ne),delete lo()[Zl];const At=lo().grecaptcha;if(!At)return void Y(et(x,"internal-error"));const Ii=At.render;At.render=(es,ms)=>{const $r=Ii(es,ms);return this.counter++,$r},this.hostLanguage=I,M(At)},tl(`https://www.google.com/recaptcha/api.js??${(0,he.xO)({onload:Zl,render:"explicit",hl:I})}`).catch(()=>{clearTimeout(ne),Y(et(x,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(x){return!!lo().grecaptcha&&(x===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xR{load(x){return(0,d.Z)(function*(){return new ml(x)})()}clearedOneInstance(){}}const Zu="recaptcha",ya={theme:"light",type:"image"};class sv{constructor(x,I=Object.assign({},ya),M){this.parameters=I,this.type=Zu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jn(M),this.isInvisible="invisible"===this.parameters.size,He("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const Y="string"==typeof x?document.getElementById(x):x;He(Y,this.auth,"argument-error"),this.container=Y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xR:new Wr,this.validateStartingState()}verify(){var x=this;return(0,d.Z)(function*(){x.assertNotDestroyed();const I=yield x.render(),M=x.getAssertedRecaptcha();return M.getResponse(I)||new Promise(ne=>{const Fe=At=>{!At||(x.tokenChangeListeners.delete(Fe),ne(At))};x.tokenChangeListeners.add(Fe),x.isInvisible&&M.execute(I)})})()}render(){try{this.assertNotDestroyed()}catch(x){return Promise.reject(x)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(x=>{throw this.renderPromise=null,x})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(x=>{this.container.removeChild(x)})}validateStartingState(){He(!this.parameters.sitekey,this.auth,"argument-error"),He(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),He("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(x){return I=>{if(this.tokenChangeListeners.forEach(M=>M(I)),"function"==typeof x)x(I);else if("string"==typeof x){const M=lo()[x];"function"==typeof M&&M(I)}}}assertNotDestroyed(){He(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var x=this;return(0,d.Z)(function*(){if(yield x.init(),!x.widgetId){let I=x.container;if(!x.isInvisible){const M=document.createElement("div");I.appendChild(M),I=M}x.widgetId=x.getAssertedRecaptcha().render(I,x.parameters)}return x.widgetId})()}init(){var x=this;return(0,d.Z)(function*(){He(ns()&&!Em(),x.auth,"internal-error"),yield function xd(){let R=null;return new Promise(x=>{"complete"!==document.readyState?(R=()=>x(),window.addEventListener("load",R)):x()}).catch(x=>{throw R&&window.removeEventListener("load",R),x})}(),x.recaptcha=yield x._recaptchaLoader.load(x.auth,x.auth.languageCode||void 0);const I=yield function tv(R){return af.apply(this,arguments)}(x.auth);He(I,x.auth,"internal-error"),x.parameters.sitekey=I})()}getAssertedRecaptcha(){return He(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jg{constructor(x,I){this.verificationId=x,this.onConfirmation=I}confirm(x){const I=$p._fromVerification(this.verificationId,x);return this.onConfirmation(I)}}function Ed(R,x,I){return nv.apply(this,arguments)}function nv(){return(nv=(0,d.Z)(function*(R,x,I){const M=jn(R),Y=yield eb(M,x,(0,he.m9)(I));return new Jg(Y,ne=>Jo(M,ne))})).apply(this,arguments)}function Oo(R,x,I){return Dm.apply(this,arguments)}function Dm(){return(Dm=(0,d.Z)(function*(R,x,I){const M=(0,he.m9)(R);yield Yp(!1,M,"phone");const Y=yield eb(M.auth,x,(0,he.m9)(I));return new Jg(Y,ne=>oo(M,ne))})).apply(this,arguments)}function km(R,x,I){return ZS.apply(this,arguments)}function ZS(){return(ZS=(0,d.Z)(function*(R,x,I){const M=(0,he.m9)(R),Y=yield eb(M.auth,x,(0,he.m9)(I));return new Jg(Y,ne=>Pa(M,ne))})).apply(this,arguments)}function eb(R,x,I){return gl.apply(this,arguments)}function gl(){return(gl=(0,d.Z)(function*(R,x,I){var M;const Y=yield I.verify();try{let ne;if(He("string"==typeof Y,R,"argument-error"),He(I.type===Zu,R,"argument-error"),ne="string"==typeof x?{phoneNumber:x}:x,"session"in ne){const Fe=ne.session;if("phoneNumber"in ne)return He("enroll"===Fe.type,R,"internal-error"),(yield Ky(R,{idToken:Fe.credential,phoneEnrollmentInfo:{phoneNumber:ne.phoneNumber,recaptchaToken:Y}})).phoneSessionInfo.sessionInfo;{He("signin"===Fe.type,R,"internal-error");const At=(null===(M=ne.multiFactorHint)||void 0===M?void 0:M.uid)||ne.multiFactorUid;return He(At,R,"missing-multi-factor-info"),(yield fl(R,{mfaPendingCredential:Fe.credential,mfaEnrollmentId:At,phoneSignInInfo:{recaptchaToken:Y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Fe}=yield SI(R,{phoneNumber:ne.phoneNumber,recaptchaToken:Y});return Fe}}finally{I._reset()}})).apply(this,arguments)}function Ch(R,x){return Rm.apply(this,arguments)}function Rm(){return(Rm=(0,d.Z)(function*(R,x){yield Py((0,he.m9)(R),x)})).apply(this,arguments)}let tb=(()=>{class R{constructor(I){this.providerId=R.PROVIDER_ID,this.auth=jn(I)}verifyPhoneNumber(I,M){return eb(this.auth,I,(0,he.m9)(M))}static credential(I,M){return $p._fromVerification(I,M)}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{phoneNumber:M,temporaryProof:Y}=I;return M&&Y?$p._fromTokenResponse(M,Y):null}}return R.PROVIDER_ID="phone",R.PHONE_SIGN_IN_METHOD="phone",R})();function Xl(R,x){return x?tt(x):(He(R._popupRedirectResolver,R,"argument-error"),R._popupRedirectResolver)}class lf extends ul{constructor(x){super("custom","custom"),this.params=x}_getIdTokenResponse(x){return ou(x,this._buildIdpRequest())}_linkToIdToken(x,I){return ou(x,this._buildIdpRequest(I))}_getReauthenticationResolver(x){return ou(x,this._buildIdpRequest())}_buildIdpRequest(x){const I={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return x&&(I.idToken=x),I}}function rv(R){return jg(R.auth,new lf(R),R.bypassAuthState)}function ib(R){const{auth:x,user:I}=R;return He(I,x,"internal-error"),Zn(I,new lf(R),R.bypassAuthState)}function As(R){return sb.apply(this,arguments)}function sb(){return(sb=(0,d.Z)(function*(R){const{auth:x,user:I}=R;return He(I,x,"internal-error"),Py(I,new lf(R),R.bypassAuthState)})).apply(this,arguments)}class Uc{constructor(x,I,M,Y,ne=!1){this.auth=x,this.resolver=M,this.user=Y,this.bypassAuthState=ne,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(I)?I:[I]}execute(){var x=this;return new Promise(function(){var I=(0,d.Z)(function*(M,Y){x.pendingPromise={resolve:M,reject:Y};try{x.eventManager=yield x.resolver._initialize(x.auth),yield x.onExecution(),x.eventManager.registerConsumer(x)}catch(ne){x.reject(ne)}});return function(M,Y){return I.apply(this,arguments)}}())}onAuthEvent(x){var I=this;return(0,d.Z)(function*(){const{urlResponse:M,sessionId:Y,postBody:ne,tenantId:Fe,error:At,type:Ii}=x;if(At)return void I.reject(At);const es={auth:I.auth,requestUri:M,sessionId:Y,tenantId:Fe||void 0,postBody:ne||void 0,user:I.user,bypassAuthState:I.bypassAuthState};try{I.resolve(yield I.getIdpTask(Ii)(es))}catch(ms){I.reject(ms)}})()}onError(x){this.reject(x)}getIdpTask(x){switch(x){case"signInViaPopup":case"signInViaRedirect":return rv;case"linkViaPopup":case"linkViaRedirect":return As;case"reauthViaPopup":case"reauthViaRedirect":return ib;default:kt(this.auth,"internal-error")}}resolve(x){Re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(x),this.unregisterAndCleanUp()}reject(x){Re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(x),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ql=new Ri(2e3,1e4);function nb(R,x,I){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,d.Z)(function*(R,x,I){const M=jn(R);ct(R,x,Jh);const Y=Xl(M,I);return new ob(M,"signInViaPopup",x,Y).executeNotNull()})).apply(this,arguments)}function kI(R,x,I){return rb.apply(this,arguments)}function rb(){return(rb=(0,d.Z)(function*(R,x,I){const M=(0,he.m9)(R);ct(M.auth,x,Jh);const Y=Xl(M.auth,I);return new ob(M.auth,"reauthViaPopup",x,Y,M).executeNotNull()})).apply(this,arguments)}function il(R,x,I){return Am.apply(this,arguments)}function Am(){return(Am=(0,d.Z)(function*(R,x,I){const M=(0,he.m9)(R);ct(M.auth,x,Jh);const Y=Xl(M.auth,I);return new ob(M.auth,"linkViaPopup",x,Y,M).executeNotNull()})).apply(this,arguments)}let ob=(()=>{class R extends Uc{constructor(I,M,Y,ne,Fe){super(I,M,ne,Fe),this.provider=Y,this.authWindow=null,this.pollId=null,R.currentPopupAction&&R.currentPopupAction.cancel(),R.currentPopupAction=this}executeNotNull(){var I=this;return(0,d.Z)(function*(){const M=yield I.execute();return He(M,I.auth,"internal-error"),M})()}onExecution(){var I=this;return(0,d.Z)(function*(){Re(1===I.filter.length,"Popup operations only handle one event");const M=Fn();I.authWindow=yield I.resolver._openPopup(I.auth,I.provider,I.filter[0],M),I.authWindow.associatedEvent=M,I.resolver._originValidation(I.auth).catch(Y=>{I.reject(Y)}),I.resolver._isIframeWebStorageSupported(I.auth,Y=>{Y||I.reject(et(I.auth,"web-storage-unsupported"))}),I.pollUserCancellation()})()}get eventId(){var I;return(null===(I=this.authWindow)||void 0===I?void 0:I.associatedEvent)||null}cancel(){this.reject(et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,R.currentPopupAction=null}pollUserCancellation(){const I=()=>{var M,Y;this.pollId=(null===(Y=null===(M=this.authWindow)||void 0===M?void 0:M.window)||void 0===Y?void 0:Y.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(et(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(I,Ql.get())};I()}}return R.currentPopupAction=null,R})();const _d=new Map;class ea extends Uc{constructor(x,I,M=!1){super(x,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],I,void 0,M),this.eventId=null}execute(){var x=()=>super.execute,I=this;return(0,d.Z)(function*(){let M=_d.get(I.auth._key());if(!M){try{const ne=(yield function ta(R,x){return hf.apply(this,arguments)}(I.resolver,I.auth))?yield x().call(I):null;M=()=>Promise.resolve(ne)}catch(Y){M=()=>Promise.reject(Y)}_d.set(I.auth._key(),M)}return I.bypassAuthState||_d.set(I.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(x){var I=()=>super.onAuthEvent,M=this;return(0,d.Z)(function*(){if("signInViaRedirect"===x.type)return I().call(M,x);if("unknown"!==x.type){if(x.eventId){const Y=yield M.auth._redirectUserForId(x.eventId);if(Y)return M.user=Y,I().call(M,x);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function hf(){return(hf=(0,d.Z)(function*(R,x){const I=c0(x),M=Lm(R);if(!(yield M._isAvailable()))return!1;const Y="true"===(yield M._get(I));return yield M._remove(I),Y})).apply(this,arguments)}function XS(R,x){return Id.apply(this,arguments)}function Id(){return(Id=(0,d.Z)(function*(R,x){return Lm(R)._set(c0(x),"true")})).apply(this,arguments)}function ab(){_d.clear()}function Lm(R){return tt(R._redirectPersistence)}function c0(R){return Rs("pendingRedirect",R.config.apiKey,R.name)}function P(R,x,I){return function H(R,x,I){return Z.apply(this,arguments)}(R,x,I)}function Z(){return(Z=(0,d.Z)(function*(R,x,I){const M=jn(R);ct(R,x,Jh);const Y=Xl(M,I);return yield XS(Y,M),Y._openRedirect(M,x,"signInViaRedirect")})).apply(this,arguments)}function oe(R,x,I){return function _e(R,x,I){return De.apply(this,arguments)}(R,x,I)}function De(){return(De=(0,d.Z)(function*(R,x,I){const M=(0,he.m9)(R);ct(M.auth,x,Jh);const Y=Xl(M.auth,I);yield XS(Y,M.auth);const ne=yield Gr(M);return Y._openRedirect(M.auth,x,"reauthViaRedirect",ne)})).apply(this,arguments)}function Ot(R,x,I){return function Gt(R,x,I){return oi.apply(this,arguments)}(R,x,I)}function oi(){return(oi=(0,d.Z)(function*(R,x,I){const M=(0,he.m9)(R);ct(M.auth,x,Jh);const Y=Xl(M.auth,I);yield Yp(!1,M,x.providerId),yield XS(Y,M.auth);const ne=yield Gr(M);return Y._openRedirect(M.auth,x,"linkViaRedirect",ne)})).apply(this,arguments)}function bn(R,x){return In.apply(this,arguments)}function In(){return(In=(0,d.Z)(function*(R,x){return yield jn(R)._initializationPromise,co(R,x,!1)})).apply(this,arguments)}function co(R,x){return bl.apply(this,arguments)}function bl(){return(bl=(0,d.Z)(function*(R,x,I=!1){const M=jn(R),Y=Xl(M,x),Fe=yield new ea(M,Y,I).execute();return Fe&&!I&&(delete Fe.user._redirectEventId,yield M._persistUserIfCurrent(Fe.user),yield M._setRedirectUser(null,x)),Fe})).apply(this,arguments)}function Gr(R){return qc.apply(this,arguments)}function qc(){return(qc=(0,d.Z)(function*(R){const x=Fn(`${R.uid}:::`);return R._redirectEventId=x,yield R.auth._setRedirectUser(R),yield R.auth._persistUserIfCurrent(R),x})).apply(this,arguments)}class sl{constructor(x){this.auth=x,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(x){this.consumers.add(x),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,x)&&(this.sendToConsumer(this.queuedRedirectEvent,x),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(x){this.consumers.delete(x)}onEvent(x){if(this.hasEventBeenHandled(x))return!1;let I=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(x,M)&&(I=!0,this.sendToConsumer(x,M),this.saveEventToCache(x))}),this.hasHandledPotentialRedirect||!function Mm(R){switch(R.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yl(R);default:return!1}}(x)||(this.hasHandledPotentialRedirect=!0,I||(this.queuedRedirectEvent=x,I=!0)),I}sendToConsumer(x,I){var M;if(x.error&&!yl(x)){const Y=(null===(M=x.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";I.onError(et(this.auth,Y))}else I.onAuthEvent(x)}isEventForConsumer(x,I){const M=null===I.eventId||!!x.eventId&&x.eventId===I.eventId;return I.filter.includes(x.type)&&M}hasEventBeenHandled(x){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Td(x))}saveEventToCache(x){this.cachedEventUids.add(Td(x)),this.lastProcessedEventTime=Date.now()}}function Td(R){return[R.type,R.eventId,R.sessionId,R.tenantId].filter(x=>x).join("-")}function yl({type:R,error:x}){return"unknown"===R&&"auth/no-auth-event"===(null==x?void 0:x.code)}function d0(R){return lb.apply(this,arguments)}function lb(){return(lb=(0,d.Z)(function*(R,x={}){return An(R,"GET","/v1/projects",x)})).apply(this,arguments)}const u0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RI=/^https?/;function hb(){return(hb=(0,d.Z)(function*(R){if(R.config.emulator)return;const{authorizedDomains:x}=yield d0(R);for(const I of x)try{if(cb(I))return}catch(M){}kt(R,"unauthorized-domain")})).apply(this,arguments)}function cb(R){const x=Qe(),{protocol:I,hostname:M}=new URL(x);if(R.startsWith("chrome-extension://")){const Fe=new URL(R);return""===Fe.hostname&&""===M?"chrome-extension:"===I&&R.replace("chrome-extension://","")===x.replace("chrome-extension://",""):"chrome-extension:"===I&&Fe.hostname===M}if(!RI.test(I))return!1;if(u0.test(R))return M===R;const Y=R.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Y+"|"+Y+")$","i").test(M)}const ov=new Ri(3e4,6e4);function AI(){const R=lo().___jsl;if(null==R?void 0:R.H)for(const x of Object.keys(R.H))if(R.H[x].r=R.H[x].r||[],R.H[x].L=R.H[x].L||[],R.H[x].r=[...R.H[x].L],R.CP)for(let I=0;I<R.CP.length;I++)R.CP[I]=null}let av=null;function LI(R){return av=av||function WN(R){return new Promise((x,I)=>{var M,Y,ne;function Fe(){AI(),gapi.load("gapi.iframes",{callback:()=>{x(gapi.iframes.getContext())},ontimeout:()=>{AI(),I(et(R,"network-request-failed"))},timeout:ov.get()})}if(null===(Y=null===(M=lo().gapi)||void 0===M?void 0:M.iframes)||void 0===Y?void 0:Y.Iframe)x(gapi.iframes.getContext());else{if(!(null===(ne=lo().gapi)||void 0===ne?void 0:ne.load)){const At=Yl("iframefcb");return lo()[At]=()=>{gapi.load?Fe():I(et(R,"network-request-failed"))},tl(`https://apis.google.com/js/api.js?onload=${At}`).catch(Ii=>I(Ii))}Fe()}}).catch(x=>{throw av=null,x})}(R),av}const MI=new Ri(5e3,15e3),db={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function p0(R){const x=R.config;He(x.authDomain,R,"auth-domain-config-required");const I=x.emulator?Zo(x,"emulator/auth/iframe"):`https://${R.config.authDomain}/__/auth/iframe`,M={apiKey:x.apiKey,appName:R.name,v:J.SDK_VERSION},Y=lv.get(R.config.apiHost);Y&&(M.eid=Y);const ne=R._getFrameworks();return ne.length&&(M.fw=ne.join(",")),`${I}?${(0,he.xO)(M).slice(1)}`}function Ju(){return Ju=(0,d.Z)(function*(R){const x=yield LI(R),I=lo().gapi;return He(I,R,"internal-error"),x.open({where:document.body,url:p0(R),messageHandlersFilter:I.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:db,dontclear:!0},M=>new Promise(function(){var Y=(0,d.Z)(function*(ne,Fe){yield M.restyle({setHideOnLeave:!1});const At=et(R,"network-request-failed"),Ii=lo().setTimeout(()=>{Fe(At)},MI.get());function es(){lo().clearTimeout(Ii),ne(M)}M.ping(es).then(es,()=>{Fe(At)})});return function(ne,Fe){return Y.apply(this,arguments)}}()))}),Ju.apply(this,arguments)}const OI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class g0{constructor(x){this.window=x,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(x){}}}function JS(R,x,I,M,Y,ne){He(R.config.authDomain,R,"auth-domain-config-required"),He(R.config.apiKey,R,"invalid-api-key");const Fe={apiKey:R.config.apiKey,appName:R.name,authType:I,redirectUrl:M,v:J.SDK_VERSION,eventId:Y};if(x instanceof Jh){x.setDefaultLanguage(R.languageCode),Fe.providerId=x.providerId||"",(0,he.xb)(x.getCustomParameters())||(Fe.customParameters=JSON.stringify(x.getCustomParameters()));for(const[Ii,es]of Object.entries(ne||{}))Fe[Ii]=es}if(x instanceof om){const Ii=x.getScopes().filter(es=>""!==es);Ii.length>0&&(Fe.scopes=Ii.join(","))}R.tenantId&&(Fe.tid=R.tenantId);const At=Fe;for(const Ii of Object.keys(At))void 0===At[Ii]&&delete At[Ii];return`${function IR({config:R}){return R.emulator?Zo(R,"emulator/auth/handler"):`https://${R.authDomain}/__/auth/handler`}(R)}?${(0,he.xO)(At).slice(1)}`}const ex="webStorageSupport",Dd=class Wc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ei,this._completeRedirectFn=co}_openPopup(x,I,M,Y){var ne=this;return(0,d.Z)(function*(){var Fe;Re(null===(Fe=ne.eventManagers[x._key()])||void 0===Fe?void 0:Fe.manager,"_initialize() not called before _openPopup()");const At=JS(x,I,M,Qe(),Y);return function b0(R,x,I,M=500,Y=600){const ne=Math.max((window.screen.availHeight-Y)/2,0).toString(),Fe=Math.max((window.screen.availWidth-M)/2,0).toString();let At="";const Ii=Object.assign(Object.assign({},OI),{width:M.toString(),height:Y.toString(),top:ne,left:Fe}),es=(0,he.z$)().toLowerCase();I&&(At=xt(es)?"_blank":I),we(es)&&(x=x||"http://localhost",Ii.scrollbars="yes");const ms=Object.entries(Ii).reduce((Jl,[Pm,pb])=>`${Jl}${Pm}=${pb},`,"");if(function Wl(R=(0,he.z$)()){var x;return Ps(R)&&!!(null===(x=window.navigator)||void 0===x?void 0:x.standalone)}(es)&&"_self"!==At)return function ep(R,x){const I=document.createElement("a");I.href=R,I.target=x;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),I.dispatchEvent(M)}(x||"",At),new g0(null);const $r=window.open(x||"",At,ms);He($r,R,"popup-blocked");try{$r.focus()}catch(Jl){}return new g0($r)}(x,At,Fn())})()}_openRedirect(x,I,M,Y){var ne=this;return(0,d.Z)(function*(){return yield ne._originValidation(x),function ef(R){lo().location.href=R}(JS(x,I,M,Qe(),Y)),new Promise(()=>{})})()}_initialize(x){const I=x._key();if(this.eventManagers[I]){const{manager:Y,promise:ne}=this.eventManagers[I];return Y?Promise.resolve(Y):(Re(ne,"If manager is not set, promise should be"),ne)}const M=this.initAndGetManager(x);return this.eventManagers[I]={promise:M},M.catch(()=>{delete this.eventManagers[I]}),M}initAndGetManager(x){var I=this;return(0,d.Z)(function*(){const M=yield function ub(R){return Ju.apply(this,arguments)}(x),Y=new sl(x);return M.register("authEvent",ne=>(He(null==ne?void 0:ne.authEvent,x,"invalid-auth-event"),{status:Y.onEvent(ne.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),I.eventManagers[x._key()]={manager:Y},I.iframes[x._key()]=M,Y})()}_isIframeWebStorageSupported(x,I){this.iframes[x._key()].send(ex,{type:ex},Y=>{var ne;const Fe=null===(ne=null==Y?void 0:Y[0])||void 0===ne?void 0:ne[ex];void 0!==Fe&&I(!!Fe),kt(x,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(x){const I=x._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function ER(R){return hb.apply(this,arguments)}(x)),this.originValidationPromises[I]}get _shouldInitProactively(){return Qa()||ve()||Ps()}};class v0 extends class y0{constructor(x){this.factorId=x}_process(x,I,M){switch(I.type){case"enroll":return this._finalizeEnroll(x,I.credential,M);case"signin":return this._finalizeSignIn(x,I.credential);default:return pi("unexpected MultiFactorSessionType")}}}{constructor(x){super("phone"),this.credential=x}static _fromCredential(x){return new v0(x)}_finalizeEnroll(x,I,M){return function $g(R,x){return An(R,"POST","/v2/accounts/mfaEnrollment:finalize",ln(R,x))}(x,{idToken:I,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(x,I){return function Mo(R,x){return An(R,"POST","/v2/accounts/mfaSignIn:finalize",ln(R,x))}(x,{mfaPendingCredential:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let PI=(()=>{class R{constructor(){}static assertion(I){return v0._fromCredential(I)}}return R.FACTOR_ID="phone",R})();var FI="@firebase/auth";class TR{constructor(x){this.auth=x,this.internalListeners=new Map}getUid(){var x;return this.assertAuthConfigured(),(null===(x=this.auth.currentUser)||void 0===x?void 0:x.uid)||null}getToken(x){var I=this;return(0,d.Z)(function*(){return I.assertAuthConfigured(),yield I.auth._initializationPromise,I.auth.currentUser?{accessToken:yield I.auth.currentUser.getIdToken(x)}:null})()}addAuthTokenListener(x){if(this.assertAuthConfigured(),this.internalListeners.has(x))return;const I=this.auth.onIdTokenChanged(M=>{var Y;x((null===(Y=M)||void 0===Y?void 0:Y.stsTokenManager.accessToken)||null)});this.internalListeners.set(x,I),this.updateProactiveRefresh()}removeAuthTokenListener(x){this.assertAuthConfigured();const I=this.internalListeners.get(x);!I||(this.internalListeners.delete(x),I(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function DR(R){(0,J._registerComponent)(new ot.wA("auth",(x,{options:I})=>{const M=x.getProvider("app").getImmediate(),{apiKey:Y,authDomain:ne}=M.options;return(Fe=>{He(Y&&!Y.includes(":"),"invalid-api-key",{appName:Fe.name}),He(!(null==ne?void 0:ne.includes(":")),"argument-error",{appName:Fe.name});const At={apiKey:Y,authDomain:ne,clientPlatform:R,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ga(R)},Ii=new tm(Fe,At);return function Ht(R,x){const I=(null==x?void 0:x.persistence)||[],M=(Array.isArray(I)?I:[I]).map(tt);(null==x?void 0:x.errorMap)&&R._updateErrorMap(x.errorMap),R._initializeWithPersistence(M,null==x?void 0:x.popupRedirectResolver)}(Ii,I),Ii})(M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((x,I,M)=>{x.getProvider("auth-internal").initialize()})),(0,J._registerComponent)(new ot.wA("auth-internal",x=>{const I=jn(x.getProvider("auth").getImmediate());return new TR(I)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.registerVersion)(FI,"0.19.9",function NI(R){switch(R){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(R)),(0,J.registerVersion)(FI,"0.19.9","esm2017")}("Browser")},2090:(Li,Et,se)=>{"use strict";se.d(Et,{BH:()=>$t,LL:()=>Qe,ZR:()=>Ht,gQ:()=>so,zI:()=>it,hu:()=>he,g5:()=>J,US:()=>ot,tV:()=>at,h$:()=>Pe,$s:()=>Xs,r3:()=>ln,Sg:()=>Tt,ne:()=>Mc,p$:()=>be,vZ:()=>To,ZB:()=>pe,gK:()=>qi,pd:()=>Qh,m9:()=>ar,z$:()=>Ft,GJ:()=>En,jU:()=>Xe,ru:()=>Dt,d:()=>et,xb:()=>fr,w1:()=>vt,hl:()=>pi,uI:()=>Wt,UG:()=>Ie,Yr:()=>ni,b$:()=>kt,G6:()=>He,Mn:()=>ct,w9:()=>ma,cI:()=>Ur,UI:()=>Xh,xO:()=>Lc,zd:()=>fh,DV:()=>An,ug:()=>ws,dS:()=>Xo,Pz:()=>Pi,Dv:()=>Oa,Wj:()=>fs,lb:()=>_n,eu:()=>Re});const he=function(de,ye){if(!de)throw J(ye)},J=function(de){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+de)},Ge=function(de){const ye=[];let Se=0;for(let gt=0;gt<de.length;gt++){let ze=de.charCodeAt(gt);ze<128?ye[Se++]=ze:ze<2048?(ye[Se++]=ze>>6|192,ye[Se++]=63&ze|128):55296==(64512&ze)&&gt+1<de.length&&56320==(64512&de.charCodeAt(gt+1))?(ze=65536+((1023&ze)<<10)+(1023&de.charCodeAt(++gt)),ye[Se++]=ze>>18|240,ye[Se++]=ze>>12&63|128,ye[Se++]=ze>>6&63|128,ye[Se++]=63&ze|128):(ye[Se++]=ze>>12|224,ye[Se++]=ze>>6&63|128,ye[Se++]=63&ze|128)}return ye},ot={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(de,ye){if(!Array.isArray(de))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Se=ye?this.byteToCharMapWebSafe_:this.byteToCharMap_,gt=[];for(let ze=0;ze<de.length;ze+=3){const ri=de[ze],Wi=ze+1<de.length,mn=Wi?de[ze+1]:0,zn=ze+2<de.length,ko=zn?de[ze+2]:0;let Ro=(15&mn)<<2|ko>>6,qe=63&ko;zn||(qe=64,Wi||(Ro=64)),gt.push(Se[ri>>2],Se[(3&ri)<<4|mn>>4],Se[Ro],Se[qe])}return gt.join("")},encodeString(de,ye){return this.HAS_NATIVE_SUPPORT&&!ye?btoa(de):this.encodeByteArray(Ge(de),ye)},decodeString(de,ye){return this.HAS_NATIVE_SUPPORT&&!ye?atob(de):function(de){const ye=[];let Se=0,gt=0;for(;Se<de.length;){const ze=de[Se++];if(ze<128)ye[gt++]=String.fromCharCode(ze);else if(ze>191&&ze<224){const ri=de[Se++];ye[gt++]=String.fromCharCode((31&ze)<<6|63&ri)}else if(ze>239&&ze<365){const zn=((7&ze)<<18|(63&de[Se++])<<12|(63&de[Se++])<<6|63&de[Se++])-65536;ye[gt++]=String.fromCharCode(55296+(zn>>10)),ye[gt++]=String.fromCharCode(56320+(1023&zn))}else{const ri=de[Se++],Wi=de[Se++];ye[gt++]=String.fromCharCode((15&ze)<<12|(63&ri)<<6|63&Wi)}}return ye.join("")}(this.decodeStringToByteArray(de,ye))},decodeStringToByteArray(de,ye){this.init_();const Se=ye?this.charToByteMapWebSafe_:this.charToByteMap_,gt=[];for(let ze=0;ze<de.length;){const ri=Se[de.charAt(ze++)],mn=ze<de.length?Se[de.charAt(ze)]:0;++ze;const ko=ze<de.length?Se[de.charAt(ze)]:64;++ze;const Rs=ze<de.length?Se[de.charAt(ze)]:64;if(++ze,null==ri||null==mn||null==ko||null==Rs)throw Error();gt.push(ri<<2|mn>>4),64!==ko&&(gt.push(mn<<4&240|ko>>2),64!==Rs&&gt.push(ko<<6&192|Rs))}return gt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let de=0;de<this.ENCODED_VALS.length;de++)this.byteToCharMap_[de]=this.ENCODED_VALS.charAt(de),this.charToByteMap_[this.byteToCharMap_[de]]=de,this.byteToCharMapWebSafe_[de]=this.ENCODED_VALS_WEBSAFE.charAt(de),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[de]]=de,de>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(de)]=de,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(de)]=de)}}},Pe=function(de){const ye=Ge(de);return ot.encodeByteArray(ye,!0)},$e=function(de){return Pe(de).replace(/\./g,"")},at=function(de){try{return ot.decodeString(de,!0)}catch(ye){console.error("base64Decode failed: ",ye)}return null};function be(de){return pe(void 0,de)}function pe(de,ye){if(!(ye instanceof Object))return ye;switch(ye.constructor){case Date:return new Date(ye.getTime());case Object:void 0===de&&(de={});break;case Array:de=[];break;default:return ye}for(const Se in ye)!ye.hasOwnProperty(Se)||!Ne(Se)||(de[Se]=pe(de[Se],ye[Se]));return de}function Ne(de){return"__proto__"!==de}class $t{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ye,Se)=>{this.resolve=ye,this.reject=Se})}wrapCallback(ye){return(Se,gt)=>{Se?this.reject(Se):this.resolve(gt),"function"==typeof ye&&(this.promise.catch(()=>{}),1===ye.length?ye(Se):ye(Se,gt))}}}function Tt(de,ye){if(de.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const gt=ye||"demo-project",ze=de.iat||0,ri=de.sub||de.user_id;if(!ri)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Wi=Object.assign({iss:`https://securetoken.google.com/${gt}`,aud:gt,iat:ze,exp:ze+3600,auth_time:ze,sub:ri,user_id:ri,firebase:{sign_in_provider:"custom",identities:{}}},de);return[$e(JSON.stringify({alg:"none",type:"JWT"})),$e(JSON.stringify(Wi)),""].join(".")}function Ft(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Wt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(de){return!1}}function Xe(){return"object"==typeof self&&self.self===self}function Dt(){const de="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof de&&void 0!==de.id}function kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function et(){return Ft().indexOf("Electron/")>=0}function vt(){const de=Ft();return de.indexOf("MSIE ")>=0||de.indexOf("Trident/")>=0}function ct(){return Ft().indexOf("MSAppHost/")>=0}function ni(){return!1}function He(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pi(){return"object"==typeof indexedDB}function Re(){return new Promise((de,ye)=>{try{let Se=!0;const gt="validate-browser-context-for-indexeddb-analytics-module",ze=self.indexedDB.open(gt);ze.onsuccess=()=>{ze.result.close(),Se||self.indexedDB.deleteDatabase(gt),de(!0)},ze.onupgradeneeded=()=>{Se=!1},ze.onerror=()=>{var ri;ye((null===(ri=ze.error)||void 0===ri?void 0:ri.message)||"")}}catch(Se){ye(Se)}})}function it(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ht extends Error{constructor(ye,Se,gt){super(Se),this.code=ye,this.customData=gt,this.name="FirebaseError",Object.setPrototypeOf(this,Ht.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(ye,Se,gt){this.service=ye,this.serviceName=Se,this.errors=gt}create(ye,...Se){const gt=Se[0]||{},ze=`${this.service}/${ye}`,ri=this.errors[ye],Wi=ri?function ns(de,ye){return de.replace(xn,(Se,gt)=>{const ze=ye[gt];return null!=ze?String(ze):`<${gt}?>`})}(ri,gt):"Error";return new Ht(ze,`${this.serviceName}: ${Wi} (${ze}).`,gt)}}const xn=/\{\$([^}]+)}/g;function Ur(de){return JSON.parse(de)}function Pi(de){return JSON.stringify(de)}const Ri=function(de){let ye={},Se={},gt={},ze="";try{const ri=de.split(".");ye=Ur(at(ri[0])||""),Se=Ur(at(ri[1])||""),ze=ri[2],gt=Se.d||{},delete Se.d}catch(ri){}return{header:ye,claims:Se,data:gt,signature:ze}},ma=function(de){const Se=Ri(de).claims;return!!Se&&"object"==typeof Se&&Se.hasOwnProperty("iat")},En=function(de){const ye=Ri(de).claims;return"object"==typeof ye&&!0===ye.admin};function ln(de,ye){return Object.prototype.hasOwnProperty.call(de,ye)}function An(de,ye){if(Object.prototype.hasOwnProperty.call(de,ye))return de[ye]}function fr(de){for(const ye in de)if(Object.prototype.hasOwnProperty.call(de,ye))return!1;return!0}function Xh(de,ye,Se){const gt={};for(const ze in de)Object.prototype.hasOwnProperty.call(de,ze)&&(gt[ze]=ye.call(Se,de[ze],ze,de));return gt}function To(de,ye){if(de===ye)return!0;const Se=Object.keys(de),gt=Object.keys(ye);for(const ze of Se){if(!gt.includes(ze))return!1;const ri=de[ze],Wi=ye[ze];if(Ma(ri)&&Ma(Wi)){if(!To(ri,Wi))return!1}else if(ri!==Wi)return!1}for(const ze of gt)if(!Se.includes(ze))return!1;return!0}function Ma(de){return null!==de&&"object"==typeof de}function Lc(de){const ye=[];for(const[Se,gt]of Object.entries(de))Array.isArray(gt)?gt.forEach(ze=>{ye.push(encodeURIComponent(Se)+"="+encodeURIComponent(ze))}):ye.push(encodeURIComponent(Se)+"="+encodeURIComponent(gt));return ye.length?"&"+ye.join("&"):""}function fh(de){const ye={};return de.replace(/^\?/,"").split("&").forEach(gt=>{if(gt){const[ze,ri]=gt.split("=");ye[decodeURIComponent(ze)]=decodeURIComponent(ri)}}),ye}function Qh(de){const ye=de.indexOf("?");if(!ye)return"";const Se=de.indexOf("#",ye);return de.substring(ye,Se>0?Se:void 0)}class so{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ye=1;ye<this.blockSize;++ye)this.pad_[ye]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ye,Se){Se||(Se=0);const gt=this.W_;if("string"==typeof ye)for(let Rs=0;Rs<16;Rs++)gt[Rs]=ye.charCodeAt(Se)<<24|ye.charCodeAt(Se+1)<<16|ye.charCodeAt(Se+2)<<8|ye.charCodeAt(Se+3),Se+=4;else for(let Rs=0;Rs<16;Rs++)gt[Rs]=ye[Se]<<24|ye[Se+1]<<16|ye[Se+2]<<8|ye[Se+3],Se+=4;for(let Rs=16;Rs<80;Rs++){const Ro=gt[Rs-3]^gt[Rs-8]^gt[Rs-14]^gt[Rs-16];gt[Rs]=4294967295&(Ro<<1|Ro>>>31)}let ko,Qo,ze=this.chain_[0],ri=this.chain_[1],Wi=this.chain_[2],mn=this.chain_[3],zn=this.chain_[4];for(let Rs=0;Rs<80;Rs++){Rs<40?Rs<20?(ko=mn^ri&(Wi^mn),Qo=1518500249):(ko=ri^Wi^mn,Qo=1859775393):Rs<60?(ko=ri&Wi|mn&(ri|Wi),Qo=2400959708):(ko=ri^Wi^mn,Qo=3395469782);const Ro=(ze<<5|ze>>>27)+ko+zn+Qo+gt[Rs]&4294967295;zn=mn,mn=Wi,Wi=4294967295&(ri<<30|ri>>>2),ri=ze,ze=Ro}this.chain_[0]=this.chain_[0]+ze&4294967295,this.chain_[1]=this.chain_[1]+ri&4294967295,this.chain_[2]=this.chain_[2]+Wi&4294967295,this.chain_[3]=this.chain_[3]+mn&4294967295,this.chain_[4]=this.chain_[4]+zn&4294967295}update(ye,Se){if(null==ye)return;void 0===Se&&(Se=ye.length);const gt=Se-this.blockSize;let ze=0;const ri=this.buf_;let Wi=this.inbuf_;for(;ze<Se;){if(0===Wi)for(;ze<=gt;)this.compress_(ye,ze),ze+=this.blockSize;if("string"==typeof ye){for(;ze<Se;)if(ri[Wi]=ye.charCodeAt(ze),++Wi,++ze,Wi===this.blockSize){this.compress_(ri),Wi=0;break}}else for(;ze<Se;)if(ri[Wi]=ye[ze],++Wi,++ze,Wi===this.blockSize){this.compress_(ri),Wi=0;break}}this.inbuf_=Wi,this.total_+=Se}digest(){const ye=[];let Se=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ze=this.blockSize-1;ze>=56;ze--)this.buf_[ze]=255&Se,Se/=256;this.compress_(this.buf_);let gt=0;for(let ze=0;ze<5;ze++)for(let ri=24;ri>=0;ri-=8)ye[gt]=this.chain_[ze]>>ri&255,++gt;return ye}}function Mc(de,ye){const Se=new Gi(de,ye);return Se.subscribe.bind(Se)}class Gi{constructor(ye,Se){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Se,this.task.then(()=>{ye(this)}).catch(gt=>{this.error(gt)})}next(ye){this.forEachObserver(Se=>{Se.next(ye)})}error(ye){this.forEachObserver(Se=>{Se.error(ye)}),this.close(ye)}complete(){this.forEachObserver(ye=>{ye.complete()}),this.close()}subscribe(ye,Se,gt){let ze;if(void 0===ye&&void 0===Se&&void 0===gt)throw new Error("Missing Observer.");ze=function Rr(de,ye){if("object"!=typeof de||null===de)return!1;for(const Se of ye)if(Se in de&&"function"==typeof de[Se])return!0;return!1}(ye,["next","error","complete"])?ye:{next:ye,error:Se,complete:gt},void 0===ze.next&&(ze.next=fn),void 0===ze.error&&(ze.error=fn),void 0===ze.complete&&(ze.complete=fn);const ri=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ze.error(this.finalError):ze.complete()}catch(Wi){}}),this.observers.push(ze),ri}unsubscribeOne(ye){void 0===this.observers||void 0===this.observers[ye]||(delete this.observers[ye],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ye){if(!this.finalized)for(let Se=0;Se<this.observers.length;Se++)this.sendOne(Se,ye)}sendOne(ye,Se){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ye])try{Se(this.observers[ye])}catch(gt){"undefined"!=typeof console&&console.error&&console.error(gt)}})}close(ye){this.finalized||(this.finalized=!0,void 0!==ye&&(this.finalError=ye),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fn(){}const Oa=function(de,ye,Se,gt){let ze;if(gt<ye?ze="at least "+ye:gt>Se&&(ze=0===Se?"none":"no more than "+Se),ze)throw new Error(de+" failed: Was called with "+gt+(1===gt?" argument.":" arguments.")+" Expects "+ze+".")};function qi(de,ye){return`${de} failed: ${ye} argument `}function fs(de,ye,Se,gt){if((!gt||Se)&&"function"!=typeof Se)throw new Error(qi(de,ye)+"must be a valid function.")}function _n(de,ye,Se,gt){if((!gt||Se)&&("object"!=typeof Se||null===Se))throw new Error(qi(de,ye)+"must be a valid context object.")}const Xo=function(de){const ye=[];let Se=0;for(let gt=0;gt<de.length;gt++){let ze=de.charCodeAt(gt);if(ze>=55296&&ze<=56319){const ri=ze-55296;gt++,he(gt<de.length,"Surrogate pair missing trail surrogate."),ze=65536+(ri<<10)+(de.charCodeAt(gt)-56320)}ze<128?ye[Se++]=ze:ze<2048?(ye[Se++]=ze>>6|192,ye[Se++]=63&ze|128):ze<65536?(ye[Se++]=ze>>12|224,ye[Se++]=ze>>6&63|128,ye[Se++]=63&ze|128):(ye[Se++]=ze>>18|240,ye[Se++]=ze>>12&63|128,ye[Se++]=ze>>6&63|128,ye[Se++]=63&ze|128)}return ye},ws=function(de){let ye=0;for(let Se=0;Se<de.length;Se++){const gt=de.charCodeAt(Se);gt<128?ye++:gt<2048?ye+=2:gt>=55296&&gt<=56319?(ye+=4,Se++):ye+=3}return ye};function Xs(de,ye=1e3,Se=2){const gt=ye*Math.pow(Se,de),ze=Math.round(.5*gt*(Math.random()-.5)*2);return Math.min(144e5,gt+ze)}function ar(de){return de&&de._delegate?de._delegate:de}},3858:(Li,Et,se)=>{"use strict";var d=se(5e3);let he=null;function J(){return he}const Pe=new d.OlP("DocumentToken");let $e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function at(){return(0,d.LFG)(pe)}()},providedIn:"platform"}),n})();const be=new d.OlP("Location Initialized");let pe=(()=>{class n extends $e{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState(t){const i=J().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=J().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,s){Ne()?this._history.pushState(t,i,s):this.location.hash=s}replaceState(t,i,s){Ne()?this._history.replaceState(t,i,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Pe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function $t(){return new pe((0,d.LFG)(Pe))}()},providedIn:"platform"}),n})();function Ne(){return!!window.history.pushState}function Tt(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ft(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Wt(n){return n&&"?"!==n[0]?"?"+n:n}let Ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Xe(n){const e=(0,d.LFG)(Pe).location;return new kt((0,d.LFG)($e),e&&e.origin||"")}()},providedIn:"root"}),n})();const Dt=new d.OlP("appBaseHref");let kt=(()=>{class n extends Ie{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Tt(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Wt(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${i}${s}`:i}pushState(t,i,s,r){const o=this.prepareExternalUrl(s+Wt(r));this._platformLocation.pushState(t,i,o)}replaceState(t,i,s,r){const o=this.prepareExternalUrl(s+Wt(r));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,s;null===(s=(i=this._platformLocation).historyGo)||void 0===s||s.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($e),d.LFG(Dt,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),et=(()=>{class n extends Ie{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Tt(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,s,r){let o=this.prepareExternalUrl(s+Wt(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,s,r){let o=this.prepareExternalUrl(s+Wt(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,s;null===(s=(i=this._platformLocation).historyGo)||void 0===s||s.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($e),d.LFG(Dt,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),vt=(()=>{class n{constructor(t,i){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Ft(He(s)),this._platformStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Wt(i))}normalize(t){return n.stripTrailingSlash(function ni(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,He(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",s=null){this._platformStrategy.pushState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wt(i)),s)}replaceState(t,i="",s=null){this._platformStrategy.replaceState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wt(i)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,s;null===(s=(i=this._platformStrategy).historyGo)||void 0===s||s.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(s=>s(t,i))}subscribe(t,i,s){return this._subject.subscribe({next:t,error:i,complete:s})}}return n.normalizeQueryParams=Wt,n.joinWithSlash=Tt,n.stripTrailingSlash=Ft,n.\u0275fac=function(t){return new(t||n)(d.LFG(Ie),d.LFG($e))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ct(){return new vt((0,d.LFG)(Ie),(0,d.LFG)($e))}()},providedIn:"root"}),n})();function He(n){return n.replace(/\/index.html$/,"")}var it=(()=>((it=it||{})[it.Zero=0]="Zero",it[it.One=1]="One",it[it.Two=2]="Two",it[it.Few=3]="Few",it[it.Many=4]="Many",it[it.Other=5]="Other",it))();const Qh=d.kL8;class Jn{}let ro=(()=>{class n extends Jn{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(Qh(i||this.locale)(t)){case it.Zero:return"zero";case it.One:return"one";case it.Two:return"two";case it.Few:return"few";case it.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.soG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),$l=(()=>{class n{constructor(t,i,s,r){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=s,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ru{constructor(e,t,i,s){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vr=(()=>{class n{constructor(t,i,s){this._viewContainer=t,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((s,r,o)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new ru(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===r?void 0:r);else if(null!==r){const a=i.get(r);i.move(a,o),ju(a,s)}});for(let s=0,r=i.length;s<r;s++){const a=i.get(s).context;a.index=s,a.count=r,a.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{ju(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ju(n,e){n.context.$implicit=e.item}let Ar=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new er,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ng("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ng("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class er{constructor(){this.$implicit=null,this.ngIf=null}}function Ng(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}class sm{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Ja=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),mh=(()=>{class n{constructor(t,i,s){this.ngSwitch=s,s._addCase(),this._view=new sm(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(Ja,9))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),nm=(()=>{class n{constructor(t,i,s){s._addDefault(new sm(t,i))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(Ja,9))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitchDefault",""]]}),n})(),Gp=(()=>{class n{constructor(t,i,s){this._ngEl=t,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[s,r]=t.split(".");null!=(i=null!=i&&r?`${i}${r}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,s,i):this._renderer.removeStyle(this._ngEl.nativeElement,s)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.aQg),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),Lo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[{provide:Jn,useClass:ro}]}),n})();const cm="browser";function hn(n){return n===cm}function tc(n){return"server"===n}let s0=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new zg((0,d.LFG)(Pe),window)}),n})();class zg{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ic(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=i.currentNode;for(;s;){const r=s.shadowRoot;if(r){const o=r.getElementById(e)||r.querySelector(`[name="${e}"]`);if(o)return o}s=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(i-r[0],s-r[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=n0(this.window.history)||n0(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function n0(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Uu extends class Yp extends class ot{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Ue(n){he||(he=n)}(new Uu)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function um(){return Zn=Zn||document.querySelector("base"),Zn?Zn.getAttribute("href"):null}();return null==t?null:function lu(n){jg=jg||document.createElement("a"),jg.setAttribute("href",n);const e=jg.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Pg(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[s,r]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(s.trim()===e)return decodeURIComponent(r)}return null}(document.cookie,e)}}let jg,Zn=null;const Jo=new d.OlP("TRANSITION_ID"),oo=[{provide:d.ip1,useFactory:function Fy(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const i=J(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let r=0;r<s.length;r++)i.remove(s[r])})}},deps:[Jo,Pe,d.zs3],multi:!0}];class Bc{static init(){(0,d.VLi)(new Bc)}addToWindow(e){d.dqk.getAngularTestability=(i,s=!0)=>{const r=e.findTestabilityInTree(i,s);if(null==r)throw new Error("Could not find testability for element.");return r},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(i=>{const s=d.dqk.getAllAngularTestabilities();let r=s.length,o=!1;const a=function(l){o=o||l,r--,0==r&&i(o)};s.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:i?J().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Pa=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const qu=new d.OlP("EventManagerPlugins");let hu=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,s){return this._findPluginFor(i).addEventListener(t,i,s)}addGlobalEventListener(t,i,s){return this._findPluginFor(i).addGlobalEventListener(t,i,s)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const s=this._plugins;for(let r=0;r<s.length;r++){const o=s[r];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qu),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class pm{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const s=J().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,i)}}let sc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),i.add(s))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Hc=(()=>{class n extends sc{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,s){t.forEach(r=>{const o=this._doc.createElement("style");o.textContent=r,s.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(yd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,s)=>{this._addStylesToHost(t,s,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(yd))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function yd(n){J().remove(n)}const Xi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zp=/%COMP%/g;function _t(n,e,t){for(let i=0;i<e.length;i++){let s=e[i];Array.isArray(s)?_t(n,s,t):(s=s.replace(Zp,n),t.push(s))}return t}function Bs(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let mr=(()=>{class n{constructor(t,i,s){this.eventManager=t,this.sharedStylesHost=i,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Xp(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case d.ifc.Emulated:{let s=this.rendererByCompId.get(i.id);return s||(s=new zy(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,s)),s.applyToHost(t),s}case 1:case d.ifc.ShadowDom:return new mm(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const s=_t(i.id,i.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(hu),d.LFG(Hc),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Xp{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Xi[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,s){if(s){t=s+":"+t;const r=Xi[s];r?e.setAttributeNS(r,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const s=Xi[i];s?e.removeAttributeNS(s,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,s){s&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,i,s&d.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Bs(i)):this.eventManager.addEventListener(e,t,Bs(i))}}class zy extends Xp{constructor(e,t,i,s){super(e),this.component=i;const r=_t(s+"-"+i.id,i.styles,[]);t.addStyles(r),this.contentAttr=function By(n){return"_ngcontent-%COMP%".replace(Zp,n)}(s+"-"+i.id),this.hostAttr=function Hy(n){return"_nghost-%COMP%".replace(Zp,n)}(s+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class mm extends Xp{constructor(e,t,i,s){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=_t(s.id,s.styles,[]);for(let o=0;o<r.length;o++){const a=document.createElement("style");a.textContent=r[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let DI=(()=>{class n extends pm{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,s){return t.addEventListener(i,s,!1),()=>this.removeEventListener(t,i,s)}removeEventListener(t,i,s){return t.removeEventListener(i,s)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const o0=["alt","control","meta","shift"],qg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ao={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},vd={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let gm=(()=>{class n extends pm{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,s){const r=n.parseEventName(i),o=n.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>J().onAndCancel(t,r.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const r=n._normalizeKey(i.pop());let o="";if(o0.forEach(l=>{const h=i.indexOf(l);h>-1&&(i.splice(h,1),o+=l+".")}),o+=r,0!=i.length||0===r.length)return null;const a={};return a.domEventName=s,a.fullKey=o,a}static getEventFullKey(t){let i="",s=function cu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ao.hasOwnProperty(e)&&(e=ao[e]))}return qg[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),o0.forEach(r=>{r!=s&&vd[r](t)&&(i+=r+".")}),i+=s,i}static eventCallback(t,i,s){return r=>{n.getEventFullKey(r)===t&&s.runGuarded(()=>i(r))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Gg=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:cm},{provide:d.g9A,useValue:function nc(){Uu.makeCurrent(),Bc.init()},multi:!0},{provide:Pe,useFactory:function Wg(){return(0,d.RDi)(document),document},deps:[]}]),bm=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function jy(){return new d.qLn},deps:[]},{provide:qu,useClass:DI,multi:!0,deps:[Pe,d.R0b,d.Lbi]},{provide:qu,useClass:gm,multi:!0,deps:[Pe]},{provide:mr,useClass:mr,deps:[hu,Hc,d.AFp]},{provide:d.FYo,useExisting:mr},{provide:sc,useExisting:Hc},{provide:Hc,useClass:Hc,deps:[Pe]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:hu,useClass:hu,deps:[qu,d.R0b]},{provide:class tr{},useClass:Pa,deps:[]}];let Qp=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Jo,useExisting:d.AFp},oo]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:bm,imports:[Lo,d.hGG]}),n})();"undefined"!=typeof window&&window;var ir=se(8996),xm=se(3269);function ei(...n){const e=(0,xm.yG)(n);return(0,ir.D)(n,e)}var _s=se(7579);class el extends _s.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}var Fn=se(8306);const{isArray:Qy}=Array,{getPrototypeOf:lo,prototype:ef,keys:Em}=Object;function Ku(n){if(1===n.length){const e=n[0];if(Qy(e))return{args:e,keys:null};if(function Yu(n){return n&&"object"==typeof n&&lo(n)===ef}(e)){const t=Em(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var zc=se(4671),Ni=se(4004);const{isArray:Jy}=Array;function tf(n){return(0,Ni.U)(e=>function l0(n,e){return Jy(e)?n(...e):n(e)}(n,e))}function ev(n,e){return n.reduce((t,i,s)=>(t[i]=e[s],t),{})}var gn=se(5403),sf=se(9672);function pl(n,e,t){n?(0,sf.f)(t,n,e):e()}const rf=(0,se(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var jc=se(8189);function Im(...n){return function Zg(){return(0,jc.J)(1)}()((0,ir.D)(n,(0,xm.yG)(n)))}var yh=se(8421);function Xg(n){return new Fn.y(e=>{(0,yh.Xf)(n()).subscribe(e)})}var Sd=se(515),fl=se(727),Mo=se(4482);function tv(){return(0,Mo.e)((n,e)=>{let t=null;n._refCount++;const i=(0,gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,r=t;t=null,s&&(!r||s===r)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class af extends Fn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Mo.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,gn.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fl.w0.EMPTY)}return e}refCount(){return tv()(this)}}function lr(n,e){return(0,Mo.e)((t,i)=>{let s=null,r=0,o=!1;const a=()=>o&&!s&&i.complete();t.subscribe((0,gn.x)(i,l=>{null==s||s.unsubscribe();let h=0;const c=r++;(0,yh.Xf)(n(l,c)).subscribe(s=(0,gn.x)(i,m=>i.next(e?e(l,m,c,h++):m),()=>{s=null,a()}))},()=>{o=!0,a()}))})}var tl=se(5698);function Yl(...n){const e=(0,xm.yG)(n);return(0,Mo.e)((t,i)=>{(e?Im(n,t,e):Im(n,t)).subscribe(i)})}function Tm(n,e,t,i,s){return(r,o)=>{let a=t,l=e,h=0;r.subscribe((0,gn.x)(o,c=>{const m=h++;l=a?n(l,c,m):(a=!0,c),i&&o.next(l)},s&&(()=>{a&&o.next(l),o.complete()})))}}function vh(n,e){return(0,Mo.e)(Tm(n,e,arguments.length>=2,!0))}function Un(n,e){return(0,Mo.e)((t,i)=>{let s=0;t.subscribe((0,gn.x)(i,r=>n.call(e,r,s++)&&i.next(r)))})}function ml(n){return(0,Mo.e)((e,t)=>{let r,i=null,s=!1;i=e.subscribe((0,gn.x)(t,void 0,void 0,o=>{r=(0,yh.Xf)(n(o,ml(n)(e))),i?(i.unsubscribe(),i=null,r.subscribe(t)):s=!0})),s&&(i.unsubscribe(),i=null,r.subscribe(t))})}var ho=se(5577),rc=se(576);function Zl(n,e){return(0,rc.m)(e)?(0,ho.z)(n,e,1):(0,ho.z)(n,1)}function iv(n){return n<=0?()=>Sd.E:(0,Mo.e)((e,t)=>{let i=[];e.subscribe((0,gn.x)(t,s=>{i.push(s),n<i.length&&i.shift()},()=>{for(const s of i)t.next(s);t.complete()},void 0,()=>{i=null}))})}function Qg(n=Wr){return(0,Mo.e)((e,t)=>{let i=!1;e.subscribe((0,gn.x)(t,s=>{i=!0,t.next(s)},()=>i?t.complete():t.error(n())))})}function Wr(){return new rf}function YS(n){return(0,Mo.e)((e,t)=>{let i=!1;e.subscribe((0,gn.x)(t,s=>{i=!0,t.next(s)},()=>{i||t.next(n),t.complete()}))})}function Zu(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Un((s,r)=>n(s,r,i)):zc.y,(0,tl.q)(1),t?YS(e):Qg(()=>new rf))}var ya=se(8505);class xd{constructor(e,t){this.id=e,this.url=t}}class Jg extends xd{constructor(e,t,i="imperative",s=null){super(e,t),this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ed extends xd{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nv extends xd{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Oo extends xd{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Dm extends xd{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class km extends xd{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZS extends xd{constructor(e,t,i,s,r){super(e,t),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class eb extends xd{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gl extends xd{constructor(e,t,i,s){super(e,t),this.urlAfterRedirects=i,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ch{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Rm{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tb{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xl{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lf{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rv{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ib{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const As="primary";class sb{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Uc(n){return new sb(n)}const Ql="ngNavigationCancelingError";function nb(n){const e=Error("NavigationCancelingError: "+n);return e[Ql]=!0,e}function kI(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const s={};for(let r=0;r<i.length;r++){const o=i[r],a=n[r];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:s}}function il(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let s;for(let r=0;r<t.length;r++)if(s=t[r],!Am(n[s],e[s]))return!1;return!0}function Am(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((s,r)=>i[r]===s)}return n===e}function ob(n){return Array.prototype.concat.apply([],n)}function h0(n){return n.length>0?n[n.length-1]:null}function ea(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ta(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,ir.D)(Promise.resolve(n)):ei(n)}const XS={exact:function c0(n,e,t){if(!oi(n.segments,e.segments)||!oe(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!c0(n.children[i],e.children[i],t))return!1;return!0},subset:H},Id={exact:function Lm(n,e){return il(n,e)},subset:function P(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Am(n[t],e[t]))},ignored:()=>!0};function ab(n,e,t){return XS[t.paths](n.root,e.root,t.matrixParams)&&Id[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function H(n,e,t){return Z(n,e,e.segments,t)}function Z(n,e,t,i){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!oi(s,t)||e.hasChildren()||!oe(s,t,i))}if(n.segments.length===t.length){if(!oi(n.segments,t)||!oe(n.segments,t,i))return!1;for(const s in e.children)if(!n.children[s]||!H(n.children[s],e.children[s],i))return!1;return!0}{const s=t.slice(0,n.segments.length),r=t.slice(n.segments.length);return!!(oi(n.segments,s)&&oe(n.segments,s,i)&&n.children[As])&&Z(n.children[As],e,r,i)}}function oe(n,e,t){return e.every((i,s)=>Id[t](n[s].parameters,i.parameters))}class _e{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uc(this.queryParams)),this._queryParamMap}toString(){return bl.serialize(this)}}class De{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ea(t,(i,s)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gr(this)}}class Ot{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Uc(this.parameters)),this._parameterMap}toString(){return lb(this)}}function oi(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class In{}class co{parse(e){const t=new av(e);return new _e(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${qc(e.root,!0)}`,i=function RI(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(s=>`${sl(t)}=${sl(s)}`).join("&"):`${sl(t)}=${sl(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function Td(n){return encodeURI(n)}(e.fragment)}`:""}`}}const bl=new co;function Gr(n){return n.segments.map(e=>lb(e)).join("/")}function qc(n,e){if(!n.hasChildren())return Gr(n);if(e){const t=n.children[As]?qc(n.children[As],!1):"",i=[];return ea(n.children,(s,r)=>{r!==As&&i.push(`${r}:${qc(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function bn(n,e){let t=[];return ea(n.children,(i,s)=>{s===As&&(t=t.concat(e(i,s)))}),ea(n.children,(i,s)=>{s!==As&&(t=t.concat(e(i,s)))}),t}(n,(i,s)=>s===As?[qc(n.children[As],!1)]:[`${s}:${qc(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[As]?`${Gr(n)}/${t[0]}`:`${Gr(n)}/(${t.join("//")})`}}function pu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sl(n){return pu(n).replace(/%3B/gi,";")}function yl(n){return pu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mm(n){return decodeURIComponent(n)}function d0(n){return Mm(n.replace(/\+/g,"%20"))}function lb(n){return`${yl(n.path)}${function u0(n){return Object.keys(n).map(e=>`;${yl(e)}=${yl(n[e])}`).join("")}(n.parameters)}`}const ER=/^[^\/()?;=#]+/;function hb(n){const e=n.match(ER);return e?e[0]:""}const cb=/^[^=?&#]+/,AI=/^[^&#]+/;class av{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[As]=new De(e,t)),i}parseSegment(){const e=hb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ot(Mm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=hb(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=hb(this.remaining);s&&(i=s,this.capture(i))}e[Mm(t)]=Mm(i)}parseQueryParam(e){const t=function ov(n){const e=n.match(cb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function WN(n){const e=n.match(AI);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const s=d0(t),r=d0(i);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(r)}else e[s]=r}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=hb(this.remaining),s=this.remaining[i.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let r;i.indexOf(":")>-1?(r=i.substr(0,i.indexOf(":")),this.capture(r),this.capture(":")):e&&(r=As);const o=this.parseChildren();t[r]=1===Object.keys(o).length?o[As]:new De([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class LI{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=MI(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=MI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=QS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return QS(e,this._root).map(t=>t.value)}}function MI(n,e){if(n===e.value)return e;for(const t of e.children){const i=MI(n,t);if(i)return i}return null}function QS(n,e){if(n===e.value)return[e];for(const t of e.children){const i=QS(n,t);if(i.length)return i.unshift(e),i}return[]}class Qu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function db(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class lv extends LI{constructor(e,t){super(e),this.snapshot=t,m0(this,e)}toString(){return this.snapshot.toString()}}function p0(n,e){const t=function ub(n,e){const o=new Om([],{},{},"",{},As,e,null,n.root,-1,{});return new f0("",new Qu(o,[]))}(n,e),i=new el([new Ot("",{})]),s=new el({}),r=new el({}),o=new el({}),a=new el(""),l=new Ju(i,s,o,a,r,As,e,t.root);return l.snapshot=t.root,new lv(new Qu(l,[]),t)}class Ju{constructor(e,t,i,s,r,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ni.U)(e=>Uc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ni.U)(e=>Uc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function OI(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const s=t[i],r=t[i-1];if(s.routeConfig&&""===s.routeConfig.path)i--;else{if(r.component)break;i--}}return function GN(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Om{constructor(e,t,i,s,r,o,a,l,h,c,m){this.url=e,this.params=t,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=h,this._lastPathIndex=c,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Uc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class f0 extends LI{constructor(e,t){super(t),this.url=e,m0(this,t)}toString(){return g0(this._root)}}function m0(n,e){e.value._routerState=n,e.children.forEach(t=>m0(n,t))}function g0(n){const e=n.children.length>0?` { ${n.children.map(g0).join(", ")} } `:"";return`${n.value}${e}`}function b0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,il(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),il(e.params,t.params)||n.params.next(t.params),function rb(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!il(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),il(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ep(n,e){const t=il(n.params,e.params)&&function Gt(n,e){return oi(n,e)&&n.every((t,i)=>il(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ep(n.parent,e.parent))}function hv(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const s=function JS(n,e,t){return e.children.map(i=>{for(const s of t.children)if(n.shouldReuseRoute(i.value,s.value.snapshot))return hv(n,i,s);return hv(n,i)})}(n,e,t);return new Qu(i,s)}{if(n.shouldAttach(e.value)){const r=n.retrieve(e.value);if(null!==r){const o=r.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>hv(n,a)),o}}const i=function IR(n){return new Ju(new el(n.url),new el(n.params),new el(n.queryParams),new el(n.fragment),new el(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(r=>hv(n,r));return new Qu(i,s)}}function Wc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Dd(n){return"object"==typeof n&&null!=n&&n.outlets}function y0(n,e,t,i,s){let r={};return i&&ea(i,(o,a)=>{r[a]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new _e(t.root===n?e:v0(t.root,n,e),r,s)}function v0(n,e,t){const i={};return ea(n.children,(s,r)=>{i[r]=s===e?t:v0(s,e,t)}),new De(n.segments,i)}class PI{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Wc(i[0]))throw new Error("Root segment cannot have matrix parameters");const s=i.find(Dd);if(s&&s!==h0(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class C0{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function kR(n,e,t){if(n||(n=new De([],{})),0===n.segments.length&&n.hasChildren())return R(n,e,t);const i=function x(n,e,t){let i=0,s=e;const r={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(i>=t.length)return r;const o=n.segments[s],a=t[i];if(Dd(a))break;const l=`${a}`,h=i<t.length-1?t[i+1]:null;if(s>0&&void 0===l)break;if(l&&h&&"object"==typeof h&&void 0===h.outlets){if(!ne(l,h,o))return r;i+=2}else{if(!ne(l,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}(n,e,t),s=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const r=new De(n.segments.slice(0,i.pathIndex),{});return r.children[As]=new De(n.segments.slice(i.pathIndex),n.children),R(r,0,s)}return i.match&&0===s.length?new De(n.segments,{}):i.match&&!n.hasChildren()?I(n,e,t):i.match?R(n,0,s):I(n,e,t)}function R(n,e,t){if(0===t.length)return new De(n.segments,{});{const i=function DR(n){return Dd(n[0])?n[0].outlets:{[As]:n}}(t),s={};return ea(i,(r,o)=>{"string"==typeof r&&(r=[r]),null!==r&&(s[o]=kR(n.children[o],e,r))}),ea(n.children,(r,o)=>{void 0===i[o]&&(s[o]=r)}),new De(n.segments,s)}}function I(n,e,t){const i=n.segments.slice(0,e);let s=0;for(;s<t.length;){const r=t[s];if(Dd(r)){const l=M(r.outlets);return new De(i,l)}if(0===s&&Wc(t[0])){i.push(new Ot(n.segments[e].path,Y(t[0]))),s++;continue}const o=Dd(r)?r.outlets[As]:`${r}`,a=s<t.length-1?t[s+1]:null;o&&a&&Wc(a)?(i.push(new Ot(o,Y(a))),s+=2):(i.push(new Ot(o,{})),s++)}return new De(i,{})}function M(n){const e={};return ea(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=I(new De([],{}),0,t))}),e}function Y(n){const e={};return ea(n,(t,i)=>e[i]=`${t}`),e}function ne(n,e,t){return n==t.path&&il(e,t.parameters)}class At{constructor(e,t,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),b0(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const s=db(t);e.children.forEach(r=>{const o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),ea(s,(r,o)=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(e,t,i){const s=e.value,r=t?t.value:null;if(s===r)if(s.component){const o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else r&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),s=i&&e.value.component?i.children:t,r=db(e);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],s);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),s=i&&e.value.component?i.children:t,r=db(e);for(const o of Object.keys(r))this.deactivateRouteAndItsChildren(r[o],s);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const s=db(t);e.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new rv(r.value.snapshot))}),e.children.length&&this.forwardEvent(new Xl(e.value.snapshot))}activateRoutes(e,t,i){const s=e.value,r=t?t.value:null;if(b0(s),s===r)if(s.component){const o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(s.component){const o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),b0(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function Ii(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=s,o.resolver=l,o.outlet&&o.outlet.activateWith(s,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class es{constructor(e,t){this.routes=e,this.module=t}}function ms(n){return"function"==typeof n}function Jl(n){return n instanceof _e}const dv=Symbol("INITIAL_VALUE");function uv(){return lr(n=>function _m(...n){const e=(0,xm.yG)(n),t=(0,xm.jO)(n),{args:i,keys:s}=Ku(n);if(0===i.length)return(0,ir.D)([],e);const r=new Fn.y(function nf(n,e,t=zc.y){return i=>{pl(e,()=>{const{length:s}=n,r=new Array(s);let o=s,a=s;for(let l=0;l<s;l++)pl(e,()=>{const h=(0,ir.D)(n[l],e);let c=!1;h.subscribe((0,gn.x)(i,m=>{r[l]=m,c||(c=!0,a--),a||i.next(t(r.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,s?o=>ev(s,o):zc.y));return t?r.pipe(tf(t)):r}(n.map(e=>e.pipe((0,tl.q)(1),Yl(dv)))).pipe(vh((e,t)=>{let i=!1;return t.reduce((s,r,o)=>s!==dv?s:(r===dv&&(i=!0),i||!1!==r&&o!==t.length-1&&!Jl(r)?s:r),e)},dv),Un(e=>e!==dv),(0,Ni.U)(e=>Jl(e)?e:!0===e),(0,tl.q)(1)))}class S0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fb,this.attachRef=null}}class fb{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new S0,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let x0=(()=>{class n{constructor(t,i,s,r,o){this.parentContexts=t,this.location=i,this.resolver=s,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=r||As,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new tx(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fb),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class tx{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Ju?this.route:e===fb?this.childContexts:this.parent.get(e,t)}}let ix=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&d._UZ(0,"router-outlet")},directives:[x0],encapsulation:2}),n})();function sx(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];mb(i,BI(e,i))}}function mb(n,e){n.children&&sx(n.children,e)}function BI(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function nx(n){const e=n.children&&n.children.map(nx),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==As&&(t.component=ix),t}function fu(n){return n.outlet||As}function ia(n,e){const t=n.filter(i=>fu(i)===e);return t.push(...n.filter(i=>fu(i)!==e)),t}const $N={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function HI(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},$N):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(e.matcher||kI)(t,n,e);if(!r)return Object.assign({},$N);const o={};ea(r.posParams,(l,h)=>{o[h]=l.path});const a=r.consumed.length>0?Object.assign(Object.assign({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:a,positionalParamSegments:null!==(i=r.posParams)&&void 0!==i?i:{}}}function E0(n,e,t,i,s="corrected"){if(t.length>0&&function iq(n,e,t){return t.some(i=>VI(n,e,i)&&fu(i)!==As)}(n,t,i)){const o=new De(e,function tq(n,e,t,i){const s={};s[As]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const r of t)if(""===r.path&&fu(r)!==As){const o=new De([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,s[fu(r)]=o}return s}(n,e,i,new De(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function sq(n,e,t){return t.some(i=>VI(n,e,i))}(n,t,i)){const o=new De(n.segments,function KN(n,e,t,i,s,r){const o={};for(const a of i)if(VI(n,t,a)&&!s[fu(a)]){const l=new De([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===r?n.segments.length:e.length,o[fu(a)]=l}return Object.assign(Object.assign({},s),o)}(n,e,t,i,n.children,s));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const r=new De(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function VI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function YN(n,e,t,i){return!!(fu(n)===i||i!==As&&VI(e,t,n))&&("**"===n.path||HI(e,n,t).matched)}function nq(n,e,t){return 0===e.length&&!n.children[t]}class zI{constructor(e){this.segmentGroup=e||null}}class _0{constructor(e){this.urlTree=e}}function vl(n){return new Fn.y(e=>e.error(new zI(n)))}function jI(n){return new Fn.y(e=>e.error(new _0(n)))}function ZN(n){return new Fn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class rx{constructor(e,t,i,s,r){this.configLoader=t,this.urlSerializer=i,this.urlTree=s,this.config=r,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=E0(this.urlTree.root,[],[],this.config).segmentGroup,t=new De(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,As).pipe((0,Ni.U)(r=>this.createUrlTree(AR(r),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ml(r=>{if(r instanceof _0)return this.allowRedirects=!1,this.match(r.urlTree);throw r instanceof zI?this.noMatchError(r):r}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,As).pipe((0,Ni.U)(s=>this.createUrlTree(AR(s),e.queryParams,e.fragment))).pipe(ml(s=>{throw s instanceof zI?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const s=e.segments.length>0?new De([],{[As]:e}):e;return new _e(s,t,i)}expandSegmentGroup(e,t,i,s){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,Ni.U)(r=>new De([],r))):this.expandSegment(e,i,t,i.segments,s,!0)}expandChildren(e,t,i){const s=[];for(const r of Object.keys(i.children))"primary"===r?s.unshift(r):s.push(r);return(0,ir.D)(s).pipe(Zl(r=>{const o=i.children[r],a=ia(t,r);return this.expandSegmentGroup(e,a,o,r).pipe((0,Ni.U)(l=>({segment:l,outlet:r})))}),vh((r,o)=>(r[o.outlet]=o.segment,r),{}),function xR(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Un((s,r)=>n(s,r,i)):zc.y,iv(1),t?YS(e):Qg(()=>new rf))}())}expandSegment(e,t,i,s,r,o){return(0,ir.D)(i).pipe(Zl(a=>this.expandSegmentAgainstRoute(e,t,i,a,s,r,o).pipe(ml(h=>{if(h instanceof zI)return ei(null);throw h}))),Zu(a=>!!a),ml((a,l)=>{if(a instanceof rf||"EmptyError"===a.name){if(nq(t,s,r))return ei(new De([],{}));throw new zI(t)}throw a}))}expandSegmentAgainstRoute(e,t,i,s,r,o,a){return YN(s,t,r,o)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,r,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o):vl(t):vl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,s,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,s){const r=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?jI(r):this.lineralizeSegments(i,r).pipe((0,ho.z)(o=>{const a=new De(o,{});return this.expandSegment(e,a,t,o,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,s,r,o){const{matched:a,consumedSegments:l,lastChild:h,positionalParamSegments:c}=HI(t,s,r);if(!a)return vl(t);const m=this.applyRedirectCommands(l,s.redirectTo,c);return s.redirectTo.startsWith("/")?jI(m):this.lineralizeSegments(s,m).pipe((0,ho.z)(b=>this.expandSegment(e,t,i,b.concat(r.slice(h)),o,!1)))}matchSegmentAgainstRoute(e,t,i,s,r){if("**"===i.path)return i.loadChildren?(i._loadedConfig?ei(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe((0,Ni.U)(b=>(i._loadedConfig=b,new De(s,{})))):ei(new De(s,{}));const{matched:o,consumedSegments:a,lastChild:l}=HI(t,i,s);if(!o)return vl(t);const h=s.slice(l);return this.getChildConfig(e,i,s).pipe((0,ho.z)(m=>{const b=m.module,v=m.routes,{segmentGroup:w,slicedSegments:E}=E0(t,a,h,v),D=new De(w.segments,w.children);if(0===E.length&&D.hasChildren())return this.expandChildren(b,v,D).pipe((0,Ni.U)($=>new De(a,$)));if(0===v.length&&0===E.length)return ei(new De(a,{}));const L=fu(i)===r;return this.expandSegment(b,D,v,E,L?As:r,!0).pipe((0,Ni.U)(V=>new De(a.concat(V.segments),V.children)))}))}getChildConfig(e,t,i){return t.children?ei(new es(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ei(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe((0,ho.z)(s=>s?this.configLoader.load(e.injector,t).pipe((0,Ni.U)(r=>(t._loadedConfig=r,r))):function XN(n){return new Fn.y(e=>e.error(nb(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):ei(new es([],e))}runCanLoadGuards(e,t,i){const s=t.canLoad;return s&&0!==s.length?ei(s.map(o=>{const a=e.get(o);let l;if(function Pm(n){return n&&ms(n.canLoad)}(a))l=a.canLoad(t,i);else{if(!ms(a))throw new Error("Invalid CanLoad guard");l=a(t,i)}return ta(l)})).pipe(uv(),(0,ya.b)(o=>{if(!Jl(o))return;const a=nb(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),(0,Ni.U)(o=>!0===o)):ei(!0)}lineralizeSegments(e,t){let i=[],s=t.root;for(;;){if(i=i.concat(s.segments),0===s.numberOfChildren)return ei(i);if(s.numberOfChildren>1||!s.children[As])return ZN(e.redirectTo);s=s.children[As]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,s){const r=this.createSegmentGroup(e,t.root,i,s);return new _e(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return ea(e,(s,r)=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,s){const r=this.createSegments(e,t.segments,i,s);let o={};return ea(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,s)}),new De(r,o)}createSegments(e,t,i,s){return t.map(r=>r.path.startsWith(":")?this.findPosParam(e,r,s):this.findOrReturn(r,i))}findPosParam(e,t,i){const s=i[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let i=0;for(const s of t){if(s.path===e.path)return t.splice(i),s;i++}return e}}function AR(n){const e={};for(const i of Object.keys(n.children)){const r=AR(n.children[i]);(r.segments.length>0||r.hasChildren())&&(e[i]=r)}return function RR(n){if(1===n.numberOfChildren&&n.children[As]){const e=n.children[As];return new De(n.segments.concat(e.segments),e.children)}return n}(new De(n.segments,e))}class LR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class UI{constructor(e,t){this.component=e,this.route=t}}function QN(n,e,t){const i=n._root;return ax(i,e?e._root:null,t,[i.value])}function ox(n,e,t){const i=function aq(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function ax(n,e,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=db(e);return n.children.forEach(o=>{(function MR(n,e,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){const l=function lq(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!oi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!oi(n.url,e.url)||!il(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ep(n,e)||!il(n.queryParams,e.queryParams);default:return!ep(n,e)}}(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new LR(i)):(r.data=o.data,r._resolvedData=o._resolvedData),ax(n,e,r.component?a?a.children:null:t,i,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new UI(a.outlet.component,o))}else o&&lx(e,a,s),s.canActivateChecks.push(new LR(i)),ax(n,null,r.component?a?a.children:null:t,i,s)})(o,r[o.value.outlet],t,i.concat([o.value]),s),delete r[o.value.outlet]}),ea(r,(o,a)=>lx(o,t.getContext(a),s)),s}function lx(n,e,t){const i=db(n),s=n.value;ea(i,(r,o)=>{lx(r,s.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new UI(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class mq{}function PR(n){return new Fn.y(e=>e.error(n))}class bq{constructor(e,t,i,s,r,o){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}recognize(){const e=E0(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,As);if(null===t)return null;const i=new Om([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},As,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Qu(i,t),r=new f0(this.url,s);return this.inheritParamsAndData(r._root),r}inheritParamsAndData(e){const t=e.value,i=OI(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const r of Object.keys(t.children)){const o=t.children[r],a=ia(e,r),l=this.processSegmentGroup(a,o,r);if(null===l)return null;i.push(...l)}const s=FR(i);return function yq(n){n.sort((e,t)=>e.value.outlet===As?-1:t.value.outlet===As?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,i,s){for(const r of e){const o=this.processSegmentAgainstRoute(r,t,i,s);if(null!==o)return o}return nq(t,i,s)?[]:null}processSegmentAgainstRoute(e,t,i,s){if(e.redirectTo||!YN(e,t,i,s))return null;let r,o=[],a=[];if("**"===e.path){const v=i.length>0?h0(i).parameters:{};r=new Om(i,v,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tp(e),fu(e),e.component,e,eB(t),pv(t)+i.length,wq(e))}else{const v=HI(t,e,i);if(!v.matched)return null;o=v.consumedSegments,a=i.slice(v.lastChild),r=new Om(o,v.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tp(e),fu(e),e.component,e,eB(t),pv(t)+o.length,wq(e))}const l=function vq(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:h,slicedSegments:c}=E0(t,o,a,l.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution);if(0===c.length&&h.hasChildren()){const v=this.processChildren(l,h);return null===v?null:[new Qu(r,v)]}if(0===l.length&&0===c.length)return[new Qu(r,[])];const m=fu(e)===s,b=this.processSegment(l,h,c,m?As:s);return null===b?null:[new Qu(r,b)]}}function JN(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function FR(n){const e=[],t=new Set;for(const i of n){if(!JN(i)){e.push(i);continue}const s=e.find(r=>i.value.routeConfig===r.value.routeConfig);void 0!==s?(s.children.push(...i.children),t.add(s)):e.push(i)}for(const i of t){const s=FR(i.children);e.push(new Qu(i.value,s))}return e.filter(i=>!t.has(i))}function eB(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function pv(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function tp(n){return n.data||{}}function wq(n){return n.resolve||{}}function qI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function BR(n){return lr(e=>{const t=n(e);return t?(0,ir.D)(t).pipe((0,Ni.U)(()=>e)):ei(e)})}class sB extends class cx{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const WI=new d.OlP("ROUTES");class GI{constructor(e,t,i,s){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe((0,Ni.U)(r=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=r.create(e);return new es(ob(o.injector.get(WI,void 0,d.XFs.Self|d.XFs.Optional)).map(nx),o)}),ml(r=>{throw t._loader$=void 0,r}));return t._loader$=new af(s,()=>new _s.x).pipe(tv()),t._loader$}loadModuleFactory(e){return ta(e()).pipe((0,ho.z)(t=>t instanceof d.YKP?ei(t):(0,ir.D)(this.compiler.compileModuleAsync(t))))}}class nB{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function cee(n){throw n}function I0(n,e,t){return e.parse("/")}function $I(n,e){return ei(null)}const rB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Sq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let eh=(()=>{class n{constructor(t,i,s,r,o,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=s,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _s.x,this.errorHandler=cee,this.malformedUriErrorHandler=I0,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:$I,afterPreactivation:$I},this.urlHandlingStrategy=new nB,this.routeReuseStrategy=new sB,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(d.h0i),this.console=o.get(d.c2e);const m=o.get(d.R0b);this.isNgZoneEnabled=m instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function hf(){return new _e(new De([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new GI(o,a,b=>this.triggerEvent(new Ch(b)),b=>this.triggerEvent(new Rm(b))),this.routerState=p0(this.currentUrlTree,this.rootComponentType),this.transitions=new el({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(Un(s=>0!==s.id),(0,Ni.U)(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),lr(s=>{let r=!1,o=!1;return ei(s).pipe((0,ya.b)(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),lr(a=>{const l=this.browserUrlTree.toString(),h=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||h)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return KI(a.source)&&(this.browserUrlTree=a.extractedUrl),ei(a).pipe(lr(m=>{const b=this.transitions.getValue();return i.next(new Jg(m.id,this.serializeUrl(m.extractedUrl),m.source,m.restoredState)),b!==this.transitions.getValue()?Sd.E:Promise.resolve(m)}),function rq(n,e,t,i){return lr(s=>function wh(n,e,t,i,s){return new rx(n,e,t,i,s).apply()}(n,e,t,s.extractedUrl,i).pipe((0,Ni.U)(r=>Object.assign(Object.assign({},s),{urlAfterRedirects:r}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ya.b)(m=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:m.urlAfterRedirects})}),function lee(n,e,t,i,s){return(0,ho.z)(r=>function gq(n,e,t,i,s="emptyOnly",r="legacy"){try{const o=new bq(n,e,t,i,s,r).recognize();return null===o?PR(new mq):ei(o)}catch(o){return PR(o)}}(n,e,r.urlAfterRedirects,t(r.urlAfterRedirects),i,s).pipe((0,Ni.U)(o=>Object.assign(Object.assign({},r),{targetSnapshot:o}))))}(this.rootComponentType,this.config,m=>this.serializeUrl(m),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ya.b)(m=>{if("eager"===this.urlUpdateStrategy){if(!m.extras.skipLocationChange){const v=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl);this.setBrowserUrl(v,m)}this.browserUrlTree=m.urlAfterRedirects}const b=new Dm(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);i.next(b)}));if(h&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:b,extractedUrl:v,source:w,restoredState:E,extras:D}=a,L=new Jg(b,this.serializeUrl(v),w,E);i.next(L);const N=p0(v,this.rootComponentType).snapshot;return ei(Object.assign(Object.assign({},a),{targetSnapshot:N,urlAfterRedirects:v,extras:Object.assign(Object.assign({},D),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Sd.E}),BR(a=>{const{targetSnapshot:l,id:h,extractedUrl:c,rawUrl:m,extras:{skipLocationChange:b,replaceUrl:v}}=a;return this.hooks.beforePreactivation(l,{navigationId:h,appliedUrlTree:c,rawUrlTree:m,skipLocationChange:!!b,replaceUrl:!!v})}),(0,ya.b)(a=>{const l=new km(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),(0,Ni.U)(a=>Object.assign(Object.assign({},a),{guards:QN(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function OR(n,e){return(0,ho.z)(t=>{const{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=t;return 0===o.length&&0===r.length?ei(Object.assign(Object.assign({},t),{guardsResult:!0})):function hq(n,e,t,i){return(0,ir.D)(n).pipe((0,ho.z)(s=>function fq(n,e,t,i,s){const r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return r&&0!==r.length?ei(r.map(a=>{const l=ox(a,e,s);let h;if(function cv(n){return n&&ms(n.canDeactivate)}(l))h=ta(l.canDeactivate(n,e,t,i));else{if(!ms(l))throw new Error("Invalid CanDeactivate guard");h=ta(l(n,e,t,i))}return h.pipe(Zu())})).pipe(uv()):ei(!0)}(s.component,s.route,t,e,i)),Zu(s=>!0!==s,!0))}(o,i,s,n).pipe((0,ho.z)(a=>a&&function $r(n){return"boolean"==typeof n}(a)?function cq(n,e,t,i){return(0,ir.D)(e).pipe(Zl(s=>Im(function dq(n,e){return null!==n&&e&&e(new tb(n)),ei(!0)}(s.route.parent,i),function hx(n,e){return null!==n&&e&&e(new lf(n)),ei(!0)}(s.route,i),function pq(n,e,t){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(o=>function oq(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Xg(()=>ei(o.guards.map(l=>{const h=ox(l,o.node,t);let c;if(function w0(n){return n&&ms(n.canActivateChild)}(h))c=ta(h.canActivateChild(i,n));else{if(!ms(h))throw new Error("Invalid CanActivateChild guard");c=ta(h(i,n))}return c.pipe(Zu())})).pipe(uv())));return ei(r).pipe(uv())}(n,s.path,t),function uq(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return ei(!0);const s=i.map(r=>Xg(()=>{const o=ox(r,e,t);let a;if(function pb(n){return n&&ms(n.canActivate)}(o))a=ta(o.canActivate(e,n));else{if(!ms(o))throw new Error("Invalid CanActivate guard");a=ta(o(e,n))}return a.pipe(Zu())}));return ei(s).pipe(uv())}(n,s.route,t))),Zu(s=>!0!==s,!0))}(i,r,n,e):ei(a)),(0,Ni.U)(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),(0,ya.b)(a=>{if(Jl(a.guardsResult)){const h=nb(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw h.url=a.guardsResult,h}const l=new ZS(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Un(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),BR(a=>{if(a.guards.canActivateChecks.length)return ei(a).pipe((0,ya.b)(l=>{const h=new eb(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(h)}),lr(l=>{let h=!1;return ei(l).pipe(function tB(n,e){return(0,ho.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:s}}=t;if(!s.length)return ei(t);let r=0;return(0,ir.D)(s).pipe(Zl(o=>function hee(n,e,t,i){return function cf(n,e,t,i){const s=qI(n);if(0===s.length)return ei({});const r={};return(0,ir.D)(s).pipe((0,ho.z)(o=>function NR(n,e,t,i){const s=ox(n,e,i);return ta(s.resolve?s.resolve(e,t):s(e,t))}(n[o],e,t,i).pipe((0,ya.b)(a=>{r[o]=a}))),iv(1),(0,ho.z)(()=>qI(r).length===s.length?ei(r):Sd.E))}(n._resolve,n,e,i).pipe((0,Ni.U)(r=>(n._resolvedData=r,n.data=Object.assign(Object.assign({},n.data),OI(n,t).resolve),null)))}(o.route,i,n,e)),(0,ya.b)(()=>r++),iv(1),(0,ho.z)(o=>r===s.length?ei(t):Sd.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ya.b)({next:()=>h=!0,complete:()=>{h||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),(0,ya.b)(l=>{const h=new gl(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(h)}))}),BR(a=>{const{targetSnapshot:l,id:h,extractedUrl:c,rawUrl:m,extras:{skipLocationChange:b,replaceUrl:v}}=a;return this.hooks.afterPreactivation(l,{navigationId:h,appliedUrlTree:c,rawUrlTree:m,skipLocationChange:!!b,replaceUrl:!!v})}),(0,Ni.U)(a=>{const l=function _R(n,e,t){const i=hv(n,e._root,t?t._root:void 0);return new lv(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),(0,ya.b)(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>(0,Ni.U)(i=>(new At(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),(0,ya.b)({next(){r=!0},complete(){r=!0}}),function sv(n){return(0,Mo.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var a;r||o||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===s.id&&(this.currentNavigation=null)}),ml(a=>{if(o=!0,function Xu(n){return n&&n[Ql]}(a)){const l=Jl(a.url);l||(this.navigated=!0,this.restoreHistory(s,!0));const h=new nv(s.id,this.serializeUrl(s.extractedUrl),a.message);i.next(h),l?setTimeout(()=>{const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),m={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||KI(s.source)};this.scheduleNavigation(c,"imperative",null,m,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const l=new Oo(s.id,this.serializeUrl(s.extractedUrl),a);i.next(l);try{s.resolve(this.errorHandler(a))}catch(h){s.reject(h)}}return Sd.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var s;const r={replaceUrl:!0},o=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,i,o,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){sx(t),this.config=t.map(nx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:s,queryParams:r,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,h=s||this.routerState.root,c=l?this.currentUrlTree.fragment:o;let m=null;switch(a){case"merge":m=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=r||null}return null!==m&&(m=this.removeEmptyProps(m)),function ex(n,e,t,i,s){if(0===t.length)return y0(e.root,e.root,e,i,s);const r=function FI(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new PI(!0,0,n);let e=0,t=!1;const i=n.reduce((s,r,o)=>{if("object"==typeof r&&null!=r){if(r.outlets){const a={};return ea(r.outlets,(l,h)=>{a[h]="string"==typeof l?l.split("/"):l}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return"string"!=typeof r?[...s,r]:0===o?(r.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&s.push(a))}),s):[...s,r]},[]);return new PI(t,e,i)}(t);if(r.toRoot())return y0(e.root,new De([],{}),e,i,s);const o=function TR(n,e,t){if(n.isAbsolute)return new C0(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const r=t.snapshot._urlSegment;return new C0(r,r===e.root,0)}const i=Wc(n.commands[0])?0:1;return function NI(n,e,t){let i=n,s=e,r=t;for(;r>s;){if(r-=s,i=i.parent,!i)throw new Error("Invalid number of '../'");s=i.segments.length}return new C0(i,!1,s-r)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(r,e,n),a=o.processChildren?R(o.segmentGroup,o.index,r.commands):kR(o.segmentGroup,o.index,r.commands);return y0(o.segmentGroup,a,e,i,s)}(h,this.currentUrlTree,t,m,null!=c?c:null)}navigateByUrl(t,i={skipLocationChange:!1}){const s=Jl(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function xq(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(s){i=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return i}isActive(t,i){let s;if(s=!0===i?Object.assign({},rB):!1===i?Object.assign({},Sq):i,Jl(t))return ab(this.currentUrlTree,t,s);const r=this.parseUrl(t);return ab(this.currentUrlTree,r,s)}removeEmptyProps(t){return Object.keys(t).reduce((i,s)=>{const r=t[s];return null!=r&&(i[s]=r),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ed(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,s,r,o){var a,l,h;if(this.disposed)return Promise.resolve(!1);const c=this.transitions.value,m=KI(i)&&c&&!KI(c.source),b=c.rawUrl.toString()===t.toString(),v=c.id===(null===(a=this.currentNavigation)||void 0===a?void 0:a.id);if(m&&b&&v)return Promise.resolve(!0);let E,D,L;o?(E=o.resolve,D=o.reject,L=o.promise):L=new Promise(($,ie)=>{E=$,D=ie});const N=++this.navigationId;let V;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),V=s&&s.\u0275routerPageId?s.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(h=this.browserPageId)&&void 0!==h?h:0)+1):V=0,this.setTransition({id:N,targetPageId:V,source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:E,reject:D,promise:L,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),L.catch($=>Promise.reject($))}setBrowserUrl(t,i){const s=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl?this.location.replaceState(s,"",r):this.location.go(s,"",r)}restoreHistory(t,i=!1){var s,r;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===o?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const s=new nv(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function KI(n){return"imperative"!==n}let th=(()=>{class n{constructor(t,i,s,r,o){this.router=t,this.route=i,this.tabIndexAttribute=s,this.renderer=r,this.el=o,this.commands=null,this.onChanges=new _s.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,s=this.el.nativeElement;null!==t?i.setAttribute(s,"tabindex",t):i.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:T0(this.skipLocationChange),replaceUrl:T0(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:T0(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(eh),d.Y36(Ju),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&d.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})(),kd=(()=>{class n{constructor(t,i,s){this.router=t,this.route=i,this.locationStrategy=s,this.commands=null,this.href=null,this.onChanges=new _s.x,this.subscription=t.events.subscribe(r=>{r instanceof Ed&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,s,r,o){if(0!==t||i||s||r||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:T0(this.skipLocationChange),replaceUrl:T0(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:T0(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(eh),d.Y36(Ju),d.Y36(Ie))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&d.NdJ("click",function(r){return i.onClick(r.button,r.ctrlKey,r.shiftKey,r.altKey,r.metaKey)}),2&t&&d.uIk("target",i.target)("href",i.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function T0(n){return""===n||!!n}let Gc=(()=>{class n{constructor(t,i,s,r,o,a){this.router=t,this.element=i,this.renderer=s,this.cdr=r,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(l=>{l instanceof Ed&&this.update()})}ngAfterContentInit(){ei(this.links.changes,this.linksWithHrefs.changes,ei(null)).pipe((0,jc.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const i=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(s=>!!s).map(s=>s.onChanges);this.linkInputChangesSubscription=(0,ir.D)(i).pipe((0,jc.J)()).subscribe(s=>{this.isActive!==this.isLinkActive(this.router)(s)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function oB(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(eh),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(th,8),d.Y36(kd,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,s){if(1&t&&(d.Suo(s,th,5),d.Suo(s,kd,5)),2&t){let r;d.iGM(r=d.CRH())&&(i.links=r),d.iGM(r=d.CRH())&&(i.linksWithHrefs=r)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[d.TTD]}),n})();class YI{}class ZI{preload(e,t){return ei(null)}}let lB=(()=>{class n{constructor(t,i,s,r){this.router=t,this.injector=s,this.preloadingStrategy=r,this.loader=new GI(s,i,l=>t.triggerEvent(new Ch(l)),l=>t.triggerEvent(new Rm(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Un(t=>t instanceof Ed),Zl(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const s=[];for(const r of i)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const o=r._loadedConfig;s.push(this.processRoutes(o.module,o.routes))}else r.loadChildren&&!r.canLoad?s.push(this.preloadConfig(t,r)):r.children&&s.push(this.processRoutes(t,r.children));return(0,ir.D)(s).pipe((0,jc.J)(),(0,Ni.U)(r=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?ei(i._loadedConfig):this.loader.load(t.injector,i)).pipe((0,ho.z)(r=>(i._loadedConfig=r,this.processRoutes(r.module,r.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(eh),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(YI))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),VR=(()=>{class n{constructor(t,i,s={}){this.router=t,this.viewportScroller=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Jg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ed&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ib&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new ib(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const gb=new d.OlP("ROUTER_CONFIGURATION"),bb=new d.OlP("ROUTER_FORROOT_GUARD"),hB=[vt,{provide:In,useClass:co},{provide:eh,useFactory:function pB(n,e,t,i,s,r,o={},a,l){const h=new eh(null,n,e,t,i,s,ob(r));return a&&(h.urlHandlingStrategy=a),l&&(h.routeReuseStrategy=l),function jR(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,h),o.enableTracing&&h.events.subscribe(c=>{var m,b;null===(m=console.group)||void 0===m||m.call(console,`Router Event: ${c.constructor.name}`),console.log(c.toString()),console.log(c),null===(b=console.groupEnd)||void 0===b||b.call(console)}),h},deps:[In,fb,vt,d.zs3,d.Sil,WI,gb,[class HR{},new d.FiY],[class iB{},new d.FiY]]},fb,{provide:Ju,useFactory:function fB(n){return n.routerState.root},deps:[eh]},lB,ZI,class aB{preload(e,t){return t().pipe(ml(()=>ei(null)))}},{provide:gb,useValue:{enableTracing:!1}}];function cB(){return new d.PXZ("Router",eh)}let dB=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[hB,zR(t),{provide:bb,useFactory:uB,deps:[[eh,new d.FiY,new d.tp0]]},{provide:gb,useValue:i||{}},{provide:Ie,useFactory:_q,deps:[$e,[new d.tBr(Dt),new d.FiY],gb]},{provide:VR,useFactory:XI,deps:[eh,s0,gb]},{provide:YI,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:ZI},{provide:d.PXZ,multi:!0,useFactory:cB},[D0,{provide:d.ip1,multi:!0,useFactory:QI,deps:[D0]},{provide:JI,useFactory:mB,deps:[D0]},{provide:d.tb,multi:!0,useExisting:JI}]]}}static forChild(t){return{ngModule:n,providers:[zR(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(bb,8),d.LFG(eh,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function XI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new VR(n,e,t)}function _q(n,e,t={}){return t.useHash?new et(n,e):new kt(n,e)}function uB(n){return"guarded"}function zR(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:WI,multi:!0,useValue:n}]}let D0=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new _s.x}appInitializer(){return this.injector.get(be,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const s=new Promise(a=>i=a),r=this.injector.get(eh),o=this.injector.get(gb);return"disabled"===o.initialNavigation?(r.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(r.hooks.afterPreactivation=()=>this.initNavigation?ei(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),r.initialNavigation()):i(!0),s})}bootstrapListener(t){const i=this.injector.get(gb),s=this.injector.get(lB),r=this.injector.get(VR),o=this.injector.get(eh),a=this.injector.get(d.z2F);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),s.setUpPreloading(),r.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function QI(n){return n.appInitializer.bind(n)}function mB(n){return n.bootstrapListener.bind(n)}const JI=new d.OlP("Router Initializer");let dx=(()=>{class n{constructor(){this.title="angular app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&d._UZ(0,"router-outlet")},directives:[x0],styles:[""]}),n})();var nl=se(2011),Sh=se(6451),eT=se(5363),Iq=se(6063);class yB extends _s.x{constructor(e=1/0,t=1/0,i=Iq.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:s,_timestampProvider:r,_windowTime:o}=this;t||(i.push(e),!s&&i.push(r.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:s}=this,r=s.slice();for(let o=0;o<r.length&&!e.closed;o+=i?1:2)e.next(r[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:s}=this,r=(s?1:2)*e;if(e<1/0&&r<i.length&&i.splice(0,i.length-r),!s){const o=t.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}var ux=se(3099);function UR(n,e,t){var i,s;let r,o=!1;return n&&"object"==typeof n?(r=null!==(i=n.bufferSize)&&void 0!==i?i:1/0,e=null!==(s=n.windowTime)&&void 0!==s?s:1/0,o=!!n.refCount,t=n.scheduler):r=null!=n?n:1/0,(0,ux.B)({connector:()=>new yB(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function Tq(n,e){return(0,rc.m)(e)?lr(()=>n,e):lr(()=>n)}var tT=se(9468),qn=se(5813);se(5867);var dt=se(5861),Kr=se(9681),mu=se(4859),ee=se(2090),Rd=se(1877);const uf=new Map,WR={activated:!1,tokenObservers:[]},vB={initialized:!1,enabled:!1};function Na(n){return uf.get(n)||WR}function pf(n,e){uf.set(n,e)}function px(){return vB}class gee{constructor(e,t,i,s,r){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=s,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=s,s>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,dt.Z)(function*(){t.stop();try{t.pending=new ee.BH,yield function Fq(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ee.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const oc=new ee.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function KR(n){if(!Na(n).activated)throw oc.create("use-before-activation",{appName:n.name})}function lT(n,e){return hT.apply(this,arguments)}function hT(){return(hT=(0,dt.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});s&&(i["X-Firebase-Client"]=s.getPlatformInfoString());const r={method:"POST",body:JSON.stringify(e),headers:i};let o,a;try{o=yield fetch(n,r)}catch(m){throw oc.create("fetch-network-error",{originalErrorMessage:m.message})}if(200!==o.status)throw oc.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(m){throw oc.create("fetch-parse-error",{originalErrorMessage:m.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw oc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const h=1e3*Number(l[1]),c=Date.now();return{token:a.attestationToken,expireTimeMillis:c+h,issuedAtTimeMillis:c}})).apply(this,arguments)}function yee(n,e){const{projectId:t,appId:i,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${i}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const cT="firebase-app-check-store";let QR=null;function Vq(){return QR||(QR=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var s;e(oc.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(cT,{keyPath:"compositeKey"})}}catch(t){e(oc.create("storage-open",{originalErrorMessage:t.message}))}}),QR)}function JR(){return(JR=(0,dt.Z)(function*(n,e){const i=(yield Vq()).transaction(cT,"readwrite"),r=i.objectStore(cT).put({compositeKey:n,value:e});return new Promise((o,a)=>{r.onsuccess=l=>{o()},i.onerror=l=>{var h;a(oc.create("storage-set",{originalErrorMessage:null===(h=l.target.error)||void 0===h?void 0:h.message}))}})})).apply(this,arguments)}const fv=new Rd.Yd("@firebase/app-check");function iA(n,e){return(0,ee.hl)()?function See(n,e){return function dT(n,e){return JR.apply(this,arguments)}(function tA(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{fv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wB(){return px().enabled}function sA(){return nA.apply(this,arguments)}function nA(){return(nA=(0,dt.Z)(function*(){const n=px();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const gx={error:"UNKNOWN_ERROR"};function k0(n){return ee.US.encodeString(JSON.stringify(n),!1)}function R0(n){return vb.apply(this,arguments)}function vb(){return(vb=(0,dt.Z)(function*(n,e=!1){const t=n.app;KR(t);const i=Na(t);let r,s=i.token;if(!s){const l=yield i.cachedTokenPromise;l&&A0(l)&&(s=l)}if(!e&&s&&A0(s))return{token:s.token};let a,o=!1;if(wB()){i.exchangeTokenPromise||(i.exchangeTokenPromise=lT(yee(t,yield sA()),n.platformLoggerProvider).then(h=>(i.exchangeTokenPromise=void 0,h)),o=!0);const l=yield i.exchangeTokenPromise;return yield iA(t,l),pf(t,Object.assign(Object.assign({},i),{token:l})),{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(l=>(i.exchangeTokenPromise=void 0,l)),o=!0),s=yield i.exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?fv.warn(l.message):fv.error(l),r=l}return s?(a={token:s.token},pf(t,Object.assign(Object.assign({},i),{token:s})),yield iA(t,s)):a=oA(r),o&&rA(t,a),a})).apply(this,arguments)}function Cb(n,e){const t=Na(n),i=t.tokenObservers.filter(s=>s.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),pf(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function SB(n){const{app:e}=n,t=Na(e);let i=t.tokenRefresher;i||(i=function xB(n){const{app:e}=n;return new gee((0,dt.Z)(function*(){let i;if(i=Na(e).token?yield R0(n,!0):yield R0(n),i.error)throw i.error}),()=>!0,()=>{const t=Na(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),pf(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function rA(n,e){const t=Na(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(s){}}function A0(n){return n.expireTimeMillis-Date.now()>0}function oA(n){return{token:k0(gx),error:n}}class EB{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Na(this.app);for(const t of e)Cb(this.app,t.next);return Promise.resolve()}}const AB="app-check-internal";!function LB(){(0,Kr._registerComponent)(new mu.wA("app-check",n=>function uT(n,e){return new EB(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(AB).initialize()})),(0,Kr._registerComponent)(new mu.wA(AB,n=>function qq(n){return{getToken:e=>R0(n,e),addTokenListener:e=>function mv(n,e,t,i){const{app:s}=n,r=Na(s),o={next:t,error:i,type:e};if(pf(s,Object.assign(Object.assign({},r),{tokenObservers:[...r.tokenObservers,o]})),r.token&&A0(r.token)){const a=r.token;Promise.resolve().then(()=>{t({token:a.token}),SB(n)}).catch(()=>{})}r.cachedTokenPromise.then(()=>SB(n))}(n,"INTERNAL",e),removeTokenListener:e=>Cb(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Kr.registerVersion)("@firebase/app-check","0.5.3")}();class Kc{constructor(){return(0,qn.vb)("app-check")}}"undefined"!=typeof window&&window;var L0=se(127);const mA=new d.OlP("angularfire2.auth.use-emulator"),gA=new d.OlP("angularfire2.auth.settings"),bx=new d.OlP("angularfire2.auth.tenant-id"),BB=new d.OlP("angularfire2.auth.langugage-code"),bA=new d.OlP("angularfire2.auth.use-device-language"),mT=new d.OlP("angularfire.auth.persistence"),gT=(n,e,t,i,s,r,o,a)=>(0,nl.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=s,r&&l.useDeviceLanguage(),o)for(const[h,c]of Object.entries(o))l.settings[h]=c;return a&&l.setPersistence(a),l},[t,i,s,r,o,a]);let M0=(()=>{class n{constructor(t,i,s,r,o,a,l,h,c,m,b,v){const w=new _s.x,E=ei(void 0).pipe((0,eT.Q)(o.outsideAngular),lr(()=>r.runOutsideAngular(()=>Promise.resolve().then(se.bind(se,5881)))),(0,Ni.U)(()=>(0,nl.on)(t,r,i)),(0,Ni.U)(D=>gT(D,r,a,h,c,m,l,b)),UR({bufferSize:1,refCount:!1}));if(tc(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ei(null);else{E.pipe(Zu()).subscribe();const L=E.pipe(lr($=>$.getRedirectResult().then(ie=>ie,()=>null)),qn.iC,UR({bufferSize:1,refCount:!1})),N=E.pipe(lr($=>new Fn.y(ie=>({unsubscribe:r.runOutsideAngular(()=>$.onAuthStateChanged(Q=>ie.next(Q),Q=>ie.error(Q),()=>ie.complete()))})))),V=E.pipe(lr($=>new Fn.y(ie=>({unsubscribe:r.runOutsideAngular(()=>$.onIdTokenChanged(Q=>ie.next(Q),Q=>ie.error(Q),()=>ie.complete()))}))));this.authState=L.pipe(Tq(N),(0,tT.R)(o.outsideAngular),(0,eT.Q)(o.insideAngular)),this.user=L.pipe(Tq(V),(0,tT.R)(o.outsideAngular),(0,eT.Q)(o.insideAngular)),this.idToken=this.user.pipe(lr($=>$?(0,ir.D)($.getIdToken()):ei(null))),this.idTokenResult=this.user.pipe(lr($=>$?(0,ir.D)($.getIdTokenResult()):ei(null))),this.credential=(0,Sh.T)(L,w,this.authState.pipe(Un($=>!$))).pipe((0,Ni.U)($=>(null==$?void 0:$.user)?$:null),(0,tT.R)(o.outsideAngular),(0,eT.Q)(o.insideAngular))}return(0,nl.pX)(this,E,r,{spy:{apply:(D,L,N)=>{(D.startsWith("signIn")||D.startsWith("createUser"))&&N.then(V=>w.next(V))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(nl.Dh),d.LFG(nl.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qn.HU),d.LFG(mA,8),d.LFG(gA,8),d.LFG(bx,8),d.LFG(BB,8),d.LFG(bA,8),d.LFG(mT,8),d.LFG(Kc,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),HB=(()=>{class n{constructor(){L0.Z.registerVersion("angularfire",qn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[M0]}),n})();var O0=se(4986);function ip(n,e=O0.z){return(0,Mo.e)((t,i)=>{let s=null,r=null,o=null;const a=()=>{if(s){s.unsubscribe(),s=null;const h=r;r=null,i.next(h)}};function l(){const h=o+n,c=e.now();if(c<h)return s=this.schedule(void 0,h-c),void i.add(s);a()}t.subscribe((0,gn.x)(i,h=>{r=h,o=e.now(),s||(s=e.schedule(l,n),i.add(s))},()=>{a(),i.complete()},void 0,()=>{r=s=null}))})}var P0=se(3942);const VB="firebasestorage.googleapis.com",zB="storageBucket";class Po extends ee.ZR{constructor(e,t){super(yx(e),`Firebase Storage: ${t} (${yx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Po.prototype)}_codeEquals(e){return yx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function yx(n){return"storage/"+n}function gv(){return new Po("unknown","An unknown error occurred, please check the error payload for server response.")}function bT(){return new Po("canceled","User canceled the upload/download.")}function bv(){return new Po("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function F0(n){return new Po("invalid-argument",n)}function yv(){return new Po("app-deleted","The Firebase app was deleted.")}function $B(n){return new Po("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vx(n,e){return new Po("invalid-format","String does not match format '"+n+"': "+e)}function Cx(n){throw new Po("internal-error","Internal error: "+n)}class xh{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=xh.makeFromUrl(e,t)}catch(s){return new xh(e,"")}if(""===i.path)return i;throw function r4(n){return new Po("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const s="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+s+"(/(.*))?$","i");function h($){$.path_=decodeURIComponent($.path)}const m=t.replace(/[.]/g,"\\."),V=[{regex:a,indices:{bucket:1,path:3},postModify:function r($){"/"===$.path.charAt($.path.length-1)&&($.path_=$.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:h},{regex:new RegExp(`^https?://${t===VB?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:h}];for(let $=0;$<V.length;$++){const ie=V[$],Q=ie.regex.exec(e);if(Q){let ke=Q[ie.indices.path];ke||(ke=""),i=new xh(Q[ie.indices.bucket],ke),ie.postModify(i);break}}if(null==i)throw function n4(n){return new Po("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class gu{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function yT(n){return"string"==typeof n||n instanceof String}function QB(n){return wA()&&n instanceof Blob}function wA(){return"undefined"!=typeof Blob}function SA(n,e,t,i){if(i<e)throw F0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw F0(`Invalid value for '${n}'. Expected ${t} or less.`)}function mf(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function a4(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var Fm=(()=>{return(n=Fm||(Fm={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Fm;var n})();class l4{constructor(e,t,i,s,r,o,a,l,h,c,m){this.url_=e,this.method_=t,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=c,this.connectionFactory_=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,v)=>{this.resolve_=b,this.reject_=v,this.start_()})}start_(){const t=(i,s)=>{const r=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function YB(n){return void 0!==n}(l)?r():r(l)}catch(l){o(l)}else if(null!==a){const l=gv();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(s.canceled?this.appDelete_?yv():bT():function s4(){return new Po("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new vT(!1,null,!0)):this.backoffId_=function CA(n,e,t){let i=1,s=null,r=null,o=!1,a=0;function l(){return 2===a}let h=!1;function c(...D){h||(h=!0,e.apply(null,D))}function m(D){s=setTimeout(()=>{s=null,n(v,l())},D)}function b(){r&&clearTimeout(r)}function v(D,...L){if(h)return void b();if(D)return b(),void c.call(null,D,...L);if(l()||o)return b(),void c.call(null,D,...L);let V;i<64&&(i*=2),1===a?(a=2,V=0):V=1e3*(i+Math.random()),m(V)}let w=!1;function E(D){w||(w=!0,b(),!h&&(null!==s?(D||(a=2),clearTimeout(s),m(0)):D||(a=1)))}return m(0),r=setTimeout(()=>{o=!0,E(!0)},t),E}((i,s)=>{if(s)return void i(!1,new vT(!1,null,!0));const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===Fm.NO_ERROR,l=r.getStatus();if(!a||this.isRetryStatusCode_(l)){const c=r.getErrorCode()===Fm.ABORT;return void i(!1,new vT(!1,null,c))}const h=-1!==this.successCodes_.indexOf(l);i(!0,new vT(h,r))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function KB(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,s=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||s||r}}class vT{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Nee(...n){const e=function e2(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(wA())return new Blob(n);throw new Po("unsupported-environment","This browser doesn't seem to support creating Blobs")}const bu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class CT{constructor(e,t){this.data=e,this.contentType=t||null}}function wT(n,e){switch(n){case bu.RAW:return new CT(EA(e));case bu.BASE64:case bu.BASE64URL:return new CT(d4(n,e));case bu.DATA_URL:return new CT(function IA(n){const e=new _A(n);return e.base64?d4(bu.BASE64,e.rest):function c4(n){let e;try{e=decodeURIComponent(n)}catch(t){throw vx(bu.DATA_URL,"Malformed data URL.")}return EA(e)}(e.rest)}(e),function u4(n){return new _A(n).contentType}(e))}throw gv()}function EA(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function d4(n,e){switch(n){case bu.BASE64:{const s=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(s||r)throw vx(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case bu.BASE64URL:{const s=-1!==e.indexOf("+"),r=-1!==e.indexOf("/");if(s||r)throw vx(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Bee(n){return atob(n)}(e)}catch(s){throw vx(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}class _A{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw vx(bu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function TA(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class gf{constructor(e,t){let i=0,s="";QB(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(QB(this.data_)){const s=function sp(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new gf(s)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new gf(i,!0)}}static getBlob(...e){if(wA()){const t=e.map(i=>i instanceof gf?i.data_:i);return new gf(Nee.apply(null,t))}{const t=e.map(o=>yT(o)?wT(bu.RAW,o).data:o.data_);let i=0;t.forEach(o=>{i+=o.byteLength});const s=new Uint8Array(i);let r=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)s[r++]=o[a]}),new gf(s,!0)}}uploadData(){return this.data_}}function DA(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function XB(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function t2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function m4(n,e){return e}class Cl{constructor(e,t,i,s){this.server=e,this.local=t||e,this.writable=!!i,this.xform=s||m4}}let Nm=null;function Bm(){if(Nm)return Nm;const n=[];n.push(new Cl("bucket")),n.push(new Cl("generation")),n.push(new Cl("metageneration")),n.push(new Cl("name","fullPath",!0));const t=new Cl("name");t.xform=function e(r,o){return function g4(n){return!yT(n)||n.length<2?n:t2(n)}(o)},n.push(t);const s=new Cl("size");return s.xform=function i(r,o){return void 0!==o?Number(o):o},n.push(s),n.push(new Cl("timeCreated")),n.push(new Cl("updated")),n.push(new Cl("md5Hash",null,!0)),n.push(new Cl("cacheControl",null,!0)),n.push(new Cl("contentDisposition",null,!0)),n.push(new Cl("contentEncoding",null,!0)),n.push(new Cl("contentLanguage",null,!0)),n.push(new Cl("contentType",null,!0)),n.push(new Cl("metadata","customMetadata",!0)),Nm=n,Nm}function ST(n,e,t){const i=DA(e);return null===i?null:function y4(n,e,t){const i={type:"file"},s=t.length;for(let r=0;r<s;r++){const o=t[r];i[o.local]=o.xform(i,e[o.server])}return function b4(n,e){Object.defineProperty(n,"ref",{get:function t(){const r=new xh(n.bucket,n.fullPath);return e._makeStorageReference(r)}})}(i,n),i}(n,i,t)}function vv(n,e){const t={},i=e.length;for(let s=0;s<i;s++){const r=e[s];r.writable&&(t[r.server]=n[r.local])}return JSON.stringify(t)}const ih="prefixes";class vu{constructor(e,t,i,s){this.url=e,this.method=t,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ac(n){if(!n)throw gv()}function Hm(n,e){return function t(i,s){const r=ST(n,s,e);return ac(null!==r),r}}function np(n){return function e(t,i){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function UB(){return new Po("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function jB(){return new Po("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function vA(n){return new Po("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function qB(n){return new Po("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,s.serverResponse=i.serverResponse,s}}function yf(n){const e=np(n);return function t(i,s){let r=e(i,s);return 404===i.getStatus()&&(r=function i4(n){return new Po("object-not-found","Object '"+n+"' does not exist.")}(n.path)),r.serverResponse=s.serverResponse,r}}function Cv(n,e,t){const s=mf(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new vu(s,"GET",Hm(n,t),o);return a.errorHandler=yf(e),a}function H0(n,e,t,i,s){const r={};r.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(r.delimiter=t),i&&(r.pageToken=i),s&&(r.maxResults=s);const a=mf(e.bucketOnlyServerUrl(),n.host,n._protocol),h=n.maxOperationRetryTime,c=new vu(a,"GET",function N0(n,e){return function t(i,s){const r=function yu(n,e,t){const i=DA(t);return null===i?null:function xT(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[ih])for(const s of t[ih]){const r=s.replace(/\/$/,""),o=n._makeStorageReference(new xh(e,r));i.prefixes.push(o)}if(t.items)for(const s of t.items){const r=n._makeStorageReference(new xh(e,s.name));i.items.push(r)}return i}(n,e,i)}(n,e,s);return ac(null!==r),r}}(n,e.bucket),h);return c.urlParams=r,c.errorHandler=np(e),c}function kA(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function o2(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class wx{constructor(e,t,i,s){this.current=e,this.total=t,this.finalized=!!i,this.metadata=s||null}}function ET(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(s){ac(!1)}return ac(!!t&&-1!==(e||["active"]).indexOf(t)),t}const l2={STATE_CHANGED:"state_changed"},Eh={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function LA(n){switch(n){case"running":case"pausing":case"canceling":return Eh.RUNNING;case"paused":return Eh.PAUSED;case"success":return Eh.SUCCESS;case"canceled":return Eh.CANCELED;default:return Eh.ERROR}}class w4{constructor(e,t,i){if(function ZB(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=i?i:void 0;else{const r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}}}function Sv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class S4 extends class c2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fm.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fm.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fm.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,s){if(this.sent_)throw Cx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const r in s)s.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,s[r].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cx("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cx("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Cx("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cx("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function rp(){return new S4}class d2{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=Bm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=s,this._transition("error"))},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this._promise=new Promise((s,r)=>{this._resolve=s,this._reject=r,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function a2(n,e,t,i,s){const r=e.bucketOnlyServerUrl(),o=kA(e,i,s),a={name:o.fullPath},l=mf(r,n.host,n._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=vv(o,t),w=new vu(l,"POST",function v(E){let D;ET(E);try{D=E.getResponseHeader("X-Goog-Upload-URL")}catch(L){ac(!1)}return ac(yT(D)),D},n.maxUploadRetryTime);return w.urlParams=a,w.headers=c,w.body=m,w.errorHandler=np(e),w}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,rp,e,t);this._request=s,s.getPromise().then(r=>{this._request=void 0,this._uploadUrl=r,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const s=function v4(n,e,t,i){const l=new vu(t,"POST",function r(h){const c=ET(h,["active","final"]);let m=null;try{m=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch(v){ac(!1)}m||ac(!1);const b=Number(m);return ac(!isNaN(b)),new wx(b,i.size(),"final"===c)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=np(e),l}(this._ref.storage,this._ref._location,e,this._blob),r=this._ref.storage._makeRequest(s,rp,t,i);this._request=r,r.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new wx(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((s,r)=>{let o;try{o=function C4(n,e,t,i,s,r,o,a){const l=new wx(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function GB(){return new Po("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const h=l.total-l.current;let c=h;s>0&&(c=Math.min(c,s));const m=l.current,w={"X-Goog-Upload-Command":c===h?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},E=i.slice(m,m+c);if(null===E)throw bv();const V=new vu(t,"POST",function D($,ie){const Q=ET($,["active","final"]),le=l.current+c,ke=i.size();let Ye;return Ye="final"===Q?Hm(e,r)($,ie):null,new wx(le,ke,"final"===Q,Ye)},e.maxUploadRetryTime);return V.headers=w,V.body=E.uploadData(),V.progressCallback=a||null,V.errorHandler=np(n),V}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,rp,s,r);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=Cv(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(i,rp,e,t);this._request=s,s.getPromise().then(r=>{this._request=void 0,this._metadata=r,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function RA(n,e,t,i,s){const r=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let V="";for(let $=0;$<2;$++)V+=Math.random().toString().slice(2);return V}();o["Content-Type"]="multipart/related; boundary="+l;const h=kA(e,i,s),c=vv(h,t),v=gf.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+l+"\r\nContent-Type: "+h.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===v)throw bv();const w={name:h.fullPath},E=mf(r,n.host,n._protocol),L=n.maxUploadRetryTime,N=new vu(E,"POST",Hm(n,t),L);return N.urlParams=w,N.headers=o,N.body=v.uploadData(),N.errorHandler=np(e),N}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,rp,e,t);this._request=s,s.getPromise().then(r=>{this._request=void 0,this._metadata=r,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=bT(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=LA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,s){const r=new w4(t||void 0,i||void 0,s||void 0);return this._addObserver(r),()=>{this._removeObserver(r)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(LA(this._state)){case Eh.SUCCESS:Sv(this._resolve.bind(null,this.snapshot))();break;case Eh.CANCELED:case Eh.ERROR:Sv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(LA(this._state)){case Eh.RUNNING:case Eh.PAUSED:e.next&&Sv(e.next.bind(e,this.snapshot))();break;case Eh.SUCCESS:e.complete&&Sv(e.complete.bind(e))();break;default:e.error&&Sv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class V0{constructor(e,t){this._service=e,this._location=t instanceof xh?t:xh.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new V0(e,t)}get root(){const e=new xh(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return t2(this._location.path)}get storage(){return this._service}get parent(){const e=function p4(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new xh(this._location.bucket,e);return new V0(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw $B(e)}}function xv(n,e,t){return PA.apply(this,arguments)}function PA(){return(PA=(0,dt.Z)(function*(n,e,t){const s=yield FA(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield xv(n,e,s.nextPageToken))})).apply(this,arguments)}function FA(n,e){null!=e&&"number"==typeof e.maxResults&&SA("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=H0(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,rp)}function _T(n){n._throwIfRoot("getDownloadURL");const e=function s2(n,e,t){const s=mf(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new vu(s,"GET",function B0(n,e){return function t(i,s){const r=ST(n,s,e);return ac(null!==r),function bf(n,e,t,i){const s=DA(e);if(null===s||!yT(s.downloadTokens))return null;const r=s.downloadTokens;if(0===r.length)return null;const o=encodeURIComponent;return r.split(",").map(h=>{const m=n.fullPath;return mf("/b/"+o(n.bucket)+"/o/"+o(m),t,i)+a4({alt:"media",token:h})})[0]}(r,s,n.host,n._protocol)}}(n,t),o);return a.errorHandler=yf(e),a}(n.storage,n._location,Bm());return n.storage.makeRequestWithTokens(e,rp).then(t=>{if(null===t)throw function o4(){return new Po("no-download-url","The given file does not have any download URLs.")}();return t})}function NA(n,e){const t=function f4(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new xh(n._location.bucket,t);return new V0(n.storage,i)}function m2(n,e){if(n instanceof BA){const t=n;if(null==t._bucket)throw function WB(){return new Po("no-default-bucket","No default bucket found. Did you set the '"+zB+"' property when initializing the app?")}();const i=new V0(t,t._bucket);return null!=e?m2(i,e):i}return void 0!==e?NA(n,e):n}function k4(n,e){if(e&&function T4(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof BA)return function D4(n,e){return new V0(n,e)}(n,e);throw F0("To use ref(service, url), the first argument must be a Storage instance.")}return m2(n,e)}function g2(n,e){const t=null==e?void 0:e[zB];return null==t?null:xh.makeFromBucketSpec(t,n)}class BA{constructor(e,t,i,s,r){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=VB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?xh.makeFromBucketSpec(s,this._host):g2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?xh.makeFromBucketSpec(this._url,e):g2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){SA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){SA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,dt.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,dt.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new V0(this,e)}_makeRequest(e,t,i,s){if(this._deleted)return new gu(yv());{const r=function JB(n,e,t,i,s,r){const o=a4(n.urlParams),a=n.url+o,l=Object.assign({},n.headers);return function xA(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function Pee(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function Fee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(l,r),function h4(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,i),new l4(a,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s)}(e,this._appId,i,s,t,this._firebaseVersion);return this._requests.add(r),r.getPromise().then(()=>this._requests.delete(r),()=>this._requests.delete(r)),r}}makeRequestWithTokens(e,t){var i=this;return(0,dt.Z)(function*(){const[s,r]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,s,r).getPromise()})()}}const HA="@firebase/storage";function xx(n,e){return k4(n=(0,ee.m9)(n),e)}function C2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new BA(t,i,s,e,Kr.SDK_VERSION)}!function w2(){(0,Kr._registerComponent)(new mu.wA("storage",C2,"PUBLIC").setMultipleInstances(!0)),(0,Kr.registerVersion)(HA,"0.9.2",""),(0,Kr.registerVersion)(HA,"0.9.2","esm2017")}();class z0{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class GA{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new z0(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new z0(i,this,this._ref))},t)}on(e,t,i,s){let r;return t&&(r="function"==typeof t?o=>t(new z0(o,this,this._ref)):{next:t.next?o=>t.next(new z0(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,r,i||void 0,s||void 0)}}class $A{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new op(e,this._service))}get items(){return this._delegate.items.map(e=>new op(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class op{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function UA(n,e){return NA(n,e)}(this._delegate,e);return new op(t,this.storage)}get root(){return new op(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new op(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new GA(function qee(n,e,t){return function p2(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new d2(n,new gf(e),t)}(n=(0,ee.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=bu.RAW,i){this._throwIfRoot("putString");const s=wT(t,e),r=Object.assign({},i);return null==r.contentType&&null!=s.contentType&&(r.contentType=s.contentType),new GA(new d2(this._delegate,new gf(s.data,!0),r),this)}listAll(){return function jA(n){return function E4(n){const e={prefixes:[],items:[]};return xv(n,e).then(()=>e)}(n=(0,ee.m9)(n))}(this._delegate).then(e=>new $A(e,this.storage))}list(e){return function zA(n,e){return FA(n=(0,ee.m9)(n),e)}(this._delegate,e||void 0).then(t=>new $A(t,this.storage))}getMetadata(){return function Sx(n){return function _4(n){n._throwIfRoot("getMetadata");const e=Cv(n.storage,n._location,Bm());return n.storage.makeRequestWithTokens(e,rp)}(n=(0,ee.m9)(n))}(this._delegate)}updateMetadata(e){return function v2(n,e){return function f2(n,e){n._throwIfRoot("updateMetadata");const t=function n2(n,e,t,i){const r=mf(e.fullServerUrl(),n.host,n._protocol),a=vv(t,i),h=n.maxOperationRetryTime,c=new vu(r,"PATCH",Hm(n,i),h);return c.headers={"Content-Type":"application/json; charset=utf-8"},c.body=a,c.errorHandler=yf(e),c}(n.storage,n._location,e,Bm());return n.storage.makeRequestWithTokens(t,rp)}(n=(0,ee.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function R4(n){return _T(n=(0,ee.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function TT(n){return function I4(n){n._throwIfRoot("deleteObject");const e=function r2(n,e){const i=mf(e.fullServerUrl(),n.host,n._protocol),a=new vu(i,"DELETE",function o(l,h){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=yf(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,rp)}(n=(0,ee.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw $B(e)}}class KA{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(S2(e))throw F0("ref() expected a child path but got a URL, use refFromURL instead.");return new op(xx(this._delegate,e),this)}refFromURL(e){if(!S2(e))throw F0("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xh.makeFromUrl(e,this._delegate.host)}catch(t){throw F0("refFromUrl() expected a valid full URL but got an invalid one.")}return new op(xx(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function A4(n,e,t,i={}){!function b2(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=i;s&&(n._overrideAuthToken="string"==typeof s?s:(0,ee.Sg)(s,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function S2(n){return/^[A-Za-z]+:\/\//.test(n)}function _2(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new KA(t,i)}function ZA(n){const e=function I2(n){return new Fn.y(e=>{const t=o=>e.next(o);t(n.snapshot);const r=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){r()}}).pipe(ip(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ni.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function j0(n){return{getDownloadURL:()=>ei(void 0).pipe(qn.fc,lr(()=>n.getDownloadURL()),qn.iC),getMetadata:()=>ei(void 0).pipe(qn.fc,lr(()=>n.getMetadata()),qn.iC),delete:()=>(0,ir.D)(n.delete()),child:e=>j0(n.child(e)),updateMetadata:e=>(0,ir.D)(n.updateMetadata(e)),put:(e,t)=>ZA(n.put(e,t)),putString:(e,t,i)=>ZA(n.putString(e,t,i)),list:e=>(0,ir.D)(n.list(e)),listAll:()=>(0,ir.D)(n.listAll())}}!function L4(n){const e={TaskState:Eh,TaskEvent:l2,StringFormat:bu,Storage:KA,Reference:op};n.INTERNAL.registerComponent(new mu.wA("storage-compat",_2,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.10")}(P0.Z);const XA=new d.OlP("angularfire2.storageBucket"),T2=new d.OlP("angularfire2.storage.maxUploadRetryTime"),D2=new d.OlP("angularfire2.storage.maxOperationRetryTime"),k2=new d.OlP("angularfire2.storage.use-emulator");let R2=(()=>{class n{constructor(t,i,s,r,o,a,l,h,c,m){const b=(0,nl.on)(t,o,i);this.storage=(0,nl.cc)(`${b.name}.storage.${s}`,"AngularFireStorage",b.name,()=>{const v=o.runOutsideAngular(()=>b.storage(s||void 0)),w=c;return w&&v.useEmulator(...w),l&&v.setMaxUploadRetryTime(l),h&&v.setMaxOperationRetryTime(h),v},[l,h])}ref(t){return j0(this.storage.ref(t))}refFromURL(t){return j0(this.storage.refFromURL(t))}upload(t,i,s){return j0(this.storage.ref(t)).put(i,s)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(nl.Dh),d.LFG(nl.xv,8),d.LFG(XA,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qn.HU),d.LFG(T2,8),d.LFG(D2,8),d.LFG(k2,8),d.LFG(Kc,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),A2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),L2=(()=>{class n{constructor(){L0.Z.registerVersion("angularfire",qn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[R2],imports:[A2]}),n})();function DT(){return(0,Mo.e)((n,e)=>{let t,i=!1;n.subscribe((0,gn.x)(e,s=>{const r=t;t=s,i&&e.next([r,s]),i=!0}))})}function QA(n,e=zc.y){return n=null!=n?n:O4,(0,Mo.e)((t,i)=>{let s,r=!0;t.subscribe((0,gn.x)(i,o=>{const a=e(o);(r||!n(s,a))&&(r=!1,s=a,i.next(o))}))})}function O4(n,e){return n===e}se(5881);var Xt,M2="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vm={},kT=kT||{},Is=M2||self;function RT(){}function AT(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ex(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var LT="closure_uid_"+(1e9*Math.random()>>>0),U0=0;function P4(n,e,t){return n.call.apply(n.bind,arguments)}function F4(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function wl(n,e,t){return(wl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?P4:F4).apply(null,arguments)}function MT(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Sl(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,s,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(i,o)}}function Ev(){this.s=this.s,this.o=this.o}var eL={};Ev.prototype.s=!1,Ev.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function O2(n){return Object.prototype.hasOwnProperty.call(n,LT)&&n[LT]||(n[LT]=++U0)}(this);delete eL[n]}},Ev.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ap=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},P2=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const i=n.length,s="string"==typeof n?n.split(""):n;for(let r=0;r<i;r++)r in s&&e.call(t,s[r],r,n)};function lp(n){return Array.prototype.concat.apply([],arguments)}function Ad(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function Yc(n){return/^[\s\xa0]*$/.test(n)}var lc,tL=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function _h(n,e){return-1!=n.indexOf(e)}function iL(n,e){return n<e?-1:n>e?1:0}e:{var N2=Is.navigator;if(N2){var B2=N2.userAgent;if(B2){lc=B2;break e}}lc=""}function _x(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function q0(n){const e={};for(const t in n)e[t]=n[t];return e}var H2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sL(n,e){let t,i;for(let s=1;s<arguments.length;s++){for(t in i=arguments[s],i)n[t]=i[t];for(let r=0;r<H2.length;r++)t=H2[r],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function nL(n){return nL[" "](n),n}nL[" "]=RT;var Tx,n,z2=_h(lc,"Opera"),zm=_h(lc,"Trident")||_h(lc,"MSIE"),j2=_h(lc,"Edge"),OT=j2||zm,rL=_h(lc,"Gecko")&&!(_h(lc.toLowerCase(),"webkit")&&!_h(lc,"Edge"))&&!(_h(lc,"Trident")||_h(lc,"MSIE"))&&!_h(lc,"Edge"),oL=_h(lc.toLowerCase(),"webkit")&&!_h(lc,"Edge");function Ix(){var n=Is.document;return n?n.documentMode:void 0}e:{var PT="",FT=(n=lc,rL?/rv:([^\);]+)(\)|;)/.exec(n):j2?/Edge\/([\d\.]+)/.exec(n):zm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):oL?/WebKit\/(\S+)/.exec(n):z2?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(FT&&(PT=FT?FT[1]:""),zm){var NT=Ix();if(null!=NT&&NT>parseFloat(PT)){Tx=String(NT);break e}}Tx=PT}var U2={};var W2=Is.document&&zm&&(Ix()||parseInt(Tx,10))||void 0,G2=function(){if(!Is.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Is.addEventListener("test",RT,e),Is.removeEventListener("test",RT,e)}catch(t){}return n}();function Ih(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Dx(n,e){if(Ih.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(rL){e:{try{nL(e.nodeName);var s=!0;break e}catch(r){}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:N4[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Dx.Z.h.call(this)}}Ih.prototype.h=function(){this.defaultPrevented=!0},Sl(Dx,Ih);var N4={2:"touch",3:"pen",4:"mouse"};Dx.prototype.h=function(){Dx.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var kx="closure_listenable_"+(1e6*Math.random()|0),B4=0;function H4(n,e,t,i,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ia=s,this.key=++B4,this.ca=this.fa=!1}function HT(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function VT(n){this.src=n,this.g={},this.h=0}function lL(n,e){var t=e.type;if(t in n.g){var r,i=n.g[t],s=ap(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(HT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function hL(n,e,t,i){for(var s=0;s<n.length;++s){var r=n[s];if(!r.ca&&r.listener==e&&r.capture==!!t&&r.ia==i)return s}return-1}VT.prototype.add=function(n,e,t,i,s){var r=n.toString();(n=this.g[r])||(n=this.g[r]=[],this.h++);var o=hL(n,e,i,s);return-1<o?(e=n[o],t||(e.fa=!1)):((e=new H4(e,this.src,r,!!i,s)).fa=t,n.push(e)),e};var cL="closure_lm_"+(1e6*Math.random()|0),dL={};function $2(n,e,t,i,s){if(i&&i.once)return Y2(n,e,t,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)$2(n,e[r],t,i,s);return null}return t=qT(t),n&&n[kx]?n.N(e,t,Ex(i)?!!i.capture:!!i,s):K2(n,e,t,!1,i,s)}function K2(n,e,t,i,s,r){if(!e)throw Error("Invalid event type");var o=Ex(s)?!!s.capture:!!s,a=jT(n);if(a||(n[cL]=a=new VT(n)),(t=a.add(e,t,i,o,r)).proxy)return t;if(i=function V4(){var e=Z2;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)G2||(s=o),void 0===s&&(s=!1),n.addEventListener(e.toString(),i,s);else if(n.attachEvent)n.attachEvent(pL(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function Y2(n,e,t,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)Y2(n,e[r],t,i,s);return null}return t=qT(t),n&&n[kx]?n.O(e,t,Ex(i)?!!i.capture:!!i,s):K2(n,e,t,!0,i,s)}function uL(n,e,t,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)uL(n,e[r],t,i,s);else i=Ex(i)?!!i.capture:!!i,t=qT(t),n&&n[kx]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=hL(r=n.g[e],t,i,s))&&(HT(r[t]),Array.prototype.splice.call(r,t,1),0==r.length&&(delete n.g[e],n.h--))):n&&(n=jT(n))&&(e=n.g[e.toString()],n=-1,e&&(n=hL(e,t,i,s)),(t=-1<n?e[n]:null)&&zT(t))}function zT(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[kx])lL(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(pL(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=jT(e))?(lL(t,n),0==t.h&&(t.src=null,e[cL]=null)):HT(n)}}}function pL(n){return n in dL?dL[n]:dL[n]="on"+n}function Z2(n,e){if(n.ca)n=!0;else{e=new Dx(e,this);var t=n.listener,i=n.ia||n.src;n.fa&&zT(n),n=t.call(i,e)}return n}function jT(n){return(n=n[cL])instanceof VT?n:null}var UT="__closure_events_fn_"+(1e9*Math.random()>>>0);function qT(n){return"function"==typeof n?n:(n[UT]||(n[UT]=function(e){return n.handleEvent(e)}),n[UT])}function rl(){Ev.call(this),this.i=new VT(this),this.P=this,this.I=null}function xl(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new Ih(e,n);else if(e instanceof Ih)e.target=e.target||n;else{var s=e;sL(e=new Ih(i,n),s)}if(s=!0,t)for(var r=t.length-1;0<=r;r--){var o=e.g=t[r];s=W0(o,i,!0,e)&&s}if(s=W0(o=e.g=n,i,!0,e)&&s,s=W0(o,i,!1,e)&&s,t)for(r=0;r<t.length;r++)s=W0(o=e.g=t[r],i,!1,e)&&s}function W0(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.ca&&o.capture==t){var a=o.listener,l=o.ia||o.src;o.fa&&lL(n.i,o),s=!1!==a.call(l,i)&&s}}return s&&!i.defaultPrevented}Sl(rl,Ev),rl.prototype[kx]=!0,rl.prototype.removeEventListener=function(n,e,t,i){uL(this,n,e,t,i)},rl.prototype.M=function(){if(rl.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)HT(t[i]);delete n.g[e],n.h--}}this.I=null},rl.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},rl.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var WT=Is.JSON.stringify;function _v(){var n=j4;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Q2,X2=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new G0,n=>n.reset());class G0{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Gee(n){Is.setTimeout(()=>{throw n},0)}function Rx(n,e){Q2||function J2(){var n=Is.Promise.resolve(void 0);Q2=function(){n.then(rs)}}(),GT||(Q2(),GT=!0),j4.add(n,e)}var GT=!1,j4=new class z4{constructor(){this.h=this.g=null}add(e,t){const i=X2.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function rs(){for(var n;n=_v();){try{n.h.call(n.g)}catch(t){Gee(t)}var e=X2;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}GT=!1}function $T(n,e){rl.call(this),this.h=n||1,this.g=e||Is,this.j=wl(this.kb,this),this.l=Date.now()}function fL(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function mL(n,e,t){if("function"==typeof n)t&&(n=wl(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wl(n.handleEvent,n)}return 2147483647<Number(e)?-1:Is.setTimeout(n,e||0)}function Ax(n){n.g=mL(()=>{n.g=null,n.i&&(n.i=!1,Ax(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Sl($T,rl),(Xt=$T.prototype).da=!1,Xt.S=null,Xt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),xl(this,"tick"),this.da&&(fL(this),this.start()))}},Xt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xt.M=function(){$T.Z.M.call(this),fL(this),delete this.g};class U4 extends Ev{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ax(this)}M(){super.M(),this.g&&(Is.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sb(n){Ev.call(this),this.h=n,this.g={}}Sl(Sb,Ev);var Lx=[];function Fo(n,e,t,i){Array.isArray(t)||(t&&(Lx[0]=t.toString()),t=Lx);for(var s=0;s<t.length;s++){var r=$2(e,t[s],i||n.handleEvent,!1,n.h||n);if(!r)break;n.g[r.key]=r}}function q4(n){_x(n.g,function(e,t){this.g.hasOwnProperty(t)&&zT(e)},n),n.g={}}function Mx(){this.g=!0}function Iv(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function tH(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<s.length;o++)s[o]=""}}}return WT(t)}catch(a){return e}}(n,t)+(i?" "+i:"")})}Sb.prototype.M=function(){Sb.Z.M.call(this),q4(this)},Sb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mx.prototype.Aa=function(){this.g=!1},Mx.prototype.info=function(){};var xb={},iH=null;function KT(){return iH=iH||new rl}function sH(n){Ih.call(this,xb.Ma,n)}function jm(n){const e=KT();xl(e,new sH(e,n))}function nH(n,e){Ih.call(this,xb.STAT_EVENT,n),this.stat=e}function hc(n){const e=KT();xl(e,new nH(e,n))}function rH(n,e){Ih.call(this,xb.Na,n),this.size=e}function Eb(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Is.setTimeout(function(){n()},e)}xb.Ma="serverreachability",Sl(sH,Ih),xb.STAT_EVENT="statevent",Sl(nH,Ih),xb.Na="timingevent",Sl(rH,Ih);var Ox={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},gL={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function YT(){}function $0(){}YT.prototype.h=null;var vL,Um={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function bL(){Ih.call(this,"d")}function yL(){Ih.call(this,"c")}function Px(){}function K0(n,e,t,i){this.l=n,this.j=e,this.m=t,this.X=i||1,this.V=new Sb(this),this.P=$4,this.W=new $T(n=OT?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new CL}function CL(){this.i=null,this.g="",this.h=!1}Sl(bL,Ih),Sl(yL,Ih),Sl(Px,YT),Px.prototype.g=function(){return new XMLHttpRequest},Px.prototype.i=function(){return{}},vL=new Px;var $4=45e3,ZT={},XT={};function wL(n,e,t){n.K=1,n.v=Hx(Zc(e)),n.s=t,n.U=!0,K4(n,null)}function K4(n,e){n.F=Date.now(),Y0(n),n.A=Zc(n.v);var t=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),dH(t.h,"t",i),n.C=0,t=n.l.H,n.h=new CL,n.g=TH(n.l,t?e:null,!n.s),0<n.O&&(n.L=new U4(wl(n.Ia,n,n.g),n.O)),Fo(n.V,n.g,"readystatechange",n.gb),e=n.H?q0(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),jm(1),function W4(n,e,t,i,s,r){n.info(function(){if(n.g)if(r)for(var o="",a=r.split("&"),l=0;l<a.length;l++){var h=a[l].split("=");if(1<h.length){var c=h[0];h=h[1];var m=c.split("_");o=2<=m.length&&"type"==m[1]?o+(c+"=")+h+"&":o+(c+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Y4(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Z4(n,e,t){let s,i=!0;for(;!n.I&&n.C<t.length;){if(s=$ee(n,t),s==XT){4==e&&(n.o=4,hc(14),i=!1),Iv(n.j,n.m,null,"[Incomplete Response]");break}if(s==ZT){n.o=4,hc(15),Iv(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Iv(n.j,n.m,s,null),Tv(n,s)}Y4(n)&&s!=XT&&s!=ZT&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,hc(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),_H(e),e.L=!0,hc(11))):(Iv(n.j,n.m,t,"[Invalid Chunked Response]"),_b(n),Nx(n))}function $ee(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?XT:(t=Number(e.substring(t,i)),isNaN(t)?ZT:(i+=1)+t>e.length?XT:(e=e.substr(i,t),n.C=i+t,e))}function Y0(n){n.Y=Date.now()+n.P,Fx(n,n.P)}function Fx(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Eb(wl(n.eb,n),e)}function QT(n){n.B&&(Is.clearTimeout(n.B),n.B=null)}function Nx(n){0==n.l.G||n.I||Lv(n.l,n)}function _b(n){QT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,fL(n.W),q4(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Tv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||kL(t.i,n)))if(t.I=n.N,!n.J&&kL(t.i,n)&&3==t.G){try{var i=t.Ca.g.parse(e)}catch(h){i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0])e:if(t.u)t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=Eb(wl(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;nD(t),Av(t)}HL(t),hc(18)}if(1>=fH(t.i)&&t.ka){try{t.ka()}catch(h){}t.ka=void 0}}else Cu(t,11)}else if((n.J||t.g==n)&&nD(t),!Yc(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let h=s[e];if(t.U=h[0],h=h[1],2==t.G)if("c"==h[0]){t.J=h[1],t.la=h[2];const c=h[3];null!=c&&(t.ma=c,t.h.info("VER="+t.ma));const m=h[4];null!=m&&(t.za=m,t.h.info("SVER="+t.za));const b=h[5];null!=b&&"number"==typeof b&&0<b&&(t.K=i=1.5*b,t.h.info("backChannelRequestTimeoutMs_="+i)),i=t;const v=n.g;if(v){const w=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var r=i.i;!r.g&&(_h(w,"spdy")||_h(w,"quic")||_h(w,"h2"))&&(r.j=r.l,r.g=new Set,r.h&&(tD(r,r.h),r.h=null))}if(i.D){const E=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(i.sa=E,uo(i.F,i.D,E))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var o=n;if((i=t).oa=zL(i,i.H?i.la:null,i.W),o.J){mH(i.i,o);var a=o,l=i.K;l&&a.setTimeout(l),a.B&&(QT(a),Y0(a)),i.g=o}else sD(i);0<t.l.length&&Gx(t)}else"stop"!=h[0]&&"close"!=h[0]||Cu(t,7);else 3==t.G&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?Cu(t,7):Wx(t):"noop"!=h[0]&&t.j&&t.j.wa(h),t.A=0)}jm(4)}catch(h){}}function SL(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(AT(n)||"string"==typeof n)P2(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(AT(n)||"string"==typeof n){t=[];for(var i=n.length,s=0;s<i;s++)t.push(s)}else for(s in t=[],i=0,n)t[i++]=s;i=function X4(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(AT(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),s=i.length;for(var r=0;r<s;r++)e.call(void 0,i[r],t&&t[r],n)}}function Z0(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var i=0;i<t;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof Z0)for(t=n.T(),i=0;i<t.length;i++)this.set(t[i],n.get(t[i]));else for(i in n)this.set(i,n[i])}function xL(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var i=n.g[e];Dv(n.h,i)&&(n.g[t++]=i),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)Dv(s,i=n.g[e])||(n.g[t++]=i,s[i]=1),e++;n.g.length=t}}function Dv(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xt=K0.prototype).setTimeout=function(n){this.P=n},Xt.gb=function(n){n=n.target;const e=this.L;e&&3==qm(n)?e.l():this.Ia(n)},Xt.Ia=function(n){try{if(n==this.g)e:{const c=qm(this.g);var e=this.g.Da();const m=this.g.ba();if(!(3>c)&&(3!=c||OT||this.g&&(this.h.h||this.g.ga()||wH(this.g)))){this.I||4!=c||7==e||jm(8==e||0>=m?3:2),QT(this);var t=this.g.ba();this.N=t;t:if(Y4(this)){var i=wH(this.g);n="";var s=i.length,r=4==qm(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){_b(this),Nx(this);var o="";break t}this.h.i=new Is.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:r&&e==s-1});i.splice(0,s),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==t,function G4(n,e,t,i,s,r,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+r+" "+o})}(this.j,this.u,this.A,this.m,this.X,c,t),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yc(a)){var h=a;break t}}h=null}if(!(t=h)){this.i=!1,this.o=3,hc(12),_b(this),Nx(this);break e}Iv(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Tv(this,t)}this.U?(Z4(this,c,o),OT&&this.i&&3==c&&(Fo(this.V,this.W,"tick",this.fb),this.W.start())):(Iv(this.j,this.m,o,null),Tv(this,o)),4==c&&_b(this),this.i&&!this.I&&(4==c?Lv(this.l,this):(this.i=!1,Y0(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,hc(12)):(this.o=0,hc(13)),_b(this),Nx(this)}}}catch(c){}},Xt.fb=function(){if(this.g){var n=qm(this.g),e=this.g.ga();this.C<e.length&&(QT(this),Z4(this,n,e),this.i&&4!=n&&Y0(this))}},Xt.cancel=function(){this.I=!0,_b(this)},Xt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function eH(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(jm(3),hc(17)),_b(this),this.o=2,Nx(this)):Fx(this,this.Y-n)},(Xt=Z0.prototype).R=function(){xL(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xt.T=function(){return xL(this),this.g.concat()},Xt.get=function(n,e){return Dv(this.h,n)?this.h[n]:e},Xt.set=function(n,e){Dv(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xt.forEach=function(n,e){for(var t=this.T(),i=0;i<t.length;i++){var s=t[i],r=this.get(s);n.call(e,r,s,this)}};var EL=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kv(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof kv){this.g=void 0!==e?e:n.g,JT(this,n.j),this.s=n.s,Bx(this,n.i),eD(this,n.m),this.l=n.l,e=n.h;var t=new Q0;t.i=e.i,e.g&&(t.g=new Z0(e.g),t.h=e.h),_L(this,t),this.o=n.o}else n&&(t=String(n).match(EL))?(this.g=!!e,JT(this,t[1]||"",!0),this.s=Vx(t[2]||""),Bx(this,t[3]||"",!0),eD(this,t[4]),this.l=Vx(t[5]||"",!0),_L(this,t[6]||"",!0),this.o=Vx(t[7]||"")):(this.g=!!e,this.h=new Q0(null,this.g))}function Zc(n){return new kv(n)}function JT(n,e,t){n.j=t?Vx(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Bx(n,e,t){n.i=t?Vx(e,!0):e}function eD(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function _L(n,e,t){e instanceof Q0?(n.h=e,function sW(n,e){e&&!n.j&&(Ib(n),n.i=null,n.g.forEach(function(t,i){var s=i.toLowerCase();i!=s&&(hH(this,i),dH(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=X0(e,TL)),n.h=new Q0(e,n.g))}function uo(n,e,t){n.h.set(e,t)}function Hx(n){return uo(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Vx(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function X0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,aH),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function aH(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}kv.prototype.toString=function(){var n=[],e=this.j;e&&n.push(X0(e,lH,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(X0(e,lH,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(X0(t,"/"==t.charAt(0)?tW:eW,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",X0(t,iW)),n.join("")};var lH=/[#\/\?@]/g,eW=/[#\?:]/g,tW=/[#\?]/g,TL=/[#\?@]/g,iW=/#/g;function Q0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ib(n){n.g||(n.g=new Z0,n.h=0,n.i&&function Q4(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),s=null;if(0<=i){var r=n[t].substring(0,i);s=n[t].substring(i+1)}else r=n[t];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function hH(n,e){Ib(n),e=J0(n,e),Dv(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Dv((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&xL(n)))}function cH(n,e){return Ib(n),e=J0(n,e),Dv(n.g.h,e)}function dH(n,e,t){hH(n,e),0<t.length&&(n.i=null,n.g.set(J0(n,e),Ad(t)),n.h+=t.length)}function J0(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function uH(n){this.l=n||pH,n=Is.PerformanceNavigationTiming?0<(n=Is.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Is.g&&Is.g.Ea&&Is.g.Ea()&&Is.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xt=Q0.prototype).add=function(n,e){Ib(this),this.i=null,n=J0(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xt.forEach=function(n,e){Ib(this),this.g.forEach(function(t,i){P2(t,function(s){n.call(e,s,i,this)},this)},this)},Xt.T=function(){Ib(this);for(var n=this.g.R(),e=this.g.T(),t=[],i=0;i<e.length;i++)for(var s=n[i],r=0;r<s.length;r++)t.push(e[i]);return t},Xt.R=function(n){Ib(this);var e=[];if("string"==typeof n)cH(this,n)&&(e=lp(e,this.g.get(J0(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=lp(e,n[t])}return e},Xt.set=function(n,e){return Ib(this),this.i=null,cH(this,n=J0(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var i=e[t],s=encodeURIComponent(String(i));i=this.R(i);for(var r=0;r<i.length;r++){var o=s;""!==i[r]&&(o+="="+encodeURIComponent(String(i[r]))),n.push(o)}}return this.i=n.join("&")};var pH=10;function DL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function fH(n){return n.h?1:n.g?n.g.size:0}function kL(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function tD(n,e){n.g?n.g.add(e):n.h=e}function mH(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function gH(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ad(n.i)}function RL(){}function AL(){this.g=new RL}function LL(n,e,t){const i=t||"";try{SL(n,function(s,r){let o=s;Ex(s)&&(o=WT(s)),e.push(i+r+"="+encodeURIComponent(o))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function ew(n,e,t,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch(r){}}function zx(n){this.l=n.$b||null,this.j=n.ib||!1}function iD(n,e){rl.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=jx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}uH.prototype.cancel=function(){if(this.i=gH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},RL.prototype.stringify=function(n){return Is.JSON.stringify(n,void 0)},RL.prototype.parse=function(n){return Is.JSON.parse(n,void 0)},Sl(zx,YT),zx.prototype.g=function(){return new iD(this.l,this.j)},zx.prototype.i=function(n){return function(){return n}}({}),Sl(iD,rl);var jx=0;function yH(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function tw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ux(n)}function Ux(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xt=iD.prototype).open=function(n,e){if(this.readyState!=jx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ux(this)},Xt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Is).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tw(this)),this.readyState=jx},Xt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ux(this)),this.g&&(this.readyState=3,Ux(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Is.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yH(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?tw(this):Ux(this),3==this.readyState&&yH(this)}},Xt.Ua=function(n){this.g&&(this.response=this.responseText=n,tw(this))},Xt.Ta=function(n){this.g&&(this.response=n,tw(this))},Xt.ha=function(){this.g&&tw(this)},Xt.setRequestHeader=function(n,e){this.v.append(n,e)},Xt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(iD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var vH=Is.JSON.parse;function Ba(n){rl.call(this),this.headers=new Z0,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ML,this.K=this.L=!1}Sl(Ba,rl);var ML="",Kee=/^https?$/i,rW=["POST","PUT"];function oW(n){return"content-type"==n.toLowerCase()}function Rv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,iw(n),OL(n)}function iw(n){n.D||(n.D=!0,xl(n,"complete"),xl(n,"error"))}function CH(n){if(n.h&&void 0!==kT&&(!n.C[1]||4!=qm(n)||2!=n.ba()))if(n.v&&4==qm(n))mL(n.Fa,0,n);else if(xl(n,"readystatechange"),4==qm(n)){n.h=!1;try{const a=n.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===a){var s=String(n.H).match(EL)[1]||null;if(!s&&Is.self&&Is.self.location){var r=Is.self.location.protocol;s=r.substr(0,r.length-1)}i=!Kee.test(s?s.toLowerCase():"")}t=i}if(t)xl(n,"complete"),xl(n,"success");else{n.m=6;try{var o=2<qm(n)?n.g.statusText:""}catch(l){o=""}n.j=o+" ["+n.ba()+"]",iw(n)}}finally{OL(n)}}}function OL(n,e){if(n.g){PL(n);const t=n.g,i=n.C[0]?RT:null;n.g=null,n.C=null,e||xl(n,"ready");try{t.onreadystatechange=i}catch(s){}}}function PL(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Is.clearTimeout(n.A),n.A=null)}function qm(n){return n.g?n.g.readyState:0}function wH(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ML:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function FL(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=function aW(n){let e="";return _x(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):uo(n,e,t))}function sw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function NL(n){this.za=0,this.l=[],this.h=new Mx,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=sw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=sw("baseRetryDelayMs",5e3,n),this.$a=sw("retryDelaySeedMs",1e4,n),this.Ya=sw("forwardChannelMaxRetries",2,n),this.ra=sw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new uH(n&&n.concurrentRequestLimit),this.Ca=new AL,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Wx(n){if(nw(n),3==n.G){var e=n.V++,t=Zc(n.F);uo(t,"SID",n.J),uo(t,"RID",e),uo(t,"TYPE","terminate"),$x(n,t),(e=new K0(n,n.h,e,void 0)).K=2,e.v=Hx(Zc(t)),t=!1,Is.navigator&&Is.navigator.sendBeacon&&(t=Is.navigator.sendBeacon(e.v.toString(),"")),!t&&Is.Image&&((new Image).src=e.v,t=!0),t||(e.g=TH(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Y0(e)}lW(n)}function Av(n){n.g&&(_H(n),n.g.cancel(),n.g=null)}function nw(n){Av(n),n.u&&(Is.clearTimeout(n.u),n.u=null),nD(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Is.clearTimeout(n.m),n.m=null)}function BL(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Gx(n)}function Gx(n){DL(n.i)||n.m||(n.m=!0,Rx(n.Ha,n),n.C=0)}function xH(n,e){var t;t=e?e.m:n.V++;const i=Zc(n.F);uo(i,"SID",n.J),uo(i,"RID",t),uo(i,"AID",n.U),$x(n,i),n.o&&n.s&&FL(i,n.o,n.s),t=new K0(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=EH(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),tD(n.i,t),wL(t,i,e)}function $x(n,e){n.j&&SL({},function(t,i){uo(e,i,t)})}function EH(n,e,t){t=Math.min(n.l.length,t);var i=n.j?wl(n.j.Oa,n.j,n):null;e:{var s=n.l;let r=-1;for(;;){const o=["count="+t];-1==r?0<t?(r=s[0].h,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let l=0;l<t;l++){let h=s[l].h;const c=s[l].g;if(h-=r,0>h)r=Math.max(0,s[l].h-100),a=!1;else try{LL(c,o,"req"+h+"_")}catch(m){i&&i(c)}}if(a){i=o.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,i}function sD(n){n.g||n.u||(n.Y=1,Rx(n.Ga,n),n.A=0)}function HL(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Eb(wl(n.Ga,n),VL(n,n.A)),n.A++,0))}function _H(n){null!=n.B&&(Is.clearTimeout(n.B),n.B=null)}function IH(n){n.g=new K0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Zc(n.oa);uo(e,"RID","rpc"),uo(e,"SID",n.J),uo(e,"CI",n.N?"0":"1"),uo(e,"AID",n.U),$x(n,e),uo(e,"TYPE","xmlhttp"),n.o&&n.s&&FL(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Hx(Zc(e)),t.s=null,t.U=!0,K4(t,n)}function nD(n){null!=n.v&&(Is.clearTimeout(n.v),n.v=null)}function Lv(n,e){var t=null;if(n.g==e){nD(n),_H(n),n.g=null;var i=2}else{if(!kL(n.i,e))return;t=e.D,mH(n.i,e),i=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;xl(i=KT(),new rH(i,t,e,s)),Gx(n)}else sD(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==i&&function SH(n,e){return!(fH(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Eb(wl(n.Ha,n,e),VL(n,n.C)),n.C++,0)))}(n,e)||2==i&&HL(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Cu(n,5);break;case 4:Cu(n,10);break;case 3:Cu(n,6);break;default:Cu(n,2)}}function VL(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Cu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var i=wl(n.jb,n);t||(t=new kv("//www.google.com/images/cleardot.gif"),Is.location&&"http"==Is.location.protocol||JT(t,"https"),Hx(t)),function bH(n,e){const t=new Mx;if(Is.Image){const i=new Image;i.onload=MT(ew,t,i,"TestLoadImage: loaded",!0,e),i.onerror=MT(ew,t,i,"TestLoadImage: error",!1,e),i.onabort=MT(ew,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=MT(ew,t,i,"TestLoadImage: timeout",!1,e),Is.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else hc(2);n.G=0,n.j&&n.j.va(e),lW(n),nw(n)}function lW(n){n.G=0,n.I=-1,n.j&&((0!=gH(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Ad(n.l),n.l.length=0),n.j.ua())}function zL(n,e,t){let i=function J4(n){return n instanceof kv?Zc(n):new kv(n,void 0)}(t);if(""!=i.i)e&&Bx(i,e+"."+i.i),eD(i,i.m);else{const s=Is.location;i=function IL(n,e,t,i){var s=new kv(null,void 0);return n&&JT(s,n),e&&Bx(s,e),t&&eD(s,t),i&&(s.l=i),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&_x(n.aa,function(s,r){uo(i,r,s)}),t=n.sa,(e=n.D)&&t&&uo(i,e,t),uo(i,"VER",n.ma),$x(n,i),i}function TH(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ba(t&&n.Ba&&!n.qa?new zx({ib:!0}):n.qa)).L=n.H,e}function hW(){}function Kx(){if(zm&&!(10<=Number(W2)))throw Error("Environmental error: no available transport.")}function wu(n,e){rl.call(this),this.g=new NL(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Yc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yc(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new rw(this)}function jL(n){bL.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function rD(){yL.call(this),this.status=1}function rw(n){this.g=n}(Xt=Ba.prototype).ea=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():vL.g(),this.C=function oH(n){return n.h||(n.h=n.i())}(this.u?this.u:vL),this.g.onreadystatechange=wl(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(r){return void Rv(this,r)}n=t||"";const s=new Z0(this.headers);i&&SL(i,function(r,o){s.set(o,r)}),i=function F2(n){e:{var e=oW;const t=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in i&&e.call(void 0,i[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=Is.FormData&&n instanceof Is.FormData,!(0<=ap(rW,e))||i||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(r,o){this.g.setRequestHeader(o,r)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{PL(this),0<this.B&&((this.K=function qx(n){return zm&&function q2(){return function V2(n){var e=U2;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=tL(String(Tx)).split("."),t=tL("9").split("."),i=Math.max(e.length,t.length);for(let o=0;0==n&&o<i;o++){var s=e[o]||"",r=t[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==s[0].length&&0==r[0].length)break;n=iL(0==s[1].length?0:parseInt(s[1],10),0==r[1].length?0:parseInt(r[1],10))||iL(0==s[2].length,0==r[2].length)||iL(s[2],r[2]),s=s[3],r=r[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wl(this.pa,this)):this.A=mL(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(r){Rv(this,r)}},Xt.pa=function(){void 0!==kT&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xl(this,"timeout"),this.abort(8))},Xt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,xl(this,"complete"),xl(this,"abort"),OL(this))},Xt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),OL(this,!0)),Ba.Z.M.call(this)},Xt.Fa=function(){this.s||(this.F||this.v||this.l?CH(this):this.cb())},Xt.cb=function(){CH(this)},Xt.ba=function(){try{return 2<qm(this)?this.g.status:-1}catch(n){return-1}},Xt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),vH(e)}},Xt.Da=function(){return this.m},Xt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xt=NL.prototype).ma=8,Xt.G=1,Xt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Xt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new K0(this,this.h,n,void 0);let r=this.s;if(this.P&&(r?(r=q0(r),sL(r,this.P)):r=this.P),null===this.o&&(s.H=r),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var i=this.l[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=EH(this,s,e),uo(t=Zc(this.F),"RID",n),uo(t,"CVER",22),this.D&&uo(t,"X-HTTP-Session-Id",this.D),$x(this,t),this.o&&r&&FL(t,this.o,r),tD(this.i,s),this.Ra&&uo(t,"TYPE","init"),this.ja?(uo(t,"$req",e),uo(t,"SID","null"),s.$=!0,wL(s,t,null)):wL(s,t,e),this.G=2}}else 3==this.G&&(n?xH(this,n):0==this.l.length||DL(this.i)||xH(this))},Xt.Ga=function(){if(this.u=null,IH(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Eb(wl(this.bb,this),n)}},Xt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,hc(10),Av(this),IH(this))},Xt.ab=function(){null!=this.v&&(this.v=null,Av(this),HL(this),hc(19))},Xt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),hc(2)):(this.h.info("Failed to ping google.com"),hc(1))},(Xt=hW.prototype).xa=function(){},Xt.wa=function(){},Xt.va=function(){},Xt.ua=function(){},Xt.Oa=function(){},Kx.prototype.g=function(n,e){return new wu(n,e)},Sl(wu,rl),wu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Rx(wl(n.hb,n,e))),hc(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=zL(n,null,n.W),Gx(n)},wu.prototype.close=function(){Wx(this.g)},wu.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,BL(this.g,e)}else this.v?((e={}).__data__=WT(n),BL(this.g,e)):BL(this.g,n)},wu.prototype.M=function(){this.g.j=null,delete this.j,Wx(this.g),delete this.g,wu.Z.M.call(this)},Sl(jL,bL),Sl(rD,yL),Sl(rw,hW),rw.prototype.xa=function(){xl(this.g,"a")},rw.prototype.wa=function(n){xl(this.g,new jL(n))},rw.prototype.va=function(n){xl(this.g,new rD(n))},rw.prototype.ua=function(){xl(this.g,"b")},Kx.prototype.createWebChannel=Kx.prototype.g,wu.prototype.send=wu.prototype.u,wu.prototype.open=wu.prototype.m,wu.prototype.close=wu.prototype.close,Ox.NO_ERROR=0,Ox.TIMEOUT=8,Ox.HTTP_ERROR=6,gL.COMPLETE="complete",$0.EventType=Um,Um.OPEN="a",Um.CLOSE="b",Um.ERROR="c",Um.MESSAGE="d",rl.prototype.listen=rl.prototype.N,Ba.prototype.listenOnce=Ba.prototype.O,Ba.prototype.getLastError=Ba.prototype.La,Ba.prototype.getLastErrorCode=Ba.prototype.Da,Ba.prototype.getStatus=Ba.prototype.ba,Ba.prototype.getResponseJson=Ba.prototype.Qa,Ba.prototype.getResponseText=Ba.prototype.ga,Ba.prototype.send=Ba.prototype.ea;var DH=Vm.createWebChannelTransport=function(){return new Kx},cW=Vm.getStatEventTarget=function(){return KT()},oD=Vm.ErrorCode=Ox,kH=Vm.EventType=gL,RH=Vm.Event=xb,AH=Vm.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},dW=Vm.FetchXmlHttpFactory=zx,aD=Vm.WebChannel=$0,uW=Vm.XhrIo=Ba;const ow="@firebase/firestore";class El{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}El.UNAUTHENTICATED=new El(null),El.GOOGLE_CREDENTIALS=new El("google-credentials-uid"),El.FIRST_PARTY=new El("first-party-uid"),El.MOCK_USER=new El("mock-user");let Mv="9.6.7";const Wm=new Rd.Yd("@firebase/firestore");function lD(){return Wm.logLevel}function qt(n,...e){if(Wm.logLevel<=Rd.in.DEBUG){const t=e.map(UL);Wm.debug(`Firestore (${Mv}): ${n}`,...t)}}function Ha(n,...e){if(Wm.logLevel<=Rd.in.ERROR){const t=e.map(UL);Wm.error(`Firestore (${Mv}): ${n}`,...t)}}function Yx(n,...e){if(Wm.logLevel<=Rd.in.WARN){const t=e.map(UL);Wm.warn(`Firestore (${Mv}): ${n}`,...t)}}function UL(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function zi(n="Unexpected state"){const e=`FIRESTORE (${Mv}) INTERNAL ASSERTION FAILED: `+n;throw Ha(e),new Error(e)}function gs(n,e){n||zi()}function ti(n,e){return n}const rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Lt extends ee.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Cr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class MH{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(El.UNAUTHENTICATED))}shutdown(){}}class Zx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fW{constructor(e){this.t=e,this.currentUser=El.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let s=this.i;const r=h=>this.i!==s?(s=this.i,t(h)):Promise.resolve();let o=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Cr,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable((0,dt.Z)(function*(){yield h.promise,yield r(i.currentUser)}))},l=h=>{qt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>l(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?l(h):(qt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Cr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(qt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gs("string"==typeof i.accessToken),new MH(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gs(null===e||"string"==typeof e),new El(e)}}class mW{constructor(e,t,i){this.type="FirstParty",this.user=El.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class gW{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new mW(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(El.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=r=>{null!=r.error&&qt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.p;return this.p=r.token,qt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{qt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.g.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.g.getImmediate({optional:!0});r?s(r):qt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gs("string"==typeof t.token),this.p=t.token,new Xx(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ld{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.I(i),this.T=i=>t.writeSequenceNumber(i))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function OH(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}Ld.A=-1;class qL{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=OH(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%e.length))}return i}}function sn(n,e){return n<e?-1:n>e?1:0}function Ov(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}function PH(n){return n+"\0"}class _l{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Lt(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Lt(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Lt(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Lt(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _l.fromMillis(Date.now())}static fromDate(e){return _l.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new _l(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sn(this.nanoseconds,e.nanoseconds):sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class us{constructor(e){this.timestamp=e}static fromTimestamp(e){return new us(e)}static min(){return new us(new _l(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function dD(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pv{constructor(e,t,i){void 0===t?t=0:t>e.length&&zi(),void 0===i?i=e.length-t:i>e.length-t&&zi(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Pv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pv?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=e.get(s),o=t.get(s);if(r<o)return-1;if(r>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ln extends Pv{construct(e,t,i){return new Ln(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Lt(rt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new Ln(t)}static emptyPath(){return new Ln([])}}const bW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Il extends Pv{construct(e,t,i){return new Il(e,t,i)}static isValidIdentifier(e){return bW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Il.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Il(["__name__"])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(0===i.length)throw new Lt(rt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if("\\"===a){if(s+1===e.length)throw new Lt(rt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Lt(rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else"`"===a?(o=!o,s++):"."!==a||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new Lt(rt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Il(t)}static emptyPath(){return new Il([])}}class aw{constructor(e){this.fields=e,e.sort(Il.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ov(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class Va{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Va(t)}static fromUint8Array(e){const t=function(i){let s="";for(let r=0;r<i.length;++r)s+=String.fromCharCode(i[r]);return s}(e);return new Va(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Va.EMPTY_BYTE_STRING=new Va("");const GL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $m(n){if(gs(!!n),"string"==typeof n){let e=0;const t=GL.exec(n);if(gs(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:No(n.seconds),nanos:No(n.nanos)}}function No(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Tb(n){return"string"==typeof n?Va.fromBase64String(n):Va.fromUint8Array(n)}function uD(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function FH(n){const e=n.mapValue.fields.__previous_value__;return uD(e)?FH(e):e}function lw(n){const e=$m(n.mapValue.fields.__local_write_time__.timestampValue);return new _l(e.seconds,e.nanos)}class NH{constructor(e,t,i,s,r,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Fv{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fv("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fv&&e.projectId===this.projectId&&e.database===this.database}}function Db(n){return null==n}function hw(n){return 0===n&&1/n==-1/0}function Th(n){return"number"==typeof n&&Number.isInteger(n)&&!hw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class yi{constructor(e){this.path=e}static fromPath(e){return new yi(Ln.fromString(e))}static fromName(e){return new yi(Ln.fromString(e).popFirst(5))}static empty(){return new yi(Ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yi(new Ln(e.slice()))}}const vW={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function Nv(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?uD(n)?4:10:zi()}function vf(n,e){if(n===e)return!0;const t=Nv(n);if(t!==Nv(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lw(n).isEqual(lw(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const r=$m(i.timestampValue),o=$m(s.timestampValue);return r.seconds===o.seconds&&r.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Tb(n.bytesValue).isEqual(Tb(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return No(i.geoPointValue.latitude)===No(s.geoPointValue.latitude)&&No(i.geoPointValue.longitude)===No(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return No(i.integerValue)===No(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const r=No(i.doubleValue),o=No(s.doubleValue);return r===o?hw(r)===hw(o):isNaN(r)&&isNaN(o)}return!1}(n,e);case 9:return Ov(n.arrayValue.values||[],e.arrayValue.values||[],vf);case 10:return function(i,s){const r=i.mapValue.fields||{},o=s.mapValue.fields||{};if(dD(r)!==dD(o))return!1;for(const a in r)if(r.hasOwnProperty(a)&&(void 0===o[a]||!vf(r[a],o[a])))return!1;return!0}(n,e);default:return zi()}var s}function Km(n,e){return void 0!==(n.values||[]).find(t=>vf(t,e))}function cw(n,e){if(n===e)return 0;const t=Nv(n),i=Nv(e);if(t!==i)return sn(t,i);switch(t){case 0:return 0;case 1:return sn(n.booleanValue,e.booleanValue);case 2:return function(s,r){const o=No(s.integerValue||s.doubleValue),a=No(r.integerValue||r.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return pD(n.timestampValue,e.timestampValue);case 4:return pD(lw(n),lw(e));case 5:return sn(n.stringValue,e.stringValue);case 6:return function(s,r){const o=Tb(s),a=Tb(r);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(s,r){const o=s.split("/"),a=r.split("/");for(let l=0;l<o.length&&l<a.length;l++){const h=sn(o[l],a[l]);if(0!==h)return h}return sn(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,r){const o=sn(No(s.latitude),No(r.latitude));return 0!==o?o:sn(No(s.longitude),No(r.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,r){const o=s.values||[],a=r.values||[];for(let l=0;l<o.length&&l<a.length;++l){const h=cw(o[l],a[l]);if(h)return h}return sn(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,r){const o=s.fields||{},a=Object.keys(o),l=r.fields||{},h=Object.keys(l);a.sort(),h.sort();for(let c=0;c<a.length&&c<h.length;++c){const m=sn(a[c],h[c]);if(0!==m)return m;const b=cw(o[a[c]],l[h[c]]);if(0!==b)return b}return sn(a.length,h.length)}(n.mapValue,e.mapValue);default:throw zi()}}function pD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return sn(n,e);const t=$m(n),i=$m(e),s=sn(t.seconds,i.seconds);return 0!==s?s:sn(t.nanos,i.nanos)}function dw(n){return fD(n)}function fD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const s=$m(i);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Tb(n.bytesValue).toBase64():"referenceValue"in n?yi.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let s="[",r=!0;for(const o of i.values||[])r?r=!1:s+=",",s+=fD(o);return s+"]"}(n.arrayValue):"mapValue"in n?function(i){const s=Object.keys(i.fields||{}).sort();let r="{",o=!0;for(const a of s)o?o=!1:r+=",",r+=`${a}:${fD(i.fields[a])}`;return r+"}"}(n.mapValue):zi();var e}function mD(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $L(n){return!!n&&"integerValue"in n}function uw(n){return!!n&&"arrayValue"in n}function KL(n){return!!n&&"nullValue"in n}function YL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bv(n){return!!n&&"mapValue"in n}function Hv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gm(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Hv(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hv(n.arrayValue.values[t]);return e}return Object.assign({},n)}class cc{constructor(e){this.value=e}static empty(){return new cc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Bv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hv(t)}setAll(e){let t=Il.emptyPath(),i={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,s),i={},s=[],t=a.popLast()}o?i[a.lastSegment()]=Hv(o):s.push(a.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());Bv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vf(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Bv(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Gm(t,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new cc(Hv(this.value))}}function ZL(n){const e=[];return Gm(n.fields,(t,i)=>{const s=new Il([t]);if(Bv(i)){const r=ZL(i.mapValue).fields;if(0===r.length)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new aw(e)}class Bo{constructor(e,t,i,s,r,o){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.data=r,this.documentState=o}static newInvalidDocument(e){return new Bo(e,0,us.min(),us.min(),cc.empty(),0)}static newFoundDocument(e,t,i){return new Bo(e,1,t,us.min(),i,0)}static newNoDocument(e,t){return new Bo(e,2,t,us.min(),cc.empty(),0)}static newUnknownDocument(e,t){return new Bo(e,3,t,us.min(),cc.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bo(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let gD=(()=>{class n{constructor(t,i,s,r){this.indexId=t,this.collectionGroup=i,this.fields=s,this.indexState=r}}return n.UNKNOWN_ID=-1,n})();class Vv{constructor(e,t){this.fieldPath=e,this.kind=t}}class pw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new pw(0,bD.min())}}class bD{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new bD(us.min(),yi.empty(),-1)}}class XL{constructor(e,t=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.P=null}}function yD(n,e=null,t=[],i=[],s=null,r=null,o=null){return new XL(n,e,t,i,s,r,o)}function vD(n){const e=ti(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(s=i).field.canonicalString()+s.op.toString()+dw(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(s=i).field.canonicalString()+s.dir;var s}).join(","),Db(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>dw(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>dw(i)).join(",")),e.P=t}return e.P}function CD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!UH(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(i=e.filters[s]).op||!t.field.isEqual(i.field)||!vf(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!WH(n.startAt,e.startAt)&&WH(n.endAt,e.endAt)}function Qx(n){return yi.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Dh extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,i):new wW(e,t,i):"array-contains"===t?new SW(e,i):"in"===t?new zH(e,i):"not-in"===t?new xW(e,i):"array-contains-any"===t?new jH(e,i):new Dh(e,t,i)}static v(e,t,i){return"in"===t?new BH(e,i):new HH(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(cw(t,this.value)):null!==t&&Nv(this.value)===Nv(t)&&this.V(cw(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zi()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class wW extends Dh{constructor(e,t,i){super(e,t,i),this.key=yi.fromName(i.referenceValue)}matches(e){const t=yi.comparator(e.key,this.key);return this.V(t)}}class BH extends Dh{constructor(e,t){super(e,"in",t),this.keys=VH(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class HH extends Dh{constructor(e,t){super(e,"not-in",t),this.keys=VH(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function VH(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>yi.fromName(i.referenceValue))}class SW extends Dh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uw(t)&&Km(t.arrayValue,this.value)}}class zH extends Dh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Km(this.value.arrayValue,t)}}class xW extends Dh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Km(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Km(this.value.arrayValue,t)}}class jH extends Dh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Km(this.value.arrayValue,i))}}class zv{constructor(e,t){this.position=e,this.inclusive=t}}class jv{constructor(e,t="asc"){this.field=e,this.dir=t}}function UH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function qH(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],o=n.position[s];if(i=r.field.isKeyField()?yi.comparator(yi.fromName(o.referenceValue),t.key):cw(o,t.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function WH(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vf(n.position[t],e.position[t]))return!1;return!0}class kb{constructor(e,t=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.D=null,this.C=null}}function QL(n,e,t,i,s,r,o,a){return new kb(n,e,t,i,s,r,o,a)}function Jx(n){return new kb(n)}function JL(n){return!Db(n.limit)&&"F"===n.limitType}function eM(n){return!Db(n.limit)&&"L"===n.limitType}function GH(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function $H(n){for(const e of n.filters)if(e.S())return e.field;return null}function KH(n){return null!==n.collectionGroup}function eE(n){const e=ti(n);if(null===e.D){e.D=[];const t=$H(e),i=GH(e);if(null!==t&&null===i)t.isKeyField()||e.D.push(new jv(t)),e.D.push(new jv(Il.keyField(),"asc"));else{let s=!1;for(const r of e.explicitOrderBy)e.D.push(r),r.field.isKeyField()&&(s=!0);if(!s){const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new jv(Il.keyField(),r))}}}return e.D}function hp(n){const e=ti(n);if(!e.C)if("F"===e.limitType)e.C=yD(e.path,e.collectionGroup,eE(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const r of eE(e))t.push(new jv(r.field,"desc"===r.dir?"asc":"desc"));const i=e.endAt?new zv(e.endAt.position,!e.endAt.inclusive):null,s=e.startAt?new zv(e.startAt.position,!e.startAt.inclusive):null;e.C=yD(e.path,e.collectionGroup,t,e.filters,e.limit,i,s)}return e.C}function tE(n,e,t){return new kb(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wD(n,e){return CD(hp(n),hp(e))&&n.limitType===e.limitType}function SD(n){return`${vD(hp(n))}|lt:${n.limitType}`}function Rb(n){return`Query(target=${function CW(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${dw(i.value)}`;var i}).join(", ")}]`),Db(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>dw(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>dw(t)).join(",")),`Target(${e})`}(hp(n))}; limitType=${n.limitType})`}function xD(n,e){return e.isFoundDocument()&&function(t,i){const s=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):yi.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,i){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(t,i){for(const s of t.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(s,r,o){const a=qH(s,r,o);return s.inclusive?a<=0:a<0}(t.startAt,eE(t),i)||t.endAt&&!function(s,r,o){const a=qH(s,r,o);return s.inclusive?a>=0:a>0}(t.endAt,eE(t),i)));var t,i}function YH(n){return(e,t)=>{let i=!1;for(const s of eE(n)){const r=EW(s,e,t);if(0!==r)return r;i=i||s.field.isKeyField()}return 0}}function EW(n,e,t){const i=n.field.isKeyField()?yi.comparator(e.key,t.key):function(s,r,o){const a=r.data.field(s),l=o.data.field(s);return null!==a&&null!==l?cw(a,l):zi()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return zi()}}function ED(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hw(e)?"-0":e}}function tM(n){return{integerValue:""+n}}function iM(n,e){return Th(e)?tM(e):ED(n,e)}class iE{constructor(){this._=void 0}}function Zee(n,e,t){return n instanceof Uv?function(i,s){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&(r.fields.__previous_value__=s),{mapValue:r}}(t,e):n instanceof fw?_W(n,e):n instanceof mw?XH(n,e):function(i,s){const r=sE(i,s),o=QH(r)+QH(i.k);return $L(r)&&$L(i.k)?tM(o):ED(i.O,o)}(n,e)}function ZH(n,e,t){return n instanceof fw?_W(n,e):n instanceof mw?XH(n,e):t}function sE(n,e){return n instanceof Ab?$L(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class Uv extends iE{}class fw extends iE{constructor(e){super(),this.elements=e}}function _W(n,e){const t=IW(e);for(const i of n.elements)t.some(s=>vf(s,i))||t.push(i);return{arrayValue:{values:t}}}class mw extends iE{constructor(e){super(),this.elements=e}}function XH(n,e){let t=IW(e);for(const i of n.elements)t=t.filter(s=>!vf(s,i));return{arrayValue:{values:t}}}class Ab extends iE{constructor(e,t){super(),this.O=e,this.k=t}}function QH(n){return No(n.integerValue||n.doubleValue)}function IW(n){return uw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class nE{constructor(e,t){this.field=e,this.transform=t}}class TW{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _D(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class gw{}function DW(n,e,t){n instanceof rE?function(i,s,r){const o=i.value.clone(),a=JH(i.fieldTransforms,s,r.transformResults);o.setAll(a),s.convertToFoundDocument(r.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Lb?function(i,s,r){if(!_D(i.precondition,s))return void s.convertToUnknownDocument(r.version);const o=JH(i.fieldTransforms,s,r.transformResults),a=s.data;a.setAll(lM(i)),a.setAll(o),s.convertToFoundDocument(r.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nM(n,e,t){var s;n instanceof rE?function(i,s,r){if(!_D(i.precondition,s))return;const o=i.value.clone(),a=eV(i.fieldTransforms,r,s);o.setAll(a),s.convertToFoundDocument(aM(s),o).setHasLocalMutations()}(n,e,t):n instanceof Lb?function(i,s,r){if(!_D(i.precondition,s))return;const o=eV(i.fieldTransforms,r,s),a=s.data;a.setAll(lM(i)),a.setAll(o),s.convertToFoundDocument(aM(s),a).setHasLocalMutations()}(n,e,t):_D(n.precondition,s=e)&&s.convertToNoDocument(us.min())}function rM(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),r=sE(i.transform,s||null);null!=r&&(null==t&&(t=cc.empty()),t.set(i.field,r))}return t||null}function oM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Ov(t,i,(s,r)=>function sM(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof fw&&i instanceof fw||t instanceof mw&&i instanceof mw?Ov(t.elements,i.elements,vf):t instanceof Ab&&i instanceof Ab?vf(t.k,i.k):t instanceof Uv&&i instanceof Uv);var t,i}(s,r))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}function aM(n){return n.isFoundDocument()?n.version:us.min()}class rE extends gw{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}}class Lb extends gw{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}}function lM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function JH(n,e,t){const i=new Map;gs(n.length===t.length);for(let s=0;s<t.length;s++){const r=n[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,ZH(o,a,t[s]))}return i}function eV(n,e,t){const i=new Map;for(const s of n){const r=s.transform,o=t.data.field(s.field);i.set(s.field,Zee(r,o,e))}return i}class qv extends gw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Md extends gw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class kW{constructor(e){this.count=e}}var ol,Mn;function hM(n){switch(n){default:return zi();case rt.CANCELLED:case rt.UNKNOWN:case rt.DEADLINE_EXCEEDED:case rt.RESOURCE_EXHAUSTED:case rt.INTERNAL:case rt.UNAVAILABLE:case rt.UNAUTHENTICATED:return!1;case rt.INVALID_ARGUMENT:case rt.NOT_FOUND:case rt.ALREADY_EXISTS:case rt.PERMISSION_DENIED:case rt.FAILED_PRECONDITION:case rt.ABORTED:case rt.OUT_OF_RANGE:case rt.UNIMPLEMENTED:case rt.DATA_LOSS:return!0}}function tV(n){if(void 0===n)return Ha("GRPC error has no .code"),rt.UNKNOWN;switch(n){case ol.OK:return rt.OK;case ol.CANCELLED:return rt.CANCELLED;case ol.UNKNOWN:return rt.UNKNOWN;case ol.DEADLINE_EXCEEDED:return rt.DEADLINE_EXCEEDED;case ol.RESOURCE_EXHAUSTED:return rt.RESOURCE_EXHAUSTED;case ol.INTERNAL:return rt.INTERNAL;case ol.UNAVAILABLE:return rt.UNAVAILABLE;case ol.UNAUTHENTICATED:return rt.UNAUTHENTICATED;case ol.INVALID_ARGUMENT:return rt.INVALID_ARGUMENT;case ol.NOT_FOUND:return rt.NOT_FOUND;case ol.ALREADY_EXISTS:return rt.ALREADY_EXISTS;case ol.PERMISSION_DENIED:return rt.PERMISSION_DENIED;case ol.FAILED_PRECONDITION:return rt.FAILED_PRECONDITION;case ol.ABORTED:return rt.ABORTED;case ol.OUT_OF_RANGE:return rt.OUT_OF_RANGE;case ol.UNIMPLEMENTED:return rt.UNIMPLEMENTED;case ol.DATA_LOSS:return rt.DATA_LOSS;default:return zi()}}(Mn=ol||(ol={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";class va{constructor(e,t){this.comparator=e,this.root=t||sh.EMPTY}insert(e,t){return new va(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sh.BLACK,null,null))}remove(e){return new va(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(0===s)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oE(this.root,e,this.comparator,!1)}getReverseIterator(){return new oE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oE(this.root,e,this.comparator,!0)}}class oE{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sh{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=null!=i?i:sh.RED,this.left=null!=s?s:sh.EMPTY,this.right=null!=r?r:sh.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new sh(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):0===r?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return sh.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return sh.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw zi();const e=this.left.check();if(e!==this.right.check())throw zi();return e+(this.isRed()?0:1)}}sh.EMPTY=null,sh.RED=!0,sh.BLACK=!1,sh.EMPTY=new class{constructor(){this.size=0}get key(){throw zi()}get value(){throw zi()}get color(){throw zi()}get left(){throw zi()}get right(){throw zi()}copy(n,e,t,i,s){return this}insert(n,e,t){return new sh(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ho{constructor(e){this.comparator=e,this.data=new va(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cM(this.data.getIterator())}getIteratorFrom(e){return new cM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(0!==this.comparator(s,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ho(this.comparator);return t.data=e,t}}class cM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wv(n){return n.hasNext()?n.getNext():void 0}const RW=new va(yi.comparator);function Su(){return RW}const iV=new va(yi.comparator);function Gv(){return iV}const dM=new va(yi.comparator),sV=new Ho(yi.comparator);function sr(...n){let e=sV;for(const t of n)e=e.add(t);return e}const nV=new Ho(sn);function aE(){return nV}class lE{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,hE.createSynthesizedTargetChangeForCurrentChange(e,t)),new lE(us.min(),i,aE(),Su(),sr())}}class hE{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t){return new hE(Va.EMPTY_BYTE_STRING,t,sr(),sr(),sr())}}class uM{constructor(e,t,i,s){this.M=e,this.removedTargetIds=t,this.key=i,this.$=s}}class AW{constructor(e,t){this.targetId=e,this.F=t}}class pM{constructor(e,t,i=Va.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class rV{constructor(){this.B=0,this.L=MW(),this.U=Va.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=sr(),t=sr(),i=sr();return this.L.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:zi()}}),new hE(this.U,this.q,e,t,i)}J(){this.K=!1,this.L=MW()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class LW{constructor(e){this.nt=e,this.st=new Map,this.it=Su(),this.rt=oV(),this.ot=new Ho(sn)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const i=this.lt(t);switch(e.state){case 0:this.ft(t)&&i.W(e.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(e.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(t);break;case 3:this.ft(t)&&(i.et(),i.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),i.W(e.resumeToken));break;default:zi()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((i,s)=>{this.ft(s)&&t(s)})}_t(e){const t=e.targetId,i=e.F.count,s=this.wt(t);if(s){const r=s.target;if(Qx(r))if(0===i){const o=new yi(r.path);this.at(t,o,Bo.newNoDocument(o,us.min()))}else gs(1===i);else this.gt(t)!==i&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((r,o)=>{const a=this.wt(o);if(a){if(r.current&&Qx(a.target)){const l=new yi(a.target.path);null!==this.it.get(l)||this.It(o,l)||this.at(o,l,Bo.newNoDocument(l,e))}r.j&&(t.set(o,r.H()),r.J())}});let i=sr();this.rt.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const h=this.wt(l);return!h||2===h.purpose||(a=!1,!1)}),a&&(i=i.add(r))}),this.it.forEach((r,o)=>o.setReadTime(e));const s=new lE(e,t,this.ot,this.it,i);return this.it=Su(),this.rt=oV(),this.ot=new Ho(sn),s}ut(e,t){if(!this.ft(e))return;const i=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,i),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,i){if(!this.ft(e))return;const s=this.lt(e);this.It(e,t)?s.Y(t,1):s.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),i&&(this.it=this.it.insert(t,i))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new rV,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new Ho(sn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||qt("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new rV),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function oV(){return new va(yi.comparator)}function MW(){return new va(yi.comparator)}const Xee={asc:"ASCENDING",desc:"DESCENDING"},Qee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Jee{constructor(e,t){this.databaseId=e,this.N=t}}function ID(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aV(n,e){return n.N?e.toBase64():e.toUint8Array()}function TD(n,e){return ID(n,e.toTimestamp())}function Tl(n){return gs(!!n),us.fromTimestamp(function(e){const t=$m(e);return new _l(t.seconds,t.nanos)}(n))}function fM(n,e){return(t=n,new Ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mM(n){const e=Ln.fromString(n);return gs(bM(e)),e}function cp(n,e){return fM(n.databaseId,e.path)}function dp(n,e){const t=mM(e);if(t.get(1)!==n.databaseId.projectId)throw new Lt(rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Lt(rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new yi(kD(t))}function cE(n,e){return fM(n.databaseId,e)}function DD(n){const e=mM(n);return 4===e.length?Ln.emptyPath():kD(e)}function dE(n){return new Ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kD(n){return gs(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function RD(n,e,t){return{name:cp(n,e),fields:t.value.mapValue.fields}}function uE(n,e,t){const i=dp(n,e.name),s=Tl(e.updateTime),r=new cc({mapValue:{fields:e.fields}}),o=Bo.newFoundDocument(i,s,r);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function AD(n,e){let t;if(e instanceof rE)t={update:RD(n,e.key,e.value)};else if(e instanceof qv)t={delete:cp(n,e.key)};else if(e instanceof Lb)t={update:RD(n,e.key,e.data),updateMask:ite(e.fieldMask)};else{if(!(e instanceof Md))return zi();t={verify:cp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,r){const o=r.transform;if(o instanceof Uv)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof fw)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof mw)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ab)return{fieldPath:r.field.canonicalString(),increment:o.k};throw zi()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:TD(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:zi()),t;var s}function lV(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Wn.updateTime(Tl(s.updateTime)):void 0!==s.exists?Wn.exists(s.exists):Wn.none():Wn.none(),i=e.updateTransforms?e.updateTransforms.map(s=>function(r,o){let a=null;"setToServerValue"in o?(gs("REQUEST_TIME"===o.setToServerValue),a=new Uv):"appendMissingElements"in o?a=new fw(o.appendMissingElements.values||[]):"removeAllFromArray"in o?a=new mw(o.removeAllFromArray.values||[]):"increment"in o?a=new Ab(r,o.increment):zi();const l=Il.fromServerFormat(o.fieldPath);return new nE(l,a)}(n,s)):[];var s;if(e.update){const s=dp(n,e.update.name),r=new cc({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new aw((e.updateMask.fieldPaths||[]).map(h=>Il.fromServerFormat(h)));return new Lb(s,r,o,t,i)}return new rE(s,r,t,i)}if(e.delete){const s=dp(n,e.delete);return new qv(s,t)}if(e.verify){const s=dp(n,e.verify);return new Md(s,t)}return zi()}function cV(n,e){return{documents:[cE(n,e.path)]}}function dV(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=cE(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=cE(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(l){if(0===l.length)return;const h=l.map(c=>function(m){if("=="===m.op){if(YL(m.value))return{unaryFilter:{field:bw(m.field),op:"IS_NAN"}};if(KL(m.value))return{unaryFilter:{field:bw(m.field),op:"IS_NULL"}}}else if("!="===m.op){if(YL(m.value))return{unaryFilter:{field:bw(m.field),op:"IS_NOT_NAN"}};if(KL(m.value))return{unaryFilter:{field:bw(m.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bw(m.field),op:fV(m.op),value:m.value}}}(c));return 1===h.length?h[0]:{compositeFilter:{op:"AND",filters:h}}}(e.filters);s&&(t.structuredQuery.where=s);const r=function(l){if(0!==l.length)return l.map(h=>{return{field:bw((c=h).field),direction:pV(c.dir)};var c})}(e.orderBy);r&&(t.structuredQuery.orderBy=r);const o=(h=e.limit,n.N||Db(h)?h:{value:h});var h,a,l;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(l=e.endAt).inclusive,values:l.position}),t}function uV(n){let e=DD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){gs(1===i);const c=t.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let r=[];t.where&&(r=gM(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(c=>{return new jv(yw((m=c).field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction));var m}));let a=null;t.limit&&(a=function(c){let m;return m="object"==typeof c?c.value:c,Db(m)?null:m}(t.limit));let l=null;var c;t.startAt&&(l=new zv((c=t.startAt).values||[],!!c.before));let h=null;return t.endAt&&(h=function(c){return new zv(c.values||[],!c.before)}(t.endAt)),QL(e,s,o,r,a,"F",l,h)}function gM(n){return n?void 0!==n.unaryFilter?[LD(n)]:void 0!==n.fieldFilter?[mV(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>gM(e)).reduce((e,t)=>e.concat(t)):zi():[]}function pV(n){return Xee[n]}function fV(n){return Qee[n]}function bw(n){return{fieldPath:n.canonicalString()}}function yw(n){return Il.fromServerFormat(n.fieldPath)}function mV(n){return Dh.create(yw(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zi()}}(n.fieldFilter.op),n.fieldFilter.value)}function LD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=yw(n.unaryFilter.field);return Dh.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=yw(n.unaryFilter.field);return Dh.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=yw(n.unaryFilter.field);return Dh.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=yw(n.unaryFilter.field);return Dh.create(s,"!=",{nullValue:"NULL_VALUE"});default:return zi()}}function ite(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ca(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gV(e)),e=PW(n.get(t),e);return gV(e)}function PW(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const r=n.charAt(s);switch(r){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=r}}return t}function gV(n){return n+"\x01\x01"}function Cf(n){const e=n.length;if(gs(e>=2),2===e)return gs("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ln.emptyPath();const t=e-2,i=[];let s="";for(let r=0;r<e;){const o=n.indexOf("\x01",r);switch((o<0||o>t)&&zi(),n.charAt(o+1)){case"\x01":const a=n.substring(r,o);let l;0===s.length?l=a:(s+=a,l=s,s=""),i.push(l);break;case"\x10":s+=n.substring(r,o),s+="\0";break;case"\x11":s+=n.substring(r,o+1);break;default:zi()}r=o+2}return new Ln(i)}class FW{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class xu{constructor(e,t,i){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=i}}xu.store="owner",xu.key="owner";class Mb{constructor(e,t,i){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=i}}Mb.store="mutationQueues",Mb.keyPath="userId";class Yr{constructor(e,t,i,s,r){this.userId=e,this.batchId=t,this.localWriteTimeMs=i,this.baseMutations=s,this.mutations=r}}Yr.store="mutations",Yr.keyPath="batchId",Yr.userMutationsIndex="userMutationsIndex",Yr.userMutationsKeyPath=["userId","batchId"];class kh{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Ca(t)]}static key(e,t,i){return[e,Ca(t),i]}}kh.store="documentMutations",kh.PLACEHOLDER=new kh;class NW{constructor(e,t){this.path=e,this.readTime=t}}class BW{constructor(e,t){this.path=e,this.version=t}}class sa{constructor(e,t,i,s,r,o){this.unknownDocument=e,this.noDocument=t,this.document=i,this.hasCommittedMutations=s,this.readTime=r,this.parentPath=o}}sa.store="remoteDocuments",sa.readTimeIndex="readTimeIndex",sa.readTimeIndexPath="readTime",sa.collectionReadTimeIndex="collectionReadTimeIndex",sa.collectionReadTimeIndexPath=["parentPath","readTime"];class wf{constructor(e){this.byteSize=e}}wf.store="remoteDocumentGlobal",wf.key="remoteDocumentGlobalKey";class Xc{constructor(e,t,i,s,r,o,a){this.targetId=e,this.canonicalId=t,this.readTime=i,this.resumeToken=s,this.lastListenSequenceNumber=r,this.lastLimboFreeSnapshotVersion=o,this.query=a}}Xc.store="targets",Xc.keyPath="targetId",Xc.queryTargetsIndexName="queryTargetsIndex",Xc.queryTargetsKeyPath=["canonicalId","targetId"];class Rh{constructor(e,t,i){this.targetId=e,this.path=t,this.sequenceNumber=i}}Rh.store="targetDocuments",Rh.keyPath=["targetId","path"],Rh.documentTargetsIndex="documentTargetsIndex",Rh.documentTargetsKeyPath=["path","targetId"];class Eu{constructor(e,t,i,s){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=i,this.targetCount=s}}Eu.key="targetGlobalKey",Eu.store="targetGlobal";class vw{constructor(e,t){this.collectionId=e,this.parent=t}}vw.store="collectionParents",vw.keyPath=["collectionId","parent"];class Ob{constructor(e,t,i,s){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=i,this.inForeground=s}}Ob.store="clientMetadata",Ob.keyPath="clientId";class pE{constructor(e,t,i){this.bundleId=e,this.createTime=t,this.version=i}}pE.store="bundles",pE.keyPath="bundleId";class Cw{constructor(e,t,i){this.name=e,this.readTime=t,this.bundledQuery=i}}Cw.store="namedQueries",Cw.keyPath="name";class _u{constructor(e,t,i){this.indexId=e,this.collectionGroup=t,this.fields=i}}_u.store="indexConfiguration",_u.keyPath="indexId",_u.collectionGroupIndex="collectionGroupIndex",_u.collectionGroupIndexPath="collectionGroup";class up{constructor(e,t,i,s,r,o){this.indexId=e,this.uid=t,this.sequenceNumber=i,this.readTime=s,this.documentKey=r,this.largestBatchId=o}}up.store="indexState",up.keyPath=["indexId","uid"],up.sequenceNumberIndex="sequenceNumberIndex",up.sequenceNumberIndexPath=["uid","sequenceNumber"];class pp{constructor(e,t,i,s,r){this.indexId=e,this.uid=t,this.arrayValue=i,this.directionalValue=s,this.documentKey=r}}pp.store="indexEntries",pp.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],pp.documentKeyIndex="documentKeyIndex",pp.documentKeyIndexPath=["indexId","uid","documentKey"];class nh{constructor(e,t,i,s,r,o){this.userId=e,this.collectionPath=t,this.documentId=i,this.collectionGroup=s,this.largestBatchId=r,this.overlayMutation=o}}nh.store="documentOverlays",nh.keyPath=["userId","collectionPath","documentId"],nh.collectionPathOverlayIndex="collectionPathOverlayIndex",nh.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],nh.collectionGroupOverlayIndex="collectionGroupOverlayIndex",nh.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const u=[Mb.store,Yr.store,kh.store,sa.store,Xc.store,xu.store,Eu.store,Rh.store,Ob.store,wf.store,vw.store,pE.store,Cw.store],p=[...u,nh.store],g=[...p,_u.store,up.store,pp.store],y="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class S{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new S((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof S?t:S.resolve(t)}catch(t){return S.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):S.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):S.reject(t)}static resolve(e){return new S((t,i)=>{t(e)})}static reject(e){return new S((t,i)=>{i(e)})}static waitFor(e){return new S((t,i)=>{let s=0,r=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&t()},l=>i(l))}),o=!0,r===s&&t()})}static or(e){let t=S.resolve(!1);for(const i of e)t=t.next(s=>s?S.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,r)=>{i.push(t.call(this,s,r))}),this.waitFor(i)}}class T{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Cr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new j(e,t.error)):this.At.resolve()},this.transaction.onerror=i=>{const s=ft(i.target.error);this.At.reject(new j(e,s))}}static open(e,t,i,s){try{return new T(t,e.transaction(s,i))}catch(r){throw new j(t,r)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(qt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new re(t)}}class A{constructor(e,t,i){this.name=e,this.version=t,this.bt=i,12.2===A.vt((0,ee.z$)())&&Ha("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qt("SimpleDb","Removing database:",e),fe(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,ee.hl)())return!1;if(A.St())return!0;const e=(0,ee.z$)(),t=A.vt(e),i=0<t&&t<10,s=A.Dt(e),r=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||r)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}xt(e){var t=this;return(0,dt.Z)(function*(){return t.db||(qt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,s)=>{const r=indexedDB.open(t.name,t.version);r.onsuccess=o=>{i(o.target.result)},r.onblocked=()=>{s(new j(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{const a=o.target.error;s("VersionError"===a.name?new Lt(rt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Lt(rt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new j(e,a))},r.onupgradeneeded=o=>{qt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.bt.kt(o.target.result,r.transaction,o.oldVersion,t.version).next(()=>{qt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=i=>t.Ot(i)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,s){var r=this;return(0,dt.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{r.db=yield r.xt(e);const l=T.open(r.db,e,o?"readonly":"readwrite",i),h=s(l).next(c=>(l.Pt(),c)).catch(c=>(l.abort(c),S.reject(c))).toPromise();return h.catch(()=>{}),yield l.Rt,h}catch(l){const h="FirebaseError"!==l.name&&a<3;if(qt("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),r.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class O{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return fe(this.$t.delete())}}class j extends Lt{constructor(e,t){super(rt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function K(n){return"IndexedDbTransactionError"===n.name}class re{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(qt("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(qt("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),fe(i)}add(e){return qt("SimpleDb","ADD",this.store.name,e,e),fe(this.store.add(e))}get(e){return fe(this.store.get(e)).next(t=>(void 0===t&&(t=null),qt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return qt("SimpleDb","DELETE",this.store.name,e),fe(this.store.delete(e))}count(){return qt("SimpleDb","COUNT",this.store.name),fe(this.store.count())}qt(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const s=this.cursor(i),r=[];return this.Kt(s,(o,a)=>{r.push(a)}).next(()=>r)}{const s=this.store.getAll(i.range);return new S((r,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{r(a.target.result)}})}}Gt(e,t){qt("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.jt=!1;const s=this.cursor(i);return this.Kt(s,(r,o,a)=>a.delete())}Qt(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.Kt(s,t)}Wt(e){const t=this.cursor({});return new S((i,s)=>{t.onerror=r=>{const o=ft(r.target.error);s(o)},t.onsuccess=r=>{const o=r.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}Kt(e,t){const i=[];return new S((s,r)=>{e.onerror=o=>{r(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new O(a),h=t(a.primaryKey,a.value,l);if(h instanceof S){const c=h.catch(m=>(l.done(),S.reject(m)));i.push(c)}l.isDone?s():null===l.Lt?a.continue():a.continue(l.Lt)}}).next(()=>S.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.jt?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fe(n){return new S((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const s=ft(i.target.error);t(s)}})}let Oe=!1;function ft(n){const e=A.vt((0,ee.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Lt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Oe||(Oe=!0,setTimeout(()=>{throw i},0)),i}}return n}class jt extends C{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function Vt(n,e){const t=ti(n);return A.Nt(t.zt,e)}class _i{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&DW(r,e,i[s])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&nM(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&nM(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const i=e.get(t.key),s=i;this.applyToLocalView(s),i.isValidDocument()||s.convertToNoDocument(us.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sr())}isEqual(e){return this.batchId===e.batchId&&Ov(this.mutations,e.mutations,(t,i)=>oM(t,i))&&Ov(this.baseMutations,e.baseMutations,(t,i)=>oM(t,i))}}class It{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){gs(e.mutations.length===i.length);let s=dM;const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new It(e,t,i,s)}}class Zi{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ks{constructor(e,t,i,s,r=us.min(),o=us.min(),a=Va.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Xn{constructor(e){this.Ht=e}}function Qc(n,e){let t;if(e.document)t=uE(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=yi.fromSegments(e.noDocument.path),s=Zm(e.noDocument.readTime);t=Bo.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return zi();{const i=yi.fromSegments(e.unknownDocument.path),s=Zm(e.unknownDocument.version);t=Bo.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime(mE(e.readTime)),t}function Pb(n,e){const t=fE(e.readTime),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const s={name:cp(o=n.Ht,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:ID(o,a.version.toTimestamp())};return new sa(null,null,s,e.hasCommittedMutations,t,i)}var o,a;if(e.isNoDocument()){const s=e.key.path.toArray(),r=Ym(e.version),o=e.hasCommittedMutations;return new sa(null,new NW(s,r),null,o,t,i)}if(e.isUnknownDocument()){const s=e.key.path.toArray(),r=Ym(e.version);return new sa(new BW(s,r),null,null,!0,t,i)}return zi()}function fE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function mE(n){const e=new _l(n[0],n[1]);return us.fromTimestamp(e)}function Ym(n){const e=n.toTimestamp();return new FW(e.seconds,e.nanoseconds)}function Zm(n){const e=new _l(n.seconds,n.nanoseconds);return us.fromTimestamp(e)}function Fb(n,e){const t=(e.baseMutations||[]).map(r=>lV(n.Ht,r));for(let r=0;r<e.mutations.length-1;++r){const o=e.mutations[r];r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(o.updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r)}const i=e.mutations.map(r=>lV(n.Ht,r)),s=_l.fromMillis(e.localWriteTimeMs);return new _i(e.batchId,s,t,i)}function $v(n){const e=Zm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Zm(n.lastLimboFreeSnapshotVersion):us.min();let i;var s;return void 0!==n.query.documents?(gs(1===(s=n.query).documents.length),i=hp(Jx(DD(s.documents[0])))):i=hp(uV(n.query)),new ks(i,n.targetId,0,n.lastListenSequenceNumber,e,t,Va.fromBase64String(n.resumeToken))}function MD(n,e){const t=Ym(e.snapshotVersion),i=Ym(e.lastLimboFreeSnapshotVersion);let s;s=Qx(e.target)?cV(n.Ht,e.target):dV(n.Ht,e.target);const r=e.resumeToken.toBase64();return new Xc(e.targetId,vD(e.target),t,r,e.sequenceNumber,i,s)}function gE(n){const e=uV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tE(e,e.limit,"L"):e}function bE(n,e){return new Zi(e.largestBatchId,lV(n.Ht,e.overlayMutation))}function ste(n,e){const t=e.path.lastSegment();return[n,Ca(e.path.popLast()),t]}class hCe{getBundleMetadata(e,t){return nte(e).get(t).next(i=>{if(i)return{id:(s=i).bundleId,createTime:Zm(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return nte(e).put({bundleId:(i=t).id,createTime:Ym(Tl(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return rte(e).get(t).next(i=>{if(i)return{name:(s=i).name,query:gE(s.bundledQuery),readTime:Zm(s.readTime)};var s})}saveNamedQuery(e,t){return rte(e).put({name:(i=t).name,readTime:Ym(Tl(i.readTime)),bundledQuery:i.bundledQuery});var i}}function nte(n){return Vt(n,pE.store)}function rte(n){return Vt(n,Cw.store)}class HW{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new HW(e,t.uid||"")}getOverlay(e,t){return yM(e).get(ste(this.userId,t)).next(i=>i?bE(this.O,i):null)}saveOverlays(e,t,i){const s=[];return i.forEach(r=>{const o=new Zi(t,r);s.push(this.Yt(e,o))}),S.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach(o=>s.add(Ca(o.getCollectionPath())));const r=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);r.push(yM(e).Gt(nh.collectionPathOverlayIndex,a))}),S.waitFor(r)}getOverlaysForCollection(e,t,i){const s=new Map,r=Ca(t),o=IDBKeyRange.bound([this.userId,r,i],[this.userId,r,Number.POSITIVE_INFINITY],!0);return yM(e).qt(nh.collectionPathOverlayIndex,o).next(a=>{for(const l of a){const h=bE(this.O,l);s.set(h.getKey(),h)}return s})}getOverlaysForCollectionGroup(e,t,i,s){const r=new Map;let o;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yM(e).Qt({index:nh.collectionGroupOverlayIndex,range:a},(l,h,c)=>{const m=bE(this.O,h);r.size<s||m.largestBatchId===o?(r.set(m.getKey(),m),o=m.largestBatchId):c.done()}).next(()=>r)}Yt(e,t){return yM(e).put(function(i,s,r){const[o,a,l]=ste(s,r.mutation.key);return new nh(s,a,l,r.mutation.key.getCollectionGroup(),r.largestBatchId,AD(i.Ht,r.mutation))}(this.O,this.userId,t))}}function yM(n){return Vt(n,nh.store)}class bV{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(No(e.integerValue));else if("doubleValue"in e){const i=No(e.doubleValue);isNaN(i)?this.ee(t,13):(this.ee(t,15),hw(i)?t.ne(0):t.ne(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ee(t,20),"string"==typeof i?t.se(i):(t.se(`${i.seconds||""}`),t.ne(i.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(Tb(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ee(t,45),t.ne(i.latitude||0),t.ne(i.longitude||0)}else"mapValue"in e?vf(e,vW)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):zi()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const i=e.fields||{};this.ee(t,55);for(const s of Object.keys(i))this.ie(s,t),this.Zt(i[s],t)}ae(e,t){const i=e.values||[];this.ee(t,50);for(const s of i)this.Zt(s,t)}ce(e,t){this.ee(t,37),yi.fromName(e).path.forEach(i=>{this.ee(t,60),this.he(i,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function cCe(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function ote(n){const e=64-function(t){let i=0;for(let s=0;s<8;++s){const r=cCe(255&t[s]);if(i+=r,8!==r)break}return i}(n);return Math.ceil(e/8)}bV.le=new bV;class dCe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.de(i.value),i=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.me(i.value),i=t.next();this.ge()}ye(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.de(i);else if(i<2048)this.de(960|i>>>6),this.de(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.de(480|i>>>12),this.de(128|63&i>>>6),this.de(128|63&i);else{const s=t.codePointAt(0);this.de(240|s>>>18),this.de(128|63&s>>>12),this.de(128|63&s>>>6),this.de(128|63&s)}}this._e()}pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.me(i);else if(i<2048)this.me(960|i>>>6),this.me(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.me(480|i>>>12),this.me(128|63&i>>>6),this.me(128|63&i);else{const s=t.codePointAt(0);this.me(240|s>>>18),this.me(128|63&s>>>12),this.me(128|63&s>>>6),this.me(128|63&s)}}this.ge()}Ie(e){const t=this.Ee(e),i=ote(t);this.Te(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ae(e){const t=this.Ee(e),i=ote(t);this.Te(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(s){const r=new DataView(new ArrayBuffer(8));return r.setFloat64(0,s,!1),new Uint8Array(r.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class uCe{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class pCe{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class ate{constructor(){this.Se=new dCe,this.De=new uCe(this.Se),this.Ce=new pCe(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class VW{constructor(e,t,i,s){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=s}}function zW(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=yi.comparator(n.documentKey,e.documentKey),0!==t?t:(t=lte(n.arrayValue,e.arrayValue),0!==t?t:lte(n.directionalValue,e.directionalValue)))}function lte(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class fCe{constructor(){this.xe=new jW}addToCollectionParentIndex(e,t){return this.xe.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t,i){return S.resolve(sr())}getFieldIndex(e,t){return S.resolve(null)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}updateCollectionGroup(e,t,i){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}}class jW{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Ho(Ln.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ho(Ln.comparator)).toArray()}}class mCe{constructor(e){this.user=e,this.ke=new jW,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const r={collectionId:i,parent:Ca(s)};return hte(e).put(r)}return S.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[PH(t),""],!1,!0);return hte(e).qt(s).next(r=>{for(const o of r){if(o.collectionId!==t)break;i.push(Cf(o.parent))}return i})}addFieldIndex(e,t){const i=vV(e),s=new _u((r=t).indexId,r.collectionGroup,r.fields.map(o=>[o.fieldPath.canonicalString(),o.kind]));var r;return delete s.indexId,i.add(s).next()}deleteFieldIndex(e,t){const i=vV(e),s=CV(e),r=yV(e);return i.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,i){return S.resolve(sr())}getFieldIndex(e,t){return S.resolve(null)}Oe(e,t){const i=new ate;for(const s of e.fields.filter(o=>2!==o.kind)){const r=t.data.field(s.fieldPath);if(null==r)return null;const o=i.Ne(s.kind);bV.le.Xt(r,o)}return i.Ve()}Me(e){const t=new ate;return bV.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const i=vV(e),s=CV(e);return(t?i.qt(_u.collectionGroupIndex,IDBKeyRange.bound(t,t)):i.qt()).next(r=>{const o=[];return S.forEach(r,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(h,c){const m=c?new pw(c.sequenceNumber,new bD(Zm(c.readTime),new yi(Cf(c.documentKey)),c.largestBatchId)):pw.empty(),b=h.fields.map(([v,w])=>new Vv(Il.fromServerFormat(v),w));return new gD(h.indexId,h.collectionGroup,b,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,s)=>i.indexState.sequenceNumber-s.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const s=vV(e),r=CV(e);return this.$e(e).next(o=>s.qt(_u.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,l=>{return r.put(new up(l.indexId,this.user.uid||"",o,Ym((b=i).readTime),Ca(b.documentKey.path),b.largestBatchId));var b})))}updateIndexEntries(e,t){const i=new Map;return S.forEach(t,(s,r)=>{const o=i.get(s.collectionGroup);return(o?S.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(i.set(s.collectionGroup,a),S.forEach(a,l=>this.Fe(e,s,l).next(h=>{const c=this.Be(r,l);return h.isEqual(c)?S.resolve():this.Le(e,r,h,c)}))))})}Ue(e,t,i){return yV(e).put(new pp(i.indexId,this.uid,i.arrayValue,i.directionalValue,Ca(t.key.path)))}qe(e,t,i){return yV(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,Ca(t.key.path)])}Fe(e,t,i){const s=yV(e);let r=new Ho(zW);return s.Qt({index:pp.documentKeyIndex,range:IDBKeyRange.only([i.indexId,this.uid,Ca(t.path)])},(o,a)=>{r=r.add(new VW(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>r)}Be(e,t){let i=new Ho(zW);const s=this.Oe(t,e);if(null==s)return i;const r=t.fields.find(a=>2===a.kind);if(null!=r){const o=e.data.field(r.fieldPath);if(uw(o))for(const a of o.arrayValue.values||[])i=i.add(new VW(t.indexId,e.key,this.Me(a),s))}else i=i.add(new VW(t.indexId,e.key,new Uint8Array,s));return i}Le(e,t,i,s){qt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const r=[];return function(o,a,l,h,c){const m=o.getIterator(),b=a.getIterator();let v=Wv(m),w=Wv(b);for(;v||w;){let E=!1,D=!1;if(v&&w){const L=l(v,w);L<0?D=!0:L>0&&(E=!0)}else null!=v?D=!0:E=!0;E?(h(w),w=Wv(b)):D?(c(v),v=Wv(m)):(v=Wv(m),w=Wv(b))}}(i,s,zW,o=>{r.push(this.Ue(e,t,o))},o=>{r.push(this.qe(e,t,o))}),S.waitFor(r)}$e(e){let t=1;return CV(e).Qt({index:up.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,s,r)=>{r.done(),t=s.sequenceNumber+1}).next(()=>t)}}function hte(n){return Vt(n,vw.store)}function yV(n){return Vt(n,pp.store)}function vV(n){return Vt(n,_u.store)}function CV(n){return Vt(n,up.store)}const cte={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Iu{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Iu(e,Iu.DEFAULT_COLLECTION_PERCENTILE,Iu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dte(n,e,t){const i=n.store(Yr.store),s=n.store(kh.store),r=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=i.Qt({range:o},(c,m,b)=>(a++,b.delete()));r.push(l.next(()=>{gs(1===a)}));const h=[];for(const c of t.mutations){const m=kh.key(e,c.key.path,t.batchId);r.push(s.delete(m)),h.push(c.key)}return S.waitFor(r).next(()=>h)}function wV(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw zi();e=n.noDocument}return JSON.stringify(e).length}Iu.DEFAULT_COLLECTION_PERCENTILE=10,Iu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Iu.DEFAULT=new Iu(41943040,Iu.DEFAULT_COLLECTION_PERCENTILE,Iu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Iu.DISABLED=new Iu(-1,0,0);class UW{constructor(e,t,i,s){this.userId=e,this.O=t,this.indexManager=i,this.referenceDelegate=s,this.Ke={}}static Jt(e,t,i,s){gs(""!==e.uid);const r=e.isAuthenticated()?e.uid:"";return new UW(r,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ww(e).Qt({index:Yr.userMutationsIndex,range:i},(s,r,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,s){const r=OD(e),o=ww(e);return o.add({}).next(a=>{gs("number"==typeof a);const l=new _i(a,t,i,s),h=function(b,v,w){const E=w.baseMutations.map(L=>AD(b.Ht,L)),D=w.mutations.map(L=>AD(b.Ht,L));return new Yr(v,w.batchId,w.localWriteTime.toMillis(),E,D)}(this.O,this.userId,l),c=[];let m=new Ho((b,v)=>sn(b.canonicalString(),v.canonicalString()));for(const b of s){const v=kh.key(this.userId,b.key.path,a);m=m.add(b.key.path.popLast()),c.push(o.put(h)),c.push(r.put(v,kh.PLACEHOLDER))}return m.forEach(b=>{c.push(this.indexManager.addToCollectionParentIndex(e,b))}),e.addOnCommittedListener(()=>{this.Ke[a]=l.keys()}),S.waitFor(c).next(()=>l)})}lookupMutationBatch(e,t){return ww(e).get(t).next(i=>i?(gs(i.userId===this.userId),Fb(this.O,i)):null)}Ge(e,t){return this.Ke[t]?S.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const s=i.keys();return this.Ke[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let r=null;return ww(e).Qt({index:Yr.userMutationsIndex,range:s},(o,a,l)=>{a.userId===this.userId&&(gs(a.batchId>=i),r=Fb(this.O,a)),l.done()}).next(()=>r)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ww(e).Qt({index:Yr.userMutationsIndex,range:t,reverse:!0},(s,r,o)=>{i=r.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ww(e).qt(Yr.userMutationsIndex,t).next(i=>i.map(s=>Fb(this.O,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=kh.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),r=[];return OD(e).Qt({range:s},(o,a,l)=>{const[h,c,m]=o,b=Cf(c);if(h===this.userId&&t.path.isEqual(b))return ww(e).get(m).next(v=>{if(!v)throw zi();gs(v.userId===this.userId),r.push(Fb(this.O,v))});l.done()}).next(()=>r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ho(sn);const s=[];return t.forEach(r=>{const o=kh.prefixForPath(this.userId,r.path),a=IDBKeyRange.lowerBound(o),l=OD(e).Qt({range:a},(h,c,m)=>{const[b,v,w]=h,E=Cf(v);b===this.userId&&r.path.isEqual(E)?i=i.add(w):m.done()});s.push(l)}),S.waitFor(s).next(()=>this.je(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,r=kh.prefixForPath(this.userId,i),o=IDBKeyRange.lowerBound(r);let a=new Ho(sn);return OD(e).Qt({range:o},(l,h,c)=>{const[m,b,v]=l,w=Cf(b);m===this.userId&&i.isPrefixOf(w)?w.length===s&&(a=a.add(v)):c.done()}).next(()=>this.je(e,a))}je(e,t){const i=[],s=[];return t.forEach(r=>{s.push(ww(e).get(r).next(o=>{if(null===o)throw zi();gs(o.userId===this.userId),i.push(Fb(this.O,o))}))}),S.waitFor(s).next(()=>i)}removeMutationBatch(e,t){return dte(e.zt,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),S.forEach(i,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();const i=IDBKeyRange.lowerBound(kh.prefixForUser(this.userId)),s=[];return OD(e).Qt({range:i},(r,o,a)=>{if(r[0]===this.userId){const l=Cf(r[1]);s.push(l)}else a.done()}).next(()=>{gs(0===s.length)})})}containsKey(e,t){return ute(e,this.userId,t)}We(e){return pte(e).get(this.userId).next(t=>t||new Mb(this.userId,-1,""))}}function ute(n,e,t){const i=kh.prefixForPath(e,t.path),s=i[1],r=IDBKeyRange.lowerBound(i);let o=!1;return OD(n).Qt({range:r,jt:!0},(a,l,h)=>{const[c,m,b]=a;c===e&&m===s&&(o=!0),h.done()}).next(()=>o)}function ww(n){return Vt(n,Yr.store)}function OD(n){return Vt(n,kh.store)}function pte(n){return Vt(n,Mb.store)}class yE{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new yE(0)}static Je(){return new yE(-1)}}class gCe{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const i=new yE(t.highestTargetId);return t.highestTargetId=i.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>us.fromTimestamp(new _l(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Ye(e).next(s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Xe(e,s)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(i=>(i.targetCount+=1,this.tn(t,i),this.Xe(e,i))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>PD(e).delete(t.targetId)).next(()=>this.Ye(e)).next(i=>(gs(i.targetCount>0),i.targetCount-=1,this.Xe(e,i)))}removeTargets(e,t,i){let s=0;const r=[];return PD(e).Qt((o,a)=>{const l=$v(a);l.sequenceNumber<=t&&null===i.get(l.targetId)&&(s++,r.push(this.removeTargetData(e,l)))}).next(()=>S.waitFor(r)).next(()=>s)}forEachTarget(e,t){return PD(e).Qt((i,s)=>{const r=$v(s);t(r)})}Ye(e){return fte(e).get(Eu.key).next(t=>(gs(null!==t),t))}Xe(e,t){return fte(e).put(Eu.key,t)}Ze(e,t){return PD(e).put(MD(this.O,t))}tn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const i=vD(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let r=null;return PD(e).Qt({range:s,index:Xc.queryTargetsIndexName},(o,a,l)=>{const h=$v(a);CD(t,h.target)&&(r=h,l.done())}).next(()=>r)}addMatchingKeys(e,t,i){const s=[],r=Sw(e);return t.forEach(o=>{const a=Ca(o.path);s.push(r.put(new Rh(i,a))),s.push(this.referenceDelegate.addReference(e,i,o))}),S.waitFor(s)}removeMatchingKeys(e,t,i){const s=Sw(e);return S.forEach(t,r=>{const o=Ca(r.path);return S.waitFor([s.delete([i,o]),this.referenceDelegate.removeReference(e,i,r)])})}removeMatchingKeysForTargetId(e,t){const i=Sw(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=Sw(e);let r=sr();return s.Qt({range:i,jt:!0},(o,a,l)=>{const h=Cf(o[1]),c=new yi(h);r=r.add(c)}).next(()=>r)}containsKey(e,t){const i=Ca(t.path),s=IDBKeyRange.bound([i],[PH(i)],!1,!0);let r=0;return Sw(e).Qt({index:Rh.documentTargetsIndex,jt:!0,range:s},([o,a],l,h)=>{0!==o&&(r++,h.done())}).next(()=>r>0)}Tt(e,t){return PD(e).get(t).next(i=>i?$v(i):null)}}function PD(n){return Vt(n,Xc.store)}function fte(n){return Vt(n,Eu.store)}function Sw(n){return Vt(n,Rh.store)}function vE(n){return qW.apply(this,arguments)}function qW(){return qW=(0,dt.Z)(function*(n){if(n.code!==rt.FAILED_PRECONDITION||n.message!==y)throw n;qt("LocalStore","Unexpectedly lost primary lease")}),qW.apply(this,arguments)}function mte([n,e],[t,i]){const s=sn(n,t);return 0===s?sn(e,i):s}class bCe{constructor(e){this.en=e,this.buffer=new Ho(mte),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();mte(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yCe{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const i=this.on?3e5:6e4;qt("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,dt.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(s){K(s)?qt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield vE(s)}yield t.un(e)}))}}class vCe{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return S.resolve(Ld.A);const i=new bCe(t);return this.an.forEachTarget(e,s=>i.rn(s.sequenceNumber)).next(()=>this.an.ln(e,s=>i.rn(s))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.an.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qt("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(cte)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(qt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cte):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let i,s,r,o,a,l,h;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(qt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(i=m,a=Date.now(),this.removeTargets(e,i,t))).next(m=>(r=m,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(m=>(h=Date.now(),lD()<=Rd.in.DEBUG&&qt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-c}ms\n\tDetermined least recently used ${s} in `+(a-o)+`ms\n\tRemoved ${r} targets in `+(l-a)+`ms\n\tRemoved ${m} documents in `+(h-l)+`ms\nTotal Duration: ${h-c}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:m})))}}class CCe{constructor(e,t){this.db=e,this.garbageCollector=new vCe(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}dn(e){let t=0;return this.ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(i,s)=>t(s))}addReference(e,t,i){return SV(e,i)}removeReference(e,t,i){return SV(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return SV(e,t)}wn(e,t){return function(i,s){let r=!1;return pte(i).Wt(o=>ute(i,o,s).next(a=>(a&&(r=!0),S.resolve(!a)))).next(()=>r)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let r=0;return this._n(e,(o,a)=>{if(a<=t){const l=this.wn(e,o).next(h=>{if(!h)return r++,i.getEntry(e,o).next(()=>(i.removeEntry(o,us.min()),Sw(e).delete([0,Ca(o.path)])))});s.push(l)}}).next(()=>S.waitFor(s)).next(()=>i.apply(e)).next(()=>r)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return SV(e,t)}_n(e,t){const i=Sw(e);let s,r=Ld.A;return i.Qt({index:Rh.documentTargetsIndex},([o,a],{path:l,sequenceNumber:h})=>{0===o?(r!==Ld.A&&t(new yi(Cf(s)),r),r=h,s=l):r=Ld.A}).next(()=>{r!==Ld.A&&t(new yi(Cf(s)),r)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function SV(n,e){return Sw(n).put((i=n.currentSequenceNumber,new Rh(0,Ca(e.path),i)));var i}class FD{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[s,r]of i)if(this.equalsFn(s,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(void 0!==s){for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t])}else this.inner[i]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return 1===i.length?delete this.inner[t]:i.splice(s,1),!0;return!1}forEach(e){Gm(this.inner,(t,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return WL(this.inner)}}class gte{constructor(){this.changes=new FD(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bo.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?S.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wCe{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return xw(e).put(xV(t),i)}removeEntry(e,t){const i=xw(e),s=xV(t);return i.delete(s)}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.mn(e,i)))}getEntry(e,t){return xw(e).get(xV(t)).next(i=>this.gn(t,i))}yn(e,t){return xw(e).get(xV(t)).next(i=>({document:this.gn(t,i),size:wV(i)}))}getEntries(e,t){let i=Su();return this.pn(e,t,(s,r)=>{const o=this.gn(s,r);i=i.insert(s,o)}).next(()=>i)}In(e,t){let i=Su(),s=new va(yi.comparator);return this.pn(e,t,(r,o)=>{const a=this.gn(r,o);i=i.insert(r,a),s=s.insert(r,wV(o))}).next(()=>({documents:i,En:s}))}pn(e,t,i){if(t.isEmpty())return S.resolve();const s=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),r=t.getIterator();let o=r.getNext();return xw(e).Qt({range:s},(a,l,h)=>{const c=yi.fromSegments(a);for(;o&&yi.comparator(o,c)<0;)i(o,null),o=r.getNext();o&&o.isEqual(c)&&(i(o,l),o=r.hasNext()?r.getNext():null),o?h.Ut(o.path.toArray()):h.done()}).next(()=>{for(;o;)i(o,null),o=r.hasNext()?r.getNext():null})}getAll(e,t,i){let s=Su();const r=t.length+1,o={};if(i.isEqual(us.min())){const a=t.toArray();o.range=IDBKeyRange.lowerBound(a)}else{const a=t.toArray(),l=fE(i);o.range=IDBKeyRange.lowerBound([a,l],!0),o.index=sa.collectionReadTimeIndex}return xw(e).Qt(o,(a,l,h)=>{if(a.length!==r)return;const c=this.gn(yi.fromSegments(a),l);t.isPrefixOf(c.key.path)?s=s.insert(c.key,c):h.done()}).next(()=>s)}newChangeBuffer(e){return new SCe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bte(e).get(wf.key).next(t=>(gs(!!t),t))}mn(e,t){return bte(e).put(wf.key,t)}gn(e,t){if(t){const i=Qc(this.O,t);if(!i.isNoDocument()||!i.version.isEqual(us.min()))return i}return Bo.newInvalidDocument(e)}}class SCe extends gte{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new FD(i=>i.toString(),(i,s)=>i.isEqual(s))}applyChanges(e){const t=[];let i=0,s=new Ho((r,o)=>sn(r.canonicalString(),o.canonicalString()));return this.changes.forEach((r,o)=>{const a=this.An.get(r);if(o.isValidDocument()){const l=Pb(this.Tn.O,o);s=s.add(r.path.popLast()),i+=wV(l)-a,t.push(this.Tn.addEntry(e,r,l))}else if(i-=a,this.trackRemovals){const l=Pb(this.Tn.O,o.convertToNoDocument(us.min()));t.push(this.Tn.addEntry(e,r,l))}else t.push(this.Tn.removeEntry(e,r))}),s.forEach(r=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,r))}),t.push(this.Tn.updateMetadata(e,i)),S.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(i=>(this.An.set(t,i.size),i.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:i,En:s})=>(s.forEach((r,o)=>{this.An.set(r,o)}),i))}}function bte(n){return Vt(n,wf.store)}function xw(n){return Vt(n,sa.store)}function xV(n){return n.path.toArray()}class xCe{constructor(e){this.O=e}kt(e,t,i,s){const r=new T("createOrUpgrade",t);var a;i<1&&s>=1&&(e.createObjectStore(xu.store),(a=e).createObjectStore(Mb.store,{keyPath:Mb.keyPath}),a.createObjectStore(Yr.store,{keyPath:Yr.keyPath,autoIncrement:!0}).createIndex(Yr.userMutationsIndex,Yr.userMutationsKeyPath,{unique:!0}),a.createObjectStore(kh.store),yte(e),function(a){a.createObjectStore(sa.store)}(e));let o=S.resolve();return i<3&&s>=3&&(0!==i&&(function(a){a.deleteObjectStore(Rh.store),a.deleteObjectStore(Xc.store),a.deleteObjectStore(Eu.store)}(e),yte(e)),o=o.next(()=>function(a){const l=a.store(Eu.store),h=new Eu(0,0,us.min().toTimestamp(),0);return l.put(Eu.key,h)}(r))),i<4&&s>=4&&(0!==i&&(o=o.next(()=>function(a,l){return l.store(Yr.store).qt().next(h=>{a.deleteObjectStore(Yr.store),a.createObjectStore(Yr.store,{keyPath:Yr.keyPath,autoIncrement:!0}).createIndex(Yr.userMutationsIndex,Yr.userMutationsKeyPath,{unique:!0});const c=l.store(Yr.store),m=h.map(b=>c.put(b));return S.waitFor(m)})}(e,r))),o=o.next(()=>{!function(a){a.createObjectStore(Ob.store,{keyPath:Ob.keyPath})}(e)})),i<5&&s>=5&&(o=o.next(()=>this.Rn(r))),i<6&&s>=6&&(o=o.next(()=>(function(a){a.createObjectStore(wf.store)}(e),this.Pn(r)))),i<7&&s>=7&&(o=o.next(()=>this.bn(r))),i<8&&s>=8&&(o=o.next(()=>this.vn(e,r))),i<9&&s>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e),function(a){const l=a.objectStore(sa.store);l.createIndex(sa.readTimeIndex,sa.readTimeIndexPath,{unique:!1}),l.createIndex(sa.collectionReadTimeIndex,sa.collectionReadTimeIndexPath,{unique:!1})}(t)})),i<10&&s>=10&&(o=o.next(()=>this.Vn(r))),i<11&&s>=11&&(o=o.next(()=>{(function(a){a.createObjectStore(pE.store,{keyPath:pE.keyPath})})(e),function(a){a.createObjectStore(Cw.store,{keyPath:Cw.keyPath})}(e)})),i<12&&s>=12&&(o=o.next(()=>{!function(a){const l=a.createObjectStore(nh.store,{keyPath:nh.keyPath});l.createIndex(nh.collectionPathOverlayIndex,nh.collectionPathOverlayIndexPath,{unique:!1}),l.createIndex(nh.collectionGroupOverlayIndex,nh.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),i<13&&s>=13&&(o=o.next(()=>{!function(a){a.createObjectStore(_u.store,{keyPath:_u.keyPath,autoIncrement:!0}).createIndex(_u.collectionGroupIndex,_u.collectionGroupIndexPath,{unique:!1}),a.createObjectStore(up.store,{keyPath:up.keyPath}).createIndex(up.sequenceNumberIndex,up.sequenceNumberIndexPath,{unique:!1}),a.createObjectStore(pp.store,{keyPath:pp.keyPath}).createIndex(pp.documentKeyIndex,pp.documentKeyIndexPath,{unique:!1})}(e)})),o}Pn(e){let t=0;return e.store(sa.store).Qt((i,s)=>{t+=wV(s)}).next(()=>{const i=new wf(t);return e.store(wf.store).put(wf.key,i)})}Rn(e){const t=e.store(Mb.store),i=e.store(Yr.store);return t.qt().next(s=>S.forEach(s,r=>{const o=IDBKeyRange.bound([r.userId,-1],[r.userId,r.lastAcknowledgedBatchId]);return i.qt(Yr.userMutationsIndex,o).next(a=>S.forEach(a,l=>{gs(l.userId===r.userId);const h=Fb(this.O,l);return dte(e,r.userId,h).next(()=>{})}))}))}bn(e){const t=e.store(Rh.store),i=e.store(sa.store);return e.store(Eu.store).get(Eu.key).next(s=>{const r=[];return i.Qt((o,a)=>{const l=new Ln(o),h=[0,Ca(l)];r.push(t.get(h).next(c=>c?S.resolve():t.put(new Rh(0,Ca(l),s.highestListenSequenceNumber))))}).next(()=>S.waitFor(r))})}vn(e,t){e.createObjectStore(vw.store,{keyPath:vw.keyPath});const i=t.store(vw.store),s=new jW,r=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:Ca(l)})}};return t.store(sa.store).Qt({jt:!0},(o,a)=>{const l=new Ln(o);return r(l.popLast())}).next(()=>t.store(kh.store).Qt({jt:!0},([o,a,l],h)=>{const c=Cf(a);return r(c.popLast())}))}Vn(e){const t=e.store(Xc.store);return t.Qt((i,s)=>{const r=$v(s),o=MD(this.O,r);return t.put(o)})}}function yte(n){n.createObjectStore(Rh.store,{keyPath:Rh.keyPath}).createIndex(Rh.documentTargetsIndex,Rh.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Xc.store,{keyPath:Xc.keyPath}).createIndex(Xc.queryTargetsIndexName,Xc.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Eu.store)}const WW="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class GW{constructor(e,t,i,s,r,o,a,l,h,c,m=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Sn=r,this.window=o,this.document=a,this.Dn=h,this.Cn=c,this.schemaVersion=m,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=b=>Promise.resolve(),!GW.Vt())throw new Lt(rt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new CCe(this,s),this.Bn=t+"main",this.O=new Xn(l),this.Ln=new A(this.Bn,this.schemaVersion,new xCe(this.O)),this.Un=new gCe(this.referenceDelegate,this.O),this.qn=new wCe(this.O),this.Kn=new hCe,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===c&&Ha("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Lt(rt.FAILED_PRECONDITION,WW);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new Ld(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var i=(0,dt.Z)(function*(s){if(t.started)return e(s)});return function(s){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,dt.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,dt.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>EV(e).put(new Ob(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(K(e))return qt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return vM(e).get(xu.key).next(t=>S.resolve(this.ts(t)))}es(e){return EV(e).delete(this.clientId)}ns(){var e=this;return(0,dt.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const s=Vt(i,Ob.store);return s.qt().next(r=>{const o=e.rs(r,18e5),a=r.filter(l=>-1===o.indexOf(l));return S.forEach(a,l=>s.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Gn)for(const i of t)e.Gn.removeItem(e.os(i.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?S.resolve(!0):vM(e).get(xu.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Lt(rt.FAILED_PRECONDITION,WW);return!1}}return!(!this.networkEnabled||!this.inForeground)||EV(e).qt().next(i=>void 0===this.rs(i,5e3).find(s=>{if(this.clientId!==s.clientId){const o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||o&&a)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&qt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,dt.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[xu.store,Ob.store],t=>{const i=new jt(t,Ld.A);return e.Xn(i).next(()=>e.es(i))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(i=>this.ss(i.updateTimeMs,t)&&!this.cs(i.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>EV(e).qt().next(t=>this.rs(t,18e5).map(i=>i.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return UW.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new mCe(e)}getDocumentOverlayCache(e){return HW.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,i){qt("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",r=13===(o=this.schemaVersion)?g:12===o?p:11===o?u:void zi();var o;let a;return this.Ln.runTransaction(e,s,r,l=>(a=new jt(l,this.Nn?this.Nn.next():Ld.A),"readwrite-primary"===t?this.Jn(a).next(h=>!!h||this.Yn(a)).next(h=>{if(!h)throw Ha(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Lt(rt.FAILED_PRECONDITION,y);return i(a)}).next(h=>this.Zn(a).next(()=>h)):this._s(a).next(()=>i(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}_s(e){return vM(e).get(xu.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Lt(rt.FAILED_PRECONDITION,WW)})}Zn(e){const t=new xu(this.clientId,this.allowTabSynchronization,Date.now());return vM(e).put(xu.key,t)}static Vt(){return A.Vt()}Xn(e){const t=vM(e);return t.get(xu.key).next(i=>this.ts(i)?(qt("IndexedDbPersistence","Releasing primary lease."),t.delete(xu.key)):S.resolve())}ss(e,t){const i=Date.now();return!(e<i-t||e>i&&(Ha(`Detected an update time that is in the future: ${e} > ${i}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,ee.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const i=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return qt("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ha("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){Ha("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vM(n){return Vt(n,xu.store)}function EV(n){return Vt(n,Ob.store)}function $W(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ECe{constructor(e,t){this.progress=e,this.ws=t}}class _Ce{constructor(e,t,i){this.qn=e,this.gs=t,this.indexManager=i}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(i=>this.ps(e,t,i))}ps(e,t,i){return this.qn.getEntry(e,t).next(s=>{for(const r of i)r.applyToLocalView(s);return s})}Is(e,t){e.forEach((i,s)=>{for(const r of t)r.applyToLocalView(s)})}Es(e,t){return this.qn.getEntries(e,t).next(i=>this.Ts(e,i).next(()=>i))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(i=>this.Is(t,i))}As(e,t,i){return yi.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.Rs(e,t.path):KH(t)?this.Ps(e,t,i):this.bs(e,t,i);var s}Rs(e,t){return this.ys(e,new yi(t)).next(i=>{let s=Gv();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}Ps(e,t,i){const s=t.collectionGroup;let r=Gv();return this.indexManager.getCollectionParents(e,s).next(o=>S.forEach(o,a=>{const l=(h=t,c=a.child(s),new kb(c,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,c;return this.bs(e,l,i).next(h=>{h.forEach((c,m)=>{r=r.insert(c,m)})})}).next(()=>r))}bs(e,t,i){let s;return this.qn.getAll(e,t.path,i).next(r=>(s=r,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(r=>{for(const o of r)for(const a of o.mutations){const l=a.key;let h=s.get(l);null==h&&(h=Bo.newInvalidDocument(l),s=s.insert(l,h)),nM(a,h,o.localWriteTime),h.isFoundDocument()||(s=s.remove(l))}}).next(()=>(s.forEach((r,o)=>{xD(t,o)||(s=s.remove(r))}),s))}}class KW{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.vs=i,this.Vs=s}static Ss(e,t){let i=sr(),s=sr();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new KW(e,t.fromCache,i,s)}}class vte{Ds(e){this.Cs=e}As(e,t,i,s){return 0===(r=t).filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())||i.isEqual(us.min())?this.Ns(e,t):this.Cs.Es(e,s).next(r=>{const o=this.xs(t,r);return(JL(t)||eM(t))&&this.ks(t.limitType,o,s,i)?this.Ns(e,t):(lD()<=Rd.in.DEBUG&&qt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rb(t)),this.Cs.As(e,t,i).next(a=>(o.forEach(l=>{a=a.insert(l.key,l)}),a)))});var r}xs(e,t){let i=new Ho(YH(e));return t.forEach((s,r)=>{xD(e,r)&&(i=i.add(r))}),i}ks(e,t,i,s){if(i.size!==t.size)return!0;const r="F"===e?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ns(e,t){return lD()<=Rd.in.DEBUG&&qt("QueryEngine","Using full collection scan to execute query:",Rb(t)),this.Cs.As(e,t,us.min())}}class ICe{constructor(e,t,i,s){this.persistence=e,this.Os=t,this.O=s,this.Ms=new va(sn),this.$s=new FD(r=>vD(r),CD),this.Fs=us.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(i)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new _Ce(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Cte(n,e,t,i){return new ICe(n,e,t,i)}function wte(n,e){return YW.apply(this,arguments)}function YW(){return YW=(0,dt.Z)(function*(n,e){const t=ti(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.gs.getAllMutationBatches(i).next(r=>(s=r,t.Ls(e),t.gs.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=sr();for(const h of s){o.push(h.batchId);for(const c of h.mutations)l=l.add(c.key)}for(const h of r){a.push(h.batchId);for(const c of h.mutations)l=l.add(c.key)}return t.Us.Es(i,l).next(h=>({qs:h,removedBatchIds:o,addedBatchIds:a}))})})}),YW.apply(this,arguments)}function TCe(n,e){const t=ti(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=t.Bs.newChangeBuffer({trackRemovals:!0});return function(o,a,l,h){const c=l.batch,m=c.keys();let b=S.resolve();return m.forEach(v=>{b=b.next(()=>h.getEntry(a,v)).next(w=>{const E=l.docVersions.get(v);gs(null!==E),w.version.compareTo(E)<0&&(c.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),h.addEntry(w)))})}),b.next(()=>o.gs.removeMutationBatch(a,c))}(t,i,e,r).next(()=>r.apply(i)).next(()=>t.gs.performConsistencyCheck(i)).next(()=>t.Us.Es(i,s))})}function Ste(n){const e=ti(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function DCe(n,e){const t=ti(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});s=t.Ms;const a=[];e.targetChanges.forEach((h,c)=>{const m=s.get(c);if(!m)return;a.push(t.Un.removeMatchingKeys(r,h.removedDocuments,c).next(()=>t.Un.addMatchingKeys(r,h.addedDocuments,c)));let b=m.withSequenceNumber(r.currentSequenceNumber);var v,w,E;e.targetMismatches.has(c)?b=b.withResumeToken(Va.EMPTY_BYTE_STRING,us.min()).withLastLimboFreeSnapshotVersion(us.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,i)),s=s.insert(c,b),w=b,E=h,(0===(v=m).resumeToken.approximateByteSize()||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8||E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0)&&a.push(t.Un.updateTargetData(r,b))});let l=Su();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(r,h))}),a.push(xte(r,o,e.documentUpdates).next(h=>{l=h})),!i.isEqual(us.min())){const h=t.Un.getLastRemoteSnapshotVersion(r).next(c=>t.Un.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(h)}return S.waitFor(a).next(()=>o.apply(r)).next(()=>t.Us.Ts(r,l)).next(()=>l)}).then(r=>(t.Ms=s,r))}function xte(n,e,t){let i=sr();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let r=Su();return t.forEach((o,a)=>{const l=s.get(o);a.isNoDocument()&&a.version.isEqual(us.min())?(e.removeEntry(o,a.readTime),r=r.insert(o,a)):!l.isValidDocument()||a.version.compareTo(l.version)>0||0===a.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(a),r=r.insert(o,a)):qt("LocalStore","Ignoring outdated watch update for ",o,". Current version:",l.version," Watch version:",a.version)}),r})}function kCe(n,e){const t=ti(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(i,e)))}function ND(n,e){const t=ti(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Un.getTargetData(i,e).next(r=>r?(s=r,S.resolve(s)):t.Un.allocateTargetId(i).next(o=>(s=new ks(e,o,0,i.currentSequenceNumber),t.Un.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.Ms.get(i.targetId);return(null===s||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.$s.set(e,i.targetId)),i})}function BD(n,e,t){return ZW.apply(this,arguments)}function ZW(){return ZW=(0,dt.Z)(function*(n,e,t){const i=ti(n),s=i.Ms.get(e),r=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!K(o))throw o;qt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ms=i.Ms.remove(e),i.$s.delete(s.target)}),ZW.apply(this,arguments)}function _V(n,e,t){const i=ti(n);let s=us.min(),r=sr();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,h){const c=ti(a),m=c.$s.get(h);return void 0!==m?S.resolve(c.Ms.get(m)):c.Un.getTargetData(l,h)}(i,o,hp(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Un.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.Os.As(o,e,t?s:us.min(),t?r:sr())).next(a=>({documents:a,Ks:r})))}function Ete(n,e){const t=ti(n),i=ti(t.Un),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",r=>i.Tt(r,e).next(o=>o?o.target:null))}function _te(n){const e=ti(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(i,s,r){const o=ti(i);let a=Su(),l=fE(r);const h=xw(s),c=IDBKeyRange.lowerBound(l,!0);return h.Qt({index:sa.readTimeIndex,range:c},(m,b)=>{const v=Qc(o.O,b);a=a.insert(v.key,v),l=b.readTime}).next(()=>({ws:a,readTime:mE(l)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:i})=>(e.Fs=i,t))}function XW(){return XW=(0,dt.Z)(function*(n){const e=ti(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(i){const s=xw(i);let r=us.min();return s.Qt({index:sa.readTimeIndex,reverse:!0},(o,a,l)=>{a.readTime&&(r=mE(a.readTime)),l.done()}).next(()=>r)}(t)).then(t=>{e.Fs=t})}),XW.apply(this,arguments)}function QW(){return QW=(0,dt.Z)(function*(n,e,t,i){const s=ti(n);let r=sr(),o=Su();for(const h of t){const c=e.Gs(h.metadata.name);h.document&&(r=r.add(c));const m=e.js(h);m.setReadTime(e.Qs(h.metadata.readTime)),o=o.insert(c,m)}const a=s.Bs.newChangeBuffer({trackRemovals:!0}),l=yield ND(s,(h=i,hp(Jx(Ln.fromString(`__bundle__/docs/${h}`)))));var h;return s.persistence.runTransaction("Apply bundle documents","readwrite",h=>xte(h,a,o).next(c=>(a.apply(h),c)).next(c=>s.Un.removeMatchingKeysForTargetId(h,l.targetId).next(()=>s.Un.addMatchingKeys(h,r,l.targetId)).next(()=>s.Us.Ts(h,c)).next(()=>c)))}),QW.apply(this,arguments)}function LCe(n,e){return JW.apply(this,arguments)}function JW(){return JW=(0,dt.Z)(function*(n,e,t=sr()){const i=yield ND(n,hp(gE(e.bundledQuery))),s=ti(n);return s.persistence.runTransaction("Save named query","readwrite",r=>{const o=Tl(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return s.Kn.saveNamedQuery(r,e);const a=i.withResumeToken(Va.EMPTY_BYTE_STRING,o);return s.Ms=s.Ms.insert(a.targetId,a),s.Un.updateTargetData(r,a).next(()=>s.Un.removeMatchingKeysForTargetId(r,i.targetId)).next(()=>s.Un.addMatchingKeys(r,t,i.targetId)).next(()=>s.Kn.saveNamedQuery(r,e))})}),JW.apply(this,arguments)}class MCe{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return S.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var i;return this.Ws.set(t.id,{id:(i=t).id,version:i.version,createTime:Tl(i.createTime)}),S.resolve()}getNamedQuery(e,t){return S.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(i=t).name,query:gE(i.bundledQuery),readTime:Tl(i.readTime)}),S.resolve();var i}}class OCe{constructor(){this.overlays=new va(yi.comparator),this.Hs=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}saveOverlays(e,t,i){return i.forEach(s=>{this.Yt(e,t,s)}),S.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Hs.get(i);return void 0!==s&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Hs.delete(i)),S.resolve()}getOverlaysForCollection(e,t,i){const s=new Map,r=t.length+1,o=new yi(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return S.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new va((h,c)=>h-c);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let c=r.get(h.largestBatchId);null===c&&(c=new Map,r=r.insert(h.largestBatchId,c)),c.set(h.getKey(),h)}}const a=new Map,l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,c)=>a.set(c,h)),!(a.size>=s)););return S.resolve(a)}Yt(e,t,i){if(null===i)return;const s=this.overlays.get(i.key);null!==s&&this.Hs.get(s.largestBatchId).delete(i.key),this.overlays=this.overlays.insert(i.key,new Zi(t,i));let r=this.Hs.get(t);void 0===r&&(r=new Set,this.Hs.set(t,r)),r.add(i.key)}}class e8{constructor(){this.Js=new Ho(Ah.Ys),this.Xs=new Ho(Ah.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const i=new Ah(e,t);this.Js=this.Js.add(i),this.Xs=this.Xs.add(i)}ti(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ei(new Ah(e,t))}ni(e,t){e.forEach(i=>this.removeReference(i,t))}si(e){const t=new yi(new Ln([])),i=new Ah(t,e),s=new Ah(t,e+1),r=[];return this.Xs.forEachInRange([i,s],o=>{this.ei(o),r.push(o.key)}),r}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new yi(new Ln([])),i=new Ah(t,e),s=new Ah(t,e+1);let r=sr();return this.Xs.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const t=new Ah(e,0),i=this.Js.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Ah{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return yi.comparator(e.key,t.key)||sn(e.oi,t.oi)}static Zs(e,t){return sn(e.oi,t.oi)||yi.comparator(e.key,t.key)}}class PCe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new Ho(Ah.Ys)}checkEmpty(e){return S.resolve(0===this.gs.length)}addMutationBatch(e,t,i,s){const r=this.ci;this.ci++;const o=new _i(r,t,i,s);this.gs.push(o);for(const a of s)this.ui=this.ui.add(new Ah(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(o)}lookupMutationBatch(e,t){return S.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.hi(t+1),r=s<0?0:s;return S.resolve(this.gs.length>r?this.gs[r]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return S.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ah(t,0),s=new Ah(t,Number.POSITIVE_INFINITY),r=[];return this.ui.forEachInRange([i,s],o=>{const a=this.ai(o.oi);r.push(a)}),S.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ho(sn);return t.forEach(s=>{const r=new Ah(s,0),o=new Ah(s,Number.POSITIVE_INFINITY);this.ui.forEachInRange([r,o],a=>{i=i.add(a.oi)})}),S.resolve(this.li(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;yi.isDocumentKey(r)||(r=r.child(""));const o=new Ah(new yi(r),0);let a=new Ho(sn);return this.ui.forEachWhile(l=>{const h=l.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(a=a.add(l.oi)),!0)},o),S.resolve(this.li(a))}li(e){const t=[];return e.forEach(i=>{const s=this.ai(i);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){gs(0===this.fi(t.batchId,"removed")),this.gs.shift();let i=this.ui;return S.forEach(t.mutations,s=>{const r=new Ah(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.ui=i})}Qe(e){}containsKey(e,t){const i=new Ah(t,0),s=this.ui.firstAfterOrEqual(i);return S.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return S.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class FCe{constructor(e){this.di=e,this.docs=new va(yi.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,o=this.di(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return S.resolve(i?i.document.mutableCopy():Bo.newInvalidDocument(t))}getEntries(e,t){let i=Su();return t.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():Bo.newInvalidDocument(s))}),S.resolve(i)}getAll(e,t,i){let s=Su();const r=new yi(t.child("")),o=this.docs.getIteratorFrom(r);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!t.isPrefixOf(a.path))break;a.path.length>t.length+1||l.readTime.compareTo(i)<=0||(s=s.insert(l.key,l.mutableCopy()))}return S.resolve(s)}_i(e,t){return S.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new NCe(this)}getSize(e){return S.resolve(this.size)}}class NCe extends gte{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Tn.addEntry(e,s)):this.Tn.removeEntry(i)}),S.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class BCe{constructor(e){this.persistence=e,this.wi=new FD(t=>vD(t),CD),this.lastRemoteSnapshotVersion=us.min(),this.highestTargetId=0,this.mi=0,this.gi=new e8,this.targetCount=0,this.yi=yE.He()}forEachTarget(e,t){return this.wi.forEach((i,s)=>t(s)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.mi&&(this.mi=t),S.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new yE(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Ze(t),S.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.wi.forEach((o,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.wi.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),S.waitFor(r).next(()=>s)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){const i=this.wi.get(t)||null;return S.resolve(i)}addMatchingKeys(e,t,i){return this.gi.ti(t,i),S.resolve()}removeMatchingKeys(e,t,i){this.gi.ni(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),S.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),S.resolve()}getMatchingKeysForTargetId(e,t){const i=this.gi.ri(t);return S.resolve(i)}containsKey(e,t){return S.resolve(this.gi.containsKey(t))}}class HCe{constructor(e,t){this.pi={},this.overlays={},this.Nn=new Ld(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new BCe(this),this.indexManager=new fCe,this.qn=new FCe(i=>this.referenceDelegate.Ii(i)),this.O=new Xn(t),this.Kn=new MCe(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OCe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.pi[e.toKey()];return i||(i=new PCe(t,this.referenceDelegate),this.pi[e.toKey()]=i),i}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,i){qt("MemoryPersistence","Starting transaction:",e);const s=new VCe(this.Nn.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.Ti(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(e,t){return S.or(Object.values(this.pi).map(i=>()=>i.containsKey(e,t)))}}class VCe extends C{constructor(e){super(),this.currentSequenceNumber=e}}class t8{constructor(e){this.persistence=e,this.Ri=new e8,this.Pi=null}static bi(e){return new t8(e)}get vi(){if(this.Pi)return this.Pi;throw zi()}addReference(e,t,i){return this.Ri.addReference(i,t),this.vi.delete(i.toString()),S.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.vi.add(i.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),S.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(s=>this.vi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(r=>this.vi.add(r.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.vi,i=>{const s=yi.fromPath(i);return this.Vi(e,s).next(r=>{r||t.removeEntry(s,us.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(i=>{i?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return S.or([()=>S.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function Ite(n,e){return`firestore_clients_${n}_${e}`}function Tte(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function i8(n,e){return`firestore_targets_${n}_${e}`}class IV{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static Si(e,t,i){const s=JSON.parse(i);let r,o="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return o&&s.error&&(o="string"==typeof s.error.message&&"string"==typeof s.error.code,o&&(r=new Lt(s.error.code,s.error.message))),o?new IV(e,t,s.state,r):(Ha("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class CM{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Si(e,t){const i=JSON.parse(t);let s,r="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return r&&i.error&&(r="string"==typeof i.error.message&&"string"==typeof i.error.code,r&&(s=new Lt(i.error.code,i.error.message))),r?new CM(e,i.state,s):(Ha("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class TV{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const i=JSON.parse(t);let s="object"==typeof i&&i.activeTargetIds instanceof Array,r=aE();for(let o=0;s&&o<i.activeTargetIds.length;++o)s=Th(i.activeTargetIds[o]),r=r.add(i.activeTargetIds[o]);return s?new TV(e,r):(Ha("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class s8{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new s8(t.clientId,t.onlineState):(Ha("SharedClientState",`Failed to parse online state: ${e}`),null)}}class n8{constructor(){this.activeTargetIds=aE()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r8{constructor(e,t,i,s,r){this.window=e,this.Sn=t,this.persistenceKey=i,this.xi=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new va(sn),this.started=!1,this.$i=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.Fi=Ite(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new n8),this.Li=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(a){return`firestore_bundle_loaded_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,dt.Z)(function*(){const t=yield e.syncEngine.ds();for(const s of t){if(s===e.xi)continue;const r=e.getItem(Ite(e.persistenceKey,s));if(r){const o=TV.Si(s,r);o&&(e.Mi=e.Mi.insert(o.clientId,o))}}e.ji();const i=e.storage.getItem(e.Ki);if(i){const s=e.Qi(i);s&&e.Wi(s)}for(const s of e.$i)e.Oi(s);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,i){this.Hi(e,t,i),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(i8(this.persistenceKey,e));if(i){const s=CM.Si(e,i);s&&(t=s.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(i8(this.persistenceKey,e))}updateQueryState(e,t,i){this.Xi(e,t,i)}handleUserChange(e,t,i){t.forEach(s=>{this.Ji(s)}),this.currentUser=e,i.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return qt("SharedClientState","READ",e,t),t}setItem(e,t){qt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){qt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const i=e;if(i.storageArea===this.storage){if(qt("SharedClientState","EVENT",i.key,i.newValue),i.key===this.Fi)return void Ha("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,dt.Z)(function*(){if(t.started){if(null!==i.key)if(t.Li.test(i.key)){if(null==i.newValue){const s=t.er(i.key);return t.nr(s,null)}{const s=t.sr(i.key,i.newValue);if(s)return t.nr(s.clientId,s)}}else if(t.Ui.test(i.key)){if(null!==i.newValue){const s=t.ir(i.key,i.newValue);if(s)return t.rr(s)}}else if(t.qi.test(i.key)){if(null!==i.newValue){const s=t.cr(i.key,i.newValue);if(s)return t.ur(s)}}else if(i.key===t.Ki){if(null!==i.newValue){const s=t.Qi(i.newValue);if(s)return t.Wi(s)}}else if(i.key===t.Bi){const s=function(r){let o=Ld.A;if(null!=r)try{const a=JSON.parse(r);gs("number"==typeof a),o=a}catch(a){Ha("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(i.newValue);s!==Ld.A&&t.sequenceNumberHandler(s)}else if(i.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(i)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,i){const s=new IV(this.currentUser,e,t,i),r=Tte(this.persistenceKey,this.currentUser,e);this.setItem(r,s.Di())}Ji(e){const t=Tte(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,i){const s=i8(this.persistenceKey,e),r=new CM(e,t,i);this.setItem(s,r.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const i=this.er(e);return TV.Si(i,t)}ir(e,t){const i=this.Ui.exec(e),s=Number(i[1]);return IV.Si(new El(void 0!==i[2]?i[2]:null),s,t)}cr(e,t){const i=this.qi.exec(e),s=Number(i[1]);return CM.Si(s,t)}Qi(e){return s8.Si(e)}rr(e){var t=this;return(0,dt.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);qt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const i=t?this.Mi.insert(e,t):this.Mi.remove(e),s=this.zi(this.Mi),r=this.zi(i),o=[],a=[];return r.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{r.has(l)||a.push(l)}),this.syncEngine.dr(o,a).then(()=>{this.Mi=i})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=aE();return e.forEach((i,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class Dte{constructor(){this._r=new n8,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,i){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new n8,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class zCe{mr(e){}shutdown(){}}class kte{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){qt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){qt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const jCe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class UCe{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class qCe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,i,s,r){const o=this.$r(e,t);qt("RestConnection","Sending: ",o,i);const a={};return this.Fr(a,s,r),this.Br(e,o,a,i).then(l=>(qt("RestConnection","Received: ",l),l),l=>{throw Yx("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",i),l})}Lr(e,t,i,s,r){return this.Mr(e,t,i,s,r)}Fr(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}$r(e,t){return`${this.kr}/v1/${t}:${jCe[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,i,s){return new Promise((r,o)=>{const a=new uW;a.listenOnce(kH.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case oD.NO_ERROR:const h=a.getResponseJson();qt("Connection","XHR received:",JSON.stringify(h)),r(h);break;case oD.TIMEOUT:qt("Connection",'RPC "'+e+'" timed out'),o(new Lt(rt.DEADLINE_EXCEEDED,"Request time out"));break;case oD.HTTP_ERROR:const c=a.getStatus();if(qt("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const m=a.getResponseJson().error;if(m&&m.status&&m.message){const b=function(v){const w=v.toLowerCase().replace(/_/g,"-");return Object.values(rt).indexOf(w)>=0?w:rt.UNKNOWN}(m.status);o(new Lt(b,m.message))}else o(new Lt(rt.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Lt(rt.UNAVAILABLE,"Connection failed."));break;default:zi()}}finally{qt("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(s);a.send(t,"POST",l,i,15)})}Ur(e,t,i){const s=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=DH(),o=cW(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new dW({})),this.Fr(a.initMessageHeaders,t,i),(0,ee.uI)()||(0,ee.b$)()||(0,ee.d)()||(0,ee.w1)()||(0,ee.Mn)()||(0,ee.ru)()||(a.httpHeadersOverwriteParam="$httpHeaders");const l=s.join("");qt("Connection","Creating WebChannel: "+l,a);const h=r.createWebChannel(l,a);let c=!1,m=!1;const b=new UCe({Ar:w=>{m?qt("Connection","Not sending because WebChannel is closed:",w):(c||(qt("Connection","Opening WebChannel transport."),h.open(),c=!0),qt("Connection","WebChannel sending:",w),h.send(w))},Rr:()=>h.close()}),v=(w,E,D)=>{w.listen(E,L=>{try{D(L)}catch(N){setTimeout(()=>{throw N},0)}})};return v(h,aD.EventType.OPEN,()=>{m||qt("Connection","WebChannel transport opened.")}),v(h,aD.EventType.CLOSE,()=>{m||(m=!0,qt("Connection","WebChannel transport closed"),b.Cr())}),v(h,aD.EventType.ERROR,w=>{m||(m=!0,Yx("Connection","WebChannel transport errored:",w),b.Cr(new Lt(rt.UNAVAILABLE,"The operation could not be completed")))}),v(h,aD.EventType.MESSAGE,w=>{var E;if(!m){const D=w.data[0];gs(!!D);const L=D,N=L.error||(null===(E=L[0])||void 0===E?void 0:E.error);if(N){qt("Connection","WebChannel received error:",N);const V=N.status;let $=function(Q){const le=ol[Q];if(void 0!==le)return tV(le)}(V),ie=N.message;void 0===$&&($=rt.INTERNAL,ie="Unknown error status: "+V+" with message "+N.message),m=!0,b.Cr(new Lt($,ie)),h.close()}else qt("Connection","WebChannel received:",D),b.Nr(D)}}),v(o,RH.STAT_EVENT,w=>{w.stat===AH.PROXY?qt("Connection","Detected buffering proxy"):w.stat===AH.NOPROXY&&qt("Connection","Detected no buffering proxy")}),setTimeout(()=>{b.Dr()},0),b}}function Rte(){return"undefined"!=typeof window?window:null}function DV(){return"undefined"!=typeof document?document:null}function wM(n){return new Jee(n,!0)}class o8{constructor(e,t,i=1e3,s=1.5,r=6e4){this.Sn=e,this.timerId=t,this.qr=i,this.Kr=s,this.Gr=r,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),i=Math.max(0,Date.now()-this.Wr),s=Math.max(0,t-i);s>0&&qt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,s,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class Ate{constructor(e,t,i,s,r,o,a,l){this.Sn=e,this.Xr=i,this.Zr=s,this.eo=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new o8(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,dt.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,dt.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var i=this;return(0,dt.Z)(function*(){i._o(),i.wo(),i.ro.cancel(),i.no++,4!==e?i.ro.reset():t&&t.code===rt.RESOURCE_EXHAUSTED?(Ha(t.toString()),Ha("Using maximum backoff delay to prevent overloading the backend."),i.ro.zr()):t&&t.code===rt.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.mo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.no===t&&this.po(i,s)},i=>{e(()=>{const s=new Lt(rt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Io(s)})})}po(e,t){const i=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{i(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(s=>{i(()=>this.Io(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}uo(){var e=this;this.state=5,this.ro.Hr((0,dt.Z)(function*(){e.state=0,e.start()}))}Io(e){return qt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(qt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WCe extends Ate{constructor(e,t,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,o),this.O=r}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function tte(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:zi(),s=e.targetChange.targetIds||[],r=function(l,h){return l.N?(gs(void 0===h||"string"==typeof h),Va.fromBase64String(h||"")):(gs(void 0===h||h instanceof Uint8Array),Va.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const h=void 0===l.code?rt.UNKNOWN:tV(l.code);return new Lt(h,l.message||"")}(o);t=new pM(i,s,r,a||null)}else if("documentChange"in e){const i=e.documentChange,s=dp(n,i.document.name),r=Tl(i.document.updateTime),o=new cc({mapValue:{fields:i.document.fields}}),a=Bo.newFoundDocument(s,r,o);t=new uM(i.targetIds||[],i.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const i=e.documentDelete,s=dp(n,i.document),r=i.readTime?Tl(i.readTime):us.min(),o=Bo.newNoDocument(s,r);t=new uM([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,s=dp(n,i.document);t=new uM([],i.removedTargetIds||[],s,null)}else{if(!("filter"in e))return zi();{const i=e.filter,r=new kW(i.count||0);t=new AW(i.targetId,r)}}var l;return t}(this.O,e),i=function(s){if(!("targetChange"in s))return us.min();const r=s.targetChange;return r.targetIds&&r.targetIds.length?us.min():r.readTime?Tl(r.readTime):us.min()}(e);return this.listener.To(t,i)}Ao(e){const t={};t.database=dE(this.O),t.addTarget=function(s,r){let o;const a=r.target;return o=Qx(a)?{documents:cV(s,a)}:{query:dV(s,a)},o.targetId=r.targetId,r.resumeToken.approximateByteSize()>0?o.resumeToken=aV(s,r.resumeToken):r.snapshotVersion.compareTo(us.min())>0&&(o.readTime=ID(s,r.snapshotVersion.toTimestamp())),o}(this.O,e);const i=function OW(n,e){const t=function(i,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zi()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.fo(t)}Ro(e){const t={};t.database=dE(this.O),t.removeTarget=e,this.fo(t)}}class GCe extends Ate{constructor(e,t,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,o),this.O=r,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(gs(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function hV(n,e){return n&&n.length>0?(gs(void 0!==e),n.map(t=>function(i,s){let r=Tl(i.updateTime?i.updateTime:s);return r.isEqual(us.min())&&(r=Tl(s)),new TW(r,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Tl(e.commitTime);return this.listener.Vo(i,t)}return gs(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=dE(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>AD(this.O,i))};this.fo(t)}}class $Ce extends class{}{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=i,this.O=s,this.Co=!1}No(){if(this.Co)throw new Lt(rt.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,i){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.eo.Mr(e,t,i,s,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Lt(rt.UNKNOWN,s.toString())})}Lr(e,t,i){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.eo.Lr(e,t,i,s,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Lt(rt.UNKNOWN,s.toString())})}terminate(){this.Co=!0}}class KCe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(Ha(t),this.Oo=!1):qt("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class YCe{constructor(e,t,i,s,r){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=r,this.jo.mr(a=>{i.enqueueAndForget((0,dt.Z)(function*(){var l;Ew(o)&&(qt("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,dt.Z)(function*(h){const c=ti(h);c.Ko.add(4),yield HD(c),c.Qo.set("Unknown"),c.Ko.delete(4),yield SM(c)}),function(h){return l.apply(this,arguments)})(o))}))}),this.Qo=new KCe(i,s)}}function SM(n){return a8.apply(this,arguments)}function a8(){return a8=(0,dt.Z)(function*(n){if(Ew(n))for(const e of n.Go)yield e(!0)}),a8.apply(this,arguments)}function HD(n){return l8.apply(this,arguments)}function l8(){return l8=(0,dt.Z)(function*(n){for(const e of n.Go)yield e(!1)}),l8.apply(this,arguments)}function kV(n,e){const t=ti(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),d8(t)?c8(t):zD(t).co()&&h8(t,e))}function xM(n,e){const t=ti(n),i=zD(t);t.qo.delete(e),i.co()&&Lte(t,e),0===t.qo.size&&(i.co()?i.ho():Ew(t)&&t.Qo.set("Unknown"))}function h8(n,e){n.Wo.Z(e.targetId),zD(n).Ao(e)}function Lte(n,e){n.Wo.Z(e),zD(n).Ro(e)}function c8(n){n.Wo=new LW({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),zD(n).start(),n.Qo.Mo()}function d8(n){return Ew(n)&&!zD(n).oo()&&n.qo.size>0}function Ew(n){return 0===ti(n).Ko.size}function Mte(n){n.Wo=void 0}function ZCe(n){return u8.apply(this,arguments)}function u8(){return u8=(0,dt.Z)(function*(n){n.qo.forEach((e,t)=>{h8(n,e)})}),u8.apply(this,arguments)}function XCe(n,e){return p8.apply(this,arguments)}function p8(){return p8=(0,dt.Z)(function*(n,e){Mte(n),d8(n)?(n.Qo.Bo(e),c8(n)):n.Qo.set("Unknown")}),p8.apply(this,arguments)}function QCe(n,e,t){return f8.apply(this,arguments)}function f8(){return f8=(0,dt.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof pM&&2===e.state&&e.cause)try{yield(i=(0,dt.Z)(function*(s,r){const o=r.cause;for(const a of r.targetIds)s.qo.has(a)&&(yield s.remoteSyncer.rejectListen(a,o),s.qo.delete(a),s.Wo.removeTarget(a))}),function(s,r){return i.apply(this,arguments)})(n,e)}catch(i){qt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield RV(n,i)}else if(e instanceof uM?n.Wo.ct(e):e instanceof AW?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(us.min()))try{const i=yield Ste(n.localStore);t.compareTo(i)>=0&&(yield function(s,r){const o=s.Wo.yt(r);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const h=s.qo.get(l);h&&s.qo.set(l,h.withResumeToken(a.resumeToken,r))}}),o.targetMismatches.forEach(a=>{const l=s.qo.get(a);if(!l)return;s.qo.set(a,l.withResumeToken(Va.EMPTY_BYTE_STRING,l.snapshotVersion)),Lte(s,a);const h=new ks(l.target,a,1,l.sequenceNumber);h8(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(i){qt("RemoteStore","Failed to raise snapshot:",i),yield RV(n,i)}var i}),f8.apply(this,arguments)}function RV(n,e,t){return m8.apply(this,arguments)}function m8(){return m8=(0,dt.Z)(function*(n,e,t){if(!K(e))throw e;n.Ko.add(1),yield HD(n),n.Qo.set("Offline"),t||(t=()=>Ste(n.localStore)),n.asyncQueue.enqueueRetryable((0,dt.Z)(function*(){qt("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield SM(n)}))}),m8.apply(this,arguments)}function Ote(n,e){return e().catch(t=>RV(n,t,e))}function VD(n){return g8.apply(this,arguments)}function g8(){return g8=(0,dt.Z)(function*(n){const e=ti(n),t=_w(e);let i=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;JCe(e);)try{const s=yield kCe(e.localStore,i);if(null===s){0===e.Uo.length&&t.ho();break}i=s.batchId,e0e(e,s)}catch(s){yield RV(e,s)}Pte(e)&&Fte(e)}),g8.apply(this,arguments)}function JCe(n){return Ew(n)&&n.Uo.length<10}function e0e(n,e){n.Uo.push(e);const t=_w(n);t.co()&&t.bo&&t.vo(e.mutations)}function Pte(n){return Ew(n)&&!_w(n).oo()&&n.Uo.length>0}function Fte(n){_w(n).start()}function t0e(n){return b8.apply(this,arguments)}function b8(){return b8=(0,dt.Z)(function*(n){_w(n).Do()}),b8.apply(this,arguments)}function i0e(n){return y8.apply(this,arguments)}function y8(){return y8=(0,dt.Z)(function*(n){const e=_w(n);for(const t of n.Uo)e.vo(t.mutations)}),y8.apply(this,arguments)}function s0e(n,e,t){return v8.apply(this,arguments)}function v8(){return v8=(0,dt.Z)(function*(n,e,t){const i=n.Uo.shift(),s=It.from(i,e,t);yield Ote(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield VD(n)}),v8.apply(this,arguments)}function n0e(n,e){return C8.apply(this,arguments)}function C8(){return C8=(0,dt.Z)(function*(n,e){var t;e&&_w(n).bo&&(yield(t=(0,dt.Z)(function*(i,s){if(hM(r=s.code)&&r!==rt.ABORTED){const o=i.Uo.shift();_w(i).ao(),yield Ote(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield VD(i)}var r}),function(i,s){return t.apply(this,arguments)})(n,e)),Pte(n)&&Fte(n)}),C8.apply(this,arguments)}function Nte(n,e){return w8.apply(this,arguments)}function w8(){return w8=(0,dt.Z)(function*(n,e){const t=ti(n);t.asyncQueue.verifyOperationInProgress(),qt("RemoteStore","RemoteStore received new credentials");const i=Ew(t);t.Ko.add(3),yield HD(t),i&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield SM(t)}),w8.apply(this,arguments)}function S8(n,e){return x8.apply(this,arguments)}function x8(){return x8=(0,dt.Z)(function*(n,e){const t=ti(n);e?(t.Ko.delete(2),yield SM(t)):e||(t.Ko.add(2),yield HD(t),t.Qo.set("Unknown"))}),x8.apply(this,arguments)}function zD(n){return n.zo||(n.zo=function(e,t,i){const s=ti(e);return s.No(),new WCe(t,s.eo,s.authCredentials,s.appCheckCredentials,s.O,i)}(n.datastore,n.asyncQueue,{Pr:ZCe.bind(null,n),vr:XCe.bind(null,n),To:QCe.bind(null,n)}),n.Go.push(function(){var e=(0,dt.Z)(function*(t){t?(n.zo.ao(),d8(n)?c8(n):n.Qo.set("Unknown")):(yield n.zo.stop(),Mte(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function _w(n){return n.Ho||(n.Ho=function(e,t,i){const s=ti(e);return s.No(),new GCe(t,s.eo,s.authCredentials,s.appCheckCredentials,s.O,i)}(n.datastore,n.asyncQueue,{Pr:t0e.bind(null,n),vr:n0e.bind(null,n),So:i0e.bind(null,n),Vo:s0e.bind(null,n)}),n.Go.push(function(){var e=(0,dt.Z)(function*(t){t?(n.Ho.ao(),yield VD(n)):(yield n.Ho.stop(),n.Uo.length>0&&(qt("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class E8{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,i,s,r){const o=Date.now()+i,a=new E8(e,t,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lt(rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jD(n,e){if(Ha("AsyncQueue",`${e}: ${n}`),K(n))return new Lt(rt.UNAVAILABLE,`${e}: ${n}`);throw n}class UD{constructor(e){this.comparator=e?(t,i)=>e(t,i)||yi.comparator(t.key,i.key):(t,i)=>yi.comparator(t.key,i.key),this.keyedMap=Gv(),this.sortedSet=new va(this.comparator)}static emptySet(e){return new UD(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof UD)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new UD;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Bte{constructor(){this.Jo=new va(yi.comparator)}track(e){const t=e.doc.key,i=this.Jo.get(t);i?0!==e.type&&3===i.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==i.type?this.Jo=this.Jo.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Jo=this.Jo.remove(t):1===e.type&&2===i.type?this.Jo=this.Jo.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):zi():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,i)=>{e.push(i)}),e}}class qD{constructor(e,t,i,s,r,o,a,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,t,i,s){const r=[];return t.forEach(o=>{r.push({type:0,doc:o})}),new qD(e,t,UD.emptySet(t),r,i,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wD(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}class r0e{constructor(){this.Xo=void 0,this.listeners=[]}}class o0e{constructor(){this.queries=new FD(e=>SD(e),wD),this.onlineState="Unknown",this.Zo=new Set}}function _8(n,e){return I8.apply(this,arguments)}function I8(){return I8=(0,dt.Z)(function*(n,e){const t=ti(n),i=e.query;let s=!1,r=t.queries.get(i);if(r||(s=!0,r=new r0e),s)try{r.Xo=yield t.onListen(i)}catch(o){const a=jD(o,`Initialization of query '${Rb(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,r),r.listeners.push(e),e.tc(t.onlineState),r.Xo&&e.ec(r.Xo)&&k8(t)}),I8.apply(this,arguments)}function T8(n,e){return D8.apply(this,arguments)}function D8(){return D8=(0,dt.Z)(function*(n,e){const t=ti(n),i=e.query;let s=!1;const r=t.queries.get(i);if(r){const o=r.listeners.indexOf(e);o>=0&&(r.listeners.splice(o,1),s=0===r.listeners.length)}if(s)return t.queries.delete(i),t.onUnlisten(i)}),D8.apply(this,arguments)}function a0e(n,e){const t=ti(n);let i=!1;for(const s of e){const o=t.queries.get(s.query);if(o){for(const a of o.listeners)a.ec(s)&&(i=!0);o.Xo=s}}i&&k8(t)}function l0e(n,e,t){const i=ti(n),s=i.queries.get(e);if(s)for(const r of s.listeners)r.onError(t);i.queries.delete(e)}function k8(n){n.Zo.forEach(e=>{e.next()})}class R8{constructor(e,t,i){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=i||{}}ec(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)3!==s.type&&i.push(s);e=new qD(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=qD.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class h0e{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class Hte{constructor(e){this.O=e}Gs(e){return dp(this.O,e)}js(e){return e.metadata.exists?uE(this.O,e.document,!1):Bo.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return Tl(e)}}class c0e{constructor(e,t,i){this.hc=e,this.localStore=t,this.O=i,this.queries=[],this.documents=[],this.progress=Vte(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,i=new Hte(this.O);for(const s of e)if(s.metadata.queries){const r=i.Gs(s.metadata.name);for(const o of s.metadata.queries){const a=(t.get(o)||sr()).add(r);t.set(o,a)}}return t}complete(){var e=this;return(0,dt.Z)(function*(){const t=yield function ACe(n,e,t,i){return QW.apply(this,arguments)}(e.localStore,new Hte(e.O),e.documents,e.hc.id),i=e.fc(e.documents);for(const s of e.queries)yield LCe(e.localStore,s,i.get(s.name));return e.progress.taskState="Success",new ECe(Object.assign({},e.progress),t)})()}}function Vte(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class zte{constructor(e){this.key=e}}class jte{constructor(e){this.key=e}}class Ute{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=sr(),this.mutatedKeys=sr(),this.mc=YH(e),this.gc=new UD(this.mc)}get yc(){return this.dc}Ic(e,t){const i=t?t.Ec:new Bte,s=t?t.gc:this.gc;let r=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=JL(this.query)&&s.size===this.query.limit?s.last():null,h=eM(this.query)&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,m)=>{const b=s.get(c),v=xD(this.query,m)?m:null,w=!!b&&this.mutatedKeys.has(b.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let D=!1;b&&v?b.data.isEqual(v.data)?w!==E&&(i.track({type:3,doc:v}),D=!0):this.Tc(b,v)||(i.track({type:2,doc:v}),D=!0,(l&&this.mc(v,l)>0||h&&this.mc(v,h)<0)&&(a=!0)):!b&&v?(i.track({type:0,doc:v}),D=!0):b&&!v&&(i.track({type:1,doc:b}),D=!0,(l||h)&&(a=!0)),D&&(v?(o=o.add(v),r=E?r.add(c):r.delete(c)):(o=o.delete(c),r=r.delete(c)))}),JL(this.query)||eM(this.query))for(;o.size>this.query.limit;){const c=JL(this.query)?o.last():o.first();o=o.delete(c.key),r=r.delete(c.key),i.track({type:1,doc:c})}return{gc:o,Ec:i,ks:a,mutatedKeys:r}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const s=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const r=e.Ec.Yo();r.sort((h,c)=>function(m,b){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zi()}};return v(m)-v(b)}(h.type,c.type)||this.mc(h.doc,c.doc)),this.Ac(i);const o=t?this.Rc():[],a=0===this.wc.size&&this.current?1:0,l=a!==this._c;return this._c=a,0!==r.length||l?{snapshot:new qD(this.query,e.gc,s,r,e.mutatedKeys,0===a,l,!1),Pc:o}:{Pc:o}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new Bte,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=sr(),this.gc.forEach(i=>{this.bc(i.key)&&(this.wc=this.wc.add(i.key))});const t=[];return e.forEach(i=>{this.wc.has(i)||t.push(new jte(i))}),this.wc.forEach(i=>{e.has(i)||t.push(new zte(i))}),t}vc(e){this.dc=e.Ks,this.wc=sr();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return qD.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class d0e{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class u0e{constructor(e){this.key=e,this.Sc=!1}}class p0e{constructor(e,t,i,s,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Dc={},this.Cc=new FD(a=>SD(a),wD),this.Nc=new Map,this.xc=new Set,this.kc=new va(yi.comparator),this.Oc=new Map,this.Mc=new e8,this.$c={},this.Fc=new Map,this.Bc=yE.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function f0e(n,e){return A8.apply(this,arguments)}function A8(){return A8=(0,dt.Z)(function*(n,e){const t=eG(n);let i,s;const r=t.Cc.get(e);if(r)i=r.targetId,t.sharedClientState.addLocalQueryTarget(i),s=r.view.Vc();else{const o=yield ND(t.localStore,hp(e));t.isPrimaryClient&&kV(t.remoteStore,o);const a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,s=yield L8(t,e,i,"current"===a)}return s}),A8.apply(this,arguments)}function L8(n,e,t,i){return M8.apply(this,arguments)}function M8(){return M8=(0,dt.Z)(function*(n,e,t,i){n.Uc=(c,m,b)=>{return(v=(0,dt.Z)(function*(w,E,D,L){let N=E.view.Ic(D);N.ks&&(N=yield _V(w.localStore,E.query,!1).then(({documents:ie})=>E.view.Ic(ie,N)));const V=L&&L.targetChanges.get(E.targetId),$=E.view.applyChanges(N,w.isPrimaryClient,V);return U8(w,E.targetId,$.Pc),$.snapshot}),function(w,E,D,L){return v.apply(this,arguments)})(n,c,m,b);var v};const s=yield _V(n.localStore,e,!0),r=new Ute(e,s.Ks),o=r.Ic(s.documents),a=hE.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),l=r.applyChanges(o,n.isPrimaryClient,a);U8(n,t,l.Pc);const h=new d0e(e,t,r);return n.Cc.set(e,h),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),l.snapshot}),M8.apply(this,arguments)}function m0e(n,e){return O8.apply(this,arguments)}function O8(){return O8=(0,dt.Z)(function*(n,e){const t=ti(n),i=t.Cc.get(e),s=t.Nc.get(i.targetId);if(s.length>1)return t.Nc.set(i.targetId,s.filter(r=>!wD(r,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield BD(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),xM(t.remoteStore,i.targetId),WD(t,i.targetId)}).catch(vE))):(WD(t,i.targetId),yield BD(t.localStore,i.targetId,!0))}),O8.apply(this,arguments)}function P8(){return P8=(0,dt.Z)(function*(n,e,t){const i=tG(n);try{const s=yield function(r,o){const a=ti(r),l=_l.now(),h=o.reduce((m,b)=>m.add(b.key),sr());let c;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>a.Us.Es(m,h).next(b=>{c=b;const v=[];for(const w of o){const E=rM(w,c.get(w.key));null!=E&&v.push(new Lb(w.key,E,ZL(E.value.mapValue),Wn.exists(!0)))}return a.gs.addMutationBatch(m,l,v,o)})).then(m=>(m.applyToLocalDocumentSet(c),{batchId:m.batchId,changes:c}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(r,o,a){let l=r.$c[r.currentUser.toKey()];l||(l=new va(sn)),l=l.insert(o,a),r.$c[r.currentUser.toKey()]=l}(i,s.batchId,t),yield Kv(i,s.changes),yield VD(i.remoteStore)}catch(s){const r=jD(s,"Failed to persist write");t.reject(r)}}),P8.apply(this,arguments)}function qte(n,e){return F8.apply(this,arguments)}function F8(){return F8=(0,dt.Z)(function*(n,e){const t=ti(n);try{const i=yield DCe(t.localStore,e);e.targetChanges.forEach((s,r)=>{const o=t.Oc.get(r);o&&(gs(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Sc=!0:s.modifiedDocuments.size>0?gs(o.Sc):s.removedDocuments.size>0&&(gs(o.Sc),o.Sc=!1))}),yield Kv(t,i,e)}catch(i){yield vE(i)}}),F8.apply(this,arguments)}function Wte(n,e,t){const i=ti(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const s=[];i.Cc.forEach((r,o)=>{const a=o.view.tc(e);a.snapshot&&s.push(a.snapshot)}),function(r,o){const a=ti(r);a.onlineState=o;let l=!1;a.queries.forEach((h,c)=>{for(const m of c.listeners)m.tc(o)&&(l=!0)}),l&&k8(a)}(i.eventManager,e),s.length&&i.Dc.To(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function b0e(n,e,t){return N8.apply(this,arguments)}function N8(){return N8=(0,dt.Z)(function*(n,e,t){const i=ti(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Oc.get(e),r=s&&s.key;if(r){let o=new va(yi.comparator);o=o.insert(r,Bo.newNoDocument(r,us.min()));const a=sr().add(r),l=new lE(us.min(),new Map,new Ho(sn),o,a);yield qte(i,l),i.kc=i.kc.remove(r),i.Oc.delete(e),q8(i)}else yield BD(i.localStore,e,!1).then(()=>WD(i,e,t)).catch(vE)}),N8.apply(this,arguments)}function y0e(n,e){return B8.apply(this,arguments)}function B8(){return B8=(0,dt.Z)(function*(n,e){const t=ti(n),i=e.batch.batchId;try{const s=yield TCe(t.localStore,e);j8(t,i,null),z8(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Kv(t,s)}catch(s){yield vE(s)}}),B8.apply(this,arguments)}function v0e(n,e,t){return H8.apply(this,arguments)}function H8(){return H8=(0,dt.Z)(function*(n,e,t){const i=ti(n);try{const s=yield function(r,o){const a=ti(r);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return a.gs.lookupMutationBatch(l,o).next(c=>(gs(null!==c),h=c.keys(),a.gs.removeMutationBatch(l,c))).next(()=>a.gs.performConsistencyCheck(l)).next(()=>a.Us.Es(l,h))})}(i.localStore,e);j8(i,e,t),z8(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Kv(i,s)}catch(s){yield vE(s)}}),H8.apply(this,arguments)}function V8(){return V8=(0,dt.Z)(function*(n,e){const t=ti(n);Ew(t.remoteStore)||qt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(r){const o=ti(r);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.gs.getHighestUnacknowledgedBatchId(a))}(t.localStore);if(-1===i)return void e.resolve();const s=t.Fc.get(i)||[];s.push(e),t.Fc.set(i,s)}catch(i){const s=jD(i,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),V8.apply(this,arguments)}function z8(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function j8(n,e,t){const i=ti(n);let s=i.$c[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),i.$c[i.currentUser.toKey()]=s}}function WD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Nc.get(e))n.Cc.delete(i),t&&n.Dc.qc(i,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(i=>{n.Mc.containsKey(i)||Gte(n,i)})}function Gte(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(xM(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),q8(n))}function U8(n,e,t){for(const i of t)i instanceof zte?(n.Mc.addReference(i.key,e),w0e(n,i)):i instanceof jte?(qt("SyncEngine","Document no longer in limbo: "+i.key),n.Mc.removeReference(i.key,e),n.Mc.containsKey(i.key)||Gte(n,i.key)):zi()}function w0e(n,e){const t=e.key,i=t.path.canonicalString();n.kc.get(t)||n.xc.has(i)||(qt("SyncEngine","New document in limbo: "+t),n.xc.add(i),q8(n))}function q8(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new yi(Ln.fromString(e)),i=n.Bc.next();n.Oc.set(i,new u0e(t)),n.kc=n.kc.insert(t,i),kV(n.remoteStore,new ks(hp(Jx(t.path)),i,2,Ld.A))}}function Kv(n,e,t){return W8.apply(this,arguments)}function W8(){return W8=(0,dt.Z)(function*(n,e,t){const i=ti(n),s=[],r=[],o=[];var a;i.Cc.isEmpty()||(i.Cc.forEach((a,l)=>{o.push(i.Uc(l,e,t).then(h=>{if(h){i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,h.fromCache?"not-current":"current"),s.push(h);const c=KW.Ss(l.targetId,h);r.push(c)}}))}),yield Promise.all(o),i.Dc.To(s),yield(a=(0,dt.Z)(function*(l,h){const c=ti(l);try{yield c.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>S.forEach(h,b=>S.forEach(b.vs,v=>c.persistence.referenceDelegate.addReference(m,b.targetId,v)).next(()=>S.forEach(b.Vs,v=>c.persistence.referenceDelegate.removeReference(m,b.targetId,v)))))}catch(m){if(!K(m))throw m;qt("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const b=m.targetId;if(!m.fromCache){const v=c.Ms.get(b),E=v.withLastLimboFreeSnapshotVersion(v.snapshotVersion);c.Ms=c.Ms.insert(b,E)}}}),function(l,h){return a.apply(this,arguments)})(i.localStore,r))}),W8.apply(this,arguments)}function S0e(n,e){return G8.apply(this,arguments)}function G8(){return G8=(0,dt.Z)(function*(n,e){const t=ti(n);if(!t.currentUser.isEqual(e)){qt("SyncEngine","User change. New user:",e.toKey());const i=yield wte(t.localStore,e);t.currentUser=e,(s=t).Fc.forEach(o=>{o.forEach(a=>{a.reject(new Lt(rt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Fc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Kv(t,i.qs)}var s}),G8.apply(this,arguments)}function x0e(n,e){const t=ti(n),i=t.Oc.get(e);if(i&&i.Sc)return sr().add(i.key);{let s=sr();const r=t.Nc.get(e);if(!r)return s;for(const o of r){const a=t.Cc.get(o);s=s.unionWith(a.view.yc)}return s}}function E0e(n,e){return $8.apply(this,arguments)}function $8(){return $8=(0,dt.Z)(function*(n,e){const t=ti(n),i=yield _V(t.localStore,e.query,!0),s=e.view.vc(i);return t.isPrimaryClient&&U8(t,e.targetId,s.Pc),s}),$8.apply(this,arguments)}function _0e(n){return K8.apply(this,arguments)}function K8(){return K8=(0,dt.Z)(function*(n){const e=ti(n);return _te(e.localStore).then(t=>Kv(e,t))}),K8.apply(this,arguments)}function I0e(n,e,t,i){return Y8.apply(this,arguments)}function Y8(){return Y8=(0,dt.Z)(function*(n,e,t,i){const s=ti(n),r=yield function(o,a){const l=ti(o),h=ti(l.gs);return l.persistence.runTransaction("Lookup mutation documents","readonly",c=>h.Ge(c,a).next(m=>m?l.Us.Es(c,m):S.resolve(null)))}(s.localStore,e);var a;null!==r?("pending"===t?yield VD(s.remoteStore):"acknowledged"===t||"rejected"===t?(j8(s,e,i||null),z8(s,e),a=e,ti(ti(s.localStore).gs).Qe(a)):zi(),yield Kv(s,r)):qt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Y8.apply(this,arguments)}function Z8(){return Z8=(0,dt.Z)(function*(n,e){const t=ti(n);if(eG(t),tG(t),!0===e&&!0!==t.Lc){const i=t.sharedClientState.getAllActiveQueryTargets(),s=yield $te(t,i.toArray());t.Lc=!0,yield S8(t.remoteStore,!0);for(const r of s)kV(t.remoteStore,r)}else if(!1===e&&!1!==t.Lc){const i=[];let s=Promise.resolve();t.Nc.forEach((r,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):s=s.then(()=>(WD(t,o),BD(t.localStore,o,!0))),xM(t.remoteStore,o)}),yield s,yield $te(t,i),function(r){const o=ti(r);o.Oc.forEach((a,l)=>{xM(o.remoteStore,l)}),o.Mc.ii(),o.Oc=new Map,o.kc=new va(yi.comparator)}(t),t.Lc=!1,yield S8(t.remoteStore,!1)}}),Z8.apply(this,arguments)}function $te(n,e,t){return X8.apply(this,arguments)}function X8(){return X8=(0,dt.Z)(function*(n,e,t){const i=ti(n),s=[],r=[];for(const o of e){let a;const l=i.Nc.get(o);if(l&&0!==l.length){a=yield ND(i.localStore,hp(l[0]));for(const h of l){const c=i.Cc.get(h),m=yield E0e(i,c);m.snapshot&&r.push(m.snapshot)}}else{const h=yield Ete(i.localStore,o);a=yield ND(i.localStore,h),yield L8(i,Kte(h),o,!1)}s.push(a)}return i.Dc.To(r),s}),X8.apply(this,arguments)}function Kte(n){return QL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function D0e(n){const e=ti(n);return ti(ti(e.localStore).persistence).ds()}function k0e(n,e,t,i){return Q8.apply(this,arguments)}function Q8(){return Q8=(0,dt.Z)(function*(n,e,t,i){const s=ti(n);if(s.Lc)qt("SyncEngine","Ignoring unexpected query state notification.");else if(s.Nc.has(e))switch(t){case"current":case"not-current":{const r=yield _te(s.localStore),o=lE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Kv(s,r,o);break}case"rejected":yield BD(s.localStore,e,!0),WD(s,e,i);break;default:zi()}}),Q8.apply(this,arguments)}function R0e(n,e,t){return J8.apply(this,arguments)}function J8(){return J8=(0,dt.Z)(function*(n,e,t){const i=eG(n);if(i.Lc){for(const s of e){if(i.Nc.has(s)){qt("SyncEngine","Adding an already active target "+s);continue}const r=yield Ete(i.localStore,s),o=yield ND(i.localStore,r);yield L8(i,Kte(r),o.targetId,!1),kV(i.remoteStore,o)}for(const s of t)i.Nc.has(s)&&(yield BD(i.localStore,s,!1).then(()=>{xM(i.remoteStore,s),WD(i,s)}).catch(vE))}}),J8.apply(this,arguments)}function eG(n){const e=ti(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qte.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x0e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b0e.bind(null,e),e.Dc.To=a0e.bind(null,e.eventManager),e.Dc.qc=l0e.bind(null,e.eventManager),e}function tG(n){const e=ti(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y0e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v0e.bind(null,e),e}class Yte{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,dt.Z)(function*(){t.O=wM(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return Cte(this.persistence,new vte,e.initialUser,this.O)}jc(e){return new HCe(t8.bi,this.O)}Gc(e){return new Dte}terminate(){var e=this;return(0,dt.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Zte extends Yte{constructor(e,t,i){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,dt.Z)(function*(){yield t().call(i,e),yield function RCe(n){return XW.apply(this,arguments)}(i.localStore),yield i.zc.initialize(i,e),yield tG(i.zc.syncEngine),yield VD(i.zc.remoteStore),yield i.persistence.Hn(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}Wc(e){return Cte(this.persistence,new vte,e.initialUser,this.O)}Qc(e){return new yCe(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=$W(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Iu.withCacheSize(this.cacheSizeBytes):Iu.DEFAULT;return new GW(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Rte(),DV(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new Dte}}class L0e extends Zte{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,dt.Z)(function*(){yield t().call(i,e);const s=i.zc.syncEngine;i.sharedClientState instanceof r8&&(i.sharedClientState.syncEngine={hr:I0e.bind(null,s),lr:k0e.bind(null,s),dr:R0e.bind(null,s),ds:D0e.bind(null,s),ar:_0e.bind(null,s)},yield i.sharedClientState.start()),yield i.persistence.Hn(function(){var r=(0,dt.Z)(function*(o){yield function T0e(n,e){return Z8.apply(this,arguments)}(i.zc.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):o||i.gcScheduler.stop())});return function(o){return r.apply(this,arguments)}}())})()}Gc(e){const t=Rte();if(!r8.Vt(t))throw new Lt(rt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=$W(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new r8(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class iG{initialize(e,t){var i=this;return(0,dt.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>Wte(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=S0e.bind(null,i.syncEngine),yield S8(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new o0e}createDatastore(e){const t=wM(e.databaseInfo.databaseId),i=new qCe(e.databaseInfo);return new $Ce(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,s=e.asyncQueue,r=a=>Wte(this.syncEngine,a,0),o=kte.Vt()?new kte:new zCe,new YCe(t,i,s,r,o);var t,i,s,r,o}createSyncEngine(e,t){return function(i,s,r,o,a,l,h){const c=new p0e(i,s,r,o,a,l);return h&&(c.Lc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,dt.Z)(function*(t){const i=ti(t);qt("RemoteStore","RemoteStore shutting down."),i.Ko.add(5),yield HD(i),i.jo.shutdown(),i.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Xte(n,e=10240){let t=0;return{read:()=>(0,dt.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,dt.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class AV{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class M0e{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new Cr,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(i=>{i&&i.ac()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,dt.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,dt.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,dt.Z)(function*(){const t=yield e.tu();if(null===t)return null;const i=e.Xc.decode(t),s=Number(i);isNaN(s)&&e.eu(`length string (${i}) is not valid number`);const r=yield e.nu(s);return new h0e(JSON.parse(r),t.length+s)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,dt.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}nu(e){var t=this;return(0,dt.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const i=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,dt.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class O0e{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,dt.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Lt(rt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(s=(0,dt.Z)(function*(r,o){const a=ti(r),l=dE(a.O)+"/documents",h={documents:o.map(v=>cp(a.O,v))},c=yield a.Lr("BatchGetDocuments",l,h),m=new Map;c.forEach(v=>{const w=function ete(n,e){return"found"in e?function(t,i){gs(!!i.found);const s=dp(t,i.found.name),r=Tl(i.found.updateTime),o=new cc({mapValue:{fields:i.found.fields}});return Bo.newFoundDocument(s,r,o)}(n,e):"missing"in e?function(t,i){gs(!!i.missing),gs(!!i.readTime);const s=dp(t,i.missing),r=Tl(i.readTime);return Bo.newNoDocument(s,r)}(n,e):zi()}(a.O,v);m.set(w.key.toString(),w)});const b=[];return o.forEach(v=>{const w=m.get(v.toString());gs(!!w),b.push(w)}),b}),function(r,o){return s.apply(this,arguments)})(t.datastore,e);var s;return i.forEach(s=>t.recordVersion(s)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new qv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,dt.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,s)=>{const r=yi.fromPath(s);e.mutations.push(new Md(r,e.precondition(r)))}),yield(i=(0,dt.Z)(function*(s,r){const o=ti(s),a=dE(o.O)+"/documents",l={writes:r.map(h=>AD(o.O,h))};yield o.Mr("Commit",a,l)}),function(s,r){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zi();t=us.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Lt(rt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Wn.updateTime(t):Wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(us.min()))throw new Lt(rt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wn.updateTime(t)}return Wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class P0e{constructor(e,t,i,s){this.asyncQueue=e,this.datastore=t,this.updateFunction=i,this.deferred=s,this.ru=5,this.ro=new o8(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,dt.Z)(function*(){const t=new O0e(e.datastore),i=e.cu(t);i&&i.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(r=>{e.uu(r)}))}).catch(s=>{e.uu(s)})}))}cu(e){try{const t=this.updateFunction(e);return!Db(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!hM(t)}return!1}}class F0e{constructor(e,t,i,s){var r=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=El.UNAUTHENTICATED,this.clientId=qL.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=(0,dt.Z)(function*(a){qt("FirestoreClient","Received user=",a.uid),yield r.authCredentialListener(a),r.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(qt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,dt.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Lt(rt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,dt.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const s=jD(i,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Qte(n,e){return sG.apply(this,arguments)}function sG(){return sG=(0,dt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),qt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,dt.Z)(function*(r){i.isEqual(r)||(yield wte(e.localStore,r),i=r)});return function(r){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),sG.apply(this,arguments)}function Jte(n,e){return nG.apply(this,arguments)}function nG(){return nG=(0,dt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield rG(n);qt("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(s=>Nte(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>Nte(e.remoteStore,r)),n.onlineComponents=e}),nG.apply(this,arguments)}function rG(n){return oG.apply(this,arguments)}function oG(){return oG=(0,dt.Z)(function*(n){return n.offlineComponents||(qt("FirestoreClient","Using default OfflineComponentProvider"),yield Qte(n,new Yte)),n.offlineComponents}),oG.apply(this,arguments)}function LV(n){return aG.apply(this,arguments)}function aG(){return aG=(0,dt.Z)(function*(n){return n.onlineComponents||(qt("FirestoreClient","Using default OnlineComponentProvider"),yield Jte(n,new iG)),n.onlineComponents}),aG.apply(this,arguments)}function eie(n){return rG(n).then(e=>e.persistence)}function lG(n){return rG(n).then(e=>e.localStore)}function tie(n){return LV(n).then(e=>e.remoteStore)}function hG(n){return LV(n).then(e=>e.syncEngine)}function GD(n){return cG.apply(this,arguments)}function cG(){return cG=(0,dt.Z)(function*(n){const e=yield LV(n),t=e.eventManager;return t.onListen=f0e.bind(null,e.syncEngine),t.onUnlisten=m0e.bind(null,e.syncEngine),t}),cG.apply(this,arguments)}function iie(n,e,t={}){const i=new Cr;return n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return function(s,r,o,a,l){const h=new AV({next:m=>{r.enqueueAndForget(()=>T8(s,c));const b=m.docs.has(o);!b&&m.fromCache?l.reject(new Lt(rt.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&m.fromCache&&a&&"server"===a.source?l.reject(new Lt(rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),c=new R8(Jx(o.path),h,{includeMetadataChanges:!0,uc:!0});return _8(s,c)}(yield GD(n),n.asyncQueue,e,t,i)})),i.promise}function sie(n,e,t={}){const i=new Cr;return n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return function(s,r,o,a,l){const h=new AV({next:m=>{r.enqueueAndForget(()=>T8(s,c)),m.fromCache&&"server"===a.source?l.reject(new Lt(rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),c=new R8(o,h,{includeMetadataChanges:!0,uc:!0});return _8(s,c)}(yield GD(n),n.asyncQueue,e,t,i)})),i.promise}const nie=new Map;function dG(n,e,t){if(!t)throw new Lt(rt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rie(n,e,t,i){if(!0===e&&!0===i)throw new Lt(rt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oie(n){if(!yi.isDocumentKey(n))throw new Lt(rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aie(n){if(yi.isDocumentKey(n))throw new Lt(rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function MV(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":zi()}function Nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Lt(rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=MV(n);throw new Lt(rt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lie(n,e){if(e<=0)throw new Lt(rt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class hie{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Lt(rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Lt(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,rie("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class EM{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hie({}),this._settingsFrozen=!1,e instanceof Fv?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Lt(rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fv(s.options.projectId)}(e))}get app(){if(!this._app)throw new Lt(rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Lt(rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hie(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new hD;switch(t.type){case"gapi":const i=t.client;return gs(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new gW(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Lt(rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nie.get(e);t&&(qt("ComponentProvider","Removing Datastore"),nie.delete(e),t.terminate())}(this),Promise.resolve()}}class Vo{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vo(this.firestore,e,this._key)}}class Jc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Jc(this.firestore,e,this._query)}}class Nb extends Jc{constructor(e,t,i){super(e,t,Jx(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vo(this.firestore,null,new yi(e))}withConverter(e){return new Nb(this.firestore,e,this._path)}}function cie(n,e,...t){if(n=(0,ee.m9)(n),dG("collection","path",e),n instanceof EM){const i=Ln.fromString(e,...t);return aie(i),new Nb(n,null,i)}{if(!(n instanceof Vo||n instanceof Nb))throw new Lt(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ln.fromString(e,...t));return aie(i),new Nb(n.firestore,null,i)}}function OV(n,e,...t){if(n=(0,ee.m9)(n),1===arguments.length&&(e=qL.R()),dG("doc","path",e),n instanceof EM){const i=Ln.fromString(e,...t);return oie(i),new Vo(n,null,new yi(i))}{if(!(n instanceof Vo||n instanceof Nb))throw new Lt(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ln.fromString(e,...t));return oie(i),new Vo(n.firestore,n instanceof Nb?n.converter:null,new yi(i))}}function die(n,e){return n=(0,ee.m9)(n),e=(0,ee.m9)(e),(n instanceof Vo||n instanceof Nb)&&(e instanceof Vo||e instanceof Nb)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function uie(n,e){return n=(0,ee.m9)(n),e=(0,ee.m9)(e),n instanceof Jc&&e instanceof Jc&&n.firestore===e.firestore&&wD(n._query,e._query)&&n.converter===e.converter}class $0e{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new o8(this,"async_queue_retry"),this.yu=()=>{const t=DV();t&&qt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=DV();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=DV();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new Cr;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,dt.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!K(t))throw t;qt("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(i=>{throw this._u=i,this.wu=!1,Ha("INTERNAL UNHANDLED ERROR: ",function(r){let o=r.message||"";return r.stack&&(o=r.stack.includes(r.message)?r.stack:r.message+"\n"+r.stack),o}(i)),i}).then(i=>(this.wu=!1,i))));return this.hu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const s=E8.createAndSchedule(this,e,t,i,r=>this.Tu(r));return this.du.push(s),s}pu(){this._u&&zi()}verifyOperationInProgress(){}Au(){var e=this;return(0,dt.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function uG(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class K0e{constructor(){this._progressObserver={},this._taskCompletionResolver=new Cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class na extends EM{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new $0e,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||pie(this),this._firestoreClient.terminate()}}function Dl(n){return n._firestoreClient||pie(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function pie(n){var e;const t=n._freezeSettings(),i=(r=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new NH(n._databaseId,r,n._persistenceKey,(a=t).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var r,a;n._firestoreClient=new F0e(n._authCredentials,n._appCheckCredentials,n._queue,i)}function fie(n,e,t){const i=new Cr;return n.asyncQueue.enqueue((0,dt.Z)(function*(){try{yield Qte(n,t),yield Jte(n,e),i.resolve()}catch(s){if(!("FirebaseError"===(r=s).name?r.code===rt.FAILED_PRECONDITION||r.code===rt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var r})).then(()=>i.promise)}function mie(n){if(n._initialized||n._terminated)throw new Lt(rt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yv{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Lt(rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Il(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bb{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bb(Va.fromBase64String(e))}catch(t){throw new Lt(rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bb(Va.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class CE{constructor(e){this._methodName=e}}class PV{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Lt(rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Lt(rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sn(this._lat,e._lat)||sn(this._long,e._long)}}const nwe=/^__.*__$/;class rwe{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Lb(e,this.data,this.fieldMask,t,this.fieldTransforms):new rE(e,this.data,t,this.fieldTransforms)}}class gie{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Lb(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bie(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zi()}}class FV{constructor(e,t,i,s,r,o){this.settings=e,this.databaseId=t,this.O=i,this.ignoreUndefinedProperties=s,void 0===r&&this.vu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new FV(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Su({path:i,Cu:!1});return s.Nu(e),s}xu(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Su({path:i,Cu:!1});return s.vu(),s}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return HV(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(bie(this.Vu)&&nwe.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class owe{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=i||wM(e)}Fu(e,t,i,s=!1){return new FV({Vu:e,methodName:t,$u:i,path:Il.emptyPath(),Cu:!1,Mu:s},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function wE(n){const e=n._freezeSettings(),t=wM(n._databaseId);return new owe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function NV(n,e,t,i,s,r={}){const o=n.Fu(r.merge||r.mergeFields?2:0,e,t,s);gG("Data must be an object, but it was:",o,i);const a=Cie(i,o);let l,h;if(r.merge)l=new aw(o.fieldMask),h=o.fieldTransforms;else if(r.mergeFields){const c=[];for(const m of r.mergeFields){const b=bG(e,m,t);if(!o.contains(b))throw new Lt(rt.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Sie(c,b)||c.push(b)}l=new aw(c),h=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,h=o.fieldTransforms;return new rwe(new cc(a),l,h)}class _M extends CE{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _M}}function yie(n,e,t){return new FV({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class pG extends CE{_toFieldTransform(e){return new nE(e.path,new Uv)}isEqual(e){return e instanceof pG}}class awe extends CE{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=yie(this,e,!0),i=this.Bu.map(r=>SE(r,t)),s=new fw(i);return new nE(e.path,s)}isEqual(e){return this===e}}class lwe extends CE{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=yie(this,e,!0),i=this.Bu.map(r=>SE(r,t)),s=new mw(i);return new nE(e.path,s)}isEqual(e){return this===e}}class hwe extends CE{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Ab(e.O,iM(e.O,this.Lu));return new nE(e.path,t)}isEqual(e){return this===e}}function fG(n,e,t,i){const s=n.Fu(1,e,t);gG("Data must be an object, but it was:",s,i);const r=[],o=cc.empty();Gm(i,(l,h)=>{const c=BV(e,l,t);h=(0,ee.m9)(h);const m=s.xu(c);if(h instanceof _M)r.push(c);else{const b=SE(h,m);null!=b&&(r.push(c),o.set(c,b))}});const a=new aw(r);return new gie(o,a,s.fieldTransforms)}function mG(n,e,t,i,s,r){const o=n.Fu(1,e,t),a=[bG(e,i,t)],l=[s];if(r.length%2!=0)throw new Lt(rt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<r.length;b+=2)a.push(bG(e,r[b])),l.push(r[b+1]);const h=[],c=cc.empty();for(let b=a.length-1;b>=0;--b)if(!Sie(h,a[b])){const v=a[b];let w=l[b];w=(0,ee.m9)(w);const E=o.xu(v);if(w instanceof _M)h.push(v);else{const D=SE(w,E);null!=D&&(h.push(v),c.set(v,D))}}const m=new aw(h);return new gie(c,m,o.fieldTransforms)}function vie(n,e,t,i=!1){return SE(t,n.Fu(i?4:3,e))}function SE(n,e){if(wie(n=(0,ee.m9)(n)))return gG("Unsupported field value:",e,n),Cie(n,e);if(n instanceof CE)return function(t,i){if(!bie(i.Vu))throw i.Ou(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Ou(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,i){const s=[];let r=0;for(const o of t){let a=SE(o,i.ku(r));null==a&&(a={nullValue:"NULL_VALUE"}),s.push(a),r++}return{arrayValue:{values:s}}}(n,e)}return function(t,i){if(null===(t=(0,ee.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return iM(i.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=_l.fromDate(t);return{timestampValue:ID(i.O,s)}}if(t instanceof _l){const s=new _l(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ID(i.O,s)}}if(t instanceof PV)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Bb)return{bytesValue:aV(i.O,t._byteString)};if(t instanceof Vo){const s=i.databaseId,r=t.firestore._databaseId;if(!r.isEqual(s))throw i.Ou(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fM(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.Ou(`Unsupported field value: ${MV(t)}`)}(n,e)}function Cie(n,e){const t={};return WL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gm(n,(i,s)=>{const r=SE(s,e.Du(i));null!=r&&(t[i]=r)}),{mapValue:{fields:t}}}function wie(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof _l||n instanceof PV||n instanceof Bb||n instanceof Vo||n instanceof CE)}function gG(n,e,t){if(!wie(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=MV(t);throw e.Ou("an object"===i?n+" a custom object":n+" "+i)}var i}function bG(n,e,t){if((e=(0,ee.m9)(e))instanceof Yv)return e._internalPath;if("string"==typeof e)return BV(n,e);throw HV("Field path arguments must be of type string or ",n,!1,void 0,t)}const cwe=new RegExp("[~\\*/\\[\\]]");function BV(n,e,t){if(e.search(cwe)>=0)throw HV(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yv(...e.split("."))._internalPath}catch(i){throw HV(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function HV(n,e,t,i,s){const r=i&&!i.isEmpty(),o=void 0!==s;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new Lt(rt.INVALID_ARGUMENT,a+n+l)}function Sie(n,e){return n.some(t=>t.isEqual(e))}class IM{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Vo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dwe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(VV("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dwe extends IM{data(){return super.data()}}function VV(n,e){return"string"==typeof e?BV(n,e):e instanceof Yv?e._internalPath:e._delegate._internalPath}class xE{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zv extends IM{constructor(e,t,i,s,r,o){super(e,t,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new TM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(VV("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class TM extends Zv{data(e={}){return super.data(e)}}class Iw{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new xE(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new TM(this._firestore,this._userDataWriter,i.key,i,new xE(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Lt(rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let r=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new TM(i._firestore,i._userDataWriter,o.doc.key,o.doc,new xE(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:r++}))}{let r=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||3!==o.type).map(o=>{const a=new TM(i._firestore,i._userDataWriter,o.doc.key,o.doc,new xE(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==o.type&&(l=r.indexOf(o.doc.key),r=r.delete(o.doc.key)),1!==o.type&&(r=r.add(o.doc),h=r.indexOf(o.doc.key)),{type:uwe(o.type),doc:a,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uwe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zi()}}function xie(n,e){return n instanceof Zv&&e instanceof Zv?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Iw&&e instanceof Iw&&n._firestore===e._firestore&&uie(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Eie(n){if(eM(n)&&0===n.explicitOrderBy.length)throw new Lt(rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class DM{}function Tw(n,...e){for(const t of e)n=t._apply(n);return n}class pwe extends DM{constructor(e,t,i){super(),this.Uu=e,this.qu=t,this.Ku=i,this.type="where"}_apply(e){const t=wE(e.firestore),i=function(s,r,o,a,l,h,c){let m;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new Lt(rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){Rie(c,h);const v=[];for(const w of c)v.push(kie(a,s,w));m={arrayValue:{values:v}}}else m=kie(a,s,c)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||Rie(c,h),m=vie(o,"where",c,"in"===h||"not-in"===h);const b=Dh.create(l,h,m);return function(v,w){if(w.S()){const D=$H(v);if(null!==D&&!D.isEqual(w.field))throw new Lt(rt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${D.toString()}' and '${w.field.toString()}'`);const L=GH(v);null!==L&&Aie(0,w.field,L)}const E=function(D,L){for(const N of D.filters)if(L.indexOf(N.op)>=0)return N.op;return null}(v,function(D){switch(D){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(w.op));if(null!==E)throw new Lt(rt.INVALID_ARGUMENT,E===w.op?`Invalid query. You cannot use more than one '${w.op.toString()}' filter.`:`Invalid query. You cannot use '${w.op.toString()}' filters with '${E.toString()}' filters.`)}(s,b),b}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new Jc(e.firestore,e.converter,function(s,r){const o=s.filters.concat([r]);return new kb(s.path,s.collectionGroup,s.explicitOrderBy.slice(),o,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,i))}}class mwe extends DM{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(i,s,r){if(null!==i.startAt)throw new Lt(rt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Lt(rt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new jv(s,r);return function(a,l){if(null===GH(a)){const h=$H(a);null!==h&&Aie(0,h,l.field)}}(i,o),o}(e._query,this.Uu,this.Gu);return new Jc(e.firestore,e.converter,function(i,s){const r=i.explicitOrderBy.concat([s]);return new kb(i.path,i.collectionGroup,r,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class _ie extends DM{constructor(e,t,i){super(),this.type=e,this.ju=t,this.Qu=i}_apply(e){return new Jc(e.firestore,e.converter,tE(e._query,this.ju,this.Qu))}}class Iie extends DM{constructor(e,t,i){super(),this.type=e,this.Wu=t,this.zu=i}_apply(e){const t=Die(e,this.type,this.Wu,this.zu);return new Jc(e.firestore,e.converter,(s=t,new kb((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Tie extends DM{constructor(e,t,i){super(),this.type=e,this.Wu=t,this.zu=i}_apply(e){const t=Die(e,this.type,this.Wu,this.zu);return new Jc(e.firestore,e.converter,(s=t,new kb((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function Die(n,e,t,i){if(t[0]=(0,ee.m9)(t[0]),t[0]instanceof IM)return function(s,r,o,a,l){if(!a)throw new Lt(rt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const c of eE(s))if(c.field.isKeyField())h.push(mD(r,a.key));else{const m=a.data.field(c.field);if(uD(m))throw new Lt(rt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const b=c.field.canonicalString();throw new Lt(rt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}h.push(m)}return new zv(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const s=wE(n.firestore);return function(r,o,a,l,h,c){const m=r.explicitOrderBy;if(h.length>m.length)throw new Lt(rt.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let v=0;v<h.length;v++){const w=h[v];if(m[v].field.isKeyField()){if("string"!=typeof w)throw new Lt(rt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof w}`);if(!KH(r)&&-1!==w.indexOf("/"))throw new Lt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${w}' contains a slash.`);const E=r.path.child(Ln.fromString(w));if(!yi.isDocumentKey(E))throw new Lt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const D=new yi(E);b.push(mD(o,D))}else{const E=vie(a,l,w);b.push(E)}}return new zv(b,c)}(n._query,n.firestore._databaseId,s,e,t,i)}}function kie(n,e,t){if("string"==typeof(t=(0,ee.m9)(t))){if(""===t)throw new Lt(rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KH(e)&&-1!==t.indexOf("/"))throw new Lt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ln.fromString(t));if(!yi.isDocumentKey(i))throw new Lt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return mD(n,new yi(i))}if(t instanceof Vo)return mD(n,t._key);throw new Lt(rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${MV(t)}.`)}function Rie(n,e){if(!Array.isArray(n)||0===n.length)throw new Lt(rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Lt(rt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Aie(n,e,t){if(!t.isEqual(e))throw new Lt(rt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class yG{convertValue(e,t="none"){switch(Nv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return No(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zi()}}convertObject(e,t){const i={};return Gm(e.fields,(s,r)=>{i[s]=this.convertValue(r,t)}),i}convertGeoPoint(e){return new PV(No(e.latitude),No(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=FH(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(lw(e));default:return null}}convertTimestamp(e){const t=$m(e);return new _l(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ln.fromString(e);gs(bM(i));const s=new Fv(i.get(1),i.get(3)),r=new yi(i.popFirst(5));return s.isEqual(t)||Ha(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}function zV(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class xwe extends yG{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vo(this.firestore,null,t)}}class Lie{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wE(e)}set(e,t,i){this._verifyNotCommitted();const s=Dw(e,this._firestore),r=zV(s.converter,t,i),o=NV(this._dataReader,"WriteBatch.set",s._key,r,null!==s.converter,i);return this._mutations.push(o.toMutation(s._key,Wn.none())),this}update(e,t,i,...s){this._verifyNotCommitted();const r=Dw(e,this._firestore);let o;return o="string"==typeof(t=(0,ee.m9)(t))||t instanceof Yv?mG(this._dataReader,"WriteBatch.update",r._key,t,i,s):fG(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(o.toMutation(r._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dw(e,this._firestore);return this._mutations=this._mutations.concat(new qv(t._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Lt(rt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dw(n,e){if((n=(0,ee.m9)(n)).firestore!==e)throw new Lt(rt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class EE extends yG{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vo(this.firestore,null,t)}}function Mie(n,e,t){n=Nn(n,Vo);const i=Nn(n.firestore,na),s=zV(n.converter,e,t);return $D(i,[NV(wE(i),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Wn.none())])}function Oie(n,e,t,...i){n=Nn(n,Vo);const s=Nn(n.firestore,na),r=wE(s);let o;return o="string"==typeof(e=(0,ee.m9)(e))||e instanceof Yv?mG(r,"updateDoc",n._key,e,t,i):fG(r,"updateDoc",n._key,e),$D(s,[o.toMutation(n._key,Wn.exists(!0))])}function Pie(n,...e){var t,i,s;n=(0,ee.m9)(n);let r={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||uG(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges};if(uG(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(i=m.error)||void 0===i?void 0:i.bind(m),e[o+2]=null===(s=m.complete)||void 0===s?void 0:s.bind(m)}let l,h,c;if(n instanceof Vo)h=Nn(n.firestore,na),c=Jx(n._key.path),l={next:m=>{e[o]&&e[o](vG(h,n,m))},error:e[o+1],complete:e[o+2]};else{const m=Nn(n,Jc);h=Nn(m.firestore,na),c=m._query;const b=new EE(h);l={next:v=>{e[o]&&e[o](new Iw(h,b,m,v))},error:e[o+1],complete:e[o+2]},Eie(n._query)}return function(m,b,v,w){const E=new AV(w),D=new R8(b,E,v);return m.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return _8(yield GD(m),D)})),()=>{E.Jc(),m.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return T8(yield GD(m),D)}))}}(Dl(h),c,a,l)}function $D(n,e){return function(t,i){const s=new Cr;return t.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return function g0e(n,e,t){return P8.apply(this,arguments)}(yield hG(t),i,s)})),s.promise}(Dl(n),e)}function vG(n,e,t){const i=t.docs.get(e._key),s=new EE(n);return new Zv(n,s,e._key,i,new xE(t.hasPendingWrites,t.fromCache),e.converter)}class Mwe extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wE(e)}get(e){const t=Dw(e,this._firestore),i=new xwe(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return zi();const r=s[0];if(r.isFoundDocument())return new IM(this._firestore,i,r.key,r,t.converter);if(r.isNoDocument())return new IM(this._firestore,i,t._key,null,t.converter);throw zi()})}set(e,t,i){const s=Dw(e,this._firestore),r=zV(s.converter,t,i),o=NV(this._dataReader,"Transaction.set",s._key,r,null!==s.converter,i);return this._transaction.set(s._key,o),this}update(e,t,i,...s){const r=Dw(e,this._firestore);let o;return o="string"==typeof(t=(0,ee.m9)(t))||t instanceof Yv?mG(this._dataReader,"Transaction.update",r._key,t,i,s):fG(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,o),this}delete(e){const t=Dw(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Dw(e,this._firestore),i=new EE(this._firestore);return super.get(e).then(s=>new Zv(this._firestore,i,t._key,s._document,new xE(!1,!1),t.converter))}}function CG(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Lt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Nie(){if("undefined"==typeof Uint8Array)throw new Lt("unimplemented","Uint8Arrays are not available in this environment.")}function Bie(){if(!function yW(){return"undefined"!=typeof atob}())throw new Lt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Mv=Kr.SDK_VERSION,(0,Kr._registerComponent)(new mu.wA("firestore",(t,{options:i})=>{const s=t.getProvider("app").getImmediate(),r=new na(s,new fW(t.getProvider("auth-internal")),new cD(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),r._setSettings(i),r},"PUBLIC")),(0,Kr.registerVersion)(ow,"3.4.5",n),(0,Kr.registerVersion)(ow,"3.4.5","esm2017")}();class kM{constructor(e){this._delegate=e}static fromBase64String(e){return Bie(),new kM(Bb.fromBase64String(e))}static fromUint8Array(e){return Nie(),new kM(Bb.fromUint8Array(e))}toBase64(){return Bie(),this._delegate.toBase64()}toUint8Array(){return Nie(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wG(n){return function jwe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class Uwe{enableIndexedDbPersistence(e,t){return function Z0e(n,e){mie(n=Nn(n,na));const t=Dl(n),i=n._freezeSettings(),s=new iG;return fie(t,s,new Zte(s,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function X0e(n){mie(n=Nn(n,na));const e=Dl(n),t=n._freezeSettings(),i=new iG;return fie(e,i,new L0e(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Q0e(n){if(n._initialized&&!n._terminated)throw new Lt(rt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Cr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,dt.Z)(function*(){try{yield(t=(0,dt.Z)(function*(i){if(!A.Vt())return Promise.resolve();const s=i+"main";yield A.delete(s)}),function(i){return t.apply(this,arguments)})($W(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Hie{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fv||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Yx("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function W0e(n,e,t,i={}){var s;const r=(n=Nn(n,EM))._getSettings();if("firestore.googleapis.com"!==r.host&&r.host!==e&&Yx("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},r),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let o,a;if("string"==typeof i.mockUserToken)o=i.mockUserToken,a=El.MOCK_USER;else{o=(0,ee.Sg)(i.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new Lt(rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new El(l)}n._authCredentials=new Zx(new MH(o,a))}}(this._delegate,e,t,i)}enableNetwork(){return function ewe(n){return function N0e(n){return n.asyncQueue.enqueue((0,dt.Z)(function*(){const e=yield eie(n),t=yield tie(n);return e.setNetworkEnabled(!0),function(i){const s=ti(i);return s.Ko.delete(0),SM(s)}(t)}))}(Dl(n=Nn(n,na)))}(this._delegate)}disableNetwork(){return function twe(n){return function B0e(n){return n.asyncQueue.enqueue((0,dt.Z)(function*(){const e=yield eie(n),t=yield tie(n);return e.setNetworkEnabled(!1),(i=(0,dt.Z)(function*(s){const r=ti(s);r.Ko.add(0),yield HD(r),r.Qo.set("Offline")}),function(s){return i.apply(this,arguments)})(t);var i}))}(Dl(n=Nn(n,na)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,rie("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function J0e(n){return function(e){const t=new Cr;return e.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return function C0e(n,e){return V8.apply(this,arguments)}(yield hG(e),t)})),t.promise}(Dl(n=Nn(n,na)))}(this._delegate)}onSnapshotsInSync(e){return function Lwe(n,e){return function z0e(n,e){const t=new AV(e);return n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return i=yield GD(n),s=t,ti(i).Zo.add(s),void s.next();var i,s})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return i=yield GD(n),s=t,void ti(i).Zo.delete(s);var i,s}))}}(Dl(n=Nn(n,na)),uG(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Lt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new KD(this,cie(this._delegate,e))}catch(t){throw Od(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sf(this,OV(this._delegate,e))}catch(t){throw Od(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Pd(this,function G0e(n,e){if(n=Nn(n,EM),dG("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Lt(rt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Jc(n,null,(t=e,new kb(Ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Od(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Owe(n,e){return function j0e(n,e){const t=new Cr;return n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){const i=yield(s=n,LV(s).then(r=>r.datastore));var s;new P0e(n.asyncQueue,i,e,t).run()})),t.promise}(Dl(n=Nn(n,na)),t=>e(new Mwe(n,t)))}(this._delegate,t=>e(new Vie(this,t)))}batch(){return Dl(this._delegate),new zie(new Lie(this._delegate,e=>$D(this._delegate,e)))}loadBundle(e){return function iwe(n,e){const t=Dl(n=Nn(n,na)),i=new K0e;return function U0e(n,e,t,i){const s=function(r,o){let a;return a="string"==typeof r?(new TextEncoder).encode(r):r,l=function(l,h){if(l instanceof Uint8Array)return Xte(l,h);if(l instanceof ArrayBuffer)return Xte(new Uint8Array(l),h);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),new M0e(l,o);var l}(t,wM(e));n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){!function A0e(n,e,t){const i=ti(n);var s;(s=(0,dt.Z)(function*(r,o,a){try{const l=yield o.getMetadata();if(yield function(b,v){const w=ti(b),E=Tl(v.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",D=>w.Kn.getBundleMetadata(D,v.id)).then(D=>!!D&&D.createTime.compareTo(E)>=0)}(r.localStore,l))return yield o.close(),void a._completeWith((b=l,{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}));a._updateProgress(Vte(l));const h=new c0e(l,r.localStore,o.O);let c=yield o.Kc();for(;c;){const b=yield h.lc(c);b&&a._updateProgress(b),c=yield o.Kc()}const m=yield h.complete();yield Kv(r,m.ws,void 0),yield function(b,v){const w=ti(b);return w.persistence.runTransaction("Save bundle","readwrite",E=>w.Kn.saveBundleMetadata(E,v))}(r.localStore,l),a._completeWith(m.progress)}catch(l){Yx("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l)}var b}),function(r,o,a){return s.apply(this,arguments)})(i,e,t).then(()=>{i.sharedClientState.notifyBundleLoaded()})}(yield hG(n),s,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function swe(n,e){return function q0e(n,e){return n.asyncQueue.enqueue((0,dt.Z)(function*(){return function(t,i){const s=ti(t);return s.persistence.runTransaction("Get named query","readonly",r=>s.Kn.getNamedQuery(r,i))}(yield lG(n),e)}))}(Dl(n=Nn(n,na)),e).then(t=>t?new Jc(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Pd(this,t):null)}}class jV extends yG{constructor(e){super(),this.firestore=e}convertBytes(e){return new kM(new Bb(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sf.forKey(t,this.firestore,null)}}class Vie{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jV(e)}get(e){const t=IE(e);return this._delegate.get(t).then(i=>new RM(this._firestore,new Zv(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const s=IE(e);return i?(CG("Transaction.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const r=IE(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,i,...s),this}delete(e){const t=IE(e);return this._delegate.delete(t),this}}class zie{constructor(e){this._delegate=e}set(e,t,i){const s=IE(e);return i?(CG("WriteBatch.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const r=IE(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,i,...s),this}delete(e){const t=IE(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class _E{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new TM(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new AM(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=_E.INSTANCES;let s=i.get(e);s||(s=new WeakMap,i.set(e,s));let r=s.get(t);return r||(r=new _E(e,new jV(e),t),s.set(t,r)),r}}_E.INSTANCES=new WeakMap;class Sf{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jV(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Lt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sf(t,new Vo(t._delegate,i,new yi(e)))}static forKey(e,t,i){return new Sf(t,new Vo(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new KD(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new KD(this.firestore,cie(this._delegate,e))}catch(t){throw Od(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ee.m9)(e))instanceof Vo&&die(this._delegate,e)}set(e,t){t=CG("DocumentReference.set",t);try{return t?Mie(this._delegate,e,t):Mie(this._delegate,e)}catch(i){throw Od(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?Oie(this._delegate,e):Oie(this._delegate,e,t,...i)}catch(s){throw Od(s,"updateDoc()","DocumentReference.update()")}}delete(){return function Rwe(n){return $D(Nn(n.firestore,na),[new qv(n._key,Wn.none())])}(this._delegate)}onSnapshot(...e){const t=jie(e),i=Uie(e,s=>new RM(this.firestore,new Zv(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return Pie(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function _we(n){n=Nn(n,Vo);const e=Nn(n.firestore,na),t=Dl(e),i=new EE(e);return function H0e(n,e){const t=new Cr;return n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return(i=(0,dt.Z)(function*(s,r,o){try{const a=yield function(l,h){const c=ti(l);return c.persistence.runTransaction("read document","readonly",m=>c.Us.ys(m,h))}(s,r);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Lt(rt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=jD(a,`Failed to get document '${r} from cache`);o.reject(l)}}),function(s,r,o){return i.apply(this,arguments)})(yield lG(n),e,t);var i})),t.promise}(t,n._key).then(s=>new Zv(e,i,n._key,s,new xE(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Iwe(n){n=Nn(n,Vo);const e=Nn(n.firestore,na);return iie(Dl(e),n._key,{source:"server"}).then(t=>vG(e,n,t))}(this._delegate):function Ewe(n){n=Nn(n,Vo);const e=Nn(n.firestore,na);return iie(Dl(e),n._key).then(t=>vG(e,n,t))}(this._delegate),t.then(i=>new RM(this.firestore,new Zv(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Sf(this.firestore,this._delegate.withConverter(e?_E.getInstance(this.firestore,e):null))}}function Od(n,e,t){return n.message=n.message.replace(e,t),n}function jie(n){for(const e of n)if("object"==typeof e&&!wG(e))return e;return{}}function Uie(n,e){var t,i;let s;return s=wG(n[0])?n[0]:wG(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:r=>{s.next&&s.next(e(r))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(i=s.complete)||void 0===i?void 0:i.bind(s)}}class RM{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sf(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xie(this._delegate,e._delegate)}}class AM extends RM{data(e){const t=this._delegate.data(e);return function pW(n,e){n||zi()}(void 0!==t),t}}class Pd{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jV(e)}where(e,t,i){try{return new Pd(this.firestore,Tw(this._delegate,function fwe(n,e,t){const i=e,s=VV("where",n);return new pwe(s,i,t)}(e,t,i)))}catch(s){throw Od(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Pd(this.firestore,Tw(this._delegate,function gwe(n,e="asc"){const t=e,i=VV("orderBy",n);return new mwe(i,t)}(e,t)))}catch(i){throw Od(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Pd(this.firestore,Tw(this._delegate,function bwe(n){return lie("limit",n),new _ie("limit",n,"F")}(e)))}catch(t){throw Od(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Pd(this.firestore,Tw(this._delegate,function ywe(n){return lie("limitToLast",n),new _ie("limitToLast",n,"L")}(e)))}catch(t){throw Od(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Pd(this.firestore,Tw(this._delegate,function vwe(...n){return new Iie("startAt",n,!0)}(...e)))}catch(t){throw Od(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Pd(this.firestore,Tw(this._delegate,function Cwe(...n){return new Iie("startAfter",n,!1)}(...e)))}catch(t){throw Od(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Pd(this.firestore,Tw(this._delegate,function wwe(...n){return new Tie("endBefore",n,!1)}(...e)))}catch(t){throw Od(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Pd(this.firestore,Tw(this._delegate,function Swe(...n){return new Tie("endAt",n,!0)}(...e)))}catch(t){throw Od(t,"endAt()","Query.endAt()")}}isEqual(e){return uie(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Dwe(n){n=Nn(n,Jc);const e=Nn(n.firestore,na),t=Dl(e),i=new EE(e);return function V0e(n,e){const t=new Cr;return n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return(i=(0,dt.Z)(function*(s,r,o){try{const a=yield _V(s,r,!0),l=new Ute(r,a.Ks),h=l.Ic(a.documents),c=l.applyChanges(h,!1);o.resolve(c.snapshot)}catch(a){const l=jD(a,`Failed to execute query '${r} against cache`);o.reject(l)}}),function(s,r,o){return i.apply(this,arguments)})(yield lG(n),e,t);var i})),t.promise}(t,n._query).then(s=>new Iw(e,i,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function kwe(n){n=Nn(n,Jc);const e=Nn(n.firestore,na),t=Dl(e),i=new EE(e);return sie(t,n._query,{source:"server"}).then(s=>new Iw(e,i,n,s))}(this._delegate):function Twe(n){n=Nn(n,Jc);const e=Nn(n.firestore,na),t=Dl(e),i=new EE(e);return Eie(n._query),sie(t,n._query).then(s=>new Iw(e,i,n,s))}(this._delegate),t.then(i=>new SG(this.firestore,new Iw(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=jie(e),i=Uie(e,s=>new SG(this.firestore,new Iw(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return Pie(this._delegate,t,i)}withConverter(e){return new Pd(this.firestore,this._delegate.withConverter(e?_E.getInstance(this.firestore,e):null))}}class Wwe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new AM(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class SG{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Pd(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new AM(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Wwe(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new AM(this._firestore,i))})}isEqual(e){return xie(this._delegate,e._delegate)}}class KD extends Pd{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sf(this.firestore,e):null}doc(e){try{return new Sf(this.firestore,void 0===e?OV(this._delegate):OV(this._delegate,e))}catch(t){throw Od(t,"doc()","CollectionReference.doc()")}}add(e){return function Awe(n,e){const t=Nn(n.firestore,na),i=OV(n),s=zV(n.converter,e);return $D(t,[NV(wE(n.firestore),"addDoc",i._key,s,null!==n.converter,{}).toMutation(i._key,Wn.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Sf(this.firestore,t))}isEqual(e){return die(this._delegate,e._delegate)}withConverter(e){return new KD(this.firestore,this._delegate.withConverter(e?_E.getInstance(this.firestore,e):null))}}function IE(n){return Nn(n,Vo)}class xG{constructor(...e){this._delegate=new Yv(...e)}static documentId(){return new xG(Il.keyField().canonicalString())}isEqual(e){return(e=(0,ee.m9)(e))instanceof Yv&&this._delegate._internalPath.isEqual(e._internalPath)}}class TE{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Fwe(){return new pG("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new TE(e)}static delete(){const e=function Pwe(){return new _M("deleteField")}();return e._methodName="FieldValue.delete",new TE(e)}static arrayUnion(...e){const t=function Nwe(...n){return new awe("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new TE(t)}static arrayRemove(...e){const t=function Bwe(...n){return new lwe("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new TE(t)}static increment(e){const t=function Hwe(n){return new hwe("increment",n)}(e);return t._methodName="FieldValue.increment",new TE(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Gwe={Firestore:Hie,GeoPoint:PV,Timestamp:_l,Blob:kM,Transaction:Vie,WriteBatch:zie,DocumentReference:Sf,DocumentSnapshot:RM,Query:Pd,QueryDocumentSnapshot:AM,QuerySnapshot:SG,CollectionReference:KD,FieldPath:xG,FieldValue:TE,setLogLevel:function qwe(n){!function LH(n){Wm.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function qie(n,e){return function Ywe(n,e=O0.z){return new Fn.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function EG(n,e){return qie(n,e).pipe((0,Ni.U)(t=>({payload:t,type:"query"})))}function UV(n,e){return EG(n,e).pipe(Yl(void 0),DT(),(0,Ni.U)(([t,i])=>{const s=i.payload.docChanges(),r=s.map(o=>({type:o.type,payload:o}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((o,a)=>{const l=s.find(c=>c.doc.ref.isEqual(o.ref)),h=null==t?void 0:t.payload.docs.find(c=>c.ref.isEqual(o.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(o.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(o.metadata)||r.push({type:"modified",payload:{oldIndex:a,newIndex:a,type:"modified",doc:o}})}),r}))}function Wie(n,e,t){return UV(n,t).pipe(vh((i,s)=>function Xwe(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function Qwe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return _G(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return _G(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _G(n,e.oldIndex,1)}return n}(n,i))}),n}(i,s.map(r=>r.payload),e),[]),QA(),(0,Ni.U)(i=>i.map(s=>({type:s.type,payload:s}))))}function _G(n,e,t,...i){const s=n.slice();return s.splice(e,t,...i),s}function Gie(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Kwe(n){(function $we(n,e){n.INTERNAL.registerComponent(new mu.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(i,s)},"PUBLIC").setServiceProps(Object.assign({},Gwe)))})(n,(e,t)=>new Hie(e,t,new Uwe)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(P0.Z);class $ie{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=UV(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ni.U)(i=>i.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Yl(void 0),DT(),Un(([i,s])=>s.length>0||!i),(0,Ni.U)(([i,s])=>s),qn.iC)}auditTrail(e){return this.stateChanges(e).pipe(vh((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=Gie(e);return Wie(this.query,t,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(e={}){return EG(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ni.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),qn.iC)}get(e){return(0,ir.D)(this.query.get(e)).pipe(qn.iC)}add(e){return this.ref.add(e)}doc(e){return new Kie(this.ref.doc(e),this.afs)}}class Kie{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:s,query:r}=Xie(i,t);return new $ie(s,r,this.afs)}snapshotChanges(){return function Zwe(n,e){return qie(n,e).pipe(Yl(void 0),DT(),(0,Ni.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ni.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ir.D)(this.ref.get(e)).pipe(qn.iC)}}class Jwe{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?UV(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ni.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),Un(t=>t.length>0),qn.iC):UV(this.query,this.afs.schedulers.outsideAngular).pipe(qn.iC)}auditTrail(e){return this.stateChanges(e).pipe(vh((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=Gie(e);return Wie(this.query,t,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(e={}){return EG(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ni.U)(i=>i.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),qn.iC)}get(e){return(0,ir.D)(this.query.get(e)).pipe(qn.iC)}}const Yie=new d.OlP("angularfire2.enableFirestorePersistence"),Zie=new d.OlP("angularfire2.firestore.persistenceSettings"),eSe=new d.OlP("angularfire2.firestore.settings"),tSe=new d.OlP("angularfire2.firestore.use-emulator");function Xie(n,e=(t=>t)){return{query:e(n),ref:n}}let Qie=(()=>{class n{constructor(t,i,s,r,o,a,l,h,c,m,b,v,w,E,D,L,N){this.schedulers=l;const V=(0,nl.on)(t,a,i),$=c;m&&gT(V,a,b,w,E,D,v,L),[this.firestore,this.persistenceEnabled$]=(0,nl.cc)(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{const ie=a.runOutsideAngular(()=>V.firestore());if(r&&ie.settings(r),$&&ie.useEmulator(...$),s&&!tc(o)){const Q=()=>{try{return(0,ir.D)(ie.enablePersistence(h||void 0).then(()=>!0,()=>!1))}catch(le){return"undefined"!=typeof console&&console.warn(le),ei(!1)}};return[ie,a.runOutsideAngular(Q)]}return[ie,ei(!1)]},[r,$,s])}collection(t,i){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:o}=Xie(s,i),a=this.schedulers.ngZone.run(()=>r);return new $ie(a,o,this)}collectionGroup(t,i){const s=i||(o=>o),r=this.firestore.collectionGroup(t);return new Jwe(s(r),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>i);return new Kie(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(nl.Dh),d.LFG(nl.xv,8),d.LFG(Yie,8),d.LFG(eSe,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qn.HU),d.LFG(Zie,8),d.LFG(tSe,8),d.LFG(M0,8),d.LFG(mA,8),d.LFG(gA,8),d.LFG(bx,8),d.LFG(BB,8),d.LFG(bA,8),d.LFG(mT,8),d.LFG(Kc,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iSe=(()=>{class n{constructor(){L0.Z.registerVersion("angularfire",qn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Yie,useValue:!0},{provide:Zie,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Qie]}),n})();var Jie=se(5032);const ese="@firebase/database";let IG="";function ise(n){IG=n}class rSe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,ee.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,ee.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class oSe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,ee.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const sse=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new rSe(e)}}catch(e){}return new oSe},DE=sse("localStorage"),TG=sse("sessionStorage"),YD=new Rd.Yd("@firebase/database"),nse=function(){let n=1;return function(){return n++}}(),rse=function(n){const e=(0,ee.dS)(n),t=new ee.gQ;t.update(e);const i=t.digest();return ee.US.encodeByteArray(i)},LM=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=LM.apply(null,i):e+="object"==typeof i?(0,ee.Pz)(i):i,e+=" "}return e};let kE=null,ose=!0;const ase=function(n,e){(0,ee.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(YD.logLevel=Rd.in.VERBOSE,kE=YD.log.bind(YD),e&&TG.set("logging_enabled",!0)):"function"==typeof n?kE=n:(kE=null,TG.remove("logging_enabled"))},Lh=function(...n){if(!0===ose&&(ose=!1,null===kE&&!0===TG.get("logging_enabled")&&ase(!0)),kE){const e=LM.apply(null,n);kE(e)}},MM=function(n){return function(...e){Lh(n,...e)}},DG=function(...n){const e="FIREBASE INTERNAL ERROR: "+LM(...n);YD.error(e)},Hb=function(...n){const e=`FIREBASE FATAL ERROR: ${LM(...n)}`;throw YD.error(e),new Error(e)},Fd=function(...n){const e="FIREBASE WARNING: "+LM(...n);YD.warn(e)},qV=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Xv="[MIN_NAME]",Vb="[MAX_NAME]",RE=function(n,e){if(n===e)return 0;if(n===Xv||e===Vb)return-1;if(e===Xv||n===Vb)return 1;{const t=WV(n),i=WV(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},hSe=function(n,e){return n===e?0:n<e?-1:1},OM=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,ee.Pz)(e))},kG=function(n){if("object"!=typeof n||null===n)return(0,ee.Pz)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,ee.Pz)(e[i]),t+=":",t+=kG(n[e[i]]);return t+="}",t},lse=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let s=0;s<t;s+=e)i.push(n.substring(s,s+e>t?t:s+e));return i};function Mh(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const hse=function(n){(0,ee.hu)(!qV(n),"Invalid JSON number");const i=1023;let s,r,o,a,l;0===n?(r=0,o=0,s=1/n==-1/0?1:0):(s=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),r=a+i,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(r=0,o=Math.round(n/Math.pow(2,-1074))));const h=[];for(l=52;l;l-=1)h.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)h.push(r%2?1:0),r=Math.floor(r/2);h.push(s?1:0),h.reverse();const c=h.join("");let m="";for(l=0;l<64;l+=8){let b=parseInt(c.substr(l,8),2).toString(16);1===b.length&&(b="0"+b),m+=b}return m.toLowerCase()},pSe=new RegExp("^-?(0*)\\d{1,10}$"),RG=2147483647,WV=function(n){if(pSe.test(n)){const e=Number(n);if(e>=-2147483648&&e<=RG)return e}return null},ZD=function(n){try{n()}catch(e){setTimeout(()=>{throw Fd("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},PM=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class mSe{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Fd(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class gSe{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Lh("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fd(e)}}let FM=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const mse=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yse="long_polling";class LG{constructor(e,t,i,s,r=!1,o="",a=!1){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=DE.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&DE.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function vse(n,e,t){let i;if((0,ee.hu)("string"==typeof e,"typeof type must == string"),(0,ee.hu)("object"==typeof t,"typeof params must == object"),"websocket"===e)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==yse)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function ySe(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const s=[];return Mh(t,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}class vSe{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,ee.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,ee.p$)(this.counters_)}}const MG={},OG={};function PG(n){const e=n.toString();return MG[e]||(MG[e]=new vSe),MG[e]}class wSe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&ZD(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class XD{constructor(e,t,i,s,r,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=MM(e),this.stats_=PG(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),vse(t,yse,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wSe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,ee.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new FG((...r)=>{const[o,a,l,h,c]=r;if(this.incrementIncomingBytes_(r),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&mse.test(location.hostname)&&(i.r="f");const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){XD.forceAllow_=!0}static forceDisallow(){XD.forceDisallow_=!0}static isAvailable(){return!((0,ee.Yr)()||!XD.forceAllow_&&(XD.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,ee.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,ee.h$)(t),s=lse(i,1840);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,ee.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,ee.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class FG{constructor(e,t,i,s){if(this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ee.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=nse(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=FG.createIFrame_();let r="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Lh("frame writing exception"),a.stack&&Lh(a.stack),Lh(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Lh("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+s+"="+o.seg+"&ts"+s+"="+o.ts+"&d"+s+"="+o.d,s++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(s),i()})}addTag(e,t){(0,ee.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||"loaded"===s||"complete"===s)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Lh("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let NM=null;"undefined"!=typeof MozWebSocket?NM=MozWebSocket:"undefined"!=typeof WebSocket&&(NM=WebSocket);let BM=(()=>{class n{constructor(t,i,s,r,o,a,l){this.connId=t,this.applicationId=s,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=MM(this.connId),this.stats_=PG(i),this.connURL=n.connectionURL_(i,a,l,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,s,r){const o={v:"5"};return!(0,ee.Yr)()&&"undefined"!=typeof location&&location.hostname&&mse.test(location.hostname)&&(o.r="f"),i&&(o.s=i),s&&(o.ls=s),r&&(o.ac=r),vse(t,"websocket",o)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,DE.set("previous_websocket_failure",!0);try{if((0,ee.Yr)()){const r={headers:{"User-Agent":`Firebase/5/${IG}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a}),this.mySock=new NM(this.connURL,[],r)}else this.mySock=new NM(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;return r&&this.log_(r),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const s=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&null!==NM&&!n.forceDisallow_}static previouslyFailed(){return DE.isInMemoryStorage||!0===DE.get("previous_websocket_failure")}markConnectionHealthy(){DE.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const s=(0,ee.cI)(i);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,ee.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const s=this.extractFrameCount_(i);null!==s&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const i=(0,ee.Pz)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=lse(i,16384);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class NG{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[XD,BM]}initTransports_(e){const t=BM&&BM.isAvailable();let i=t&&!BM.previouslyFailed();if(e.webSocketOnly&&(t||Fd("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[BM];else{const s=this.transports_=[];for(const r of NG.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Lse{constructor(e,t,i,s,r,o,a,l,h,c){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=h,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=MM("c:"+this.id+":"),this.transportManager_=new NG(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=PM(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=OM("t",e),i=OM("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=OM("t",e),i=OM("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=OM("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?DG("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):DG("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Fd("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),PM(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):PM(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(DE.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Mse{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class Ose{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,ee.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===t&&(!i||i===s[r].context))return void s.splice(r,1)}validateEventType_(e){(0,ee.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class $V extends Ose{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,ee.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $V}getInitialEvent(e){return(0,ee.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class gr{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function nr(){return new gr("")}function cn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function kw(n){return n.pieces_.length-n.pieceNum_}function Zr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new gr(n.pieces_,e)}function HG(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function HM(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Nse(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new gr(e,0)}function ra(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof gr)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new gr(t,0)}function dn(n){return n.pieceNum_>=n.pieces_.length}function Nd(n,e){const t=cn(n),i=cn(e);if(null===t)return e;if(t===i)return Nd(Zr(n),Zr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function USe(n,e){const t=HM(n,0),i=HM(e,0);for(let s=0;s<t.length&&s<i.length;s++){const r=RE(t[s],i[s]);if(0!==r)return r}return t.length===i.length?0:t.length<i.length?-1:1}function VG(n,e){if(kw(n)!==kw(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function xf(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(kw(n)>kw(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class qSe{constructor(e,t){this.errorPrefix_=t,this.parts_=HM(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,ee.ug)(this.parts_[i]);Bse(this)}}function Bse(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+AE(n))}function AE(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class zG extends Ose{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new zG}getInitialEvent(e){return(0,ee.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const VM=1e3;let YV,LE=(()=>{class n extends Mse{constructor(t,i,s,r,o,a,l,h){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=h,this.id=n.nextPersistentConnectionId_++,this.log_=MM("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=VM,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!(0,ee.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zG.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&$V.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,s){const r=++this.requestNumber_,o={r,a:t,b:i};this.log_((0,ee.Pz)(o)),(0,ee.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),s&&(this.requestCBHash_[r]=s)}get(t){this.initConnection_();const i=new ee.BH,s={p:t._path.toString(),q:t._queryObject},r={action:"g",request:s,onComplete:a=>{const l=a.d;"ok"===a.s?(this.onDataUpdate_(s.p,l,!1,null),i.resolve(l)):i.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const a=this.outstandingGets_[o];void 0===a||r!==a||(delete this.outstandingGets_[o],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+o+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),i.promise}listen(t,i,s,r){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,ee.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ee.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:r,hashFn:i,query:t,tag:s};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(t){const i=t.query,s=i._path.toString(),r=i._queryIdentifier;this.log_("Listen on "+s+" for "+r);const o={p:s};t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const h=l.d,c=l.s;n.warnOnListenWarnings_(h,i),(this.listens.get(s)&&this.listens.get(s).get(r))===t&&(this.log_("listen response",l),"ok"!==c&&this.removeListen_(s,r),t.onComplete&&t.onComplete(c,h))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,ee.r3)(t,"w")){const s=(0,ee.DV)(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Fd(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,ee.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,ee.w9)(t)?"auth":"gauth",s={cred:t};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(i,s,r=>{const o=r.s,a=r.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,s=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(t,i){const s=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),(0,ee.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,t._queryObject,i)}sendUnlisten_(t,i,s,r){this.log_("Unlisten on "+t+" for "+i);const o={p:t};r&&(o.q=s,o.t=r),this.sendRequest("n",o)}onDisconnectPut(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:s})}onDisconnectMerge(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:s})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,s,r){const o={p:i,d:s};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(t,i,s,r){this.putInternal("p",t,i,s,r)}merge(t,i,s,r){this.putInternal("m",t,i,s,r)}putInternal(t,i,s,r,o){this.initConnection_();const a={p:i,d:s};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,s,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,s=>{"ok"!==s.s&&this.log_("reportStats","Error sending stats: "+s.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,ee.Pz)(t));const i=t.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):DG("Unrecognized action received from server: "+(0,ee.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,ee.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=VM,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=VM,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=VM),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,dt.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),s=t.onReady_.bind(t),r=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,h=null;const c=function(){h?h.close():(l=!0,r())};t.realtime_={close:c,sendRequest:function(v){(0,ee.hu)(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(v)}};const b=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[v,w]=yield Promise.all([t.authTokenProvider_.getToken(b),t.appCheckTokenProvider_.getToken(b)]);l?Lh("getToken() completed but was canceled"):(Lh("getToken() completed. Creating connection."),t.authToken_=v&&v.accessToken,t.appCheckToken_=w&&w.token,h=new Lse(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,s,r,E=>{Fd(E+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(v){t.log_("Failed to get token: "+v),l||(t.repoInfo_.nodeAdmin&&Fd(v),c())}}})()}interrupt(t){Lh("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Lh("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,ee.xb)(this.interruptReasons_)&&(this.reconnectDelay_=VM,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let s;s=i?i.map(o=>kG(o)).join("$"):"default";const r=this.removeListen_(t,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,i){const s=new gr(t).toString();let r;if(this.listens.has(s)){const o=this.listens.get(s);r=o.get(i),o.delete(i),0===o.size&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(t,i){Lh("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Lh("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,ee.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+IG.replace(/\./g,"-")]=1,(0,ee.uI)()?t["framework.cordova"]=1:(0,ee.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=$V.getInstance().currentlyOnline();return(0,ee.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class yn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new yn(e,t)}}class KV{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new yn(Xv,e),s=new yn(Xv,t);return 0!==this.compare(i,s)}minPost(){return yn.MIN}}class zse extends KV{static get __EMPTY_NODE(){return YV}static set __EMPTY_NODE(e){YV=e}compare(e,t){return RE(e.name,t.name)}isDefinedOn(e){throw(0,ee.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return yn.MIN}maxPost(){return new yn(Vb,YV)}makePost(e,t){return(0,ee.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new yn(e,YV)}toString(){return".key"}}const zb=new zse;class ZV{constructor(e,t,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,s&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let UG,Xm=(()=>{class n{constructor(t,i,s,r,o){this.key=t,this.value=i,this.color=null!=s?s:n.RED,this.left=null!=r?r:Tu.EMPTY_NODE,this.right=null!=o?o:Tu.EMPTY_NODE}copy(t,i,s,r,o){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=s?s:this.color,null!=r?r:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let r=this;const o=s(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,i,s),null):0===o?r.copy(null,i,null,null,null):r.copy(null,null,null,null,r.right.insert(t,i,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Tu.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let s,r;if(s=this,i(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),0===i(t,s.key)){if(s.right.isEmpty())return Tu.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Tu{constructor(e,t=Tu.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Tu(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Xm.BLACK,null,null))}remove(e){return new Tu(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xm.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(s=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ZV(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ZV(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ZV(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ZV(this.root_,null,this.comparator_,!0,e)}}function JSe(n,e){return RE(n.name,e.name)}function jG(n,e){return RE(n,e)}Tu.EMPTY_NODE=new class QSe{copy(e,t,i,s,r){return this}insert(e,t,i){return new Xm(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const jse=function(n){return"number"==typeof n?"number:"+hse(n):"string:"+n},Use=function(n){if(n.isLeafNode()){const e=n.val();(0,ee.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,ee.r3)(e,".sv"),"Priority must be a string or number.")}else(0,ee.hu)(n===UG||n.isEmpty(),"priority of unexpected type.");(0,ee.hu)(n===UG||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qse,Wse,Gse,QD=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,ee.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Use(this.priorityNode_)}static set __childrenNodeConstructor(t){qse=t}static get __childrenNodeConstructor(){return qse}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return dn(t)?this:".priority"===cn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const s=cn(t);return null===s?i:i.isEmpty()&&".priority"!==s?this:((0,ee.hu)(".priority"!==s||1===kw(t),".priority must be the last token in a path"),this.updateImmediateChild(s,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zr(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+jse(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?hse(this.value_):this.value_,this.lazyHash_=rse(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,ee.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,s=typeof this.value_,r=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(s);return(0,ee.hu)(r>=0,"Unknown leaf type: "+i),(0,ee.hu)(o>=0,"Unknown leaf type: "+s),r===o?"object"===s?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const po=new class sxe extends KV{compare(e,t){const i=e.node.getPriority(),s=t.node.getPriority(),r=i.compareTo(s);return 0===r?RE(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return yn.MIN}maxPost(){return new yn(Vb,new QD("[PRIORITY-POST]",Gse))}makePost(e,t){const i=Wse(e);return new yn(t,new QD("[PRIORITY-POST]",i))}toString(){return".priority"}},nxe=Math.log(2);class rxe{constructor(e){this.count=parseInt(Math.log(e+1)/nxe,10),this.current_=this.count-1;const s=(r=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const XV=function(n,e,t,i){n.sort(e);const s=function(l,h){const c=h-l;let m,b;if(0===c)return null;if(1===c)return m=n[l],b=t?t(m):m,new Xm(b,m.node,Xm.BLACK,null,null);{const v=parseInt(c/2,10)+l,w=s(l,v),E=s(v+1,h);return m=n[v],b=t?t(m):m,new Xm(b,m.node,Xm.BLACK,w,E)}},a=function(l){let h=null,c=null,m=n.length;const b=function(w,E){const D=m-w,L=m;m-=w;const N=s(D+1,L),V=n[D],$=t?t(V):V;v(new Xm($,V.node,E,null,N))},v=function(w){h?(h.left=w,h=w):(c=w,h=w)};for(let w=0;w<l.count;++w){const E=l.nextBitIsOne(),D=Math.pow(2,l.count-(w+1));E?b(D,Xm.BLACK):(b(D,Xm.BLACK),b(D,Xm.RED))}return c}(new rxe(n.length));return new Tu(i||e,a)};let qG;const JD={};class Qv{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,ee.hu)(JD&&po,"ChildrenNode.ts has not been loaded"),qG=qG||new Qv({".priority":JD},{".priority":po}),qG}get(e){const t=(0,ee.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Tu?t:null}hasIndex(e){return(0,ee.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,ee.hu)(e!==zb,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=t.getIterator(yn.Wrap);let a,o=r.getNext();for(;o;)s=s||e.isDefinedOn(o.node),i.push(o),o=r.getNext();a=s?XV(i,e.getCompare()):JD;const l=e.toString(),h=Object.assign({},this.indexSet_);h[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new Qv(c,h)}addToIndexes(e,t){const i=(0,ee.UI)(this.indexes_,(s,r)=>{const o=(0,ee.DV)(this.indexSet_,r);if((0,ee.hu)(o,"Missing index implementation for "+r),s===JD){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(yn.Wrap);let h=l.getNext();for(;h;)h.name!==e.name&&a.push(h),h=l.getNext();return a.push(e),XV(a,o.getCompare())}return JD}{const a=t.get(e.name);let l=s;return a&&(l=l.remove(new yn(e.name,a))),l.insert(e,e.node)}});return new Qv(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,ee.UI)(this.indexes_,s=>{if(s===JD)return s;{const r=t.get(e.name);return r?s.remove(new yn(e.name,r)):s}});return new Qv(i,this.indexSet_)}}let zM,qs=(()=>{class n{constructor(t,i,s){this.children_=t,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Use(this.priorityNode_),this.children_.isEmpty()&&(0,ee.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return zM||(zM=new n(new Tu(jG),null,Qv.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zM}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?zM:i}}getChild(t){const i=cn(t);return null===i?this:this.getImmediateChild(i).getChild(Zr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,ee.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const s=new yn(t,i);let r,o;i.isEmpty()?(r=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(s,this.children_));const a=r.isEmpty()?zM:this.priorityNode_;return new n(r,a,o)}}updateChild(t,i){const s=cn(t);if(null===s)return i;{(0,ee.hu)(".priority"!==cn(t)||1===kw(t),".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(Zr(t),i);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let s=0,r=0,o=!0;if(this.forEachChild(po,(a,l)=>{i[a]=l.val(t),s++,o&&n.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!t&&o&&r<2*s){const a=[];for(const l in i)a[l]=i[l];return a}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+jse(this.getPriority().val())+":"),this.forEachChild(po,(i,s)=>{const r=s.hash();""!==r&&(t+=":"+i+":"+r)}),this.lazyHash_=""===t?"":rse(t)}return this.lazyHash_}getPredecessorChildName(t,i,s){const r=this.resolveIndex_(s);if(r){const o=r.getPredecessorKey(new yn(t,i));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.minKey();return s&&s.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new yn(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.maxKey();return s&&s.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new yn(i,this.children_.get(i)):null}forEachChild(t,i){const s=this.resolveIndex_(t);return s?s.inorderTraversal(r=>i(r.name,r.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(t,r=>r);{const r=this.children_.getIteratorFrom(t.name,yn.Wrap);let o=r.peek();for(;null!=o&&i.compare(o,t)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(t,r=>r);{const r=this.children_.getReverseIteratorFrom(t.name,yn.Wrap);let o=r.peek();for(;null!=o&&i.compare(o,t)>0;)r.getNext(),o=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===jM?-1:0}withIndex(t){if(t===zb||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===zb||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const s=this.getIterator(po),r=i.getIterator(po);let o=s.getNext(),a=r.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=s.getNext(),a=r.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===zb?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const jM=new class oxe extends qs{constructor(){super(new Tu(jG),qs.EMPTY_NODE,Qv.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qs.EMPTY_NODE}isEmpty(){return!1}};function wa(n,e=null){if(null===n)return qs.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,ee.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new QD(n,wa(e));if(n instanceof Array){let t=qs.EMPTY_NODE;return Mh(n,(i,s)=>{if((0,ee.r3)(n,i)&&"."!==i.substring(0,1)){const r=wa(s);(r.isLeafNode()||!r.isEmpty())&&(t=t.updateImmediateChild(i,r))}}),t.updatePriority(wa(e))}{const t=[];let i=!1;if(Mh(n,(o,a)=>{if("."!==o.substring(0,1)){const l=wa(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new yn(o,l)))}}),0===t.length)return qs.EMPTY_NODE;const r=XV(t,JSe,o=>o.name,jG);if(i){const o=XV(t,po.getCompare());return new qs(r,wa(e),new Qv({".priority":o},{".priority":po}))}return new qs(r,wa(e),Qv.Default)}}Object.defineProperties(yn,{MIN:{value:new yn(Xv,qs.EMPTY_NODE)},MAX:{value:new yn(Vb,jM)}}),zse.__EMPTY_NODE=qs.EMPTY_NODE,QD.__childrenNodeConstructor=qs,function exe(n){UG=n}(jM),function ixe(n){Gse=n}(jM),function txe(n){Wse=n}(wa);class WG extends KV{constructor(e){super(),this.indexPath_=e,(0,ee.hu)(!dn(e)&&".priority"!==cn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),s=this.extractChild(t.node),r=i.compareTo(s);return 0===r?RE(e.name,t.name):r}makePost(e,t){const i=wa(e),s=qs.EMPTY_NODE.updateChild(this.indexPath_,i);return new yn(t,s)}maxPost(){const e=qs.EMPTY_NODE.updateChild(this.indexPath_,jM);return new yn(Vb,e)}toString(){return HM(this.indexPath_,0).join("/")}}const GG=new class lxe extends KV{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?RE(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return yn.MIN}maxPost(){return yn.MAX}makePost(e,t){const i=wa(e);return new yn(t,i)}toString(){return".value"}},ek="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",hxe=function(){let n=0;const e=[];return function(t){const i=t===n;let s;n=t;const r=new Array(8);for(s=7;s>=0;s--)r[s]=ek.charAt(t%64),t=Math.floor(t/64);(0,ee.hu)(0===t,"Cannot push at time == 0");let o=r.join("");if(i){for(s=11;s>=0&&63===e[s];s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)o+=ek.charAt(e[s]);return(0,ee.hu)(20===o.length,"nextPushId: Length should be 20."),o}}(),Yse=function(n){if(n===""+RG)return"-";const e=WV(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let o=0;o<t.length;o++)t[o]=n.charAt(o);if(t.length<786)return t.push("-"),t.join("");let i=t.length-1;for(;i>=0&&"z"===t[i];)i--;if(-1===i)return Vb;const r=ek.charAt(ek.indexOf(t[i])+1);return t[i]=r,t.slice(0,i+1).join("")},Zse=function(n){if("-2147483648"===n)return Xv;const e=WV(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return"-"===t[t.length-1]?1===t.length?""+RG:(delete t[t.length-1],t.join("")):(t[t.length-1]=ek.charAt(ek.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Xse(n){return{type:"value",snapshotNode:n}}function tk(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function UM(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function qM(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class KG{constructor(e){this.index_=e}updateChild(e,t,i,s,r,o){(0,ee.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(s).equals(i.getChild(s))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(UM(t,a)):(0,ee.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(tk(t,i)):o.trackChildChange(qM(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(po,(s,r)=>{t.hasChild(s)||i.trackChildChange(UM(s,r))}),t.isLeafNode()||t.forEachChild(po,(s,r)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(r)||i.trackChildChange(qM(s,r,o))}else i.trackChildChange(tk(s,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qs.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class WM{constructor(e){this.indexedFilter_=new KG(e.getIndex()),this.index_=e.getIndex(),this.startPost_=WM.getStartPost_(e),this.endPost_=WM.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,s,r,o){return this.matches(new yn(t,i))||(i=qs.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,s,r,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=qs.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(qs.EMPTY_NODE);const r=this;return t.forEachChild(po,(o,a)=>{r.matches(new yn(o,a))||(s=s.updateImmediateChild(o,qs.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class dxe{constructor(e){this.rangedFilter_=new WM(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,s,r,o){return this.rangedFilter_.matches(new yn(t,i))||(i=qs.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,s,r,o):this.fullLimitUpdateChild_(e,t,i,r,o)}updateFullNode(e,t,i){let s;if(t.isLeafNode()||t.isEmpty())s=qs.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let r;s=qs.EMPTY_NODE.withIndex(this.index_),r=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const a=r.getNext();let l;if(l=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!l)break;s=s.updateImmediateChild(a.name,a.node),o++}}else{let r,o,a,l;if(s=t.withIndex(this.index_),s=s.updatePriority(qs.EMPTY_NODE),this.reverse_){l=s.getReverseIterator(this.index_),r=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const m=this.index_.getCompare();a=(b,v)=>m(v,b)}else l=s.getIterator(this.index_),r=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let h=0,c=!1;for(;l.hasNext();){const m=l.getNext();!c&&a(r,m)<=0&&(c=!0),c&&h<this.limit_&&a(m,o)<=0?h++:s=s.updateImmediateChild(m.name,qs.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,s,r){let o;if(this.reverse_){const m=this.index_.getCompare();o=(b,v)=>m(v,b)}else o=this.index_.getCompare();const a=e;(0,ee.hu)(a.numChildren()===this.limit_,"");const l=new yn(t,i),h=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(l);if(a.hasChild(t)){const m=a.getImmediateChild(t);let b=s.getChildAfterChild(this.index_,h,this.reverse_);for(;null!=b&&(b.name===t||a.hasChild(b.name));)b=s.getChildAfterChild(this.index_,b,this.reverse_);const v=null==b?1:o(b,l);if(c&&!i.isEmpty()&&v>=0)return null!=r&&r.trackChildChange(qM(t,i,m)),a.updateImmediateChild(t,i);{null!=r&&r.trackChildChange(UM(t,m));const E=a.updateImmediateChild(t,qs.EMPTY_NODE);return null!=b&&this.rangedFilter_.matches(b)?(null!=r&&r.trackChildChange(tk(b.name,b.node)),E.updateImmediateChild(b.name,b.node)):E}}return i.isEmpty()?e:c&&o(h,l)>=0?(null!=r&&(r.trackChildChange(UM(h.name,h.node)),r.trackChildChange(tk(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(h.name,qs.EMPTY_NODE)):e}}class QV{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=po}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ee.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ee.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xv}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ee.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ee.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vb}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ee.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===po}copy(){const e=new QV;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function YG(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function ZG(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function JV(n,e){const t=n.copy();return t.index_=e,t}function Qse(n){const e={};if(n.isDefault())return e;let t;return n.index_===po?t="$priority":n.index_===GG?t="$value":n.index_===zb?t="$key":((0,ee.hu)(n.index_ instanceof WG,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,ee.Pz)(t),n.startSet_&&(e.startAt=(0,ee.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,ee.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,ee.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,ee.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Jse(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==po&&(e.i=n.index_.toString()),e}class ez extends Mse{constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=MM("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,ee.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,s){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=ez.getListenId_(e,i),a={};this.listens_[o]=a;const l=Qse(e._queryParams);this.restRequest_(r+".json",l,(h,c)=>{let m=c;if(404===h&&(m=null,h=null),null===h&&this.onDataUpdate_(r,m,!1,i),(0,ee.DV)(this.listens_,o)===a){let b;b=h?401===h?"permission_denied":"rest_error:"+h:"ok",s(b,null)}})}unlisten(e,t){const i=ez.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Qse(e._queryParams),i=e._path.toString(),s=new ee.BH;return this.restRequest_(i+".json",t,(r,o)=>{let a=o;404===r&&(a=null,r=null),null===r?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(t.auth=s.accessToken),r&&r.token&&(t.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,ee.xO)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,ee.cI)(a.responseText)}catch(h){Fd("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&Fd("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class bxe{constructor(){this.rootNode_=qs.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function tz(){return{value:null,children:new Map}}function ik(n,e,t){if(dn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=cn(e);n.children.has(i)||n.children.set(i,tz()),ik(n.children.get(i),e=Zr(e),t)}}function XG(n,e){if(dn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(po,(i,s)=>{ik(n,new gr(i),s)}),XG(n,e)}}if(n.children.size>0){const t=cn(e);return e=Zr(e),n.children.has(t)&&XG(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function QG(n,e,t){null!==n.value?t(e,n.value):function yxe(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,s)=>{QG(s,new gr(e.toString()+"/"+i),t)})}class vxe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Mh(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}}class Sxe{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new vxe(e);const i=1e4+2e4*Math.random();PM(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Mh(e,(s,r)=>{r>0&&(0,ee.r3)(this.statsToReport_,s)&&(t[s]=r,i=!0)}),i&&this.server_.reportStats(t),PM(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ef=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ef||(Ef={})),Ef))();function t7(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class iz{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Ef.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(dn(this.path)){if(null!=this.affectedTree.value)return(0,ee.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new gr(e));return new iz(nr(),t,this.revert)}}return(0,ee.hu)(cn(this.path)===e,"operationForChild called for unrelated child."),new iz(Zr(this.path),this.affectedTree,this.revert)}}class GM{constructor(e,t){this.source=e,this.path=t,this.type=Ef.LISTEN_COMPLETE}operationForChild(e){return dn(this.path)?new GM(this.source,nr()):new GM(this.source,Zr(this.path))}}class ME{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Ef.OVERWRITE}operationForChild(e){return dn(this.path)?new ME(this.source,nr(),this.snap.getImmediateChild(e)):new ME(this.source,Zr(this.path),this.snap)}}class sk{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Ef.MERGE}operationForChild(e){if(dn(this.path)){const t=this.children.subtree(new gr(e));return t.isEmpty()?null:t.value?new ME(this.source,nr(),t.value):new sk(this.source,nr(),t)}return(0,ee.hu)(cn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new sk(this.source,Zr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Rw{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(dn(e))return this.isFullyInitialized()&&!this.filtered_;const t=cn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class xxe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function $M(n,e,t,i,s,r){const o=i.filter(a=>a.type===t);o.sort((a,l)=>function Ixe(n,e,t){if(null==e.childName||null==t.childName)throw(0,ee.g5)("Should only compare child_ events.");const i=new yn(e.childName,e.snapshotNode),s=new yn(t.childName,t.snapshotNode);return n.index_.compare(i,s)}(n,a,l)),o.forEach(a=>{const l=function _xe(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,r);s.forEach(h=>{h.respondsTo(a.type)&&e.push(h.createEvent(l,n.query_))})})}function sz(n,e){return{eventCache:n,serverCache:e}}function KM(n,e,t,i){return sz(new Rw(e,t,i),n.serverCache)}function tne(n,e,t,i){return sz(n.eventCache,new Rw(e,t,i))}function nz(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function OE(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let i7;class fo{constructor(e,t=(()=>(i7||(i7=new Tu(hSe)),i7))()){this.value=e,this.children=t}static fromObject(e){let t=new fo(null);return Mh(e,(i,s)=>{t=t.set(new gr(i),s)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:nr(),value:this.value};if(dn(e))return null;{const i=cn(e),s=this.children.get(i);if(null!==s){const r=s.findRootMostMatchingPathAndValue(Zr(e),t);return null!=r?{path:ra(new gr(i),r.path),value:r.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(dn(e))return this;{const t=cn(e),i=this.children.get(t);return null!==i?i.subtree(Zr(e)):new fo(null)}}set(e,t){if(dn(e))return new fo(t,this.children);{const i=cn(e),r=(this.children.get(i)||new fo(null)).set(Zr(e),t),o=this.children.insert(i,r);return new fo(this.value,o)}}remove(e){if(dn(e))return this.children.isEmpty()?new fo(null):new fo(null,this.children);{const t=cn(e),i=this.children.get(t);if(i){const s=i.remove(Zr(e));let r;return r=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&r.isEmpty()?new fo(null):new fo(this.value,r)}return this}}get(e){if(dn(e))return this.value;{const t=cn(e),i=this.children.get(t);return i?i.get(Zr(e)):null}}setTree(e,t){if(dn(e))return t;{const i=cn(e),r=(this.children.get(i)||new fo(null)).setTree(Zr(e),t);let o;return o=r.isEmpty()?this.children.remove(i):this.children.insert(i,r),new fo(this.value,o)}}fold(e){return this.fold_(nr(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(ra(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,nr(),t)}findOnPath_(e,t,i){const s=!!this.value&&i(t,this.value);if(s)return s;if(dn(e))return null;{const r=cn(e),o=this.children.get(r);return o?o.findOnPath_(Zr(e),ra(t,r),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,nr(),t)}foreachOnPath_(e,t,i){if(dn(e))return this;{this.value&&i(t,this.value);const s=cn(e),r=this.children.get(s);return r?r.foreachOnPath_(Zr(e),ra(t,s),i):new fo(null)}}foreach(e){this.foreach_(nr(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_(ra(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Qm{constructor(e){this.writeTree_=e}static empty(){return new Qm(new fo(null))}}function YM(n,e,t){if(dn(e))return new Qm(new fo(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const s=i.path;let r=i.value;const o=Nd(s,e);return r=r.updateChild(o,t),new Qm(n.writeTree_.set(s,r))}{const s=new fo(t),r=n.writeTree_.setTree(e,s);return new Qm(r)}}}function s7(n,e,t){let i=n;return Mh(t,(s,r)=>{i=YM(i,ra(e,s),r)}),i}function ine(n,e){if(dn(e))return Qm.empty();{const t=n.writeTree_.setTree(e,new fo(null));return new Qm(t)}}function n7(n,e){return null!=PE(n,e)}function PE(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Nd(t.path,e)):null}function sne(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(po,(i,s)=>{e.push(new yn(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{null!=s.value&&e.push(new yn(i,s.value))}),e}function Aw(n,e){if(dn(e))return n;{const t=PE(n,e);return new Qm(null!=t?new fo(t):n.writeTree_.subtree(e))}}function r7(n){return n.writeTree_.isEmpty()}function nk(n,e){return nne(nr(),n.writeTree_,e)}function nne(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,r)=>{".priority"===s?((0,ee.hu)(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):t=nne(ra(n,s),r,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(ra(n,".priority"),i)),t}}function rz(n,e){return hne(e,n)}function Lxe(n,e){if(n.snap)return xf(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&xf(ra(n.path,t),e))return!0;return!1}function Oxe(n){return n.visible}function rne(n,e,t){let i=Qm.empty();for(let s=0;s<n.length;++s){const r=n[s];if(e(r)){const o=r.path;let a;if(r.snap)xf(t,o)?(a=Nd(t,o),i=YM(i,a,r.snap)):xf(o,t)&&(a=Nd(o,t),i=YM(i,nr(),r.snap.getChild(a)));else{if(!r.children)throw(0,ee.g5)("WriteRecord should have .snap or .children");if(xf(t,o))a=Nd(t,o),i=s7(i,a,r.children);else if(xf(o,t))if(a=Nd(o,t),dn(a))i=s7(i,nr(),r.children);else{const l=(0,ee.DV)(r.children,cn(a));if(l){const h=l.getChild(Zr(a));i=YM(i,nr(),h)}}}}}return i}function one(n,e,t,i,s){if(i||s){const r=Aw(n.visibleWrites,e);return!s&&r7(r)?t:s||null!=t||n7(r,nr())?nk(rne(n.allWrites,function(h){return(h.visible||s)&&(!i||!~i.indexOf(h.writeId))&&(xf(h.path,e)||xf(e,h.path))},e),t||qs.EMPTY_NODE):null}{const r=PE(n.visibleWrites,e);if(null!=r)return r;{const o=Aw(n.visibleWrites,e);return r7(o)?t:null!=t||n7(o,nr())?nk(o,t||qs.EMPTY_NODE):null}}}function oz(n,e,t,i){return one(n.writeTree,n.treePath,e,t,i)}function o7(n,e){return function Pxe(n,e,t){let i=qs.EMPTY_NODE;const s=PE(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(po,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(t){const r=Aw(n.visibleWrites,e);return t.forEachChild(po,(o,a)=>{const l=nk(Aw(r,new gr(o)),a);i=i.updateImmediateChild(o,l)}),sne(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return sne(Aw(n.visibleWrites,e)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(n.writeTree,n.treePath,e)}function ane(n,e,t,i){return function Fxe(n,e,t,i,s){(0,ee.hu)(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=ra(e,t);if(n7(n.visibleWrites,r))return null;{const o=Aw(n.visibleWrites,r);return r7(o)?s.getChild(t):nk(o,s.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function az(n,e){return function Bxe(n,e){return PE(n.visibleWrites,e)}(n.writeTree,ra(n.treePath,e))}function a7(n,e,t){return function Nxe(n,e,t,i){const s=ra(e,t),r=PE(n.visibleWrites,s);return null!=r?r:i.isCompleteForChild(t)?nk(Aw(n.visibleWrites,s),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function lne(n,e){return hne(ra(n.treePath,e),n.writeTree)}function hne(n,e){return{treePath:n,writeTree:e}}class jxe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,ee.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,ee.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(i,qM(i,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(i,UM(i,s.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(i,tk(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw(0,ee.g5)("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(i,qM(i,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const cne=new class Uxe{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class l7{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Rw(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return a7(this.writes_,e,i)}}getChildAfterChild(e,t,i){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:OE(this.viewCache_),r=function zxe(n,e,t,i,s,r){return function Hxe(n,e,t,i,s,r,o){let a;const l=Aw(n.visibleWrites,e),h=PE(l,nr());if(null!=h)a=h;else{if(null==t)return[];a=nk(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const c=[],m=o.getCompare(),b=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let v=b.getNext();for(;v&&c.length<s;)0!==m(v,i)&&c.push(v),v=b.getNext();return c}}(n.writeTree,n.treePath,e,t,i,s,r)}(this.writes_,s,t,1,i,e);return 0===r.length?null:r[0]}}function dne(n,e,t,i,s,r){const o=e.eventCache;if(null!=az(i,t))return e;{let a,l;if(dn(t))if((0,ee.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=OE(e),m=o7(i,h instanceof qs?h:qs.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),m,r)}else{const h=oz(i,OE(e));a=n.filter.updateFullNode(e.eventCache.getNode(),h,r)}else{const h=cn(t);if(".priority"===h){(0,ee.hu)(1===kw(t),"Can't have a priority with additional path components");const c=o.getNode();l=e.serverCache.getNode();const m=ane(i,t,c,l);a=null!=m?n.filter.updatePriority(c,m):o.getNode()}else{const c=Zr(t);let m;if(o.isCompleteForChild(h)){l=e.serverCache.getNode();const b=ane(i,t,o.getNode(),l);m=null!=b?o.getNode().getImmediateChild(h).updateChild(c,b):o.getNode().getImmediateChild(h)}else m=a7(i,h,e.serverCache);a=null!=m?n.filter.updateChild(o.getNode(),h,m,c,s,r):o.getNode()}}return KM(e,a,o.isFullyInitialized()||dn(t),n.filter.filtersNodes())}}function lz(n,e,t,i,s,r,o,a){const l=e.serverCache;let h;const c=o?n.filter:n.filter.getIndexedFilter();if(dn(t))h=c.updateFullNode(l.getNode(),i,null);else if(c.filtersNodes()&&!l.isFiltered()){const v=l.getNode().updateChild(t,i);h=c.updateFullNode(l.getNode(),v,null)}else{const v=cn(t);if(!l.isCompleteForPath(t)&&kw(t)>1)return e;const w=Zr(t),D=l.getNode().getImmediateChild(v).updateChild(w,i);h=".priority"===v?c.updatePriority(l.getNode(),D):c.updateChild(l.getNode(),v,D,w,cne,null)}const m=tne(e,h,l.isFullyInitialized()||dn(t),c.filtersNodes());return dne(n,m,t,s,new l7(s,m,r),a)}function h7(n,e,t,i,s,r,o){const a=e.eventCache;let l,h;const c=new l7(s,e,r);if(dn(t))h=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=KM(e,h,!0,n.filter.filtersNodes());else{const m=cn(t);if(".priority"===m)h=n.filter.updatePriority(e.eventCache.getNode(),i),l=KM(e,h,a.isFullyInitialized(),a.isFiltered());else{const b=Zr(t),v=a.getNode().getImmediateChild(m);let w;if(dn(b))w=i;else{const E=c.getCompleteChild(m);w=null!=E?".priority"===HG(b)&&E.getChild(Nse(b)).isEmpty()?E:E.updateChild(b,i):qs.EMPTY_NODE}l=v.equals(w)?e:KM(e,n.filter.updateChild(a.getNode(),m,w,b,c,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function une(n,e){return n.eventCache.isCompleteForChild(e)}function pne(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function c7(n,e,t,i,s,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h,l=e;h=dn(t)?i:new fo(null).setTree(t,i);const c=e.serverCache.getNode();return h.children.inorderTraversal((m,b)=>{if(c.hasChild(m)){const w=pne(0,e.serverCache.getNode().getImmediateChild(m),b);l=lz(n,l,new gr(m),w,s,r,o,a)}}),h.children.inorderTraversal((m,b)=>{const v=!e.serverCache.isCompleteForChild(m)&&void 0===b.value;if(!c.hasChild(m)&&!v){const E=pne(0,e.serverCache.getNode().getImmediateChild(m),b);l=lz(n,l,new gr(m),E,s,r,o,a)}}),l}class Qxe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new KG(i.getIndex()),r=function uxe(n){return n.loadsAllData()?new KG(n.getIndex()):n.hasLimit()?new dxe(n):new WM(n)}(i);this.processor_=function qxe(n){return{filter:n}}(r);const o=t.serverCache,a=t.eventCache,l=s.updateFullNode(qs.EMPTY_NODE,o.getNode(),null),h=r.updateFullNode(qs.EMPTY_NODE,a.getNode(),null),c=new Rw(l,o.isFullyInitialized(),s.filtersNodes()),m=new Rw(h,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=sz(m,c),this.eventGenerator_=new xxe(this.query_)}get query(){return this.query_}}function tEe(n,e){const t=OE(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!dn(e)&&!t.getImmediateChild(cn(e)).isEmpty())?t.getChild(e):null}function fne(n){return 0===n.eventRegistrations_.length}function mne(n,e,t){const i=[];if(t){(0,ee.hu)(null==e,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(t,s);o&&i.push(o)})}if(e){let s=[];for(let r=0;r<n.eventRegistrations_.length;++r){const o=n.eventRegistrations_[r];if(o.matches(e)){if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(r+1));break}}else s.push(o)}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function gne(n,e,t,i){e.type===Ef.MERGE&&null!==e.source.queryId&&((0,ee.hu)(OE(n.viewCache_),"We should always have a full cache before handling merges"),(0,ee.hu)(nz(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,r=function Gxe(n,e,t,i,s){const r=new jxe;let o,a;if(t.type===Ef.OVERWRITE){const h=t;h.source.fromUser?o=h7(n,e,h.path,h.snap,i,s,r):((0,ee.hu)(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.serverCache.isFiltered()&&!dn(h.path),o=lz(n,e,h.path,h.snap,i,s,a,r))}else if(t.type===Ef.MERGE){const h=t;h.source.fromUser?o=function Kxe(n,e,t,i,s,r,o){let a=e;return i.foreach((l,h)=>{const c=ra(t,l);une(e,cn(c))&&(a=h7(n,a,c,h,s,r,o))}),i.foreach((l,h)=>{const c=ra(t,l);une(e,cn(c))||(a=h7(n,a,c,h,s,r,o))}),a}(n,e,h.path,h.children,i,s,r):((0,ee.hu)(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.serverCache.isFiltered(),o=c7(n,e,h.path,h.children,i,s,a,r))}else if(t.type===Ef.ACK_USER_WRITE){const h=t;o=h.revert?function Xxe(n,e,t,i,s,r){let o;if(null!=az(i,t))return e;{const a=new l7(i,e,s),l=e.eventCache.getNode();let h;if(dn(t)||".priority"===cn(t)){let c;if(e.serverCache.isFullyInitialized())c=oz(i,OE(e));else{const m=e.serverCache.getNode();(0,ee.hu)(m instanceof qs,"serverChildren would be complete if leaf node"),c=o7(i,m)}c=c,h=n.filter.updateFullNode(l,c,r)}else{const c=cn(t);let m=a7(i,c,e.serverCache);null==m&&e.serverCache.isCompleteForChild(c)&&(m=l.getImmediateChild(c)),h=null!=m?n.filter.updateChild(l,c,m,Zr(t),a,r):e.eventCache.getNode().hasChild(c)?n.filter.updateChild(l,c,qs.EMPTY_NODE,Zr(t),a,r):l,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=oz(i,OE(e)),o.isLeafNode()&&(h=n.filter.updateFullNode(h,o,r)))}return o=e.serverCache.isFullyInitialized()||null!=az(i,nr()),KM(e,h,o,n.filter.filtersNodes())}}(n,e,h.path,i,s,r):function Yxe(n,e,t,i,s,r,o){if(null!=az(s,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=i.value){if(dn(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return lz(n,e,t,l.getNode().getChild(t),s,r,a,o);if(dn(t)){let h=new fo(null);return l.getNode().forEachChild(zb,(c,m)=>{h=h.set(new gr(c),m)}),c7(n,e,t,h,s,r,a,o)}return e}{let h=new fo(null);return i.foreach((c,m)=>{const b=ra(t,c);l.isCompleteForPath(b)&&(h=h.set(c,l.getNode().getChild(b)))}),c7(n,e,t,h,s,r,a,o)}}(n,e,h.path,h.affectedTree,i,s,r)}else{if(t.type!==Ef.LISTEN_COMPLETE)throw(0,ee.g5)("Unknown operation type: "+t.type);o=function Zxe(n,e,t,i,s){const r=e.serverCache;return dne(n,tne(e,r.getNode(),r.isFullyInitialized()||dn(t),r.isFiltered()),t,i,cne,s)}(n,e,t.path,i,r)}const l=r.getChanges();return function $xe(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=nz(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&t.push(Xse(nz(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,s,e,t,i);return function Wxe(n,e){(0,ee.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,ee.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,r.viewCache),(0,ee.hu)(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=r.viewCache,bne(n,r.changes,r.viewCache.eventCache.getNode(),null)}function bne(n,e,t,i){return function Exe(n,e,t,i){const s=[],r=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(function cxe(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),$M(n,s,"child_removed",e,i,t),$M(n,s,"child_added",e,i,t),$M(n,s,"child_moved",r,i,t),$M(n,s,"child_changed",e,i,t),$M(n,s,"value",e,i,t),s}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let hz,dz;class yne{constructor(){this.views=new Map}}function d7(n,e,t,i){const s=e.source.queryId;if(null!==s){const r=n.views.get(s);return(0,ee.hu)(null!=r,"SyncTree gave us an op for an invalid query."),gne(r,e,t,i)}{let r=[];for(const o of n.views.values())r=r.concat(gne(o,e,t,i));return r}}function vne(n,e,t,i,s){const o=n.views.get(e._queryIdentifier);if(!o){let a=oz(t,s?i:null),l=!1;a?l=!0:i instanceof qs?(a=o7(t,i),l=!1):(a=qs.EMPTY_NODE,l=!1);const h=sz(new Rw(a,l,!1),new Rw(i,s,!1));return new Qxe(e,h)}return o}function Cne(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Lw(n,e){let t=null;for(const i of n.views.values())t=t||tEe(i,e);return t}function wne(n,e){return e._queryParams.loadsAllData()?cz(n):n.views.get(e._queryIdentifier)}function Sne(n,e){return null!=wne(n,e)}function Mw(n){return null!=cz(n)}function cz(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let dEe=1;class xne{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fo(null),this.pendingWriteTree_=function Vxe(){return{visibleWrites:Qm.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function u7(n,e,t,i,s){return function Dxe(n,e,t,i,s){(0,ee.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=YM(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,s),s?rk(n,new ME({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ow(n,e,t=!1){const i=function Rxe(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function Axe(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,ee.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,r=!1,o=n.allWrites.length-1;for(;s&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Lxe(a,i.path)?s=!1:xf(i.path,a.path)&&(r=!0)),o--}return!!s&&(r?(function Mxe(n){n.visibleWrites=rne(n.allWrites,Oxe,nr()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=ine(n.visibleWrites,i.path):Mh(i.children,l=>{n.visibleWrites=ine(n.visibleWrites,ra(i.path,l))}),!0))}(n.pendingWriteTree_,e)){let r=new fo(null);return null!=i.snap?r=r.set(nr(),!0):Mh(i.children,o=>{r=r.set(new gr(o),!0)}),rk(n,new iz(i.path,r,t))}return[]}function ZM(n,e,t){return rk(n,new ME({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function p7(n,e,t,i){const s=e._path,r=n.syncPointTree_.get(s);let o=[];if(r&&("default"===e._queryIdentifier||Sne(r,e))){const a=function lEe(n,e,t,i){const s=e._queryIdentifier,r=[];let o=[];const a=Mw(n);if("default"===s)for(const[l,h]of n.views.entries())o=o.concat(mne(h,t,i)),fne(h)&&(n.views.delete(l),h.query._queryParams.loadsAllData()||r.push(h.query));else{const l=n.views.get(s);l&&(o=o.concat(mne(l,t,i)),fne(l)&&(n.views.delete(s),l.query._queryParams.loadsAllData()||r.push(l.query)))}return a&&!Mw(n)&&r.push(new(function rEe(){return(0,ee.hu)(hz,"Reference.ts has not been loaded"),hz}())(e._repo,e._path)),{removed:r,events:o}}(r,e,t,i);(function oEe(n){return 0===n.views.size})(r)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const l=a.removed;o=a.events;const h=-1!==l.findIndex(m=>m._queryParams.loadsAllData()),c=n.syncPointTree_.findOnPath(s,(m,b)=>Mw(b));if(h&&!c){const m=n.syncPointTree_.subtree(s);if(!m.isEmpty()){const b=function vEe(n){return n.fold((e,t,i)=>{if(t&&Mw(t))return[cz(t)];{let s=[];return t&&(s=Cne(t)),Mh(i,(r,o)=>{s=s.concat(o)}),s}})}(m);for(let v=0;v<b.length;++v){const w=b[v],E=w.query,D=Tne(n,w);n.listenProvider_.startListening(XM(E),pz(n,E),D.hashFn,D.onComplete)}}}!c&&l.length>0&&!i&&(h?n.listenProvider_.stopListening(XM(e),null):l.forEach(m=>{const b=n.queryToTagMap.get(fz(m));n.listenProvider_.stopListening(XM(m),b)})),function CEe(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const s=fz(i),r=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(r)}}}(n,l)}return o}function Ene(n,e,t){const i=e._path;let s=null,r=!1;n.syncPointTree_.foreachOnPath(i,(m,b)=>{const v=Nd(m,i);s=s||Lw(b,v),r=r||Mw(b)});let a,o=n.syncPointTree_.get(i);o?(r=r||Mw(o),s=s||Lw(o,nr())):(o=new yne,n.syncPointTree_=n.syncPointTree_.set(i,o)),null!=s?a=!0:(a=!1,s=qs.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((b,v)=>{const w=Lw(v,nr());w&&(s=s.updateImmediateChild(b,w))}));const l=Sne(o,e);if(!l&&!e._queryParams.loadsAllData()){const m=fz(e);(0,ee.hu)(!n.queryToTagMap.has(m),"View does not exist, but we have a tag");const b=function wEe(){return dEe++}();n.queryToTagMap.set(m,b),n.tagToQueryMap.set(b,m)}let c=function aEe(n,e,t,i,s,r){const o=vne(n,e,i,s,r);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function iEe(n,e){n.eventRegistrations_.push(e)}(o,t),function sEe(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(po,(r,o)=>{i.push(tk(r,o))}),t.isFullyInitialized()&&i.push(Xse(t.getNode())),bne(n,i,t.getNode(),e)}(o,t)}(o,e,t,rz(n.pendingWriteTree_,i),s,a);if(!l&&!r){const m=wne(o,e);c=c.concat(function SEe(n,e,t){const i=e._path,s=pz(n,e),r=Tne(n,t),o=n.listenProvider_.startListening(XM(e),s,r.hashFn,r.onComplete),a=n.syncPointTree_.subtree(i);if(s)(0,ee.hu)(!Mw(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((h,c,m)=>{if(!dn(h)&&c&&Mw(c))return[cz(c).query];{let b=[];return c&&(b=b.concat(Cne(c).map(v=>v.query))),Mh(m,(v,w)=>{b=b.concat(w)}),b}});for(let h=0;h<l.length;++h){const c=l[h];n.listenProvider_.stopListening(XM(c),pz(n,c))}}return o}(n,e,m))}return c}function uz(n,e,t){const s=n.pendingWriteTree_,r=n.syncPointTree_.findOnPath(e,(o,a)=>{const h=Lw(a,Nd(o,e));if(h)return h});return one(s,e,r,t,!0)}function rk(n,e){return _ne(e,n.syncPointTree_,null,rz(n.pendingWriteTree_,nr()))}function _ne(n,e,t,i){if(dn(n.path))return Ine(n,e,t,i);{const s=e.get(nr());null==t&&null!=s&&(t=Lw(s,nr()));let r=[];const o=cn(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const h=t?t.getImmediateChild(o):null,c=lne(i,o);r=r.concat(_ne(a,l,h,c))}return s&&(r=r.concat(d7(s,n,i,t))),r}}function Ine(n,e,t,i){const s=e.get(nr());null==t&&null!=s&&(t=Lw(s,nr()));let r=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,h=lne(i,o),c=n.operationForChild(o);c&&(r=r.concat(Ine(c,a,l,h)))}),s&&(r=r.concat(d7(s,n,i,t))),r}function Tne(n,e){const t=e.query,i=pz(n,t);return{hashFn:()=>(function Jxe(n){return n.viewCache_.serverCache.getNode()}(e)||qs.EMPTY_NODE).hash(),onComplete:s=>{if("ok"===s)return i?function mEe(n,e,t){const i=f7(n,t);if(i){const s=m7(i),r=s.path,o=s.queryId,a=Nd(r,e);return g7(n,r,new GM(t7(o),a))}return[]}(n,t._path,i):function fEe(n,e){return rk(n,new GM({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const r=function uSe(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(s,t);return p7(n,t,null,r)}}}}function pz(n,e){const t=fz(e);return n.queryToTagMap.get(t)}function fz(n){return n._path.toString()+"$"+n._queryIdentifier}function f7(n,e){return n.tagToQueryMap.get(e)}function m7(n){const e=n.indexOf("$");return(0,ee.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new gr(n.substr(0,e))}}function g7(n,e,t){const i=n.syncPointTree_.get(e);return(0,ee.hu)(i,"Missing sync point for query tag that we're tracking"),d7(i,t,rz(n.pendingWriteTree_,e),null)}function XM(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function cEe(){return(0,ee.hu)(dz,"Reference.ts has not been loaded"),dz}())(n._repo,n._path):n}class b7{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new b7(t)}node(){return this.node_}}class y7{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ra(this.path_,e);return new y7(this.syncTree_,t)}node(){return uz(this.syncTree_,this.path_)}}const Dne=function(n,e,t){return n&&"object"==typeof n?((0,ee.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?EEe(n[".sv"],e,t):"object"==typeof n[".sv"]?_Ee(n[".sv"],e):void(0,ee.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},EEe=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,ee.hu)(!1,"Unexpected server value: "+n)},_Ee=function(n,e,t){n.hasOwnProperty("increment")||(0,ee.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,ee.hu)(!1,"Unexpected increment value: "+i);const s=e.node();if((0,ee.hu)(null!=s,"Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const o=s.getValue();return"number"!=typeof o?i:o+i},kne=function(n,e,t,i){return C7(e,new y7(t,n),i)},v7=function(n,e,t){return C7(n,new b7(e),t)};function C7(n,e,t){const i=n.getPriority().val(),s=Dne(i,e.getImmediateChild(".priority"),t);let r;if(n.isLeafNode()){const o=n,a=Dne(o.getValue(),e,t);return a!==o.getValue()||s!==o.getPriority().val()?new QD(a,wa(s)):n}{const o=n;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new QD(s))),o.forEachChild(po,(a,l)=>{const h=C7(l,e.getImmediateChild(a),t);h!==l&&(r=r.updateImmediateChild(a,h))}),r}}class w7{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function mz(n,e){let t=e instanceof gr?e:new gr(e),i=n,s=cn(t);for(;null!==s;){const r=(0,ee.DV)(i.node.children,s)||{children:{},childCount:0};i=new w7(s,i,r),t=Zr(t),s=cn(t)}return i}function FE(n){return n.node.value}function S7(n,e){n.node.value=e,x7(n)}function Rne(n){return n.node.childCount>0}function gz(n,e){Mh(n.node.children,(t,i)=>{e(new w7(t,n,i))})}function Ane(n,e,t,i){t&&!i&&e(n),gz(n,s=>{Ane(s,e,!0,i)}),t&&i&&e(n)}function QM(n){return new gr(null===n.parent?n.name:QM(n.parent)+"/"+n.name)}function x7(n){null!==n.parent&&function DEe(n,e,t){const i=function IEe(n){return void 0===FE(n)&&!Rne(n)}(t),s=(0,ee.r3)(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,x7(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,x7(n))}(n.parent,n.name,n)}const kEe=/[\[\].#$\/\u0000-\u001F\u007F]/,REe=/[\[\].#$\u0000-\u001F\u007F]/,E7=10485760,bz=function(n){return"string"==typeof n&&0!==n.length&&!kEe.test(n)},Lne=function(n){return"string"==typeof n&&0!==n.length&&!REe.test(n)},JM=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!qV(n)||n&&"object"==typeof n&&(0,ee.r3)(n,".sv")},jb=function(n,e,t,i){i&&void 0===e||eO((0,ee.gK)(n,"value"),e,t)},eO=function(n,e,t){const i=t instanceof gr?new qSe(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+AE(i));if("function"==typeof e)throw new Error(n+"contains a function "+AE(i)+" with contents = "+e.toString());if(qV(e))throw new Error(n+"contains "+e.toString()+" "+AE(i));if("string"==typeof e&&e.length>E7/3&&(0,ee.ug)(e)>E7)throw new Error(n+"contains a string greater than "+E7+" utf8 bytes "+AE(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let s=!1,r=!1;if(Mh(e,(o,a)=>{if(".value"===o)s=!0;else if(".priority"!==o&&".sv"!==o&&(r=!0,!bz(o)))throw new Error(n+" contains an invalid key ("+o+") "+AE(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function WSe(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,ee.ug)(e),Bse(n)})(i,o),eO(n,a,i),function GSe(n){const e=n.parts_.pop();n.byteLength_-=(0,ee.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),s&&r)throw new Error(n+' contains ".value" child '+AE(i)+" in addition to actual children.")}},Mne=function(n,e,t,i){if(i&&void 0===e)return;const s=(0,ee.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const r=[];Mh(e,(o,a)=>{const l=new gr(o);if(eO(s,a,ra(t,l)),".priority"===HG(l)&&!JM(a))throw new Error(s+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(l)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const r=HM(i);for(let o=0;o<r.length;o++)if((".priority"!==r[o]||o!==r.length-1)&&!bz(r[o]))throw new Error(n+"contains an invalid key ("+r[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(USe);let s=null;for(t=0;t<e.length;t++){if(i=e[t],null!==s&&xf(s,i))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}}(s,r)},_7=function(n,e,t){if(!t||void 0!==e){if(qV(e))throw new Error((0,ee.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!JM(e))throw new Error((0,ee.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},tO=function(n,e,t,i){if(!(i&&void 0===t||bz(t)))throw new Error((0,ee.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},iO=function(n,e,t,i){if(!(i&&void 0===t||Lne(t)))throw new Error((0,ee.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_f=function(n,e){if(".info"===cn(e))throw new Error(n+" failed = Can't modify data under /.info/")},One=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!bz(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Lne(n)}(t))throw new Error((0,ee.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class OEe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yz(n,e){let t=null;for(let i=0;i<e.length;i++){const s=e[i],r=s.getPath();null!==t&&!VG(r,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:r}),t.events.push(s)}t&&n.eventLists_.push(t)}function I7(n,e,t){yz(n,t),Pne(n,i=>VG(i,e))}function If(n,e,t){yz(n,t),Pne(n,i=>xf(i,e)||xf(e,i))}function Pne(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];s&&(e(s.path)?(PEe(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function PEe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();kE&&Lh("event: "+t.toString()),ZD(i)}}}const Fne="repo_interrupt";class NEe{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new OEe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tz(),this.transactionQueueTree_=new w7,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Nne(n){const t=n.infoData_.getNode(new gr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function sO(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Nne(n)})}function Bne(n,e,t,i,s){n.dataUpdateCount++;const r=new gr(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(s)if(i){const l=(0,ee.UI)(t,h=>wa(h));o=function bEe(n,e,t,i){const s=f7(n,i);if(s){const r=m7(s),o=r.path,a=r.queryId,l=Nd(o,e),h=fo.fromObject(t);return g7(n,o,new sk(t7(a),l,h))}return[]}(n.serverSyncTree_,r,l,s)}else{const l=wa(t);o=function gEe(n,e,t,i){const s=f7(n,i);if(null!=s){const r=m7(s),o=r.path,a=r.queryId,l=Nd(o,e);return g7(n,o,new ME(t7(a),l,t))}return[]}(n.serverSyncTree_,r,l,s)}else if(i){const l=(0,ee.UI)(t,h=>wa(h));o=function pEe(n,e,t){const i=fo.fromObject(t);return rk(n,new sk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,r,l)}else{const l=wa(t);o=ZM(n.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=ak(n,r)),If(n.eventQueue_,a,o)}function Hne(n,e){T7(n,"connected",e),!1===e&&function jEe(n){ok(n,"onDisconnectEvents");const e=sO(n),t=tz();QG(n.onDisconnect_,nr(),(s,r)=>{const o=kne(s,r,n.serverSyncTree_,e);ik(t,s,o)});let i=[];QG(t,nr(),(s,r)=>{i=i.concat(ZM(n.serverSyncTree_,s,r));const o=A7(n,s);ak(n,o)}),n.onDisconnect_=tz(),If(n.eventQueue_,nr(),i)}(n)}function T7(n,e,t){const i=new gr("/.info/"+e),s=wa(t);n.infoData_.updateSnapshot(i,s);const r=ZM(n.infoSyncTree_,i,s);If(n.eventQueue_,i,r)}function vz(n){return n.nextWriteId_++}function D7(n,e,t,i,s){ok(n,"set",{path:e.toString(),value:t,priority:i});const r=sO(n),o=wa(t,i),a=uz(n.serverSyncTree_,e),l=v7(o,a,r),h=vz(n),c=u7(n.serverSyncTree_,e,l,h,!0);yz(n.eventQueue_,c),n.server_.put(e.toString(),o.val(!0),(b,v)=>{const w="ok"===b;w||Fd("set at "+e+" failed: "+b);const E=Ow(n.serverSyncTree_,h,!w);If(n.eventQueue_,e,E),Pw(0,s,b,v)});const m=A7(n,e);ak(n,m),If(n.eventQueue_,m,[])}function UEe(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,s)=>{"ok"===i&&XG(n.onDisconnect_,e),Pw(0,t,i,s)})}function Vne(n,e,t,i){const s=wa(t);n.server_.onDisconnectPut(e.toString(),s.val(!0),(r,o)=>{"ok"===r&&ik(n.onDisconnect_,e,s),Pw(0,i,r,o)})}function k7(n,e,t){let i;i=".info"===cn(e._path)?p7(n.infoSyncTree_,e,t):p7(n.serverSyncTree_,e,t),I7(n.eventQueue_,e._path,i)}function zne(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Fne)}function ok(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Lh(t,...e)}function Pw(n,e,t,i){e&&ZD(()=>{if("ok"===t)e(null);else{const s=(t||"error").toUpperCase();let r=s;i&&(r+=": "+i);const o=new Error(r);o.code=s,e(o)}})}function R7(n,e,t){return uz(n.serverSyncTree_,e,t)||qs.EMPTY_NODE}function Cz(n,e=n.transactionQueueTree_){if(e||wz(n,e),FE(e)){const t=Une(n,e);(0,ee.hu)(t.length>0,"Sending zero length transaction queue"),t.every(s=>0===s.status)&&function YEe(n,e,t){const i=t.map(h=>h.currentWriteId),s=R7(n,e,i);let r=s;const o=s.hash();for(let h=0;h<t.length;h++){const c=t[h];(0,ee.hu)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const m=Nd(e,c.path);r=r.updateChild(m,c.currentOutputSnapshotRaw)}const a=r.val(!0),l=e;n.server_.put(l.toString(),a,h=>{ok(n,"transaction put response",{path:l.toString(),status:h});let c=[];if("ok"===h){const m=[];for(let b=0;b<t.length;b++)t[b].status=2,c=c.concat(Ow(n.serverSyncTree_,t[b].currentWriteId)),t[b].onComplete&&m.push(()=>t[b].onComplete(null,!0,t[b].currentOutputSnapshotResolved)),t[b].unwatcher();wz(n,mz(n.transactionQueueTree_,e)),Cz(n,n.transactionQueueTree_),If(n.eventQueue_,e,c);for(let b=0;b<m.length;b++)ZD(m[b])}else{if("datastale"===h)for(let m=0;m<t.length;m++)t[m].status=3===t[m].status?4:0;else{Fd("transaction at "+l.toString()+" failed: "+h);for(let m=0;m<t.length;m++)t[m].status=4,t[m].abortReason=h}ak(n,e)}},o)}(n,QM(e),t)}else Rne(e)&&gz(e,t=>{Cz(n,t)})}function ak(n,e){const t=jne(n,e),i=QM(t);return function ZEe(n,e,t){if(0===e.length)return;const i=[];let s=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],h=Nd(t,l.path);let m,c=!1;if((0,ee.hu)(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)c=!0,m=l.abortReason,s=s.concat(Ow(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)c=!0,m="maxretry",s=s.concat(Ow(n.serverSyncTree_,l.currentWriteId,!0));else{const b=R7(n,l.path,o);l.currentInputSnapshot=b;const v=e[a].update(b.val());if(void 0!==v){eO("transaction failed: Data returned ",v,l.path);let w=wa(v);"object"==typeof v&&null!=v&&(0,ee.r3)(v,".priority")||(w=w.updatePriority(b.getPriority()));const D=l.currentWriteId,L=sO(n),N=v7(w,b,L);l.currentOutputSnapshotRaw=w,l.currentOutputSnapshotResolved=N,l.currentWriteId=vz(n),o.splice(o.indexOf(D),1),s=s.concat(u7(n.serverSyncTree_,l.path,N,l.currentWriteId,l.applyLocally)),s=s.concat(Ow(n.serverSyncTree_,D,!0))}else c=!0,m="nodata",s=s.concat(Ow(n.serverSyncTree_,l.currentWriteId,!0))}If(n.eventQueue_,t,s),s=[],c&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&i.push("nodata"===m?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(m),!1,null)))}wz(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)ZD(i[a]);Cz(n,n.transactionQueueTree_)}(n,Une(n,t),i),i}function jne(n,e){let t,i=n.transactionQueueTree_;for(t=cn(e);null!==t&&void 0===FE(i);)i=mz(i,t),t=cn(e=Zr(e));return i}function Une(n,e){const t=[];return qne(n,e,t),t.sort((i,s)=>i.order-s.order),t}function qne(n,e,t){const i=FE(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);gz(e,s=>{qne(n,s,t)})}function wz(n,e){const t=FE(e);if(t){let i=0;for(let s=0;s<t.length;s++)2!==t[s].status&&(t[i]=t[s],i++);t.length=i,S7(e,t.length>0?t:void 0)}gz(e,i=>{wz(n,i)})}function A7(n,e){const t=QM(jne(n,e)),i=mz(n.transactionQueueTree_,e);return function TEe(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,s=>{L7(n,s)}),L7(n,i),Ane(i,s=>{L7(n,s)}),t}function L7(n,e){const t=FE(e);if(t){const i=[];let s=[],r=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,ee.hu)(r===o-1,"All SENT items should be at beginning of queue."),r=o,t[o].status=3,t[o].abortReason="set"):((0,ee.hu)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),s=s.concat(Ow(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===r?S7(e,void 0):t.length=r+1,If(n.eventQueue_,QM(e),s);for(let o=0;o<i.length;o++)ZD(i[o])}}const M7=function(n,e){const t=JEe(n),i=t.namespace;return"firebase.com"===t.domain&&Hb(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Hb("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fd("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new LG(t.host,t.secure,i,e,"ws"===t.scheme||"wss"===t.scheme,"",i!==t.subdomain),path:new gr(t.pathString)}},JEe=function(n){let e="",t="",i="",s="",r="",o=!0,a="https",l=443;if("string"==typeof n){let h=n.indexOf("//");h>=0&&(a=n.substring(0,h-1),n=n.substring(h+2));let c=n.indexOf("/");-1===c&&(c=n.length);let m=n.indexOf("?");-1===m&&(m=n.length),e=n.substring(0,Math.min(c,m)),c<m&&(s=function XEe(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch(r){}e+="/"+s}return e}(n.substring(c,m)));const b=function QEe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Fd(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,m)));h=e.indexOf(":"),h>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(h+1),10)):h=e.length;const v=e.slice(0,h);if("localhost"===v.toLowerCase())t="localhost";else if(v.split(".").length<=2)t=v;else{const w=e.indexOf(".");i=e.substring(0,w).toLowerCase(),t=e.substring(w+1),r=i}"ns"in b&&(r=b.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}};class Wne{constructor(e,t,i,s){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ee.Pz)(this.snapshot.exportVal())}}class Gne{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class $ne{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,ee.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Kne{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new ee.BH;return UEe(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){_f("OnDisconnect.remove",this._path);const e=new ee.BH;return Vne(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){_f("OnDisconnect.set",this._path),jb("OnDisconnect.set",e,this._path,!1);const t=new ee.BH;return Vne(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){_f("OnDisconnect.setWithPriority",this._path),jb("OnDisconnect.setWithPriority",e,this._path,!1),_7("OnDisconnect.setWithPriority",t,!1);const i=new ee.BH;return function qEe(n,e,t,i,s){const r=wa(t,i);n.server_.onDisconnectPut(e.toString(),r.val(!0),(o,a)=>{"ok"===o&&ik(n.onDisconnect_,e,r),Pw(0,s,o,a)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){_f("OnDisconnect.update",this._path),Mne("OnDisconnect.update",e,this._path,!1);const t=new ee.BH;return function WEe(n,e,t,i){if((0,ee.xb)(t))return Lh("onDisconnect().update() called with empty data.  Don't do anything."),void Pw(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(s,r)=>{"ok"===s&&Mh(t,(o,a)=>{const l=wa(a);ik(n.onDisconnect_,ra(e,o),l)}),Pw(0,i,s,r)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Du{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return dn(this._path)?null:HG(this._path)}get ref(){return new Tf(this._repo,this._path)}get _queryIdentifier(){const e=Jse(this._queryParams),t=kG(e);return"{}"===t?"default":t}get _queryObject(){return Jse(this._queryParams)}isEqual(e){if(!((e=(0,ee.m9)(e))instanceof Du))return!1;const t=this._repo===e._repo,i=VG(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function jSe(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Sz(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Fw(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===zb){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Xv)throw new Error(i);if("string"!=typeof e)throw new Error(s)}if(n.hasEnd()){if(n.getIndexEndName()!==Vb)throw new Error(i);if("string"!=typeof t)throw new Error(s)}}else if(n.getIndex()===po){if(null!=e&&!JM(e)||null!=t&&!JM(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ee.hu)(n.getIndex()instanceof WG||n.getIndex()===GG,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xz(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Tf extends Du{constructor(e,t){super(e,t,new QV,!1)}get parent(){const e=Nse(this._path);return null===e?null:new Tf(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class NE{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new gr(e),i=BE(this.ref,e);return new NE(this._node.getChild(t),i,po)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,s)=>e(new NE(s,BE(this.ref,i),po)))}hasChild(e){const t=new gr(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Yne(n,e){return(n=(0,ee.m9)(n))._checkNotDeleted("ref"),void 0!==e?BE(n._root,e):n._root}function Zne(n,e){(n=(0,ee.m9)(n))._checkNotDeleted("refFromURL");const t=M7(e,n._repo.repoInfo_.nodeAdmin);One("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Hb("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),Yne(n,t.path.toString())}function BE(n,e){return null===cn((n=(0,ee.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),iO("child","path",t,!1)):iO("child","path",e,!1),new Tf(n._repo,ra(n._path,e));var t}function O7(n,e){n=(0,ee.m9)(n),_f("set",n._path),jb("set",e,n._path,!1);const t=new ee.BH;return D7(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function n_e(n,e){Mne("update",e,n._path,!1);const t=new ee.BH;return function zEe(n,e,t,i){ok(n,"update",{path:e.toString(),value:t});let s=!0;const r=sO(n),o={};if(Mh(t,(a,l)=>{s=!1,o[a]=kne(ra(e,a),wa(l),n.serverSyncTree_,r)}),s)Lh("update() called with empty data.  Don't do anything."),Pw(0,i,"ok",void 0);else{const a=vz(n),l=function uEe(n,e,t,i){!function kxe(n,e,t,i){(0,ee.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=s7(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const s=fo.fromObject(t);return rk(n,new sk({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,s))}(n.serverSyncTree_,e,o,a);yz(n.eventQueue_,l),n.server_.merge(e.toString(),t,(h,c)=>{const m="ok"===h;m||Fd("update at "+e+" failed: "+h);const b=Ow(n.serverSyncTree_,a,!m),v=b.length>0?ak(n,e):e;If(n.eventQueue_,v,b),Pw(0,i,h,c)}),Mh(t,h=>{const c=A7(n,ra(e,h));ak(n,c)}),If(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function r_e(n){return function VEe(n,e){const t=function yEe(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(h,c)=>{const m=Nd(h,t);i=i||Lw(c,m)});let s=n.syncPointTree_.get(t);s?i=i||Lw(s,nr()):(s=new yne,n.syncPointTree_=n.syncPointTree_.set(t,s));const r=null!=i,o=r?new Rw(i,!0,!1):null;return function eEe(n){return nz(n.viewCache_)}(vne(s,e,rz(n.pendingWriteTree_,e._path),r?o.getNode():qs.EMPTY_NODE,r))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(i=>{const s=wa(i).withIndex(e._queryParams.getIndex()),r=ZM(n.serverSyncTree_,e._path,s);return I7(n.eventQueue_,e._path,r),Promise.resolve(s)},i=>(ok(n,"get for query "+(0,ee.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}((n=(0,ee.m9)(n))._repo,n).then(e=>new NE(e,new Tf(n._repo,n._path),n._queryParams.getIndex()))}class Ez{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new Wne("value",this,new NE(e.snapshotNode,new Tf(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Gne(this,e,t):null}matches(e){return e instanceof Ez&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class _z{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Gne(this,e,t):null}createEvent(e,t){(0,ee.hu)(null!=e.childName,"Child events should have a childName.");const i=BE(new Tf(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new Wne(e.type,this,new NE(e.snapshotNode,i,s),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof _z&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function nO(n,e,t,i,s){let r;if("object"==typeof i&&(r=void 0,s=i),"function"==typeof i&&(r=i),s&&s.onlyOnce){const l=t,h=(c,m)=>{k7(n._repo,n,a),l(c,m)};h.userCallback=t.userCallback,h.context=t.context,t=h}const o=new $ne(t,r||void 0),a="value"===e?new Ez(o):new _z(e,o);return function GEe(n,e,t){let i;i=".info"===cn(e._path)?Ene(n.infoSyncTree_,e,t):Ene(n.serverSyncTree_,e,t),I7(n.eventQueue_,e._path,i)}(n._repo,n,a),()=>k7(n._repo,n,a)}function P7(n,e,t,i){return nO(n,"value",e,t,i)}function Xne(n,e,t,i){return nO(n,"child_added",e,t,i)}function Qne(n,e,t,i){return nO(n,"child_changed",e,t,i)}function Jne(n,e,t,i){return nO(n,"child_moved",e,t,i)}function ere(n,e,t,i){return nO(n,"child_removed",e,t,i)}function tre(n,e,t){let i=null;const s=t?new $ne(t):null;"value"===e?i=new Ez(s):e&&(i=new _z(e,s)),k7(n._repo,n,i)}class Jm{}class ire extends Jm{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){jb("endAt",this._value,e._path,!0);const t=ZG(e._queryParams,this._value,this._key);if(xz(t),Fw(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Du(e._repo,e._path,t,e._orderByCalled)}}class a_e extends Jm{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){jb("endBefore",this._value,e._path,!1);const t=function gxe(n,e,t){let i,s;return n.index_===zb?("string"==typeof e&&(e=Zse(e)),s=ZG(n,e,t)):(i=null==t?Xv:Zse(t),s=ZG(n,e,i)),s.endBeforeSet_=!0,s}(e._queryParams,this._value,this._key);if(xz(t),Fw(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Du(e._repo,e._path,t,e._orderByCalled)}}class sre extends Jm{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){jb("startAt",this._value,e._path,!0);const t=YG(e._queryParams,this._value,this._key);if(xz(t),Fw(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Du(e._repo,e._path,t,e._orderByCalled)}}class c_e extends Jm{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){jb("startAfter",this._value,e._path,!1);const t=function mxe(n,e,t){let i;if(n.index_===zb)"string"==typeof e&&(e=Yse(e)),i=YG(n,e,t);else{let s;s=null==t?Vb:Yse(t),i=YG(n,e,s)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(xz(t),Fw(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Du(e._repo,e._path,t,e._orderByCalled)}}class u_e extends Jm{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Du(e._repo,e._path,function pxe(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class f_e extends Jm{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Du(e._repo,e._path,function fxe(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class g_e extends Jm{constructor(e){super(),this._path=e}_apply(e){Sz(e,"orderByChild");const t=new gr(this._path);if(dn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new WG(t),s=JV(e._queryParams,i);return Fw(s),new Du(e._repo,e._path,s,!0)}}class y_e extends Jm{_apply(e){Sz(e,"orderByKey");const t=JV(e._queryParams,zb);return Fw(t),new Du(e._repo,e._path,t,!0)}}class C_e extends Jm{_apply(e){Sz(e,"orderByPriority");const t=JV(e._queryParams,po);return Fw(t),new Du(e._repo,e._path,t,!0)}}class S_e extends Jm{_apply(e){Sz(e,"orderByValue");const t=JV(e._queryParams,GG);return Fw(t),new Du(e._repo,e._path,t,!0)}}class E_e extends Jm{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(jb("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ire(this._value,this._key)._apply(new sre(this._value,this._key)._apply(e))}}function eg(n,...e){let t=(0,ee.m9)(n);for(const i of e)t=i._apply(t);return t}(function nEe(n){(0,ee.hu)(!hz,"__referenceConstructor has already been defined"),hz=n})(Tf),function hEe(n){(0,ee.hu)(!dz,"__referenceConstructor has already been defined"),dz=n}(Tf);const F7={};function rre(n,e,t,i,s){let r=i||n.options.databaseURL;void 0===r&&(n.options.projectId||Hb("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Lh("Using default host for project ",n.options.projectId),r=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,h,o=M7(r,s),a=o.repoInfo;"undefined"!=typeof process&&(h=process.env.FIREBASE_DATABASE_EMULATOR_HOST),h?(l=!0,r=`http://${h}?ns=${a.namespace}`,o=M7(r,s),a=o.repoInfo):l=!o.repoInfo.secure;const c=s&&l?new FM(FM.OWNER):new gSe(n.name,n.options,e);One("Invalid Firebase Database URL",o),dn(o.path)||Hb("Database URL must point to the root of a Firebase Database (not including a child path).");const m=function k_e(n,e,t,i){let s=F7[e.name];s||(s={},F7[e.name]=s);let r=s[n.toURLString()];return r&&Hb("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new NEe(n,false,t,i),s[n.toURLString()]=r,r}(a,n,c,new mSe(n.name,t));return new A_e(m,n)}class A_e{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function BEe(n,e,t){if(n.stats_=PG(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ez(n.repoInfo_,(i,s,r,o)=>{Bne(n,i,s,r,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Hne(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ee.Pz)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new LE(n.repoInfo_,e,(i,s,r,o)=>{Bne(n,i,s,r,o)},i=>{Hne(n,i)},i=>{!function HEe(n,e){Mh(e,(t,i)=>{T7(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function CSe(n,e){const t=n.toString();return OG[t]||(OG[t]=e()),OG[t]}(n.repoInfo_,()=>new Sxe(n.stats_,n.server_)),n.infoData_=new bxe,n.infoSyncTree_=new xne({startListening:(i,s,r,o)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=ZM(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),T7(n,"connected",!1),n.serverSyncTree_=new xne({startListening:(i,s,r,o)=>(n.server_.listen(i,r,s,(a,l)=>{const h=o(a,l);If(n.eventQueue_,i._path,h)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tf(this._repo,nr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function D_e(n,e){const t=F7[e];(!t||t[n.key]!==n)&&Hb(`Database ${e}(${n.repoInfo_}) has already been deleted.`),zne(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Hb("Cannot call "+e+" on a deleted database.")}}function P_e(n,e){ase(n,e)}const N_e={".sv":"timestamp"};class V_e{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}LE.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},LE.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function F_e(n){ise(Kr.SDK_VERSION),(0,Kr._registerComponent)(new mu.wA("database",(e,{instanceIdentifier:t})=>rre(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Kr.registerVersion)(ese,"0.12.5",n),(0,Kr.registerVersion)(ese,"0.12.5","esm2017")}();const q_e=new Rd.Yd("@firebase/database-compat"),ore=function(n){q_e.warn("FIREBASE WARNING: "+n)};class $_e{constructor(e){this._delegate=e}cancel(e){(0,ee.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ee.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,ee.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ee.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,ee.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ee.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),s=>t(s)),i}setWithPriority(e,t,i){(0,ee.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ee.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const s=this._delegate.setWithPriority(e,t);return i&&s.then(()=>i(null),r=>i(r)),s}update(e,t){if((0,ee.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let r=0;r<e.length;++r)s[""+r]=e[r];e=s,ore("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ee.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),s=>t(s)),i}}class K_e{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,ee.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Nw{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,ee.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ee.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ee.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ee.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,ee.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),iO("DataSnapshot.child","path",e,!1),new Nw(this._database,this._delegate.child(e))}hasChild(e){return(0,ee.Dv)("DataSnapshot.hasChild",1,1,arguments.length),iO("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,ee.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,ee.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ee.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Nw(this._database,t)))}hasChildren(){return(0,ee.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ee.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ee.Dv)("DataSnapshot.ref",0,0,arguments.length),new fp(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class dc{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,s){var r;(0,ee.Dv)("Query.on",2,4,arguments.length),(0,ee.Wj)("Query.on","callback",t,!1);const o=dc.getCancelAndContextArgs_("Query.on",i,s),a=(h,c)=>{t.call(o.context,new Nw(this.database,h),c)};a.userCallback=t,a.context=o.context;const l=null===(r=o.cancel)||void 0===r?void 0:r.bind(o.context);switch(e){case"value":return P7(this._delegate,a,l),t;case"child_added":return Xne(this._delegate,a,l),t;case"child_removed":return ere(this._delegate,a,l),t;case"child_changed":return Qne(this._delegate,a,l),t;case"child_moved":return Jne(this._delegate,a,l),t;default:throw new Error((0,ee.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,ee.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ee.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,ee.Wj)("Query.off","callback",t,!0),(0,ee.lb)("Query.off","context",i,!0),t){const s=()=>{};s.userCallback=t,s.context=i,tre(this._delegate,e,s)}else tre(this._delegate,e)}get(){return r_e(this._delegate).then(e=>new Nw(this.database,e))}once(e,t,i,s){(0,ee.Dv)("Query.once",1,4,arguments.length),(0,ee.Wj)("Query.once","callback",t,!0);const r=dc.getCancelAndContextArgs_("Query.once",i,s),o=new ee.BH,a=(h,c)=>{const m=new Nw(this.database,h);t&&t.call(r.context,m,c),o.resolve(m)};a.userCallback=t,a.context=r.context;const l=h=>{r.cancel&&r.cancel.call(r.context,h),o.reject(h)};switch(e){case"value":P7(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Xne(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":ere(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Qne(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Jne(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,ee.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,ee.Dv)("Query.limitToFirst",1,1,arguments.length),new dc(this.database,eg(this._delegate,function p_e(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new u_e(n)}(e)))}limitToLast(e){return(0,ee.Dv)("Query.limitToLast",1,1,arguments.length),new dc(this.database,eg(this._delegate,function m_e(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new f_e(n)}(e)))}orderByChild(e){return(0,ee.Dv)("Query.orderByChild",1,1,arguments.length),new dc(this.database,eg(this._delegate,function b_e(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return iO("orderByChild","path",n,!1),new g_e(n)}(e)))}orderByKey(){return(0,ee.Dv)("Query.orderByKey",0,0,arguments.length),new dc(this.database,eg(this._delegate,function v_e(){return new y_e}()))}orderByPriority(){return(0,ee.Dv)("Query.orderByPriority",0,0,arguments.length),new dc(this.database,eg(this._delegate,function w_e(){return new C_e}()))}orderByValue(){return(0,ee.Dv)("Query.orderByValue",0,0,arguments.length),new dc(this.database,eg(this._delegate,function x_e(){return new S_e}()))}startAt(e=null,t){return(0,ee.Dv)("Query.startAt",0,2,arguments.length),new dc(this.database,eg(this._delegate,function h_e(n=null,e){return tO("startAt","key",e,!0),new sre(n,e)}(e,t)))}startAfter(e=null,t){return(0,ee.Dv)("Query.startAfter",0,2,arguments.length),new dc(this.database,eg(this._delegate,function d_e(n,e){return tO("startAfter","key",e,!0),new c_e(n,e)}(e,t)))}endAt(e=null,t){return(0,ee.Dv)("Query.endAt",0,2,arguments.length),new dc(this.database,eg(this._delegate,function o_e(n,e){return tO("endAt","key",e,!0),new ire(n,e)}(e,t)))}endBefore(e=null,t){return(0,ee.Dv)("Query.endBefore",0,2,arguments.length),new dc(this.database,eg(this._delegate,function l_e(n,e){return tO("endBefore","key",e,!0),new a_e(n,e)}(e,t)))}equalTo(e,t){return(0,ee.Dv)("Query.equalTo",1,2,arguments.length),new dc(this.database,eg(this._delegate,function __e(n,e){return tO("equalTo","key",e,!0),new E_e(n,e)}(e,t)))}toString(){return(0,ee.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ee.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,ee.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof dc))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const s={cancel:void 0,context:void 0};if(t&&i)s.cancel=t,(0,ee.Wj)(e,"cancel",s.cancel,!0),s.context=i,(0,ee.lb)(e,"context",s.context,!0);else if(t)if("object"==typeof t&&null!==t)s.context=t;else{if("function"!=typeof t)throw new Error((0,ee.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");s.cancel=t}return s}get ref(){return new fp(this.database,new Tf(this._delegate._repo,this._delegate._path))}}class fp extends dc{constructor(e,t){super(e,new Du(t._repo,t._path,new QV,!1)),this.database=e,this._delegate=t}getKey(){return(0,ee.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,ee.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new fp(this.database,BE(this._delegate,e))}getParent(){(0,ee.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new fp(this.database,e):null}getRoot(){return(0,ee.Dv)("Reference.root",0,0,arguments.length),new fp(this.database,this._delegate.root)}set(e,t){(0,ee.Dv)("Reference.set",1,2,arguments.length),(0,ee.Wj)("Reference.set","onComplete",t,!0);const i=O7(this._delegate,e);return t&&i.then(()=>t(null),s=>t(s)),i}update(e,t){if((0,ee.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let r=0;r<e.length;++r)s[""+r]=e[r];e=s,ore("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_f("Reference.update",this._delegate._path),(0,ee.Wj)("Reference.update","onComplete",t,!0);const i=n_e(this._delegate,e);return t&&i.then(()=>t(null),s=>t(s)),i}setWithPriority(e,t,i){(0,ee.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ee.Wj)("Reference.setWithPriority","onComplete",i,!0);const s=function s_e(n,e,t){if(_f("setWithPriority",n._path),jb("setWithPriority",e,n._path,!1),_7("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new ee.BH;return D7(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&s.then(()=>i(null),r=>i(r)),s}remove(e){(0,ee.Dv)("Reference.remove",0,1,arguments.length),(0,ee.Wj)("Reference.remove","onComplete",e,!0);const t=function t_e(n){return _f("remove",n._path),O7(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,ee.Dv)("Reference.transaction",1,3,arguments.length),(0,ee.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,ee.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,ee.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const s=function z_e(n,e,t){var i;if(n=(0,ee.m9)(n),_f("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const s=null===(i=null==t?void 0:t.applyLocally)||void 0===i||i,r=new ee.BH,a=P7(n,()=>{});return function KEe(n,e,t,i,s,r){ok(n,"transaction on "+e);const o={path:e,update:t,onComplete:i,status:null,order:nse(),applyLocally:r,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=R7(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{eO("transaction failed: Data returned ",l,o.path),o.status=0;const h=mz(n.transactionQueueTree_,e),c=FE(h)||[];let m;c.push(o),S7(h,c),"object"==typeof l&&null!==l&&(0,ee.r3)(l,".priority")?(m=(0,ee.DV)(l,".priority"),(0,ee.hu)(JM(m),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):m=(uz(n.serverSyncTree_,e)||qs.EMPTY_NODE).getPriority().val();const b=sO(n),v=wa(l,m),w=v7(v,a,b);o.currentOutputSnapshotRaw=v,o.currentOutputSnapshotResolved=w,o.currentWriteId=vz(n);const E=u7(n.serverSyncTree_,e,w,o.currentWriteId,o.applyLocally);If(n.eventQueue_,e,E),Cz(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,h,c)=>{let m=null;l?r.reject(l):(m=new NE(c,new Tf(n._repo,n._path),po),r.resolve(new V_e(h,m)))},a,s),r.promise}(this._delegate,e,{applyLocally:i}).then(r=>new K_e(r.committed,new Nw(this.database,r.snapshot)));return t&&s.then(r=>t(null,r.committed,r.snapshot),r=>t(r,!1,null)),s}setPriority(e,t){(0,ee.Dv)("Reference.setPriority",1,2,arguments.length),(0,ee.Wj)("Reference.setPriority","onComplete",t,!0);const i=function i_e(n,e){n=(0,ee.m9)(n),_f("setPriority",n._path),_7("setPriority",e,!1);const t=new ee.BH;return D7(n._repo,ra(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),s=>t(s)),i}push(e,t){(0,ee.Dv)("Reference.push",0,2,arguments.length),(0,ee.Wj)("Reference.push","onComplete",t,!0);const i=function e_e(n,e){n=(0,ee.m9)(n),_f("push",n._path),jb("push",e,n._path,!0);const t=Nne(n._repo),i=hxe(t),s=BE(n,i),r=BE(n,i);let o;return o=null!=e?O7(r,e).then(()=>r):Promise.resolve(r),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}(this._delegate,e),s=i.then(o=>new fp(this.database,o));t&&s.then(()=>t(null),o=>t(o));const r=new fp(this.database,i);return r.then=s.then.bind(s),r.catch=s.catch.bind(s,void 0),r}onDisconnect(){return _f("Reference.onDisconnect",this._delegate._path),new $_e(new Kne(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class rO{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,i={}){!function L_e(n,e,t,i={}){(n=(0,ee.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Hb("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&Hb('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new FM(FM.OWNER);else if(i.mockUserToken){const o="string"==typeof i.mockUserToken?i.mockUserToken:(0,ee.Sg)(i.mockUserToken,n.app.options.projectId);r=new FM(o)}!function T_e(n,e,t,i){n.repoInfo_=new LG(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(s,e,t,r)}(this._delegate,e,t,i)}ref(e){if((0,ee.Dv)("database.ref",0,1,arguments.length),e instanceof fp){const t=Zne(this._delegate,e.toString());return new fp(this,t)}{const t=Yne(this._delegate,e);return new fp(this,t)}}refFromURL(e){(0,ee.Dv)("database.refFromURL",1,1,arguments.length);const i=Zne(this._delegate,e);return new fp(this,i)}goOffline(){return(0,ee.Dv)("database.goOffline",0,0,arguments.length),function M_e(n){(n=(0,ee.m9)(n))._checkNotDeleted("goOffline"),zne(n._repo)}(this._delegate)}goOnline(){return(0,ee.Dv)("database.goOnline",0,0,arguments.length),function O_e(n){(n=(0,ee.m9)(n))._checkNotDeleted("goOnline"),function $Ee(n){n.persistentConnection_&&n.persistentConnection_.resume(Fne)}(n._repo)}(this._delegate)}}rO.ServerValue={TIMESTAMP:function B_e(){return N_e}(),increment:n=>function H_e(n){return{".sv":{increment:n}}}(n)};var Z_e=Object.freeze({__proto__:null,initStandalone:function Y_e({app:n,url:e,version:t,customAuthImpl:i,namespace:s,nodeAdmin:r=!1}){ise(t);const o=new mu.zt("auth-internal",new mu.H0("database-standalone"));return o.setComponent(new mu.wA("auth-internal",()=>i,"PRIVATE")),{instance:new rO(rre(n,o,void 0,e,r),n),namespace:s}}});const X_e=rO.ServerValue;function are(n){return null==n}function lre(n){return"function"==typeof n.set}function hre(n,e){return lre(e)?e:n.ref(e)}function cre(n,e){if(function J_e(n){return"string"==typeof n}(n))return e.stringCase();if(lre(n))return e.firebaseCase();if(function eIe(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function oO(n,e,t="on",i=O0.z){return new Fn.y(s=>{let r=null;return r=n[t](e,(o,a)=>{i.schedule(()=>{s.next({snapshot:o,prevKey:a})}),"once"===t&&i.schedule(()=>s.complete())},o=>{i.schedule(()=>s.error(o))}),"on"===t?{unsubscribe(){null!=r&&n.off(e,r)}}:{unsubscribe(){}}}).pipe((0,Ni.U)(s=>{const{snapshot:r,prevKey:o}=s;let a=null;return r.exists()&&(a=r.key),{type:e,payload:r,prevKey:o,key:a}}),(0,ux.B)())}function dre(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function sIe(n,e){const{payload:t,prevKey:i,key:s}=e,r=dre(n,s),o=function iIe(n,e){if(are(e))return 0;{const t=dre(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let a=null;e.payload.forEach(l=>{const h={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,h],!1})}return n;case"child_added":if(r>-1){const a=n[r-1];(a&&a.key||null)!==i&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===s?e:a);case"child_moved":if(r>-1){const a=n.splice(r,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function ure(n){return(are(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function pre(n,e,t){return function tIe(n,e,t){return oO(n,"value","once",t).pipe(lr(i=>{const s=[ei(i)];return e.forEach(r=>s.push(oO(n,r,"on",t))),(0,Sh.T)(...s).pipe(vh(sIe,[]))}),QA())}(n,e=ure(e),t)}function fre(n,e,t){const i=(e=ure(e)).map(s=>oO(n,s,"on",t));return(0,Sh.T)(...i)}function mre(n,e){return function(i,s){return cre(i,{stringCase:()=>n.child(i)[e](s),firebaseCase:()=>i[e](s),snapshotCase:()=>i.ref[e](s)})}}function aIe(n){return function(t){return t?cre(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function gre(n,e){return function(){return oO(n,"value","on",e)}}!function Q_e(n){n.INTERNAL.registerComponent(new mu.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:t});return new rO(s,i)},"PUBLIC").setServiceProps({Reference:fp,Query:dc,Database:rO,DataSnapshot:Nw,enableLogging:P_e,INTERNAL:Z_e,ServerValue:X_e}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(P0.Z);const cIe=new d.OlP("angularfire2.realtimeDatabaseURL"),dIe=new d.OlP("angularfire2.database.use-emulator");let uIe=(()=>{class n{constructor(t,i,s,r,o,a,l,h,c,m,b,v,w,E,D){this.schedulers=a;const L=l,N=(0,nl.on)(t,o,i);h&&gT(N,o,c,b,v,w,m,E),this.database=(0,nl.cc)(`${N.name}.database.${s}`,"AngularFireDatabase",N.name,()=>{const V=o.runOutsideAngular(()=>N.database(s||void 0));return L&&V.useEmulator(...L),V},[L])}list(t,i){const s=this.schedulers.ngZone.runOutsideAngular(()=>hre(this.database,t));let r=s;return i&&(r=i(s)),function lIe(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:mre(i,"update"),set:mre(i,"set"),push:s=>i.push(s),remove:aIe(i),snapshotChanges:s=>pre(n,s,t).pipe(qn.iC),stateChanges:s=>fre(n,s,t).pipe(qn.iC),auditTrail:s=>function nIe(n,e,t){return function oIe(n,e,t){return function rIe(n,e){return oO(n,"value","on",e).pipe((0,Ni.U)(t=>{let i;return t.payload.forEach(s=>(i=s.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function sSe(...n){const e=(0,xm.jO)(n);return(0,Mo.e)((t,i)=>{const s=n.length,r=new Array(s);let o=n.map(()=>!1),a=!1;for(let l=0;l<s;l++)(0,yh.Xf)(n[l]).subscribe((0,gn.x)(i,h=>{r[l]=h,!a&&!o[l]&&(o[l]=!0,(a=o.every(zc.y))&&(o=null))},Jie.Z));t.subscribe((0,gn.x)(i,l=>{if(a){const h=[l,...r];i.next(e?e(...h):h)}}))})}(e),(0,Ni.U)(([s,r])=>{const o=s.lastKeyToLoad,a=r.map(l=>l.key);return{actions:r,lastKeyToLoad:o,loadedKeys:a}}),function nSe(n){return(0,Mo.e)((e,t)=>{let i=!1,s=0;e.subscribe((0,gn.x)(t,r=>(i||(i=!n(r,s++)))&&t.next(r)))})}(s=>-1===s.loadedKeys.indexOf(s.lastKeyToLoad)),(0,Ni.U)(s=>s.actions))}(n,fre(n,e).pipe(vh((s,r)=>[...s,r],[])),t)}(n,s,t).pipe(qn.iC),valueChanges:(s,r)=>pre(n,s,t).pipe((0,Ni.U)(a=>a.map(l=>r&&r.idField?Object.assign(Object.assign({},l.payload.val()),{[r.idField]:l.key}):l.payload.val())),qn.iC)}}(r,this)}object(t){return function hIe(n,e){return{query:n,snapshotChanges:()=>gre(n,e.schedulers.outsideAngular)().pipe(qn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>gre(n,e.schedulers.outsideAngular)().pipe(qn.iC,(0,Ni.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>hre(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(nl.Dh),d.LFG(nl.xv,8),d.LFG(cIe,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(qn.HU),d.LFG(dIe,8),d.LFG(M0,8),d.LFG(mA,8),d.LFG(gA,8),d.LFG(bx,8),d.LFG(BB,8),d.LFG(bA,8),d.LFG(mT,8),d.LFG(Kc,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pIe=(()=>{class n{constructor(){L0.Z.registerVersion("angularfire",qn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[uIe]}),n})();const bre_firebase={apiKey:"AIzaSyBb16QC-jxMiHvGHD1kZ4LJDMr9D64vRPs",authDomain:"kanbanfire-7fda1.firebaseapp.com",projectId:"kanbanfire-7fda1",storageBucket:"kanbanfire-7fda1.appspot.com",messagingSenderId:"694524982576",appId:"1:694524982576:web:89e978f7282e2abbc944f5",measurementId:"G-86TE1ZLGM0"};const ku=new d.OlP("NgValueAccessor");function Bw(n){return null==n||0===n.length}function wre(n){return null!=n&&"number"==typeof n.length}const ed=new d.OlP("NgValidators"),Hw=new d.OlP("NgAsyncValidators"),yIe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Sre{static min(e){return function xre(n){return e=>{if(Bw(e.value)||Bw(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Ere(n){return e=>{if(Bw(e.value)||Bw(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function _re(n){return Bw(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Ire(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Tre(n){return Bw(n.value)||yIe.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Dre(n){return e=>Bw(e.value)||!wre(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function kre(n){return e=>wre(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Rre(n){if(!n)return Iz;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Bw(i.value))return null;const s=i.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return Fre(e)}static composeAsync(e){return Nre(e)}}function Iz(n){return null}function Are(n){return null!=n}function Lre(n){const e=(0,d.QGY)(n)?(0,ir.D)(n):n;return(0,d.CqO)(e),e}function Mre(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ore(n,e){return e.map(t=>t(n))}function Pre(n){return n.map(e=>function vIe(n){return!n.validate}(e)?e:t=>e.validate(t))}function Fre(n){if(!n)return null;const e=n.filter(Are);return 0==e.length?null:function(t){return Mre(Ore(t,e))}}function B7(n){return null!=n?Fre(Pre(n)):null}function Nre(n){if(!n)return null;const e=n.filter(Are);return 0==e.length?null:function(t){return function yre(...n){const e=(0,xm.jO)(n),{args:t,keys:i}=Ku(n),s=new Fn.y(r=>{const{length:o}=t;if(!o)return void r.complete();const a=new Array(o);let l=o,h=o;for(let c=0;c<o;c++){let m=!1;(0,yh.Xf)(t[c]).subscribe((0,gn.x)(r,b=>{m||(m=!0,h--),a[c]=b},()=>l--,void 0,()=>{(!l||!m)&&(h||r.next(i?ev(i,a):a),r.complete())}))}});return e?s.pipe(tf(e)):s}(Ore(t,e).map(Lre)).pipe((0,Ni.U)(Mre))}}function H7(n){return null!=n?Nre(Pre(n)):null}function Bre(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Hre(n){return n._rawValidators}function Vre(n){return n._rawAsyncValidators}function V7(n){return n?Array.isArray(n)?n:[n]:[]}function Tz(n,e){return Array.isArray(n)?n.includes(e):n===e}function zre(n,e){const t=V7(e);return V7(n).forEach(s=>{Tz(t,s)||t.push(s)}),t}function jre(n,e){return V7(e).filter(t=>!Tz(n,t))}class Ure{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=B7(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=H7(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ub extends Ure{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Bd extends Ure{get formDirective(){return null}get path(){return null}}function aO(n,e){U7(n,e),e.valueAccessor.writeValue(n.value),function kIe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Gre(n,e)})}(n,e),function AIe(n,e){const t=(i,s)=>{e.valueAccessor.writeValue(i),s&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function RIe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Gre(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function DIe(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Rz(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Lz(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Az(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function U7(n,e){const t=Hre(n);null!==e.validator?n.setValidators(Bre(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=Vre(n);null!==e.asyncValidator?n.setAsyncValidators(Bre(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const s=()=>n.updateValueAndValidity();Az(e._rawValidators,s),Az(e._rawAsyncValidators,s)}function Lz(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=Hre(n);if(Array.isArray(s)&&s.length>0){const r=s.filter(o=>o!==e.validator);r.length!==s.length&&(t=!0,n.setValidators(r))}}if(null!==e.asyncValidator){const s=Vre(n);if(Array.isArray(s)&&s.length>0){const r=s.filter(o=>o!==e.asyncValidator);r.length!==s.length&&(t=!0,n.setAsyncValidators(r))}}}const i=()=>{};return Az(e._rawValidators,i),Az(e._rawAsyncValidators,i),t}function Gre(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function $re(n,e){U7(n,e)}function Kre(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function G7(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const lO="VALID",Mz="INVALID",lk="PENDING",hO="DISABLED";function K7(n){return(Oz(n)?n.validators:n)||null}function Yre(n){return Array.isArray(n)?B7(n):n||null}function Y7(n,e){return(Oz(e)?e.asyncValidators:n)||null}function Zre(n){return Array.isArray(n)?H7(n):n||null}function Oz(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Xre=n=>n instanceof toe,Z7=n=>n instanceof Q7;function Qre(n){return Xre(n)?n.value:n.getRawValue()}function Jre(n,e){const t=Z7(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new d.vHH(1e3,"");if(!i[e])throw new d.vHH(1001,"")}function eoe(n,e){Z7(n),n._forEachChild((i,s)=>{if(void 0===e[s])throw new d.vHH(1002,"")})}class X7{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Yre(this._rawValidators),this._composedAsyncValidatorFn=Zre(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===lO}get invalid(){return this.status===Mz}get pending(){return this.status==lk}get disabled(){return this.status===hO}get enabled(){return this.status!==hO}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Yre(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Zre(e)}addValidators(e){this.setValidators(zre(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(zre(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jre(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jre(e,this._rawAsyncValidators))}hasValidator(e){return Tz(this._rawValidators,e)}hasAsyncValidator(e){return Tz(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=lk,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hO,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lO,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lO||this.status===lk)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hO:lO}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=lk,this._hasOwnPendingAsyncValidator=!0;const t=Lre(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function PIe(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(s=>{i=Z7(i)?i.controls.hasOwnProperty(s)?i.controls[s]:null:(n=>n instanceof NIe)(i)&&i.at(s)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?hO:this.errors?Mz:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lk)?lk:this._anyControlsHaveStatus(Mz)?Mz:lO}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Oz(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class toe extends X7{constructor(e=null,t,i){super(K7(t),Y7(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Oz(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){G7(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){G7(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Q7 extends X7{constructor(e,t,i){super(K7(t),Y7(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){eoe(this,e),Object.keys(e).forEach(i=>{Jre(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,s)=>{i.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=Qre(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((s,r)=>{i=t(i,s,r)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class NIe extends X7{constructor(e,t,i){super(K7(t),Y7(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){eoe(this,e),e.forEach((i,s)=>{Jre(this,s),this.at(s).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,s)=>{this.at(s)&&this.at(s).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,s)=>{i.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Qre(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const BIe={provide:Bd,useExisting:(0,d.Gpc)(()=>dO)},cO=(()=>Promise.resolve(null))();let dO=(()=>{class n extends Bd{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new Q7({},B7(t),H7(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){cO.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),aO(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){cO.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){cO.then(()=>{const i=this._findContainer(t.path),s=new Q7({});$re(s,t),i.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){cO.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){cO.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Kre(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ed,10),d.Y36(Hw,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&d.NdJ("submit",function(r){return i.onSubmit(r)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([BIe]),d.qOj]}),n})(),aoe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const $Ie={provide:Bd,useExisting:(0,d.Gpc)(()=>uO)};let uO=(()=>{class n extends Bd{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Lz(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return aO(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Rz(t.control||null,t,!1),G7(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,Kre(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,s=this.form.get(t.path);i!==s&&(Rz(i||null,t),Xre(s)&&(aO(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);$re(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function LIe(n,e){return Lz(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){U7(this.form,this),this._oldForm&&Lz(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ed,10),d.Y36(Hw,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&d.NdJ("submit",function(r){return i.onSubmit(r)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([$Ie]),d.qOj,d.TTD]}),n})(),uTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[aoe]]}),n})(),pTe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[uTe]}),n})();const pO="ej2_instances";let fTe=0;function Pz(n,e){const t=e;return t.unshift(void 0),new(Function.prototype.bind.apply(n,t))}function U(n,e){let t=e;const i=n.replace(/\[/g,".").replace(/\]/g,"").split(".");for(let s=0;s<i.length&&!li(t);s++)t=t[i[s]];return t}function zt(n,e,t){const i=n.replace(/\[/g,".").replace(/\]/g,"").split("."),s=t||{};let o,r=s;const a=i.length;let l;for(o=0;o<a;o++)l=i[o],o+1===a?r[l]=void 0===e?{}:e:f(r[l])&&(r[l]={}),r=r[l];return s}function r9(n,e){delete n[e]}const Fz="undefined"!=typeof window?window:{};function Df(n){return!f(n)&&n.constructor==={}.constructor}function Oh(n,e){return n[e]}function Ph(n,e){if(!f(e)){const t=n,i=e,s=Object.keys(e),r="deepMerge";for(const o of s)f(t[r])||-1===t[r].indexOf(o)||!Df(i[o])&&!Array.isArray(i[o])?t[o]=i[o]:Ae(t[o],t[o],i[o],!0)}}function Ae(n,e,t,i){const s=n&&"object"==typeof n?n:{};let r=arguments.length;i&&(r-=1);for(let o=1;o<r;o++){if(!arguments[o])continue;let a=arguments[o];Object.keys(a).forEach(l=>{const h=s[l],c=a[l];let m;const b=Array.isArray(c)&&Array.isArray(h)&&c.length!==h.length,v=!wi()||!(h instanceof Event||b);i&&v&&(Df(c)||Array.isArray(c))?Df(c)?(m=h||{},Array.isArray(m)&&m.hasOwnProperty("isComplexArray")?Ae(m,{},c,i):s[l]=Ae(m,{},c,i)):(m=wi()?h&&Object.keys(c).length:h||[],s[l]=Ae([],m,c,i)):s[l]=c})}return s}function f(n){return null==n}function li(n){return void 0===n}function Tn(n){return n+"_"+fTe++}function Jv(n,e){let t;return function(){const i=arguments,s=()=>(t=null,n.apply(this,i));clearTimeout(t),t=setTimeout(s,e)}}function Nz(n,e){return n===e||!(n===document||!n)&&Nz(n.parentNode,e)}function fO(n){try{throw new Error(n)}catch(e){throw e.message+"\n"+e.stack}}function _oe(n,e){const t=document.createElement("div"),i=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),s=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));if(s.length)for(let a=0,l=s.length;a<l;a++)i.push(s[a]);let r="";f(e)&&(e=window.open("","print","height=452,width=1024,tabbar=no")),t.appendChild(n.cloneNode(!0));for(let a=0,l=i.length;a<l;a++)r+=i[a].outerHTML;e.document.write("<!DOCTYPE html> <html><head>"+r+"</head><body>"+t.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),e.document.close(),e.focus();const o=setInterval(()=>{e.ready&&(e.print(),e.close(),clearInterval(o))},500);return e}function st(n){const e=n+"";return e.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?e:e+"px"}function wi(){return false}function Ioe(n){return Node,n}function za(n,e){let t="string"==typeof n?document.querySelector(n):n;if(t[pO])for(const i of t[pO])if(i instanceof e)return i;return null}const yTe={latn:{_digits:"0123456789",_type:"numeric"}},Toe={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},Doe=[0,1,2,3,4,5,6,7,8,9];let zo=(()=>{class n{static getMainObject(t,i){return U("main."+i,t)}static getNumberingSystem(t){return U("supplemental.numberingSystems",t)||this.numberingSystems}static reverseObject(t,i){const s=i||Object.keys(t),r={};for(const o of s)r.hasOwnProperty(t[o])||(r[t[o]]=o);return r}static getSymbolRegex(t){const i=t.map(s=>s.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")).join("|");return new RegExp(i,"g")}static getSymbolMatch(t){const i=Object.keys(Toe),s={};for(const r of i)s[t[r]]=Toe[r];return s}static constructRegex(t){const i=t.length;let s="";for(let r=0;r<i;r++)s+=r!==i-1?t[r]+"|":t[r];return s}static convertValueParts(t,i,s){return t.replace(i,r=>s[r])}static getDefaultNumberingSystem(t){const i={};return i.obj=U("numbers",t),i.nSystem=U("defaultNumberingSystem",i.obj),i}static getCurrentNumericOptions(t,i,s,r){const o={},a=this.getDefaultNumberingSystem(t);if(!li(a.nSystem)||r){const l=r?U("obj.mapperDigits",a):U(a.nSystem+"._digits",i);li(l)||(o.numericPair=this.reverseObject(l,Doe),o.numberParseRegex=new RegExp(this.constructRegex(l),"g"),o.numericRegex="["+l[0]+"-"+l[9]+"]",s&&(o.numericRegex=l[0]+"-"+l[9],o.symbolNumberSystem=U(r?"numberSymbols":"symbols-numberSystem-"+a.nSystem,a.obj),o.symbolMatch=this.getSymbolMatch(o.symbolNumberSystem),o.numberSystem=a.nSystem))}return o}static getNumberMapper(t,i,s){const r={mapper:{}},o=this.getDefaultNumberingSystem(t);if(!li(o.nSystem)){r.numberSystem=o.nSystem,r.numberSymbols=U("symbols-numberSystem-"+o.nSystem,o.obj),r.timeSeparator=U("timeSeparator",r.numberSymbols);const a=U(o.nSystem+"._digits",i);if(!li(a))for(const l of Doe)r.mapper[l]=a[l]}return r}}return n.nPair="numericPair",n.nRegex="numericRegex",n.numberingSystems=yTe,n})();const vTe={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};var mO;!function(n){const e=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];n.getHijriDate=function t(s){let r=s.getDate(),o=s.getMonth(),a=s.getFullYear(),l=o+1,h=a;l<3&&(h-=1,l+=12);let c=Math.floor(h/100),m=c-Math.floor(c/4)-2;const b=Math.floor(365.25*(h+4716))+Math.floor(30.6001*(l+1))+r-m-1524;c=Math.floor((b-1867216.25)/36524.25),m=c-Math.floor(c/4)+1;const v=b+m+1524;let w=Math.floor((v-122.1)/365.25);const E=Math.floor(365.25*w),D=Math.floor((v-E)/30.6001);r=v-E-Math.floor(30.6001*D),o=Math.floor((v-E)/20.6001),o>13&&(w+=1,o-=12),o-=1,a=w-4716;const L=b-24e5,N=10631/30;let V=b-1948084;const $=Math.floor(V/10631);V-=10631*$;const ie=Math.floor((V-.1335)/N),Q=30*$+ie;V-=Math.floor(ie*N+.1335);let le=Math.floor((V+28.5001)/29.5);13===le&&(le=12);const ke=V-Math.floor(29.5001*le-29);let Ye=0;for(;Ye<e.length&&!(e[Ye]>L);Ye++);const Nt=Ye+16260,Le=Math.floor((Nt-1)/12);let nt=Le+1,We=Nt-12*Le,xe=L-e[Ye-1]+1;return(xe+"").length>2&&(xe=ke,We=le,nt=Q),{year:nt,month:We,date:xe}},n.toGregorian=function i(s,r,o){const E=Math.floor(o+e[12*(s-1)+1+(r-1)-16260-1]-1+24e5+.5);let D=Math.floor((E-1867216.25)/36524.25);D=E+1+D-Math.floor(D/4);const L=D+1524,N=Math.floor((L-122.1)/365.25),V=Math.floor(365.25*N),$=Math.floor((L-V)/30.6001),ie=L-V-Math.floor(30.6001*$);let Q=$-($>13.5?13:1);const le=N-(Q>2.5?4716:4715);return le<=0&&Q--,new Date(le+"/"+Q+"/"+ie)}}(mO||(mO={}));const wTe=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,koe="stand-alone",STe=["sun","mon","tue","wed","thu","fri","sat"],Roe={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},xTe={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"};class Aoe{static dateFormat(e,t,i){const s=$i.getDependables(i,e,t.calendar),o=(U("parserObject.numbers",s),s.dateObject),a={isIslamic:$i.islamicRegex.test(t.calendar)};let l=t.format||$i.getResultantPattern(t.skeleton,s.dateObject,t.type,!1,"");if(a.dateSeperator=$i.getDateSeparator(s.dateObject),li(l))fO("Format options or type given must be invalid");else{l=$i.ConvertDateToWeekFormat(l),a.pattern=l,a.numMapper=zo.getNumberMapper(s.parserObject,zo.getNumberingSystem(i));const h=l.match(wTe)||[];for(const c of h){const m=c.length;let b=c[0];switch("K"===b&&(b="h"),b){case"E":case"c":a.weekday=s.dateObject[$i.days][koe][$i.monthIndex[m]];break;case"M":case"L":a.month=s.dateObject[$i.month][koe][$i.monthIndex[m]];break;case"a":a.designator=U("dayPeriods.format.wide",o);break;case"G":a.era=U("eras."+(m<=3?"eraAbbr":4===m?"eraNames":"eraNarrow"),s.dateObject);break;case"z":a.timeZone=U("dates.timeZoneNames",s.parserObject)}}}return h=>isNaN(h.getDate())?null:this.intDateFormatter(h,a)}static intDateFormatter(e,t){let s="";const r=t.pattern.match($i.dateParseRegex),o=this.getCurrentDateValue(e,t.isIslamic);for(const a of r){const l=a.length;let h=a[0];"K"===h&&(h="h");let c,b,v,m="",w="";switch(h){case"M":case"L":c=o.month,l>2?s+=t.month[c]:b=!0;break;case"E":case"c":s+=t.weekday[STe[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(b=!0,"d"===h)c=o.date;else if("f"===h){b=!1,v=!0,m=e[Roe[h]]().toString(),m=m.substring(0,l);const $=m.length;if(l!==$){if(l>3)continue;for(let ie=0;ie<l-$;ie++)m="0"+m.toString()}w+=m}else c=e[Roe[h]]();"h"===h&&(c=c%12||12);break;case"y":v=!0,w+=o.year,2===l&&(w=w.substr(w.length-2));break;case"a":let E=e.getHours()<12?"am":"pm";s+=t.designator[E];break;case"G":let D=e.getFullYear()<0?0:1,L=t.era[D];f(L)&&(L=t.era[D?0:1]),s+=L||"";break;case"'":s+="''"===a?"'":a.replace(/'/g,"");break;case"z":let N=e.getTimezoneOffset(),V=l<4?"+H;-H":t.timeZone.hourFormat;V=V.replace(/:/g,t.numMapper.timeSeparator),0===N?s+=t.timeZone.gmtZeroFormat:(v=!0,w=this.getTimeZoneValue(N,V)),w=t.timeZone.gmtFormat.replace(/\{0\}/,w);break;case":":s+=t.numMapper.numberSymbols.timeSeparator;break;case"/":s+=t.dateSeperator;break;case"W":b=!0,c=$i.getWeekOfYear(e);break;default:s+=a}b&&(v=!0,w=this.checkTwodigitNumber(c,l)),v&&(s+=zo.convertValueParts(w,$i.latnParseRegex,t.numMapper.mapper))}return s}static getCurrentDateValue(e,t){return t?mO.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}}static checkTwodigitNumber(e,t){const i=e+"";return 2===t&&2!==i.length?"0"+i:i}static getTimeZoneValue(e,t){let s=t.split(";")[e>0?1:0];const r=Math.abs(e);return s.replace(/HH?|mm/g,o=>{const a=o.length,l=-1!==o.indexOf("H");return this.checkTwodigitNumber(Math.floor(l?r/60:r%60),a)})}}const Loe={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},hk=["infinity","nan","group","decimal","exponential"];class Moe{static numberFormatter(e,t,i){const s=Ae({},t);let r={};const o={};let a;const l=$i.getDependables(i,e,"",!0);o.numberMapper=zo.getNumberMapper(l.parserObject,zo.getNumberingSystem(i),!0),o.currencySymbol=$i.getCurrencySymbol(l.numericObject,s.currency||bO,t.altSymbol),o.percentSymbol=o.numberMapper.numberSymbols.percentSign,o.minusSymbol=o.numberMapper.numberSymbols.minusSign;const c=o.numberMapper.numberSymbols;if(t.format&&!$i.formatRegex.test(t.format))r=$i.customFormat(t.format,o,l.numericObject);else{Ae(s,$i.getProperNumericSkeleton(t.format||"N")),s.isCurrency="currency"===s.type,s.isPercent="percent"===s.type,a=$i.getSymbolPattern(s.type,o.numberMapper.numberSystem,l.numericObject,s.isAccount),s.groupOne=this.checkValueRange(s.maximumSignificantDigits,s.minimumSignificantDigits,!0),this.checkValueRange(s.maximumFractionDigits,s.minimumFractionDigits,!1,!0),li(s.fractionDigits)||(s.minimumFractionDigits=s.maximumFractionDigits=s.fractionDigits),li(s.useGrouping)&&(s.useGrouping=!0),s.isCurrency&&(a=a.replace(/\u00A4/g,$i.defaultCurrency));{const w=a.split(";");r.nData=$i.getFormatData(w[1]||"-"+w[0],!0,o.currencySymbol),r.pData=$i.getFormatData(w[0],!1,o.currencySymbol),s.useGrouping&&(s.groupSeparator=c[hk[2]],s.groupData=this.getGroupingDetails(w[0]))}if(li(s.minimumFractionDigits)&&(s.minimumFractionDigits=r.nData.minimumFraction),li(s.maximumFractionDigits)){const w=r.nData.maximumFraction;s.maximumFractionDigits=li(w)&&s.isPercent?0:w}const b=s.minimumFractionDigits,v=s.maximumFractionDigits;!li(b)&&!li(v)&&b>v&&(s.maximumFractionDigits=b)}return Ae(r.nData,s),Ae(r.pData,s),m=>isNaN(m)?c[hk[1]]:isFinite(m)?this.intNumberFormatter(m,r,o):c[hk[0]]}static getGroupingDetails(e){const t={},i=e.match($i.negativeDataRegex);if(i&&i[4]){const s=i[4],r=s.lastIndexOf(",");if(-1!==r){const o=s.split(".")[0];t.primary=o.length-r-1;const a=s.lastIndexOf(",",r-1);-1!==a&&(t.secondary=r-1-a)}}return t}static checkValueRange(e,t,i,s){const r=s?"f":"s";let o=0;const a=Loe["l"+r];let l=Loe["m"+r];if(li(e)||(this.checkRange(e,a,s),o++),li(t)||(this.checkRange(t,l,s),o++),2===o){if(!(e<t))return!0;fO(l+"specified must be less than the"+a)}else i&&1===o&&fO("Both"+l+"and"+l+"must be present");return!1}static checkRange(e,t,i){const s=i?[0,20]:[1,21];(e<s[0]||e>s[1])&&fO(t+"value must be within the range"+s[0]+"to"+s[1])}static intNumberFormatter(e,t,i){let s;if(!li(t.nData.type)){e<0?(e*=-1,s=t.nData):s=0===e&&t.zeroData||t.pData;let r="";return s.isPercent&&(e*=100),s.groupOne?r=this.processSignificantDigits(e,s.minimumSignificantDigits,s.maximumSignificantDigits):(r=this.processFraction(e,s.minimumFractionDigits,s.maximumFractionDigits),s.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,s.minimumIntegerDigits))),"scientific"===s.type&&(r=e.toExponential(s.maximumFractionDigits),r=r.replace("e",i.numberMapper.numberSymbols[hk[4]])),r=r.replace(".",i.numberMapper.numberSymbols[hk[3]]),s.useGrouping&&(r=this.groupNumbers(r,s.groupData.primary,s.groupSeparator||",",i.numberMapper.numberSymbols[hk[3]]||".",s.groupData.secondary)),r=zo.convertValueParts(r,$i.latnParseRegex,i.numberMapper.mapper),"N/A"===s.nlead?s.nlead:s.nlead+r+s.nend}}static processSignificantDigits(e,t,i){let r,s=e+"";return s.length<t?e.toPrecision(t):(s=e.toPrecision(i),r=+s,r+"")}static groupNumbers(e,t,i,s,r){let o=!f(r)&&0!==r;const a=e.split(s),l=a[0];let h=l.length,c="";for(;h>t;)c=l.slice(h-t,h)+(c.length?i+c:""),h-=t,o&&(t=r,o=!1);return a[0]=l.slice(0,h)+(c.length?i:"")+c,a.join(s)}static processFraction(e,t,i){const s=(e+"").split(".")[1],r=s?s.length:0;if(t&&r<t){let o="";if(0!==r){o+=e;for(let a=0;a<t-r;a++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!f(i)&&(r>i||0===i)?e.toFixed(i):e+""}static processMinimumIntegers(e,t){const i=e.split(".");let s=i[0];const r=s.length;if(r<t){for(let o=0;o<t-r;o++)s="0"+s;i[0]=s}return i.join(".")}}const Ooe="stand-alone",TTe=/^[0-9]*$/,Poe={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},RTe=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,ATe=/,/g,LTe=["minusSign","infinity"];class zE{constructor(e){this.ranArray=[],this.boundedEvents={},!f(e)&&(this.context=e)}on(e,t,i,s){if(f(t))return;const r=i||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:r}]:f(s)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:r}):-1===this.ranArray.indexOf(s)&&(this.ranArray.push(s),this.boundedEvents[e].push({handler:t,context:r,id:s}))}off(e,t,i){if(this.notExist(e))return;const s=U(e,this.boundedEvents);if(t){for(let r=0;r<s.length;r++)if(i){if(s[r].id===i){s.splice(r,1);const o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===s[r].handler){s.splice(r,1);break}}else delete this.boundedEvents[e]}notify(e,t,i,s){if(this.notExist(e))return void(i&&i.call(this,t));t&&(t.name=e);const o=U(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(o,t,i,s,0);for(const a of o)a.handler.call(a.context,t);i&&i.call(this,t)}blazorCallback(e,t,i,s,r){const o=r===e.length-1;if(r<e.length){const a=e[r],l=a.handler.call(a.context,t);if(l&&"function"==typeof l.then){if(!i)return l;l.then(h=>{if(h="string"==typeof h&&this.isJson(h)?JSON.parse(h,this.dateReviver):h,Ae(t,t,h,!0),!i||!o)return this.blazorCallback(e,t,i,s,r+1);i.call(a.context,t)}).catch(h=>{s&&s.call(a.context,"string"==typeof h&&this.isJson(h)?JSON.parse(h,this.dateReviver):h)})}else{if(!i||!o)return this.blazorCallback(e,t,i,s,r+1);i.call(a.context,t)}}}dateReviver(e,t){return wi&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t}isJson(e){try{JSON.parse(e)}catch(t){return!1}return!0}destroy(){this.boundedEvents=this.context=void 0}notExist(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0}isHandlerPresent(e,t){for(const i of e)if(i.handler===t)return!0;return!1}}const jE=new zE;const kf={};let gO="en-US",bO="USD";const a9=["numericObject","dateObject"];class mp{constructor(e){e&&(this.culture=e)}getDateFormat(e){return Aoe.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},kf)}getNumberFormat(e){return e&&!e.currency&&(e.currency=bO),Moe.numberFormatter(this.getCulture(),e||{},kf)}getDateParser(e){return class kTe{static dateParser(e,t,i){const s=$i.getDependables(i,e,t.calendar),r=zo.getCurrentNumericOptions(s.parserObject,zo.getNumberingSystem(i),!1,!1);let h,o={},a=t.format||$i.getResultantPattern(t.skeleton,s.dateObject,t.type,!1,""),l="";if(li(a))fO("Format options or type given must be invalid");else{a=$i.ConvertDateToWeekFormat(a),o={isIslamic:$i.islamicRegex.test(t.calendar),pattern:a,evalposition:{},culture:e};const c=a.match($i.dateParseRegex)||[],m=c.length;let b=0,v=0,w=!1;const E=r.numericRegex;let D=zo.getNumberMapper(s.parserObject,zo.getNumberingSystem(i));for(let L=0;L<m;L++){const N=c[L],V=N.length,$="K"===N[0]?"h":N[0];let ie,Q,le=xTe[$];const ke=2===V?"":"?";switch(w&&(b=v,w=!1),$){case"E":case"c":let Ye;Ye=s.dateObject[$i.days][Ooe][$i.monthIndex[V]];let Nt=zo.reverseObject(Ye);l+="("+Object.keys(Nt).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(Q=!0,("M"===$||"L"===$)&&V>2){let ge;ge=s.dateObject.months[Ooe][$i.monthIndex[V]],o[le]=zo.reverseObject(ge),l+="("+Object.keys(o[le]).join("|")+")"}else if("f"===$){if(V>3)continue;ie=!0,l+="("+E+E+"?"+E+"?)"}else ie=!0,l+="("+E+E+ke+")";"h"===$&&(o.hour12=!0);break;case"W":l+="("+E+(1===V?"?":"")+E+")";break;case"y":Q=ie=!0,l+=2===V?"("+E+E+")":"("+E+"{"+V+",})";break;case"a":Q=!0;let nt=U("dayPeriods.format.wide",s.dateObject);o[le]=zo.reverseObject(nt),l+="("+Object.keys(o[le]).join("|")+")";break;case"G":Q=!0,o[le]=zo.reverseObject(U("eras."+(V<=3?"eraAbbr":4===V?"eraNames":"eraNarrow"),s.dateObject)),l+="("+Object.keys(o[le]).join("|")+"?)";break;case"z":Q=0!==(new Date).getTimezoneOffset(),o[le]=U("dates.timeZoneNames",s.parserObject);let Me=o[le];h=V<4;let ue=h?"+H;-H":Me.hourFormat;ue=ue.replace(/:/g,D.timeSeparator),l+="("+this.parseTimeZoneRegx(ue,Me,E)+")?",w=!0,v=h?6:12;break;case"'":l+="("+N.replace(/'/g,"")+")?";break;default:l+="([\\D])"}Q&&(o.evalposition[le]={isNumber:ie,pos:L+1+b,hourOnly:h}),L===m-1&&!f(l)&&(o.parserRegex=new RegExp("^"+l+"$","i"))}}return c=>{const m=this.internalDateParse(c,o,r);if(f(m)||!Object.keys(m).length)return null;if(o.isIslamic){let b={},v=m.year;const w=m.day,E=m.month,D=v?v+"":"",L=2===D.length;(!v||!E||!w||L)&&(b=mO.getHijriDate(new Date)),L&&(v=parseInt((b.year+"").slice(0,2)+D,10));const N=mO.toGregorian(v||b.year,E||b.month,w||b.date);m.year=N.getFullYear(),m.month=N.getMonth()+1,m.day=N.getDate()}return this.getDateObject(m)}}static getDateObject(e,t){const i=t||new Date;i.setMilliseconds(0);const s=["hour","minute","second","milliseconds","month","day"];let r=e.year;const o=e.designator,a=e.timeZone;li(r)||((r+"").length<=2&&(r+=100*Math.floor(i.getFullYear()/100)),i.setFullYear(r));for(const l of s){let h=e[l];if(li(h)&&"day"===l&&i.setDate(1),!li(h))if("month"===l){if(h-=1,h<0||h>11)return new Date("invalid");const c=i.getDate();i.setDate(1),i[Poe[l]](h);const m=new Date(i.getFullYear(),h+1,0).getDate();i.setDate(c<m?c:m)}else{if("day"===l){const c=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(h<1||h>c)return null}i[Poe[l]](h)}}if(!li(o)){const l=i.getHours();"pm"===o?i.setHours(l+(12===l?0:12)):12===l&&i.setHours(0)}if(!li(a)){const l=a-i.getTimezoneOffset();0!==l&&i.setMinutes(i.getMinutes()+l)}return i}static internalDateParse(e,t,i){const s=e.match(t.parserRegex),r={hour:0,minute:0,second:0};if(f(s))return null;{const o=Object.keys(t.evalposition);for(const a of o){const l=t.evalposition[a];let h=s[l.pos];if(l.isNumber)r[a]=this.internalNumberParser(h,i);else if("timeZone"!==a||li(h))h="month"!==a||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?h:h[0].toUpperCase()+h.substring(1).toLowerCase(),r[a]=t[a][h];else{const c=l.pos;let m;const b=s[c+1],v=!li(b);l.hourOnly?m=60*this.getZoneValue(v,b,s[c+4],i):(m=60*this.getZoneValue(v,b,s[c+7],i),m+=this.getZoneValue(v,s[c+4],s[c+10],i)),f(m)||(r[a]=m)}}t.hour12&&(r.hour12=!0)}return r}static internalNumberParser(e,t){return e=zo.convertValueParts(e,t.numberParseRegex,t.numericPair),TTe.test(e)?+e:null}static parseTimeZoneRegx(e,t,i){const s=t.gmtFormat;let r;const o="("+i+")("+i+")";let a;return r=e.replace("+","\\+"),r=-1!==e.indexOf("HH")?r.replace(/HH|mm/g,"("+o+")"):r.replace(/H|m/g,"("+o+"?)"),a=r.split(";").map(l=>s.replace("{0}",l)),r=a.join("|")+"|"+t.gmtZeroFormat,r}static getZoneValue(e,t,i,s){const r=e?t:i;if(!r)return 0;const o=this.internalNumberParser(r,s);return e?-o:o}}.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},kf)}getNumberParser(e){return class MTe{static numberParser(e,t,i){const s=$i.getDependables(i,e,"",!0),r={custom:!0};let o;$i.formatRegex.test(t.format)||!t.format?(Ae(r,$i.getProperNumericSkeleton(t.format||"N")),r.custom=!1,r.fractionDigits||t.maximumFractionDigits&&(r.maximumFractionDigits=t.maximumFractionDigits)):Ae(r,$i.customFormat(t.format,null,null));U("numbers",s.parserObject);let l;if(o=zo.getCurrentNumericOptions(s.parserObject,zo.getNumberingSystem(i),!0,!1),r.symbolRegex=zo.getSymbolRegex(Object.keys(o.symbolMatch)),r.infinity=o.symbolNumberSystem[LTe[1]],l=$i.getSymbolPattern(r.type,o.numberSystem,s.numericObject,r.isAccount),l){l=l.replace(/\u00A4/g,$i.defaultCurrency);const h=l.split(";");r.nData=$i.getFormatData(h[1]||"-"+h[0],!0,""),r.pData=$i.getFormatData(h[0],!0,"")}return h=>this.getParsedNumber(h,r,o)}static getParsedNumber(e,t,i){let s,r,o,a,l,h;if(-1!==e.indexOf(t.infinity))return 1/0;{e=zo.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=-1!==(e=zo.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf("-")?e.replace("-.","-0."):e).indexOf(".")&&(e="0"+e);const c=e.match(RTe);if(f(c))return NaN;a=c[1],o=c[2];const m=c[5];return l=c[6],s=t.custom?a===t.nData.nlead&&l===t.nData.nend:-1!==a.indexOf(t.nData.nlead)&&-1!==l.indexOf(t.nData.nend),r=s?t.nData.isPercent:t.pData.isPercent,o=o.replace(ATe,""),m&&(o+=m),h=+o,("percent"===t.type||r)&&(h/=100),(t.custom||t.fractionDigits)&&(h=parseFloat(h.toFixed(t.custom?s?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(h=this.convertMaxFracDigits(o,t,h,s)),s&&(h*=-1),h}}static convertMaxFracDigits(e,t,i,s){let r=e.split(".");return r[1]&&r[1].length>t.maximumFractionDigits&&(i=+i.toFixed(t.custom?s?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),i}}.numberParser(this.getCulture(),e||{format:"N"},kf)}formatNumber(e,t){return this.getNumberFormat(t)(e)}formatDate(e,t){return this.getDateFormat(t)(e)}parseDate(e,t){return this.getDateParser(t)(e)}parseNumber(e,t){return this.getNumberParser(t)(e)}getDatePattern(e,t){return $i.getActualDateTimeFormat(this.getCulture(),e,kf,t)}getNumberPattern(e,t){return $i.getActualNumberFormat(this.getCulture(),e,kf,t)}getFirstDayOfWeek(){return $i.getWeekData(this.getCulture(),kf)}getCulture(){return this.culture||gO}}function Bz(n,e){let t=$i.getDependables(kf,n,"",!0)[a9[0]];const i=$i.getDependables(kf,n,"")[a9[1]],s=U("defaultNumberingSystem",t),r=U("symbols-numberSystem-"+s,t),o=$i.getSymbolPattern(e||"decimal",s,t,!1);return Ae(r,$i.getFormatData(o,!0,"",!0),{dateSeparator:$i.getDateSeparator(i)})}const Foe={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};var $i;!function(n){n.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,n.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,n.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;const e=/[0-9]/g;n.defaultCurrency="$";const t=["infinity","nan","group","decimal"],i=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,s={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};n.dateConverterMapper=/dddd|ddd/gi,n.islamicRegex=/^islamic/;const o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};n.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,n.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,n.curWithoutNumberRegex=/(c|a)$/gi;const a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function l(xe,Me,ue,ae,ge){let Ve;const yt=ue||"date";if(ge)Ve=b({skeleton:xe},ge).format||b({skeleton:"d"},"en-US").format;else{if(-1!==n.basicPatterns.indexOf(xe)){if(Ve=U(yt+"Formats."+xe,Me),"dateTime"===yt){const bi=U("dateFormats."+xe,Me),ci=U("timeFormats."+xe,Me);Ve=Ve.replace("{1}",bi).replace("{0}",ci)}}else Ve=U("dateTimeFormats.availableFormats."+xe,Me);li(Ve)&&"yMd"===xe&&(Ve="M/d/y")}return Ve}function h(xe,Me,ue,ae){const ge={},Ve=ue||"gregorian";if(ge.parserObject=zo.getMainObject(xe,Me)||n.defaultObject,ae)ge.numericObject=U("numbers",ge.parserObject);else{ge.dateObject=U("dates.calendars."+Ve,ge.parserObject)}return ge}function c(xe,Me,ue,ae){return U(xe+"Formats-numberSystem-"+Me+(ae?".accounting":".standard"),ue)||(ae?U(xe+"Formats-numberSystem-"+Me+".standard",ue):"")}function m(xe){xe.match(n.dateConverterMapper);return xe}function b(xe,Me){const ue=xe.format||xe.skeleton;let ae=U((Me||"en-US")+"."+ue,Foe);return ae||(ae=U("en-US."+ue,Foe)),ae&&(ae=m(ae),xe.format=ae.replace(/tt/,"a")),xe}function v(xe){const Me=xe.match(n.formatRegex),ue={},ae=Me[1].toUpperCase();return ue.isAccount="A"===ae,ue.type=n.patternMatcher[ae],xe.length>1&&(ue.fractionDigits=parseInt(Me[2],10)),ue}function w(xe,Me,ue,ae){const ge=ae?{}:{nlead:"",nend:""},Ve=xe.match(n.customRegex);if(Ve){ae||(ge.nlead=E(Ve[1],ue),ge.nend=E(Ve[10],ue),ge.groupPattern=Ve[4]);const yt=Ve[7];if(yt&&Me){const bi=yt.match(e);ge.minimumFraction=f(bi)?0:bi.length,ge.maximumFraction=yt.length-1}}return ge}function E(xe,Me){return xe?xe.replace(n.defaultCurrency,Me):""}function D(xe,Me,ue){return U("currencies."+Me+(ue?"."+ue:".symbol"),xe)||U("currencies."+Me+".symbol-alt-narrow",xe)||"$"}function N(xe,Me,ue){const ae={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},ge=xe.match(n.customRegex);if(f(ge)||""===ge[5]&&"N/A"!==xe)return ae.type=void 0,ae;ae.nlead=ge[1],ae.nend=ge[10];let Ve=ge[6];const yt=!!Ve.match(/\ $/g),bi=-1!==Ve.replace(/\ $/g,"").indexOf(" ");ae.useGrouping=-1!==Ve.indexOf(",")||bi,Ve=Ve.replace(/,/g,"");const ci=ge[7];if(-1!==Ve.indexOf("0")&&(ae.minimumIntegerDigits=Ve.length-Ve.indexOf("0")),f(ci)||(ae.minimumFractionDigits=ci.lastIndexOf("0"),ae.maximumFractionDigits=ci.lastIndexOf("#"),-1===ae.minimumFractionDigits&&(ae.minimumFractionDigits=0),(-1===ae.maximumFractionDigits||ae.maximumFractionDigits<ae.minimumFractionDigits)&&(ae.maximumFractionDigits=ae.minimumFractionDigits)),f(Me)?Ae(ae,V([ae.nlead,ae.nend],"%","%")):(Ae(ae,V([ae.nlead,ae.nend],"$",Me.currencySymbol)),ae.isCurrency||Ae(ae,V([ae.nlead,ae.nend],"%",Me.percentSymbol))),!f(ue)){const ss=c(ae.type,Me.numberMapper.numberSystem,ue,!1);ae.useGrouping&&(ae.groupSeparator=bi?" ":Me.numberMapper.numberSymbols[t[2]],ae.groupData=Moe.getGroupingDetails(ss.split(";")[0])),ae.nlead=ae.nlead.replace(/'/g,""),ae.nend=yt?" "+ae.nend.replace(/'/g,""):ae.nend.replace(/'/g,"")}return ae}function V(xe,Me,ue){const ae={nlead:xe[0],nend:xe[1]};for(let ge=0;ge<2;ge++){const Ve=xe[ge],yt=Ve.indexOf(Me);if(-1!==yt&&(yt<Ve.indexOf("'")||yt>Ve.lastIndexOf("'"))){ae[a[ge]]=Ve.substr(0,yt)+ue+Ve.substr(yt+1),ae[a[Me]]=!0,ae.type=ae.isCurrency?"currency":"percent";break}}return ae}function ke(xe,Me,ue){xe+=".";for(let ae=0;ae<Me;ae++)xe+="0";if(Me<ue){const ae=ue-Me;for(let ge=0;ge<ae;ge++)xe+="#"}return xe}function Ye(xe,Me){const ue=xe.split(".");let ae="";for(let ge=0;ge<Me;ge++)ae+="0";return ue[1]?ae+"."+ue[1]:ae}function Nt(xe){const Me=xe.split(".");let ue=Me[0];const ae=3-ue.length%3;ue=(ae&&1===ae?"#":2===ae?"##":"")+ue,xe="";for(let Ve=ue.length-1;Ve>0;Ve-=3)xe=","+ue[Ve-2]+ue[Ve-1]+ue[Ve]+xe;return xe=xe.slice(1),Me[1]?xe+"."+Me[1]:xe}n.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,n.basicPatterns=["short","medium","long","full"],n.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},n.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},n.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},n.month="months",n.days="days",n.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},n.getResultantPattern=l,n.getDependables=h,n.getSymbolPattern=c,n.ConvertDateToWeekFormat=m,n.compareBlazorDateFormats=b,n.getProperNumericSkeleton=v,n.getFormatData=w,n.changeCurrencySymbol=E,n.getCurrencySymbol=D,n.customFormat=function L(xe,Me,ue){const ae={},ge=xe.split(";"),Ve=["pData","nData","zeroData"];for(let yt=0;yt<ge.length;yt++)ae[Ve[yt]]=N(ge[yt],Me,ue);return f(ae.nData)&&(ae.nData=Ae({},ae.pData),ae.nData.nlead=f(Me)?"-"+ae.nData.nlead:Me.minusSymbol+ae.nData.nlead),ae},n.customNumberFormat=N,n.isCurrencyPercent=V,n.getDateSeparator=function $(xe){const Me=(U("dateFormats.short",xe)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return Me?Me[1]:"/"},n.getActualDateTimeFormat=function ie(xe,Me,ue,ae){const ge=h(ue,xe,Me.calendar);let Ve=Me.format||l(Me.skeleton,ge.dateObject,Me.type);if(ae){if(Ve=Ve.replace(i,yt=>s[yt]),-1!==Ve.indexOf("z")){const yt=Ve.match(/z/g).length;let bi;const ci={timeZone:{}};ci.numMapper=zo.getNumberMapper(ge.parserObject,zo.getNumberingSystem(ue)),ci.timeZone=U("dates.timeZoneNames",ge.parserObject);const Ei=(new Date).getTimezoneOffset();let ts=yt<4?"+H;-H":ci.timeZone.hourFormat;ts=ts.replace(/:/g,ci.numMapper.timeSeparator),0===Ei?bi=ci.timeZone.gmtZeroFormat:(bi=Aoe.getTimeZoneValue(Ei,ts),bi=ci.timeZone.gmtFormat.replace(/\{0\}/,bi)),Ve=Ve.replace(/[z]+/,'"'+bi+'"')}Ve=Ve.replace(/ $/,"")}return Ve},n.getActualNumberFormat=function le(xe,Me,ue,ae){const ge=h(ue,xe,"",!0),Ve={custom:!0};let bi;const ci={},ss=(Me.format||"").match(n.currencyFormatRegex),ts=(n.formatRegex.test(Me.format)&&v(Me.format||"N"),{});if(ss){ts.numberMapper=zo.getNumberMapper(ge.parserObject,zo.getNumberingSystem(ue),!0);const ce=D(ge.numericObject,Me.currency||bO,Me.altSymbol);let Ee=c("currency",ts.numberMapper.numberSystem,ge.numericObject,/a/i.test(Me.format));Ee=Ee.replace(/\u00A4/g,ce);const wt=Ee.split(";");ci.hasNegativePattern=wt.length>1,ci.nData=w(wt[1]||"-"+wt[0],!0,ce),ci.pData=w(wt[0],!1,ce),!ss[2]&&!Me.minimumFractionDigits&&!Me.maximumFractionDigits&&(bi=w(Ee.split(";")[0],!0,"",!0).minimumFraction)}let si;if(n.formatRegex.test(Me.format)||!Me.format){if(Ae(Ve,v(Me.format||"N")),Ve.custom=!1,si="###0",(Ve.fractionDigits||Me.minimumFractionDigits||Me.maximumFractionDigits||bi)&&(Ve.fractionDigits&&(Me.minimumFractionDigits=Me.maximumFractionDigits=Ve.fractionDigits),si=ke(si,bi||Ve.fractionDigits||Me.minimumFractionDigits||0,Me.maximumFractionDigits||0)),Me.minimumIntegerDigits&&(si=Ye(si,Me.minimumIntegerDigits)),Me.useGrouping&&(si=Nt(si)),"currency"===Ve.type){const ce=si;si=ci.pData.nlead+ce+ci.pData.nend,ci.hasNegativePattern&&(si+=";"+ci.nData.nlead+ce+ci.nData.nend)}"percent"===Ve.type&&(si+=" %")}else si=Me.format.replace(/'/g,'"');return Object.keys(ts).length>0&&(si=ae?si:function Q(xe,Me){if(-1!==xe.indexOf(",")){let ue=xe.split(",");xe=ue[0]+U("numberMapper.numberSymbols.group",Me)+ue[1].replace(".",U("numberMapper.numberSymbols.decimal",Me))}else xe=xe.replace(".",U("numberMapper.numberSymbols.decimal",Me));return xe}(si,ts)),si},n.fractionDigitsPattern=ke,n.minimumIntegerPattern=Ye,n.groupingPattern=Nt,n.getWeekData=function Le(xe,Me){let ue="sun";const ae=U("supplemental.weekData.firstDay",Me);let ge=xe;return/en-/.test(ge)&&(ge=ge.slice(3)),ge=ge.slice(0,2).toUpperCase()+ge.substr(2),ae&&(ue=ae[ge]||ae[ge.slice(0,2)]||"sun"),o[ue]},n.replaceBlazorCurrency=function nt(xe,Me,ue){const ae=function CTe(n){return U(n||"",vTe)}(ue);if(Me!==ae)for(const ge of xe)ge.nend=ge.nend.replace(Me,ae),ge.nlead=ge.nlead.replace(Me,ae)},n.getWeekOfYear=function We(xe){const Me=new Date(xe.getFullYear(),0,1);let ae,ue=Me.getDay();ue=ue>=0?ue:ue+7;const ge=Math.floor((xe.getTime()-Me.getTime()-6e4*(xe.getTimezoneOffset()-Me.getTimezoneOffset()))/864e5)+1;if(ue<4){if(ae=Math.floor((ge+ue-1)/7)+1,ae>52){let yt=new Date(xe.getFullYear()+1,0,1).getDay();yt=yt>=0?yt:yt+7,ae=yt<4?1:53}}else ae=Math.floor((ge+ue-1)/7);return ae}}($i||($i={}));const Noe=/^(.*?):[ \t]*([^\r\n]*)$/gm;class qb{constructor(e,t,i,s){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof e?(this.url=e,this.type=t?t.toUpperCase():"GET",this.mode=!!f(i)||i):"object"==typeof e&&(this.options=e,Ph(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:s}send(e){this.data=f(e)?this.data:e;const t={cancel:!1,httpRequest:null};return new Promise((s,r)=>{this.httpRequest=new XMLHttpRequest,this.httpRequest.onreadystatechange=()=>{this.stateChange(s,r)},f(this.onLoad)||(this.httpRequest.onload=this.onLoad),f(this.onProgress)||(this.httpRequest.onprogress=this.onProgress),f(this.onAbort)||(this.httpRequest.onabort=this.onAbort),f(this.onError)||(this.httpRequest.onerror=this.onError),f(this.onUploadProgress)||(this.httpRequest.upload.onprogress=this.onUploadProgress),this.httpRequest.open(this.type,this.url,this.mode),!f(this.data)&&null!==this.contentType&&this.httpRequest.setRequestHeader("Content-Type",this.contentType||"application/json; charset=utf-8"),this.beforeSend&&(t.httpRequest=this.httpRequest,this.beforeSend(t)),t.cancel||this.httpRequest.send(f(this.data)?null:this.data)})}successHandler(e){return this.onSuccess&&this.onSuccess(e,this),e}failureHandler(e){return this.onFailure&&this.onFailure(this.httpRequest),e}stateChange(e,t){let i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(s){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())}getResponseHeader(e){let t,i;t={};let s=Noe.exec(this.httpRequest.getAllResponseHeaders());for(;s;)t[s[1].toLowerCase()]=s[2],s=Noe.exec(this.httpRequest.getAllResponseHeaders());return i=t[e.toLowerCase()],f(i)?null:i}}const PTe=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,FTe=/msie|trident/i,NTe=/Trident\/7\./,BTe=/(ipad|iphone|ipod touch)/i,HTe=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,VTe=/android/i,zTe=/trident|windows phone|edge/i,jTe=/(version)[ /]([\w.]+)/i,Hoe={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});class q{static extractBrowserDetail(){const e={culture:{}},t=Object.keys(Hoe);let i=[];for(const s of t)if(i=q.userAgent.match(Hoe[s]),i){if(e.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),e.name="crios"===i[1].toLowerCase()?"chrome":e.name,e.version=i[2],e.culture.name=e.culture.language=navigator.language,q.userAgent.match(NTe)){e.name="msie";break}const r=q.userAgent.match(jTe);"safari"===e.name&&r&&(e.version=r[2]);break}return e}static getEvent(e){const t={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return q.isPointer?t[e].isPointer:q.isTouch?t[e].isTouch+(q.isDevice?"":" "+t[e].isDevice):t[e].isDevice}static getTouchStartEvent(){return q.getEvent("start")}static getTouchEndEvent(){return q.getEvent("end")}static getTouchMoveEvent(){return q.getEvent("move")}static getTouchCancelEvent(){return q.getEvent("cancel")}static getValue(e,t){const i=window.browserDetails;return void 0===i[e]?i[e]=t.test(q.userAgent):("MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===q.isTouch&&(i.isIos=!0,i.isDevice=!0,i.isTouch=!0,i.isPointer=!0),i[e])}static set userAgent(e){q.uA=e,window.browserDetails={}}static get userAgent(){return q.uA}static get info(){return li(window.browserDetails.info)?window.browserDetails.info=q.extractBrowserDetail():window.browserDetails.info}static get isIE(){return q.getValue("isIE",FTe)}static get isTouch(){return li(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch}static get isPointer(){return li(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer}static get isMSPointer(){return li(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer}static get isDevice(){return q.getValue("isDevice",PTe)}static get isIos(){return q.getValue("isIos",BTe)}static get isIos7(){return q.getValue("isIos7",HTe)}static get isAndroid(){return q.getValue("isAndroid",VTe)}static get isWebView(){return li(window.browserDetails.isWebView)&&(window.browserDetails.isWebView=!(li(window.cordova)&&li(window.PhoneGap)&&li(window.phonegap)&&"object"!==window.forge)),window.browserDetails.isWebView}static get isWindows(){return q.getValue("isWindows",zTe)}static get touchStartEvent(){return li(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=q.getTouchStartEvent():window.browserDetails.touchStartEvent}static get touchMoveEvent(){return li(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=q.getTouchMoveEvent():window.browserDetails.touchMoveEvent}static get touchEndEvent(){return li(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=q.getTouchEndEvent():window.browserDetails.touchEndEvent}static get touchCancelEvent(){return li(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=q.getTouchCancelEvent():window.browserDetails.touchCancelEvent}}q.uA="undefined"!=typeof navigator?navigator.userAgent:"";class k{static addOrGetEventData(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])}static add(e,t,i,s,r){const o=k.addOrGetEventData(e);let a;a=r?Jv(i,r):i,s&&(a=a.bind(s));const l=t.split(" ");for(let h=0;h<l.length;h++)o.push({name:l[h],listener:i,debounce:a}),q.isIE?e.addEventListener(l[h],a):e.addEventListener(l[h],a,{passive:!1});return a}static remove(e,t,i){const s=k.addOrGetEventData(e),r=t.split(" ");for(let o=0;o<r.length;o++){let l,a=-1;s&&0!==s.length&&s.some((h,c)=>h.name===r[o]&&h.listener===i&&(a=c,l=h.debounce,!0)),-1!==a&&s.splice(a,1),l&&e.removeEventListener(r[o],l)}}static clearEvents(e){let t,i;t=k.addOrGetEventData(e),i=Ae([],i,t);for(let s=0;s<i.length;s++)e.removeEventListener(i[s].name,i[s].debounce),t.shift()}static trigger(e,t,i){const s=k.addOrGetEventData(e);for(const r of s)r.name===t&&r.debounce.call(this,i)}}const UTe=/^svg|^path|^g/;function Be(n,e){const t=UTe.test(n)?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);return void 0===e||(t.innerHTML=e.innerHTML?e.innerHTML:"",void 0!==e.className&&(t.className=e.className),void 0!==e.id&&(t.id=e.id),void 0!==e.styles&&t.setAttribute("style",e.styles),void 0!==e.attrs&&Rt(t,e.attrs)),t}function z(n,e){const t=Voe(e);for(const i of n)for(const s of t)if(Df(i)){const r=U("attributes.className",i);f(r)?zt("attributes.className",s,i):new RegExp("\\b"+s+"\\b","i").test(r)||zt("attributes.className",r+" "+s,i)}else i.classList.contains(s)||i.classList.add(s);return n}function W(n,e){const t=Voe(e);for(const i of n){const s=Df(i);if(s?U("attributes.className",i):""!==i.className)for(const o of t)if(s){const l=U("attributes.className",i).split(" "),h=l.indexOf(o);-1!==h&&l.splice(h,1),zt("attributes.className",l.join(" "),i)}else i.classList.remove(o)}return n}function Voe(n){let e=[];return"string"==typeof n?e.push(n):e=n,e}function Xr(n){return""===n.style.visibility&&n.offsetWidth>0}function Qr(n,e,t){const i=document.createDocumentFragment();for(const s of n)i.appendChild(s);return e.insertBefore(i,e.firstElementChild),t&&zoe(e),n}function mi(n,e,t){const i=document.createDocumentFragment();for(const s of n)i.appendChild(s);return e.appendChild(i),t&&zoe(e),n}function zoe(n){n.querySelectorAll("script").forEach(t=>{const i=document.createElement("script");i.text=t.innerHTML,document.head.appendChild(i),te(i)})}function te(n){const e=n.parentNode;if(e)return e.removeChild(n)}function Yt(n){const e=n.parentNode;k.clearEvents(n),e.removeChild(n)}function Rt(n,e){const t=Object.keys(e),i=n;for(const s of t)if(Df(i)){let r=s;"tabindex"===s&&(r="tabIndex"),i.attributes[r]=e[s]}else i.setAttribute(s,e[s]);return i}function X(n,e=document,t){return n=joe(n),e.querySelector(n)}function bt(n,e=document,t){return n=joe(n),e.querySelectorAll(n)}function joe(n){const e=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(n.match(/#[0-9]/g)||n.match(e)){const t=n.split(",");for(let i=0;i<t.length;i++){const s=t[i].split(" ");for(let r=0;r<s.length;r++)if(s[r].indexOf("#")>-1&&!s[r].match(/\[.*\]/)){const o=s[r].split("#");if(o[1].match(/^\d/)||o[1].match(e)){const a=s[r].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",s[r]=a.join(".")}}t[i]=s.join(" ")}return t.join(",")}return n}function B(n,e){let t=n;if("function"==typeof t.closest)return t.closest(e);for(;t&&1===t.nodeType;){if(ck(t,e))return t;t=t.parentNode}return null}function ht(n,e){void 0!==e&&Object.keys(e).forEach(t=>{n.style[t]=e[t]})}function Bi(n,e,t){z([n],e),W([n],t)}function ck(n,e){let t=n.matches||n.msMatchesSelector||n.webkitMatchesSelector;return t?t.call(n,e):-1!==[].indexOf.call(document.querySelectorAll(e),n)}const qTe=new RegExp("]");class Rf{constructor(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=()=>{},this.childChangedProperties={},this.modelObserver=new zE(this),li(t)||(this.element="string"==typeof t?document.querySelector(t):t,f(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),li(e)||this.setProperties(e,!0),this.isDestroyed=!1}setProperties(e,t){const i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,Ph(this,e),!0!==t&&(Ph(this.changedProperties,e),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i}static callChildDataBind(e,t){const i=Object.keys(e);for(const s of i)if(t[s]instanceof Array)for(const r of t[s])void 0!==r.dataBind&&r.dataBind();else t[s].dataBind()}clearChanges(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}}dataBind(){if(Rf.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){const e=this.isProtectedOnChange,t=this.changedProperties,i=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(t,i),this.isProtectedOnChange=e}}serverDataBind(e){}saveChanges(e,t,i){this.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function mTe(n){let e;const t=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(t);let s="ej2"+function bTe(n){let e="";for(let t=0;t<5;t++)e+=(t?",":"")+n[t];return e}(t),r=o=>{o.source===window&&"string"==typeof o.data&&o.data.length<=32&&o.data===s&&(n(),e())};return window.addEventListener("message",r,!1),window.postMessage(s,"*"),e=()=>{window.removeEventListener("message",r),n=r=s=void 0}}(this.dataBind.bind(this)))}addEventListener(e,t){this.modelObserver.on(e,t)}removeEventListener(e,t){this.modelObserver.off(e,t)}trigger(e,t,i,s){if(!0!==this.isDestroyed){const r=this.isProtectedOnChange;this.isProtectedOnChange=!1;let o=this.modelObserver.notify(e,t,i,s);if(qTe.test(e)){const a=U(e,this);if(a)if(window.Blazor){const h=a.call(this,t);h&&"function"==typeof h.then?i?h.then(c=>{i&&(c="string"==typeof c&&this.modelObserver.isJson(c)?JSON.parse(c):c,i.call(this,c))}).catch(c=>{s&&(c="string"==typeof c&&this.modelObserver.isJson(c)?JSON.parse(c):c,s.call(this,c))}):o=h:i&&i.call(this,t)}else a.call(this,t),i&&i.call(this,t);else i&&i.call(this,t)}return this.isProtectedOnChange=r,o}}addInstance(){const e="e-"+this.getModuleName().toLowerCase();z([this.element],["e-lib",e]),f(this.element.ej2_instances)?zt("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)}destroy(){this.element.ej2_instances=this.element.ej2_instances.filter(e=>e!==this),W([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&W([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0}}function Fh(n,e){let t,i;const s="string"==typeof n?document.getElementById(n):n;for(i=0;i<s.ej2_instances.length;i++)if(t=s.ej2_instances[i],"string"==typeof e){if(e===t.getModuleName())return t}else if(t instanceof e)return t}function Hz(n,e,t,i){return(!n.properties.hasOwnProperty(e)||!(n.properties[e]instanceof i))&&(n.properties[e]=Pz(i,[n,e,t])),n.properties[e]}function yO(n,e,t,i,s,r){const o=[],a=t?t.length:0;for(let l=0;l<a;l++){let h=i;if(r&&(h=i(t[l],n)),s){const c=Pz(h,[n,e,{},!0]);c.setProperties(t[l],!0),o.push(c)}else o.push(Pz(h,[n,e,t[l],!1]))}return o}function Uoe(n,e){return function(){return this.properties.hasOwnProperty(e)||(this.properties[e]=n),this.properties[e]}}function WTe(n,e){return function(t){if(this.properties[e]!==t){let i=this.properties.hasOwnProperty(e)?this.properties[e]:n;this.saveChanges(e,t,i),this.properties[e]=t}}}function GTe(n,e,t){return function(){return Hz(this,e,n,t)}}function $Te(n,e,t){return function(i){Hz(this,e,n,t).setProperties(i)}}function ZTe(n,e,t){return function(){if(!this.properties.hasOwnProperty(e)){const s=yO(this,e,n,t,!1);this.properties[e]=s}const i=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return!this.properties[e].hasOwnProperty("push")&&!i&&["push","pop"].forEach(s=>{const r={value:eDe(s,e,0,this.properties[e]).bind(this),configurable:!0};Object.defineProperty(this.properties[e],s,r)}),this.properties[e].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[e],"isComplexArray",{value:!0}),this.properties[e]}}function XTe(n,e,t){return function(i){this.isComplexArraySetter=!0;const s=yO(this,e,n,t,!1),r=yO(this,e,i,t,!0);this.isComplexArraySetter=!1,this.saveChanges(e,r,s),this.properties[e]=r}}function eDe(n,e,t,i){return function(...s){const r=this.propName?this.getParentKey()+"."+e+"-":e+"-";switch(n){case"push":for(let a=0;a<s.length;a++){Array.prototype[n].apply(i,[s[a]]);const l=qoe(r+(i.length-1),s[a],!this.controlParent,n);this.serverDataBind(l,s[a],!1,n)}break;case"pop":Array.prototype[n].apply(i);let o=qoe(r+i.length,null,!this.controlParent,n);this.serverDataBind(o,{ejsAction:"pop"},!1,n)}return i}}function qoe(n,e,t,i){let s=n;return t&&(s={},s[n]=e,e&&"object"==typeof e)&&(s[n].ejsAction=i),s}function _(n){return(e,t)=>{const i={set:WTe(n,t),get:Uoe(n,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),dk(e,t,"prop",n)}}function di(n,e){return(t,i)=>{const s={set:$Te(n,i,e),get:GTe(n,i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s),dk(t,i,"complexProp",n,e)}}function rh(n,e){return(t,i)=>{const s={set:XTe(n,i,e),get:ZTe(n,i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s),dk(t,i,"colProp",n,e)}}function G(){return(n,e)=>{const t={set:function(i){const s=this.properties[e];if(s!==i){const r=Goe(this,e);!1===li(s)&&r.context.removeEventListener(r.prefix,s),r.context.addEventListener(r.prefix,i),this.properties[e]=i}},get:Uoe(void 0,e),enumerable:!0,configurable:!0};Object.defineProperty(n,e,t),dk(n,e,"event")}}function as(n){}function dk(n,e,t,i,s){li(n.propList)&&(n.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),n.propList[t+"s"].push({propertyName:e,defaultValue:i,type:s}),n.propList[t+"Names"].push(e)}function Goe(n,e){if(!1===n.hasOwnProperty("parentObj"))return{context:n,prefix:e};{const t=U("propName",n);return t&&(e=t+"-"+e),Goe(U("parentObj",n),e)}}var uk,eC=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let mo=uk=class extends Rf{constructor(e){super(e,void 0),this.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"}}animate(e,t){const i=this.getModel(t=t||{});if("string"==typeof e){const s=Array.prototype.slice.call(bt(e,document));for(const r of s)i.element=r,uk.delayAnimation(i)}else i.element=e,uk.delayAnimation(i)}static stop(e,t){e.style.animation="",e.removeAttribute("e-animate");const i=e.getAttribute("e-animation-id");if(i){const s=parseInt(i,10);cancelAnimationFrame(s),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)}static delayAnimation(e){e.delay?setTimeout(()=>{uk.applyAnimation(e)},e.delay):uk.applyAnimation(e)}static applyAnimation(e){e.timeStamp=0;let t=0,i=0,s=0;const r=e.duration;e.element.setAttribute("e-animate","true");const o=a=>{try{if(a){s=0===s?a:s,e.timeStamp=a+e.timeStamp-s,s=a,!t&&e.begin&&e.begin.call(this,e),t+=1;const l=e.timeStamp/t;e.timeStamp<r&&e.timeStamp+l<r&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(this,e),requestAnimationFrame(o)):(cancelAnimationFrame(i),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(this,e))}else i=requestAnimationFrame(o),e.element.setAttribute("e-animation-id",i.toString())}catch(l){cancelAnimationFrame(i),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(this,l)}};o()}getModel(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}}onPropertyChanged(e,t){}getModuleName(){return"animation"}destroy(){}};function uc(n,e,t){const i=function tDe(n){return{selector:n&&n.selector?n.selector:null,ignore:n&&n.ignore?n.ignore:null,rippleFlag:n&&n.rippleFlag,isCenterRipple:n&&n.isCenterRipple,duration:n&&n.duration?n.duration:350}}(e);return!1===i.rippleFlag||void 0===i.rippleFlag&&!Wb?()=>{}:(n.setAttribute("data-ripple","true"),k.add(n,"mousedown",$oe,{parent:n,rippleOptions:i}),k.add(n,"mouseup",Koe,{parent:n,rippleOptions:i,done:t}),k.add(n,"mouseleave",pk,{parent:n,rippleOptions:i}),q.isPointer&&k.add(n,"transitionend",pk,{parent:n,rippleOptions:i}),()=>{n.removeAttribute("data-ripple"),k.remove(n,"mousedown",$oe),k.remove(n,"mouseup",Koe),k.remove(n,"mouseleave",pk),k.remove(n,"transitionend",pk)})}function $oe(n){const e=n.target,t=this.rippleOptions.selector,i=t?B(e,t):e;if(!i||this.rippleOptions&&B(e,this.rippleOptions.ignore))return;const s=i.getBoundingClientRect(),r=n.pageX-document.body.scrollLeft,o=n.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(r-s.left),Math.abs(r-s.right)),l=Math.max(Math.abs(o-s.top),Math.abs(o-s.bottom)),h=Math.sqrt(a*a+l*l);let c=2*h+"px",m=r-s.left-h,b=o-s.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(m=0,b=0,c="100%"),i.classList.add("e-ripple");const E=Be("div",{className:"e-ripple-element",styles:"width: "+c+";height: "+c+";left: "+m+"px;top: "+b+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});i.appendChild(E),window.getComputedStyle(E).getPropertyValue("opacity"),E.style.transform="scale(1)",i!==this.parent&&k.add(i,"mouseleave",pk,{parent:this.parent,rippleOptions:this.rippleOptions})}function Koe(n){Yoe(n,this)}function pk(n){Yoe(n,this)}function Yoe(n,e){const t=e.rippleOptions.duration,i=n.target,s=e.rippleOptions.selector,r=s?B(i,s):i;if(!r||r&&-1===r.className.indexOf("e-ripple"))return;const o=bt(".e-ripple-element",r),a=o[o.length-1];a&&(a.style.opacity="0.5"),e.parent!==r&&k.remove(r,"mouseleave",pk),setTimeout(()=>{a&&a.parentNode&&a.parentNode.removeChild(a),r.getElementsByClassName("e-ripple-element").length||r.classList.remove("e-ripple"),e.done&&e.done(n)},t)}eC([_("FadeIn")],mo.prototype,"name",void 0),eC([_(400)],mo.prototype,"duration",void 0),eC([_("ease")],mo.prototype,"timingFunction",void 0),eC([_(0)],mo.prototype,"delay",void 0),eC([G()],mo.prototype,"progress",void 0),eC([G()],mo.prototype,"begin",void 0),eC([G()],mo.prototype,"end",void 0),eC([G()],mo.prototype,"fail",void 0),mo=uk=eC([as],mo);let Wb=!1;class sDe{constructor(e){this.loadedModules=[],this.parent=e}inject(e,t){const i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(let s=0;s<i;s++){const r=e[s];for(const o of t){const a=r.member;if(o.prototype.getModuleName()===r.member&&!this.isModuleLoaded(a)){const l=Pz(o,r.args),h=this.getMemberName(a);zt(h,r.isProperty?o:l,this.parent);const c=r;c.member=h,this.loadedModules.push(c)}}}}else this.clean()}clean(){for(const e of this.loadedModules)e.isProperty||U(e.member,this.parent).destroy();this.loadedModules=[]}clearUnusedModule(e){const t=e.map(s=>this.getMemberName(s.member)),i=this.loadedModules.filter(s=>-1===t.indexOf(s.member));for(const s of i)s.isProperty||U(s.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(s),1),r9(this.parent,s.member)}getMemberName(e){return e[0].toLowerCase()+e.substring(1)+"Module"}isModuleLoaded(e){for(const t of this.loadedModules)if(t.member===this.getMemberName(e))return!0;return!1}}class ii{constructor(e,t,i,s){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=()=>{},this.callChildDataBind=U("callChildDataBind",Rf),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=s,this.setProperties(i,!0)}updateChange(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)}updateTimeOut(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{const e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=()=>{clearTimeout(e)}}}clearChanges(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}}setProperties(e,t){!0===t?(Ph(this,e),this.updateChange(!1,this.propName),this.clearChanges()):Ph(this,e)}dataBind(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){const e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(zt(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),zt(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()}saveChanges(e,t,i,s){this.controlParent.isProtectedOnChange||(s||this.serverDataBind(e,t,!0),this.oldProperties[e]=i,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())}serverDataBind(e,t,i,s){0}getParentKey(e){let t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);let s=this.parentObj[this.propName].length;s=e?s:s>0?s-1:0,t=-1!==t?"-"+t:"-"+s,i+=t}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i}}const Zoe=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100];class Xoe{constructor(e){this.isValidated=!1,this.version="20.1",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats/i,this.errors={noLicense:'This application was built using a trial version of Syncfusion Essential Studio. Please include a valid license to permanently remove this license validation message. You can also obtain a free 30 day evaluation license to temporarily remove this message during the evaluation period. Please refer to this <a style="color:yellow;text-decoration:none;"href="https://help.syncfusion.com/common/essential-studio/licensing">help topic</a> for more information.',trailExpired:'Your Syncfusion trial license has expired. Please refer to this <a style="color:yellow;text-decoration:none;"href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#trial-expired">help topic</a> for more information.',versionMismatched:'The included Syncfusion license (v##LicenseVersion) is invalid for version ##Requireversion. Please refer to this <a style="color:yellow;text-decoration:none;" href="https://help.syncfusion.com/es/licensing/version-mismatch/">help topic</a> for more information.',platformMismatched:'The included Syncfusion license is invalid (Platform mismatch). Please refer to this <a style="color:yellow;text-decoration:none;" href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#platform-mismatch">help topic</a> for more information.',invalidKey:'The included Syncfusion license is invalid. Please refer to this <a style="color:yellow;text-decoration:none;" href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#invalid-key">help topic</a> for more information.'},this.manager=(()=>{let t=null;return{setKey:function i(r){t=r},getKey:function s(){return t}}})(),this.manager.setKey(e)}validate(){if(!this.isValidated&&Fz&&!U(Qoe(Zoe),Fz)&&!U("Blazor",Fz)){let e;if(this.manager&&this.manager.getKey()){let t=this.getInfoFromKey();if(t&&t.length){for(let i of t)if(!this.platform.test(i.platform)||i.invalidPlatform)e=this.errors.platformMismatched;else if(-1===i.version.indexOf(this.version))e=this.errors.versionMismatched,e=e.replace("##LicenseVersion",i.version),e=e.replace("##Requireversion",this.version+".x");else if(i.expiryDate){let s=new Date(i.expiryDate),r=new Date;if(!(s!==r&&s<r))break;e=this.errors.trailExpired}}else e=this.errors.invalidKey}else e=this.errors.noLicense;if(e&&"undefined"!=typeof document&&!f(document)){let t=Be("div",{innerHTML:e+'<span style="position:absolute;right: 10px;top:27%;cursor:pointer;"onClick=this.parentElement.remove();><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><line x1="5" y1="5" x2="15" y2="15" stroke="yellow" stroke-width="2.5" stroke-miterlimit="10" stroke-linecap="round"></line><line x1="15" y1="5" x2="5" y2="15" stroke="yellow" stroke-width="2.5" stroke-linecap="round" stroke-miterlimit="10"></line></svg></span>',styles:'position:fixed;top:0;left:0;right:0;font-family:"Segoe UI";font-size:16px;background:repeating-linear-gradient(45deg,#d70f0f,#d70f0f 10px,#e12121 10px,#e12121 17px);color:#ffffff;z-index:999999999;text-align:center;padding:10px 50px 10px 25px;'});t.setAttribute("id","js-licensing"),document.body.appendChild(t)}this.isValidated=!0,zt(Qoe(Zoe),this.isValidated,Fz)}}getDecryptedData(e){try{return atob(e)}catch(t){return""}}getInfoFromKey(){try{let t=this.manager.getKey().split(";"),i=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],s=[],r=[],o=!1;for(let a of t){let l=this.getDecryptedData(a);if(!l)continue;let h=0,c="";for(let m=0;m<l.length;m++,h++){h===i.length&&(h=0);let b=l.charCodeAt(m);c+=String.fromCharCode(b^i[h]>>16)}this.platform.test(c)?(s=c.split(";"),o=!1,s.length>3&&r.push({platform:s[0],version:s[1],expiryDate:s[2]})):c&&c.split(";").length>3&&(o=!0)}return o&&!r.length?[{invalidPlatform:o}]:r.length?r:null}catch(e){return null}}}let l9=new Xoe;function Qoe(n){let e="";for(let t of n)e+=String.fromCharCode(t);return e}var Vz=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let c9,h9=0,Joe=0,Qs=class extends Rf{constructor(e,t){super(e,t),this.randomId=function gTe(){if("undefined"==typeof window)return;let n=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(n)}(),this.isStringTemplate=!1,this.needsID=!1,this.isReactHybrid=!1,f(this.enableRtl)&&this.setProperties({enableRtl:false},!0),f(this.locale)&&this.setProperties({locale:gO},!0),this.moduleLoader=new sDe(this),this.localObserver=new zE(this),jE.on("notifyExternalChange",this.detectFunction,this,this.randomId),"undefined"!=typeof window&&"undefined"!=typeof document&&(n=>{n&&function nDe(n){l9=new Xoe(n)}(n),l9.validate()})(),li(t)||this.appendTo()}requiredModules(){return[]}destroy(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),!this.refreshing&&(W([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),super.destroy(),this.moduleLoader.clean(),jE.off("notifyExternalChange",this.detectFunction,this.randomId)))}refresh(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new zE(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1}accessMount(){this.mount&&!this.isReactHybrid&&this.mount()}getRootElement(){return this.isReactHybrid?this.actualElement:this.element}getLocalData(){const e=this.getModuleName()+this.element.id;return window.localStorage.getItem(e)}appendTo(e){if(f(e)||"string"!=typeof e?f(e)||(this.element=e):this.element=X(e,document),!f(this.element)){const t="e-"+this.getModuleName().toLowerCase();z([this.element],["e-control",t]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));const i=U("ej2_instances",this.element);(!i||-1===i.indexOf(this))&&super.addInstance(),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}}renderComplete(e){this.isRendered=!0}dataBind(){this.injectModules(),super.dataBind()}on(e,t,i){if("string"==typeof e)this.localObserver.on(e,t,i);else for(const s of e)this.localObserver.on(s.event,s.handler,s.context)}off(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(const i of e)this.localObserver.off(i.event,i.handler)}notify(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)}getInjectedModules(){return this.injectedModules}static Inject(...e){this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(let t=0;t<e.length;t++)-1===this.prototype.injectedModules.indexOf(e[t])&&this.prototype.injectedModules.push(e[t])}createElement(e,t,i){return Be(e,t)}triggerStateChange(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})}injectModules(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)}detectFunction(e){const t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])}mergePersistData(){let e;e=window.localStorage.getItem(this.getModuleName()+this.element.id),f(e)||""===e||this.setProperties(JSON.parse(e),!0)}setPersistData(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())}renderReactTemplates(){}clearTemplate(e,t){}getUniqueID(e){return this.isHistoryChanged()&&(h9=0),c9=this.pageID(location.href),Joe=history.length,e+"_"+c9+"_"+h9++}pageID(e){let t=0;if(0===e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return Math.abs(t)}isHistoryChanged(){return c9!==this.pageID(location.href)||Joe!==history.length}addOnPersist(e){const t={};for(const i of e){let s;s=U(i,this),li(s)||zt(i,this.getActualProperties(s),t)}return JSON.stringify(t,(i,s)=>this.getActualProperties(s))}getActualProperties(e){return e instanceof ii?U("properties",e):e}ignoreOnPersist(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))}iterateJsonProperties(e,t){const i={};for(const s of Object.keys(e))if(-1===t.indexOf(s)){const r=e[s];if("object"!=typeof r||r instanceof Array)i[s]=r;else{const o=t.filter(a=>new RegExp(s+".").test(a)).map(a=>a.replace(s+".",""));i[s]=this.iterateJsonProperties(this.getActualProperties(r),o)}}return i}};Vz([_(!1)],Qs.prototype,"enablePersistence",void 0),Vz([_()],Qs.prototype,"enableRtl",void 0),Vz([_()],Qs.prototype,"locale",void 0),Qs=Vz([as],Qs),"undefined"!=typeof window&&window.addEventListener("popstate",()=>{h9=0});var vO,Jr=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const oDe={left:0,top:0,bottom:0,right:0},d9={isDragged:!1};class u9 extends ii{}Jr([_(0)],u9.prototype,"left",void 0),Jr([_(0)],u9.prototype,"top",void 0);let vn=vO=class extends Rf{constructor(e,t){super(t,e),this.dragLimit=vO.getDefaultPosition(),this.borderWidth=vO.getDefaultPosition(),this.padding=vO.getDefaultPosition(),this.diffX=0,this.prevLeft=0,this.prevTop=0,this.dragProcessStarted=!1,this.eleTop=0,this.tapHoldTimer=0,this.externalInitialize=!1,this.diffY=0,this.parentScrollX=0,this.parentScrollY=0,this.droppables={},this.bind()}bind(){this.toggleEvents(),q.isIE&&z([this.element],"e-block-touch"),this.droppables[this.scope]={}}static getDefaultPosition(){return Ae({},oDe)}toggleEvents(e){let t;li(this.handle)||(t=X(this.handle,this.element));let i=this.enableTapHold&&q.isDevice&&q.isTouch?this.mobileInitialize:this.initialize;e?k.remove(t||this.element,q.touchStartEvent,i):k.add(t||this.element,q.touchStartEvent,i,this)}mobileInitialize(e){let t=e.currentTarget;this.tapHoldTimer=setTimeout(()=>{this.externalInitialize=!0,this.removeTapholdTimer(),this.initialize(e,t)},this.tapHoldThreshold),k.add(document,q.touchMoveEvent,this.removeTapholdTimer,this),k.add(document,q.touchEndEvent,this.removeTapholdTimer,this)}removeTapholdTimer(){clearTimeout(this.tapHoldTimer),k.remove(document,q.touchMoveEvent,this.removeTapholdTimer),k.remove(document,q.touchEndEvent,this.removeTapholdTimer)}getScrollableParent(e,t){return f(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY),this.tempScrollHeight=e.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),this.tempScrollWidth=e.scrollWidth),f(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)}getScrollableValues(){this.parentScrollX=0,this.parentScrollY=0,this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")}initialize(e,t){if(this.currentStateTarget=e.target,this.isDragStarted())return;if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){let s=this.abort;"string"==typeof s&&(s=[s]);for(let r=0;r<s.length;r++)if(!f(B(e.target,s[r])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!li(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");let i=this.getCoordinates(e);if(this.initialPosition={x:i.pageX,y:i.pageY},!this.clone){let s=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=i.pageX-(s.left+this.parentScrollX),this.relativeYPosition=i.pageY-(s.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(k.add(document,q.touchMoveEvent,this.intDragStart,this),k.add(document,q.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,k.trigger(document.documentElement,q.touchStartEvent,e)}intDragStart(e){this.removeTapholdTimer();let t=!li(e.changedTouches);if(t&&1!==e.changedTouches.length)return;t&&e.preventDefault();let s,i=this.getCoordinates(e),r=getComputedStyle(this.element);this.margin={left:parseInt(r.marginLeft,10),top:parseInt(r.marginTop,10),right:parseInt(r.marginRight,10),bottom:parseInt(r.marginBottom,10)};let o=this.element;if(this.clone&&this.dragTarget){let c=B(e.target,this.dragTarget);f(c)||(o=c)}this.isReplaceDragEle&&(o=this.currentStateCheck(e.target,o)),this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e,this.isDragScroll);let a=this.initialPosition.x-i.pageX,l=this.initialPosition.y-i.pageY;if(Math.sqrt(a*a+l*l)>=this.distance||this.externalInitialize){let c=this.getHelperElement(e);if(!c||f(c))return;let m=this.helperElement=c;if(this.parentClientRect=this.calculateParentPosition(m.offsetParent),this.dragStart){let D={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:null,dragElement:m};this.trigger("dragStart",D)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),s={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();let b=getComputedStyle(o),v=parseFloat(b.marginTop);this.clone&&0!==v&&(s.top+=v),this.eleTop=isNaN(parseFloat(b.top))?0:parseFloat(b.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(s.top-=this.parentScrollY,s.left-=this.parentScrollX);let w=this.getProcessedPositionValue({top:s.top-this.diffY+"px",left:s.left-this.diffX+"px"});this.dragElePosition={top:s.top,left:s.left},ht(m,this.getDragPosition({position:"absolute",left:w.left,top:w.top})),k.remove(document,q.touchMoveEvent,this.intDragStart),k.remove(document,q.touchEndEvent,this.intDestroy),this.bindDragEvents(m)}}bindDragEvents(e){Xr(e)?(k.add(document,q.touchMoveEvent,this.intDrag,this),k.add(document,q.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))}elementInViewport(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)this.top+=(e=e.offsetParent).offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth}getProcessedPositionValue(e){return this.queryPositionInfo?this.queryPositionInfo(e):e}calculateParentPosition(e){if(f(e))return{left:0,top:0};let t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}}intDrag(e){if(!li(e.changedTouches)&&1!==e.changedTouches.length)return;let t,i;this.clone&&e.changedTouches&&q.isDevice&&q.isTouch&&e.preventDefault(),this.position=this.getMousePosition(e,this.isDragScroll);let s=this.getDocumentWidthHeight("Height");s<this.position.top&&(this.position.top=s);let r=this.getDocumentWidthHeight("Width");if(r<this.position.left&&(this.position.left=r),this.drag){let Q=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:Q})}let o=this.checkTargetElement(e);if(o.target&&o.instance){let Q=!0;this.hoverObject&&(this.hoverObject.instance!==o.instance?this.triggerOutFunction(e,o):Q=!1),Q&&(o.instance.dragData[this.scope]=this.droppables[this.scope],o.instance.intOver(e,o.target),this.hoverObject=o)}else this.hoverObject&&this.triggerOutFunction(e,o);let a=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);let l=this.parentClientRect.left,h=this.parentClientRect.top,c=this.getCoordinates(e),m=c.pageX,b=c.pageY,v=this.position.left-this.diffX,w=this.position.top-this.diffY,E=getComputedStyle(a);if(this.dragArea){if(this.pageX!==m||this.skipDistanceCheck){let Q=a.offsetWidth+(parseFloat(E.marginLeft)+parseFloat(E.marginRight));t=this.dragLimit.left>v&&v>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<v+Q&&v>0?v-(v-this.dragLimit.right)+window.pageXOffset-Q:v<0?this.dragLimit.left:v}if(this.pageY!==b||this.skipDistanceCheck){let Q=a.offsetHeight+(parseFloat(E.marginTop)+parseFloat(E.marginBottom));i=this.dragLimit.top>w&&w>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<w+Q&&w>0?w-(w-this.dragLimit.bottom)+window.pageYOffset-Q:w<0?this.dragLimit.top:w}}else t=v,i=w;let N,V,D=h+this.borderWidth.top,L=l+this.borderWidth.left;this.dragProcessStarted&&(f(i)&&(i=this.prevTop),f(t)&&(t=this.prevLeft)),this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,N=i-D<0?this.dragLimit.top:i-D,V=t-L<0?this.dragElePosition.left:t-L):(N=i-D,V=t-L);let $=parseFloat(getComputedStyle(this.element).marginTop);if($>0&&(this.clone&&(N+=$,w<0&&($+w>=0?N=$+w:N-=$),N=this.dragLimit.bottom<N?this.dragLimit.bottom:N),i-D<0))if(w+$+(a.offsetHeight-D)>=0){let Q=this.dragLimit.top+w-D;Q+$+D<0?N-=$+D:N=Q}else N-=$+D;this.enableScrollHandler&&!this.clone&&(N-=this.parentScrollY,V-=this.parentScrollX);let ie=this.getProcessedPositionValue({top:N+"px",left:V+"px"});ht(a,this.getDragPosition(ie)),!this.elementInViewport(a)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=m,this.pageY=b}triggerOutFunction(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null}getDragPosition(e){let t=Ae({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t}getDocumentWidthHeight(e){let t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])}intDragStop(e){if(this.dragProcessStarted=!1,!li(e.changedTouches)&&1!==e.changedTouches.length)return;if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){let s=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:s,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");let i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}intDestroy(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),k.remove(document,q.touchMoveEvent,this.intDragStart),k.remove(document,q.touchEndEvent,this.intDragStop),k.remove(document,q.touchEndEvent,this.intDestroy),k.remove(document,q.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)}onPropertyChanged(e,t){}getModuleName(){return"draggable"}isDragStarted(e){return e&&(d9.isDragged=!d9.isDragged),d9.isDragged}setDragArea(){let e,t,r,i=0,s=0;if(r="string"==typeof this.dragArea?X(this.dragArea):this.dragArea,r){let a=r.getBoundingClientRect();e=r.scrollWidth?r.scrollWidth:a.right-a.left,t=r.scrollHeight?r.scrollHeight:a.bottom-a.top;let l=["Top","Left","Bottom","Right"],h=getComputedStyle(r);for(let c=0;c<l.length;c++){let m=l[c],b=h["border"+m+"Width"],v=h["padding"+m],w=m.toLowerCase();this.borderWidth[w]=isNaN(parseFloat(b))?0:parseFloat(b),this.padding[w]=isNaN(parseFloat(v))?0:parseFloat(v)}i=a.top,s=a.left,this.dragLimit.left=s+this.borderWidth.left+this.padding.left,this.dragLimit.top=r.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=s+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=i+t-(this.borderWidth.bottom+this.padding.bottom)}}getProperTargetElement(e){let i,t=this.getCoordinates(e),s=this.helperElement.style.pointerEvents||"";return Nz(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",i=document.elementFromPoint(t.clientX,t.clientY),this.helperElement.style.pointerEvents=s):i=e.target,i}currentStateCheck(e,t){let i;return i=f(this.currentStateTarget)||this.currentStateTarget===e?f(t)?e:t:this.currentStateTarget,i}getMousePosition(e,t){let r,o,i=void 0!==e.srcElement?e.srcElement:e.target,s=this.getCoordinates(e),a=f(i.offsetParent);return t?(r=this.clone?s.pageX:s.pageX+(a?0:i.offsetParent.scrollLeft)-this.relativeXPosition,o=this.clone?s.pageY:s.pageY+(a?0:i.offsetParent.scrollTop)-this.relativeYPosition):(r=this.clone?s.pageX:s.pageX+window.pageXOffset-this.relativeXPosition,o=this.clone?s.pageY:s.pageY+window.pageYOffset-this.relativeYPosition),{left:r-(this.margin.left+this.cursorAt.left),top:o-(this.margin.top+this.cursorAt.top)}}getCoordinates(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e}getHelperElement(e){let t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=Be("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t}setGlobalDroppables(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}}checkTargetElement(e){let t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!f(t.parentNode)){let s=B(t.parentNode,".e-droppable")||t.parentElement;s&&(i=this.getDropInstance(s))}return{target:t,instance:i}}getDropInstance(e){let i,s=e&&e.ej2_instances;if(s)for(let r of s)if("droppable"===r.getModuleName()){i=r;break}return i}destroy(){this.toggleEvents(!0),super.destroy()}};Jr([di({},u9)],vn.prototype,"cursorAt",void 0),Jr([_(!0)],vn.prototype,"clone",void 0),Jr([_()],vn.prototype,"dragArea",void 0),Jr([_()],vn.prototype,"isDragScroll",void 0),Jr([_()],vn.prototype,"isReplaceDragEle",void 0),Jr([_(!0)],vn.prototype,"isPreventSelect",void 0),Jr([G()],vn.prototype,"drag",void 0),Jr([G()],vn.prototype,"dragStart",void 0),Jr([G()],vn.prototype,"dragStop",void 0),Jr([_(1)],vn.prototype,"distance",void 0),Jr([_()],vn.prototype,"handle",void 0),Jr([_()],vn.prototype,"abort",void 0),Jr([_()],vn.prototype,"helper",void 0),Jr([_("default")],vn.prototype,"scope",void 0),Jr([_("")],vn.prototype,"dragTarget",void 0),Jr([_()],vn.prototype,"axis",void 0),Jr([_()],vn.prototype,"queryPositionInfo",void 0),Jr([_(!1)],vn.prototype,"enableTailMode",void 0),Jr([_(!1)],vn.prototype,"skipDistanceCheck",void 0),Jr([_(!0)],vn.prototype,"preventDefault",void 0),Jr([_(!1)],vn.prototype,"enableAutoScroll",void 0),Jr([_(!1)],vn.prototype,"enableTapHold",void 0),Jr([_(750)],vn.prototype,"tapHoldThreshold",void 0),Jr([_(!1)],vn.prototype,"enableScrollHandler",void 0),vn=vO=Jr([as],vn);var fk=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let tg=class extends Rf{constructor(e,t){super(t,e),this.mouseOver=!1,this.dragData={},this.dragStopCalled=!1,this.bind()}bind(){this.wireEvents()}wireEvents(){k.add(this.element,q.touchEndEvent,this.intDrop,this)}onPropertyChanged(e,t){}getModuleName(){return"droppable"}intOver(e,t){this.mouseOver||(this.trigger("over",{event:e,target:t,dragData:this.dragData[this.scope]}),this.mouseOver=!0)}intOut(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)}intDrop(e,t){if(!this.dragStopCalled)return;this.dragStopCalled=!1;let i=!0;const s=this.dragData[this.scope],r=!!s&&s.helper&&Xr(s.helper);let o;r&&(o=this.isDropArea(e,s.helper,t),this.accept&&(i=ck(s.helper,this.accept))),r&&this.drop&&o.canDrop&&i&&this.trigger("drop",{event:e,target:o.target,droppedElement:s.helper,dragData:s}),this.mouseOver=!1}isDropArea(e,t,i){const s={canDrop:!0,target:i||e.target},r="touchend"===e.type;if(r||s.target===t){t.style.display="none";const o=r?e.changedTouches[0]:e,a=document.elementFromPoint(o.clientX,o.clientY);s.canDrop=!1,s.canDrop=Nz(a,this.element),s.canDrop&&(s.target=a),t.style.display=""}return s}destroy(){k.remove(this.element,q.touchEndEvent,this.intDrop),super.destroy()}};fk([_()],tg.prototype,"accept",void 0),fk([_("default")],tg.prototype,"scope",void 0),fk([G()],tg.prototype,"drop",void 0),fk([G()],tg.prototype,"over",void 0),fk([G()],tg.prototype,"out",void 0),tg=fk([as],tg);var CO,jz=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const aDe={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222};let Gn=CO=class extends Rf{constructor(e,t){super(t,e),this.keyPressHandler=i=>{const s=i.altKey,r=i.ctrlKey,o=i.shiftKey,a=i.which,l=Object.keys(this.keyConfigs);for(const h of l){const c=this.keyConfigs[h].split(",");for(const m of c){const b=CO.getKeyConfigData(m.trim());s===b.altKey&&r===b.ctrlKey&&o===b.shiftKey&&a===b.keyCode&&(i.action=h,this.keyAction&&this.keyAction(i))}}},this.bind()}destroy(){this.unwireEvents(),super.destroy()}onPropertyChanged(e,t){}bind(){this.wireEvents()}getModuleName(){return"keyboard"}wireEvents(){this.element.addEventListener(this.eventName,this.keyPressHandler)}unwireEvents(){this.element.removeEventListener(this.eventName,this.keyPressHandler)}static getKeyConfigData(e){if(e in this.configCache)return this.configCache[e];const t=e.toLowerCase().split("+"),i={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return i.keyCode=t[t.length-1].length>1&&Number(t[t.length-1])?Number(t[t.length-1]):CO.getKeyCode(t[t.length-1]),CO.configCache[e]=i,i}static getKeyCode(e){return aDe[e]||e.toUpperCase().charCodeAt(0)}};Gn.configCache={},jz([_({})],Gn.prototype,"keyConfigs",void 0),jz([_("keyup")],Gn.prototype,"eventName",void 0),jz([G()],Gn.prototype,"keyAction",void 0),Gn=CO=jz([as],Gn);let jo=(()=>{class n{constructor(t,i,s){this.controlName=t,this.localeStrings=i,this.setLocale(s||gO)}setLocale(t){const i=this.intGetControlConstant(n.locale,t);this.currentLocale=i||this.localeStrings}static load(t){this.locale=Ae(this.locale,t,{},!0)}getConstant(t){return f(this.currentLocale[t])?this.localeStrings[t]||"":this.currentLocale[t]}intGetControlConstant(t,i){return t[i]?t[i][this.controlName]:null}}return n.locale={},n})();var tC=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class eae extends ii{}tC([_(50)],eae.prototype,"swipeThresholdDistance",void 0);const lDe=/(Up|Down)/;let Lr=class extends Rf{constructor(e,t){super(t,e),this.touchAction=!0,this.tapCount=0,this.startEvent=i=>{if(!0===this.touchAction){const s=this.updateChangeTouches(i);void 0!==i.changedTouches&&(this.touchAction=!1),this.isTouchMoved=!1,this.movedDirection="",this.startPoint=this.lastMovedPoint={clientX:s.clientX,clientY:s.clientY},this.startEventData=s,this.hScrollLocked=this.vScrollLocked=!1,this.tStampStart=Date.now(),this.timeOutTapHold=setTimeout(()=>{this.tapHoldEvent(i)},this.tapHoldThreshold),k.add(this.element,q.touchMoveEvent,this.moveEvent,this),k.add(this.element,q.touchEndEvent,this.endEvent,this),k.add(this.element,q.touchCancelEvent,this.cancelEvent,this)}},this.moveEvent=i=>{const s=this.updateChangeTouches(i);this.movedPoint=s,this.isTouchMoved=!(s.clientX===this.startPoint.clientX&&s.clientY===this.startPoint.clientY);let r={};this.isTouchMoved&&(clearTimeout(this.timeOutTapHold),this.calcScrollPoints(i),r=Ae(r,{},{startEvents:this.startEventData,originalEvent:i,startX:this.startPoint.clientX,startY:this.startPoint.clientY,distanceX:this.distanceX,distanceY:this.distanceY,scrollDirection:this.scrollDirection,velocity:this.getVelocity(s)}),this.trigger("scroll",r),this.lastMovedPoint={clientX:s.clientX,clientY:s.clientY})},this.cancelEvent=i=>{clearTimeout(this.timeOutTapHold),clearTimeout(this.timeOutTap),this.tapCount=0,this.swipeFn(i),k.remove(this.element,q.touchCancelEvent,this.cancelEvent)},this.endEvent=i=>{this.swipeFn(i),this.isTouchMoved||"function"==typeof this.tap&&(this.trigger("tap",{originalEvent:i,tapCount:++this.tapCount}),this.timeOutTap=setTimeout(()=>{this.tapCount=0},this.tapThreshold)),this.modeclear()},this.swipeFn=i=>{clearTimeout(this.timeOutTapHold),clearTimeout(this.timeOutTap);const s=this.updateChangeTouches(i);let r=s.clientX-this.startPoint.clientX,o=s.clientY-this.startPoint.clientY;r=Math.floor(r<0?-1*r:r),o=Math.floor(o<0?-1*o:r),this.isTouchMoved=r>1||o>1,this.endPoint=s,this.calcPoints(i);const a={originalEvent:i,startEvents:this.startEventData,startX:this.startPoint.clientX,startY:this.startPoint.clientY,distanceX:this.distanceX,distanceY:this.distanceY,swipeDirection:this.movedDirection,velocity:this.getVelocity(s)};if(this.isTouchMoved){let l;const h=this.swipeSettings.swipeThresholdDistance;l=Ae(l,this.defaultArgs,a);let c=!1;const m=this.element,b=this.isScrollable(m),v=lDe.test(this.movedDirection);(h<this.distanceX&&!v||h<this.distanceY&&v)&&(c=!b||this.checkSwipe(m,v)),c&&this.trigger("swipe",l)}this.modeclear()},this.modeclear=()=>{this.modeClear=setTimeout(()=>{this.touchAction=!0},"function"!=typeof this.tap?0:20),this.lastTapTime=(new Date).getTime(),k.remove(this.element,q.touchMoveEvent,this.moveEvent),k.remove(this.element,q.touchEndEvent,this.endEvent),k.remove(this.element,q.touchCancelEvent,this.cancelEvent)},this.bind()}onPropertyChanged(e,t){}bind(){this.wireEvents(),q.isIE&&this.element.classList.add("e-block-touch")}destroy(){this.unwireEvents(),super.destroy()}wireEvents(){k.add(this.element,q.touchStartEvent,this.startEvent,this)}unwireEvents(){k.remove(this.element,q.touchStartEvent,this.startEvent)}getModuleName(){return"touch"}isScrollable(e){const t=getComputedStyle(e);return!!/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}tapHoldEvent(e){let t;this.tapCount=0,this.touchAction=!0,k.remove(this.element,q.touchMoveEvent,this.moveEvent),k.remove(this.element,q.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),k.remove(this.element,q.touchCancelEvent,this.cancelEvent)}calcPoints(e){const t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?t.clientX>this.startPoint.clientX?"Right":"Left":t.clientY<this.startPoint.clientY?"Up":"Down"}calcScrollPoints(e){const t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)}getVelocity(e){const t=e.clientX,i=e.clientY,s=Date.now(),r=t-this.startPoint.clientX,o=i-this.startPoint.clientX,a=s-this.tStampStart;return Math.sqrt(r*r+o*o)/a}checkSwipe(e,t){const i=["scroll","offset"],s=t?["Height","Top"]:["Width","Left"];return e[i[0]+s[0]]<=e[i[1]+s[0]]||0===e[i[0]+s[1]]||e[i[1]+s[0]]+e[i[0]+s[1]]>=e[i[0]+s[0]]}updateChangeTouches(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e}};tC([G()],Lr.prototype,"tap",void 0),tC([G()],Lr.prototype,"tapHold",void 0),tC([G()],Lr.prototype,"swipe",void 0),tC([G()],Lr.prototype,"scroll",void 0),tC([_(350)],Lr.prototype,"tapThreshold",void 0),tC([_(750)],Lr.prototype,"tapHoldThreshold",void 0),tC([di({},eae)],Lr.prototype,"swipeSettings",void 0),Lr=tC([as],Lr);const hDe=new RegExp("\\n|\\r|\\s\\s+","g"),cDe=new RegExp(/'|"/g),dDe=new RegExp("if ?\\("),uDe=new RegExp("else if ?\\("),tae=new RegExp("else"),pDe=new RegExp("for ?\\("),iae=new RegExp("(/if|/for)"),fDe=new RegExp("\\((.*)\\)",""),p9=new RegExp("^[0-9]+$","g"),mDe=new RegExp("[\\w\"'.\\s+]+","g"),gDe=new RegExp('"(.*?)"',"g"),bDe=new RegExp("[\\w\"'@#$.\\s-+]+","g");let yDe=new RegExp("\\${([^}]*)}","g");const vDe=/^\..*/gm,f9=/\\/gi,CDe=/\\\\/gi,wDe=new RegExp("[\\w\"'@#$.\\s+]+","g"),SDe=/\window\./gm;function mk(n,e,t,i,s){return!e||p9.test(n)||-1!==i.indexOf(n.split(".")[0])||s?n:t+"."+n}function m9(n,e,t,i){return e&&!p9.test(n)&&-1===i.indexOf(n.split(".")[0])?t+'["'+n:n}function sae(n){return n.match(CDe)?n:n.replace(f9,"\\\\")}function nae(n,e,t,i){if(n=n.trim(),/\window\./gm.test(n))return n;{const r=/'|"/gm;return/@|\$|#/gm.test(n)&&(n=m9(n,-1===t.indexOf(n),e,t)+'"]'),vDe.test(n)?function _De(n,e,t,i){return!e||p9.test(n)||-1!==i.indexOf(n.split(".")[0])||/^\..*/gm.test(n)?n:t+"."+n}(n,!r.test(n)&&-1===t.indexOf(n),e,t):mk(n,!r.test(n)&&-1===t.indexOf(n),e,t,i)}}const IDe=/^[\n\r.]+<tr|^<tr/,TDe=/^[\n\r.]+<svg|^<path|^<g/,Gb={};function rae(){return"-"+Math.random().toString(36).substr(2,5)}function ji(n,e,t){const i=g9.compile(n,e,t);return(s,r,o,a,l,h,c,m)=>{const b=i(s,r,o,c,m);return"string"==typeof b?TDe.test(b)?Be("svg",{innerHTML:b}).childNodes:Be(IDe.test(b)?"table":"div",{innerHTML:b}).childNodes:b}}function ig(n,e,t){const i=document.getElementById(n);if(i){const s=i.getElementsByClassName("blazor-inner-template");for(let r=0;r<s.length;r++){let o=" ";o=f(t)?s[r].getAttribute("data-templateId"):s[t].getAttribute("data-templateId");const a=document.getElementById(o);if(a){const l=a.childNodes.length;for(let h=0;h<l;h++)f(t)?s[r].appendChild(a.childNodes[0]):(s[t].appendChild(a.childNodes[0]),r=s.length)}}}}const g9={compile:(new class ADe{compile(e,t={},i){return function xDe(n,e,t){const i="data",s=function EDe(n,e,t,i){let s=0;const r=[],o=n.match(/class="([^"]+|)\s{2}/g);let a="";return o&&o.forEach(l=>{a=l.replace(/\s\s+/g," "),n=n.replace(l,a)}),n.replace(hDe,"").replace(gDe,"'$1'").replace(yDe,(l,h,c,m)=>{const v=h.match(fDe);if(v){const w=v[1];if(uDe.test(h))h='";} '+h.replace(v[1],w.replace(mDe,E=>mk(E=E.trim(),!cDe.test(E)&&-1===r.indexOf(E),e,r,i)))+'{ \n str = str + "';else if(dDe.test(h))h='"; '+h.replace(v[1],w.replace(bDe,E=>nae(E,e,r,i)))+'{ \n str = str + "';else if(pDe.test(h)){const E=v[1].split(" of ");h='"; '+h.replace(v[1],D=>(r.push(E[0]),r.push(E[0]+"Index"),s+=1,"var i"+s+"=0; i"+s+" < "+mk(E[1],!0,e,r,i)+".length; i"+s+"++"))+"{ \n "+E[0]+"= "+mk(E[1],!0,e,r,i)+"[i"+s+"]; \n var "+E[0]+"Index=i"+s+'; \n str = str + "'}else{const E=h.split("(");let D=t&&t.hasOwnProperty(E[0])?"this.":"global";D=/\./.test(E[0])?"":D;const L=v[1].split(",");0!==v[1].length&&!/data/.test(L[0])&&!/window./.test(L[0])&&(v[1]="global"===D?e+"."+v[1]:v[1]);const N=/@|\$|#/gm,V=/\]\./gm;SDe.test(h)&&V.test(h)||N.test(h)?/@|\$|#|\]\./gm.test(h)&&(h='"+ '+("global"===D?"":D)+h.replace(v[1],w.replace(wDe,ie=>nae(ie,e,r,i)))+'+ "'):h='" + '+("global"===D?"":D)+h.replace(w,mk(v[1].replace(/,( |)data.|,/gi,","+e+".").replace(/,( |)data.window/gi,",window"),"global"!==D,e,r,i))+'+"'}}else tae.test(h)?h='"; '+h.replace(tae,'} else { \n str = str + "'):h.match(iae)?h=h.replace(iae,'"; \n } \n str = str + "'):/@|#|\$/gm.test(h)?(h.match(f9)&&(h=sae(h)),h='"+'+m9(h,-1===r.indexOf(h),e,r)+'"]+"'):h=h.match(f9)?'"+'+m9(h=sae(h),-1===r.indexOf(h),e,r)+'"]+"':'"+'+mk(h.replace(/,/gi,"+"+e+"."),-1===r.indexOf(h),e,r,i)+'+"';return h})}(n,i,e,t);return new Function(i,'var str="'+s+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n    if(str.match(valueRegEx)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if(str.match(hrefRegex)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                if (check1) {\n                    var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                    change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                    str1 = str1.replace(check1, change);\n                }\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;").bind(e)}(e,t)}}).compile},LDe=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],MDe=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],oae=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"];class hr{static beforeSanitize(){return{selectors:{tags:LDe,attributes:MDe}}}static sanitize(e){const t=this.beforeSanitize();return this.serializeValue(t,e)}static serializeValue(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();const i=this.wrapElement.innerHTML;return this.removeElement(),i}static removeElement(){const e=this.wrapElement.children;for(let t=0;t<e.length;t++){const i=e[t].attributes;for(let s=0;s<i.length;s++)this.wrapElement.children[t].removeAttribute(i[s].localName)}}static removeXssTags(){const e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach(t=>{te(t)})}static removeJsEvents(){const e=this.wrapElement.querySelectorAll("["+oae.join("],[")+"]");e.length>0&&e.forEach(t=>{oae.forEach(i=>{t.hasAttribute(i)&&t.removeAttribute(i)})})}static removeXssAttrs(){this.removeAttrs.forEach((e,t)=>{const i=this.wrapElement.querySelectorAll(e.selector);i.length>0&&i.forEach(s=>{s.removeAttribute(e.attribute)})})}}function aae(n,e,t){var i={};if(n&&n.length){for(var s=0,r=n;s<r.length;s++){var o=r[s];!0===t?(e.propCollection[o]=new d.vpe(!1),e[o]=e.propCollection[o]):i[o]=new d.vpe(!1)}!0!==t&&e.setProperties(i,!0)}}function lae(n,e,t){var i=Object.keys(n.registeredTemplate);if(i.length)for(var s=e&&e.filter(function(V){return!/\./g.test(V)}),r=0,o=s&&s||i;r<o.length;r++){var a=o[r];if(t&&t.length)for(var l=0;l<t.length;l++)for(var h=0;h<n.registeredTemplate.template.length;h++)n.registeredTemplate.template[h].rootNodes[0]===t[l]&&(m=n.registeredTemplate[a])[h].destroy();else if(n.registeredTemplate[a])for(var b=0,v=n.registeredTemplate[a];b<v.length;b++){var m;if(!(m=v[b]).destroyed){if(m._view){var w=m._view.renderer.parentNode(m.rootNodes[0]);if(!f(w))for(h=0;h<m.rootNodes.length;h++)w.appendChild(m.rootNodes[h])}m.destroy()}}delete n.registeredTemplate[a]}for(var E=function(V){V.instance&&V.instance.clearTemplate(e&&e.filter(function($){return!!new RegExp(V.name).test($)}))},D=0,L=n.tagObjects;D<L.length;D++)E(L[D])}var NDe=/Ref$/,hae=(function(){function n(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}n.prototype.ngOnInit=function(){this.registeredTemplate={};for(var e=0,t=this.tags;e<t.length;e++){var i=t[e],s=U("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);s&&this.tagObjects.push({instance:s,name:i})}for(var r=Object.keys(this),o=0;o<r.length;o++){var a=U(r[o],this);"object"==typeof a&&a&&a.elementRef&&(U(-1!==r[o].indexOf("Ref")?r[o]:r[o]+"Ref",this)||zt(-1!==r[o].indexOf("Ref")?r[o]:r[o]+"Ref",a,this),U("viewContainerRef",this)&&!U("_viewContainerRef",a.elementRef.nativeElement)&&!U("propName",a.elementRef.nativeElement)&&(zt("_viewContainerRef",U("viewContainerRef",this),a.elementRef.nativeElement),zt("propName",r[o].replace("Ref",""),a.elementRef.nativeElement)))}for(var l=0,h=r=(r=Object.keys(this)).filter(function(E){return/Ref$/i.test(E)});l<h.length;l++){var m=h[l].replace("Ref","");zt(m.replace("_","."),U(m,this),this.propCollection)}var b=Object.keys(this);if(this.directivePropList){for(var v=0;v<this.directivePropList.length;v++){var w=this.directivePropList[v];-1!==b.indexOf(w)&&(!1===U(w,this)||U(w,this))&&zt(w,U(w,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},n.prototype.registerEvents=function(e){aae(e,this,!0)},n.prototype.ngOnChanges=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];this.propCollection[s]=e[s].currentValue}this.isUpdated=!1,this.hasChanges=!0},n.prototype.clearTemplate=function(e){lae(this,e)},n.prototype.getProperties=function(){for(var e=0,t=this.tagObjects;e<t.length;e++){var i=t[e];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},n.prototype.isChanged=function(){var e=this.hasChanges;if(!f(this.propCollection[this.property]))for(var i=Object.keys(this.propCollection[this.property][0]),s=0;s<i.length;s++)if(!f(this.propCollection[i[s]])){var r=U(i[s],this),o=this.propCollection[this.property][0][i[s]];!f(r)&&this.propCollection[i[s]]!==r&&o!==r&&(zt(i[s],r,this.propCollection[this.property][0]),zt(i[s],r,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var a=0,l=this.tagObjects;a<l.length;a++)e=e||l[a].instance.hasChanges;return e||this.hasChanges},n.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var e=Object.keys(this),t=0,i=e=e.filter(function(o){return NDe.test(o)});t<i.length;t++){var r=i[t].replace("Ref","");zt(r.replace("_","."),U(r,this),this.propCollection)}},n.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},n.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},n.prototype.ngOnDestroy=function(){this.directivePropList=[]}}(),function(){function n(e){this.list=[],this.hasChanges=!1,this.propertyName=e}n.prototype.ngOnInit=function(){this.isInitChanges=!0},n.prototype.ngAfterContentInit=function(){var e=this,t=0;this.list=this.children.map(function(i){return i.dirIndex=t++,i.property=e.propertyName,i}),this.hasChanges=!0},n.prototype.getProperties=function(){for(var e=[],t=0,i=this.list;t<i.length;t++)e.push(i[t].getProperties());return e},n.prototype.isChanged=function(){var e=this,t=!1,i=0,s=!1,r=this.children.map(function(c){return c});if(this.list.length===this.children.length)for(var o=0;o<this.list.length;o++)this.list[o].propCollection.dataSource&&this.list[o].dataSource&&this.list[o].propCollection.dataSource!==this.list[o].dataSource&&(this.list[o].propCollection.dataSource=this.list[o].dataSource,this.list[o].hasChanges=!0),r[o].hasChanges&&(s=!0);this.hasNewChildren=!(this.list.length===this.children.length&&!s)||null,this.hasNewChildren&&(this.list=this.children.map(function(c){return c.dirIndex=i++,c.property=e.propertyName,c}));for(var a=0,l=this.list;a<l.length;a++)t=t||l[a].hasChanges;return!!this.list.length&&t},n.prototype.clearTemplate=function(e){for(var t=this,i=0,s=this.list;i<s.length;i++)s[i].clearTemplate(e&&e.map(function(o){return new RegExp(t.propertyName).test(o)?o.replace(t.propertyName+".",""):o}))},n.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=0;e<this.list.length;e++)U("childColumns",this.list[e])&&"columns"===U("property",this.list[e])&&zt("columns",U("childColumns",this.list[e]).getProperties(),this.list[e].propCollection),this.list[e].isUpdated=!0},n.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},n.prototype.ngOnDestroy=function(){this.list=[]}}(),function(){function n(){this.isProtectedOnChange=!0,this.isFormInit=!0}return n.prototype.saveChanges=function(e,t,i){if(!this.isProtectedOnChange){this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate();var s=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(s)}}},n.prototype.ngOnInit=function(e){var t=e||this;t.registeredTemplate={},t.ngBoundedEvents={},t.isAngular=!0,t.isFormInit=!0,e&&(this.tags=e.tags),t.tags=this.tags||[],t.complexTemplate=this.complexTemplate||[],t.tagObjects=[],t.ngAttr=this.getAngularAttr(t.element),t.createElement=function(E,D){var L=t.srenderer?t.srenderer.createElement(E):Be(E);return void 0===D||(L.innerHTML=D.innerHTML?D.innerHTML:"",void 0!==D.className&&(L.className=D.className),void 0!==D.id&&(L.id=D.id),void 0!==D.styles&&L.setAttribute("style",D.styles),void 0!==t.ngAttr&&L.setAttribute(t.ngAttr,""),void 0!==D.attrs&&Rt(L,D.attrs)),L};for(var i=0,s=t.tags;i<s.length;i++){var r=s[i],o={instance:U("child"+r.substring(0,1).toUpperCase()+r.substring(1),t),name:r};t.tagObjects.push(o)}for(var a=Object.keys(t),l=0;l<a.length;l++){var h=U(a[l],t);"object"==typeof h&&h&&h.elementRef&&("object"==typeof h&&h&&h.elementRef&&-1!==a[l].indexOf("_")&&-1===a[l].indexOf("Ref")&&zt(a[l]+"Ref",h,t),t.viewContainerRef&&!U("_viewContainerRef",h.elementRef.nativeElement)&&!U("propName",h.elementRef.nativeElement)&&(zt("_viewContainerRef",t.viewContainerRef,h.elementRef.nativeElement),zt("propName",a[l].replace("Ref",""),h.elementRef.nativeElement)))}for(var c=0,m=a=(a=Object.keys(t)).filter(function(E){return/Ref$/i.test(E)&&/\_/i.test(E)});c<m.length;c++){var v=m[c].replace("Ref",""),w={};zt(v.replace("_","."),U(v,t),w),t.setProperties(w,!0)}},n.prototype.getAngularAttr=function(e){for(var s,t=e.attributes,i=t.length,r=0;r<i;r++)/_ngcontent/g.test(t[r].name)&&(s=t[r].name);return s},n.prototype.ngAfterViewInit=function(e){var t=e||this;/ejs-tab|ejs-accordion/g.test(t.ngEle.nativeElement.outerHTML)&&(t.ngEle.nativeElement.style.visibility="hidden");for(var s=Object.keys(t),r=0,o=s=s.filter(function(h){return/Ref$/i.test(h)});r<o.length;r++){var l=o[r].replace("Ref","");zt(l.replace("_","."),U(l+"Ref",t),t)}setTimeout(function(){("undefined"!=typeof window&&t.element||t.getModuleName().includes("btn"))&&(t.appendTo(t.element),t.ngEle.nativeElement.style.visibility="")})},n.prototype.ngOnDestroy=function(e){var t=e||this;setTimeout(function(){"undefined"!=typeof window&&t.element.classList.contains("e-control")&&(t.destroy(),t.clearTemplate(null),t.ngBoundedEvents={},t.tagObjects={},t.ngEle=null)})},n.prototype.clearTemplate=function(e,t){lae(this,e,t)},n.prototype.ngAfterContentChecked=function(e){for(var t=e||this,i=0,s=t.tagObjects;i<s.length;i++){var r=s[i];if(!li(r.instance)&&(r.instance.isInitChanges||r.instance.hasChanges||r.instance.hasNewChildren))if(r.instance.isInitChanges){var o={},a=void 0;(l=U("instance.list",r))&&l.length&&(a=l[0].directivePropList);var h=!0;if(t.getModuleName&&"gantt"===t.getModuleName()&&(h=!1),a&&h&&-1===a.indexOf(r.instance.propertyName))for(var c=Object.keys(r.instance.list[0].propCollection),m=0;m<r.instance.list.length;m++){r.instance.list[m].propCollection[r.instance.propertyName]=[];for(var b={},v=0;v<c.length;v++)b[w=c[v]]=r.instance.list[m].propCollection[w];for(var E=0;E<r.instance.list[m].tags.length;E++){var D=r.instance.list[m].tags[E],L=U("child"+D.substring(0,1).toUpperCase()+D.substring(1),r.instance.list[m]);if(L){var N=r.instance.list[m]["child"+D.substring(0,1).toUpperCase()+D.substring(1)];if(N)for(var V=0;V<N.list.length;V++){var $=N.list[0].tags[0];if($){var ie=U("child"+$.substring(0,1).toUpperCase()+$.substring(1),N.list[V]);ie&&N.list[V].tagObjects.push({instance:ie,name:$})}}r.instance.list[m].tagObjects.push({instance:L,name:D})}}r.instance.list[m].propCollection[r.instance.propertyName].push(b)}o[r.name]=r.instance.getProperties(),t.setProperties(o,r.instance.isInitChanges)}else{(t[r.name].length!==r.instance.list.length||/diagram|tab/.test(t.getModuleName()))&&(t[r.name]=r.instance.list);for(var Q=0,le=r.instance.list;Q<le.length;Q++){var l,ke=r.instance.list.indexOf(l=le[Q]),Ye=U(r.name,t)[ke],Nt=Object.keys(Ye);if(Nt=Nt.filter(function(xe){return/Ref$/i.test(xe)}),Ye.properties&&0!==Object.keys(Ye.properties).length)for(var Le=0,nt=Nt;Le<nt.length;Le++){var w;w=(w=nt[Le]).replace(/Ref/,""),Ye.properties[w]=Ye.properties[w]?Ye.properties[w]:Ye.propCollection[w]}!li(Ye)&&!li(Ye.setProperties)&&(/diagram|DashboardLayout/.test(t.getModuleName())?Ye.setProperties(l.getProperties(),!0):Ye.setProperties(l.getProperties())),l.isUpdated=!0}}}},n.prototype.registerEvents=function(e){aae(e,this)},n.prototype.twoWaySetter=function(e,t){var i=U(t,this.properties);i!==e&&(this.saveChanges(t,e,i),zt(t,f(e)?null:e,this.properties),U(t+"Change",this).emit(e))},n.prototype.addTwoWay=function(e){for(var t=this,i=function(l){U(l,s),Object.defineProperty(s,l,{get:function(){return U(l,t.properties)},set:function(h){return t.twoWaySetter(h,l)}}),zt(l+"Change",new d.vpe,s)},s=this,r=0,o=e;r<o.length;r++)i(o[r])},n.prototype.addEventListener=function(e,t){var i=U(e,this);li(i)||(this.ngBoundedEvents[e]||(this.ngBoundedEvents[e]=new Map),this.ngBoundedEvents[e].set(t,i.subscribe(t)))},n.prototype.removeEventListener=function(e,t){li(U(e,this))||this.ngBoundedEvents[e].get(t).unsubscribe()},n.prototype.trigger=function(e,t,i){var s=U(e,this),r=this.isProtectedOnChange;this.isProtectedOnChange=!1,t&&(t.name=e),li(s)||s.next(t);var o=U("local"+e.charAt(0).toUpperCase()+e.slice(1),this);li(o)||o.call(this,t),this.isProtectedOnChange=r,i&&(this.preventChange=this.isPreventChange,i.call(this,t)),this.isPreventChange=!1},n}()),cae=function(){function n(){}return n.prototype.propagateChange=function(e){},n.prototype.propagateTouch=function(){},n.prototype.localChange=function(e){var t=void 0===e.checked?e.value:e.checked;this.objCheck=Df(t),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(t),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==t&&(this.propagateChange(t),this.angularValue=t)):t!==this.angularValue&&void 0!==this.propagateChange&&void 0!==t&&(this.propagateChange(t),this.angularValue=t)},n.prototype.registerOnChange=function(e){this.propagateChange=e},n.prototype.registerOnTouched=function(e){this.propagateTouch=e},n.prototype.twoWaySetter=function(e,t){var i=this.oldValue||U(t,this.properties),s=this.inputElement||this.element;s&&i===e&&this.value===e&&(void 0===s.value||""===s.value)||(this.saveChanges(t,e,i),zt(t,f(e)?null:e,this.properties),U(t+"Change",this).emit(e))},n.prototype.ngAfterViewInit=function(e){var t=e||this;if("undefined"!=typeof window){t.appendTo(t.element);var i=t.inputElement||t.element;i.addEventListener("focus",t.ngOnFocus.bind(t)),i.addEventListener("blur",t.ngOnBlur.bind(t))}this.isFormInit=!1},n.prototype.setDisabledState=function(e){this.enabled=!e,this.disabled=e},n.prototype.writeValue=function(e){void 0===this.checked?this.value=e:this.ngEle&&(this.checked="boolean"==typeof e?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?e===this.value:e:e===this.value),this.angularValue=e,this.isUpdated=!0,this.preventChange=!this.isFormInit},n.prototype.ngOnFocus=function(e){!0!==this.skipFromEvent&&this.focus.emit(e)},n.prototype.ngOnBlur=function(e){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(e)},n.isFormBase=!0,n}(),BDe=function RDe(){return g9.compile}();function zDe(n){return function(e){void 0!==e&&(zt(n+"Ref",e,this),"string"!=typeof e?(e.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,e.elementRef.nativeElement.propName=n):this.saveChanges&&(this.saveChanges(n,e,void 0),this.dataBind()))}}function jDe(n,e){return function(){return U(n+"Ref",this)||e}}!function kDe(n){g9.compile=n.compile}({compile:function HDe(n,e){if("string"==typeof n)return BDe(n,e);var t=n.elementRef.nativeElement._viewContainerRef,i=n.elementRef.nativeElement.propName;return function(s,r,o){var l=t||r.viewContainerRef,h=l.createEmbeddedView(n,{$implicit:s});h.markForCheck();var c=r&&r.registeredTemplate?r.registeredTemplate:U("currentInstance.registeredTemplate",l);return void 0===c[o=o&&r.registeredTemplate?o:i]&&(c[o]=[]),c[o].push(h),h.rootNodes}}});class Ut{constructor(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}setKey(e){return this.key=e,this}using(e){return this.dataManager=e,this}execute(e,t,i,s){return(e=e||this.dataManager)?e.executeQuery(this,t,i,s):Ze.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')}executeLocal(e){return(e=e||this.dataManager)?e.executeLocal(this):Ze.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')}clone(){let e=new Ut;return e.queries=this.queries.slice(0),e.key=this.key,e.isChild=this.isChild,e.dataManager=this.dataManager,e.fromTable=this.fromTable,e.params=this.params.slice(0),e.expands=this.expands.slice(0),e.sortedColumns=this.sortedColumns.slice(0),e.groupedColumns=this.groupedColumns.slice(0),e.subQuerySelector=this.subQuerySelector,e.subQuery=this.subQuery,e.fKey=this.fKey,e.isCountRequired=this.isCountRequired,e.distincts=this.distincts.slice(0),e.lazyLoad=this.lazyLoad.slice(0),e}from(e){return this.fromTable=e,this}addParams(e,t){return this.params.push("function"==typeof t?{key:e,fn:t}:{key:e,value:t}),this}distinct(e){return this.distincts="string"==typeof e?[].slice.call([e],0):e.slice(0),this}expand(e){return this.expands="string"==typeof e?[].slice.call([e],0):e.slice(0),this}where(e,t,i,s,r){t=t?t.toLowerCase():null;let o=null;return"string"==typeof e?o=new cs(e,t,i,s,r):e instanceof cs&&(o=e),this.queries.push({fn:"onWhere",e:o}),this}search(e,t,i,s,r){return"string"==typeof t&&(t=[t]),(!i||"none"===i)&&(i="contains"),this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:s,ignoreAccent:r,comparer:Ze.fnOperators[i]}}),this}sortBy(e,t,i){return this.sortByForeignKey(e,t,i)}sortByForeignKey(e,t,i,s){let o,a,r=f(s)?"ascending":s;if("string"==typeof e&&Ze.endsWith(e.toLowerCase()," desc")&&(e=e.replace(/ desc$/i,""),t="descending"),(!t||"string"==typeof t)&&(r=t?t.toLowerCase():"ascending",t=Ze.fnSort(t)),i){o=Ut.filterQueries(this.queries,"onSortBy");for(let l=0;l<o.length;l++)if(a=o[l].e.fieldName,"string"==typeof a){if(a===e)return this}else if(a instanceof Array)for(let h=0;h<a.length;h++)if(a[h]===e||e.toLowerCase()===a[h]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:t,direction:r}}),this}sortByDesc(e){return this.sortBy(e,"descending")}group(e,t,i){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:i||null}}),this}page(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this}range(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this}take(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this}skip(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this}select(e){return"string"==typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this}hierarchy(e,t){return this.subQuerySelector=t,this.subQuery=e,this}foreignKey(e){return this.fKey=e,this}requiresCount(){return this.isCountRequired=!0,this}aggregate(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this}static filterQueries(e,t){return e.filter(i=>i.fn===t)}static filterQueryLists(e,t){let i=e.filter(r=>-1!==t.indexOf(r.fn)),s={};for(let r=0;r<i.length;r++)s[i[r].fn]||(s[i[r].fn]=i[r].e);return s}}class cs{constructor(e,t,i,s=!1,r){return this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof e?(this.field=e,this.operator=t.toLowerCase(),this.value=i,this.ignoreCase=s,this.ignoreAccent=r,this.isComplex=!1,this.comparer=Ze.fnOperators.processOperator(this.operator)):(e instanceof cs&&i instanceof cs||i instanceof Array)&&(this.isComplex=!0,this.condition=t.toLowerCase(),this.predicates=[e],i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}static and(...e){return cs.combinePredicates([].slice.call(e,0),"and")}and(e,t,i,s,r){return cs.combine(this,e,t,i,"and",s,r)}static or(...e){return cs.combinePredicates([].slice.call(e,0),"or")}or(e,t,i,s,r){return cs.combine(this,e,t,i,"or",s,r)}static fromJson(e){if(e instanceof Array){let i=[];for(let s=0,r=e.length;s<r;s++)i.push(this.fromJSONData(e[s]));return i}return this.fromJSONData(e)}validate(e){let i,s,t=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,Ze.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);i="and"===this.condition;for(let r=0;r<t.length;r++)if(s=t[r].validate(e),i){if(!s)return!1}else if(s)return!0;return i}toJson(){let e,t;if(this.isComplex){e=[],t=this.predicates;for(let i=0;i<t.length;i++)e.push(t[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e}}static combinePredicates(e,t){if(1===e.length){if(!(e[0]instanceof Array))return e[0];e=e[0]}return new cs(e[0],t,e.slice(1))}static combine(e,t,i,s,r,o,a){return t instanceof cs?cs[r](e,t):"string"==typeof t?cs[r](e,new cs(t,i,s,o,a)):Ze.throwError("Predicate - "+r+" : invalid arguments")}static fromJSONData(e){let r,t=e.predicates||[],i=t.length,s=[];for(let o=0;o<i;o++)s.push(this.fromJSONData(t[o]));return r=e.isComplex?new cs(s[0],e.condition,s.slice(1)):new cs(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent),r}}const dae={GroupGuid:"{271bbba0-1ee7}"};let Ze=(()=>{class n{static getValue(t,i){return"function"==typeof t?t.call(i||{}):t}static endsWith(t,i){return t.slice&&t.slice(-i.length)===i}static startsWith(t,i){return t.slice(0,i.length)===i}static fnSort(t){return"ascending"===(t=t?n.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending}static fnAscending(t,i){return f(t)&&f(i)||null==i?-1:"string"==typeof t?t.localeCompare(i):null==t?1:t-i}static fnDescending(t,i){return f(t)&&f(i)?-1:null==i?1:"string"==typeof t?-1*t.localeCompare(i):null==t?-1:i-t}static extractFields(t,i){let s={};for(let r=0;r<i.length;r++)s=this.setValue(i[r],this.getObject(i[r],t),s);return s}static select(t,i){let s=[];for(let r=0;r<t.length;r++)s.push(this.extractFields(t[r],i));return s}static group(t,i,s,r,o,a,l){r=r||1;let h=t,c="GroupGuid";if(h.GroupGuid===dae[c]){for(let v=0;v<h.length;v++)if(f(o))h[v].items=this.group(h[v].items,i,s,h.level+1,null,a,l),h[v].count=h[v].items.length;else{let w=-1,E=o.filter(D=>D.key===h[v].key);w=o.indexOf(E[0]),h[v].items=this.group(h[v].items,i,s,h.level+1,o[w].items,a,l),h[v].count=o[w].count}return h.childLevels+=1,h}let m={},b=[];b.GroupGuid=dae[c],b.level=r,b.childLevels=0,b.records=h;for(let v=0;v<h.length;v++){let w=this.getVal(h,v,i);if(f(a)||(w=a(w,i)),!m[w]&&(m[w]={key:w,count:0,items:[],aggregates:{},field:i},b.push(m[w]),!f(o))){let E=o.filter(D=>D.key===m[w].key);m[w].count=E[0].count}m[w].count=f(o)?m[w].count+=1:m[w].count,(!l||l&&s.length)&&m[w].items.push(h[v])}if(s&&s.length)for(let v=0;v<b.length;v++){let E,w={},D=s;for(let L=0;L<s.length;L++)if(E=n.aggregates[s[L].type],f(o))E&&(w[D[L].field+" - "+D[L].type]=E(b[v].items,D[L].field));else{let N=o.filter(V=>V.key===b[v].key);E&&(w[D[L].field+" - "+D[L].type]=E(N[0].items,D[L].field))}b[v].aggregates=w}if(l&&b.length&&s.length)for(let v=0;v<b.length;v++)b[v].items=[];return h.length&&b||h}static buildHierarchy(t,i,s,r,o){let a,h,l={};for(r.result&&(r=r.result),r.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),a=0;a<r.length;a++){let c=this.getObject(t,r[a]);h=l[c]||(l[c]=[]),h.push(r[a])}for(a=0;a<s.length;a++){let c=this.getObject(o||t,s[a]);s[a][i]=l[c]}}static getFieldList(t,i,s){if(void 0===s&&(s=""),null==i)return this.getFieldList(t,[],s);let r=t,o=Object.keys(t);for(let a of o)"object"!=typeof r[a]||r[a]instanceof Array?i.push(s+a):this.getFieldList(r[a],i,s+a+".");return i}static getObject(t,i){if(!t)return i;if(!i)return;if(-1===t.indexOf("."))return i[t];let s=i,r=t.split(".");for(let o=0;o<r.length&&null!=s;o++)s=s[r[o]];return s}static setValue(t,i,s){let l,c,r=t.toString().split("."),o=s||{},a=o,h=r.length;for(l=0;l<h;l++)c=r[l],l+1===h?a[c]=void 0===i?void 0:i:f(a[c])&&(a[c]={}),a=a[c];return o}static sort(t,i,s){if(t.length<=1)return t;let r=parseInt((t.length/2).toString(),10),o=t.slice(0,r),a=t.slice(r);return o=this.sort(o,i,s),a=this.sort(a,i,s),this.merge(o,a,i,s)}static ignoreDiacritics(t){return"string"!=typeof t?t:t.split("").map(r=>r in n.diacritics?n.diacritics[r]:r).join("")}static merge(t,i,s,r){let a,o=[];for(;t.length>0||i.length>0;)a=t.length>0&&i.length>0?r?r(this.getVal(t,0,s),this.getVal(i,0,s),t[0],i[0])<=0?t:i:t[0][s]<t[0][s]?t:i:t.length>0?t:i,o.push(a.shift());return o}static getVal(t,i,s){return s?this.getObject(s,t[i]):t[i]}static toLowerCase(t){return t?"string"==typeof t?t.toLowerCase():t.toString():0===t||!1===t?t.toString():""}static callAdaptorFunction(t,i,s,r){if(i in t){let o=t[i](s,r);f(o)||(s=o)}return s}static getAddParams(t,i,s){let r={};return n.callAdaptorFunction(t,"addParams",{dm:i,query:s,params:s.params,reqParams:r}),r}static isPlainObject(t){return!!t&&t.constructor===Object}static isCors(){let t=null;try{t=new window.XMLHttpRequest}catch(s){}return!!t&&"withCredentials"in t}static getGuid(t){let s;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,(r,o)=>{if("crypto"in window&&"getRandomValues"in crypto){let a=new Uint8Array(1);window.crypto.getRandomValues(a),s=a[0]%16|0}else s=16*Math.random()|0;return"0123456789abcdef"[19===o?3&s|8:s]})}static isNull(t){return null==t}static getItemFromComparer(t,i,s){let r,o,a,l=0,h="string"==typeof n.getVal(t,0,i);if(t.length)for(;f(r)&&l<t.length;)r=n.getVal(t,l,i),a=t[l++];for(;l<t.length;l++)o=n.getVal(t,l,i),!f(o)&&(h&&(r=+r,o=+o),s(r,o)>0&&(r=o,a=t[l]));return a}static distinct(t,i,s){s=!f(s)&&s;let o,r=[],a={};return t.forEach((l,h)=>{o="object"==typeof t[h]?n.getVal(t,h,i):t[h],o in a||(r.push(s?t[h]:o),a[o]=1)}),r}static processData(t,i){let s=this.prepareQuery(t),r=new ut(i);t.requiresCounts&&s.requiresCount();let o=r.executeLocal(s),a={result:t.requiresCounts?o.result:o,count:o.count,aggregates:JSON.stringify(o.aggregates)};return t.requiresCounts?a:o}static prepareQuery(t){let i=new Ut;return t.select&&i.select(t.select),t.where&&n.parse.parseJson(t.where).filter(r=>{if(f(r.condition))i.where(r.field,r.operator,r.value,r.ignoreCase,r.ignoreAccent);else{let o=[];r.field?o.push(new cs(r.field,r.operator,r.value,r.ignoreCase,r.ignoreAccent)):o=o.concat(this.getPredicate(r.predicates)),"or"==r.condition?i.where(cs.or(o)):"and"==r.condition&&i.where(cs.and(o))}}),t.search&&n.parse.parseJson(t.search).filter(r=>i.search(r.key,r.fields,r.operator,r.ignoreCase,r.ignoreAccent)),t.aggregates&&t.aggregates.filter(s=>i.aggregate(s.type,s.field)),t.sorted&&t.sorted.filter(s=>i.sortBy(s.name,s.direction)),t.skip&&i.skip(t.skip),t.take&&i.take(t.take),t.group&&t.group.filter(s=>i.group(s)),i}static getPredicate(t){let i=[];for(let s=0;s<t.length;s++){let r=t[s];if(r.field)i.push(new cs(r.field,r.operator,r.value,r.ignoreCase,r.ignoreAccent));else{let o=[],a=this.getPredicate(r.predicates);for(const l of Object.keys(a))o.push(a[l]);i.push("or"==r.condition?cs.or(o):cs.and(o))}}return i}}return n.serverTimezoneOffset=null,n.timeZoneHandling=!0,n.throwError=e=>{try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}},n.aggregates={sum:(e,t)=>{let s,i=0,r="number"!=typeof n.getVal(e,0,t);for(let o=0;o<e.length;o++)s=n.getVal(e,o,t),!isNaN(s)&&null!==s&&(r&&(s=+s),i+=s);return i},average:(e,t)=>n.aggregates.sum(e,t)/e.length,min:(e,t)=>{let i;return"function"==typeof t&&(i=t,t=null),n.getObject(t,n.getItemFromComparer(e,t,i||n.fnAscending))},max:(e,t)=>{let i;return"function"==typeof t&&(i=t,t=null),n.getObject(t,n.getItemFromComparer(e,t,i||n.fnDescending))},truecount:(e,t)=>new ut(e).executeLocal((new Ut).where(t,"equal",!0,!0)).length,falsecount:(e,t)=>new ut(e).executeLocal((new Ut).where(t,"equal",!1,!0)).length,count:(e,t)=>e.length},n.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},n.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},n.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},n.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},n.diacritics={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"},n.fnOperators={equal:(e,t,i,s)=>(s&&(e=n.ignoreDiacritics(e),t=n.ignoreDiacritics(t)),i?n.toLowerCase(e)===n.toLowerCase(t):e===t),notequal:(e,t,i,s)=>(s&&(e=n.ignoreDiacritics(e),t=n.ignoreDiacritics(t)),!n.fnOperators.equal(e,t,i)),lessthan:(e,t,i)=>i?n.toLowerCase(e)<n.toLowerCase(t):(f(e)&&(e=void 0),e<t),greaterthan:(e,t,i)=>i?n.toLowerCase(e)>n.toLowerCase(t):e>t,lessthanorequal:(e,t,i)=>i?n.toLowerCase(e)<=n.toLowerCase(t):(f(e)&&(e=void 0),e<=t),greaterthanorequal:(e,t,i)=>i?n.toLowerCase(e)>=n.toLowerCase(t):e>=t,contains:(e,t,i,s)=>(s&&(e=n.ignoreDiacritics(e),t=n.ignoreDiacritics(t)),i?!f(e)&&!f(t)&&-1!==n.toLowerCase(e).indexOf(n.toLowerCase(t)):!f(e)&&!f(t)&&-1!==e.toString().indexOf(t)),notnull:e=>null!==e,isnull:e=>null===e,startswith:(e,t,i,s)=>(s&&(e=n.ignoreDiacritics(e),t=n.ignoreDiacritics(t)),i?e&&t&&n.startsWith(n.toLowerCase(e),n.toLowerCase(t)):e&&t&&n.startsWith(e,t)),endswith:(e,t,i,s)=>(s&&(e=n.ignoreDiacritics(e),t=n.ignoreDiacritics(t)),i?e&&t&&n.endsWith(n.toLowerCase(e),n.toLowerCase(t)):e&&t&&n.endsWith(e,t)),processSymbols:e=>{let t=n.operatorSymbols[e];return t?n.fnOperators[t]:n.throwError("Query - Process Operator : Invalid operator")},processOperator:e=>n.fnOperators[e]||n.fnOperators.processSymbols(e)},n.parse={parseJson:e=>("string"==typeof e?e=JSON.parse(e,n.parse.jsonReviver):e instanceof Array?n.parse.iterateAndReviveArray(e):"object"==typeof e&&null!==e&&n.parse.iterateAndReviveJson(e),e),iterateAndReviveArray:e=>{for(let t=0;t<e.length;t++)"object"==typeof e[t]&&null!==e[t]?n.parse.iterateAndReviveJson(e[t]):e[t]="string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(e[t])?n.parse.parseJson(e[t]):n.parse.jsonReviver("",e[t])},iterateAndReviveJson:e=>{let t,i=Object.keys(e);for(let s of i)n.startsWith(s,"__")||(t=e[s],"object"==typeof t?t instanceof Array?n.parse.iterateAndReviveArray(t):t&&n.parse.iterateAndReviveJson(t):e[s]=n.parse.jsonReviver(e[s],t))},jsonReviver:(e,t)=>{if("string"==typeof t){let i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t),s=n.timeZoneHandling?n.serverTimezoneOffset:null;if(i)return n.dateParse.toTimeZone(new Date(parseInt(i[1],10)),s,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){let r=t.indexOf("Z")>-1||t.indexOf("z")>-1,o=t.split(/[^0-9.]/);if(r)t=n.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),n.serverTimezoneOffset,!1);else{let a=new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),l=parseInt(o[6],10),h=parseInt(o[7],10);if(isNaN(l)&&isNaN(h))return a;t.indexOf("+")>-1?a.setHours(a.getHours()-l,a.getMinutes()-h):a.setHours(a.getHours()+l,a.getMinutes()+h),t=n.dateParse.toTimeZone(a,n.serverTimezoneOffset,!1)}null==n.serverTimezoneOffset&&(t=n.dateParse.addSelfOffset(t))}}return t},isJson:e=>"string"==typeof e[0]?e:n.parse.parseJson(e),isGuid:e=>null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e),replacer:(e,t)=>n.isPlainObject(e)?n.parse.jsonReplacer(e,t):e instanceof Array?n.parse.arrayReplacer(e):e instanceof Date?n.parse.jsonReplacer({val:e},t).val:e,jsonReplacer:(e,t)=>{let i,s=Object.keys(e);for(let r of s){if(i=e[r],!(i instanceof Date))continue;let o=i;null==n.serverTimezoneOffset?e[r]=n.dateParse.toTimeZone(o,null).toJSON():(o=new Date(+o+36e5*n.serverTimezoneOffset),e[r]=n.dateParse.toTimeZone(n.dateParse.addSelfOffset(o),null).toJSON())}return e},arrayReplacer:e=>{for(let t=0;t<e.length;t++)n.isPlainObject(e[t])?e[t]=n.parse.jsonReplacer(e[t]):e[t]instanceof Date&&(e[t]=n.parse.jsonReplacer({date:e[t]}).date);return e},jsonDateReplacer:(e,t)=>{if("value"===e&&t){if("string"==typeof t){let i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t);if(i)t=n.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){let s=t.split(/[^0-9]/);t=n.dateParse.toTimeZone(new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10)),null,!0)}}if(t instanceof Date)return t=n.dateParse.addSelfOffset(t),null===n.serverTimezoneOffset?n.dateParse.toTimeZone(n.dateParse.addSelfOffset(t),null).toJSON():(t=n.dateParse.toTimeZone(t,t.getTimezoneOffset()/60*2-n.serverTimezoneOffset,!1)).toJSON()}return t}},n.dateParse={addSelfOffset:e=>new Date(+e-6e4*e.getTimezoneOffset()),toUTC:e=>new Date(+e+6e4*e.getTimezoneOffset()),toTimeZone:(e,t,i)=>{if(null===t)return e;let s=i?n.dateParse.toUTC(e):e;return new Date(+s-36e5*t)},toLocalTime:e=>{let t=e,i=-t.getTimezoneOffset(),s=i>=0?"+":"-",r=a=>{let l=Math.floor(Math.abs(a));return(l<10?"0":"")+l};return t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate())+"T"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+s+r(i/60)+":"+r(i%60)}},n})();const UDe={GroupGuid:"{271bbba0-1ee7}"};class Uz{constructor(e){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=Uz,this.dataSource=e,this.pvt={}}processResponse(e,t,i,s){return e}}class b9 extends Uz{processQuery(e,t){let o,a,m,i=e.dataSource.json.slice(0),s=i.length,r=!0,l={},h=0,c=[];for(let v=0;v<t.lazyLoad.length;v++)h++,l[t.lazyLoad[v].key]=t.lazyLoad[v].value;let b={};for(let v=0;v<t.queries.length;v++)a=t.queries[v],"onPage"!==a.fn&&"onGroup"!==a.fn||!t.lazyLoad.length?(o=this[a.fn].call(this,i,a.e,t),"onAggregates"===a.fn?b[a.e.field+" - "+a.e.type]=o:i=void 0!==o?o:i,("onPage"===a.fn||"onSkip"===a.fn||"onTake"===a.fn||"onRange"===a.fn)&&(r=!1),r&&(s=i.length)):("onGroup"===a.fn&&c.push(a.e),"onPage"===a.fn&&(m=a.e));if(h){let w=this.lazyLoadGroup({query:t,lazyLoad:l,result:i,group:c,page:m});i=w.result,s=w.count}return t.isCountRequired&&(i={result:i,count:s,aggregates:b}),i}lazyLoadGroup(e){let t=0,i=this.getAggregate(e.query),s=e.result;if(f(e.lazyLoad.onDemandGroupInfo)){s=Ze.group(s,e.group[0].fieldName,i,null,null,e.group[0].comparer,!0),t=s.length;let o=s;e.page&&(s=this.onPage(s,e.page,e.query)),this.formGroupResult(s,o)}else{let r=e.lazyLoad.onDemandGroupInfo;for(let a=r.where.length-1;a>=0;a--)s=this.onWhere(s,r.where[a]);e.group.length!==r.level&&(s=Ze.group(s,e.group[r.level].fieldName,i,null,null,e.group[0].comparer,!0)),t=s.length;let o=s;s=s.slice(r.skip),s=s.slice(0,r.take),e.group.length!==r.level&&this.formGroupResult(s,o)}return{result:s,count:t}}formGroupResult(e,t){if(e.length&&t.length){let i="GroupGuid",s="childLevels",r="level",o="records";e[i]=t[i],e[s]=t[s],e[r]=t[r],e[o]=t[o]}return e}getAggregate(e){let t=Ut.filterQueries(e.queries,"onAggregates"),i=[];if(t.length){let s;for(let r=0;r<t.length;r++)s=t[r].e,i.push({type:s.type,field:Ze.getValue(s.field,e)})}return i}batchRequest(e,t,i){let s,r=t.deletedRecords.length;for(s=0;s<t.addedRecords.length;s++)this.insert(e,t.addedRecords[s]);for(s=0;s<t.changedRecords.length;s++)this.update(e,i.key,t.changedRecords[s]);for(s=0;s<r;s++)this.remove(e,i.key,t.deletedRecords[s]);return t}onWhere(e,t){return e&&e.length?e.filter(i=>{if(t)return t.validate(i)}):e}onAggregates(e,t){let i=Ze.aggregates[t.type];return e&&i&&0!==e.length?i(e,t.field):null}onSearch(e,t){return e&&e.length?(0===t.fieldNames.length&&Ze.getFieldList(e[0],t.fieldNames),e.filter(i=>{for(let s=0;s<t.fieldNames.length;s++)if(t.comparer.call(i,Ze.getObject(t.fieldNames[s],i),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1})):e}onSortBy(e,t,i){if(!e||!e.length)return e;let s,r=Ze.getValue(t.fieldName,i);if(!r)return e.sort(t.comparer);if(r instanceof Array){r=r.slice(0);for(let o=r.length-1;o>=0;o--)!r[o]||(s=t.comparer,Ze.endsWith(r[o]," desc")&&(s=Ze.fnSort("descending"),r[o]=r[o].replace(" desc","")),e=Ze.sort(e,r[o],s));return e}return Ze.sort(e,r,t.comparer)}onGroup(e,t,i){if(!e||!e.length)return e;let s=this.getAggregate(i);return Ze.group(e,Ze.getValue(t.fieldName,i),s,null,null,t.comparer)}onPage(e,t,i){let s=Ze.getValue(t.pageSize,i),r=(Ze.getValue(t.pageIndex,i)-1)*s;return e&&e.length?e.slice(r,r+s):e}onRange(e,t){return e&&e.length?e.slice(Ze.getValue(t.start),Ze.getValue(t.end)):e}onTake(e,t){return e&&e.length?e.slice(0,Ze.getValue(t.nos)):e}onSkip(e,t){return e&&e.length?e.slice(Ze.getValue(t.nos)):e}onSelect(e,t){return e&&e.length?Ze.select(e,Ze.getValue(t.fieldNames)):e}insert(e,t,i,s,r){return f(r)?e.dataSource.json.push(t):e.dataSource.json.splice(r,0,t)}remove(e,t,i,s){let o,r=e.dataSource.json;for("object"==typeof i&&!(i instanceof Date)&&(i=Ze.getObject(t,i)),o=0;o<r.length&&Ze.getObject(t,r[o])!==i;o++);return o!==r.length?r.splice(o,1):null}update(e,t,i,s){let o,a,r=e.dataSource.json;for(f(t)||(a=U(t,i)),o=0;o<r.length&&(f(t)||U(t,r[o])!==a);o++);return o<r.length?Ph(r[o],i):null}}class sg extends Uz{processQuery(e,t,i){let l,h,s=this.getQueryRequest(t),r=Ut.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=t.params,a=e.dataSource.url,c=null,m=this.options,b={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in r?(l=r.onPage,h=Ze.getValue(l.pageIndex,t),c=Ze.getValue(l.pageSize,t),h=(h-1)*c):"onRange"in r&&(l=r.onRange,h=l.start,c=l.end-l.start);for(let D=0;D<s.sorts.length;D++)l=Ze.getValue(s.sorts[D].e.fieldName,t),b.sorts.push(Ze.callAdaptorFunction(this,"onEachSort",{name:l,direction:s.sorts[D].e.direction},t));i&&(l=this.getFiltersFrom(i,t),l&&b.filters.push(Ze.callAdaptorFunction(this,"onEachWhere",l.toJson(),t)));for(let D=0;D<s.filters.length;D++){let L=Ze.callAdaptorFunction(this,"onEachWhere",s.filters[D].e.toJson(),t);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!f(s.filters[D].e.key)&&s.filters.length>1&&(L="("+L+")"),b.filters.push(L);let N="object"==typeof b.filters[D]?Object.keys(b.filters[D]):[];for(let V of N)Ze.isNull(b[V])&&delete b[V]}for(let D=0;D<s.searches.length;D++)l=s.searches[D].e,b.searches.push(Ze.callAdaptorFunction(this,"onEachSearch",{fields:l.fieldNames,operator:l.operator,key:l.searchKey,ignoreCase:l.ignoreCase},t));for(let D=0;D<s.groups.length;D++)b.groups.push(Ze.getValue(s.groups[D].e.fieldName,t));for(let D=0;D<s.aggregates.length;D++)l=s.aggregates[D].e,b.aggregates.push({type:l.type,field:Ze.getValue(l.field,t)});let v={};if(this.getRequestQuery(m,t,r,b,v),Ze.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:o,reqParams:v}),t.lazyLoad.length)for(let D=0;D<t.lazyLoad.length;D++)v[t.lazyLoad[D].key]=t.lazyLoad[D].value;let w=Object.keys(v);for(let D of w)(Ze.isNull(v[D])||""===v[D]||0===v[D].length)&&delete v[D];(!(m.skip in v)||!(m.take in v))&&null!==c&&(v[m.skip]=Ze.callAdaptorFunction(this,"onSkip",h,t),v[m.take]=Ze.callAdaptorFunction(this,"onTake",c,t));let E=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(v,Ze.parse.jsonDateReplacer),url:a,pvtData:E,type:"POST",contentType:"application/json; charset=utf-8"}:(l=this.convertToQueryString(v,t,e),l=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+l,{type:"GET",url:l.length?a.replace(/\/*$/,l):a,pvtData:E})}getRequestQuery(e,t,i,s,r){let a=r;a[e.from]=t.fromTable,e.apply&&t.distincts.length&&(a[e.apply]="onDistinct"in this?Ze.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(a[e.expand]="onExpand"in this&&"onSelect"in i?Ze.callAdaptorFunction(this,"onExpand",{selects:Ze.getValue(i.onSelect.fieldNames,t),expands:t.expands},t):t.expands),a[e.select]="onSelect"in i&&!t.distincts.length?Ze.callAdaptorFunction(this,"onSelect",Ze.getValue(i.onSelect.fieldNames,t),t):"",a[e.count]=t.isCountRequired?Ze.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",a[e.search]=s.searches.length?Ze.callAdaptorFunction(this,"onSearch",s.searches,t):"",a[e.skip]="onSkip"in i?Ze.callAdaptorFunction(this,"onSkip",Ze.getValue(i.onSkip.nos,t),t):"",a[e.take]="onTake"in i?Ze.callAdaptorFunction(this,"onTake",Ze.getValue(i.onTake.nos,t),t):"",a[e.where]=s.filters.length||s.searches.length?Ze.callAdaptorFunction(this,"onWhere",s.filters,t):"",a[e.sortBy]=s.sorts.length?Ze.callAdaptorFunction(this,"onSortBy",s.sorts,t):"",a[e.group]=s.groups.length?Ze.callAdaptorFunction(this,"onGroup",s.groups,t):"",a[e.aggregates]=s.aggregates.length?Ze.callAdaptorFunction(this,"onAggregates",s.aggregates,t):"",a.param=[]}convertToQueryString(e,t,i){return""}processResponse(e,t,i,s,r,o){if(s&&s.getResponseHeader("Content-Type")&&-1!==s.getResponseHeader("Content-Type").indexOf("application/json")){let v=Ze.timeZoneHandling;t&&!t.timeZoneHandling&&(Ze.timeZoneHandling=!1),e=Ze.parse.parseJson(e),Ze.timeZoneHandling=v}let a=r,l=a.pvtData||{},h=e?e.groupDs:[];if(s&&s.getResponseHeader("Content-Type")&&-1!==s.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];let c=JSON.parse(a.data);if(c&&"batch"===c.action&&e&&e.addedRecords)return o.addedRecords=e.addedRecords,o;e&&e.d&&(e=e.d);let m={};e&&"count"in e&&(m.count=e.count),m.result=e&&e.result?e.result:e;let b=!1;if(Array.isArray(e.result)&&e.result.length){let v="key",w="value",E="level";if(f(e.result[0][v])||(m.result=this.formRemoteGroupedData(m.result,1,l.groups.length-1)),i&&i.lazyLoad.length&&l.groups.length)for(let D=0;D<i.lazyLoad.length;D++)"onDemandGroupInfo"===i.lazyLoad[D][v]&&l.groups.length===i.lazyLoad[D][w][E]&&(b=!0)}return b||this.getAggregateResult(l,e,m,h,i),Ze.isNull(m.count)?m.result:{result:m.result,count:m.count,aggregates:m.aggregates}}formRemoteGroupedData(e,t,i){for(let l=0;l<e.length;l++)e[l].items.length&&Object.keys(e[l].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[l].items,t+1,i-1);let s="GroupGuid",a="records";return e[s]=UDe[s],e.level=t,e.childLevels=i,e[a]=e[0].items.length?this.getGroupedRecords(e,!f(e[0].items[a])):[],e}getGroupedRecords(e,t){let i=[];for(let r=0;r<e.length;r++)if(t)i=i.concat(e[r].items.records);else for(let o=0;o<e[r].items.length;o++)i.push(e[r].items[o]);return i}onGroup(e){return this.pvt.groups=e,e}onAggregates(e){this.pvt.aggregates=e}batchRequest(e,t,i,s,r){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(Ae({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i[void 0],key:i[void 0]},Ze.getAddParams(this,e,s)))}}beforeSend(e,t){}insert(e,t,i,s){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(Ae({},{value:t,table:i,action:"insert"},Ze.getAddParams(this,e,s)))}}remove(e,t,i,s,r){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(Ae({},{key:i,keyColumn:t,table:s,action:"remove"},Ze.getAddParams(this,e,r)))}}update(e,t,i,s,r){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(Ae({},{value:i,action:"update",keyColumn:t,key:Ze.getObject(t,i),table:s},Ze.getAddParams(this,e,r)))}}getFiltersFrom(e,t){let s,i=t.fKey,r=i,o=t.key,a=[];"object"!=typeof e[0]&&(r=null);for(let l=0;l<e.length;l++)s="object"==typeof e[0]?Ze.getObject(o||r,e[l]):e[l],a.push(new cs(i,"equal",s));return cs.or(a)}getAggregateResult(e,t,i,s,r){let o=t;if(t&&t.result&&(o=t.result),e&&e.aggregates&&e.aggregates.length){let c,h=e.aggregates,m=o,b={};t.aggregate&&(m=t.aggregate);for(let v=0;v<h.length;v++)c=Ze.aggregates[h[v].type],c&&(b[h[v].field+" - "+h[v].type]=c(m,h[v].field));i.aggregates=b}let l=Array.isArray(t.result)&&t.result.length&&!f(t.result[0].key);if(e&&e.groups&&e.groups.length&&!l){let h=e.groups;for(let c=0;c<h.length;c++){let m=null;f(s)||(s=Ze.group(s,h[c]));let b=Ut.filterQueries(r.queries,"onGroup")[c].e;o=Ze.group(o,h[c],e.aggregates,m,s,b.comparer)}i.result=o}return i}getQueryRequest(e){let t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=Ut.filterQueries(e.queries,"onSortBy"),t.groups=Ut.filterQueries(e.queries,"onGroup"),t.filters=Ut.filterQueries(e.queries,"onWhere"),t.searches=Ut.filterQueries(e.queries,"onSearch"),t.aggregates=Ut.filterQueries(e.queries,"onAggregates"),t}addParams(e){let t=e.reqParams;e.params.length&&(t.params={});for(let i of e.params){if(t[i.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[i.key]=i.value,i.fn&&(t[i.key]=i.fn.call(e.query,i.key,e.query,e.dm)),t.params[i.key]=t[i.key]}}}class iC extends sg{constructor(e){super(),this.options=Ae({},this.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),Ae(this.options,e||{})}getModuleName(){return"ODataAdaptor"}onPredicate(e,t,i){let r,o,s="",a=e.value,l=typeof a,h=e.field?iC.getField(e.field):null;if(a instanceof Date&&(a="datetime'"+Ze.parse.replacer(a)+"'"),"string"===l&&(a=a.replace(/'/g,"''"),e.ignoreCase&&(a=a.toLowerCase()),a=encodeURIComponent(a),a="'"+a+"'",i&&(h="cast("+h+", 'Edm.String')"),Ze.parse.isGuid(a)&&(o="guid"),e.ignoreCase&&(o||(h="tolower("+h+")"),a=a.toLowerCase())),r=Ze.odBiOperator[e.operator],r)return s+=h,s+=r,o&&(s+=o),s+a;if(r=f(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?Ze.odUniOperator[e.operator]:Ze.odv4UniOperator[e.operator],"substringof"===r){let c=a;a=h,h=c}return s+=r+"(",s+=h+",",o&&(s+=o),s+=a+")",s}addParams(e){super.addParams(e),delete e.reqParams.params}onComplexPredicate(e,t,i){let s=[];for(let r=0;r<e.predicates.length;r++)s.push("("+this.onEachWhere(e.predicates[r],t,i)+")");return s.join(" "+e.condition+" ")}onEachWhere(e,t,i){return e.isComplex?this.onComplexPredicate(e,t,i):this.onPredicate(e,t,i)}onWhere(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")}onEachSearch(e){e.fields&&0===e.fields.length&&Ze.throwError("Query() - Search : oData search requires list of field names to search");let t=this.pvt.search||[];for(let i=0;i<e.fields.length;i++)t.push(new cs(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.search=t}onSearch(e){return this.pvt.search=cs.or(this.pvt.search),""}onEachSort(e){let t=[];if(e.name instanceof Array)for(let i=0;i<e.name.length;i++)t.push(iC.getField(e.name[i])+("descending"===e.direction?" desc":""));else t.push(iC.getField(e.name)+("descending"===e.direction?" desc":""));return t.join(",")}onSortBy(e){return e.reverse().join(",")}onGroup(e){return this.pvt.groups=e,[]}onSelect(e){for(let t=0;t<e.length;t++)e[t]=iC.getField(e[t]);return e.join(",")}onAggregates(e){return this.pvt.aggregates=e,""}onCount(e){return!0===e?"allpages":""}beforeSend(e,t,i){Ze.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()?(t.setRequestHeader("Accept",this.options.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")):t.setRequestHeader("Accept",this.options.accept),t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0")}processResponse(e,t,i,s,r,o){let a="odata.metadata";if(r&&"GET"===r.type&&!this.rootUrl&&e[a]){let E=e[a].split("/$metadata#");this.rootUrl=E[0],this.resourceTableName=E[1]}if(!f(e.d)){let E=i&&i.isCountRequired?e.d.results:e.d,D="__metadata";if(!f(E))for(let L=0;L<E.length;L++)f(E[L][D])||delete E[L][D]}let h=r&&r.pvtData,c=this.processBatchResponse(e,i,s,r,o);if(c)return c;let m=s&&r.getResponseHeader("DataServiceVersion"),b=null,v=m&&parseInt(m,10)||2;if(i&&i.isCountRequired){let E="__count";(e[E]||e["odata.count"])&&(b=e[E]||e["odata.count"]),e.d&&(e=e.d),(e[E]||e["odata.count"])&&(b=e[E]||e["odata.count"])}3===v&&e.value&&(e=e.value),e.d&&(e=e.d),v<3&&e.results&&(e=e.results);let w={};return w.count=b,w.result=e,this.getAggregateResult(h,e,w,null,i),Ze.isNull(b)?w.result:{result:w.result,count:w.count,aggregates:w.aggregates}}convertToQueryString(e,t,i){let s=[],r="table",o=e[r]||"";delete e[r],i.dataSource.requiresFormat&&(e.$format="json");let l=Object.keys(e);for(let h of l)s.push(h+"="+e[h]);return s=s.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!o?s:s.length?o+"?"+s:o||""}localTimeReplacer(e,t){for(let i of f(t)?[]:Object.keys(t))t[i]instanceof Date&&(t[i]=Ze.dateParse.toLocalTime(t[i]));return t}insert(e,t,i){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}}remove(e,t,i,s){let r;return r="string"!=typeof i||Ze.parse.isGuid(i)?`(${i})`:`('${i}')`,{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+r}}update(e,t,i,s,r,o){let a;return"PATCH"===this.options.updateType&&!f(o)&&(i=this.compareAndRemove(i,o,t)),a="string"!=typeof i[t]||Ze.parse.isGuid(i[t])?`(${i[t]})`:`('${i[t]}')`,{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+a,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}}batchRequest(e,t,i,s,r){let o=i.guid=Ze.getGuid(this.options.batchPre),a=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;let l={url:i.url,key:i.key,cid:1,cSet:Ze.getGuid(this.options.changeSet)},h="--"+o+"\n";return h+="Content-Type: multipart/mixed; boundary="+l.cSet.replace("--","")+"\n",this.pvt.changeSet=0,h+=this.generateInsertRequest(t.addedRecords,l,e),h+=this.generateUpdateRequest(t.changedRecords,l,e,r?r.changedRecords:[]),h+=this.generateDeleteRequest(t.deletedRecords,l,e),h+=l.cSet+"--\n",h+="--"+o+"--",{type:"POST",url:a,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+o,data:h}}generateDeleteRequest(e,t,i){if(!e)return"";let s="";return s=this.generateBodyContent(e,t,{method:"DELETE ",url:(o,a,l)=>{let h=Ze.getObject(l,o[a]);return"number"==typeof h||Ze.parse.isGuid(h)?"("+h+")":h instanceof Date?"("+o[a][l].toJSON()+")":`('${h}')`},data:(o,a)=>""},i),s+"\n"}generateInsertRequest(e,t,i){if(!e)return"";let s="";return s=this.generateBodyContent(e,t,{method:"POST ",url:(o,a,l)=>"",data:(o,a)=>JSON.stringify(o[a])+"\n\n"},i),s}generateUpdateRequest(e,t,i,s){if(!e)return"";let r="";return e.forEach(a=>a=this.compareAndRemove(a,s.filter(l=>Ze.getObject(t.key,l)===Ze.getObject(t.key,a))[0],t.key)),r=this.generateBodyContent(e,t,{method:this.options.updateType+" ",url:(a,l,h)=>"number"==typeof a[l][h]||Ze.parse.isGuid(a[l][h])?"("+a[l][h]+")":a[l][h]instanceof Date?"("+a[l][h].toJSON()+")":`('${a[l][h]}')`,data:(a,l)=>JSON.stringify(a[l])+"\n\n"},i),r}static getField(e){return e.replace(/\./g,"/")}generateBodyContent(e,t,i,s){let r="";for(let o=0;o<e.length;o++)r+="\n"+t.cSet+"\n",r+=this.options.changeSetContent+"\n\n",r+=i.method,"POST "===i.method?r+=(s.dataSource.insertUrl||s.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n":"PUT "===i.method||"PATCH "===i.method?r+=(s.dataSource.updateUrl||s.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n":"DELETE "===i.method&&(r+=(s.dataSource.removeUrl||s.dataSource.crudUrl||t.url)+i.url(e,o,t.key)+" HTTP/1.1\n"),r+="Accept: "+this.options.accept+"\n",r+="Content-Id: "+this.pvt.changeSet+++"\n",r+=this.options.batchChangeSetContentType+"\n",f(e[o]["@odata.etag"])?r+="\n":(r+="If-Match: "+e[o]["@odata.etag"]+"\n\n",delete e[o]["@odata.etag"]),r+=i.data(e,o);return r}processBatchResponse(e,t,i,s,r){if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return t.isCountRequired?{result:[],count:0}:[];if(s&&this.options.batch&&Ze.endsWith(s.url,this.options.batch)&&"post"===s.type.toLowerCase()){let a,l,o=i.getResponseHeader("Content-Type"),h=e+"";if(o=o.substring(o.indexOf("=batchresponse")+1),h=h.split(o),h.length<2)return{};h=h[1];let c=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(h);c&&h.replace(c[0],""),h=h.split(c?c[1]:"");for(let b=h.length;b>-1;b--)!/\bContent-ID:/i.test(h[b])||!/\bHTTP.+201/.test(h[b])||(a=parseInt(/\bContent-ID: (\d+)/i.exec(h[b])[1],10),r.addedRecords[a]&&(l=Ze.parse.parseJson(/^\{.+\}/m.exec(h[b])[0]),Ae({},r.addedRecords[a],this.processResponse(l))));return r}return null}compareAndRemove(e,t,i){return f(t)||Object.keys(e).forEach(s=>{s!==i&&"@odata.etag"!==s&&(Ze.isPlainObject(e[s])?(this.compareAndRemove(e[s],t[s]),0===Object.keys(e[s]).filter(o=>"@odata.etag"!==o).length&&delete e[s]):(e[s]===t[s]||e[s]&&t[s]&&e[s].valueOf()===t[s].valueOf())&&delete e[s])}),e}}class qDe extends b9{constructor(){super(),zt("beforeSend",sg.prototype.beforeSend,this)}insert(e,t,i,s,r){return this.pvt.position=r,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(Ae({},{value:t,table:i,action:"insert"},Ze.getAddParams(this,e,s)))}}remove(e,t,i,s,r){return super.remove(e,t,i),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(Ae({},{key:i,keyColumn:t,table:s,action:"remove"},Ze.getAddParams(this,e,r)))}}update(e,t,i,s,r){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(Ae({},{value:i,action:"update",keyColumn:t,key:i[t],table:s},Ze.getAddParams(this,e,r)))}}processResponse(e,t,i,s,r,o,a){let l;if(e="batch"===(r?JSON.parse(r.data):e).action?Ze.parse.parseJson(e):e,"add"===this.updateType&&super.insert(t,e,null,null,this.pvt.position),"update"===this.updateType&&super.update(t,this.updateKey,e),this.updateType=void 0,e.added)for(l=0;l<e.added.length;l++)super.insert(t,e.added[l]);if(e.changed)for(l=0;l<e.changed.length;l++)super.update(t,a.key,e.changed[l]);if(e.deleted)for(l=0;l<e.deleted.length;l++)super.remove(t,a.key,e.deleted[l]);return e}batchRequest(e,t,i,s,r){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(Ae({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i.url,key:i.key},Ze.getAddParams(this,e,s)))}}addParams(e){(new sg).addParams(e)}}class WDe extends sg{constructor(e){super(),this.options=Ae({},this.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),Ae(this.options,e||{})}getModuleName(){return"CustomDataAdaptor"}}class GDe extends sg{constructor(e,t,i){super(),this.isCrudAction=!1,this.isInsertAction=!1,f(e)||(this.cacheAdaptor=e),this.pageSize=i,this.guidId=Ze.getGuid("cacheAdaptor"),window.localStorage.setItem(this.guidId,JSON.stringify({keys:[],results:[]}));let r=this.guidId;f(t)||setInterval(()=>{let o;o=Ze.parse.parseJson(window.localStorage.getItem(r));let a=[];for(let l=0;l<o.results.length;l++){let h=+new Date,c=+new Date(o.results[l].timeStamp);o.results[l].timeStamp=h-c,h-c>t&&a.push(l)}for(let l=0;l<a.length;l++)o.results.splice(a[l],1),o.keys.splice(a[l],1);window.localStorage.removeItem(r),window.localStorage.setItem(r,JSON.stringify(o))},t)}generateKey(e,t){let i=this.getQueryRequest(t),s=Ut.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),r=e,o="onPage";o in s&&(r+=s[o].pageIndex),i.sorts.forEach(a=>{r+=a.e.direction+a.e.fieldName}),i.groups.forEach(a=>{r+=a.e.fieldName}),i.searches.forEach(a=>{r+=a.e.searchKey});for(let a=0;a<i.filters.length;a++){let l=i.filters[a];if(l.e.isComplex){let h=t.clone();h.queries=[];for(let c=0;c<l.e.predicates.length;c++)h.queries.push({fn:"onWhere",e:l.e.predicates[c],filter:t.queries.filter});r+=l.e.condition+this.generateKey(e,h)}else r+=l.e.field+l.e.operator+l.e.value}return r}processQuery(e,t,i){let r,s=this.generateKey(e.dataSource.url,t);r=Ze.parse.parseJson(window.localStorage.getItem(this.guidId));let o=r?r.results[r.keys.indexOf(s)]:null;return null==o||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):o}processResponse(e,t,i,s,r,o){if(this.isInsertAction||r&&this.cacheAdaptor.options.batch&&Ze.endsWith(r.url,this.cacheAdaptor.options.batch)&&"post"===r.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,s,r,o);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));let a=i?this.generateKey(t.dataSource.url,i):t.dataSource.url,l={};l=Ze.parse.parseJson(window.localStorage.getItem(this.guidId));let h=l.keys.indexOf(a);for(-1!==h&&(l.results.splice(h,1),l.keys.splice(h,1)),l.results[l.keys.push(a)-1]={keys:a,result:e.result,timeStamp:new Date,count:e.count};l.results.length>this.pageSize;)l.results.splice(0,1),l.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(l)),e}beforeSend(e,t,i){!f(this.cacheAdaptor.options.batch)&&Ze.endsWith(i.url,this.cacheAdaptor.options.batch)&&"post"===i.type.toLowerCase()&&t.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.setRequestHeader("Accept",this.cacheAdaptor.options.accept)}update(e,t,i,s){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,i,s)}insert(e,t,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,i)}remove(e,t,i,s){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,i,s)}batchRequest(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}}class ut{constructor(e,t,i){let s;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],!e&&!this.dataSource&&(e=[]),i=i||e.adaptor,e&&!1===e.timeZoneHandling&&(this.timeZoneHandling=e.timeZoneHandling),e instanceof Array?s={json:e,offline:!0}:"object"==typeof e?(e.json||(e.json=[]),s={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof qDe||e.adaptor instanceof WDe||e.url),requiresFormat:e.requiresFormat}):Ze.throwError("DataManager: Invalid arguments"),void 0===s.requiresFormat&&!Ze.isCors()&&(s.requiresFormat=!!f(s.crossDomain)||s.crossDomain),void 0===s.dataType&&(s.dataType="json"),this.dataSource=s,this.defaultQuery=t,s.url&&s.offline&&!s.json.length?(this.isDataAvailable=!1,this.adaptor=i||new iC,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new Ut),this.ready.then(r=>{this.dataSource.offline=!0,this.isDataAvailable=!0,s.json=r.result,this.adaptor=new b9})):this.adaptor=s.offline?new b9:new iC,!s.jsonp&&this.adaptor instanceof iC&&(s.jsonp="callback"),this.adaptor=i||this.adaptor,s.enableCaching&&(this.adaptor=new GDe(this.adaptor,s.timeTillExpiration,s.cachingPageSize)),this}setDefaultQuery(e){return this.defaultQuery=e,this}executeLocal(e){!this.defaultQuery&&!(e instanceof Ut)&&Ze.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||Ze.throwError("DataManager - executeLocal() : Json data is required to execute");let t=this.adaptor.processQuery(this,e=e||this.defaultQuery);if(e.subQuery){let i=e.subQuery.fromTable,s=e.subQuery.lookups,r=e.isCountRequired?t.result:t;s&&s instanceof Array&&Ze.buildHierarchy(e.subQuery.fKey,i,r,s,e.subQuery.key);for(let o=0;o<r.length;o++)r[o][i]instanceof Array&&(r[o]=Ae({},{},r[o]),r[o][i]=this.adaptor.processResponse(e.subQuery.using(new ut(r[o][i].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(t,this,e)}executeQuery(e,t,i,s){let r="makeRequest";"function"==typeof e&&(s=i,i=t,t=e,e=null),e||(e=this.defaultQuery),e instanceof Ut||Ze.throwError("DataManager - executeQuery() : A query is required to execute");let o=new Ru,a={query:e};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!f(this.adaptor[r])||this.isCustomDataAdaptor(this.adaptor)){let l=this.adaptor.processQuery(this,e);f(this.adaptor[r])?!f(l.url)||this.isCustomDataAdaptor(this.adaptor)?this.makeRequest(l,o,a,e):(a=ut.getDeferedArgs(e,l,a),o.resolve(a)):this.adaptor[r](l,o,a,e)}else ut.nextTick(()=>{let l=this.executeLocal(e);a=ut.getDeferedArgs(e,l,a),o.resolve(a)});return(t||i)&&o.promise.then(t,i),s&&o.promise.then(s,s),o.promise}static getDeferedArgs(e,t,i){return e.isCountRequired?(i.result=t.result,i.count=t.count,i.aggregates=t.aggregates):i.result=t,i}static nextTick(e){(window.setImmediate||window.setTimeout)(e,0)}extendRequest(e,t,i){return Ae({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:i},e)}makeRequest(e,t,i,s){let r=!!s.subQuerySelector,o=m=>{i.error=m,t.reject(i)},a=(m,b,v,w,E,D,L)=>{i.xhr=v,i.count=b?parseInt(b.toString(),10):0,i.result=m,i.request=w,i.aggregates=D,i.actual=E,i.virtualSelectRecords=L,t.resolve(i)},l=(m,b)=>{let v=new Ru,w={parent:i};s.subQuery.isChild=!0;let E=this.adaptor.processQuery(this,s.subQuery,m?this.adaptor.processResponse(m):b),D=this.makeRequest(E,v,w,s.subQuery);return r||v.then(L=>{m&&(Ze.buildHierarchy(s.subQuery.fKey,s.subQuery.fromTable,m,L,s.subQuery.key),a(m,L.count,L.xhr))},o),D},c=this.extendRequest(e,(m,b)=>{if(this.isGraphQLAdaptor(this.adaptor)&&!f(m.errors))return o(m.errors);this.isCustomDataAdaptor(this.adaptor)&&(b=Ae({},this.ajaxReqOption,b)),-1===b.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&this.dateParse&&(m=Ze.parse.parseJson(m));let v=this.adaptor.processResponse(m,this,s,b.httpRequest,b),w=0,E=null,L=m.virtualSelectRecords;s.isCountRequired&&(w=v.count,E=v.aggregates,v=v.result),s.subQuery?r||l(v,b):a(v,w,b.httpRequest,b.type,m,E,L)},o);if(this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=c,this.adaptor.options.getData({data:c.data,onSuccess:c.onSuccess,onFailure:c.onFailure});else{let m=new qb(c);m.beforeSend=()=>{this.beforeSend(m.httpRequest,m)},c=m.send(),c.catch(b=>!0),this.requests.push(m)}if(r){let m,b=s.subQuerySelector.call(this,{query:s.subQuery,parent:s});b&&b.length?(m=Promise.all([c,l(null,b)]),m.then((...v)=>{let w=v[0],E=this.adaptor.processResponse(w[0],this,s,this.requests[0].httpRequest,this.requests[0]),D=0;s.isCountRequired&&(D=E.count,E=E.result);let L=this.adaptor.processResponse(w[1],this,s.subQuery,this.requests[1].httpRequest,this.requests[1]);D=0,s.subQuery.isCountRequired&&(D=L.count,L=L.result),Ze.buildHierarchy(s.subQuery.fKey,s.subQuery.fromTable,E,L,s.subQuery.key),r=!1,a(E,D,this.requests[0].httpRequest)})):r=!1}return c}beforeSend(e,t){this.adaptor.beforeSend(this,e,t);let s,i=this.dataSource.headers;for(let r=0;i&&r<i.length;r++){s=[];let o=Object.keys(i[r]);for(let a of o)s.push(a),e.setRequestHeader(a,i[r][a])}}saveChanges(e,t,i,s,r){i instanceof Ut&&(s=i,i=null);let o={url:i,key:t||this.dataSource.key},a=this.adaptor.batchRequest(this,e,o,s||new Ut,r),l="doAjaxRequest";if(this.dataSource.offline)return a;if(f(this.adaptor[l])){if(this.isCustomDataAdaptor(this.adaptor))return this.doAjaxRequest(a,this.adaptor.options.batchUpdate);{let h=new Ru,c=new qb(a);return c.beforeSend=()=>{this.beforeSend(c.httpRequest,c)},c.onSuccess=(m,b)=>{this.isGraphQLAdaptor(this.adaptor)&&(f(m.errors)||c.onFailure(JSON.stringify(m.errors))),h.resolve(this.adaptor.processResponse(m,this,null,b.httpRequest,b,e,o))},c.onFailure=m=>{h.reject([{error:m}])},c.send().catch(m=>!0),h.promise}}return this.adaptor[l](a)}insert(e,t,i,s){t instanceof Ut&&(i=t,t=null);let r=this.adaptor.insert(this,e,t,i,s),o="doAjaxRequest";return this.dataSource.offline?r:f(this.adaptor[o])?this.doAjaxRequest(r,this.adaptor.options.addRecord):this.adaptor[o](r)}remove(e,t,i,s){"object"==typeof t&&(t=Ze.getObject(e,t)),i instanceof Ut&&(s=i,i=null);let r=this.adaptor.remove(this,e,t,i,s),o="doAjaxRequest";return this.dataSource.offline?r:f(this.adaptor[o])?this.doAjaxRequest(r,this.adaptor.options.deleteRecord):this.adaptor[o](r)}update(e,t,i,s,r){i instanceof Ut&&(s=i,i=null);let o=this.adaptor.update(this,e,t,i,s,r),a="doAjaxRequest";return this.dataSource.offline?o:f(this.adaptor[a])?this.doAjaxRequest(o,this.adaptor.options.updateRecord):this.adaptor[a](o)}isCustomDataAdaptor(e){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()}isGraphQLAdaptor(e){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()}successFunc(e,t){if(this.isGraphQLAdaptor(this.adaptor)){let i=JSON.parse(e);f(i.errors)||this.failureFunc(JSON.stringify(i.errors))}this.isCustomDataAdaptor(this.adaptor)&&(t=Ae({},this.ajaxReqOption,t));try{Ze.parse.parseJson(e)}catch(i){e=[]}e=this.adaptor.processResponse(Ze.parse.parseJson(e),this,null,t.httpRequest,t),this.ajaxDeffered.resolve(e)}failureFunc(e){this.ajaxDeffered.reject([{error:e}])}doAjaxRequest(e,t){if(e=Ae({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e),this.ajaxDeffered=new Ru,this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=e,t.call(this,{data:e.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{let i=new qb(e);i.beforeSend=()=>{this.beforeSend(i.httpRequest,i)},i.onSuccess=this.successFunc.bind(this),i.onFailure=this.failureFunc.bind(this),i.send().catch(s=>!0)}return this.ajaxDeffered.promise}}class Ru{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}let Ki={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};var Js;function wO(n,e){const t={};if(f(n)||"string"==typeof n||"number"==typeof n||!f(n.isHeader))return n;for(const i of Object.keys(e)){const s=e[i],r=f(s)||"string"!=typeof s?void 0:U(s,n);f(r)||(t[s]=r)}return t}function qz(n){if(n)try{return document.querySelector(n)?ji(document.querySelector(n).innerHTML.trim()):ji(n)}catch(e){return ji(n)}}!function(n){n.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};const e={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},t={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:n.defaultMappedFields,ariaAttributes:e,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function s(Le,nt,We,xe,Me){return Ye(Le,r(Le,nt,We,xe,Me),null,xe)}function r(Le,nt,We,xe,Me){const ue=[],ae=Ae({},t,xe);Ki=Q(ae.moduleName);const ge=V();for(let Ve=0;Ve<nt.length;Ve++){if(f(nt[Ve]))continue;let yt;ae.itemCreating&&"function"==typeof ae.itemCreating&&ae.itemCreating({dataSource:nt,curData:nt[Ve],text:nt[Ve],options:ae}),yt=We?ie(Le,nt[Ve],void 0,null,null,[],null,ge,Ve,xe):ke(Le,nt[Ve],void 0,null,null,xe,Me),ae.itemCreated&&"function"==typeof ae.itemCreated&&ae.itemCreated({dataSource:nt,curData:nt[Ve],text:nt[Ve],item:yt,options:ae}),ue.push(yt)}return ue}function o(Le,nt,We,xe,Me,ue){const ae=Ae({},t,We);Ki=Q(ae.moduleName);const ge=!ue||"listview"!==ue.getModuleName()&&"multiselect"!==ue.getModuleName()?Ae({},n.defaultMappedFields,ae.fields):ae.fields,Ve=Ae({},e,ae.ariaAttributes);let yt,bi=[];xe&&(Ve.level=xe);const ci=[];let ss,Ei;nt&&nt.length&&!f(w(nt).item)&&!w(nt).item.hasOwnProperty(ge.id)&&(yt=V());for(let ts=0;ts<nt.length;ts++){let si=wO(nt[ts],ge);if(f(nt[ts]))continue;ae.itemCreating&&"function"==typeof ae.itemCreating&&ae.itemCreating({dataSource:nt,curData:nt[ts],text:si[ge.text],options:ae,fields:ge});const ce=nt[ts];ae.itemCreating&&"function"==typeof ae.itemCreating&&(si=wO(nt[ts],ge)),si.hasOwnProperty(ge.id)&&!f(si[ge.id])&&(yt=si[ge.id]);const Ee=[];if(ae.showCheckBox&&(ae.itemNavigable&&(si[ge.url]||si[ge.urlAttributes])?bi.push(Le("input",{className:Ki.check,attrs:{type:"checkbox"}})):Ee.push(Le("input",{className:Ki.check,attrs:{type:"checkbox"}}))),!0===Me)ae.showIcon&&si.hasOwnProperty(ge.iconCss)&&!f(si[ge.iconCss])&&Ee.push(Le("span",{className:Ki.icon+" "+si[ge.iconCss]})),ss=ie(Le,ce,si,ge,ae.itemClass,Ee,!(!ce.hasOwnProperty("isHeader")||!ce.isHeader),yt,ts,We),Ei=ss.querySelector("."+Ki.anchorWrap),ae.itemNavigable&&bi.length&&Qr(bi,ss.firstElementChild);else{if(ss=ke(Le,ce,si,ge,ae.itemClass,We,ue),ss.classList.add(Ki.level+"-"+Ve.level),ss.setAttribute("aria-level",Ve.level.toString()),Ei=ss.querySelector("."+Ki.anchorWrap),si.hasOwnProperty(ge.tooltip)&&ss.setAttribute("title",si[ge.tooltip]),si.hasOwnProperty(ge.htmlAttributes)&&si[ge.htmlAttributes]&&E(ss,si[ge.htmlAttributes]),si.hasOwnProperty(ge.enabled)&&!1===si[ge.enabled]&&ss.classList.add(Ki.disabled),si.hasOwnProperty(ge.isVisible)&&!1===si[ge.isVisible]&&(ss.style.display="none"),si.hasOwnProperty(ge.imageUrl)&&!f(si[ge.imageUrl])&&!ae.template){const wt={src:si[ge.imageUrl]};Ph(wt,si[ge.imageAttributes]);const Qt=Le("img",{className:Ki.image,attrs:wt});Ei?Ei.insertAdjacentElement("afterbegin",Qt):Qr([Qt],ss.firstElementChild)}if(ae.showIcon&&si.hasOwnProperty(ge.iconCss)&&!f(si[ge.iconCss])&&!ae.template){const wt=Le("div",{className:Ki.icon+" "+si[ge.iconCss]});Ei?Ei.insertAdjacentElement("afterbegin",wt):Qr([wt],ss.firstElementChild)}Ee.length&&Qr(Ee,ss.firstElementChild),ae.itemNavigable&&bi.length&&Qr(bi,ss.firstElementChild),$(Le,si,ge,0,ae,ss,Ve.level)}Ei&&z([ss],[Ki.navigable]),ae.itemCreated&&"function"==typeof ae.itemCreated&&ae.itemCreated({dataSource:nt,curData:nt[ts],text:si[ge.text],item:ss,options:ae,fields:ge}),bi=[],ci.push(ss)}return ci}function a(Le,nt,We,xe,Me,ue){const ae=Ae({},t,We);return Ye(Le,o(Le,nt,We,xe,Me,ue),ae.listClass,We)}function h(Le,nt){if(nt&&Le){let We=nt;return We=Array.prototype.slice.call(nt),We.indexOf(Le)}}function m(Le,nt,We=new Ut){if("Ascending"===Le)We.sortBy(nt,"ascending",!0);else if("Descending"===Le)We.sortBy(nt,"descending",!0);else for(let xe=0;xe<We.queries.length;xe++)"onSortBy"===We.queries[xe].fn&&We.queries.splice(xe,1);return We}function b(Le,nt){return new ut(Le).executeLocal(nt)}function w(Le){for(let We=0;We<Le.length;We++)if(!f(Le[We]))return{typeof:typeof Le[We],item:Le[We]};return{typeof:null,item:null}}function E(Le,nt){const We={};Ph(We,nt),We.class&&(z([Le],We.class.split(" ")),delete We.class),Rt(Le,We)}function D(Le){const nt={},We=Le.attributes;for(let xe=0;xe<We.length;xe++)nt[We[xe].nodeName]=We[xe].nodeValue;return nt}function V(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function $(Le,nt,We,xe,Me,ue,ae){const ge=nt[We.child]||[];let Ve=nt[We.hasChildren];if(ge.length&&(Ve=!0,ue.classList.add(Ki.hasChild),Me.processSubChild)){const yt=a(Le,ge,Me,++ae);ue.appendChild(yt)}Me.expandCollapse&&Ve&&!Me.template&&(ue.firstElementChild.classList.add(Ki.iconWrapper),("Left"===Me.expandIconPosition?Qr:mi)([Le("div",{className:"e-icons "+Me.expandIconClass})],ue.querySelector("."+Ki.textContent)))}function ie(Le,nt,We,xe,Me,ue,ae,ge,Ve,yt){const bi=Ae({},t,yt),ci=Ae({},e,bi.ariaAttributes);let ts,si,ss=nt,Ei=nt;"string"!=typeof nt&&"number"!=typeof nt&&"boolean"!=typeof nt&&(ts=nt,ss="boolean"==typeof We[xe.text]||"number"==typeof We[xe.text]?We[xe.text]:We[xe.text]||"",Ei=We[xe.value]),si=f(ts)||f(We[xe.id])||""===We[xe.id]?ge+"-"+Ve:ge;const ce=Le("li",{className:(!0===ae?Ki.group:Ki.li)+" "+(f(Me)?"":Me),id:si,attrs:""!==ci.groupItemRole&&""!==ci.itemRole?{role:!0===ae?ci.groupItemRole:ci.itemRole}:{}});return ts&&We.hasOwnProperty(xe.enabled)&&"false"===We[xe.enabled].toString()&&ce.classList.add(Ki.disabled),ae?ce.innerText=ss:(ce.setAttribute("data-value",f(Ei)?"null":Ei),ce.setAttribute("role","option"),ts&&We.hasOwnProperty(xe.htmlAttributes)&&We[xe.htmlAttributes]&&E(ce,We[xe.htmlAttributes]),ue.length&&!bi.itemNavigable&&mi(ue,ce),ts&&(We[xe.url]||We[xe.urlAttributes]&&We[xe.urlAttributes].href)?ce.appendChild(le(Le,ts,xe,ss,ue,bi.itemNavigable)):(ue.length&&bi.itemNavigable&&mi(ue,ce),ce.appendChild(document.createTextNode(ss)))),ce}function Q(Le){return{li:`e-${Le}-item`,ul:`e-${Le}-parent e-ul`,group:`e-${Le}-group-item`,icon:`e-${Le}-icon`,text:`e-${Le}-text`,check:`e-${Le}-check`,checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:`e-${Le}-url`,collapsible:"e-icon-collapsible",disabled:"e-disabled",image:`e-${Le}-img`,iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function le(Le,nt,We,xe,Me,ue){const ae=wO(nt,We),ge={href:ae[We.url]};let Ve;if(ae.hasOwnProperty(We.urlAttributes)&&ae[We.urlAttributes]&&(Ph(ge,ae[We.urlAttributes]),ge.href=ae[We.url]?ae[We.url]:ae[We.urlAttributes].href),ue){Ve=Le("a",{className:Ki.text+" "+Ki.url});const yt=Le("div",{className:Ki.anchorWrap});Me&&Me.length&&mi(Me,yt),yt.appendChild(document.createTextNode(xe)),mi([yt],Ve)}else Ve=Le("a",{className:Ki.text+" "+Ki.url,innerHTML:xe});return E(Ve,ge),Ve}function ke(Le,nt,We,xe,Me,ue,ae){const ge=Ae({},t,ue),Ve=Ae({},e,ge.ariaAttributes);let bi,ci,ss,yt=nt;"string"!=typeof nt&&"number"!=typeof nt&&(ss=nt,yt=We[xe.text]||"",bi=f(We._id)?We[xe.id]:We._id,ci=!(!nt.hasOwnProperty("isHeader")||!nt.isHeader)),ue&&ue.enableHtmlSanitizer&&(yt=yt);const Ei=Le("li",{className:(!0===ci?Ki.group:Ki.li)+" "+(f(Me)?"":Me),attrs:""!==Ve.groupItemRole&&""!==Ve.itemRole?{role:!0===ci?Ve.groupItemRole:Ve.itemRole}:{}});if(f(bi)?Ei.setAttribute("data-uid",V()):Ei.setAttribute("data-uid",bi),ci&&ue&&ue.groupTemplate){const ts=qz(ue.groupTemplate);if(ae&&"listview"!==ae.getModuleName()){const si=ts(nt,ae,"groupTemplate",ge.groupTemplateID,!!ge.isStringTemplate,null,Ei);si&&mi(si,Ei)}else mi(ts(nt,ae,"groupTemplate",ge.groupTemplateID,!!ge.isStringTemplate),Ei)}else if(!ci&&ue&&ue.template){const ts=qz(ue.template);if(ae&&"listview"!==ae.getModuleName()){const si=ts(nt,ae,"template",ge.templateID,!!ge.isStringTemplate,null,Ei);si&&mi(si,Ei)}else mi(ts(nt,ae,"template",ge.templateID,!!ge.isStringTemplate),Ei)}else{const ts=Le("div",{className:Ki.textContent,attrs:""!==Ve.wrapperRole?{role:Ve.wrapperRole}:{}});if(ss&&(We[xe.url]||We[xe.urlAttributes]&&We[xe.urlAttributes].href))ts.appendChild(le(Le,ss,xe,yt,null,ge.itemNavigable));else{const si=Le("span",{className:Ki.text,attrs:""!==Ve.itemText?{role:Ve.itemText}:{}});ue&&ue.enableHtmlSanitizer?si.innerText=yt:si.innerHTML=yt,ts.appendChild(si)}Ei.appendChild(ts)}return Ei}function Ye(Le,nt,We,xe){const Me=Ae({},t,xe),ue=Ae({},e,Me.ariaAttributes);Ki=Q(Me.moduleName);const ae=Le("ul",{className:Ki.ul+" "+(f(We)?"":We),attrs:""!==ue.listRole?{role:ue.listRole}:{}});return mi(nt,ae),ae}n.createList=function i(Le,nt,We,xe,Me){const ue=Ae({},t,We),ae=Ae({},e,ue.ariaAttributes),ge=w(nt).typeof;return"string"===ge||"number"===ge?s(Le,nt,xe,We,Me):a(Le,nt,We,ae.level,xe,Me)},n.createListFromArray=s,n.createListItemFromArray=r,n.createListItemFromJson=o,n.createListFromJson=a,n.getSiblingLI=function l(Le,nt,We){if(Ki=Q(t.moduleName),!Le||!Le.length)return;let xe,Me;const ue=Array.prototype.slice.call(Le);for(Me=nt?h(nt,ue):!0===We?ue.length:-1,xe=ue[Me+(!0===We?-1:1)];xe&&(!Xr(xe)||xe.classList.contains(Ki.disabled));)Me+=!0===We?-1:1,xe=ue[Me];return xe},n.indexOf=h,n.groupDataSource=function c(Le,nt,We="None"){const xe=Ae({},n.defaultMappedFields,nt);let Me=(new Ut).group(xe.groupBy);Me=m(We,"key",Me);const ue=b(Le,Me);Le=[];for(let ae=0;ae<ue.length;ae++){const ge=ue[ae].items,Ve={},yt="isHeader";Ve[xe.text]=ue[ae].key,Ve[yt]=!0;let bi=xe.text;"id"===bi&&(bi="text",Ve[bi]=ue[ae].key),Ve._id="group-list-item-"+(ue[ae].key?ue[ae].key.toString().trim():"undefined"),Ve.items=ge,Le.push(Ve);for(let ci=0;ci<ge.length;ci++)Le.push(ge[ci])}return Le},n.addSorting=m,n.getDataSource=b,n.createJsonFromElement=function v(Le,nt){const We=Ae({},t,nt),xe=Ae({},n.defaultMappedFields,We.fields),Me=Le.cloneNode(!0),ue=[];Me.classList.add("json-parent");const ae=Me.querySelectorAll(".json-parent>li");Me.classList.remove("json-parent");for(let ge=0;ge<ae.length;ge++){const Ve=ae[ge],yt=Ve.querySelector("a"),bi=Ve.querySelector("ul"),ci={},ss=yt?yt.childNodes:Ve.childNodes,Ei=Object.keys(ss);for(let si=0;si<ss.length;si++)ss[Number(Ei[si])].hasChildNodes()||(ci[xe.text]=ss[Number(Ei[si])].textContent);let ts=D(Ve);ts.id?(ci[xe.id]=ts.id,delete ts.id):ci[xe.id]=V(),Object.keys(ts).length&&(ci[xe.htmlAttributes]=ts),yt&&(ts=D(yt),Object.keys(ts).length&&(ci[xe.urlAttributes]=ts)),bi&&(ci[xe.child]=v(bi,nt)),ue.push(ci)}return ue},n.renderContentTemplate=function L(Le,nt,We,xe,Me,ue){Ki=Q(t.moduleName);const ae=Le("ul",{className:Ki.ul,attrs:{role:"presentation"}}),ge=Ae({},t,Me),Ve=Ae({},n.defaultMappedFields,xe),yt=qz(nt),bi=[];let ci;const ss=V();for(let Ei=0;Ei<We.length;Ei++){let ts=wO(We[Ei],Ve);const si=We[Ei],ce=si.isHeader;ci="string"==typeof We[Ei]||"number"==typeof We[Ei]?si:ts[Ve.value],ge.itemCreating&&"function"==typeof ge.itemCreating&&ge.itemCreating({dataSource:We,curData:si,text:ci,options:ge,fields:Ve}),ge.itemCreating&&"function"==typeof ge.itemCreating&&(ts=wO(We[Ei],Ve),ci="string"==typeof We[Ei]||"number"==typeof We[Ei]?si:ts[Ve.value]);const Ee=Le("li",{id:ss+"-"+Ei,className:ce?Ki.group:Ki.li,attrs:{role:"presentation"}});if(ce)Ee.innerText="string"==typeof We[Ei]||"number"==typeof We[Ei]?si:ts[Ve.text];else{const wt=ce?ge.groupTemplateID:ge.templateID;if(ce)if(ue&&"listview"!=ue.getModuleName()){const Qt=yt(si,ue,"headerTemplate",wt,!!ge.isStringTemplate,null,Ee);Qt&&mi(Qt,Ee)}else mi(yt(si,ue,"headerTemplate",wt,!!ge.isStringTemplate),Ee);else if(ue&&"listview"!==ue.getModuleName()){const Qt=yt(si,ue,"template",wt,!!ge.isStringTemplate,null,Ee);Qt&&mi(Qt,Ee)}else mi(yt(si,ue,"template",wt,!!ge.isStringTemplate),Ee);Ee.setAttribute("data-value",f(ci)?"null":ci),Ee.setAttribute("role","option")}ge.itemCreated&&"function"==typeof ge.itemCreated&&ge.itemCreated({dataSource:We,curData:si,text:ci,item:Ee,options:ge,fields:Ve}),bi.push(Ee)}return mi(bi,ae),ae},n.renderGroupTemplate=function N(Le,nt,We,xe,Me,ue){const ae=qz(Le),ge=Ae({},n.defaultMappedFields,We),Ve=Ae({},t,Me),yt=ge.groupBy;for(const bi of xe){const ci={};if(ci[yt]=bi.textContent,bi.innerHTML="",ue&&"listview"!==ue.getModuleName()){const ss=ae(ci,ue,"groupTemplate",Ve.groupTemplateID,!!Ve.isStringTemplate,null,bi);ss&&mi(ss,bi)}else mi(ae(ci,ue,"groupTemplate",Ve.groupTemplateID,!!Ve.isStringTemplate),bi)}return xe},n.generateId=V,n.generateUL=Ye,n.generateIcon=function Nt(Le,nt,We,xe){const Me=Ae({},t,xe);return Ki=Q(Me.moduleName),("Left"===Me.expandIconPosition?Qr:mi)([Le("div",{className:"e-icons "+Me.expandIconClass+" "+(f(We)?"":We)})],nt.querySelector("."+Ki.textContent)),nt}}(Js||(Js={}));var y9,ng=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let gp=y9=class extends Rf{constructor(e,t){super(t,e),this.getHelper=i=>{let r,s=this.getSortableElement(i.sender.target);return!!this.isValidTarget(s,this)&&(this.helper?r=this.helper({sender:s,element:i.element}):(r=s.cloneNode(!0),r.style.width=`${s.offsetWidth}px`,r.style.height=`${s.offsetHeight}px`),z([r],["e-sortableclone"]),document.body.appendChild(r),r)},this.onDrag=i=>{if(!i.target)return;this.trigger("drag",{event:i.event,element:this.element,target:i.target});let s=this.getSortableInstance(i.target),r=this.getSortableElement(i.target,s);if((this.isValidTarget(r,s)||i.target.className.indexOf("e-list-group-item")>-1)&&(this.curTarget!==r||!f(s.placeHolder))&&(!s.placeHolderElement||s.placeHolderElement!==i.target)){if(i.target.className.indexOf("e-list-group-item")>-1&&(r=i.target),this.curTarget=r,this.target===r)return;let o=this.getIndex(s.placeHolderElement,s);const a=this.getPlaceHolder(r,s);let l;if(a){o=f(o)?this.getIndex(this.target):o,l=this.getIndex(r,s,i.event);const h=this.isPlaceHolderPresent(s);if(h&&o===l)return;h&&Yt(s.placeHolderElement),s.placeHolderElement=a,i.target.className.indexOf("e-list-group-item")>-1?s.element.insertBefore(s.placeHolderElement,s.element.children[l]):s.element!==this.element&&l===s.element.childElementCount?s.element.appendChild(s.placeHolderElement):s.element.insertBefore(s.placeHolderElement,s.element.children[l]),this.refreshDisabled(o,l,s)}else{o=f(o)?this.getIndex(this.target):this.getIndex(r,s)<o||!o?o:o-1,l=this.getIndex(r,s);const h=s.element!==this.element?l:o<l?l+1:l;this.updateItemClass(s),s.element.insertBefore(this.target,s.element.children[h]),this.refreshDisabled(o,l,s),this.curTarget=this.target,this.trigger("drop",{droppedElement:this.target,element:s.element,previousIndex:o,currentIndex:l,target:i.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:i.event,scope:this.scope})}}if(s=this.getSortableInstance(this.curTarget),f(r)&&i.target!==s.placeHolderElement)this.isPlaceHolderPresent(s)&&this.removePlaceHolder(s);else{let a;[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach(l=>{a=this.getSortableInstance(l),a.element&&a!==s&&this.removePlaceHolder(a)})}},this.onDragStart=i=>{this.target=this.getSortableElement(i.target);let s=!1;this.target.classList.add("e-grabbed"),this.curTarget=this.target,i.helper=document.getElementsByClassName("e-sortableclone")[0],this.trigger("beforeDragStart",{cancel:!1,element:this.element,target:this.target},o=>{o.cancel&&(s=o.cancel,this.onDragStop(i))}),!s&&this.trigger("dragStart",wi?{event:i.event,element:this.element,target:this.target,bindEvents:i.bindEvents,dragElement:i.dragElement}:{event:i.event,element:this.element,target:this.target})},this.onDragStop=i=>{let r,o,a,s=this.getSortableInstance(this.curTarget);r=this.getIndex(this.target);const l=this.isPlaceHolderPresent(s);if(l){const h=this.getIndex(s.placeHolderElement,s);this.trigger("beforeDrop",{previousIndex:r,currentIndex:h,target:i.target,droppedElement:this.target,helper:i.helper,cancel:!1,handled:!1},m=>{if(!m.cancel){if(a=m.handled,this.updateItemClass(s),m.handled){const v=this.target.cloneNode(!0);this.target.classList.remove("e-grabbed"),this.target=v}s.element.insertBefore(this.target,s.placeHolderElement);const b=this.getIndex(this.target,s);r=this===s&&r-b>1?r-1:r,this.trigger("drop",{event:i.event,element:s.element,previousIndex:r,currentIndex:b,target:i.target,helper:i.helper,droppedElement:this.target,scopeName:this.scope,handled:a})}Yt(s.placeHolderElement)})}s=this.getSortableInstance(i.target),o=s.element.childElementCount,r=this.getIndex(this.target),(s.element===i.target||!l&&this.curTarget===this.target)&&this.trigger("beforeDrop",{previousIndex:r,currentIndex:this.curTarget===this.target?r:o,target:i.target,droppedElement:this.target,helper:i.helper,cancel:!1},c=>{s.element===i.target&&!c.cancel&&(this.updateItemClass(s),s.element.appendChild(this.target),this.trigger("drop",{event:i.event,element:s.element,previousIndex:r,currentIndex:o,target:i.target,helper:i.helper,droppedElement:this.target,scopeName:this.scope}))}),this.target.classList.remove("e-grabbed"),this.target=null,this.curTarget=null,Yt(i.helper),Fh(this.element,vn).intDestroy(i.event)},this.bind()}bind(){this.element.id||(this.element.id=Tn("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()}initializeDraggable(){new vn(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:`.${this.itemClass}`,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:5})}getPlaceHolder(e,t){if(t.placeHolder){const i=t.placeHolder({element:t.element,grabbedElement:this.target,target:e});return i.classList.add("e-sortable-placeholder"),i}return null}isValidTarget(e,t){return e&&Nz(e,t.element)&&e.classList.contains(t.itemClass)&&!e.classList.contains("e-disabled")}removePlaceHolder(e){Yt(e.placeHolderElement),e.placeHolderElement=null}updateItemClass(e){this!==e&&(this.target.classList.remove(this.itemClass),this.target.classList.add(e.itemClass))}getSortableInstance(e){if(e=B(e,`.e-${this.getModuleName()}`)){const t=Fh(e,y9);return t.scope&&this.scope&&t.scope===this.scope?t:this}return this}refreshDisabled(e,t,i){if(i===this){let s;const r=e<t;let o,a=r?e:t;const l=r?t:e;for(;a<=l;)s=this.element.children[a],s.classList.contains("e-disabled")?(o=this.getIndex(s),this.element.insertBefore(s,this.element.children[r?o+2:o-1]),a=r?o+2:o+1):a++}}getIndex(e,t=this,i){let s,r;return[].slice.call(t.element.children).forEach((o,a)=>{if(o.classList.contains("e-sortable-placeholder")&&(r=!0),o!==e);else if(s=a,!f(i)){r&&(s-=1);const l=e.getBoundingClientRect();s=i.clientY<=l.bottom-(l.bottom-l.top)/2?s:s+1}}),s}getSortableElement(e,t=this){return B(e,`.${t.itemClass}`)}queryPositionInfo(e){return e.left=pageXOffset?parseFloat(e.left)-pageXOffset+"px":e.left,e.top=pageYOffset?parseFloat(e.top)-pageYOffset+"px":e.top,e}isPlaceHolderPresent(e){return e.placeHolderElement&&!!B(e.placeHolderElement,`#${e.element.id}`)}moveTo(e,t,i){Wz(this.element,e,t,i)}destroy(){"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),Fh(this.element,vn).destroy(),super.destroy()}getModuleName(){return"sortable"}onPropertyChanged(e,t){for(const i of Object.keys(e))"itemClass"===i&&[].slice.call(this.element.children).forEach(s=>{s.classList.contains(t.itemClass)&&s.classList.remove(t.itemClass),e.itemClass&&s.classList.add(e.itemClass)})}};function Wz(n,e,t,i){let s=[];if(e||(e=n),t&&t.length?t.forEach(r=>{s.push(n.children[r])}):s=[].slice.call(n.children),f(i))s.forEach(r=>{e.appendChild(r)});else{const r=e.children[i];s.forEach(o=>{e.insertBefore(o,r)})}}function v9(n,e,t,i,s,r){let o=i;if(i.tagName===e){const a=U("ej2_instances",i);o=n("input",{attrs:{type:t}});const l=["change","cssClass","label","labelPosition","id"];for(let h=0,c=i.attributes.length;h<c;h++)-1===l.indexOf(i.attributes[h].nodeName)&&o.setAttribute(i.attributes[h].nodeName,i.attributes[h].nodeValue);Rt(i,{class:s,role:r,"aria-checked":"false"}),i.appendChild(o),zt("ej2_instances",a,o),r9(i,"ej2_instances")}return o}function KDe(n){let e;const t=n.childNodes;for(let i=0;i<t.length;i++)if(e=t[i],3===e.nodeType)return e;return null}function Vw(n,e=!1,t={}){const i=n("div",{className:"e-checkbox-wrapper e-css"});if(t.cssClass&&z([i],t.cssClass.split(" ")),t.enableRtl&&i.classList.add("e-rtl"),e){const r=n("span",{className:"e-ripple-container"});uc(r,{isCenterRipple:!0,duration:400}),i.appendChild(r)}const s=n("span",{className:"e-frame e-icons"});if(t.checked&&s.classList.add("e-check"),i.appendChild(s),t.label){const r=n("span",{className:"e-label"});t.disableHtmlEncode?r.textContent=t.label:r.innerHTML=t.label,i.appendChild(r)}return i}function SO(n,e){if(e){const t=document.createEvent("MouseEvents");t.initEvent(n.type,!1,!0),e.dispatchEvent(t)}}function pae(n,e){n.element.getAttribute("ejs-for")&&e.appendChild(n.createElement("input",{attrs:{name:n.name||n.element.name,value:"false",type:"hidden"}}))}ng([_(!1)],gp.prototype,"enableAnimation",void 0),ng([_(null)],gp.prototype,"itemClass",void 0),ng([_(null)],gp.prototype,"scope",void 0),ng([_()],gp.prototype,"helper",void 0),ng([_()],gp.prototype,"placeHolder",void 0),ng([G()],gp.prototype,"drag",void 0),ng([G()],gp.prototype,"beforeDragStart",void 0),ng([G()],gp.prototype,"dragStart",void 0),ng([G()],gp.prototype,"beforeDrop",void 0),ng([G()],gp.prototype,"drop",void 0),gp=y9=ng([as],gp);var rg=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};new zE;let Sa=(()=>{let n=class extends Qs{constructor(t,i){super(t,i)}preRender(){}render(){this.initialize(),this.removeRippleEffect=uc(this.element,{selector:".e-btn"}),this.renderComplete()}initialize(){if(this.cssClass&&z([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content){const t=this.enableHtmlSanitizer?hr.sanitize(this.content):this.content;this.element.innerHTML=t}this.setIconCss(),this.enableRtl&&this.element.classList.add("e-rtl"),this.disabled?this.controlStatus(this.disabled):this.wireEvents()}controlStatus(t){this.element.disabled=t}setIconCss(){if(this.iconCss){const t=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(t.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");const i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(t):this.element.insertBefore(t,i)}}wireEvents(){this.isToggle&&k.add(this.element,"click",this.btnClickHandler,this)}unWireEvents(){this.isToggle&&k.remove(this.element,"click",this.btnClickHandler)}btnClickHandler(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")}destroy(){let t=["e-primary","e-rtl","e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(t=t.concat(this.cssClass.split(" "))),super.destroy(),W([this.element],t),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));const i=this.element.querySelector("span.e-btn-icon");i&&te(i),this.unWireEvents(),Wb&&this.removeRippleEffect()}getModuleName(){return"btn"}getPersistData(){return this.addOnPersist([])}static Inject(){}onPropertyChanged(t,i){let s=this.element.querySelector("span.e-btn-icon");for(const r of Object.keys(t))switch(r){case"isPrimary":t.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(t.disabled);break;case"iconCss":s?t.iconCss?(s.className="e-btn-icon "+t.iconCss,this.element.textContent.trim()&&s.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):te(s):this.setIconCss();break;case"iconPosition":W([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),s=this.element.querySelector("span.e-btn-icon"),s&&te(s),this.setIconCss();break;case"cssClass":i.cssClass&&W([this.element],i.cssClass.split(" ")),t.cssClass&&z([this.element],t.cssClass.split(" "));break;case"enableRtl":t.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl");break;case"content":KDe(this.element)||this.element.classList.remove("e-icon-btn"),this.enableHtmlSanitizer&&(t.content=hr.sanitize(t.content)),this.element.innerHTML=t.content,this.setIconCss();break;case"isToggle":t.isToggle?k.add(this.element,"click",this.btnClickHandler,this):(k.remove(this.element,"click",this.btnClickHandler),W([this.element],["e-active"]))}}click(){this.element.click()}focusIn(){this.element.focus()}};return rg([_("Left")],n.prototype,"iconPosition",void 0),rg([_("")],n.prototype,"iconCss",void 0),rg([_(!1)],n.prototype,"disabled",void 0),rg([_(!1)],n.prototype,"isPrimary",void 0),rg([_("")],n.prototype,"cssClass",void 0),rg([_("")],n.prototype,"content",void 0),rg([_(!1)],n.prototype,"isToggle",void 0),rg([_()],n.prototype,"locale",void 0),rg([_(!1)],n.prototype,"enableHtmlSanitizer",void 0),rg([G()],n.prototype,"created",void 0),n=rg([as],n),n})();var bp=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const C9="e-check",fae="e-checkbox-disabled",xO="e-frame",w9="e-stop",S9="e-label",Gz="e-ripple-container",x9="e-ripple-check",E9="e-ripple-stop",_9="e-rtl",I9="e-checkbox-wrapper",XDe=["title","class","style","disabled","readonly","name","value"];let pc=class extends Qs{constructor(e,t){super(e,t),this.isFocused=!1,this.isMouseClick=!1,this.clickTriggered=!1,this.validCheck=!0}changeState(e){let t,i;const s=this.getWrapper().getElementsByClassName(xO)[0];Wb&&(i=this.getWrapper().getElementsByClassName(Gz)[0]),"check"===e?(s.classList.remove(w9),s.classList.add(C9),i&&(i.classList.remove(E9),i.classList.add(x9)),t="true",this.element.checked=!0,this.element.required&&this.validCheck?(this.element.checked=!1,this.validCheck=!1):this.element.required&&(this.validCheck=!0)):"uncheck"===e?(W([s],[C9,w9]),i&&W([i],[x9,E9]),t="false",this.element.checked=!1,this.element.required&&this.validCheck?(this.element.checked=!0,this.validCheck=!1):this.element.required&&(this.validCheck=!0)):(s.classList.remove(C9),s.classList.add(w9),i&&(i.classList.remove(x9),i.classList.add(E9)),t="mixed",this.element.indeterminate=!0),this.getWrapper().setAttribute("aria-checked",t)}clickHandler(e){if("INPUT"===e.target.tagName&&this.clickTriggered)return void(this.clickTriggered=!1);("SPAN"===e.target.tagName||"LABEL"===e.target.tagName)&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);const t={checked:this.updateVueArrayModel(!1),event:e};this.trigger("change",t),e.stopPropagation()}destroy(){let e=this.getWrapper();super.destroy(),this.wrapper&&(e=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&e.parentNode&&e.parentNode.insertBefore(this.element,e),te(e),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(t=>{this.element.removeAttribute(t)})):(["role","aria-checked","class"].forEach(t=>{e.removeAttribute(t)}),e.innerHTML=""))}focusHandler(){this.isFocused=!0}focusOutHandler(){const e=this.getWrapper();e&&e.classList.remove("e-focus"),this.isFocused=!1}getModuleName(){return"checkbox"}getPersistData(){return this.addOnPersist(["checked","indeterminate"])}getWrapper(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null}initialize(){f(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"==typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check"),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()}initWrapper(){let e=this.element.parentElement;e.classList.contains(I9)||(e=this.createElement("div",{className:I9,attrs:{role:"checkbox","aria-checked":"false"}}),this.element.parentNode.insertBefore(e,this.element));const t=this.createElement("label",{attrs:{for:this.element.id}}),i=this.createElement("span",{className:"e-icons "+xO});if(e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(_9),this.cssClass&&z([e],this.cssClass.split(" ")),e.appendChild(t),t.appendChild(this.element),pae(this,t),t.appendChild(i),Wb){const s=this.createElement("span",{className:Gz});"Before"===this.labelPosition?t.appendChild(s):t.insertBefore(s,i),uc(s,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)}keyUpHandler(){this.isFocused&&this.getWrapper().classList.add("e-focus")}labelMouseDownHandler(e){this.isMouseClick=!0,SO(e,this.getWrapper().getElementsByClassName(Gz)[0])}labelMouseUpHandler(e){this.isMouseClick=!0;const t=this.getWrapper().getElementsByClassName(Gz)[0];if(t){const i=t.querySelectorAll(".e-ripple-element");for(let s=0;s<i.length-1;s++)t.removeChild(t.childNodes[s]);SO(e,t)}}onPropertyChanged(e,t){const i=this.getWrapper();for(const s of Object.keys(e))switch(s){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove(fae),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":t.cssClass&&W([i],t.cssClass.split(" ")),e.cssClass&&z([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?i.classList.add(_9):i.classList.remove(_9);break;case"label":this.setText(e.label);break;case"labelPosition":{const r=i.getElementsByClassName(S9)[0],o=i.getElementsByTagName("label")[0];te(r),"After"===e.labelPosition?o.appendChild(r):o.insertBefore(r,i.getElementsByClassName(xO)[0]);break}case"name":this.element.setAttribute("name",e.name);break;case"value":if(this.isVue&&"object"==typeof e.value)break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}}preRender(){let e=this.element;this.tagName=this.element.tagName,e=v9(this.createElement,"EJS-CHECKBOX","checkbox",e,I9,"checkbox"),this.element=e,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=Tn("e-"+this.getModuleName()))}render(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()}setDisabled(){const e=this.getWrapper();this.element.disabled=!0,e.classList.add(fae),e.setAttribute("aria-disabled","true")}setText(e){const t=this.getWrapper();if(!t)return;let i=t.getElementsByClassName(S9)[0];if(i)i.textContent=e;else{e=this.enableHtmlSanitizer?hr.sanitize(e):e,i=this.createElement("span",{className:S9,innerHTML:e});const s=t.getElementsByTagName("label")[0];"Before"===this.labelPosition?s.insertBefore(i,t.getElementsByClassName(xO)[0]):s.appendChild(i)}}changeHandler(e){e.stopPropagation()}formResetHandler(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue}unWireEvents(){const e=this.wrapper;k.remove(e,"click",this.clickHandler),k.remove(this.element,"keyup",this.keyUpHandler),k.remove(this.element,"focus",this.focusHandler),k.remove(this.element,"focusout",this.focusOutHandler);const t=e.getElementsByTagName("label")[0];k.remove(t,"mousedown",this.labelMouseDownHandler),k.remove(t,"mouseup",this.labelMouseUpHandler);const i=B(this.element,"form");i&&k.remove(i,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&k.remove(this.element,"change",this.changeHandler)}wireEvents(){const e=this.getWrapper();k.add(e,"click",this.clickHandler,this),k.add(this.element,"keyup",this.keyUpHandler,this),k.add(this.element,"focus",this.focusHandler,this),k.add(this.element,"focusout",this.focusOutHandler,this);const t=e.getElementsByTagName("label")[0];k.add(t,"mousedown",this.labelMouseDownHandler,this),k.add(t,"mouseup",this.labelMouseUpHandler,this);const i=B(this.element,"form");i&&k.add(i,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&k.add(this.element,"change",this.changeHandler,this)}updateVueArrayModel(e){if(this.isVue&&"object"==typeof this.value){const t=this.element.value;if(t&&this.value){if(!e){const i=this.value.indexOf(t);return this.checked?i<0&&this.value.push(t):i>-1&&this.value.splice(i,1),this.value}for(let i=0;i<this.value.length;i++)t===this.value[i]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.validCheck?this.element.checked:!this.element.checked}updateHtmlAttributeToWrapper(){if(!f(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(XDe.indexOf(e)>-1){const t=this.getWrapper();"class"===e?z([t],this.htmlAttributes[e].split(" ")):"title"===e?t.setAttribute(e,this.htmlAttributes[e]):"style"===e?this.getWrapper().getElementsByClassName(xO)[0].setAttribute(e,this.htmlAttributes[e]):this.element.setAttribute(e,this.htmlAttributes[e])}}click(){this.element.click()}focusIn(){this.element.focus()}};bp([G()],pc.prototype,"change",void 0),bp([G()],pc.prototype,"created",void 0),bp([_(!1)],pc.prototype,"checked",void 0),bp([_("")],pc.prototype,"cssClass",void 0),bp([_(!1)],pc.prototype,"disabled",void 0),bp([_(!1)],pc.prototype,"indeterminate",void 0),bp([_("")],pc.prototype,"label",void 0),bp([_("After")],pc.prototype,"labelPosition",void 0),bp([_("")],pc.prototype,"name",void 0),bp([_("")],pc.prototype,"value",void 0),bp([_(!1)],pc.prototype,"enableHtmlSanitizer",void 0),bp([_({})],pc.prototype,"htmlAttributes",void 0),pc=bp([as],pc);var T9,Lf=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const D9="e-label",mae="e-ripple-container",k9="e-rtl",R9="e-radio-wrapper",QDe=["title","class","style","disabled","readonly","name","value"];let td=T9=class extends Qs{constructor(e,t){super(e,t),this.isFocused=!1}changeHandler(e){this.checked=!0,this.dataBind();let t=this.element.getAttribute("value");t=this.isVue&&t?this.element.value:this.value,this.trigger("change",{value:t,event:e}),"EJS-RADIOBUTTON"===this.tagName&&e.stopPropagation()}updateChange(){let e,t;const i=this.getRadioGroup();for(let s=0;s<i.length;s++)e=i[s],e!==this.element&&(t=za(e,T9),t.checked=!1,"EJS-RADIOBUTTON"===this.tagName&&(t.angularValue=this.value))}destroy(){const e=this.wrapper;super.destroy(),e&&(this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(e.parentNode&&e.parentNode.insertBefore(this.element,e),te(e),this.element.checked=!1,["name","value","disabled"].forEach(t=>{this.element.removeAttribute(t)})):(["role","aria-checked","class"].forEach(t=>{e.removeAttribute(t)}),e.innerHTML=""))}focusHandler(){this.isFocused=!0}focusOutHandler(){const e=this.getLabel();e&&e.classList.remove("e-focus")}getModuleName(){return"radio"}getSelectedValue(){let e;const t=this.getRadioGroup();for(let i=0,s=t.length;i<s;i++)if(e=t[i],e.checked)return e.value;return""}getRadioGroup(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')}getPersistData(){return this.addOnPersist(["checked"])}getWrapper(){return this.element?this.element.parentElement:null}getLabel(){return this.element?this.element.nextElementSibling:null}initialize(){f(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.updateHtmlAttribute(),this.name&&this.element.setAttribute("name",this.name);const e=this.element.getAttribute("value");this.isVue&&e&&e===this.value&&(this.checked=!0),(this.isVue?this.value&&!e:this.value)&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()}initWrapper(){let e,t=this.element.parentElement;t.classList.contains(R9)||(t=this.createElement("div",{className:R9}),this.element.parentNode.insertBefore(t,this.element));const i=this.createElement("label",{attrs:{for:this.element.id}});t.appendChild(this.element),t.appendChild(i),Wb&&(e=this.createElement("span",{className:mae}),i.appendChild(e),uc(e,{duration:400,isCenterRipple:!0})),t.classList.add("e-wrapper"),this.enableRtl&&i.classList.add(k9),this.cssClass&&z([t],this.cssClass.split(" ")),this.label&&this.setText(this.label)}keyUpHandler(){this.isFocused&&this.getLabel().classList.add("e-focus")}labelRippleHandler(e){SO(e,this.getLabel().getElementsByClassName(mae)[0])}formResetHandler(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&Rt(this.element,{checked:"true"})}onPropertyChanged(e,t){const i=this.getWrapper(),s=this.getLabel();for(const r of Object.keys(e))switch(r){case"checked":e.checked&&this.updateChange(),this.element.checked=e.checked;break;case"disabled":e.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":t.cssClass&&W([i],t.cssClass.split(" ")),e.cssClass&&z([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?s.classList.add(k9):s.classList.remove(k9);break;case"label":this.setText(e.label);break;case"labelPosition":"Before"===e.labelPosition?s.classList.add("e-right"):s.classList.remove("e-right");break;case"name":this.element.setAttribute("name",e.name);break;case"value":if(!f(this.htmlAttributes)&&this.htmlAttributes.value)break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttribute()}}preRender(){let e=this.element;if(this.formElement=B(this.element,"form"),this.tagName=this.element.tagName,e=v9(this.createElement,"EJS-RADIOBUTTON","radio",e,R9,"radio"),this.element=e,"radio"!==this.element.getAttribute("type")&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=Tn("e-"+this.getModuleName())),"EJS-RADIOBUTTON"===this.tagName){const t=this.element.getAttribute("formcontrolname");t&&(this.setProperties({name:t},!0),this.element.setAttribute("name",t))}}render(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete(),this.wrapper=this.getWrapper()}setDisabled(){this.element.disabled=!0}setText(e){const t=this.getLabel();let i=t.getElementsByClassName(D9)[0];i?i.textContent=e:(e=this.enableHtmlSanitizer?hr.sanitize(e):e,i=this.createElement("span",{className:D9,innerHTML:e}),t.appendChild(i)),"Before"===this.labelPosition?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")}updateHtmlAttribute(){if(!f(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(QDe.indexOf(e)>-1){const t=this.element.parentElement;"class"===e?z([t],this.htmlAttributes[e].split(" ")):"title"===e||"style"===e?t.setAttribute(e,this.htmlAttributes[e]):this.element.setAttribute(e,this.htmlAttributes[e])}}unWireEvents(){const e=this.wrapper;k.remove(this.element,"change",this.changeHandler),k.remove(this.element,"focus",this.focusHandler),k.remove(this.element,"focusout",this.focusOutHandler),k.remove(this.element,"keyup",this.keyUpHandler);const t=e.getElementsByTagName("label")[0];t&&(k.remove(t,"mousedown",this.labelRippleHandler),k.remove(t,"mouseup",this.labelRippleHandler)),this.formElement&&k.remove(this.formElement,"reset",this.formResetHandler)}wireEvents(){const e=this.getLabel();k.add(this.element,"change",this.changeHandler,this),k.add(this.element,"keyup",this.keyUpHandler,this),k.add(this.element,"focus",this.focusHandler,this),k.add(this.element,"focusout",this.focusOutHandler,this);const t=e.getElementsByClassName(D9)[0];t&&(k.add(t,"mousedown",this.labelRippleHandler,this),k.add(t,"mouseup",this.labelRippleHandler,this)),this.formElement&&k.add(this.formElement,"reset",this.formResetHandler,this)}click(){this.element.click()}focusIn(){this.element.focus()}};Lf([G()],td.prototype,"change",void 0),Lf([G()],td.prototype,"created",void 0),Lf([_(!1)],td.prototype,"checked",void 0),Lf([_("")],td.prototype,"cssClass",void 0),Lf([_(!1)],td.prototype,"disabled",void 0),Lf([_("")],td.prototype,"label",void 0),Lf([_("After")],td.prototype,"labelPosition",void 0),Lf([_("")],td.prototype,"name",void 0),Lf([_("")],td.prototype,"value",void 0),Lf([_(!1)],td.prototype,"enableHtmlSanitizer",void 0),Lf([_({})],td.prototype,"htmlAttributes",void 0),td=T9=Lf([as],td);var $b=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const gae="e-switch-disabled",$z="e-ripple-container",bae="e-ripple-check",A9="e-rtl",L9="e-switch-wrapper",yae="e-switch-active";let og=class extends Qs{constructor(e,t){super(e,t),this.isFocused=!1,this.isDrag=!1}changeState(e){let t,i;const s=this.getWrapper(),r=s.querySelector(".e-switch-inner"),o=s.querySelector(".e-switch-handle");Wb&&(i=s.getElementsByClassName($z)[0]),e?(z([r,o],yae),t="true",this.element.checked=!0,this.checked=!0,i&&z([i],[bae])):(W([r,o],yae),t="false",this.element.checked=!1,this.checked=!1,i&&W([i],[bae])),s.setAttribute("aria-checked",t)}clickHandler(e){this.isDrag=!1,this.focusOutHandler(),this.changeState(!this.checked),this.element.focus(),this.trigger("change",{checked:this.element.checked,event:e})}destroy(){super.destroy(),this.disabled||this.unWireEvents(),function YDe(n,e,t){"INPUT"===t?(e.parentNode.insertBefore(n.element,e),te(e),n.element.checked=!1,["name","value","disabled"].forEach(i=>{n.element.removeAttribute(i)})):(["role","aria-checked","class"].forEach(i=>{e.removeAttribute(i)}),e.innerHTML="")}(this,this.getWrapper(),this.tagName)}focusHandler(){this.isFocused=!0}focusOutHandler(){this.getWrapper().classList.remove("e-focus")}getModuleName(){return"switch"}getPersistData(){return this.addOnPersist(["checked"])}getWrapper(){return this.element.parentElement}initialize(){f(this.initialSwitchCheckedValue)&&(this.initialSwitchCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&this.changeState(!0),this.disabled&&this.setDisabled(),(this.onLabel||this.offLabel)&&this.setLabel(this.onLabel,this.offLabel)}initWrapper(){let e=this.element.parentElement;e.classList.contains(L9)||(e=this.createElement("div",{className:L9,attrs:{role:"switch","aria-checked":"false"}}),this.element.parentNode.insertBefore(e,this.element));const t=this.createElement("span",{className:"e-switch-inner"}),i=this.createElement("span",{className:"e-switch-on"}),s=this.createElement("span",{className:"e-switch-off"}),r=this.createElement("span",{className:"e-switch-handle"});if(e.appendChild(this.element),pae(this,e),t.appendChild(i),t.appendChild(s),e.appendChild(t),e.appendChild(r),Wb){const o=this.createElement("span",{className:$z});r.appendChild(o),uc(o,{duration:400,isCenterRipple:!0})}e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(A9),this.cssClass&&z([e],this.cssClass.split(" "))}onPropertyChanged(e,t){const i=this.getWrapper();for(const s of Object.keys(e))switch(s){case"checked":this.changeState(e.checked);break;case"disabled":e.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove(gae),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"value":this.element.setAttribute("value",e.value);break;case"name":this.element.setAttribute("name",e.name);break;case"onLabel":case"offLabel":this.setLabel(e.onLabel,e.offLabel);break;case"enableRtl":e.enableRtl?i.classList.add(A9):i.classList.remove(A9);break;case"cssClass":t.cssClass&&W([i],t.cssClass.split(" ")),e.cssClass&&z([i],e.cssClass.split(" "))}}preRender(){const e=this.element;this.formElement=B(this.element,"form"),this.tagName=this.element.tagName,function ZDe(n,e,t,i,s){i=v9(n.createElement,e,"checkbox",i,t,s),n.element=i,"checkbox"!==n.element.getAttribute("type")&&n.element.setAttribute("type","checkbox"),n.element.id||(n.element.id=Tn("e-"+s))}(this,"EJS-SWITCH",L9,e,this.getModuleName())}render(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()}rippleHandler(e){SO(e,this.getWrapper().getElementsByClassName($z)[0]),"mousedown"===e.type&&e.currentTarget.classList.contains("e-switch-wrapper")&&1===e.which&&(this.isDrag=!0,this.isFocused=!1)}rippleTouchHandler(e){const t=this.getWrapper().getElementsByClassName($z)[0];if(t){const i=document.createEvent("MouseEvents");i.initEvent(e,!1,!0),t.dispatchEvent(i)}}setDisabled(){const e=this.getWrapper();this.element.disabled=!0,e.classList.add(gae),e.setAttribute("aria-disabled","true")}setLabel(e,t){const i=this.getWrapper();e&&(i.querySelector(".e-switch-on").textContent=e),t&&(i.querySelector(".e-switch-off").textContent=t)}switchFocusHandler(){this.isFocused&&this.getWrapper().classList.add("e-focus")}switchMouseUp(e){const t=e.target;"touchmove"===e.type&&e.preventDefault(),"touchstart"===e.type&&(this.isDrag=!0,this.rippleTouchHandler("mousedown")),this.isDrag&&("mouseup"===e.type&&t.className.indexOf("e-switch")<0||"touchend"===e.type)&&(this.clickHandler(e),this.rippleTouchHandler("mouseup"),e.preventDefault())}formResetHandler(){this.checked=this.initialSwitchCheckedValue,this.element.checked=this.initialSwitchCheckedValue}toggle(){this.clickHandler()}wireEvents(){const e=this.getWrapper();this.delegateMouseUpHandler=this.switchMouseUp.bind(this),this.delegateKeyUpHandler=this.switchFocusHandler.bind(this),k.add(e,"click",this.clickHandler,this),k.add(this.element,"focus",this.focusHandler,this),k.add(this.element,"focusout",this.focusOutHandler,this),k.add(this.element,"mouseup",this.delegateMouseUpHandler,this),k.add(this.element,"keyup",this.delegateKeyUpHandler,this),k.add(e,"mousedown mouseup",this.rippleHandler,this),k.add(e,"touchstart touchmove touchend",this.switchMouseUp,this),this.formElement&&k.add(this.formElement,"reset",this.formResetHandler,this)}unWireEvents(){const e=this.getWrapper();k.remove(e,"click",this.clickHandler),k.remove(this.element,"focus",this.focusHandler),k.remove(this.element,"focusout",this.focusOutHandler),k.remove(this.element,"mouseup",this.delegateMouseUpHandler),k.remove(this.element,"keyup",this.delegateKeyUpHandler),k.remove(e,"mousedown mouseup",this.rippleHandler),k.remove(e,"touchstart touchmove touchend",this.switchMouseUp),this.formElement&&k.remove(this.formElement,"reset",this.formResetHandler)}click(){this.element.click()}focusIn(){this.element.focus()}};$b([G()],og.prototype,"change",void 0),$b([G()],og.prototype,"created",void 0),$b([_(!1)],og.prototype,"checked",void 0),$b([_("")],og.prototype,"cssClass",void 0),$b([_(!1)],og.prototype,"disabled",void 0),$b([_("")],og.prototype,"name",void 0),$b([_("")],og.prototype,"onLabel",void 0),$b([_("")],og.prototype,"offLabel",void 0),$b([_("")],og.prototype,"value",void 0),og=$b([as],og);var oh=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const os={chipSet:"e-chip-set",chip:"e-chip",avatar:"e-chip-avatar",text:"e-chip-text",icon:"e-chip-icon",delete:"e-chip-delete",deleteIcon:"e-dlt-btn",multiSelection:"e-multi-selection",singleSelection:"e-selection",active:"e-active",chipWrapper:"e-chip-avatar-wrap",iconWrapper:"e-chip-icon-wrap",focused:"e-focused",disabled:"e-disabled",rtl:"e-rtl"};let kl=class extends Qs{constructor(e,t){super(e,t),this.multiSelectedChip=[]}preRender(){}chipType(){return this.chips&&this.chips.length&&this.chips.length>0}render(){this.type=this.chips.length?"chipset":this.text||this.element.innerText?"chip":"chipset",this.setAttributes(),this.createChip(),this.setRtl(),this.select(this.selectedChips,void 0),this.wireEvent(!1),this.rippleFunction=uc(this.element,{selector:".e-chip"}),this.renderComplete()}createChip(){this.innerText=this.element.innerText&&0!==this.element.innerText.length?this.element.innerText.trim():this.element.innerText,this.element.innerHTML="",this.chipCreation("chip"===this.type?[this.innerText?this.innerText:this.text]:this.chips)}setAttributes(){"chip"===this.type?(this.element.tabIndex=0,this.element.setAttribute("role","option")):(this.element.classList.add(os.chipSet),this.element.setAttribute("role","listbox"),"Multiple"===this.selection?(this.element.classList.add(os.multiSelection),this.element.setAttribute("aria-multiselectable","true")):"Single"===this.selection?(this.element.classList.add(os.singleSelection),this.element.setAttribute("aria-multiselectable","false")):this.element.setAttribute("aria-multiselectable","false"))}setRtl(){this.element.classList[this.enableRtl?"add":"remove"](os.rtl)}chipCreation(e){let t=[];for(let i=0;i<e.length;i++){const s=this.getFieldValues(e[i]),r=this.elementCreation(s),o=(os.chip+" "+(s.enabled?" ":os.disabled)+" "+(s.avatarIconCss||s.avatarText?os.chipWrapper:s.leadingIconCss?os.iconWrapper:" ")+" "+s.cssClass).split(" ").filter(a=>a);if(this.chipType()){const a=this.createElement("DIV",{className:o.join(" "),attrs:{tabIndex:"0",role:"option","aria-label":s.text,"aria-selected":"false"}});s.value&&a.setAttribute("data-value",s.value.toString()),mi(r,a),t.push(a)}else t=r,z([this.element],o),this.element.setAttribute("aria-label",s.text),s.value&&this.element.setAttribute("data-value",s.value.toString())}mi(t,this.element)}getFieldValues(e){const t="false"!==this.enabled.toString();return{text:"object"==typeof e?e.text?e.text.toString():this.text.toString():this.chipType()?e.toString():this.innerText?this.innerText:this.text.toString(),cssClass:"object"==typeof e&&e.cssClass?e.cssClass.toString():this.cssClass.toString(),leadingIconCss:"object"==typeof e&&e.leadingIconCss?e.leadingIconCss.toString():this.leadingIconCss.toString(),avatarIconCss:"object"==typeof e&&e.avatarIconCss?e.avatarIconCss.toString():this.avatarIconCss.toString(),avatarText:"object"==typeof e&&e.avatarText?e.avatarText.toString():this.avatarText.toString(),trailingIconCss:"object"==typeof e&&e.trailingIconCss?e.trailingIconCss.toString():this.trailingIconCss.toString(),enabled:"object"==typeof e?f(e.enabled)?t:"false"!==e.enabled.toString():t,value:"object"==typeof e&&e.value?e.value.toString():null,leadingIconUrl:"object"==typeof e&&e.leadingIconUrl?e.leadingIconUrl.toString():this.leadingIconUrl,trailingIconUrl:"object"==typeof e&&e.trailingIconUrl?e.trailingIconUrl.toString():this.trailingIconUrl}}elementCreation(e){const t=[];if(e.avatarText||e.avatarIconCss){const s=(os.avatar+" "+e.avatarIconCss).trim(),r=this.createElement("span",{className:s});r.innerText=e.avatarText,t.push(r)}else if(e.leadingIconCss){const s=(os.icon+" "+e.leadingIconCss).trim(),r=this.createElement("span",{className:s});t.push(r)}else if(e.leadingIconUrl){const s=(os.avatar+" image-url").trim(),r=this.createElement("span",{className:s});r.style.backgroundImage="url("+e.leadingIconUrl+")",t.push(r)}const i=this.createElement("span",{className:os.text});if(i.innerText=e.text,t.push(i),e.trailingIconCss||this.chipType()&&this.enableDelete){const s=(os.delete+" "+(e.trailingIconCss?e.trailingIconCss:os.deleteIcon)).trim(),r=this.createElement("span",{className:s});t.push(r)}else if(e.trailingIconUrl){const s="trailing-icon-url".trim(),r=this.createElement("span",{className:s});r.style.backgroundImage="url("+e.trailingIconUrl+")",t.push(r)}return t}find(e){let t;const i=e instanceof HTMLElement?e:this.element.querySelectorAll("."+os.chip)[e];return i&&this.chipType()&&(t={text:void 0,index:void 0,element:void 0,data:void 0},t.index=Array.prototype.slice.call(this.element.querySelectorAll("."+os.chip)).indexOf(i),t.text="object"==typeof this.chips[t.index]?this.chips[t.index].text?this.chips[t.index].text.toString():"":this.chips[t.index].toString(),t.data=this.chips[t.index],t.element=i),t}add(e){if("chip"!==this.type){const t=e instanceof Array?e:[e];this.chips.push(...t),this.chipCreation(t)}}select(e,t){this.onSelect(e,!1,t)}multiSelection(e){const t=this.element.querySelectorAll(".e-chip");for(let i=0;i<e.length;i++)if("string"==typeof e[i]){for(let s=0;s<t.length;s++)if(e[i]!==s&&e[i]===t[s].attributes[5].value){this.multiSelectedChip.push(s);break}}else this.multiSelectedChip.push(e[i])}onSelect(e,t,i){let s,r,o;if(this.chipType()&&"None"!==this.selection){if(t){const l=this.element.querySelectorAll("."+os.chip);for(let h=0;h<l.length;h++)l[h].setAttribute("aria-selected","false"),l[h].classList.remove(os.active)}const a=e instanceof Array?e:[e];for(let l=0;l<a.length;l++){let h=a[l]instanceof HTMLElement?a[l]:this.element.querySelectorAll("."+os.chip)[a[l]];if("index"!==i)for(let c=0;c<this.chips.length;c++){r=this.element.querySelectorAll("."+os.chip)[c];const m=this.getFieldValues(this.chips[c]);"value"===i?null!==m.value&&(o=r.dataset.value):"text"===i&&(o=r.innerText),o===a[l].toString()&&(s=c,h=this.element.querySelectorAll("."+os.chip)[s])}h instanceof HTMLElement&&this.selectionHandler(h)}}}remove(e){if(this.chipType()){const t=e instanceof Array?e:[e],i=[],s=this.element.querySelectorAll("."+os.chip);t.forEach(r=>{const o=r instanceof HTMLElement?r:s[r];o instanceof HTMLElement&&i.push(o)}),i.forEach(r=>{const o=this.element.querySelectorAll("."+os.chip),a=Array.prototype.slice.call(o).indexOf(r);this.deleteHandler(r,a)})}}getSelectedChips(){let e;if(this.chipType()&&"None"!==this.selection){const t={texts:[],Indexes:[],data:[],elements:[]},i=this.element.querySelectorAll("."+os.active);for(let r=0;r<i.length;r++){const o=i[r];t.elements.push(o);const a=Array.prototype.slice.call(this.element.querySelectorAll("."+os.chip)).indexOf(o);t.Indexes.push(a),t.data.push(this.chips[a]);const l="object"==typeof this.chips[a]?this.chips[a].text?this.chips[a].text.toString():null:this.chips[a].toString();t.texts.push(l)}const s={text:t.texts[0],index:t.Indexes[0],data:t.data[0],element:t.elements[0]};e=f(s.index)?void 0:"Multiple"===this.selection?t:s}return e}wireEvent(e){e?(k.remove(this.element,"click",this.clickHandler),k.remove(this.element,"focusout",this.focusOutHandler),k.remove(this.element,"keydown",this.keyHandler),k.remove(this.element,"keyup",this.keyHandler)):(k.add(this.element,"click",this.clickHandler,this),k.add(this.element,"focusout",this.focusOutHandler,this),k.add(this.element,"keydown",this.keyHandler,this),k.add(this.element,"keyup",this.keyHandler,this))}keyHandler(e){e.target.classList.contains(os.chip)&&("keydown"===e.type?13===e.keyCode||32===e.keyCode?this.clickHandler(e):46===e.keyCode&&this.enableDelete&&this.clickHandler(e,!0):9===e.keyCode&&this.focusInHandler(e.target))}focusInHandler(e){e.classList.contains(os.focused)||e.classList.add(os.focused)}focusOutHandler(e){const t=B(e.target,"."+os.chip),i=this.chipType()?this.element.querySelector("."+os.focused):this.element.classList.contains(os.focused)?this.element:null;t&&i&&i.classList.remove(os.focused)}clickHandler(e,t=!1){const i=B(e.target,"."+os.chip);if(i){let s;if(this.chipType())s=this.find(i);else{const r=Array.prototype.slice.call(this.element.querySelectorAll("."+os.chip)).indexOf(i);s={text:this.innerText?this.innerText:this.text,element:i,data:this.text,index:r}}s.event=e,s.cancel=!1,this.trigger("beforeClick",s,r=>{r.cancel||this.clickEventHandler(r.element,e,t)})}}clickEventHandler(e,t,i){if(this.chipType()){const s=this.find(e);s.event=t,(t.target.classList.contains(os.deleteIcon)?t.target:i?e.querySelector("."+os.deleteIcon):void 0)&&this.enableDelete?(s.cancel=!1,this.trigger("delete",s,a=>{if(!a.cancel){this.deleteHandler(a.element,a.index),this.selectionHandler(e),s.selected=a.element.classList.contains(os.active),this.trigger("click",s);let h=this.element.querySelectorAll("."+os.chip)[a.index];h&&(h.focus(),this.focusInHandler(h))}})):"None"!==this.selection?(this.selectionHandler(e),s.selected=e.classList.contains(os.active),this.trigger("click",s)):(this.focusInHandler(e),this.trigger("click",s))}else this.focusInHandler(e),this.trigger("click",{text:this.innerText?this.innerText:this.text,element:e,data:this.text,event:t})}selectionHandler(e){if("Single"===this.selection){const t=this.element.querySelector("."+os.active);t&&t!==e&&(t.classList.remove(os.active),t.setAttribute("aria-selected","false")),this.setProperties({selectedChips:null},!0)}else this.setProperties({selectedChips:[]},!0);e.classList.contains(os.active)?(e.classList.remove(os.active),e.setAttribute("aria-selected","false")):(e.classList.add(os.active),e.setAttribute("aria-selected","true")),this.updateSelectedChips()}updateSelectedChips(){const e=this.element.querySelectorAll(".e-chip"),t=[],i=[];let r,s=null;for(let o=0;o<e.length;o++){const a=this.element.querySelectorAll(".e-chip")[o];if("true"===a.getAttribute("aria-selected")){if(r=a.getAttribute("data-value"),"Single"===this.selection&&a.classList.contains("e-active")){s=r||o;break}s=r?i.push(r):t.push(o)}}this.setProperties({selectedChips:"Single"===this.selection?s:r?i:t},!0)}deleteHandler(e,t){const i=this.find(e);this.chips.splice(t,1),this.setProperties({chips:this.chips},!0),te(e),this.trigger("deleted",i)}destroy(){W([this.element],[os.chipSet,os.chip,os.rtl,os.multiSelection,os.singleSelection,os.disabled,os.chipWrapper,os.iconWrapper,os.active,os.focused].concat(this.cssClass.toString().split(" ").filter(e=>e))),this.removeMultipleAttributes(["tabindex","role","aria-label","aria-multiselectable"],this.element),this.wireEvent(!0),this.rippleFunction(),super.destroy(),this.element.innerHTML="",this.element.innerText=this.innerText}removeMultipleAttributes(e,t){e.forEach(i=>{t.removeAttribute(i)})}getPersistData(){return this.addOnPersist([])}getModuleName(){return"chip-list"}onPropertyChanged(e,t){let i;for(const s of Object.keys(e))switch(s){case"chips":case"text":case"avatarText":case"avatarIconCss":case"leadingIconCss":case"trailingIconCss":case"selection":case"enableDelete":case"enabled":this.refresh();break;case"cssClass":this.chipType()?this.refresh():(W([this.element],t.cssClass.toString().split(" ").filter(r=>r)),z([this.element],e.cssClass.toString().split(" ").filter(r=>r)));break;case"selectedChips":W(this.element.querySelectorAll(".e-active"),"e-active"),"Multiple"===this.selection?(this.multiSelectedChip=[],this.multiSelection(e.selectedChips),this.onSelect(this.multiSelectedChip,!0,i),this.updateSelectedChips()):this.onSelect(e.selectedChips,!0,i);break;case"enableRtl":this.setRtl()}}};oh([_([])],kl.prototype,"chips",void 0),oh([_("")],kl.prototype,"text",void 0),oh([_("")],kl.prototype,"avatarText",void 0),oh([_("")],kl.prototype,"avatarIconCss",void 0),oh([_("")],kl.prototype,"leadingIconCss",void 0),oh([_("")],kl.prototype,"trailingIconCss",void 0),oh([_("")],kl.prototype,"leadingIconUrl",void 0),oh([_("")],kl.prototype,"trailingIconUrl",void 0),oh([_("")],kl.prototype,"cssClass",void 0),oh([_(!0)],kl.prototype,"enabled",void 0),oh([_([])],kl.prototype,"selectedChips",void 0),oh([_("None")],kl.prototype,"selection",void 0),oh([_(!1)],kl.prototype,"enableDelete",void 0),oh([G()],kl.prototype,"created",void 0),oh([G()],kl.prototype,"click",void 0),oh([G()],kl.prototype,"beforeClick",void 0),oh([G()],kl.prototype,"delete",void 0),oh([G()],kl.prototype,"deleted",void 0),kl=oh([as],kl);let Kb,UE,Kz,EO,qE,yp,M9=!1;function vae(n,e){let t=!1;const i={left:0,top:0},s=n;if(!n||!e)return i;for(f(e.offsetParent)&&"fixed"===e.style.position&&(t=!0);(e.offsetParent||t)&&n&&e.offsetParent!==n;)i.left+=n.offsetLeft,i.top+=n.offsetTop,n=n.offsetParent;for(n=s;(e.offsetParent||t)&&n&&e.offsetParent!==n;)i.left-=n.scrollLeft,i.top-=n.scrollTop,n=n.parentElement;return i}function Nh(n,e,t,i,s){return UE=void 0,UE=s,M9=!!i,n?(e||(e="left"),t||(t="top"),EO=n.ownerDocument,Kz=n,function JDe(n,e,t){switch(Kb=Kz.getBoundingClientRect(),e+n){case"topcenter":sC(N9(),t),nC(Yz(),t);break;case"topright":sC(F9(),t),nC(Yz(),t);break;case"centercenter":sC(N9(),t),nC(P9(),t);break;case"centerright":sC(F9(),t),nC(P9(),t);break;case"centerleft":sC(Zz(),t),nC(P9(),t);break;case"bottomcenter":sC(N9(),t),nC(O9(),t);break;case"bottomright":sC(F9(),t),nC(O9(),t);break;case"bottomleft":sC(Zz(),t),nC(O9(),t);break;default:sC(Zz(),t),nC(Yz(),t)}return t}(e.toLowerCase(),t.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function sC(n,e){e.left=n}function nC(n,e){e.top=n}function Cae(){return EO.documentElement.scrollTop||EO.body.scrollTop}function wae(){return EO.documentElement.scrollLeft||EO.body.scrollLeft}function O9(){return M9?Kb.bottom:Kb.bottom+Cae()}function P9(){return Yz()+Kb.height/2}function Yz(){return M9?Kb.top:Kb.top+Cae()}function Zz(){return Kb.left+wae()}function F9(){const n=Kz&&Kz.classList.contains("e-date-range-wrapper")?UE?UE.width:0:UE&&Kb.width>=UE.width?UE.width:0;return Kb.right+wae()-n}function N9(){return Zz()+Kb.width/2}function B9(n,e=null,t={X:!1,Y:!1},i){if(!t.Y&&!t.X)return{left:0,top:0};const s=n.getBoundingClientRect();if(yp=e,qE=n.ownerDocument,i||(i=Nh(n,"left","top")),t.X){const r=yp?Iae():Aae(),o=z9(),a=j9(),l=o-i.left,h=i.left+s.width-a;s.width>r?i.left=l>0&&h<=0?a-s.width:h>0&&l<=0?o:l>h?a-s.width:o:l>0?i.left+=l:h>0&&(i.left-=h)}if(t.Y){const r=yp?Tae():Rae(),o=V9(),a=U9(),l=o-i.top,h=i.top+s.height-a;s.height>r?i.top=l>0&&h<=0?a-s.height:h>0&&l<=0?o:l>h?a-s.height:o:l>0?i.top+=l:h>0&&(i.top-=h)}return i}function Yb(n,e=null,t,i){const s=Nh(n,"left","top");t&&(s.left=t),i&&(s.top=i);const r=[];yp=e,qE=n.ownerDocument;const o=n.getBoundingClientRect(),l=s.left,h=s.left+o.width,m=_ae(s.top,s.top+o.height),b=Sae(l,h);return m.topSide&&r.push("top"),b.rightSide&&r.push("right"),b.leftSide&&r.push("left"),m.bottomSide&&r.push("bottom"),r}function eke(n,e,t,i,s,r,o=null,a={X:!0,Y:!0},l){if(!(e&&n&&s&&r&&(a.X||a.Y)))return;const h={TL:null,TR:null,BL:null,BR:null},c={TL:null,TR:null,BL:null,BR:null};let m;if("none"===window.getComputedStyle(n).display){const v=n.style.visibility;n.style.visibility="hidden",n.style.display="block",m=n.getBoundingClientRect(),n.style.removeProperty("display"),n.style.visibility=v}else m=n.getBoundingClientRect();const b={posX:s,posY:r,offsetX:t,offsetY:i,position:{left:0,top:0}};yp=o,qE=e.ownerDocument,function ike(n,e,t,i,s){t.position=Nh(n,t.posX,t.posY,i,s),e.TL=Nh(n,"left","top",i,s),e.TR=Nh(n,"right","top",i,s),e.BR=Nh(n,"left","bottom",i,s),e.BL=Nh(n,"right","bottom",i,s)}(e,h,b,l,m),H9(c,b,m),a.X&&xae(e,c,h,b,m,!0),a.Y&&h.TL.top>-1&&Eae(e,c,h,b,m,!0),function tke(n,e,t){let i=0,s=0;if(null!=n.offsetParent&&("absolute"===getComputedStyle(n.offsetParent).position||"relative"===getComputedStyle(n.offsetParent).position)){const r=Nh(n.offsetParent,"left","top",!1,t);i=r.left,s=r.top}n.style.top=e.position.top+e.offsetY-s+"px",n.style.left=e.position.left+e.offsetX-i+"px"}(n,b,m)}function H9(n,e,t){n.TL={top:e.position.top+e.offsetY,left:e.position.left+e.offsetX},n.TR={top:n.TL.top,left:n.TL.left+t.width},n.BL={top:n.TL.top+t.height,left:n.TL.left},n.BR={top:n.TL.top+t.height,left:n.TL.left+t.width}}function Sae(n,e){let t=!1,i=!1;return n-Qz()<z9()&&(t=!0),e>j9()&&(i=!0),{leftSide:t,rightSide:i}}function xae(n,e,t,i,s,r){const o=Sae(e.TL.left,e.TR.left);t.TL.left-Qz()<=z9()&&(o.leftSide=!1),t.TR.left>j9()&&(o.rightSide=!1),(o.leftSide&&!o.rightSide||!o.leftSide&&o.rightSide)&&(i.posX="right"===i.posX?"left":"right",i.offsetX=i.offsetX+s.width,i.offsetX=-1*i.offsetX,i.position=Nh(n,i.posX,i.posY,!1),H9(e,i,s),r&&xae(n,e,t,i,s,!1))}function Eae(n,e,t,i,s,r){const o=_ae(e.TL.top,e.BL.top);t.TL.top-Xz()<=V9()&&(o.topSide=!1),t.BL.top>=U9()&&n.getBoundingClientRect().bottom<window.innerHeight&&(o.bottomSide=!1),(o.topSide&&!o.bottomSide||!o.topSide&&o.bottomSide)&&(i.posY="top"===i.posY?"bottom":"top",i.offsetY=i.offsetY+s.height,i.offsetY=-1*i.offsetY,i.position=Nh(n,i.posX,i.posY,!1,s),H9(e,i,s),r&&Eae(n,e,t,i,s,!1))}function _ae(n,e){let t=!1,i=!1;return n-Xz()<V9()&&(t=!0),e>U9()&&(i=!0),{topSide:t,bottomSide:i}}function Iae(){return yp.getBoundingClientRect().width}function Tae(){return yp.getBoundingClientRect().height}function Dae(){return yp.getBoundingClientRect().left}function kae(){return yp.getBoundingClientRect().top}function V9(){return yp?kae():0}function z9(){return yp?Dae():0}function j9(){return yp?Qz()+Dae()+Iae():Qz()+Aae()}function U9(){return yp?Xz()+kae()+Tae():Xz()+Rae()}function Xz(){return qE.documentElement.scrollTop||qE.body.scrollTop}function Qz(){return qE.documentElement.scrollLeft||qE.body.scrollLeft}function Rae(){return window.innerHeight}function Aae(){const n=window.innerWidth;let e=document.documentElement.getBoundingClientRect();return n-(n-(f(document.documentElement)?0:e.width))}var al=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let Lae=(()=>{class n extends ii{}return al([_("left")],n.prototype,"X",void 0),al([_("top")],n.prototype,"Y",void 0),n})();const ah_OPEN="e-popup-open",ah_CLOSE="e-popup-close";let fc=(()=>{let n=class extends Qs{constructor(t,i){super(i,t)}onPropertyChanged(t,i){for(const s of Object.keys(t))switch(s){case"width":ht(this.element,{width:st(t.width)});break;case"height":ht(this.element,{height:st(t.height)});break;case"zIndex":ht(this.element,{zIndex:t.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":let r=t.offsetX-i.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+r).toString()+"px";break;case"offsetY":let o=t.offsetY-i.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+o).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==t.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}getModuleName(){return"popup"}resolveCollision(){this.checkCollision()}getPersistData(){return this.addOnPersist([])}destroy(){this.element.classList.remove("e-popup","e-rtl",ah_OPEN,ah_CLOSE),this.unwireEvents(),super.destroy()}render(){this.element.classList.add("e-popup");const t={};1e3!==this.zIndex&&(t.zIndex=this.zIndex),"auto"!==this.width&&(t.width=st(this.width)),"auto"!==this.height&&(t.height=st(this.height)),ht(this.element,t),this.fixedParent=!1,this.setEnableRtl(),this.setContent()}wireEvents(){q.isDevice&&k.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()}wireScrollEvents(){if(this.getRelateToElement())for(const t of this.getScrollableParent(this.getRelateToElement()))k.add(t,"scroll",this.scrollRefresh,this)}unwireEvents(){q.isDevice&&k.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()}unwireScrollEvents(){if(this.getRelateToElement())for(const t of this.getScrollableParent(this.getRelateToElement()))k.remove(t,"scroll",this.scrollRefresh)}getRelateToElement(){const t=""===this.relateTo||f(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:t},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo}scrollRefresh(t){if("reposition"===this.actionOnScroll?!f(this.element)&&!(this.element.offsetParent===t.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==t.target.parentElement)&&this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){const i=this.isElementOnViewport(this.getRelateToElement(),t.target);i||this.targetInvisibleStatus?i&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}}isElementOnViewport(t,i){const s=this.getScrollableParent(t);for(let r=0;r<s.length;r++)if(!this.isElementVisible(t,s[r]))return!1;return!0}isElementVisible(t,i){const s=this.checkGetBoundingClientRect(t);if(!s.height||!s.width)return!1;if(f(this.checkGetBoundingClientRect(i))){const r=window,o={top:r.scrollY,left:r.scrollX,right:r.scrollX+r.outerWidth,bottom:r.scrollY+r.outerHeight},a=Nh(t),l={top:a.top,left:a.left,right:a.left+s.width,bottom:a.top+s.height},h={top:o.bottom-l.top,left:o.right-l.left,bottom:l.bottom-o.top,right:l.right-o.left};return h.top>0&&h.left>0&&h.right>0&&h.bottom>0}{const r=i.getBoundingClientRect();return!(s.bottom<r.top||s.bottom>r.bottom||s.right>r.right||s.left<r.left)}}preRender(){}setEnableRtl(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}setContent(){if(!f(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{const t=this.getRelateToElement(),i=this.content.props;(!t.classList.contains("e-dropdown-btn")||f(i))&&this.element.appendChild(this.content)}}orientationOnChange(){setTimeout(()=>{this.refreshPosition()},200)}refreshPosition(t,i){f(t)||this.checkFixedParent(t),this.reposition(),i||this.checkCollision()}reposition(){let t,i;const s=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)t={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){let r;const o=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(r=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),i=this.getAnchorPosition(s,this.element,this.position,this.offsetX,this.offsetY),t="string"==typeof this.position.X?{left:i.left,top:this.position.Y}:{left:this.position.X,top:i.top},this.element.style.display=o,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=r)}else if(s){const r=this.element.style.display;this.element.style.display="block",t=this.getAnchorPosition(s,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=r}else t={left:0,top:0};f(t)||(this.element.style.left=t.left+"px",this.element.style.top=t.top+"px")}checkGetBoundingClientRect(t){let i;try{return i=t.getBoundingClientRect(),i}catch(s){return null}}getAnchorPosition(t,i,s,r,o){const a=this.checkGetBoundingClientRect(i),l=this.checkGetBoundingClientRect(t);if(f(a)||f(l))return null;const h=t;let c={left:0,top:0};switch(i.offsetParent&&"BODY"===i.offsetParent.tagName&&"BODY"===t.tagName?c=Nh(t):(i.classList.contains("e-dlg-modal")&&"BODY"!==h.tagName&&(i=i.parentElement),c=vae(h,i)),s.X){default:case"left":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?c.left+=window.innerWidth/2-a.width/2:c.left+="container"===this.targetType?l.width/2-a.width/2:l.width/2;break;case"right":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?c.left+=window.innerWidth-a.width:c.left+="container"===this.targetType?l.width-a.width:l.width}switch(s.Y){default:case"top":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?c.top+=window.innerHeight/2-a.height/2:c.top+="container"===this.targetType?l.height/2-a.height/2:l.height/2;break;case"bottom":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?c.top+=window.innerHeight-a.height:c.top+="container"===this.targetType?l.height-a.height:l.height}return c.left+=r,c.top+=o,c}callFlip(t){const i=this.getRelateToElement();eke(this.element,i,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,t,this.fixedParent)}callFit(t){if(0!==Yb(this.element,this.viewPortElement).length)if(f(this.viewPortElement)){const i=B9(this.element,this.viewPortElement,t);t.X&&(this.element.style.left=i.left+"px"),t.Y&&(this.element.style.top=i.top+"px")}else{const i=this.checkGetBoundingClientRect(this.element),s=this.checkGetBoundingClientRect(this.viewPortElement);if(f(i)||f(s))return null;t&&!0===t.Y&&(s.top>i.top?this.element.style.top="0px":s.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-s.bottom)+"px")),t&&!0===t.X&&(s.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-s.right)+"px":s.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(s.left-i.left)+"px"))}}checkCollision(){const t=this.collision.X,i=this.collision.Y;"none"===t&&"none"===i||("flip"===t&&"flip"===i?this.callFlip({X:!0,Y:!0}):"fit"===t&&"fit"===i?this.callFit({X:!0,Y:!0}):("flip"===t?this.callFlip({X:!0,Y:!1}):"flip"===i&&this.callFlip({Y:!0,X:!1}),"fit"===t?this.callFit({X:!0,Y:!1}):"fit"===i&&this.callFit({X:!1,Y:!0})))}show(t,i){if(this.wireEvents(),1e3===this.zIndex||!f(i)){const s=f(i)?this.element:i;this.zIndex=zw(s),ht(this.element,{zIndex:this.zIndex})}t=f(t)||"object"!=typeof t?this.showAnimation:t,("none"!==this.collision.X||"none"!==this.collision.Y)&&(W([this.element],ah_CLOSE),z([this.element],ah_OPEN),this.checkCollision(),W([this.element],ah_OPEN),z([this.element],ah_CLOSE)),f(t)?(W([this.element],ah_CLOSE),z([this.element],ah_OPEN),this.trigger("open")):(t.begin=()=>{this.isDestroyed||(W([this.element],ah_CLOSE),z([this.element],ah_OPEN))},t.end=()=>{this.isDestroyed||this.trigger("open")},new mo(t).animate(this.element))}hide(t){t=f(t)||"object"!=typeof t?this.hideAnimation:t,f(t)?(W([this.element],ah_OPEN),z([this.element],ah_CLOSE),this.trigger("close")):(t.end=()=>{this.isDestroyed||(W([this.element],ah_OPEN),z([this.element],ah_CLOSE),this.trigger("close"))},new mo(t).animate(this.element)),this.unwireEvents()}getScrollableParent(t){return this.checkFixedParent(t),gk(t,this.fixedParent)}checkFixedParent(t){let i=t.parentElement;for(;i&&"HTML"!==i.tagName;){const s=getComputedStyle(i);"fixed"===s.position&&!f(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top)?st(window.scrollY-parseInt(this.element.style.top)):st(parseInt(this.element.style.top)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),i=i.parentElement,!f(this.element)&&f(this.element.offsetParent)&&"fixed"===s.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}}};return al([_("auto")],n.prototype,"height",void 0),al([_("auto")],n.prototype,"width",void 0),al([_(null)],n.prototype,"content",void 0),al([_("container")],n.prototype,"targetType",void 0),al([_(null)],n.prototype,"viewPortElement",void 0),al([_({X:"none",Y:"none"})],n.prototype,"collision",void 0),al([_("")],n.prototype,"relateTo",void 0),al([di({},Lae)],n.prototype,"position",void 0),al([_(0)],n.prototype,"offsetX",void 0),al([_(0)],n.prototype,"offsetY",void 0),al([_(1e3)],n.prototype,"zIndex",void 0),al([_(!1)],n.prototype,"enableRtl",void 0),al([_("reposition")],n.prototype,"actionOnScroll",void 0),al([_(null)],n.prototype,"showAnimation",void 0),al([_(null)],n.prototype,"hideAnimation",void 0),al([G()],n.prototype,"open",void 0),al([G()],n.prototype,"close",void 0),al([G()],n.prototype,"targetExitViewport",void 0),n=al([as],n),n})();function gk(n,e){const t=getComputedStyle(n),i=[],s=/(auto|scroll)/;let r=n.parentElement;for(;r&&"HTML"!==r.tagName;){const o=getComputedStyle(r);!("absolute"===t.position&&"static"===o.position)&&s.test(o.overflow+o.overflowY+o.overflowX)&&i.push(r),r=r.parentElement}return e||i.push(document),i}function zw(n){let e=n.parentElement;const t=[];for(;e&&"BODY"!==e.tagName;){const a=document.defaultView.getComputedStyle(e,null).getPropertyValue("z-index"),l=document.defaultView.getComputedStyle(e,null).getPropertyValue("position");"auto"!==a&&"static"!==l&&t.push(a),e=e.parentElement}const i=[];for(let a=0;a<document.body.children.length;a++)if(!n.isEqualNode(document.body.children[a])){const l=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("z-index"),h=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("position");"auto"!==l&&"static"!==h&&i.push(l)}i.push("999");const s=[];if(!f(n.parentElement)&&"BODY"!==n.parentElement.tagName){const a=[].slice.call(n.parentElement.children);for(let l=0;l<a.length;l++)if(!n.isEqualNode(a[l])){const h=document.defaultView.getComputedStyle(a[l],null).getPropertyValue("z-index"),c=document.defaultView.getComputedStyle(a[l],null).getPropertyValue("position");"auto"!==h&&"static"!==c&&s.push(h)}}const r=t.concat(i,s),o=Math.max.apply(Math,r)+1;return o>2147483647?2147483647:o}const q9=["north-west","north","north-east","west","east","south-west","south","south-east"],Jz="e-resize-handle",WE="e-focused-handle",Mae=["e-restrict-left"],Oae="e-resize-viewport",nke=["north","west","east","south"];let cr,Zb,bk,jw,$9,rC,Cn,Uw,qw,W9=0,G9=0,Pae=0,Fae=0,_O=0,IO=0,TO=null,K9=null,Y9=null,e5=!0,Nae=0,Z9=!0;function oke(n){X9();const e=Be("span",{attrs:{unselectable:"on",contenteditable:"false"}});e.setAttribute("class","e-dialog-border-resize e-"+n),"south"===n&&(e.style.height="2px",e.style.width="100%",e.style.bottom="0px",e.style.left="0px"),"north"===n&&(e.style.height="2px",e.style.width="100%",e.style.top="0px",e.style.left="0px"),"east"===n&&(e.style.height="100%",e.style.width="2px",e.style.right="0px",e.style.top="0px"),"west"===n&&(e.style.height="100%",e.style.width="2px",e.style.left="0px",e.style.top="0px"),cr.appendChild(e)}function Bae(n){let e;return f(n)||(e="string"==typeof n?document.querySelector(n):n),e}function Hae(n){f(n)&&(n=this);const e=cr.querySelectorAll("."+Jz);for(let i=0;i<e.length;i++)Zb=e[i],k.add(Zb,"mousedown",zae,n),k.add(Zb,"msie"===q.info.name?"pointerdown":"touchstart",jae,n);const t=cr.querySelectorAll(".e-dialog-border-resize");if(!f(t))for(let i=0;i<t.length;i++)Zb=t[i],k.add(Zb,"mousedown",zae,n),k.add(Zb,"msie"===q.info.name?"pointerdown":"touchstart",jae,n)}function Vae(n){return n.indexOf("mouse")>-1?"mouse":"touch"}function zae(n){if(n.preventDefault(),cr=n.target.parentElement,X9(),_O=n.pageX,IO=n.pageY,n.target.classList.add(WE),!f(TO)&&(qw=this,!0===TO(n,qw)))return;this.targetEle&&cr&&cr.querySelector(".e-dlg-resizable")&&(Cn=null,rC=this.targetEle.clientWidth,jw=this.targetEle.clientHeight);const e=f(Cn)?document:Cn;k.add(e,"mousemove",DO,this),k.add(document,"mouseup",t5,this);for(let t=0;t<Mae.length;t++)e5=!cr.classList.contains(Mae[t])}function t5(n){const e="msie"===q.info.name?"pointermove":"touchmove",t="msie"===q.info.name?"pointerup":"touchend",i=f(Cn)?document:Cn,s="msie"===q.info.name?"pointerdown":"touchstart";k.remove(i,"mousemove",DO),k.remove(i,e,DO),k.remove(i,s,DO),f(document.body.querySelector("."+WE))||document.body.querySelector("."+WE).classList.remove(WE),f(Y9)||(qw=this,Y9(n,qw)),k.remove(document,"mouseup",t5),k.remove(document,t,t5)}function X9(){W9=parseFloat(getComputedStyle(cr,null).getPropertyValue("width").replace("px","")),G9=parseFloat(getComputedStyle(cr,null).getPropertyValue("height").replace("px","")),Pae=cr.getBoundingClientRect().left,Fae=cr.getBoundingClientRect().top}function jae(n){cr=n.target.parentElement,X9();const e=n.touches?n.changedTouches[0]:n;if(_O=e.pageX,IO=e.pageY,!f(TO)&&(qw=this,!0===TO(n,qw)))return;const t="msie"===q.info.name?"pointermove":"touchmove",i="msie"===q.info.name?"pointerup":"touchend",s=f(Cn)?document:Cn;k.add(s,t,DO,this),k.add(document,i,t5)}function DO(n){if(n.target.classList.contains(Jz)&&n.target.classList.contains(WE)?Zb=n.target:f(document.body.querySelector("."+WE))||(Zb=document.body.querySelector("."+WE)),!f(Zb)){let e="";for(let t=0;t<q9.length;t++)Zb.classList.contains("e-"+q9[t])&&(e=q9[t]);switch(f(K9)||(qw=this,K9(n,qw)),e){case"south":Q9(n);break;case"north":J9(n);break;case"west":e$(n);break;case"east":t$(n);break;case"south-east":Q9(n),t$(n);break;case"south-west":Q9(n),e$(n);break;case"north-east":J9(n),t$(n);break;case"north-west":J9(n),e$(n)}}}function Ww(n){return n.getBoundingClientRect()}function Q9(n){const e=document.documentElement.clientHeight;let t=!1;const s=(n.touches?n.changedTouches[0]:n).pageY,r=Ww(cr);let o;f(Cn)||(o=Ww(Cn)),f(Cn)?f(Cn)&&(e-s>=0||r.top<0)&&(t=!0):t=!0;let a=G9+(s-IO);a=a>bk?a:bk;let l=0;f(Cn)||(l=o.top);const h=f(Cn)?0:Cn.offsetHeight-Cn.clientHeight;let c=r.top-l-h/2;if(c=c<0?0:c,r.top>0&&c+a>jw){if(t=!1,cr.classList.contains(Oae))return;return void(cr.style.height=jw-parseInt(c.toString(),10)+"px")}let m=0;if(t){r.top<0&&e+(r.height+r.top)>0&&(m=r.top,a+m<=30&&(a=r.height-(r.height+r.top)+30)),a+r.top>=jw&&(cr.style.height=r.height+(e-(r.height+r.top))+"px");const b=f(Cn)?m:c;a>=bk&&a+b<=jw&&(cr.style.height=a+"px")}}function J9(n){let t,e=!1;const i="mouse"===Vae(n.type)?n.pageY:n.touches[0].pageY,s=Ww(cr);f(Cn)||(t=Ww(Cn)),(!f(Cn)&&s.top-t.top>0||f(Cn)&&i>0)&&(e=!0);const r=G9-(i-IO);if(e&&r>=bk&&r<=jw){let o=0;f(Cn)||(o=t.top);let a=Fae-o+(i-IO);a=a>0?a:1,cr.style.height=r+"px",cr.style.top=a+"px"}}function e$(n){const e=document.documentElement.clientWidth;let i,t=!1;f(Cn)||(i=Ww(Cn));const s="mouse"===Vae(n.type)?n.pageX:n.touches[0].pageX,r=Ww(cr),o=f(Cn)?0:Cn.offsetWidth-Cn.clientWidth;let a=f(Cn)?0:i.left,l=f(Cn)?0:i.width;f(Uw)&&(f(Cn)?Uw=e:(Uw=r.left-a-o/2+r.width,Uw+=l-o-Uw)),(!f(Cn)&&Math.floor(r.left-i.left+r.width+(i.right-r.right))-o<=rC||f(Cn)&&s>=0)&&(t=!0);let h=W9-(s-_O);if(e5&&(h=h>Uw?Uw:h),t&&h>=$9&&h<=rC){let c=0;f(Cn)||(c=i.left);let m=Pae-c+(s-_O);m=m>0?m:1,h!==Nae&&Z9&&(cr.style.width=h+"px"),e5&&(cr.style.left=m+"px",Z9=1!==m)}Nae=h}function t$(n){const e=document.documentElement.clientWidth;let i,t=!1;f(Cn)||(i=Ww(Cn));const r=(n.touches?n.changedTouches[0]:n).pageX,o=Ww(cr);(!f(Cn)&&(o.left-i.left+o.width<=rC||o.right-i.left>=o.width)||f(Cn)&&e-r>0)&&(t=!0);const a=W9+(r-_O);let l=0;if(f(Cn)||(l=i.left),o.left-l+a>rC){if(t=!1,cr.classList.contains(Oae))return;cr.style.width=rC-(o.left-l)+"px"}t&&a>=$9&&a<=rC&&(cr.style.width=a+"px")}function Uae(){const n=cr.querySelectorAll("."+Jz);for(let t=0;t<n.length;t++)te(n[t]);const e=cr.querySelectorAll(".e-dialog-border-resize");if(!f(e))for(let t=0;t<e.length;t++)te(e[t])}var Ks=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class kO extends ii{}Ks([_(!0)],kO.prototype,"isFlat",void 0),Ks([_()],kO.prototype,"buttonModel",void 0),Ks([_("Button")],kO.prototype,"type",void 0),Ks([G()],kO.prototype,"click",void 0);class i5 extends ii{}Ks([_("Fade")],i5.prototype,"effect",void 0),Ks([_(400)],i5.prototype,"duration",void 0),Ks([_(0)],i5.prototype,"delay",void 0);const s5="e-dialog",i$="e-rtl",s$="e-dlg-header-content",qae="e-dlg-header",RO="e-footer-content",n$="e-dlg-modal",Wae="e-icon-dlg-close",Xb="e-dlg-target",ag="e-scroll-disabled",n5="e-dlg-fullscreen",$ae="e-dlg-closeicon-btn",Kae="e-popup-open",r$="Information",Yae="e-scroll-disabled",Zae="e-alert-dialog",Xae="e-confirm-dialog",o$="e-dlg-resizable",r5="e-restrict-left",Qae="e-resize-viewport",a$="user action";let Hs=class extends Qs{constructor(e,t){super(e,t),this.dlgClosedBy=a$}render(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=st(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()}preRender(){if(this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=t=>{this.dlgClosedBy="close icon",this.hide(t)},this.dlgOverlayClickEventHandler=t=>{this.dlgClosedBy="overlayClick",t.preventFocus=!1,this.trigger("overlayClick",t,i=>{i.preventFocus||this.focusContent(),this.dlgClosedBy=a$})},this.l10n=new jo("dialog",{close:"Close"},this.locale),this.checkPositionData(),f(this.target)){const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=t}}isNumberValue(e){return/^[-+]?\d*\.?\d+$/.test(e)}checkPositionData(){if(!f(this.position)){if(!f(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=t}if(!f(this.position.Y)&&"number"!=typeof this.position.Y&&this.isNumberValue(this.position.Y)){const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=t}}}getEle(e,t){let i;for(let s=0;s<e.length;s++)if(e[s].classList.contains(t)){i=e[s];break}return i}getMinHeight(){let e="0px",t="0px";f(this.element.querySelector("."+s$))||(e=getComputedStyle(this.headerContent).height);const i=this.getEle(this.element.children,RO);f(i)||(t=getComputedStyle(i).height);const s=parseInt(e.slice(0,e.indexOf("p")),10),r=parseInt(t.slice(0,t.indexOf("p")),10);return function ake(n){bk=n}(s+30+(isNaN(r)?0:r)),s+30+r}onResizeStart(e,t){return t.trigger("resizeStart",e),e.cancel}onResizing(e,t){t.trigger("resizing",e)}onResizeComplete(e,t){t.trigger("resizeStop",e)}setResize(){if(this.enableResize){if(this.isBlazorServerRender()&&!f(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(o$);const e=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth;let i="";for(let s=0;s<this.resizeHandles.length;s++){if("All"===this.resizeHandles[s]){i="south north east west north-east north-west south-east south-west";break}{let r="";switch(this.resizeHandles[s].toString()){case"SouthEast":r="south-east";break;case"SouthWest":r="south-west";break;case"NorthEast":r="north-east";break;case"NorthWest":r="north-west";break;default:r=this.resizeHandles[s].toString()}i+=r.toLocaleLowerCase()+" "}}this.enableRtl&&"south-east"===i.trim()?i="south-west":this.enableRtl&&"south-west"===i.trim()&&(i="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(r5):this.isModal&&this.target===document.body&&this.element.classList.add(Qae),function rke(n){TO=n.resizeBegin,K9=n.resizing,Y9=n.resizeComplete,cr=Bae(n.element),Cn=Bae(n.boundary);const e=n.direction.split(" ");for(let t=0;t<e.length;t++)if(nke.indexOf(e[t])>=0&&e[t])oke(e[t]);else if(""!==e[t].trim()){const i=Be("div",{className:"e-icons "+Jz+" e-"+e[t]});cr.appendChild(i)}bk=n.minHeight,$9=n.minWidth,rC=n.maxWidth,jw=n.maxHeight,n.proxy&&n.proxy.element&&n.proxy.element.classList.contains("e-dialog")?Hae(n.proxy):Hae()}({element:this.element,direction:i,minHeight:parseInt(e.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else Uae(),this.unWireWindowResizeEvent(),this.element.classList.remove(this.isModal?r5:Qae),this.element.classList.remove(o$)}getFocusElement(e){const i=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:i[i.length-1]}}keyDown(e){if(9===e.keyCode&&this.isModal){let r;f(this.btnObj)||(r=this.btnObj[this.btnObj.length-1]),f(this.btnObj)&&!f(this.ftrTemplateContent)&&(r=this.getFocusElement(this.ftrTemplateContent)),f(this.btnObj)&&f(this.ftrTemplateContent)&&!f(this.contentEle)&&(r=this.getFocusElement(this.contentEle)),!f(r)&&document.activeElement===r.element&&!e.shiftKey&&(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),f(r)||r.element.focus())}const t=document.activeElement,i=["input","textarea"].indexOf(t.tagName.toLowerCase())>-1;let s=!1;if(i||(s=t.hasAttribute("contenteditable")&&"true"===t.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&(this.dlgClosedBy="escape",document.querySelector(".e-popup-open:not(.e-dialog)")||this.hide(e)),13===e.keyCode&&!e.ctrlKey&&"textarea"!==t.tagName.toLowerCase()&&i&&!f(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===t.tagName.toLowerCase()||s)&&!f(this.primaryButtonEle)){let r;this.buttons.some((a,l)=>{r=l;let h=a.buttonModel;return!f(h)&&!0===h.isPrimary})&&"function"==typeof this.buttons[r].click&&setTimeout(()=>{this.buttons[r].click.call(this,e)})}}initialize(){f(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||z([this.element],s5),q.isDevice&&z([this.element],"e-device"),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()}initRender(){if(this.initialRender=!0,this.isBlazorServerRender()||Rt(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&f(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&f(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""!==this.header&&!f(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||f(this.footerTemplate)?f(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&!f(this.buttons[0].buttonModel)&&""===this.footerTemplate&&this.setButton(),this.allowDragging&&!f(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(Rt(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&f(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(let e=0,t=this.dlgContainer.children;e<t.length;e++)t[e].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=t[e])}if(!0!==this.element.classList.contains(Zae)&&!0!==this.element.classList.contains(Xae)&&!f(this.element.parentElement)){const e=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),e.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}f(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new fc(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:e=>{const t={container:this.isModal?this.dlgContainer:this.element,element:this.element,target:this.target,preventFocus:!1};this.enableResize&&this.resetResizeIcon(),this.trigger("open",t,i=>{i.preventFocus||this.focusContent()})},close:e=>{this.isModal&&z([this.dlgOverlay],"e-fade"),this.unBindEvent(this.element),this.isModal&&(this.dlgContainer.style.display="none"),this.trigger("close",this.closeArgs);const t=document.activeElement;!f(t)&&!f(t.blur)&&t.blur(),!f(this.storeActiveElement)&&!f(this.storeActiveElement.focus)&&this.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(z([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1}resetResizeIcon(){const e=this.getMinHeight();if(this.targetEle.offsetHeight<e){const i=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));f(i)||(i.style.bottom="-"+e.toString()+"px")}}setOverlayZindex(e){let t;t=f(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()}positionChange(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()}setPopupPosition(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})}setAllowDragging(){this.dragObj=new vn(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:t=>{this.trigger("dragStart",t,i=>{})},dragStop:t=>{this.isModal&&(f(this.position)||this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y),this.element.style.position="relative"),this.trigger("dragStop",t),this.element.classList.remove(r5)},drag:t=>{this.trigger("drag",t)}}),f(this.targetEle)||(this.dragObj.dragArea=this.targetEle)}setButton(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(let t=0;t<this.buttons.length;t++){const i=f(this.buttons[t].type)?"button":this.buttons[t].type.toLowerCase(),s=this.createElement("button",{attrs:{type:i}});this.buttonContent.push(s.outerHTML)}this.setFooterTemplate()}let e;for(let t=0,i=this.element.children;t<i.length;t++)i[t].classList.contains(RO)&&(e=i[t].querySelectorAll("button"));for(let t=0;t<this.buttons.length;t++)this.isBlazorServerRender()||(this.btnObj[t]=new Sa(this.buttons[t].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector("."+RO)),!f(this.ftrTemplateContent)&&e.length>0&&("function"==typeof this.buttons[t].click&&k.add(e[t],"click",this.buttons[t].click,this),"object"==typeof this.buttons[t].click&&k.add(e[t],"click",this.buttonClickHandler.bind(this,t),this)),!this.isBlazorServerRender()&&!f(this.ftrTemplateContent)&&(this.btnObj[t].appendTo(this.ftrTemplateContent.children[t]),this.buttons[t].isFlat&&this.btnObj[t].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])}buttonClickHandler(e){this.trigger("buttons["+e+"].click",{})}setContent(){Rt(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!f(this.content)&&""!==this.content||!this.initialRender)&&("string"!=typeof this.content&&this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),f(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(!this.isBlazorServerRender()&&q.isIE&&""===this.element.style.width&&!f(this.width)&&(this.element.style.width=st(this.width)),this.setMaxHeight())}setTemplate(e,t,i){let s,r,o;r=t.classList.contains(qae)?this.element.id+"header":t.classList.contains(RO)?this.element.id+"footerTemplate":this.element.id+"content",f(e.outerHTML)?("string"==typeof e||"string"!=typeof e)&&("string"==typeof e&&(e=this.sanitizeHelper(e)),s=ji(e),o=e):t.appendChild(e);const a=[];if(!f(s)){const l=!0;for(const h of s({},this,i,r,l))a.push(h);mi([].slice.call(a),t)}}sanitizeHelper(e){if(this.enableHtmlSanitizer){const t=hr.beforeSanitize();Ae(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t),t.cancel&&!f(t.helper)?e=t.helper(e):t.cancel||(e=hr.serializeValue(t,e))}return e}setMaxHeight(){if(!this.allowMaxHeight)return;const e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!f(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,q.isIE&&"auto"===this.height&&!f(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}setEnableRTL(){this.isBlazorServerRender()||(this.enableRtl?z([this.element],i$):W([this.element],i$)),f(this.element.querySelector(".e-resize-handle"))||(Uae(),this.setResize())}setTargetContent(){if(f(this.content)||""===this.content){const e=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||e)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(t=>{8!==t.nodeType&&this.innerContentElement.appendChild(t)}))}}setHeader(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:qae}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),Rt(this.element,{"aria-labelledby":this.element.id}),this.element.insertBefore(this.headerContent,this.element.children[0])}setFooterTemplate(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:RO}),""===this.footerTemplate||f(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)}createHeaderContent(){f(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:s$}))}renderCloseIcon(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:$ae,attrs:{type:"button"}}),this.closeIconBtnObj=new Sa({cssClass:"e-flat",iconCss:Wae+" e-icons"}),this.closeIconTitle(),f(this.headerContent)?(this.createHeaderContent(),Qr([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):Qr([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))}closeIconTitle(){this.l10n.setLocale(this.locale);const e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)}setCSSClass(e){this.cssClass&&z([this.element],this.cssClass.split(" ")),e&&W([this.element],e.split(" "))}setIsModal(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove(Kae),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),z([this.element],n$),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)}getValidFocusNode(e){let t;for(let i=0;i<e.length;i++){if(t=e[i],(t.clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t}focusableElements(e){if(!f(e)){const i=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(i)}return null}getAutoFocusNode(e){let t=e.querySelector("."+$ae);const s=e.querySelectorAll("[autofocus]");let r=this.getValidFocusNode(s);if(f(r)){if(r=this.focusableElements(this.contentEle),!f(r))return r;if(!f(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=r;return t}disableElement(e,t){const i=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null}focusContent(){const e=this.getAutoFocusNode(this.element),t=f(e)?this.element:e,i=q.userAgent;(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0)&&this.element.focus(),t.focus(),this.bindEvent(this.element)}bindEvent(e){k.add(e,"keydown",this.keyDown,this)}unBindEvent(e){k.remove(e,"keydown",this.keyDown)}updateSanitizeContent(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))}isBlazorServerRender(){return!1}getModuleName(){return"dialog"}onPropertyChanged(e,t){if(this.element.classList.contains(s5))for(const i of Object.keys(e))switch(i){case"content":f(this.content)||""===this.content?f(this.contentEle)||(te(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),f(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?(!this.isBlazorServerRender()||f(this.element.querySelector(".e-dlg-content")))&&this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),te(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||f(this.header)?this.headerEle&&(te(this.headerEle),this.headerEle=null):(!this.isBlazorServerRender()||f(this.element.querySelector(".e-dlg-header-content")))&&this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||f(this.footerTemplate)){if(!this.ftrTemplateContent)return;te(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else(!this.isBlazorServerRender()||f(this.element.querySelector(".e-footer-content")))&&this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(Wae).length>0?this.showCloseIcon||""!==this.header&&!f(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():te(this.closeIcon):(te(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":ht(this.element,{height:st(e.height)});break;case"width":ht(this.element,{width:st(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":{const s=this.buttons.length;!f(this.ftrTemplateContent)&&!this.isBlazorServerRender()&&(te(this.ftrTemplateContent),this.ftrTemplateContent=null);for(let r=0;r<s;r++)f(this.buttons[r].buttonModel)||(this.footerTemplate="",this.setButton());break}case"allowDragging":this.allowDragging&&!f(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){const s=f(t.position.X)?this.position.X:t.position.X,r=f(t.position.Y)?this.position.Y:t.position.Y;this.dlgContainer.classList.contains("e-dlg-"+s+"-"+r)&&this.dlgContainer.classList.remove("e-dlg-"+s+"-"+r)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}}setTarget(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()}updateIsModal(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)f(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",f(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(W([this.element],n$),W([document.body],[Xb,ag]),te(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&k.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}setzIndex(e,t){const i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=zw(e),this.isProtectedOnChange=i,t&&(this.popupObj.zIndex=this.zIndex)}windowResizeHandler(){(function lke(n){rC=n})(this.targetEle.clientWidth),function hke(n){jw=n}(this.targetEle.clientHeight),this.setMaxHeight()}getPersistData(){return this.addOnPersist([])}destroy(){if(this.isDestroyed)return;const e=[i$,n$,o$,r5,n5,"e-device"],t=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(W([this.targetEle],[Xb,ag]),!f(this.element)&&this.element.classList.contains(n5)&&W([document.body],[Xb,ag]),this.isModal&&W([f(this.targetEle)?document.body:this.targetEle],ag),this.unWireEvents(),!f(this.btnObj))for(let i=0;i<this.btnObj.length;i++)this.btnObj[i].destroy();if(f(this.dragObj)||this.dragObj.destroy(),!f(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),W([this.element],e),!f(this.cssClass)&&""!==this.cssClass&&W([this.element],this.cssClass.split(" ")),!f(this.refElement)&&!f(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),te(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(te(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),te(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!f(this.element.children))for(let i=0;i<=this.element.children.length;i++)i-=i,te(this.element.children[i]);for(let i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.isBlazorServerRender()?this.isDestroyed=!0:super.destroy(),this.isReact&&this.clearTemplate()}wireWindowResizeEvent(){window.addEventListener("resize",this.windowResizeHandler.bind(this))}unWireWindowResizeEvent(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))}wireEvents(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&k.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&k.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}unWireEvents(){if(this.showCloseIcon&&k.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&k.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!f(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(let e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&k.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)}refreshPosition(){this.popupObj.refreshPosition()}getDimension(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}}show(e){if(this.element.classList.contains(s5)){if(!this.element.classList.contains(Kae)||!f(e)){f(e)||this.fullScreen(e);const t={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",t,i=>{if(!i.cancel){this.element.style.maxHeight!==t.maxHeight&&(this.allowMaxHeight=!1,this.element.style.maxHeight=t.maxHeight),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&!f(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",W([this.dlgOverlay],"e-fade"),f(this.targetEle)?z([document.body],[Xb,ag]):(this.dlgContainer.style.position=this.targetEle===document.body?"fixed":"absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",z([this.targetEle],[Xb,ag])));const s={name:this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},r=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(r,!0),ht(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect?this.popupObj.show():this.popupObj.show(s),this.dialogOpen=!0;const o=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!0,this.preventVisibility=!0,this.isProtectedOnChange=o}})}this.isReact&&this.renderReactTemplates()}}hide(e){if(this.element.classList.contains(s5)&&this.preventVisibility){const t={cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e,closedBy:this.dlgClosedBy};this.closeArgs=t,this.trigger("beforeClose",t,i=>{if(!i.cancel){this.isModal&&(f(this.targetEle)||W([this.targetEle],[Xb,ag])),document.body.classList.contains(Xb)&&document.body.classList.contains(ag)&&W([document.body],[Xb,ag]);const s={name:this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};"None"===this.animationSettings.effect?this.popupObj.hide():this.popupObj.hide(s),this.dialogOpen=!1;const r=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!1,this.preventVisibility=!1,this.isProtectedOnChange=r}this.dlgClosedBy=a$})}}fullScreen(e){if(e){z([this.element],n5);const s=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=f(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=s,z([document.body],[Xb,ag]),this.allowDragging&&!f(this.dragObj)&&this.dragObj.destroy()}else W([this.element],n5),W([document.body],[Xb,ag]),this.allowDragging&&!f(this.headerContent)&&this.setAllowDragging();return e}getButtons(e){return f(e)?this.btnObj:this.btnObj[e]}};var Jae;Ks([_("")],Hs.prototype,"content",void 0),Ks([_(!0)],Hs.prototype,"enableHtmlSanitizer",void 0),Ks([_(!1)],Hs.prototype,"showCloseIcon",void 0),Ks([_(!1)],Hs.prototype,"isModal",void 0),Ks([_("")],Hs.prototype,"header",void 0),Ks([_(!0)],Hs.prototype,"visible",void 0),Ks([_(!1)],Hs.prototype,"enableResize",void 0),Ks([_(["South-East"])],Hs.prototype,"resizeHandles",void 0),Ks([_("auto")],Hs.prototype,"height",void 0),Ks([_("")],Hs.prototype,"minHeight",void 0),Ks([_("100%")],Hs.prototype,"width",void 0),Ks([_("")],Hs.prototype,"cssClass",void 0),Ks([_(1e3)],Hs.prototype,"zIndex",void 0),Ks([_(null)],Hs.prototype,"target",void 0),Ks([_("")],Hs.prototype,"footerTemplate",void 0),Ks([_(!1)],Hs.prototype,"allowDragging",void 0),Ks([rh([{}],kO)],Hs.prototype,"buttons",void 0),Ks([_(!0)],Hs.prototype,"closeOnEscape",void 0),Ks([di({},i5)],Hs.prototype,"animationSettings",void 0),Ks([di({X:"center",Y:"center"},Lae)],Hs.prototype,"position",void 0),Ks([G()],Hs.prototype,"created",void 0),Ks([G()],Hs.prototype,"open",void 0),Ks([G()],Hs.prototype,"beforeSanitizeHtml",void 0),Ks([G()],Hs.prototype,"beforeOpen",void 0),Ks([G()],Hs.prototype,"close",void 0),Ks([G()],Hs.prototype,"beforeClose",void 0),Ks([G()],Hs.prototype,"dragStart",void 0),Ks([G()],Hs.prototype,"dragStop",void 0),Ks([G()],Hs.prototype,"drag",void 0),Ks([G()],Hs.prototype,"overlayClick",void 0),Ks([G()],Hs.prototype,"resizeStart",void 0),Ks([G()],Hs.prototype,"resizing",void 0),Ks([G()],Hs.prototype,"resizeStop",void 0),Ks([G()],Hs.prototype,"destroyed",void 0),Hs=Ks([as],Hs),function(n){function i(c,m){const b=new Hs(c);return b.appendTo(m),b}function o(c,m){return c.header=f(m.title)?r$:m.title,c.content=f(m.content)?"":m.content,c.isModal=!!f(m.isModal)||m.isModal,c.showCloseIcon=!f(m.showCloseIcon)&&m.showCloseIcon,c.allowDragging=!f(m.isDraggable)&&m.isDraggable,c.closeOnEscape=!f(m.closeOnEscape)&&m.closeOnEscape,c.position=f(m.position)?{X:"center",Y:"top"}:m.position,c.animationSettings=f(m.animationSettings)?{effect:"Fade",duration:400,delay:0}:m.animationSettings,c.cssClass=f(m.cssClass)?"":m.cssClass,c.zIndex=f(m.zIndex)?1e3:m.zIndex,c.open=f(m.open)?null:m.open,c}function h(c,m,b){const v=b;return f(m.text)||(v.buttonModel.content=m.text),f(m.icon)||(v.buttonModel.iconCss=m.icon),f(m.cssClass)||(v.buttonModel.cssClass=m.cssClass),f(m.click)||(v.click=m.click),v}n.alert=function e(c){const m=Be("div",{className:Zae});let b;return document.body.appendChild(m),b=i("string"==typeof c?{content:c,position:{X:"center",Y:"top"},isModal:!0,header:r$,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function s(c){let m={buttons:[]};return m=o(m,c),m=function a(c,m){const b=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return f(m.okButton)?c.buttons=b:c.buttons[0]=h(0,m.okButton,b[0]),c}(m,c),m}(c),m),b.close=()=>{c&&c.close&&c.close.apply(b),b.destroy(),b.element.classList.contains("e-dlg-modal")?(b.element.parentElement.remove(),b.target.classList.remove(Yae)):b.element.remove()},b},n.confirm=function t(c){const m=Be("div",{className:Xae});let b;return document.body.appendChild(m),b=i("string"==typeof c?{position:{X:"center",Y:"top"},content:c,isModal:!0,header:r$,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function r(c){let m={buttons:[]};return m=o(m,c),m=function l(c,m){const b={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},v={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return c.buttons[0]=f(m.okButton)?b:h(0,m.okButton,b),c.buttons[1]=f(m.cancelButton)?v:h(0,m.cancelButton,v),c}(m,c),m}(c),m),b.close=()=>{c&&c.close&&c.close.apply(b),b.destroy(),b.element.classList.contains("e-dlg-modal")?(b.element.parentElement.remove(),b.target.classList.remove(Yae)):b.element.remove()},b}}(Jae||(Jae={}));var dr=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const l$="e-tooltip",h$="e-tooltip-wrap",tle="e-tip-content",AO="e-arrow-tip",ile="e-arrow-tip-outer",o5="e-arrow-tip-inner",LO="e-tip-bottom",c$="e-tip-top",sle="e-tip-left",d$="e-tip-right",u$="e-popup",a5="e-popup-open",p$="e-popup-close",nle="e-tooltip-popup-container";class f$ extends ii{}dr([_({effect:"FadeIn",duration:150,delay:0})],f$.prototype,"open",void 0),dr([_({effect:"FadeOut",duration:150,delay:0})],f$.prototype,"close",void 0);let $n=class extends Qs{constructor(e,t){super(e,t),this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.isBodyContainer=!0}initialize(){this.formatPosition(),z([this.element],l$)}formatPosition(){0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?[this.tooltipPositionY,this.tooltipPositionX]=this.position.split(/(?=[A-Z])/):[this.tooltipPositionX,this.tooltipPositionY]=this.position.split(/(?=[A-Z])/)}renderArrow(){this.setTipClass(this.position);const e=this.createElement("div",{className:AO+" "+this.tipClass});e.appendChild(this.createElement("div",{className:ile+" "+this.tipClass})),e.appendChild(this.createElement("div",{className:o5+" "+this.tipClass})),this.tooltipEle.appendChild(e)}setTipClass(e){this.tipClass=0===e.indexOf("Right")?sle:0===e.indexOf("Bottom")?c$:0===e.indexOf("Left")?d$:LO}renderPopup(e){const t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new fc(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})}getTooltipPosition(e){this.tooltipEle.style.display="block";const t=Nh(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),i=this.calculateTooltipOffset(this.position),s=this.calculateElementPosition(t,i),a=this.collisionFlipFit(e,s[0],s[1]);return this.tooltipEle.style.display="",a}windowResize(){this.reposition(this.findTarget())}reposition(e){if(this.popupObj&&e){const t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()}}openPopupHandler(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)}closePopupHandler(){this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)}calculateTooltipOffset(e){const t={top:0,left:0},i=this.tooltipEle.offsetWidth,s=this.tooltipEle.offsetHeight,r=X("."+AO,this.tooltipEle),o=r?r.offsetWidth:0,a=r?r.offsetHeight:0;let l=this.showTipPointer?0:8;const h=a/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),c=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(l+=2),e){case"RightTop":t.left+=o+l,t.top-=s-h;break;case"RightCenter":t.left+=o+l,t.top-=s/2;break;case"RightBottom":t.left+=o+l,t.top-=h;break;case"BottomRight":t.top+=a+l,t.left-=c;break;case"BottomCenter":t.top+=a+l,t.left-=i/2;break;case"BottomLeft":t.top+=a+l,t.left-=i-c;break;case"LeftBottom":t.left-=o+i+l,t.top-=h;break;case"LeftCenter":t.left-=o+i+l,t.top-=s/2;break;case"LeftTop":t.left-=o+i+l,t.top-=s-h;break;case"TopLeft":t.top-=s+a+l,t.left-=i-c;break;case"TopRight":t.top-=s+a+l,t.left-=c;break;default:t.top-=s+a+l,t.left-=i/2}return t.left+=this.offsetX,t.top+=this.offsetY,t}updateTipPosition(e){const t=bt("."+AO+",."+ile+",."+o5,this.tooltipEle);W(t,[LO,c$,sle,d$]),this.setTipClass(e),z(t,this.tipClass)}adjustArrow(e,t,i,s){if(!1===this.showTipPointer)return;let r,o;this.updateTipPosition(t),this.tooltipEle.style.display="block";const a=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,h=X("."+AO,this.tooltipEle),c=X("."+o5,this.tooltipEle),m=h.offsetWidth,b=h.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===LO||this.tipClass===c$){if(this.tipClass===LO?(o="99.9%",c.style.top="-"+(b-2)+"px"):(o=-(b-1)+"px",c.style.top="-"+(b-6)+"px"),e){const v="Center"!==i||a>e.offsetWidth||this.mouseTrail;r=v&&"Left"===i||!v&&"End"===this.tipPointerPosition?a-m-2+"px":v&&"Right"===i||!v&&"Start"===this.tipPointerPosition?"2px":a/2-m/2+"px"}}else{this.tipClass===d$?(r="99.9%",c.style.left="-"+(m-2)+"px"):(r=-(m-1)+"px",c.style.left=m-2-m+"px");const v="Center"!==s||l>e.offsetHeight||this.mouseTrail;o=v&&"Top"===s||!v&&"End"===this.tipPointerPosition?l-b-2+"px":v&&"Bottom"===s||!v&&"Start"===this.tipPointerPosition?"2px":l/2-b/2+"px"}h.style.top=o,h.style.left=r}renderContent(e){const t=X("."+tle,this.tooltipEle);if(this.cssClass&&z([this.tooltipEle],this.cssClass.split(" ")),e&&!f(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),f(this.content))e&&!f(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content"));else if(t.innerHTML="",this.content instanceof HTMLElement)t.appendChild(this.content);else if("string"==typeof this.content){this.enableHtmlSanitizer&&this.setProperties({content:hr.sanitize(this.content)},!0);const r=ji(this.content)({},this,"content",this.element.id+"content",void 0,void 0,t);if(r){if(this.enableHtmlParse){const o=r.length;for(var i=0;i<o;i++)mi(r,t)}else t.textContent=this.content;this.enableHtmlParse?mi(r,t):t.textContent=this.content}}else{const r=ji(this.content)({},this,"content",this.element.id+"content",void 0,void 0,t);r&&mi(r,t),this.renderReactTemplates()}}renderCloseIcon(){if(!this.isSticky)return;const e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),k.add(e,q.touchStartEvent,this.onStickyClose,this)}addDescribedBy(e,t){const i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),Rt(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})}removeDescribedBy(e){const t=e.getAttribute("data-tooltip-id"),i=(e.getAttribute("aria-describedby")||"").split(/\s+/),s=i.indexOf(t);-1!==s&&i.splice(s,1),e.removeAttribute("data-tooltip-id");const r=i.join(" ").trim();r?e.setAttribute("aria-describedby",r):e.removeAttribute("aria-describedby")}tapHoldHandler(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)}touchEndHandler(e){this.isSticky||(this.autoCloseTimer=setTimeout(()=>{this.close()},1500))}targetClick(e){let t;t=this.target?B(e.target,this.target):this.element,!f(t)&&(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))}targetHover(e){let t;if(t=this.target?B(e.target,this.target):this.element,f(t)||null!==t.getAttribute("data-tooltip-id")&&0===this.closeDelay)return;const i=[].slice.call(bt('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));for(const s of i)this.restoreElement(s);this.showTooltip(t,this.animation.open,e)}mouseMoveBeforeOpen(e){this.mouseMoveEvent=e}mouseMoveBeforeRemove(){this.mouseMoveTarget&&k.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)}showTooltip(e,t,i){clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,k.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:this.tooltipEle,isInteracted:!f(i)},this.trigger("beforeRender",this.tooltipEventArgs,(r=>{this.beforeRenderCallback(r,e,i,t)}).bind(this))}beforeRenderCallback(e,t,i,s){e.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,f(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?Tn(this.element.getAttribute("id")):Tn("tooltip"),this.tooltipEle=this.createElement("div",{className:h$+" "+u$+" e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+st(this.width)+";height:"+st(this.height)+";position:absolute;"}),this.tooltipBeforeRender(t,this),this.tooltipAfterRender(t,i,s,this)):t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),mo.stop(this.tooltipEle),this.reposition(t),this.tooltipAfterRender(t,i,s,this)))}appendContainer(e){"string"==typeof this.container?"body"===this.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=X(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer="BODY"===this.containerElement.tagName),this.isBodyContainer||z([this.containerElement],nle),this.containerElement.appendChild(e.tooltipEle)}tooltipBeforeRender(e,t){e&&(q.isDevice&&z([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=st(t.width)),t.tooltipEle.appendChild(t.createElement("div",{className:tle})),this.appendContainer(t),W([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),z([t.tooltipEle],a5),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY),mo.stop(t.tooltipEle),t.reposition(e))}tooltipAfterRender(e,t,i,s){if(e){W([s.tooltipEle],a5),z([s.tooltipEle],p$),s.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:s.tooltipEle,isInteracted:!f(t)},s.needTemplateReposition()&&!s.mouseTrail&&(s.tooltipEle.style.display="none");const r=o=>{s.beforeOpenCallback(o,e,i,t)};s.trigger("beforeOpen",s.tooltipEventArgs,r.bind(s))}}beforeOpenCallback(e,t,i,s){if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(t);else{let r={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};"None"===i.effect&&(r=void 0),this.openDelay>0?this.showTimer=setTimeout(()=>{this.mouseTrail&&k.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this),this.popupObj&&(this.popupObj.show(r,t),this.mouseMoveEvent&&this.mouseTrail&&this.onMouseMove(this.mouseMoveEvent))},this.openDelay):this.popupObj&&this.popupObj.show(r,t)}s&&this.wireMouseEvents(s,t)}needTemplateReposition(){return!f(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef}checkCollision(e,t,i){const s={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=Yb(this.tooltipEle,this.checkCollideTarget(),t,i);return r.length>0&&(s.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,s.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),s}calculateElementPosition(e,t){return[this.isBodyContainer?e.left+t.left:e.left-this.containerElement.offsetLeft+t.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+t.top:e.top-this.containerElement.offsetTop+t.top+window.pageYOffset+this.containerElement.scrollTop]}collisionFlipFit(e,t,i){const s=this.checkCollision(e,t,i);let r=s.position;this.tooltipPositionY!==s.vertical&&(r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?s.vertical+this.tooltipPositionX:this.tooltipPositionX+s.vertical),this.tooltipPositionX!==s.horizontal&&(0===r.indexOf("Left")&&(s.vertical="LeftTop"===r||"LeftCenter"===r?"Top":"Bottom",r=s.vertical+"Left"),0===r.indexOf("Right")&&(s.vertical="RightTop"===r||"RightCenter"===r?"Top":"Bottom",r=s.vertical+"Right"),s.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:r},this.trigger("beforeCollision",this.tooltipEventArgs);const o=s.vertical,a=s.horizontal;if(s.position!==r){const c=Nh(e,a,o,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,r,a,o);const m=this.calculateTooltipOffset(r);m.top-=this.getOffSetPosition("TopBottom",r,this.offsetY),m.left-=this.getOffSetPosition("RightLeft",r,this.offsetX),s.position=r;const b=this.calculateElementPosition(c,m);s.left=b[0],s.top=b[1]}else this.adjustArrow(e,r,a,o);const l={left:s.left,top:s.top},h=this.isBodyContainer?B9(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},l).left:l.left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){const c=X("."+AO,this.tooltipEle);let m=parseInt(c.style.left,10)-(h-s.left);m<0?m=0:m+c.offsetWidth>this.tooltipEle.clientWidth&&(m=this.tooltipEle.clientWidth-c.offsetWidth),c.style.left=m.toString()+"px"}return this.tooltipEle.style.display="",l.left=h,l}getOffSetPosition(e,t,i){return-1!==e.indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!==e.indexOf(t.split(/(?=[A-Z])/)[0])?2*i:0}checkCollideTarget(){return!this.windowCollision&&this.target?this.element:null}hideTooltip(e,t,i){this.closeDelay>0?(clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(()=>{this.closeDelay&&this.tooltipEle&&this.isTooltipOpen||this.tooltipHide(e,t,i)},this.closeDelay)):this.tooltipHide(e,t,i)}tooltipHide(e,t,i){let s;s=t?this.target?i||t.target:this.element:X('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:s,event:t||null,element:this.tooltipEle,isInteracted:!f(t)},this.trigger("beforeClose",this.tooltipEventArgs,r=>{r.cancel?this.isHidden=!1:(this.mouseMoveBeforeRemove(),this.popupHide(e,s))})}popupHide(e,t){t&&this.restoreElement(t),this.isHidden=!0;let i={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(i=void 0),this.popupObj&&this.popupObj.hide(i)}restoreElement(e){this.unwireMouseEvents(e),f(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)}clear(){this.tooltipEle&&(W([this.tooltipEle],p$),z([this.tooltipEle],a5)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&Yt(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)}tooltipHover(e){this.tooltipEle&&(this.isTooltipOpen=!0)}tooltipMouseOut(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())}onMouseOut(e){const t=e.relatedTarget;if(t&&!this.mouseTrail){const i=B(t,`.${h$}.e-lib.${u$}`);i?k.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()}tooltipElementMouseOut(e){this.hideTooltip(this.animation.close,e,this.findTarget()),k.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()}onStickyClose(e){this.close()}onMouseMove(e){let t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),mo.stop(this.tooltipEle),W([this.tooltipEle],p$),z([this.tooltipEle],a5),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);const s=this.calculateTooltipOffset(this.position),a=this.checkCollision(e.target,t+s.left+this.offsetX,i+s.top+this.offsetY);if(this.tooltipPositionX!==a.horizontal||this.tooltipPositionY!==a.vertical){const l=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?a.vertical+a.horizontal:a.horizontal+a.vertical;a.position=l,this.adjustArrow(e.target,a.position,a.horizontal,a.vertical);const h=this.calculateTooltipOffset(a.position);a.left=t+h.left-this.offsetX,a.top=i+h.top-this.offsetY}this.tooltipEle.style.left=a.left+"px",this.tooltipEle.style.top=a.top+"px"}keyDown(e){this.tooltipEle&&27===e.keyCode&&this.close()}touchEnd(e){this.tooltipEle&&null===B(e.target,"."+l$)&&!this.isSticky&&this.close()}scrollHandler(e){this.tooltipEle&&(B(e.target,`.${h$}.e-lib.${u$}`)||this.close())}render(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()}preRender(){this.tipClass=LO,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0}wireEvents(e){const t=this.getTriggerList(e);for(const i of t){if("Custom"===i)return;"Focus"===i&&this.wireFocusEvents(),"Click"===i&&k.add(this.element,q.touchStartEvent,this.targetClick,this),"Hover"===i&&(q.isDevice?(this.touchModule=new Lr(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),k.add(this.element,q.touchEndEvent,this.touchEndHandler,this)):k.add(this.element,"mouseover",this.targetHover,this))}k.add(document,"touchend",this.touchEnd,this),k.add(document,"scroll wheel",this.scrollHandler,this),k.add(window,"resize",this.windowResize,this),k.add(document,"keydown",this.keyDown,this)}getTriggerList(e){return"Auto"===e&&(e=q.isDevice?"Hover":"Hover Focus"),e.split(" ")}wireFocusEvents(){if(f(this.target))k.add(this.element,"focus",this.targetHover,this);else{const e=[].slice.call(bt(this.target,this.element));for(const t of e)k.add(t,"focus",this.targetHover,this)}}wireMouseEvents(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&k.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&k.add(t,"mouseleave",this.onMouseOut,this),this.closeDelay&&(k.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),k.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&k.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))}unwireEvents(e){const t=this.getTriggerList(e);for(const i of t){if("Custom"===i)return;"Focus"===i&&this.unwireFocusEvents(),"Click"===i&&k.remove(this.element,q.touchStartEvent,this.targetClick),"Hover"===i&&(q.isDevice?(this.touchModule&&this.touchModule.destroy(),k.remove(this.element,q.touchEndEvent,this.touchEndHandler)):k.remove(this.element,"mouseover",this.targetHover))}k.remove(document,"touchend",this.touchEnd),k.remove(document,"scroll wheel",this.scrollHandler),k.remove(window,"resize",this.windowResize),k.remove(document,"keydown",this.keyDown)}unwireFocusEvents(){if(f(this.target))k.remove(this.element,"focus",this.targetHover);else{const e=[].slice.call(bt(this.target,this.element));for(const t of e)k.remove(t,"focus",this.targetHover)}}unwireMouseEvents(e){if(!this.isSticky){const t=this.getTriggerList(this.opensOn);for(const i of t)"Focus"===i&&k.remove(e,"blur",this.onMouseOut),"Hover"===i&&!q.isDevice&&k.remove(e,"mouseleave",this.onMouseOut);this.closeDelay&&(k.remove(e,"mouseenter",this.tooltipHover),k.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&k.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)}findTarget(){return X('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)}getModuleName(){return"tooltip"}getPersistData(){return this.addOnPersist([])}onPropertyChanged(e,t){const i=this.findTarget();for(const s of Object.keys(e))switch(s){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=st(e.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=st(e.height),this.reposition(i));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){const r=X("."+o5,this.tooltipEle);r.style.top=r.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){const r=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+r).toString()+"px"}break;case"offsetY":if(this.tooltipEle){const r=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+r).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&W([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&z([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?z([this.tooltipEle],"e-rtl"):W([this.tooltipEle],"e-rtl"));break;case"container":f(this.containerElement)||W([this.containerElement],nle),this.container=e.container,this.tooltipEle&&i&&(this.appendContainer(this),this.reposition(i))}}open(e,t){f(t)&&(t=this.animation.open),f(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,t)}close(e){e||(e=this.animation.close),this.hideTooltip(e)}refresh(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)}destroy(){super.destroy(),this.tooltipEle&&Yt(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),W([this.element],l$),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null}};dr([_("auto")],$n.prototype,"width",void 0),dr([_("auto")],$n.prototype,"height",void 0),dr([_()],$n.prototype,"content",void 0),dr([_("body")],$n.prototype,"container",void 0),dr([_()],$n.prototype,"target",void 0),dr([_("TopCenter")],$n.prototype,"position",void 0),dr([_(0)],$n.prototype,"offsetX",void 0),dr([_(0)],$n.prototype,"offsetY",void 0),dr([_(!0)],$n.prototype,"showTipPointer",void 0),dr([_(!0)],$n.prototype,"enableHtmlParse",void 0),dr([_(!1)],$n.prototype,"windowCollision",void 0),dr([_("Auto")],$n.prototype,"tipPointerPosition",void 0),dr([_("Auto")],$n.prototype,"opensOn",void 0),dr([_(!1)],$n.prototype,"mouseTrail",void 0),dr([_(!1)],$n.prototype,"isSticky",void 0),dr([di({},f$)],$n.prototype,"animation",void 0),dr([_(0)],$n.prototype,"openDelay",void 0),dr([_(0)],$n.prototype,"closeDelay",void 0),dr([_()],$n.prototype,"cssClass",void 0),dr([_(!1)],$n.prototype,"enableHtmlSanitizer",void 0),dr([G()],$n.prototype,"beforeRender",void 0),dr([G()],$n.prototype,"beforeOpen",void 0),dr([G()],$n.prototype,"afterOpen",void 0),dr([G()],$n.prototype,"beforeClose",void 0),dr([G()],$n.prototype,"afterClose",void 0),dr([G()],$n.prototype,"beforeCollision",void 0),dr([G()],$n.prototype,"created",void 0),dr([G()],$n.prototype,"destroyed",void 0),$n=dr([as],$n);const Bh={},MO="e-spin-show",OO="e-spin-hide",ole="e-spin-material",ale="e-spin-fabric",lle="e-spin-fluent",hle="e-spin-tailwind",Pke="e-spin-bootstrap",cle="e-spin-bootstrap4",dle="e-spin-bootstrap5",ule="e-spin-high-contrast",h5="e-spinner-pane",m$="e-spinner-inner",c5="e-path-circle",d5="e-spin-template";function vp(n,e){if(!n.target)return;let t;const i=f(e)?Be:e;let s=function i1e(n,e){const t=e("div",{}),i=e("div",{});return t.classList.add(h5),i.classList.add(m$),n.appendChild(t),t.appendChild(i),{wrap:t,inner_wrap:i}}(n.target,i);if(f(n.cssClass)||s.wrap.classList.add(n.cssClass),f(n.template)&&f(null)){const r=f(n.type)?function $ke(n){return window.getComputedStyle(n,":after").getPropertyValue("content").replace(/['"]+/g,"")}(s.wrap):n.type;t=function e1e(n,e){let t;switch(e){case"Material":case"Fabric":case"Tailwind":case"Tailwind-dark":case"Fluent":default:t=30;break;case"Bootstrap4":case"Bootstrap5":t=36}return n=n?parseFloat(n+""):t,"Bootstrap"===e?n:n/2}(f(n.width)?void 0:n.width,r),function ple(n,e,t,i){const s=e.querySelector("."+m$),r=s.querySelector("svg");switch(f(r)||s.removeChild(r),n){case"Material":!function Hke(n,e,t){const i=Gw();Bh[i]={timeOut:0,type:"Material",radius:e},b$(n,i,0,ole),y$(e,n,"Material",ole)}(s,t);break;case"Fabric":!function Uke(n,e,t){const i=Gw();Bh[i]={timeOut:0,type:"Fabric",radius:e},p5(n,i,ale),f5(e,n,ale)}(s,t);break;case"Fluent":!function qke(n,e,t){const i=Gw();Bh[i]={timeOut:0,type:"Fluent",radius:e},p5(n,i,lle),f5(e,n,lle)}(s,t);break;case"Bootstrap":!function Kke(n,e,t){const i=Gw();Bh[i]={timeOut:0,type:"Bootstrap",radius:e},function Yke(n,e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=64,r=32,o=2;i.setAttribute("id",e),i.setAttribute("class",Pke),i.setAttribute("viewBox","0 0 "+s+" "+s),n.insertBefore(i,n.firstChild);for(let a=0;a<=7;a++){const l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",c5+"_"+a),l.setAttribute("r",o+""),l.setAttribute("transform","translate("+r+","+r+")"),i.appendChild(l)}}(n,i),function Zke(n,e){const t=n.querySelector("svg.e-spin-bootstrap"),i=0,s=0,r=24;t.style.width=t.style.height=e+"px";let o=90;for(let a=0;a<=7;a++){const l=v$(i,s,r,o),h=t.querySelector("."+c5+"_"+a);h.setAttribute("cx",l.x+""),h.setAttribute("cy",l.y+""),o=o>=360?0:o,o+=45}}(n,e)}(s,t);break;case"HighContrast":!function Gke(n,e,t){const i=Gw();Bh[i]={timeOut:0,type:"HighContrast",radius:e},p5(n,i,ule),f5(e,n,ule)}(s,t);break;case"Bootstrap4":!function Vke(n,e,t){const i=Gw();Bh[i]={timeOut:0,type:"Bootstrap4",radius:e},b$(n,i,0,cle),y$(e,n,"Bootstrap4",cle)}(s,t);break;case"Bootstrap5":!function zke(n,e,t){const i=Gw();Bh[i]={timeOut:0,type:"Bootstrap5",radius:e},b$(n,i,0,dle),y$(e,n,"Bootstrap5",dle)}(s,t);break;case"Tailwind":case"Tailwind-dark":!function Wke(n,e,t){const i=Gw();Bh[i]={timeOut:0,type:"Tailwind",radius:e},p5(n,i,hle),f5(e,n,hle)}(s,t)}}(r,s.wrap,t),f(n.label)||function Bke(n,e,t){const i=t("div",{});i.classList.add("e-spin-label"),i.innerHTML=e,n.appendChild(i)}(s.inner_wrap,n.label,i)}else{const r=f(n.template)?null:n.template;s.wrap.classList.add(d5),function Jke(n,e,t){f(t)||n.classList.add(t),n.querySelector(".e-spinner-inner").innerHTML=e}(s.wrap,r,null)}s.wrap.classList.add(OO),s=null}function Xke(n,e){const t=[],i=n,s=e;let r=!1,o=1;return function a(l){t.push(l),(l!==s||1===o)&&(l<=i&&l>1&&!r?l=parseFloat((l-.2).toFixed(2)):1===l?(l=7,l=parseFloat((l+.2).toFixed(2)),r=!0):l<8&&r?8===(l=parseFloat((l+.2).toFixed(2)))&&(r=!1):l<=8&&!r&&(l=parseFloat((l-.2).toFixed(2))),++o,a(l))}(i),t}function Gw(){let n="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let t=0;t<5;t++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}function p5(n,e,t,i){const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",e),s.setAttribute("class",t);const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",c5);const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-arc"),n.insertBefore(s,n.firstChild),s.appendChild(r),s.appendChild(o)}function b$(n,e,t,i){const s=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",i),s.setAttribute("id",e),r.setAttribute("class",c5),n.insertBefore(s,n.firstChild),s.appendChild(r)}function fle(n){(function s1e(n,e,t,i,s,r,o){const a=++o.globalInfo[o.uniqueID].previousId,l=(new Date).getTime(),h=e-n,c=function n1e(n){return parseFloat(n)}(2*o.globalInfo[o.uniqueID].radius+""),m=mle(c),b=-90*(o.globalInfo[o.uniqueID].count||0);!function v(E){const D=Math.max(0,Math.min((new Date).getTime()-l,i));(function w(E,D){if(!f(D.querySelector("svg.e-spin-material"))&&!f(D.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){const N=D.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");N.setAttribute("stroke-dashoffset",gle(c,m,E,r)+""),N.setAttribute("transform","rotate("+b+" "+c/2+" "+c/2+")")}})(t(D,n,h,i),E.container),a===E.globalInfo[E.uniqueID].previousId&&D<i?Bh[E.uniqueID].timeOut=setTimeout(v.bind(null,E),1):fle(E)}(o)})(1,149,o1e,1333,0,75,n),n.globalInfo[n.uniqueID].count=++n.globalInfo[n.uniqueID].count%4}function y$(n,e,t,i){const s=2*n,r=e.querySelector("svg."+i),o=r.querySelector("path.e-path-circle"),a=mle(s),l=s/2+"px";r.setAttribute("viewBox","0 0 "+s+" "+s),r.style.width=r.style.height=s+"px",r.style.transformOrigin=l+" "+l+" "+l,o.setAttribute("d",function r1e(n,e){const t=n/2,i=e/2;return"M"+t+","+i+"A"+(t-i)+","+(t-i)+" 0 1 1 "+i+","+t}(s,a)),"Material"===t&&(o.setAttribute("stroke-width",a+""),o.setAttribute("stroke-dasharray",(s-a)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",gle(s,a,1,75)+""))}function mle(n){return.1*n}function gle(n,e,t,i){return(n-e)*Math.PI*(3*i/100-t/100)}function o1e(n,e,t,i){const s=(n/=i)*n,r=s*n;return e+t*(6*r*s+-15*s*s+10*r)}function f5(n,e,t){const i=n,s=n,r=2*n,l=e.querySelector("."+t),h=l.querySelector(".e-path-circle"),c=l.querySelector(".e-path-arc"),m=r/2+"px";h.setAttribute("d",function l1e(n,e,t){return["M",n,e,"m",-t,0,"a",t,t,0,1,0,2*t,0,"a",t,t,0,1,0,2*-t,0].join(" ")}(i,s,n)),c.setAttribute("d",function a1e(n,e,t,i,s){const r=v$(n,e,t,s),o=v$(n,e,t,i);return["M",r.x,r.y,"A",t,t,0,0,0,o.x,o.y].join(" ")}(i,s,n,315,45)),l.setAttribute("viewBox","0 0 "+r+" "+r),l.style.transformOrigin=m+" "+m+" "+m,l.style.width=l.style.height=r+"px"}function v$(n,e,t,i){const s=(i-90)*Math.PI/180;return{x:n+t*Math.cos(s),y:e+t*Math.sin(s)}}function xa(n){ble(n,!1),n=null}function ble(n,e){let t;if(n&&(t=n.classList.contains(h5)?n:n.querySelector("."+h5)),n&&t){const i=t.querySelector("."+m$);let s;if(s=e?!t.classList.contains(d5)&&!t.classList.contains(OO):!t.classList.contains(d5)&&!t.classList.contains(MO),s){const r=t.querySelector("svg");if(f(r))return;const o=r.getAttribute("id");switch(Bh[o].isAnimate=!e,Bh[o].type){case"Material":e?clearTimeout(Bh[o].timeOut):function jke(n,e,t){const i={};Bh[e].timeOut=0,i[e]=function t1e(n,e,t,i){return{radius:e,count:t,previousId:i}}(0,t,0,0),fle({uniqueID:e,container:n,globalInfo:i,timeOutVar:0})}(i,o,Bh[o].radius);break;case"Bootstrap":e?clearTimeout(Bh[o].timeOut):function Qke(n){const t=n.querySelector("svg.e-spin-bootstrap").getAttribute("id");for(let s=1;s<=8;s++)i(n.getElementsByClassName("e-path-circle_"+(8===s?0:s))[0],s,0,Xke(s,s),t);function i(s,r,o,a,l){let h=0;!function c(m){Bh[l].isAnimate&&(++h,s.setAttribute("r",m+""),h>=a.length&&(h=0),Bh[l].timeOut=setTimeout(c.bind(null,a[h]),18))}(r)}}(i)}}e?Bi(t,[OO],[MO]):Bi(t,[MO],[OO]),n=null}}function Rl(n){ble(n,!0),n=null}var vk=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};function PO(n,e){const t=Ae({},n);for(const i of Object.keys(t))e.indexOf(i)<0&&r9(t,i);return t}function u1e(n,e){const t=40===e?0:n.childElementCount-1;let s,i=t;const r=n.querySelector(".e-selected");r&&r.classList.remove("e-selected");for(let o=0,a=n.children.length;o<a;o++)n.children[o].classList.contains("e-focused")&&(s=n.children[o],i=o,s.classList.remove("e-focused"),40===e?i++:i--,i===(40===e?n.childElementCount:-1)&&(i=t));s=n.children[i],i=yle(n,s,i,e),-1!==i&&(z([n.children[i]],"e-focused"),n.children[i].focus())}function yle(n,e,t,i,s=0){if((e.classList.contains("e-separator")||e.classList.contains("e-disabled"))&&(t===(40===i?n.childElementCount-1:0)?t=40===i?0:n.childElementCount-1:40===i?t++:t--),(e=n.children[t]).classList.contains("e-separator")||e.classList.contains("e-disabled")){if(++s===n.childElementCount)return-1;t=yle(n,e,t,i,s)}return t}let C$=(()=>{class n extends ii{}return vk([_("")],n.prototype,"iconCss",void 0),vk([_("")],n.prototype,"id",void 0),vk([_(!1)],n.prototype,"separator",void 0),vk([_("")],n.prototype,"text",void 0),vk([_("")],n.prototype,"url",void 0),vk([_(!1)],n.prototype,"disabled",void 0),n})();var mc=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let go=class extends Qs{constructor(e,t){super(e,t),this.isPopupCreated=!0}preRender(){}getPersistData(){return this.addOnPersist([])}toggle(){this.canOpen()?this.openPopUp():this.closePopup()}render(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()}addItems(e,t){let i,s=this.items.length;for(let r=0,o=this.items.length;r<o;r++)if(t===this.items[r].text){s=r;break}for(let r=e.length-1;r>=0;r--)i=new C$(this,"items",e[r],!0),this.items.splice(s,0,i);this.canOpen()||this.createItems()}removeItems(e,t){let i=!1;for(let s=0,r=e.length;s<r;s++)for(let o=0,a=this.items.length;o<a;o++)if(e[s]===(t?this.items[o].id:this.items[o].text)){this.items.splice(o,1),i=!0;break}i&&this.getULElement()&&this.createItems()}createPopup(){const e=this.createElement("div",{className:"e-dropdown-popup",id:this.element.id+"-popup"});document.body.appendChild(e),this.dropDown=new fc(e,{relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),"fixed"===this.dropDown.element.style.position&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),Rt(this.element,{"aria-haspopup":this.items.length||this.target?"true":"false","aria-expanded":"false","aria-owns":this.getPopUpElement().id,type:"button","aria-label":this.element.textContent+" dropdownbutton"}),this.cssClass&&z([e],this.cssClass.split(" ")),this.isPopupCreated=!0}getTargetElement(){return"string"==typeof this.target?X(this.target):this.target}createItems(e){const t=this.items,i=this.hasIcon(this.items,"iconCss");let s,r,o,a,l=this.getULElement();l?l.innerHTML="":l=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}});for(let h=0;h<t.length;h++){r=t[h];const c=this.enableHtmlSanitizer?hr.sanitize(r.text):r.text;o=this.createElement("li",{innerHTML:r.url?"":c,className:r.separator?"e-item e-separator":"e-item",attrs:{role:"menuItem",tabindex:"-1"},id:r.id?r.id:Tn("e-"+this.getModuleName()+"-item")}),r.url&&(o.appendChild(this.createAnchor(r)),o.classList.add("e-url")),r.iconCss?(s=this.createElement("span",{className:"e-menu-icon "+r.iconCss}),r.url?o.childNodes[0].appendChild(s):o.insertBefore(s,o.childNodes[0])):i&&!r.separator&&o.classList.add("e-blank-icon"),r.disabled&&o.classList.add("e-disabled"),a={item:r,element:o},this.trigger("beforeItemRender",a),l.appendChild(o)}e&&this.getPopUpElement().appendChild(l),i&&function p1e(n){const e=[].slice.call(n.getElementsByClassName("e-blank-icon"));if(!e.length)return;let t=n.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(f(t))return;t.classList.contains("e-url")&&(t=t.querySelector(".e-menu-url"));const i=t.querySelector(".e-menu-icon");let s;const r=n.classList.contains("e-rtl");s=r?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};let o=`${parseInt(getComputedStyle(i).fontSize,10)+parseInt(getComputedStyle(i)[s.margin],10)+parseInt(getComputedStyle(t).paddingLeft,10)}px`;e.forEach(a=>{a.classList.contains("e-url")?a.querySelector(".e-menu-url").style[s.padding]=o:a.style[s.padding]=o})}(this.getPopUpElement())}hasIcon(e,t){for(let i=0,s=e.length;i<s;i++)if(e[i][t])return!0;return!1}createAnchor(e){const t=this.enableHtmlSanitizer?hr.sanitize(e.text):e.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:t,attrs:{href:e.url}})}initialize(){this.button=new Sa({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=Tn("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.target&&!this.isColorPicker()||!this.createPopupOnClick?this.createPopup():this.isPopupCreated=!1}isColorPicker(){if(!this.element)return!1;const e=this.element.previousSibling;return!!(e&&e.classList&&e.classList.contains("e-split-colorpicker"))}appendArrowSpan(){this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf("e-vertical")>-1?"bottom":"right")+" e-caret"}))}setActiveElem(e){this.activeElem=e}getModuleName(){return"dropdown-btn"}canOpen(){let e=!1;return this.isPopupCreated&&(e=this.getPopUpElement().classList.contains("e-popup-close")),e}destroy(){if(super.destroy(),"dropdown-btn"===this.getModuleName()){let e;this.element.querySelector("span.e-caret")&&te(this.element.querySelector("span.e-caret")),this.cssClass&&(e=this.cssClass.split(" ")),this.button.destroy(),e&&W([this.element],e),W(this.activeElem,["e-active"]),(this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"]).forEach(i=>{this.element.removeAttribute(i)}),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents()}}destroyPopup(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){const e=document.getElementById(this.getPopUpElement().id);e&&(W([e],["e-popup-open","e-popup-close"]),te(e))}k.remove(this.getPopUpElement(),"click",this.clickHandler),k.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&(this.dropDown=void 0)}this.isPopupCreated=!1}getPopUpElement(){let e=null;return this.dropDown&&(e=this.dropDown.element),e}getULElement(){let e=null;return this.getPopUpElement()&&(e=this.getPopUpElement().children[0]),e}wireEvents(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||k.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),k.add(this.element,"click",this.clickHandler,this),k.add(this.element,"keydown",this.keyBoardHandler,this)}popupWireEvents(){const e=this.getPopUpElement();this.createPopupOnClick&&k.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),e&&(k.add(e,"click",this.clickHandler,this),k.add(e,"keydown",this.keyBoardHandler,this)),this.rippleFn=uc(e,{selector:".e-item"})}popupUnWireEvents(){const e=this.getPopUpElement();this.createPopupOnClick&&k.remove(document,"mousedown touchstart",this.delegateMousedownHandler),e&&e.parentElement&&(k.remove(e,"click",this.clickHandler),k.remove(e,"keydown",this.keyBoardHandler))}keyBoardHandler(e){if(e.target!==this.element||9!==e.keyCode&&(e.altKey||40!==e.keyCode)&&38!==e.keyCode)switch(e.keyCode){case 38:case 40:!e.altKey||38!==e.keyCode&&40!==e.keyCode?this.upDownKeyHandler(e):this.keyEventHandler(e);break;case 9:case 13:case 27:case 32:this.keyEventHandler(e)}}upDownKeyHandler(e){this.target&&(38===e.keyCode||40===e.keyCode)||(e.preventDefault(),u1e(this.getULElement(),e.keyCode))}keyEventHandler(e){this.target&&(13===e.keyCode||9===e.keyCode)||e.target&&e.target.className.indexOf("e-edit-template")>-1&&32===e.keyCode||(9!==e.keyCode&&e.preventDefault(),27===e.keyCode||38===e.keyCode||9===e.keyCode?this.canOpen()||this.closePopup(e,this.element):this.clickHandler(e))}getLI(e){return"LI"===e.tagName?e:B(e,"li")}mousedownHandler(e){const t=e.target;this.dropDown&&!this.canOpen()&&!B(t,'[id="'+this.getPopUpElement().id+'"]')&&!B(t,'[id="'+this.element.id+'"]')&&this.closePopup(e)}clickHandler(e){const t=e.target;if(B(t,'[id="'+this.element.id+'"]'))!this.createPopupOnClick||this.target&&!this.isColorPicker()?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(e):this.closePopup(e):this.isPopupCreated?this.closePopup(e,this.activeElem[0]):(this.createPopup(),this.openPopUp(e));else if(B(t,'[id="'+this.getPopUpElement().id+'"]')){let i,s,r;const o=this.getLI(t);o&&(s=Array.prototype.indexOf.call(this.getULElement().children,o),r=this.items[s],r&&(i={element:o,item:r},this.trigger("select",i)),this.closePopup(e,this.activeElem[0]))}}openPopUp(e=null){const t=this.getPopUpElement();if(this.target)if(this.activeElem.length>1){let r=Fh(this.activeElem[0],"split-btn");r.isReact&&t.childNodes.length<1&&r.appendReactElement(this.getTargetElement(),this.getPopUpElement())}else this.isReact&&t.childNodes.length<1&&this.appendReactElement(this.getTargetElement(),this.getPopUpElement());else this.createItems(!0);const i=this.getULElement();this.popupWireEvents(),this.trigger("beforeOpen",{element:i,items:this.items,event:e,cancel:!1},r=>{if(!r.cancel){const o=this.getULElement();this.dropDown.show(null,this.element),z([this.element],"e-active"),this.element.setAttribute("aria-expanded","true"),o.focus(),this.trigger("open",{element:o,items:this.items})}})}closePopup(e=null,t){const s={element:this.getULElement(),items:this.items,event:e,cancel:!1};let r=this.getPopUpElement();r&&k.remove(r,"keydown",this.keyBoardHandler),this.trigger("beforeClose",s,o=>{if(!o.cancel){this.popupUnWireEvents();const a=this.getULElement(),l=a.querySelector(".e-selected");l&&l.classList.remove("e-selected"),this.dropDown.hide(),W(this.activeElem,"e-active"),this.element.setAttribute("aria-expanded","false"),t&&t.focus(),this.trigger("close",{element:a,items:this.items}),!this.target&&a&&te(a),(!this.target||this.isColorPicker())&&this.createPopupOnClick&&this.destroyPopup(),this.target&&(this.isPopupCreated=!this.createPopupOnClick)}})}unWireEvents(){this.createPopupOnClick||k.remove(document,"mousedown touchstart",this.delegateMousedownHandler),k.remove(this.element,"click",this.clickHandler),k.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(k.remove(this.getPopUpElement(),"click",this.clickHandler),k.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler))}onPropertyChanged(e,t){let s;this.button.setProperties(PO(e,["content","cssClass","iconCss","iconPosition","disabled","enableRtl"])),this.isPopupCreated&&(s=this.getPopUpElement(),this.dropDown.setProperties(PO(e,["enableRtl"])));for(const r of Object.keys(e))switch(r){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":e.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":e.cssClass.indexOf("e-vertical")>-1&&Bi(this.element.querySelector("span.e-caret"),["e-icon-bottom"],["e-icon-right"]),this.isPopupCreated&&(t.cssClass&&W([s],t.cssClass.split(" ")),e.cssClass&&z([s],e.cssClass.split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":e.createPopupOnClick?this.destroyPopup():this.createPopup()}}focusIn(){this.element.focus()}};mc([_("")],go.prototype,"content",void 0),mc([_("")],go.prototype,"cssClass",void 0),mc([_(!1)],go.prototype,"disabled",void 0),mc([_("")],go.prototype,"iconCss",void 0),mc([_("Left")],go.prototype,"iconPosition",void 0),mc([_(!1)],go.prototype,"enableHtmlSanitizer",void 0),mc([rh([],C$)],go.prototype,"items",void 0),mc([_(!1)],go.prototype,"createPopupOnClick",void 0),mc([_("")],go.prototype,"target",void 0),mc([G()],go.prototype,"beforeItemRender",void 0),mc([G()],go.prototype,"beforeOpen",void 0),mc([G()],go.prototype,"beforeClose",void 0),mc([G()],go.prototype,"close",void 0),mc([G()],go.prototype,"open",void 0),mc([G()],go.prototype,"select",void 0),mc([G()],go.prototype,"created",void 0),go=mc([as],go);var gc=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const m5="e-rtl",w$="EJS-SPLITBUTTON";let lh=class extends go{constructor(e,t){super(e,t)}preRender(){let e=this.element;if(e.tagName===w$){const t=U("ej2_instances",e),i=this.createElement("button",{attrs:{type:"button"}}),s=this.createElement(w$,{className:"e-"+this.getModuleName()+"-wrapper"});for(let r=0,o=e.attributes.length;r<o;r++)i.setAttribute(e.attributes[r].nodeName,e.attributes[r].nodeValue);e.parentNode.insertBefore(s,e),te(e),e=i,s.appendChild(e),zt("ej2_instances",t,e),this.wrapper=s,this.element=e}this.element.id||(this.element.id=Tn("e-"+this.getModuleName()))}render(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()}renderControl(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()}addItems(e,t){super.addItems(e,t),this.secondaryBtnObj.items=this.items}removeItems(e,t){super.removeItems(e,t),this.secondaryBtnObj.items=this.items}initWrapper(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add(m5),this.cssClass&&z([this.wrapper],this.cssClass.split(" "))}createPrimaryButton(){this.primaryBtnObj=new Sa({cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled}),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)}createSecondaryButton(){const e=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"});this.wrapper.appendChild(e);const t={cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target,createPopupOnClick:this.createPopupOnClick};t.beforeItemRender=i=>{this.createPopupOnClick&&(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.trigger("beforeItemRender",i)},t.open=i=>{this.trigger("open",i)},t.close=i=>{this.trigger("close",i)},t.select=i=>{this.trigger("select",i)},t.beforeOpen=i=>{const s=new g5;return this.trigger("beforeOpen",i,r=>{s.resolve(r)}),s},t.beforeClose=i=>{const s=new g5;return this.trigger("beforeClose",i,r=>{s.resolve(r)}),s},this.secondaryBtnObj=new go(t),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(e),this.createPopupOnClick||(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right")}setAria(){Rt(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent+" splitbutton","aria-owns":this.element.id+"_dropdownbtn-popup"})}getModuleName(){return"split-btn"}toggle(){this.secondaryBtnObj.toggle()}destroy(){let e=[m5];if(this.cssClass&&(e=e.concat(this.cssClass.split(" "))),this.element){const t=document.getElementById(this.element.id);t&&t.parentElement===this.wrapper&&(this.wrapper.tagName===w$?(this.wrapper.innerHTML="",W([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),W([this.wrapper],this.cssClass.split(" "))):(W([this.element],e),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach(i=>{this.element.removeAttribute(i)}),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),Yt(this.wrapper)),this.unWireEvents())}this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),super.destroy(),this.element.getAttribute("class")||this.element.removeAttribute("class")}wireEvents(){k.add(this.element,"click",this.primaryBtnClickHandler,this),new Gn(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow"}})}unWireEvents(){k.remove(this.element,"click",this.primaryBtnClickHandler),za(this.element,Gn).destroy()}primaryBtnClickHandler(){this.trigger("click",{element:this.element})}btnKeyBoardHandler(e){"altdownarrow"===e.action&&this.clickHandler(e)}onPropertyChanged(e,t){let i=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties(PO(e,i)),i=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl","createPopupOnClick"],Object.keys(e).indexOf("items")>-1&&(this.secondaryBtnObj.items=e.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties(PO(e,i));for(const s of Object.keys(e))switch(s){case"cssClass":t.cssClass&&W([this.wrapper],t.cssClass.split(" ")),z([this.wrapper],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?z([this.wrapper],m5):W([this.wrapper],m5)}}focusIn(){this.element.focus()}};gc([_("")],lh.prototype,"content",void 0),gc([_("")],lh.prototype,"cssClass",void 0),gc([_(!1)],lh.prototype,"disabled",void 0),gc([_("")],lh.prototype,"iconCss",void 0),gc([_("Left")],lh.prototype,"iconPosition",void 0),gc([_(!1)],lh.prototype,"createPopupOnClick",void 0),gc([rh([],C$)],lh.prototype,"items",void 0),gc([_("")],lh.prototype,"target",void 0),gc([G()],lh.prototype,"beforeItemRender",void 0),gc([G()],lh.prototype,"beforeOpen",void 0),gc([G()],lh.prototype,"beforeClose",void 0),gc([G()],lh.prototype,"click",void 0),gc([G()],lh.prototype,"close",void 0),gc([G()],lh.prototype,"open",void 0),gc([G()],lh.prototype,"select",void 0),gc([G()],lh.prototype,"created",void 0),lh=gc([as],lh);class g5{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)}}var oa=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const S$="e-hide-spinner",vle="e-progress",FO="e-progress-active",GE="e-btn-content";class b5 extends ii{}oa([_(null)],b5.prototype,"template",void 0),oa([_(16)],b5.prototype,"width",void 0),oa([_("Left")],b5.prototype,"position",void 0);class y5 extends ii{}oa([_(400)],y5.prototype,"duration",void 0),oa([_("None")],y5.prototype,"effect",void 0),oa([_("ease")],y5.prototype,"easing",void 0);let hh=class extends Sa{constructor(e,t){super(e,t),this.step=1}preRender(){super.preRender()}render(){super.render(),this.init(),this.wireEvents(),this.setAria(),this.renderComplete()}start(e){this.isPaused=!1,this.startProgress(e||this.percent,this.progressTime)}stop(){this.isPaused=!0,cancelAnimationFrame(this.timerId)}progressComplete(){this.isPaused=!1,this.finishProgress()}getModuleName(){return"progress-btn"}destroy(){let e=[S$,FO,"e-round-corner","e-"+super.getModuleName(),"e-spin-"+this.spinSettings.position.toLowerCase()];super.destroy(),this.unWireEvents(),this.element.innerHTML="",this.cssClass&&(e=e.concat(this.cssClass.split(" "))),W([this.element],e),(this.element.getAttribute("class")?["aria-label","aria-valuemin","aria-valuemax","aria-valuenow"]:["aria-label","aria-valuemin","aria-valuemax","aria-valuenow","class"]).forEach(i=>{this.element.removeAttribute(i)}),this.disabled&&this.element.removeAttribute("disabled")}init(){this.element.classList.add("e-"+super.getModuleName()),this.setContent(),this.createSpinner(),this.enableProgress&&this.createProgress()}createSpinner(){const e=this.createElement("span",{className:"e-spinner"});this.setSpinPosition(e),vp({target:e,width:this.spinSettings.width||16,template:this.spinSettings.template},this.createElement)}getSpinner(){return this.element.getElementsByClassName("e-spinner")[0]}getProgress(){return this.element.getElementsByClassName(vle)[0]}setSpinPosition(e){const t=this.spinSettings.position||"Left";"Left"===t||"Top"===t?this.element.insertBefore(e,this.element.getElementsByClassName(GE)[0]):this.element.appendChild(e),this.element.classList.add("e-spin-"+t.toLowerCase())}createProgress(){this.element.appendChild(this.createElement("span",{className:vle}))}setContent(){let e;e=this.element.innerHTML,this.enableHtmlSanitizer&&(e=hr.sanitize(this.element.innerHTML)),this.element.innerHTML="",this.element.appendChild(this.createElement("span",{className:GE,innerHTML:e}))}setContentIcon(e){const t=this.createElement("span",{className:GE,innerHTML:e});if(this.iconCss){const i=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(i.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");const s=t.childNodes[0];!s||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?t.appendChild(i):t.insertBefore(i,s)}this.element.appendChild(t)}clickHandler(){this.element.classList.contains(FO)||this.startProgress()}startProgress(e,t){const i=this.element.classList,s=i.contains("e-vertical");i.add(FO),i.contains(S$)||xa(this.element),this.startAnimate(Date.now(),t||0,t?Date.now()-1*this.duration/100:Date.now(),e||0,0,this.step,0,s),this.startContAnimate()}startAnimate(e,t,i,s,r,o,a,l){try{const h=e-i,c=this.duration*o/100,m=h?h<c?h-c:h%c:0;this.progressTime=t=t+h-m,i=e-m,s+=(h-m)/this.duration*100;const b={percent:r=(t-a)%c==0||100===s?s:r,currentDuration:t,step:o};this.eIsVertical=l,this.trigger(0===s?"begin":100===s||t===this.duration?"end":"progress",b,v=>{this.successCallback(v,s,r,t,a,m,i)})}catch(h){cancelAnimationFrame(this.timerId),this.trigger("fail",h)}}successCallback(e,t,i,s,r,o,a){let l=t,h=i;const c=o,m=s;let b=r;const v=a,w=this.eIsVertical;l!==e.percent&&e.percent!==h&&(l=e.percent),this.percent=l,this.step=e.step,((m-b)%(this.duration*e.step/100)==0||100===l)&&(this.timerId=requestAnimationFrame(()=>{this.enableProgress&&(this.getProgress().style[w?"height":"width"]=l+"%"),this.element.setAttribute("aria-valuenow",l.toString())}),h=l,b=m),this.isPaused||(this.interval=m<this.duration&&l<100?window.setTimeout(()=>{this.startAnimate(Date.now(),m,v,l,h,e.step,b,w)},this.duration/100-c):window.setTimeout(()=>{this.progressTime=this.percent=0,this.enableProgress&&(this.getProgress().style[w?"height":"width"]="0%"),this.element.setAttribute("aria-valuenow","0"),this.hideSpin()},100))}startContAnimate(){const e=this.element.getElementsByClassName(GE)[0];"None"!==this.animationSettings.effect?new mo({}).animate(e,{duration:this.animationSettings.duration,name:"Progress"+this.animationSettings.effect,timingFunction:this.animationSettings.easing,begin:()=>{"Center"===this.spinSettings.position&&this.setSpinnerSize()},end:()=>{e.classList.add("e-animate-end")}}):"Center"===this.spinSettings.position&&this.setSpinnerSize()}finishProgress(){const e=this.element.classList,t=e.contains("e-vertical");e.add(FO);for(let r=this.percent;r<100;r++)r+=10,r>100&&(r=100),this.enableProgress&&(this.getProgress().style[t?"height":"width"]=this.percent<100?r+"%":"100%");this.element.setAttribute("aria-valuenow","0"),this.hideSpin();const s={step:this.step,currentDuration:this.progressTime,percent:100};clearTimeout(this.interval),this.trigger("end",s),this.progressTime=this.percent=0}setSpinnerSize(){const e=this.element.getElementsByClassName(GE)[0],t=this.getSpinner();t.style.width=Math.max(t.offsetWidth,e.offsetWidth)+"px",t.style.height=Math.max(t.offsetHeight,e.offsetHeight)+"px",e.classList.add("e-cont-animate")}hideSpin(){const e=this.element.getElementsByClassName(GE)[0];if(this.element.classList.contains(S$)||Rl(this.element),this.element.classList.remove(FO),"None"!==this.animationSettings.effect&&e.classList.remove("e-animate-end"),"Center"===this.spinSettings.position){const t=this.getSpinner();e.classList.remove("e-cont-animate"),t.style.width="auto",t.style.height="auto"}}setIconSpan(){const e=this.element.getElementsByClassName(GE)[0],t=this.element.getElementsByClassName("e-btn-icon")[0];!e.childNodes[0]||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?e.appendChild(t):e.insertBefore(t,e.childNodes[0])}setAria(){Rt(this.element,{"aria-label":this.element.textContent+" progress","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0"})}wireEvents(){k.add(this.element,"click",this.clickHandler,this)}unWireEvents(){k.remove(this.element,"click",this.clickHandler)}onPropertyChanged(e,t){const i=this.element;let s=!1;this.element.querySelector(".e-spinner-pane").classList.contains("e-spin-show")&&(s=!0),super.onPropertyChanged(e,t);for(const o of Object.keys(e))switch(o){case"content":this.setContent(),this.createSpinner(),s&&(xa(this.element),s=!1),this.enableProgress&&this.createProgress(),i.setAttribute("aria-label",i.textContent+" progress");break;case"iconCss":t.iconCss||this.setIconSpan();break;case"iconPosition":this.setIconSpan();break;case"enableProgress":e.enableProgress?this.createProgress():Yt(this.getProgress());break;case"spinSettings":e.spinSettings.position&&(i.classList.remove("e-spin-"+t.spinSettings.position.toLowerCase()),this.setSpinPosition(this.getSpinner())),(e.spinSettings.template||e.spinSettings.width)&&(i.removeChild(this.getSpinner()),this.createSpinner())}}focusIn(){this.element.focus()}};oa([_(!1)],hh.prototype,"enableProgress",void 0),oa([_(2e3)],hh.prototype,"duration",void 0),oa([_("Left")],hh.prototype,"iconPosition",void 0),oa([_("")],hh.prototype,"iconCss",void 0),oa([_(!1)],hh.prototype,"disabled",void 0),oa([_(!1)],hh.prototype,"isPrimary",void 0),oa([_("")],hh.prototype,"cssClass",void 0),oa([_("")],hh.prototype,"content",void 0),oa([_(!1)],hh.prototype,"isToggle",void 0),oa([_(!1)],hh.prototype,"enableHtmlSanitizer",void 0),oa([di({},b5)],hh.prototype,"spinSettings",void 0),oa([di({},y5)],hh.prototype,"animationSettings",void 0),oa([G()],hh.prototype,"created",void 0),oa([G()],hh.prototype,"begin",void 0),oa([G()],hh.prototype,"progress",void 0),oa([G()],hh.prototype,"end",void 0),oa([G()],hh.prototype,"fail",void 0),hh=oa([as],hh);var Bt;!function(n){let e,t=!0;function s(ce){r(ce.floatLabelType,ce.element),ce.element.addEventListener("focus",function(){const Ee=E(this);(Ee.classList.contains("e-input-group")||Ee.classList.contains("e-outline")||Ee.classList.contains("e-filled"))&&Ee.classList.add("e-input-focus")}),ce.element.addEventListener("blur",function(){const Ee=E(this);(Ee.classList.contains("e-input-group")||Ee.classList.contains("e-outline")||Ee.classList.contains("e-filled"))&&Ee.classList.remove("e-input-focus")}),ce.element.addEventListener("input",()=>{r(e,ce.element)})}function r(ce,Ee){const wt=Ee.value;""!==wt&&!f(wt)&&Ee.parentElement?Ee.parentElement.classList.add("e-valid-input"):"Always"!==ce&&Ee.parentElement&&Ee.parentElement.classList.remove("e-valid-input")}function o(){const ce=E(this).getElementsByClassName("e-float-text")[0];f(ce)||(z([ce],"e-label-top"),ce.classList.contains("e-label-bottom")&&W([ce],"e-label-bottom"))}function a(){const ce=E(this);if(ce.getElementsByTagName("textarea")[0]?""===ce.getElementsByTagName("textarea")[0].value:""===ce.getElementsByTagName("input")[0].value){const Ee=ce.getElementsByClassName("e-float-text")[0];f(Ee)||(Ee.classList.contains("e-label-top")&&W([Ee],"e-label-top"),z([Ee],"e-label-bottom"))}}function l(ce){ce.addEventListener("focus",o),ce.addEventListener("blur",a)}function c(ce,Ee,wt){const Qt=f(wt)?Be:wt;"Auto"===ce.floatLabelType&&l(ce.element),f(Ee.container)?(Ee.container=V(ce,"e-float-input","e-float-custom-tag","div",Qt),ce.element.parentNode&&ce.element.parentNode.insertBefore(Ee.container,ce.element)):(f(ce.customTag)||Ee.container.classList.add("e-float-custom-tag"),Ee.container.classList.add("e-float-input"));const Ds=Qt("span",{className:"e-float-line"}),Hi=Qt("label",{className:"e-float-text"});if(!f(ce.element.id)&&""!==ce.element.id&&(Hi.id="label_"+ce.element.id.replace(/ /g,"_"),Rt(ce.element,{"aria-labelledby":Hi.id})),!f(ce.element.placeholder)&&""!==ce.element.placeholder&&(Hi.innerText=$(ce.element.placeholder),ce.element.removeAttribute("placeholder")),!f(ce.properties)&&!f(ce.properties.placeholder)&&""!==ce.properties.placeholder&&(Hi.innerText=$(ce.properties.placeholder)),Hi.innerText||Ee.container.classList.add("e-no-float-label"),Ee.container.classList.contains("e-float-icon-left")){const Hn=Ee.container.querySelector(".e-input-in-wrap");Hn.appendChild(ce.element),Hn.appendChild(Ds),Hn.appendChild(Hi)}else Ee.container.appendChild(ce.element),Ee.container.appendChild(Ds),Ee.container.appendChild(Hi);w(ce.element.value,Hi),"Always"===ce.floatLabelType&&(Hi.classList.contains("e-label-bottom")&&W([Hi],"e-label-bottom"),z([Hi],"e-label-top")),"Auto"===ce.floatLabelType&&(ce.element.addEventListener("input",Hn=>{w(ce.element.value,Hi,ce.element)}),ce.element.addEventListener("blur",Hn=>{w(ce.element.value,Hi)})),f(ce.element.getAttribute("id"))||Hi.setAttribute("for",ce.element.getAttribute("id"))}function m(ce,Ee){"Always"===ce&&Ee.classList.contains("e-outline")&&Ee.classList.add("e-valid-input")}function v(ce,Ee){ce?W([Ee],"e-clear-icon-hide"):z([Ee],"e-clear-icon-hide")}function w(ce,Ee,wt=null){ce?(z([Ee],"e-label-top"),Ee.classList.contains("e-label-bottom")&&W([Ee],"e-label-bottom")):(null==wt||wt!==document.activeElement)&&(Ee.classList.contains("e-label-top")&&W([Ee],"e-label-top"),z([Ee],"e-label-bottom"))}function E(ce){let Ee=f(ce.parentNode)?ce:ce.parentNode;return Ee&&Ee.classList.contains("e-input-in-wrap")&&(Ee=Ee.parentNode),Ee}function L(ce,Ee,wt){(null==t||t)&&Ee.addEventListener("click",Qt=>{ce.classList.contains("e-disabled")||ce.readOnly||(Qt.preventDefault(),ce!==document.activeElement&&ce.focus(),ce.value="",z([Ee],"e-clear-icon-hide"))}),ce.addEventListener("input",Qt=>{v(ce.value,Ee)}),ce.addEventListener("focus",Qt=>{v(ce.value,Ee)}),ce.addEventListener("blur",Qt=>{setTimeout(()=>{z([Ee],"e-clear-icon-hide")},200)})}function N(ce,Ee){if(E(ce).classList.contains("e-float-input")&&"Auto"===Ee){const Qt=E(ce).getElementsByClassName("e-float-text")[0];w(ce.value,Qt,ce)}}function V(ce,Ee,wt,Qt,Ds){const Hi=f(Ds)?Be:Ds;let Hn;return f(ce.customTag)?Hn=Hi(Qt,{className:Ee}):(Hn=Hi(ce.customTag,{className:Ee}),Hn.classList.add(wt)),Hn.classList.add("e-control-wrapper"),Hn}function $(ce){let Ee="";if(!f(ce)&&""!==ce){const wt=document.createElement("span");wt.innerHTML='<input  placeholder="'+ce+'"/>',Ee=wt.children[0].placeholder}return Ee}function Q(ce,Ee,wt){!f(wt)&&""!==wt&&W(Ee,wt.split(" ")),!f(ce)&&""!==ce&&z(Ee,ce.split(" "))}function ke(ce,Ee){ce=$(ce);const wt=E(Ee);wt.classList.contains("e-float-input")?f(ce)||""===ce?(wt.classList.add("e-no-float-label"),wt.getElementsByClassName("e-float-text")[0].textContent=""):(wt.getElementsByClassName("e-float-text")[0].textContent=ce,wt.classList.remove("e-no-float-label"),Ee.removeAttribute("placeholder")):f(ce)||""===ce?(Ee.removeAttribute("placeholder"),Ee.removeAttribute("aria-placeholder")):Rt(Ee,{placeholder:ce,"aria-placeholder":ce})}function Ye(ce,Ee,wt){ce?Rt(Ee,{readonly:""}):Ee.removeAttribute("readonly"),f(wt)||N(Ee,wt)}function Nt(ce,Ee){ce?z(Ee,"e-rtl"):W(Ee,"e-rtl")}function Le(ce,Ee,wt,Qt){const Ds={disabled:"disabled","aria-disabled":"true"},Hi=!f(Qt);ce?(Ee.classList.remove("e-disabled"),We(Ds,Ee),Hi&&W([Qt],"e-disabled")):(Ee.classList.add("e-disabled"),xe(Ds,Ee),Hi&&z([Qt],"e-disabled")),f(wt)||N(Ee,wt)}function nt(ce,Ee,wt,Qt,Ds){const Hi=f(Ds)?Be:Ds;ce?wt.clearButton=function D(ce,Ee,wt,Qt){const Hi=(f(Qt)?Be:Qt)("span",{className:"e-clear-icon"}),Hn=Ee.container;return f(wt)?(Ee.container.classList.contains("e-float-input")?Ee.container.querySelector(".e-float-text"):ce).insertAdjacentElement("afterend",Hi):Hn.appendChild(Hi),!f(Hn)&&Hn.classList.contains("e-float-input")&&z([Hn],"e-input-group"),z([Hi],"e-clear-icon-hide"),L(ce,Hi),Hi.setAttribute("aria-label","close"),Hi}(Ee,wt,Qt,Hi):(Yt(wt.clearButton),wt.clearButton=null)}function We(ce,Ee){for(const wt of Object.keys(ce)){const Qt=E(Ee);"disabled"===wt&&Ee.classList.remove("e-disabled"),"disabled"===wt&&Qt.classList.contains("e-input-group")&&Qt.classList.remove("e-disabled"),"placeholder"===wt&&Qt.classList.contains("e-float-input")?Qt.getElementsByClassName("e-float-text")[0].textContent="":Ee.removeAttribute(wt)}}function xe(ce,Ee){for(const wt of Object.keys(ce)){const Qt=E(Ee);"disabled"===wt&&Ee.classList.add("e-disabled"),"disabled"===wt&&Qt.classList.contains("e-input-group")&&Qt.classList.add("e-disabled"),"placeholder"===wt&&Qt.classList.contains("e-float-input")?Qt.getElementsByClassName("e-float-text")[0].textContent=ce[wt]:Ee.setAttribute(wt,ce[wt])}}function ge(ce,Ee,wt){const Qt=[];Qt.push(wt);const Ds=f(wt)?Ee.querySelectorAll(".e-input-group-icon"):Qt;if(ce&&Ds.length>0)for(let Hi=0;Hi<Ds.length;Hi++)Ds[Hi].addEventListener("mousedown",yt,!1),Ds[Hi].addEventListener("mouseup",bi,!1);else if(Ds.length>0)for(let Hi=0;Hi<Ds.length;Hi++)Ds[Hi].removeEventListener("mousedown",yt,this),Ds[Hi].removeEventListener("mouseup",bi,this)}function yt(){let Ee=this.parentElement;for(;!Ee.classList.contains("e-input-group");)Ee=Ee.parentElement;!function Ve(ce,Ee){!ce.classList.contains("e-disabled")&&!ce.querySelector("input").readOnly&&Ee.classList.add("e-input-btn-ripple")}(Ee,this)}function bi(){const ce=this;setTimeout(()=>{ce.classList.remove("e-input-btn-ripple")},500)}function ci(ce,Ee){const wt=Ee("span",{className:ce});return wt.classList.add("e-input-group-icon"),wt}function Ei(ce,Ee,wt,Qt){const Ds=f(Qt)?Be:Qt,Hi=ci(ce,Ds);Ee.classList.add("e-float-icon-left");let Hn=Ee.querySelector(".e-input-in-wrap");if(f(Hn)){Hn=Ds("span",{className:"e-input-in-wrap"}),wt.parentNode.insertBefore(Hn,wt);const qN=Ee.querySelectorAll(wt.tagName+" ~ *");Hn.appendChild(wt);for(let Wp=0;Wp<qN.length;Wp++)Hn.appendChild(qN[Wp])}return Hn.parentNode.insertBefore(Hi,Hn),Ee.classList.contains("e-input-group")||Ee.classList.add("e-input-group"),ge(!0,Ee,Hi),Hi}function ts(ce,Ee,wt){const Ds=ci(ce,f(wt)?Be:wt);return Ee.classList.contains("e-input-group")||Ee.classList.add("e-input-group"),(Ee.classList.contains("e-float-icon-left")?Ee.querySelector(".e-input-in-wrap"):Ee).appendChild(Ds),ge(!0,Ee,Ds),Ds}function si(ce,Ee){"hidden"===Ee.type?ce.classList.add("e-hidden"):ce.classList.contains("e-hidden")&&ce.classList.remove("e-hidden")}n.createInput=function i(ce,Ee){const wt=f(Ee)?Be:Ee;let Qt={container:null,buttons:[],clearButton:null};if(e=ce.floatLabelType,t=ce.bindClearAction,f(ce.floatLabelType)||"Never"===ce.floatLabelType?(Qt.container=V(ce,"e-input-group","e-input-custom-tag","span",wt),ce.element.parentNode.insertBefore(Qt.container,ce.element),z([ce.element],"e-input"),Qt.container.appendChild(ce.element)):c(ce,Qt,wt),s(ce),!f(ce.properties)&&!f(ce.properties.showClearButton)&&ce.properties.showClearButton&&"TEXTAREA"!==ce.element.tagName&&(nt(ce.properties.showClearButton,ce.element,Qt,!0,wt),Qt.clearButton.setAttribute("role","button"),Qt.container.classList.contains("e-float-input")&&z([Qt.container],"e-input-group")),!f(ce.buttons)&&"TEXTAREA"!==ce.element.tagName)for(let Ds=0;Ds<ce.buttons.length;Ds++)Qt.buttons.push(ts(ce.buttons[Ds],Qt.container,wt));return!f(ce.element)&&"TEXTAREA"===ce.element.tagName&&z([Qt.container],"e-multi-line-input"),si(Qt.container,ce.element),Qt=function b(ce,Ee){if(!f(ce.properties))for(const wt of Object.keys(ce.properties))switch(wt){case"cssClass":Q(ce.properties.cssClass,[Ee.container]),m(ce.floatLabelType,Ee.container);break;case"enabled":Le(ce.properties.enabled,ce.element,ce.floatLabelType,Ee.container);break;case"enableRtl":Nt(ce.properties.enableRtl,[Ee.container]);break;case"placeholder":ke(ce.properties.placeholder,ce.element);break;case"readonly":Ye(ce.properties.readonly,ce.element)}return Ee}(ce,Qt),Qt},n.bindInitialEvent=s,n.wireFloatingEvents=l,n.wireClearBtnEvents=L,n.setValue=function ie(ce,Ee,wt,Qt){if(Ee.value=ce,!f(wt)&&"Auto"===wt&&N(Ee,wt),!f(Qt)&&Qt){const Ds=E(Ee);if(!f(Ds)){const Hi=Ds.getElementsByClassName("e-clear-icon")[0];f(Hi)||(Ee.value&&Ds.classList.contains("e-input-focus")?W([Hi],"e-clear-icon-hide"):z([Hi],"e-clear-icon-hide"))}}r(wt,Ee)},n.setCssClass=Q,n.setWidth=function le(ce,Ee){"number"==typeof ce?Ee.style.width=st(ce):"string"==typeof ce&&(Ee.style.width=ce.match(/px|%|em/)?ce:st(ce))},n.setPlaceholder=ke,n.setReadonly=Ye,n.setEnableRtl=Nt,n.setEnabled=Le,n.setClearButton=nt,n.removeAttributes=We,n.addAttributes=xe,n.removeFloating=function Me(ce){const Ee=ce.container;if(!f(Ee)&&Ee.classList.contains("e-float-input")){const wt=Ee.querySelector("textarea")?Ee.querySelector("textarea"):Ee.querySelector("input"),Qt=Ee.querySelector(".e-float-text").textContent,Ds=null!==Ee.querySelector(".e-clear-icon");te(Ee.querySelector(".e-float-line")),te(Ee.querySelector(".e-float-text")),Bi(Ee,["e-input-group"],["e-float-input"]),function h(ce){ce.removeEventListener("focus",o),ce.removeEventListener("blur",a)}(wt),Rt(wt,{placeholder:Qt}),wt.classList.add("e-input"),!Ds&&"INPUT"===wt.tagName&&wt.removeAttribute("required")}},n.addFloating=function ue(ce,Ee,wt,Qt){const Ds=f(Qt)?Be:Qt,Hi=B(ce,".e-input-group");if(e=Ee,"Never"!==Ee){let Hn=Hi.tagName;Hn="DIV"!==Hn&&"SPAN"!==Hn?Hn:null;const qN={element:ce,floatLabelType:Ee,customTag:Hn,properties:{placeholder:wt}};let Wp=Hi.querySelector(".e-clear-icon");const eGe={container:Hi};ce.classList.remove("e-input"),c(qN,eGe,Ds);const oee=Hi.classList.contains("e-float-icon-left");if(f(Wp)&&(Wp=oee?Hi.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):Hi.querySelector(".e-input-group-icon")),f(Wp))oee&&(Wp=Hi.querySelector(".e-input-group-icon")),f(Wp)&&Hi.classList.remove("e-input-group");else{const oCe=Hi.querySelector(".e-float-line"),tGe=Hi.querySelector(".e-float-text"),aee=oee?Hi.querySelector(".e-input-in-wrap"):Hi;aee.insertBefore(ce,Wp),aee.insertBefore(oCe,Wp),aee.insertBefore(tGe,Wp)}}m(Ee,ce.parentElement)},n.setRipple=function ae(ce,Ee){for(let wt=0;wt<Ee.length;wt++)ge(ce,Ee[wt].container)},n.addIcon=function ss(ce,Ee,wt,Qt,Ds){const Hi="string"==typeof Ee?Ee.split(","):Ee;if("append"===ce.toLowerCase())for(const Hn of Hi)ts(Hn,wt,Ds);else for(const Hn of Hi)Ei(Hn,wt,Qt,Ds)},n.prependSpan=Ei,n.appendSpan=ts,n.validateInputType=si}(Bt||(Bt={}));var bo=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const x$="e-input-group-icon",E$="e-spin-up",_$="e-error",Ck="increment",NO="decrement",g1e=new RegExp("^(-)?(\\d*)$"),Cle="e-input-focus",wle=["title","style","class"];let Kw=(()=>{let n=class extends Qs{constructor(t,i){super(t,i),this.isVue=!1,this.preventChange=!1,this.isAngular=!1,this.isDynamicChange=!1,this.numericOptions=t}preRender(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;const t=U("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),W([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=B(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;const s=this.createElement("input");let r=0;for(;r<this.element.attributes.length;r++)"id"!==this.element.attributes[r].nodeName&&(s.setAttribute(this.element.attributes[r].nodeName,this.element.attributes[r].nodeValue),s.innerHTML=this.element.innerHTML);this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(s),this.element=s,zt("ej2_instances",t,this.element)}Rt(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"}),this.l10n=new jo("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()}render(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null!==this.value&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete())}checkAttributes(t){const i=t?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];for(const s of i)if(!f(this.element.getAttribute(s)))switch(s){case"disabled":if(f(this.numericOptions)||void 0===this.numericOptions.enabled||t){const r=!("disabled"===this.element.getAttribute(s)||""===this.element.getAttribute(s)||"true"===this.element.getAttribute(s));this.setProperties({enabled:r},!t)}break;case"readonly":if(f(this.numericOptions)||void 0===this.numericOptions.readonly||t){const r="readonly"===this.element.getAttribute(s)||""===this.element.getAttribute(s)||"true"===this.element.getAttribute(s);this.setProperties({readonly:r},!t)}break;case"placeholder":(f(this.numericOptions)||void 0===this.numericOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"value":if(f(this.numericOptions)||void 0===this.numericOptions.value||t){const r=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));this.setProperties(zt(s,r,{}),!t)}break;case"min":if(f(this.numericOptions)||void 0===this.numericOptions.min||t){const r=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));null!==r&&!isNaN(r)&&this.setProperties(zt(s,r,{}),!t)}break;case"max":if(f(this.numericOptions)||void 0===this.numericOptions.max||t){const r=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));null!==r&&!isNaN(r)&&this.setProperties(zt(s,r,{}),!t)}break;case"step":if(f(this.numericOptions)||void 0===this.numericOptions.step||t){const r=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));null!==r&&!isNaN(r)&&this.setProperties(zt(s,r,{}),!t)}break;case"style":this.inputStyle=this.element.getAttribute(s);break;case"name":this.inputName=this.element.getAttribute(s);break;default:{const r=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(s));(null!==r&&!isNaN(r)||"value"===s)&&this.setProperties(zt(s,r,{}),!0)}}}updatePlaceholder(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)}initCultureFunc(){this.instance=new mp(this.locale)}initCultureInfo(){this.cultureInfo.format=this.format,null!==U("currency",this)&&(zt("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))}createWrapper(){let t=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(t=this.getNumericValidClassList(this.cssClass));const i=Bt.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:t,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=i,this.container=i.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&Rt(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),Rt(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&Rt(this.container,{style:this.inputStyle})}updateDataAttribute(t){let i={};if(t)i=this.htmlAttributes;else for(let s=0;s<this.element.attributes.length;s++)i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name);for(const s of Object.keys(i))0===s.indexOf("data")&&this.hiddenInput.setAttribute(s,i[s])}updateHTMLAttrToElement(){if(!f(this.htmlAttributes))for(const t of Object.keys(this.htmlAttributes))wle.indexOf(t)<0&&this.element.setAttribute(t,this.htmlAttributes[t])}updateCssClass(t,i){Bt.setCssClass(this.getNumericValidClassList(t),[this.container],this.getNumericValidClassList(i))}getNumericValidClassList(t){let i=t;return!f(t)&&""!==t&&(i=t.replace(/\s+/g," ").trim()),i}updateHTMLAttrToWrapper(){if(!f(this.htmlAttributes))for(const t of Object.keys(this.htmlAttributes))if(wle.indexOf(t)>-1)if("class"===t){const i=this.getNumericValidClassList(this.htmlAttributes[t]);""!==i&&z([this.container],i.split(" "))}else if("style"===t){let i=this.container.getAttribute(t);i=f(i)?this.htmlAttributes[t]:i+this.htmlAttributes[t],this.container.setAttribute(t,i)}else this.container.setAttribute(t,this.htmlAttributes[t])}setElementWidth(t){f(t)||("number"==typeof t?this.container.style.width=st(t):"string"==typeof t&&(this.container.style.width=t.match(/px|%|em/)?t:st(t)))}spinBtnCreation(){this.spinDown=Bt.appendSpan(x$+" e-spin-down",this.container,this.createElement),Rt(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),this.spinUp=Bt.appendSpan(x$+" "+E$,this.container,this.createElement),Rt(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()}validateMinMax(){"number"==typeof this.min&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),"number"==typeof this.max&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),Rt(this.element,{"aria-valuemin":this.min.toString(),"aria-valuemax":this.max.toString()})}formattedValue(t,i){return this.instance.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(i)}validateStep(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)}action(t,i){this.isInteract=!0;const s=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(s,this.step,t)),this.raiseChangeEvent(i)}checkErrorClass(){this.isValidState?W([this.container],_$):z([this.container],_$),Rt(this.element,{"aria-invalid":this.isValidState?"false":"true"})}bindClearEvent(){this.showClearButton&&k.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)}resetHandler(t){t.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(t),this.isInteract=!0,this.raiseChangeEvent(t)}clear(t){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",B(this.element,"form")){const s=this.element.nextElementSibling,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),s.dispatchEvent(r)}}resetFormHandler(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)}setSpinButton(){f(this.spinDown)||Rt(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),f(this.spinUp)||Rt(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})}wireEvents(){k.add(this.element,"focus",this.focusHandler,this),k.add(this.element,"blur",this.focusOutHandler,this),k.add(this.element,"keydown",this.keyDownHandler,this),k.add(this.element,"keyup",this.keyUpHandler,this),k.add(this.element,"input",this.inputHandler,this),k.add(this.element,"keypress",this.keyPressHandler,this),k.add(this.element,"change",this.changeHandler,this),k.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&k.add(this.formEle,"reset",this.resetFormHandler,this))}wireSpinBtnEvents(){k.add(this.spinUp,q.touchStartEvent,this.mouseDownOnSpinner,this),k.add(this.spinDown,q.touchStartEvent,this.mouseDownOnSpinner,this),k.add(this.spinUp,q.touchEndEvent,this.mouseUpOnSpinner,this),k.add(this.spinDown,q.touchEndEvent,this.mouseUpOnSpinner,this),k.add(this.spinUp,q.touchMoveEvent,this.touchMoveOnSpinner,this),k.add(this.spinDown,q.touchMoveEvent,this.touchMoveOnSpinner,this)}unwireEvents(){k.remove(this.element,"focus",this.focusHandler),k.remove(this.element,"blur",this.focusOutHandler),k.remove(this.element,"keyup",this.keyUpHandler),k.remove(this.element,"input",this.inputHandler),k.remove(this.element,"keydown",this.keyDownHandler),k.remove(this.element,"keypress",this.keyPressHandler),k.remove(this.element,"change",this.changeHandler),k.remove(this.element,"paste",this.pasteHandler),this.formEle&&k.remove(this.formEle,"reset",this.resetFormHandler)}unwireSpinBtnEvents(){k.remove(this.spinUp,q.touchStartEvent,this.mouseDownOnSpinner),k.remove(this.spinDown,q.touchStartEvent,this.mouseDownOnSpinner),k.remove(this.spinUp,q.touchEndEvent,this.mouseUpOnSpinner),k.remove(this.spinDown,q.touchEndEvent,this.mouseUpOnSpinner),k.remove(this.spinUp,q.touchMoveEvent,this.touchMoveOnSpinner),k.remove(this.spinDown,q.touchMoveEvent,this.touchMoveOnSpinner)}changeHandler(t){t.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);const i=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(i,t)}raiseChangeEvent(t){if(this.prevValue!==this.value){const i={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:t},t&&(this.changeEventArgs.event=t),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),Ph(i,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",i)}}pasteHandler(){if(!this.enabled||this.readonly)return;const t=this.element.value;setTimeout(()=>{this.numericRegex().test(this.element.value)||this.setElementValue(t)})}preventHandler(){const t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(()=>{if(this.element.selectionStart>0){const i=this.element.selectionStart,s=this.element.selectionStart-1,r=0,o=this.element.value.split(""),l=U("decimal",Bz(this.locale)),h=l.charCodeAt(0);" "===this.element.value[s]&&this.element.selectionStart>0&&!t?(f(this.prevVal)?this.element.value=this.element.value.trim():0!==s?this.element.value=this.prevVal:0===s&&(this.element.value=this.element.value.trim()),this.element.setSelectionRange(s,s)):isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&45!==this.element.value[this.element.selectionStart-1].charCodeAt(0)?(o.indexOf(this.element.value[this.element.selectionStart-1])!==o.lastIndexOf(this.element.value[this.element.selectionStart-1])&&this.element.value[this.element.selectionStart-1].charCodeAt(0)===h||this.element.value[this.element.selectionStart-1].charCodeAt(0)!==h)&&(this.element.value=this.element.value.substring(0,s)+this.element.value.substring(i,this.element.value.length),this.element.setSelectionRange(s,s),isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&this.element.selectionStart>0&&this.element.value.length&&this.preventHandler()):isNaN(parseFloat(this.element.value[this.element.selectionStart-2]))&&this.element.selectionStart>1&&45!==this.element.value[this.element.selectionStart-2].charCodeAt(0)&&(o.indexOf(this.element.value[this.element.selectionStart-2])!==o.lastIndexOf(this.element.value[this.element.selectionStart-2])&&this.element.value[this.element.selectionStart-2].charCodeAt(0)===h||this.element.value[this.element.selectionStart-2].charCodeAt(0)!==h)&&(this.element.setSelectionRange(s,s),this.nextEle=this.element.value[this.element.selectionStart],this.cursorPosChanged=!0,this.preventHandler()),!0===this.cursorPosChanged&&this.element.value[this.element.selectionStart]===this.nextEle&&isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&(this.element.setSelectionRange(this.element.selectionStart+1,this.element.selectionStart+1),this.cursorPosChanged=!1,this.nextEle=null),""===this.element.value.trim()&&this.element.setSelectionRange(r,r),this.element.selectionStart>0&&(45===this.element.value[this.element.selectionStart-1].charCodeAt(0)&&this.element.selectionStart>1&&(this.element.value=f(this.prevVal)?this.element.value:this.prevVal,this.element.setSelectionRange(this.element.selectionStart,this.element.selectionStart)),this.element.value[this.element.selectionStart-1]===l&&0===this.decimals&&this.validateDecimalOnType&&(this.element.value=this.element.value.substring(0,s)+this.element.value.substring(i,this.element.value.length))),this.prevVal=this.element.value}})}keyUpHandler(){if(!this.enabled||this.readonly)return;(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&q.isDevice&&this.preventHandler();let i=this.instance.getNumberParser({format:"n"})(this.element.value);if(i=null===i||isNaN(i)?null:i,this.hiddenInput.value=i||0===i?i.toString():null,B(this.element,"form")){const r=this.element.nextElementSibling,o=document.createEvent("KeyboardEvent");o.initEvent("keyup",!1,!0),r.dispatchEvent(o)}}inputHandler(t){const i=this;if(!this.enabled||this.readonly)return;const s=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||s)&&q.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==U("decimal",Bz(this.locale))&&this.element.value!==U("minusSign",Bz(this.locale))){let o=this.instance.getNumberParser({format:"n"})(this.element.value);o=isNaN(o)?null:o,i.localChange({value:o}),this.preventChange=!0}if(this.isVue){let o=this.instance.getNumberParser({format:"n"})(this.element.value);const a=this.instance.getNumberParser({format:"n"})(this.elementPrevValue);new RegExp("[^1-9]+$").test(this.element.value)&&(o=this.value);const h={event:t,value:null===o||isNaN(o)?null:o,previousValue:null===a||isNaN(a)?null:a};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",h)}}keyDownHandler(t){if(!this.readonly)switch(t.keyCode){case 38:t.preventDefault(),this.action(Ck,t);break;case 40:t.preventDefault(),this.action(NO,t)}}performAction(t,i,s){(null===t||isNaN(t))&&(t=0);let r=s===Ck?t+i:t-i;return r=this.correctRounding(t,i,r),this.strictMode?this.trimValue(r):r}correctRounding(t,i,s){const r=new RegExp("[,.](.*)"),o=r.test(t.toString()),a=r.test(i.toString());if(o||a){const l=o?r.exec(t.toString())[0].length:0,h=a?r.exec(i.toString())[0].length:0,c=Math.max(l,h);return this.roundValue(s,c)}return s}roundValue(t,i){i=i||0;const s=Math.pow(10,i);return Math.round(t*=s)/s}updateValue(t,i){i&&(this.isInteract=!0),null!==t&&!isNaN(t)&&this.decimals&&(t=this.roundNumber(t,this.decimals)),this.changeValue(null===t||isNaN(t)?null:this.strictMode?this.trimValue(t):t),this.isDynamicChange||this.raiseChangeEvent(i)}updateCurrency(t,i){zt(t,i,this.cultureInfo),this.updateValue(this.value)}changeValue(t){if(t||0===t){const i=this.getNumberOfDecimals(t);this.setProperties({value:this.roundNumber(t,i)},!0)}else this.setProperties({value:t=null},!0);this.modifyText(),this.strictMode||this.validateState()}modifyText(){if(this.value||0===this.value){const t=this.formatNumber(),i=this.isFocused?t:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(i),Rt(this.element,{"aria-valuenow":t}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null}setElementValue(t,i){Bt.setValue(t,i||this.element,this.floatLabelType,this.showClearButton)}validateState(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()}getNumberOfDecimals(t){let i;const s=new RegExp("[eE][-+]?([0-9]+)");let r=t.toString();if(s.test(r)){const a=s.exec(r);f(a)||(r=t.toFixed(Math.min(parseInt(a[1],10),20)))}const o=r.split(".")[1];return i=o&&o.length?o.length:0,null!==this.decimals&&(i=i<this.decimals?i:this.decimals),i}formatNumber(){const t=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(this.value)}trimValue(t){return t>this.max?this.max:t<this.min?this.min:t}roundNumber(t,i){let s=t;const r=i||0,o=s.toString().split("e");s=Math.round(Number(o[0]+"e"+(o[1]?Number(o[1])+r:r)));const a=s.toString().split("e");return s=Number(a[0]+"e"+(a[1]?Number(a[1])-r:-r)),Number(s.toFixed(r))}cancelEvent(t){return t.preventDefault(),!1}keyPressHandler(t){if(!this.enabled||this.readonly)return!0;if(!q.isDevice&&"11.0"===q.info.version&&13===t.keyCode){const r=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(r,t),!0}if(0===t.which||t.metaKey||t.ctrlKey||8===t.keyCode||13===t.keyCode)return!0;const i=String.fromCharCode(t.which);let s=this.element.value;return s=s.substring(0,this.element.selectionStart)+i+s.substring(this.element.selectionEnd),!!this.numericRegex().test(s)||(t.preventDefault(),t.stopPropagation(),!1)}numericRegex(){let i=U("decimal",Bz(this.locale)),s="*";return"."===i&&(i="\\"+i),0===this.decimals&&this.validateDecimalOnType?g1e:(this.decimals&&this.validateDecimalOnType&&(s="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+i+"\\d"+s+")?)|("+i+"\\d"+s+")))?$"))}mouseWheel(t){let i;t.preventDefault(),t.wheelDelta?i=t.wheelDelta/120:t.detail&&(i=-t.detail/3),i>0?this.action(Ck,t):i<0&&this.action(NO,t),this.cancelEvent(t)}focusHandler(t){if(this.focusEventArgs={event:t,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,W([this.container],_$),this.prevValue=this.value,this.value||0===this.value){const i=this.formatNumber();this.setElementValue(i),this.isPrevFocused||(q.isDevice||"11.0"!==q.info.version?setTimeout(()=>{this.element.setSelectionRange(0,i.length)},q.isDevice&&q.isIos?600:0):this.element.setSelectionRange(0,i.length))}q.isDevice||k.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}}focusOutHandler(t){if(this.blurEventArgs={event:t,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(t.preventDefault(),q.isDevice){const s=this.element.value;this.element.focus(),this.isPrevFocused=!1;const r=this.element;setTimeout(()=>{this.setElementValue(s,r)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);const s=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(s),q.isDevice||k.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(B(this.element,"form")){const s=this.element.nextElementSibling,r=document.createEvent("FocusEvent");r.initEvent("focusout",!1,!0),s.dispatchEvent(r)}}}mouseDownOnSpinner(t){if(this.isFocused&&(this.isPrevFocused=!0,t.preventDefault()),!this.getElementData(t))return;this.getElementData(t);const s=t.currentTarget,r=s.classList.contains(E$)?Ck:NO;k.add(s,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(()=>{this.isCalled=!0,this.action(r,t)},150),k.add(document,"mouseup",this.mouseUpClick,this)}touchMoveOnSpinner(t){let i;if("touchmove"===t.type){let s=t.touches;i=s.length&&document.elementFromPoint(s[0].pageX,s[0].pageY)}else i=document.elementFromPoint(t.clientX,t.clientY);i.classList.contains(x$)||clearInterval(this.timeOut)}mouseUpOnSpinner(t){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),q.isDevice||(this.isPrevFocused=!1)),q.isDevice||t.preventDefault(),!this.getElementData(t))return;const i=t.currentTarget,s=i.classList.contains(E$)?Ck:NO;if(k.remove(i,"mouseleave",this.mouseUpClick),this.isCalled||this.action(s,t),this.isCalled=!1,k.remove(document,"mouseup",this.mouseUpClick),B(this.element,"form")){const o=this.element.nextElementSibling,a=document.createEvent("KeyboardEvent");a.initEvent("keyup",!1,!0),o.dispatchEvent(a)}}getElementData(t){return!(t.which&&3===t.which||t.button&&2===t.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))}floatLabelTypeUpdate(){Bt.removeFloating(this.inputWrapper);const t=this.hiddenInput;this.hiddenInput.remove(),Bt.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(t,this.container.childNodes[1])}mouseUpClick(t){t.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,k.remove(this.spinUp,"mouseleave",this.mouseUpClick),k.remove(this.spinDown,"mouseleave",this.mouseUpClick)}increment(t=this.step){this.isInteract=!1,this.changeValue(this.performAction(this.value,t,Ck)),this.raiseChangeEvent()}decrement(t=this.step){this.isInteract=!1,this.changeValue(this.performAction(this.value,t,NO)),this.raiseChangeEvent()}destroy(){this.unwireEvents(),te(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),te(this.spinUp),te(this.spinDown));const t=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"];for(let i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),te(this.container),super.destroy()}getText(){return this.element.value}focusIn(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),z([this.container],[Cle]))}focusOut(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),W([this.container],[Cle]))}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(t,i){for(const s of Object.keys(t))switch(s){case"width":this.setElementWidth(t.width);break;case"cssClass":this.updateCssClass(t.cssClass,i.cssClass);break;case"enabled":Bt.setEnabled(t.enabled,this.element);break;case"enableRtl":Bt.setEnableRtl(t.enableRtl,[this.container]);break;case"readonly":Bt.setReadonly(t.readonly,this.element),this.readonly?Rt(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),Bt.validateInputType(this.container,this.element);break;case"placeholder":Bt.setPlaceholder(t.placeholder,this.element);break;case"step":this.step=t.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(t);break;case"showClearButton":this.updateClearButton(t);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(t.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":zt(s,U(s,t),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=t.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),Bt.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":{const r=U(s,t);this.setProperties({currencyCode:r},!0),this.updateCurrency(s,r)}break;case"currencyCode":{const r=U(s,t);this.setProperties({currency:r},!0),this.updateCurrency("currency",r)}break;case"format":zt(s,U(s,t),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=t.decimals,this.updateValue(this.value)}}updateClearButton(t){Bt.setClearButton(t.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()}updateSpinButton(t){t.showSpinButton?this.spinBtnCreation():(te(this.spinUp),te(this.spinDown))}getModuleName(){return"numerictextbox"}};return bo([_("")],n.prototype,"cssClass",void 0),bo([_(null)],n.prototype,"value",void 0),bo([_(-Number.MAX_VALUE)],n.prototype,"min",void 0),bo([_(Number.MAX_VALUE)],n.prototype,"max",void 0),bo([_(1)],n.prototype,"step",void 0),bo([_(null)],n.prototype,"width",void 0),bo([_(null)],n.prototype,"placeholder",void 0),bo([_({})],n.prototype,"htmlAttributes",void 0),bo([_(!0)],n.prototype,"showSpinButton",void 0),bo([_(!1)],n.prototype,"readonly",void 0),bo([_(!0)],n.prototype,"enabled",void 0),bo([_(!1)],n.prototype,"showClearButton",void 0),bo([_(!1)],n.prototype,"enablePersistence",void 0),bo([_("n2")],n.prototype,"format",void 0),bo([_(null)],n.prototype,"decimals",void 0),bo([_(null)],n.prototype,"currency",void 0),bo([_(null)],n.prototype,"currencyCode",void 0),bo([_(!0)],n.prototype,"strictMode",void 0),bo([_(!1)],n.prototype,"validateDecimalOnType",void 0),bo([_("Never")],n.prototype,"floatLabelType",void 0),bo([G()],n.prototype,"created",void 0),bo([G()],n.prototype,"destroyed",void 0),bo([G()],n.prototype,"change",void 0),bo([G()],n.prototype,"focus",void 0),bo([G()],n.prototype,"blur",void 0),n=bo([as],n),n})();const v5="e-error",C5="e-label-top",xle={0:"[0-9]",9:"[0-9 ]","#":"[0-9 +-]",L:"[A-Za-z]","?":"[A-Za-z ]","&":"[^\x7f ]+",C:"[^\x7f]+",A:"[A-Za-z0-9]",a:"[A-Za-z0-9 ]"};function Ele(){if(Rt(this.element,{role:"textbox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-live":"assertive","aria-valuenow":""}),this.mask){const n=this.mask.split("]");for(let t=0;t<n.length;t++)if("\\"===n[t][n[t].length-1]){n[t]=n[t]+"]";const i=n[t].split("[");for(let s=0;s<i.length;s++)"\\"===i[s][i[s].length-1]&&(i[s]=i[s]+"["),T$.call(this,i[s])}else{const i=n[t].split("[");if(i.length>1){let s=!1;for(let r=0;r<i.length;r++)"\\"===i[r]?(this.customRegExpCollec.push("["),this.hiddenMask+=i[r]+"["):""===i[r]?s=!0:""!==i[r]&&s||r===i.length-1?(this.customRegExpCollec.push("["+i[r]+"]"),this.hiddenMask+=this.promptChar,s=!1):T$.call(this,i[r])}else T$.call(this,i[0])}if(this.escapeMaskValue=this.hiddenMask,this.promptMask=this.hiddenMask.replace(/[09?LCAa#&]/g,this.promptChar),!f(this.customCharacters))for(let t=0;t<this.promptMask.length;t++)f(this.customCharacters[this.promptMask[t]])||(this.promptMask=this.promptMask.replace(new RegExp(this.promptMask[t],"g"),this.promptChar));let e=0;if(this.hiddenMask.match(new RegExp(/\\/)))for(let t=0;t<this.hiddenMask.length;t++){let i=0;t>=1&&(i=t),e=this.hiddenMask.length-this.promptMask.length,i-=e,t>0&&"\\"!==this.hiddenMask[t-1]&&(">"===this.hiddenMask[t]||"<"===this.hiddenMask[t]||"|"===this.hiddenMask[t])&&(this.promptMask=this.promptMask.substring(0,i)+this.promptMask.substring(t+1-e,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,i)+this.escapeMaskValue.substring(t+1-e,this.escapeMaskValue.length)),"\\"===this.hiddenMask[t]&&(this.promptMask=this.promptMask.substring(0,i)+this.hiddenMask[t+1]+this.promptMask.substring(t+2-e,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,i)+this.escapeMaskValue[t+1]+this.escapeMaskValue.substring(t+2-e,this.escapeMaskValue.length))}else this.promptMask=this.promptMask.replace(/[>|<]/g,""),this.escapeMaskValue=this.hiddenMask.replace(/[>|<]/g,"");Rt(this.element,{"aria-invalid":"false"})}}function _le(){wr.call(this,this.promptMask),w5.call(this,this.value)}function Ile(){k.add(this.element,"keydown",Nle,this),k.add(this.element,"keypress",Vle,this),k.add(this.element,"keyup",zle,this),k.add(this.element,"input",Fle,this),k.add(this.element,"focus",Lle,this),k.add(this.element,"blur",Mle,this),k.add(this.element,"paste",Ole,this),k.add(this.element,"cut",Ple,this),k.add(this.element,"drop",I1e,this),k.add(this.element,"mousedown",Rle,this),k.add(this.element,"mouseup",Ale,this),this.enabled&&(Tle.call(this),this.formElement&&k.add(this.formElement,"reset",Dle,this))}function I$(){k.remove(this.element,"keydown",Nle),k.remove(this.element,"keypress",Vle),k.remove(this.element,"keyup",zle),k.remove(this.element,"input",Fle),k.remove(this.element,"focus",Lle),k.remove(this.element,"blur",Mle),k.remove(this.element,"paste",Ole),k.remove(this.element,"cut",Ple),k.remove(this.element,"mousedown",Rle),k.remove(this.element,"mouseup",Ale),this.formElement&&k.remove(this.formElement,"reset",Dle)}function Tle(){this.showClearButton&&k.add(this.inputObj.clearButton,"mousedown touchstart",E1e,this)}function E1e(n){n.preventDefault(),(!this.inputObj.clearButton.classList.contains("e-clear-icon-hide")||this.inputObj.container.classList.contains("e-static-clear"))&&(_1e.call(this,n),this.value="")}function _1e(n){const e=this.element.value;wr.call(this,this.promptMask),this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),oC.call(this,n,e),this.element.setSelectionRange(0,0)}function Dle(){"EJS-MASKEDTEXTBOX"===this.element.tagName?wr.call(this,this.promptMask):this.value=this.initInputValue}function kle(n){return n.value}function lg(n,e){let t="",i=0,s=!1;const r=!f(e)||f(n)||f(this)?e:n.value;if(r!==this.promptMask)for(let o=0;o<this.customRegExpCollec.length;o++)s&&(s=!1),(">"===this.customRegExpCollec[i]||"<"===this.customRegExpCollec[i]||"|"===this.customRegExpCollec[i]||"\\"===this.customRegExpCollec[i])&&(--o,s=!0),s||r[o]!==this.promptChar&&!f(this.customRegExpCollec[i])&&(this._callPasteHandler||!f(this.regExpCollec[this.customRegExpCollec[i]])||this.customRegExpCollec[i].length>2&&"["===this.customRegExpCollec[i][0]&&"]"===this.customRegExpCollec[i][this.customRegExpCollec[i].length-1]||!f(this.customCharacters)&&!f(this.customCharacters[this.customRegExpCollec[i]]))&&""!==r&&(t+=r[o]),++i;return(null===this.mask||""===this.mask&&void 0!==this.value)&&(t=r),t}function T$(n){for(let e=0;e<n.length;e++)this.hiddenMask+=n[e],"\\"!==n[e]&&this.customRegExpCollec.push(n[e])}function Rle(){this.isClicked=!0}function Ale(){this.isClicked=!1}function Lle(n){const e=this.element;let t=0;const i=lg.call(this,e);let s=!1,r=!1,o={selectionStart:e.selectionStart,event:n,value:this.value,maskedValue:e.value,container:this.inputObj.container,selectionEnd:e.selectionEnd};if(this.isClicked||D$.call(this,o,e),this.mask&&(!(null===i||""===i)||"Always"===this.floatLabelType||null===this.placeholder||""===this.placeholder||(e.value=this.promptMask),setTimeout(()=>{if(e.selectionStart===this.promptMask.length||e.value[e.selectionStart]===this.promptChar)s=!0;else for(let a=e.selectionStart;a<this.promptMask.length;a++){if(e.value[a]===this.promptChar){s=!0;break}if(e.value[a]!==this.promptMask[a]){s=!1;break}}}),setTimeout(()=>{const a=e.selectionStart-1;if(a===this.promptMask.length-1||e.value[a]===this.promptChar)r=!0;else for(let l=a;l>=0;l--){if(e.value[l]===this.promptChar){r=!0;break}if(e.value[l]!==this.promptMask[l]){r=!1;break}}}),this.isClicked||"Always"!==this.floatLabelType&&(null===i||""===i)&&null!==this.placeholder&&""!==this.placeholder)){for(t=0;t<this.promptMask.length;t++)if(e.value[t]===this.promptChar){setTimeout(()=>{(s||r)&&(e.selectionEnd=t,e.selectionStart=t),o={selectionStart:e.selectionStart,event:n,value:this.value,maskedValue:e.value,container:this.inputObj.container,selectionEnd:e.selectionEnd},D$.call(this,o,e)});break}f(e.value.match(this.promptChar))&&(o={selectionStart:e.selectionStart,event:n,value:this.value,maskedValue:e.value,container:this.inputObj.container,selectionEnd:e.selectionEnd},D$.call(this,o,e)),this.isClicked=!1}}function D$(n,e){this.trigger("focus",n,t=>{e.selectionStart=t.selectionStart,e.selectionEnd=t.selectionEnd})}function Mle(n){if(this.blurEventArgs={event:n,value:this.value,maskedValue:this.element.value,container:this.inputObj.container},this.trigger("blur",this.blurEventArgs),this.mask&&(this.isFocus=!1,this.placeholder&&this.element.value===this.promptMask&&"Always"!==this.floatLabelType)){wr.call(this,"");const e=this.element.parentNode.querySelector(".e-float-text");"Auto"===this.floatLabelType&&!f(e)&&e.classList.contains(C5)&&W([e],C5)}}function Ole(n){if(this.mask&&!this.readonly){const e=this.element.selectionStart,t=this.element.selectionEnd,i=this.element.value;wr.call(this,""),this._callPasteHandler=!0,setTimeout(()=>{let s=this.element.value.replace(/ /g,"");this.redoCollec.length>0&&this.redoCollec[0].value===this.element.value&&(s=lg.call(this,this.element)),wr.call(this,i),this.element.selectionStart=e,this.element.selectionEnd=t;let r=0;this.maskKeyPress=!0;do{Yw.call(this,s[r],!1,null),++r}while(r<s.length);if(this.maskKeyPress=!1,this._callPasteHandler=!1,this.element.value===i){let o=0;this.maskKeyPress=!0;do{Yw.call(this,s[o],!1,null),++o}while(o<s.length);this.maskKeyPress=!1}else oC.call(this,n,i)},1)}}function Ple(n){if(this.mask&&!this.readonly){const e=this.element.value,t=this.element.selectionStart,i=this.element.selectionEnd;this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd});const s=this.element.value.substring(0,t)+this.promptMask.substring(t,i)+this.element.value.substring(i);setTimeout(()=>{wr.call(this,s),this.element.selectionStart=this.element.selectionEnd=t,this.element.value!==e&&oC.call(this,n,null)},0)}}function I1e(n){n.preventDefault()}function Fle(n){if((!0!==q.isIE||""!==this.element.value||"Never"!==this.floatLabelType)&&(Ae(n,{ctrlKey:!1,keyCode:229}),this.mask)){if(""===this.element.value&&this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this._callPasteHandler||Hle.call(this,n),this.element.value.length>this.promptMask.length){const i=this.element.selectionStart,r=this.element.value.substring(i-(this.element.value.length-this.promptMask.length),i);this.maskKeyPress=!1;let o=0;do{Yw.call(this,r[o],n.ctrlKey,n),++o}while(o<r.length);this.element.value!==this.preEleVal&&oC.call(this,n,null)}const t=lg.call(this,this.element);this.prevValue=t,this.value=t,""===t&&(wr.call(this,this.promptMask),this.element.setSelectionRange(0,0))}}function Nle(n){if(this.mask&&!this.readonly){229!==n.keyCode&&(n.ctrlKey&&(89===n.keyCode||90===n.keyCode)&&n.preventDefault(),Hle.call(this,n));const e=this.element.value;if(n.ctrlKey&&(89===n.keyCode||90===n.keyCode)){let t;90===n.keyCode&&this.undoCollec.length>0&&e!==this.undoCollec[this.undoCollec.length-1].value?(t=this.undoCollec[this.undoCollec.length-1],this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),wr.call(this,t.value),this.element.selectionStart=t.startIndex,this.element.selectionEnd=t.endIndex,this.undoCollec.splice(this.undoCollec.length-1,1)):89===n.keyCode&&this.redoCollec.length>0&&e!==this.redoCollec[0].value&&(t=this.redoCollec[0],this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),wr.call(this,t.value),this.element.selectionStart=t.startIndex,this.element.selectionEnd=t.endIndex,this.redoCollec.splice(0,1))}}}function T1e(){let n;const e=this.element.selectionStart,t=this.element.selectionEnd;this.redoCollec.length>0?(n=this.redoCollec[0],wr.call(this,n.value),n.startIndex-e==1?(this.element.selectionStart=n.startIndex,this.element.selectionEnd=n.endIndex):(this.element.selectionStart=e+1,this.element.selectionEnd=t+1)):(wr.call(this,this.promptMask),this.element.selectionStart=this.element.selectionEnd=e)}function Ble(n,e,t){return"input"===t.type&&(n=!1,e=this.element.value,wr.call(this,this.promptMask),w5.call(this,e)),n}function Hle(n){let t,e=!1,i=!1;this.element.value.length<this.promptMask.length&&(e=!0,t=this.element.value,e=Ble.call(this,e,t,n),T1e.call(this)),this.element.value.length>=this.promptMask.length&&"input"===n.type&&(e=Ble.call(this,e,t,n));const s=this.element.selectionStart,r=this.element.selectionEnd;let o=this.element.selectionStart;const a=this.element.selectionEnd,l=this.hiddenMask.replace(/[>|\\<]/g,"");let h=l[o-1];const c=this.element.selectionEnd;if(e||8===n.keyCode||46===n.keyCode){this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:a});let m=!1;const b=this.element.value;if(o>0||(8===n.keyCode||46===n.keyCode)&&o<this.element.value.length&&this.element.selectionEnd-o!==this.element.value.length){let v=o;o!==a?(o=a,46===n.keyCode&&(m=!0)):46===n.keyCode?++v:--v;for(let w=o;8===n.keyCode||e||m?w>v:w<v;8===n.keyCode||e||m?w--:w++)for(let E=o;8===n.keyCode||e||m?E>0:E<this.element.value.length;8===n.keyCode||e||m?E--:E++){let D;(8===n.keyCode||m)&&(s!==r&&s!==o||s===r)||e?(h=l[E-1],D=o-1):(h=l[E],D=o,++o);let L=this.element.value[D];if(f(this.regExpCollec[h])&&!f(this.customCharacters)&&f(this.customCharacters[h])&&this.hiddenMask[D]!==this.promptChar&&"["!==this.customRegExpCollec[D][0]&&"]"!==this.customRegExpCollec[D][this.customRegExpCollec[D].length-1]||this.promptMask[D]!==this.promptChar&&f(this.customCharacters))this.element.selectionStart=this.element.selectionEnd=D,n.preventDefault(),46===n.keyCode&&!m&&++this.element.selectionStart;else{const N=this.element.value,V=this.promptChar,$=N.substring(0,D)+V+N.substring(o,N.length);wr.call(this,$),n.preventDefault(),46===n.keyCode&&!m&&D++,this.element.selectionStart=this.element.selectionEnd=D,i=!0}if(o=this.element.selectionStart,!i&&8===n.keyCode||m||!i&&46!==n.keyCode?D=o-1:(D=o,i=!1),L=this.element.value[D],s!==r&&this.element.selectionStart===s||this.promptMask[D]===this.promptChar||L!==this.promptMask[D]&&this.promptMask[D]!==this.promptChar&&!f(this.customCharacters))break}}46===n.keyCode&&m&&i&&(this.element.selectionStart=this.element.selectionEnd=c),0===this.element.selectionStart&&this.element.selectionEnd===this.element.value.length&&(wr.call(this,this.promptMask),n.preventDefault(),this.element.selectionStart=this.element.selectionEnd=o),this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),this.element.value!==b&&oC.call(this,n,t)}}function Vle(n){if(this.mask&&!this.readonly){const e=this.element.value;if(!n.ctrlKey||n.ctrlKey&&"KeyA"!==n.code&&"KeyY"!==n.code&&"KeyZ"!==n.code&&"KeyX"!==n.code&&"KeyC"!==n.code&&"KeyV"!==n.code){this.maskKeyPress=!0;let t=n.key;"Spacebar"===t&&(t=String.fromCharCode(n.keyCode)),t?t&&1===t.length&&(Yw.call(this,t,n.ctrlKey,n),n.preventDefault()):(this.isIosInvalid=!0,Yw.call(this,String.fromCharCode(n.keyCode),n.ctrlKey,n),n.preventDefault(),this.isIosInvalid=!1),32===n.keyCode&&" "===t&&" "===this.promptChar&&(this.element.selectionStart=this.element.selectionEnd=this.element.selectionStart-t.length)}this.element.value!==e&&oC.call(this,n,e)}}function oC(n,e){const t=this.isProtectedOnChange;if(!f(this.changeEventArgs)&&!this.isInitial){const i={};this.changeEventArgs={value:this.element.value,maskedValue:this.element.value,isInteraction:!1,isInteracted:!1},this.mask&&(this.changeEventArgs.value=lg.call(this,this.element)),f(n)||(this.changeEventArgs.isInteracted=!0,this.changeEventArgs.isInteraction=!0,this.changeEventArgs.event=n),this.isProtectedOnChange=!0,this.value=this.changeEventArgs.value,this.isProtectedOnChange=t,Ph(i,this.changeEventArgs),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",i)}this.preEleVal=this.element.value,this.prevValue=lg.call(this,this.element),Rt(this.element,{"aria-valuenow":this.element.value})}function zle(n){if(this.mask&&!this.readonly){let e;if(this.maskKeyPress||229!==n.keyCode)Ule.call(this);else{let i;if(1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this.element.value.length>this.promptMask.length){const s=this.element.selectionStart,r=this.element.value.length-this.promptMask.length;let o=this.element.value.substring(s-r,s);if(this.undoCollec.length>0){e=this.undoCollec[this.undoCollec.length-1];const a=this.element.selectionStart;i=e.value;const l=e.value.substring(a-r,a);e=this.redoCollec[0],o=o.trim();const h=q.isAndroid&&""===o;h||l===o||e.value.substring(a-r,a)===o?h&&jle.call(this,n,a-1,this.element.selectionEnd-1,o,n.ctrlKey,!1):Yw.call(this,o,n.ctrlKey,n)}else i=this.promptMask,Yw.call(this,o,n.ctrlKey,n);this.maskKeyPress=!1,oC.call(this,n,i)}}const t=lg.call(this,this.element);(0!==this.element.selectionStart||this.promptMask!==this.element.value||""!==t||""===t&&this.value!==t)&&(this.prevValue=t,this.value=t)}else oC.call(this,n);if(0===this.element.selectionStart&&0===this.element.selectionEnd){const e=this.element;setTimeout(()=>{e.setSelectionRange(0,0)},0)}}function D1e(n){if(n.length>1&&this.promptMask.length+n.length<this.element.value.length){const e=this.redoCollec[0].value.substring(0,this.redoCollec[0].startIndex)+n+this.redoCollec[0].value.substring(this.redoCollec[0].startIndex,this.redoCollec[0].value.length);wr.call(this,e),this.element.selectionStart=this.element.selectionEnd=this.redoCollec[0].startIndex+n.length}this.element.selectionStart=this.element.selectionStart-n.length,this.element.selectionEnd=this.element.selectionEnd-n.length}function k1e(n){this.maskKeyPress||D1e.call(this,n)}function Yw(n,e,t){if(k1e.call(this,n),f(this)||f(n))return;let i=this.element.selectionStart;const s=i;let r,o=!1;const a=this.element.value;let l,h=!1,c=!1;for(let m=0;m<n.length;m++){const b=n[m];if(i=this.element.selectionStart,!this.maskKeyPress&&s===i&&(i+=m),!this.maskKeyPress||i<this.promptMask.length){for(let v=i;v<this.promptMask.length;v++)r=this.escapeMaskValue[i],"\\"===this.hiddenMask[i]&&this.hiddenMask[i+1]===n&&(c=!0),(f(this.regExpCollec[r])&&(f(this.customCharacters)||!f(this.customCharacters)&&f(this.customCharacters[r]))&&this.hiddenMask[i]!==this.promptChar&&"["!==this.customRegExpCollec[i][0]&&"]"!==this.customRegExpCollec[i][this.customRegExpCollec[i].length-1]||this.promptMask[i]!==this.promptChar&&f(this.customCharacters)||this.promptChar===r&&this.escapeMaskValue===this.mask)&&(this.element.selectionStart=this.element.selectionEnd=i+1,i=this.element.selectionStart,r=this.hiddenMask[i]);if(f(this.customCharacters)||f(this.customCharacters[r]))(!f(this.regExpCollec[r])&&b.match(new RegExp(this.regExpCollec[r]))&&this.promptMask[i]===this.promptChar||this.promptMask[i]===this.promptChar&&"["===this.customRegExpCollec[i][0]&&"]"===this.customRegExpCollec[i][this.customRegExpCollec[i].length-1]&&b.match(new RegExp(this.customRegExpCollec[i])))&&(o=!0);else{const w=this.customCharacters[r].split(",");for(let E=0;E<w.length;E++)if(b.match(new RegExp("["+w[E]+"]"))){o=!0;break}}if((!this.maskKeyPress||i<this.hiddenMask.length)&&o){if(0===m)if(this.maskKeyPress)this.undoCollec.push({value:a,startIndex:i,endIndex:i});else{const v=this.element.selectionStart,w=this.element.selectionEnd;this.redoCollec.length>0?(l=this.redoCollec[0].value,wr.call(this,l),this.undoCollec.push(this.redoCollec[0])):(this.undoCollec.push({value:this.promptMask,startIndex:i,endIndex:i}),l=this.promptMask,wr.call(this,l)),this.element.selectionStart=v,this.element.selectionEnd=w}i=this.element.selectionStart,R1e.call(this,t,i,b,l,c),h=!0,m===n.length-1&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),o=!1}else i=this.element.selectionStart,jle.call(this,t,i,s,n,e,h);m===n.length-1&&!o&&(!q.isAndroid||q.isAndroid&&i<this.promptMask.length)&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd})}else 1===n.length&&!e&&!f(t)&&k$.call(this)}}function R1e(n,e,t,i,s){if(this.hiddenMask.length>this.promptMask.length&&(t=A1e.call(this,t,this.element.value)),!s){const r=this.element.value,o=r.substring(0,e)+t+r.substring(e+1,r.length);wr.call(this,o),this.element.selectionStart=this.element.selectionEnd=e+1}}function jle(n,e,t,i,s,r){if(!this.maskKeyPress){const o=this.element.value;e>=this.promptMask.length?wr.call(this,o.substring(0,e)):(wr.call(this,t===e?o.substring(0,e)+o.substring(e+1,o.length):this.promptMask.length===this.element.value.length?o.substring(0,e)+o.substring(e,o.length):o.substring(0,t)+o.substring(t+1,o.length)),this.element.selectionStart=this.element.selectionEnd=r||this.element.value[t]!==this.promptChar?e:t),k$.call(this)}1===i.length&&!s&&!f(n)&&k$.call(this)}function k$(){const n=this.element.parentNode;let e=200;n.classList.contains("e-input-group")||n.classList.contains("e-float-input")?z([n],v5):z([this.element],v5),!0===this.isIosInvalid&&(e=400),Rt(this.element,{"aria-invalid":"true"}),setTimeout(()=>{this.maskKeyPress||Ule.call(this)},e)}function Ule(){const n=this.element.parentNode;f(n)||W([n],v5),W([this.element],v5),Rt(this.element,{"aria-invalid":"false"})}function A1e(n,e){let t,i,s=e,r=0;for(i=0;i<this.hiddenMask.length;i++)if("\\"===this.hiddenMask[i]&&(t=s.substring(0,i)+"\\"+s.substring(i,s.length)),(">"===this.hiddenMask[i]||"<"===this.hiddenMask[i]||"|"===this.hiddenMask[i])&&(this.hiddenMask[i]!==s[i]&&(t=s.substring(0,i)+this.hiddenMask[i]+s.substring(i,s.length)),++r),t){if(t[i]===this.promptChar&&i>this.element.selectionStart||this.element.value.indexOf(this.promptChar)<0&&this.element.selectionStart+r===i){r=0;break}s=t}for(;i>=0&&t;){if(0===i||"\\"!==t[i-1]){if(">"===t[i]){n=n.toUpperCase();break}if("<"===t[i]){n=n.toLowerCase();break}if("|"===t[i])break}--i}return n}function w5(n){if(this.mask&&void 0!==n&&(void 0===this.prevValue||this.prevValue!==n)){if(this.maskKeyPress=!0,wr.call(this,this.promptMask),""!==n&&!(null===n&&"Never"===this.floatLabelType&&this.placeholder)&&(this.element.selectionStart=0,this.element.selectionEnd=0),null!==n)for(let i=0;i<n.length;i++)Yw.call(this,n[i],!1,null);const e=lg.call(this,this.element);this.prevValue=e,this.value=e,oC.call(this,null,null),this.maskKeyPress=!1;const t=this.element.parentNode.querySelector(".e-float-text");this.element.value===this.promptMask&&"Auto"===this.floatLabelType&&this.placeholder&&!f(t)&&t.classList.contains(C5)&&!this.isFocus&&(W([t],C5),z([t],"e-label-bottom"),wr.call(this,""))}(null===this.mask||""===this.mask&&void 0!==this.value)&&wr.call(this,this.value)}function wr(n,e){!this.isFocus&&"Auto"===this.floatLabelType&&this.placeholder&&f(this.value)&&(n="");const t=lg.call(this,e||this.element,n);null===t||""===t?(Bt.setValue(n,e||this.element,this.floatLabelType,!1),this.showClearButton&&this.inputObj.clearButton.classList.add("e-clear-icon-hide")):Bt.setValue(n,e||this.element,this.floatLabelType,this.showClearButton)}var ch=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Gle="e-input-focus",$le=["title","style","class"];let Al=class extends Qs{constructor(e,t){super(e,t),this.initInputValue="",this.isAngular=!1,this.preventChange=!1,this.isClicked=!1,this.maskOptions=e}getModuleName(){return"maskedtextbox"}preRender(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.regExpCollec=xle,this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.changeEventArgs={},this.focusEventArgs={},this.blurEventArgs={},this.maskKeyPress=!1,this.isFocus=!1,this.isInitial=!1,this.isIosInvalid=!1;const e=U("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),W([this.cloneElement],["e-control","e-maskedtextbox","e-lib"]),this.angularTagName=null,this.formElement=B(this.element,"form"),"EJS-MASKEDTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;const t=this.createElement("input");for(let i=0;i<this.element.attributes.length;i++)t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML;this.element.hasAttribute("id")&&this.element.removeAttribute("id"),this.element.classList.remove("e-control","e-maskedtextbox"),this.element.classList.add("e-mask-container"),this.element.appendChild(t),this.element=t,zt("ej2_instances",e,this.element)}this.updateHTMLAttrToElement(),this.checkHtmlAttributes(!1),this.formElement&&(this.initInputValue=this.value)}getPersistData(){return this.addOnPersist(["value"])}render(){"input"===this.element.tagName.toLowerCase()&&("Never"===this.floatLabelType&&z([this.element],"e-input"),this.createWrapper(),this.updateHTMLAttrToWrapper(),""===this.element.name&&this.element.setAttribute("name",this.element.id),this.isInitial=!0,this.resetMaskedTextBox(),this.isInitial=!1,this.setMaskPlaceholder(!0,!1),this.setWidth(this.width),this.preEleVal=this.element.value,!q.isDevice&&("11.0"===q.info.version||"edge"===q.info.name)&&this.element.blur(),q.isDevice&&q.isIos&&this.element.blur(),(this.element.getAttribute("value")||this.value)&&this.element.setAttribute("value",this.element.value),this.renderComplete())}updateHTMLAttrToElement(){if(!f(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))$le.indexOf(e)<0&&this.element.setAttribute(e,this.htmlAttributes[e])}updateCssClass(e,t){Bt.setCssClass(this.getValidClassList(e),[this.inputObj.container],this.getValidClassList(t))}getValidClassList(e){let t=e;return!f(e)&&""!==e&&(t=e.replace(/\s+/g," ").trim()),t}updateHTMLAttrToWrapper(){if(!f(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if($le.indexOf(e)>-1)if("class"===e){const t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&z([this.inputObj.container],t.split(" "))}else if("style"===e){let t=this.inputObj.container.getAttribute(e);t=f(t)?this.htmlAttributes[e]:t+this.htmlAttributes[e],this.inputObj.container.setAttribute(e,t)}else this.inputObj.container.setAttribute(e,this.htmlAttributes[e])}resetMaskedTextBox(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.promptChar.length>1&&(this.promptChar=this.promptChar[0]),Ele.call(this),_le.call(this),(null===this.mask||""===this.mask&&void 0!==this.value)&&wr.call(this,this.value);const e=lg.call(this,this.element);this.prevValue=e,this.value=e,this.isInitial||I$.call(this),Ile.call(this)}setMaskPlaceholder(e,t){(t||this.placeholder)&&(Bt.setPlaceholder(this.placeholder,this.element),(this.element.value===this.promptMask&&e&&"Always"!==this.floatLabelType||this.element.value===this.promptMask&&"Never"===this.floatLabelType)&&wr.call(this,""))}setWidth(e){if(!f(e))if("number"==typeof e)this.inputObj.container.style.width=st(e),this.element.style.width=st(e);else if("string"==typeof e){const t=e.match(/px|%|em/)?e:st(e);this.inputObj.container.style.width=t,this.element.style.width=t}}checkHtmlAttributes(e){const t=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly"];for(const i of t)if(!f(this.element.getAttribute(i)))switch(i){case"placeholder":(f(this.maskOptions)||void 0===this.maskOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"disabled":if(f(this.maskOptions)||void 0===this.maskOptions.enabled||e){const s=!("disabled"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i));this.setProperties({enabled:s},!e)}break;case"value":(f(this.maskOptions)||void 0===this.maskOptions.value||e)&&this.setProperties({value:this.element.value},!e);break;case"readonly":if(f(this.maskOptions)||void 0===this.maskOptions.readonly||e){const s="readonly"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({readonly:s},!e)}}}createWrapper(){let e=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(e=this.getValidClassList(this.cssClass)),this.inputObj=Bt.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{enableRtl:this.enableRtl,cssClass:e,enabled:this.enabled,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}},this.createElement),this.inputObj.container.setAttribute("class","e-control-wrapper e-mask "+this.inputObj.container.getAttribute("class"))}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"value":w5.call(this,this.value),this.placeholder&&this.setMaskPlaceholder(!1,!1);break;case"placeholder":this.setMaskPlaceholder(!0,!0);break;case"width":this.setWidth(e.width);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":Bt.setEnabled(e.enabled,this.element,this.floatLabelType,this.inputObj.container);break;case"readonly":Bt.setReadonly(e.readonly,this.element);break;case"enableRtl":Bt.setEnableRtl(e.enableRtl,[this.inputObj.container]);break;case"customCharacters":this.customCharacters=e.customCharacters,this.resetMaskedTextBox();break;case"showClearButton":Bt.setClearButton(e.showClearButton,this.element,this.inputObj,void 0,this.createElement),Tle.call(this);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,Bt.removeFloating(this.inputObj),Bt.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement);break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHtmlAttributes(!0);break;case"mask":{const s=this.value;this.mask=e.mask,this.updateValue(s)}break;case"promptChar":{e.promptChar.length>1&&(e.promptChar=e.promptChar[0]),this.promptChar=e.promptChar?e.promptChar:"_";let s=this.element.value.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar);this.promptMask===this.element.value&&(s=this.promptMask.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar)),this.promptMask=this.promptMask.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar),this.undoCollec=this.redoCollec=[],wr.call(this,s);break}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}updateValue(e){this.resetMaskedTextBox(),w5.call(this,e)}getMaskedValue(){return kle.call(this,this.element)}focusIn(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),z([this.inputObj.container],[Gle]))}focusOut(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),W([this.inputObj.container],[Gle]))}destroy(){I$.call(this);const e=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-valuenow","aria-invalid"];for(let t=0;t<e.length;t++)this.element.removeAttribute(e[t]);this.element.classList.remove("e-input"),this.inputObj.container.insertAdjacentElement("afterend",this.element),te(this.inputObj.container),super.destroy()}};ch([_(null)],Al.prototype,"cssClass",void 0),ch([_(null)],Al.prototype,"width",void 0),ch([_(null)],Al.prototype,"placeholder",void 0),ch([_("Never")],Al.prototype,"floatLabelType",void 0),ch([_({})],Al.prototype,"htmlAttributes",void 0),ch([_(!0)],Al.prototype,"enabled",void 0),ch([_(!1)],Al.prototype,"readonly",void 0),ch([_(!1)],Al.prototype,"showClearButton",void 0),ch([_(!1)],Al.prototype,"enablePersistence",void 0),ch([_(null)],Al.prototype,"mask",void 0),ch([_("_")],Al.prototype,"promptChar",void 0),ch([_(null)],Al.prototype,"value",void 0),ch([_(null)],Al.prototype,"customCharacters",void 0),ch([G()],Al.prototype,"created",void 0),ch([G()],Al.prototype,"destroyed",void 0),ch([G()],Al.prototype,"change",void 0),ch([G()],Al.prototype,"focus",void 0),ch([G()],Al.prototype,"blur",void 0),Al=ch([as],Al);var Ms=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class wk extends ii{}Ms([_("None")],wk.prototype,"placement",void 0),Ms([_(10)],wk.prototype,"largeStep",void 0),Ms([_(1)],wk.prototype,"smallStep",void 0),Ms([_(!1)],wk.prototype,"showSmallTicks",void 0),Ms([_(null)],wk.prototype,"format",void 0);class S5 extends ii{}Ms([_(null)],S5.prototype,"color",void 0),Ms([_(null)],S5.prototype,"start",void 0),Ms([_(null)],S5.prototype,"end",void 0);class Zw extends ii{}Ms([_(!1)],Zw.prototype,"enabled",void 0),Ms([_(null)],Zw.prototype,"minStart",void 0),Ms([_(null)],Zw.prototype,"minEnd",void 0),Ms([_(null)],Zw.prototype,"maxStart",void 0),Ms([_(null)],Zw.prototype,"maxEnd",void 0),Ms([_(!1)],Zw.prototype,"startHandleFixed",void 0),Ms([_(!1)],Zw.prototype,"endHandleFixed",void 0);class Sk extends ii{}Ms([_("")],Sk.prototype,"cssClass",void 0),Ms([_("Before")],Sk.prototype,"placement",void 0),Ms([_("Focus")],Sk.prototype,"showOn",void 0),Ms([_(!1)],Sk.prototype,"isVisible",void 0),Ms([_(null)],Sk.prototype,"format",void 0);let Mr=class extends Qs{constructor(e,t){super(e,t),this.horDir="left",this.verDir="bottom",this.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},this.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},this.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",this.customAriaText=null,this.drag=!0,this.isDragComplete=!1,this.initialTooltip=!0}preRender(){this.l10n=new jo("slider",{incrementTitle:"Increase",decrementTitle:"Decrease"},this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()}formChecker(){const e=B(this.element,"form");e?(this.isForm=!0,f(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,"Range"!==this.type||!f(this.formResetValue)&&"object"==typeof this.formResetValue?f(this.formResetValue)&&(this.formResetValue=parseFloat(st(this.min))):this.formResetValue=[parseFloat(st(this.min)),parseFloat(st(this.max))],this.formElement=e):this.isForm=!1}initCultureFunc(){this.internationalization=new mp(this.locale)}initCultureInfo(){this.tooltipFormatInfo.format=f(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=f(this.ticks.format)?null:this.ticks.format}formatString(e,t){let i=null,s=null;if(e||0===e){i=this.formatNumber(e);const r=this.numberOfDecimals(e);s=this.internationalization.getNumberFormat(t)(this.makeRoundNumber(e,r))}return{elementVal:i,formatString:s}}formatNumber(e){const t=this.numberOfDecimals(e);return this.internationalization.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(e)}numberOfDecimals(e){const t=e.toString().split(".")[1];return t&&t.length?t.length:0}makeRoundNumber(e,t){return Number(e.toFixed(t||0))}fractionalToInteger(e){e=0===this.numberOfDecimals(e)?Number(e).toFixed(this.noOfDecimals):e;let t=1;for(let i=0;i<this.noOfDecimals;i++)t*=10;return Number((e*t).toFixed(0))}render(){this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete(),"EJS-SLIDER"===this.element.tagName&&"none"==this.getTheme(this.sliderContainer)&&setTimeout(()=>{this.refresh()},0)}initialize(){z([this.element],"e-slider"),this.setCSSClass()}setElementWidth(e){f(e)||("number"==typeof e?this.sliderContainer.style.width=st(e):"string"==typeof e&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:st(e)))}setCSSClass(e){e&&W([this.element],e.split(" ")),this.cssClass&&z([this.element],this.cssClass.split(" "))}setEnabled(){this.enabled?(W([this.sliderContainer],["e-disabled"]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.remove("e-disabled"),this.wireEvents()):(z([this.sliderContainer],["e-disabled"]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.add("e-disabled"),this.unwireEvents())}getTheme(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}initRender(){this.sliderContainer=this.createElement("div",{className:"e-slider-container e-control-wrapper"}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:"e-slider-track"}),this.element.appendChild(this.sliderTrack),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:f(this.value)?this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(1e3*Math.random()).toFixed(0)+"slider",class:"e-slider-input"}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput),this.showButtons&&this.setButtons(),this.setEnableRTL(),"Range"===this.type?this.rangeValueUpdate():this.value=f(this.value)?parseFloat(st(this.min.toString())):this.value,this.previousVal="Range"!==this.type?this.checkHandleValue(parseFloat(st(this.value.toString()))):[this.checkHandleValue(parseFloat(st(this.value[0].toString()))),this.checkHandleValue(parseFloat(st(this.value[1].toString())))],this.previousChanged=this.previousVal,f(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),this.enabled?W([this.sliderContainer],["e-disabled"]):z([this.sliderContainer],["e-disabled"]),this.readonly?z([this.sliderContainer],["e-read-only"]):W([this.sliderContainer],["e-read-only"])}getThemeInitialization(){this.isMaterial="material"===this.getTheme(this.sliderContainer)||"material-dark"===this.getTheme(this.sliderContainer),this.isBootstrap="bootstrap"===this.getTheme(this.sliderContainer)||"bootstrap-dark"===this.getTheme(this.sliderContainer),this.isBootstrap4="bootstrap4"===this.getTheme(this.sliderContainer),this.isTailwind="tailwind"===this.getTheme(this.sliderContainer)||"tailwind-dark"===this.getTheme(this.sliderContainer),this.isBootstrap5="bootstrap5"===this.getTheme(this.sliderContainer),this.isFluent="FluentUI"===this.getTheme(this.sliderContainer),this.isMaterialTooltip=this.isMaterial&&"Range"!==this.type&&this.tooltip.isVisible}createRangeBar(){"Default"!==this.type&&(this.rangeBar=this.createElement("div",{attrs:{class:"e-range"}}),this.element.appendChild(this.rangeBar),this.drag&&"Range"===this.type&&this.rangeBar.classList.add("Horizontal"===this.orientation?"e-drag-horizontal":"e-drag-vertical"))}createLimitBar(){let e="Range"!==this.type?"e-limit-bar":"e-limit-first";e+=" e-limits",this.limitBarFirst=this.createElement("div",{attrs:{class:e}}),this.element.appendChild(this.limitBarFirst),"Range"===this.type&&(this.limitBarSecond=this.createElement("div",{attrs:{class:"e-limit-second e-limits"}}),this.element.appendChild(this.limitBarSecond))}setOrientClass(){"Vertical"!==this.orientation?(this.sliderContainer.classList.remove("e-vertical"),this.sliderContainer.classList.add("e-horizontal"),this.firstHandle.setAttribute("aria-orientation","horizontal"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove("e-horizontal"),this.sliderContainer.classList.add("e-vertical"),this.firstHandle.setAttribute("aria-orientation","vertical"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","vertical"))}setAriaAttributes(e){let t=this.min,i=this.max;!f(this.customValues)&&this.customValues.length>0&&(t=this.customValues[0],i=this.customValues[this.customValues.length-1]),"Range"!==this.type?Rt(e,{"aria-valuemin":t.toString(),"aria-valuemax":i.toString()}):(!f(this.customValues)&&this.customValues.length>0?[[t.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),i.toString()]]:[[t.toString(),this.value[1].toString()],[this.value[0].toString(),i.toString()]]).forEach((r,o)=>{const a=0===o?this.firstHandle:this.secondHandle;a&&Rt(a,{"aria-valuemin":r[0],"aria-valuemax":r[1]})})}createSecondHandle(){this.secondHandle=this.createElement("div",{attrs:{class:"e-handle",role:"slider",tabIndex:"0"}}),this.secondHandle.classList.add("e-handle-second"),this.element.appendChild(this.secondHandle)}createFirstHandle(){this.firstHandle=this.createElement("div",{attrs:{class:"e-handle",role:"slider",tabIndex:"0"}}),this.firstHandle.classList.add("e-handle-first"),this.element.appendChild(this.firstHandle),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:"e-handle e-material-handle"}}),this.element.appendChild(this.materialHandle))}wireFirstHandleEvt(e){e?(k.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),k.remove(this.firstHandle,"transitionend",this.transitionEnd),k.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),k.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(k.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),k.add(this.firstHandle,"transitionend",this.transitionEnd,this),k.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),k.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))}wireSecondHandleEvt(e){e?(k.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),k.remove(this.secondHandle,"transitionend",this.transitionEnd),k.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),k.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(k.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),k.add(this.secondHandle,"transitionend",this.transitionEnd,this),k.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),k.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))}handleStart(){"Range"!==this.type&&(this.firstHandle.classList[0===this.handlePos1?"add":"remove"]("e-handle-start"),this.isMaterialTooltip&&(this.materialHandle.classList[0===this.handlePos1?"add":"remove"]("e-handle-start"),this.tooltipElement&&this.tooltipElement.classList[0===this.handlePos1?"add":"remove"]("e-material-tooltip-start")))}transitionEnd(e){"transform"!==e.propertyName&&(this.handleStart(),this.enableAnimation||(this.getHandle().style.transition="none"),"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.isMaterial&&this.tooltip.isVisible&&"Default"===this.type&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())}handleFocusOut(){this.firstHandle.classList.contains("e-handle-focused")&&this.firstHandle.classList.remove("e-handle-focused"),"Range"===this.type&&this.secondHandle.classList.contains("e-handle-focused")&&this.secondHandle.classList.remove("e-handle-focused")}handleFocus(e){this.focusSliderElement(),this.sliderBarClick(e),e.currentTarget===this.firstHandle?(this.firstHandle.classList.add("e-handle-focused"),this.firstHandle.classList.add("e-tab-handle")):(this.secondHandle.classList.add("e-handle-focused"),this.secondHandle.classList.add("e-tab-handle")),k.add(document,"mousemove touchmove",this.sliderBarMove,this),k.add(document,"mouseup touchend",this.sliderBarUp,this)}handleOver(e){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&this.tooltipToggle(e.currentTarget),"Default"===this.type&&this.tooltipToggle(this.getHandle())}handleLeave(e){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&!e.currentTarget.classList.contains("e-handle-focused")&&!e.currentTarget.classList.contains("e-tab-handle")&&this.closeTooltip()}setHandler(){this.min>this.max&&(this.min=this.max),this.createFirstHandle(),"Range"===this.type&&this.createSecondHandle()}setEnableRTL(){this.enableRtl&&"Vertical"!==this.orientation?z([this.sliderContainer],"e-rtl"):W([this.sliderContainer],"e-rtl");let e="Vertical"!==this.orientation?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom"),e!==("Vertical"!==this.orientation?this.horDir:this.verDir)&&"Horizontal"===this.orientation&&(ht(this.firstHandle,{right:"",left:"auto"}),"Range"===this.type&&ht(this.secondHandle,{top:"",left:"auto"})),this.setBarColor()}tooltipValue(){let e;const t={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,this.setTooltipContent(),t.text=e=this.tooltipObj.content,this.trigger("tooltipChange",t,i=>{this.addTooltipClass(i.text),e!==i.text&&(this.customAriaText=i.text,this.tooltipObj.content=i.text,this.setAriaAttrValue(this.firstHandle),"Range"===this.type&&this.setAriaAttrValue(this.secondHandle))}),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))}setTooltipContent(){let e;e=this.formatContent(this.tooltipFormatInfo,!1),this.tooltipObj.content=e}formatContent(e,t){let i="",s=this.handleVal1,r=this.handleVal2;return!f(this.customValues)&&this.customValues.length>0&&(s=this.customValues[this.handleVal1],r=this.customValues[this.handleVal2]),t?("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?f(this.tooltip)||f(this.tooltip.format)?r.toString()+" - "+s.toString():this.formatString(r,e).elementVal+" - "+this.formatString(s,e).elementVal:f(this.tooltip)||f(this.tooltip.format)?s.toString()+" - "+r.toString():this.formatString(s,e).elementVal+" - "+this.formatString(r,e).elementVal:f(s)||(i=f(this.tooltip)||f(this.tooltip.format)?s.toString():this.formatString(s,e).elementVal),i):("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?f(e.format)?r.toString()+" - "+s.toString():this.formatString(r,e).formatString+" - "+this.formatString(s,e).formatString:f(e.format)?s.toString()+" - "+r.toString():this.formatString(s,e).formatString+" - "+this.formatString(r,e).formatString:f(s)||(i=f(e.format)?s.toString():this.formatString(s,e).formatString),i)}addTooltipClass(e){if(this.isMaterialTooltip){let t=e.toString().length;if(this.tooltipElement){let i=t>4?{oldCss:"e-material-default",newCss:"e-material-range"}:{oldCss:"e-material-range",newCss:"e-material-default"};this.tooltipElement.classList.remove(i.oldCss),this.tooltipElement.classList.contains(i.newCss)||(this.tooltipElement.classList.add(i.newCss),this.tooltipElement.style.transform=t>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}else this.tooltipObj.cssClass="e-slider-tooltip "+(t>4?"e-material-range":"e-material-default")}}tooltipPlacement(){return"Horizontal"===this.orientation?"Before"===this.tooltip.placement?"TopCenter":"BottomCenter":"Before"===this.tooltip.placement?"LeftCenter":"RightCenter"}tooltipBeforeOpen(e){this.tooltipElement=e.element,this.tooltip.cssClass&&z([this.tooltipElement],this.tooltip.cssClass.split(" ").filter(t=>t)),e.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add("e-material-tooltip-hide"),this.handleStart(),this.setTooltipTransform())}tooltipCollision(e){if(this.isBootstrap||this.isBootstrap4||this.isMaterial&&!this.isMaterialTooltip){const t=this.isBootstrap4?3:6;switch(e){case"TopCenter":this.tooltipObj.setProperties({offsetY:-t},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:t},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-t},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:t},!1)}}}materialTooltipEventCallBack(e){this.sliderBarClick(e),k.add(document,"mousemove touchmove",this.sliderBarMove,this),k.add(document,"mouseup touchend",this.sliderBarUp,this)}wireMaterialTooltipEvent(e){this.isMaterialTooltip&&(e?k.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):k.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))}tooltipPositionCalculation(e){let t;switch(e){case"TopCenter":t="e-slider-horizontal-before";break;case"BottomCenter":t="e-slider-horizontal-after";break;case"LeftCenter":t="e-slider-vertical-before";break;case"RightCenter":t="e-slider-vertical-after"}return t}getTooltipTransformProperties(e){let t;if(this.tooltipElement){let i="Horizontal"===this.orientation?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;t="Horizontal"===this.orientation?"e-slider-horizontal-before"===e?{rotate:"rotate(45deg)",translate:`translateY(${i}px)`}:{rotate:"rotate(225deg)",translate:`translateY(${-i}px)`}:"e-slider-vertical-before"===e?{rotate:"rotate(-45deg)",translate:`translateX(${i}px)`}:{rotate:"rotate(-225deg)",translate:`translateX(${-i}px)`}}return t}openMaterialTooltip(){if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);let e=this.tooltipElement.firstElementChild;e.classList.remove("e-material-tooltip-hide"),e.classList.add("e-material-tooltip-show"),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add("e-material-tooltip-open"),this.materialHandle.style.transform="scale(0)",this.tooltipElement.style.transform=e.innerText.length>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate,"Default"===this.type?setTimeout(()=>{this.tooltipElement.style.transition=this.transition.handle},2500):setTimeout(()=>{this.tooltipElement.style.transition="none"},2500)}}closeMaterialTooltip(){if(this.isMaterialTooltip){let e=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,e.classList.remove("e-material-tooltip-show"),e.classList.add("e-material-tooltip-hide"),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove("e-material-tooltip-open"),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout(()=>{this.tooltipElement.style.transition="none"},2500)}}checkTooltipPosition(e){let t=this.tooltipPositionCalculation(e.collidedPosition);(void 0===this.tooltipCollidedPosition||this.tooltipCollidedPosition!==e.collidedPosition||!e.element.classList.contains(t))&&(this.isMaterialTooltip&&(void 0!==t&&(e.element.classList.remove(this.previousTooltipClass),e.element.classList.add(t),this.previousTooltipClass=t),e.element.style.transform&&e.element.classList.contains("e-material-tooltip-open")&&e.element.firstElementChild.innerText.length<=4&&(e.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)),this.tooltipCollidedPosition=e.collidedPosition),this.isMaterialTooltip&&this.tooltipElement&&-1!==this.tooltipElement.style.transform.indexOf("translate")&&this.setTooltipTransform()}setTooltipTransform(){let e=this.getTooltipTransformProperties(this.previousTooltipClass);this.tooltipElement.style.transform=this.tooltipElement.firstElementChild.innerText.length>4?`${e.translate} scale(0.01)`:`${e.translate} ${e.rotate} scale(0.01)`}renderTooltip(){this.tooltipObj=new $n({showTipPointer:this.isBootstrap||this.isMaterial||this.isBootstrap4||this.isTailwind||this.isBootstrap5||this.isFluent,cssClass:"e-slider-tooltip",height:this.isMaterial?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()}initializeTooltipProps(){this.setProperties({tooltip:{showOn:"Auto"===this.tooltip.showOn?"Hover":this.tooltip.showOn}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach(t=>{f(t)||(t.style.transition="none")}),this.isMaterialTooltip&&(this.sliderContainer.classList.add("e-material-slider"),this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))}tooltipBeforeClose(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0}setButtons(){this.firstBtn=this.createElement("div",{className:"e-slider-button e-first-button"}),this.firstBtn.appendChild(this.createElement("span",{className:"e-button-icon"})),this.isTailwind&&this.firstBtn.querySelector("span").classList.add("e-icons"),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:"e-slider-button e-second-button"}),this.secondBtn.appendChild(this.createElement("span",{className:"e-button-icon"})),this.isTailwind&&this.secondBtn.querySelector("span").classList.add("e-icons"),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add("e-slider-btn"),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle()}buttonTitle(){let e=this.enableRtl&&"Vertical"!==this.orientation;this.l10n.setLocale(this.locale);let t=this.l10n.getConstant("decrementTitle"),i=this.l10n.getConstant("incrementTitle");Rt(e?this.secondBtn:this.firstBtn,{"aria-label":t,title:t}),Rt(e?this.firstBtn:this.secondBtn,{"aria-label":i,title:i})}buttonFocusOut(){this.isMaterial&&this.getHandle().classList.remove("e-large-thumb-size")}repeatButton(e){let s,t=this.handleValueUpdate(),i=this.enableRtl&&"Vertical"!==this.orientation;e.target.parentElement.classList.contains("e-first-button")||e.target.classList.contains("e-first-button")?s=this.add(t,parseFloat(this.step.toString()),!!i):(e.target.parentElement.classList.contains("e-second-button")||e.target.classList.contains("e-second-button"))&&(s=this.add(t,parseFloat(this.step.toString()),!i)),this.limits.enabled&&(s=this.getLimitCorrectedValues(s)),s>=this.min&&s<=this.max&&(this.changeHandleValue(s),this.tooltipToggle(this.getHandle()))}repeatHandlerMouse(e){e.preventDefault(),("mousedown"===e.type||"touchstart"===e.type)&&(this.buttonClick(e),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,e))}materialChange(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")}focusHandle(){this.getHandle().classList.contains("e-tab-handle")||this.getHandle().classList.add("e-tab-handle")}repeatHandlerUp(e){this.changeEvent("changed",e),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()}customTickCounter(e){let t=4;return!f(this.customValues)&&this.customValues.length>0&&(e>4&&(t=3),e>7&&(t=2),e>14&&(t=1),e>28&&(t=0)),t}renderScale(){let e="Vertical"===this.orientation?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),this.ul=this.createElement("ul",{className:"e-scale e-"+e+"-scale e-tick-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),this.ul.style.zIndex="-1",q.isAndroid&&"h"===e&&this.ul.classList.add("e-tick-pos");let t=this.ticks.smallStep;this.ticks.showSmallTicks?t<=0&&(t=parseFloat(st(this.step))):t=this.ticks.largeStep>0?this.ticks.largeStep:parseFloat(st(this.max))-parseFloat(st(this.min));let i=this.fractionalToInteger(this.min),s=this.fractionalToInteger(this.max),r=this.fractionalToInteger(t),o=!f(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,a=this.customTickCounter(o),l=!f(this.customValues)&&this.customValues.length>0?o*a+o:Math.abs((s-i)/r);this.element.appendChild(this.ul);let h,c=parseFloat(this.min.toString());"v"===e&&(c=parseFloat(this.max.toString()));let b,m=0,v=100/l;v===1/0&&(v=5);for(let w=0,E=!f(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,D=0;w<=l;w++){if(h=this.createElement("li",{attrs:{class:"e-tick",role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),!f(this.customValues)&&this.customValues.length>0)b=w%(a+1)==0,b&&("h"===e?(c=this.customValues[D],D++):(c=this.customValues[E],E--),h.setAttribute("title",c.toString()));else if(h.setAttribute("title",c.toString()),0===this.numberOfDecimals(this.max)&&0===this.numberOfDecimals(this.min)&&0===this.numberOfDecimals(this.step))b="h"===e?(c-parseFloat(this.min.toString()))%this.ticks.largeStep==0:Math.abs(c-parseFloat(this.max.toString()))%this.ticks.largeStep==0;else{let V=this.fractionalToInteger(this.ticks.largeStep),$=this.fractionalToInteger(c);b="h"===e?($-i)%V==0:Math.abs($-parseFloat(s.toString()))%V==0}b&&h.classList.add("e-large"),"h"===e?h.style.width=v+"%":h.style.height=v+"%";let N,L=b?"Both"===this.ticks.placement?2:1:0;if(b)for(let V=0;V<L;V++)this.createTick(h,c,v);else f(this.customValues)&&this.formatTicksValue(h,c);this.ul.appendChild(h),this.tickElementCollection.push(h),f(this.customValues)&&(N=this.numberOfDecimals(t)>this.numberOfDecimals(c)?this.numberOfDecimals(t):this.numberOfDecimals(c),c=this.makeRoundNumber("h"===e?c+t:c-t,N),m=this.makeRoundNumber(m+t,N))}this.ticksAlignment(e,v)}ticksAlignment(e,t,i=!0){this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add("e-first-tick"),this.lastChild.classList.add("e-last-tick"),this.sliderContainer.classList.add("e-scale-"+this.ticks.placement.toLowerCase()),"h"===e?(this.firstChild.style.width=t/2+"%",this.lastChild.style.width=t/2+"%"):(this.firstChild.style.height=t/2+"%",this.lastChild.style.height=t/2+"%"),i&&this.trigger("renderedTicks",{ticksWrapper:this.ul,tickElements:this.tickElementCollection}),this.scaleAlignment()}createTick(e,t,i){let s=this.createElement("span",{className:"e-tick-value e-tick-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}});e.appendChild(s),f(this.customValues)?this.formatTicksValue(e,t,s,i):s.innerHTML=this.enableHtmlSanitizer?hr.sanitize(t.toString()):t.toString()}formatTicksValue(e,t,i,s){const r=this.formatNumber(t),o=f(this.ticks)||f(this.ticks.format)?r:this.formatString(t,this.ticksFormatInfo).formatString;this.trigger("renderingTicks",{value:t,text:o,tickElement:e},l=>{e.setAttribute("title",l.text.toString()),i&&(i.innerHTML=this.enableHtmlSanitizer?hr.sanitize(l.text.toString()):l.text.toString())})}scaleAlignment(){this.tickValuePosition(),"Vertical"===this.orientation?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add("e-small-size"):this.sliderContainer.classList.remove("e-small-size"):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add("e-small-size"):this.sliderContainer.classList.remove("e-small-size")}tickValuePosition(){this.firstChild=this.element.querySelector("ul").children[0];let t,i,e=this.firstChild.getBoundingClientRect(),s=this.ticks.smallStep,r=Math.abs(parseFloat(st(this.max))-parseFloat(st(this.min)))/s;this.firstChild.children.length>0&&(t=this.firstChild.children[0].getBoundingClientRect());let a,o=[this.sliderContainer.querySelectorAll(".e-tick.e-large .e-tick-value")];a=[].slice.call(o[0],"Both"===this.ticks.placement?2:1);let l="Vertical"===this.orientation?2*e.height:2*e.width;for(let h=0;h<this.firstChild.children.length;h++)"Vertical"===this.orientation?this.firstChild.children[h].style.top=-t.height/2+"px":this.firstChild.children[h].style.left=this.enableRtl?(l-this.firstChild.children[h].getBoundingClientRect().width)/2+"px":-t.width/2+"px";for(let h=0;h<a.length;h++)i=a[h].getBoundingClientRect(),ht(a[h],"Vertical"===this.orientation?{top:(l-i.height)/2+"px"}:{left:(l-i.width)/2+"px"});this.enableRtl&&this.lastChild.children.length&&0!==r&&(this.lastChild.children[0].style.left=-this.lastChild.getBoundingClientRect().width/2+"px","Both"===this.ticks.placement&&(this.lastChild.children[1].style.left=-this.lastChild.getBoundingClientRect().width/2+"px")),0===r&&("Horizontal"===this.orientation&&(this.enableRtl?(this.firstChild.classList.remove("e-last-tick"),this.firstChild.style.right=this.firstHandle.style.right,this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px","Both"===this.ticks.placement&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px")):(this.firstChild.classList.remove("e-last-tick"),this.firstChild.style.left=this.firstHandle.style.left)),"Vertical"===this.orientation&&this.firstChild.classList.remove("e-last-tick"))}setAriaAttrValue(e){let t;const i=!f(this.ticks)&&!f(this.ticks.format);let s=this.formatContent(i?this.tooltipFormatInfo:this.ticksFormatInfo,!1);const r=this.formatContent(i?this.ticksFormatInfo:this.tooltipFormatInfo,!0);s=this.customAriaText?this.customAriaText:s,t=2===s.split(" - ").length?s.split(" - "):[s,s],this.setAriaAttributes(e),Rt(e,"Range"!==this.type?{"aria-valuenow":r,"aria-valuetext":s}:this.enableRtl?e===this.firstHandle?{"aria-valuenow":r.split(" - ")[1],"aria-valuetext":t[1]}:{"aria-valuenow":r.split(" - ")[0],"aria-valuetext":t[0]}:e===this.firstHandle?{"aria-valuenow":r.split(" - ")[0],"aria-valuetext":t[0]}:{"aria-valuenow":r.split(" - ")[1],"aria-valuetext":t[1]})}handleValueUpdate(){let e;return e="Range"===this.type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1,e}getLimitCorrectedValues(e){return"MinRange"===this.type||"Default"===this.type||1===this.activeHandle?this.getLimitValueAndPosition(e,this.limits.minStart,this.limits.minEnd)[0]:this.getLimitValueAndPosition(e,this.limits.maxStart,this.limits.maxEnd)[0]}focusSliderElement(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)}buttonClick(e){let t;this.focusSliderElement();const i=this.enableRtl&&"Vertical"!==this.orientation,s=this.handleValueUpdate();40===e.keyCode||37===e.keyCode||e.currentTarget.classList.contains("e-first-button")?t=this.add(s,parseFloat(this.step.toString()),!!i):38===e.keyCode||39===e.keyCode||e.currentTarget.classList.contains("e-second-button")?t=this.add(s,parseFloat(this.step.toString()),!i):33===e.keyCode||e.currentTarget.classList.contains("e-first-button")?t=this.add(s,parseFloat(this.ticks.largeStep.toString()),!i):34===e.keyCode||e.currentTarget.classList.contains("e-second-button")?t=this.add(s,parseFloat(this.ticks.largeStep.toString()),!!i):36===e.keyCode?t=parseFloat(this.min.toString()):35===e.keyCode&&(t=parseFloat(this.max.toString())),this.limits.enabled&&(t=this.getLimitCorrectedValues(t)),this.changeHandleValue(t),this.isMaterial&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),this.focusHandle(),e.currentTarget.classList.contains("e-first-button")&&k.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),e.currentTarget.classList.contains("e-second-button")&&k.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)}tooltipToggle(e){this.isMaterialTooltip?this.tooltipElement.classList.contains("e-material-tooltip-open")?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(e):this.openTooltip(e)}buttonUp(e){e.currentTarget.classList.contains("e-first-button")&&k.remove(this.firstBtn,"mouseup touchend",this.buttonUp),e.currentTarget.classList.contains("e-second-button")&&k.remove(this.secondBtn,"mouseup touchend",this.buttonUp)}setRangeBar(){"Horizontal"===this.orientation?"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",ht(this.rangeBar,{width:f(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",ht(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):"MinRange"===this.type?(this.rangeBar.style.bottom="0px",ht(this.rangeBar,{height:f(this.handlePos1)?0:this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.handlePos1+"px",ht(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))}checkValidValueAndPos(e){return e=this.checkHandleValue(e),this.checkHandlePosition(e)}setLimitBarPositions(e,t,i,s){"Horizontal"===this.orientation?this.enableRtl?(this.limitBarFirst.style.right=e+"px",this.limitBarFirst.style.width=t-e+"px"):(this.limitBarFirst.style.left=e+"px",this.limitBarFirst.style.width=t-e+"px"):(this.limitBarFirst.style.bottom=e+"px",this.limitBarFirst.style.height=t-e+"px"),"Range"===this.type&&("Horizontal"===this.orientation?this.enableRtl?(this.limitBarSecond.style.right=i+"px",this.limitBarSecond.style.width=s-i+"px"):(this.limitBarSecond.style.left=i+"px",this.limitBarSecond.style.width=s-i+"px"):(this.limitBarSecond.style.bottom=i+"px",this.limitBarSecond.style.height=s-i+"px"))}setLimitBar(){if("Default"===this.type||"MinRange"===this.type){let e=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e);let t=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];t=this.checkValidValueAndPos(t),this.setLimitBarPositions(e,t)}else if("Range"===this.type){let e=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e);let t=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];t=this.checkValidValueAndPos(t);let i=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];i=this.checkValidValueAndPos(i);let s=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];s=this.checkValidValueAndPos(s),this.setLimitBarPositions(e,t,i,s)}}getLimitValueAndPosition(e,t,i,s){return f(t)&&(t=this.min,f(e)&&s&&(e=t)),f(i)&&(i=this.max,f(e)&&s&&(e=i)),e<t&&(e=t),e>i&&(e=i),[e,this.checkHandlePosition(e)]}setValue(){if(!f(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=f(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,this.activeHandle=f(this.activeHandle)?"Range"===this.type?2:1:this.activeHandle,"Default"===this.type||"MinRange"===this.type){if(this.limits.enabled){const e=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=e[0],this.handlePos1=e[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();"Default"!==this.type&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()}rangeValueUpdate(){(null===this.value||"object"!=typeof this.value)&&(this.value=[parseFloat(st(this.min)),parseFloat(st(this.max))])}validateRangeValue(){this.rangeValueUpdate(),this.setRangeValue()}modifyZindex(){"Range"===this.type?1===this.activeHandle?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+""):this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=zw(this.element)+"")}setHandlePosition(e){let t;const i=1===this.activeHandle?this.handlePos1:this.handlePos2;t=this.isMaterialTooltip?[this.firstHandle,this.materialHandle]:[this.getHandle()],this.handleStart(),t.forEach(s=>{"Horizontal"===this.orientation?this.enableRtl?s.style.right=`${i}px`:s.style.left=`${i}px`:s.style.bottom=`${i}px`}),this.changeEvent("change",e)}getHandle(){return 1===this.activeHandle?this.firstHandle:this.secondHandle}setRangeValue(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1}changeEvent(e,t){let i="change"===e?this.previousVal:this.previousChanged;if("Range"!==this.type)this.setProperties({value:this.handleVal1},!0),i!==this.value&&(!this.isMaterialTooltip||!this.initialTooltip)&&(this.trigger(e,this.changeEventArgs(e,t)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.firstHandle);else{let s=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:s},!0),(i.length===this.value.length&&this.value[0]!==i[0]||this.value[1]!==i[1])&&(this.initialTooltip=!1,this.trigger(e,this.changeEventArgs(e,t)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()}changeEventArgs(e,t){let i;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(this.tooltipValue(),i={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:this.tooltipObj.content,isInteracted:!f(t)}):i={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:f(this.ticksFormatInfo.format)?this.value.toString():"Range"!==this.type?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!f(t)},i}setPreviousVal(e,t){"change"===e?this.previousVal=t:this.previousChanged=t}updateRangeValue(){const e=this.value.toString().split(",").map(Number);if(this.value=this.enableRtl&&"Vertical"!==this.orientation||this.rtl?[e[1],e[0]]:[e[0],e[1]],this.enableRtl&&"Vertical"!==this.orientation?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;let t=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=t[0],this.handlePos1=t[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,t=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=t[0],this.handlePos2=t[1],this.preHandlePos2=this.handlePos2}}checkHandlePosition(e){let t;return e=100*(e-parseFloat(st(this.min)))/(parseFloat(st(this.max))-parseFloat(st(this.min))),t="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(e/100):this.element.getBoundingClientRect().height*(e/100),parseFloat(st(this.max))===parseFloat(st(this.min))&&(t="Horizontal"===this.orientation?this.element.getBoundingClientRect().width:this.element.getBoundingClientRect().height),t}checkHandleValue(e){if(this.min>this.max&&(this.min=this.max),this.min===this.max)return parseFloat(st(this.max));let t=this.tempStartEnd();return e<t.start?e=t.start:e>t.end&&(e=t.end),e}reposition(){this.firstHandle.style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),"Range"===this.type&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),"Horizontal"===this.orientation?(this.enableRtl?this.firstHandle.style.right=`${this.handlePos1}px`:this.firstHandle.style.left=`${this.handlePos1}px`,this.isMaterialTooltip&&(this.enableRtl?this.materialHandle.style.right=`${this.handlePos1}px`:this.materialHandle.style.left=`${this.handlePos1}px`),"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",ht(this.rangeBar,{width:f(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.enableRtl?this.secondHandle.style.right=`${this.handlePos2}px`:this.secondHandle.style.left=`${this.handlePos2}px`,this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",ht(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))):(this.firstHandle.style.bottom=`${this.handlePos1}px`,this.isMaterialTooltip&&(this.materialHandle.style.bottom=`${this.handlePos1}px`),"MinRange"===this.type?(this.rangeBar.style.bottom="0px",ht(this.rangeBar,{height:f(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.secondHandle.style.bottom=`${this.handlePos2}px`,this.rangeBar.style.bottom=this.handlePos1+"px",ht(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.handleStart(),this.tooltip.isVisible||setTimeout(()=>{this.firstHandle.style.transition=this.scaleTransform,"Range"===this.type&&(this.secondHandle.style.transition=this.scaleTransform)}),this.refreshTooltip(this.tooltipTarget),this.setBarColor()}changeHandleValue(e){let t=null;1===this.activeHandle?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(e),this.handlePos1=this.checkHandlePosition(this.handleVal1),"Range"===this.type&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(t=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(e),this.handlePos2=this.checkHandlePosition(this.handleVal2),"Range"===this.type&&this.handlePos2<this.handlePos1&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(t=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),null!==t&&("Default"!==this.type&&this.setRangeBar(),this.setHandlePosition(null))}tempStartEnd(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}}xyToPosition(e){let t;if(this.min===this.max)return 100;if("Horizontal"===this.orientation){let s=e.x-this.element.getBoundingClientRect().left;this.val=s/(this.element.offsetWidth/100)}else{let s=e.y-this.element.getBoundingClientRect().top;this.val=100-s/(this.element.offsetHeight/100)}let i=this.stepValueCalculation(this.val);return i<0?i=0:i>100&&(i=100),this.enableRtl&&"Vertical"!==this.orientation&&(i=100-i),t="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(i/100):this.element.getBoundingClientRect().height*(i/100),t}stepValueCalculation(e){0===this.step&&(this.step=1);let t=parseFloat(st(this.step))/((parseFloat(st(this.max))-parseFloat(st(this.min)))/100),i=e%Math.abs(t);return 0!==i&&(t/2>i?e-=i:e+=Math.abs(t)-i),e}add(e,t,i){let o,r=Math.pow(10,3);return o=i?(Math.round(e*r)+Math.round(t*r))/r:(Math.round(e*r)-Math.round(t*r))/r,o}positionToValue(e){let t,i=parseFloat(st(this.max))-parseFloat(st(this.min));return t="Horizontal"===this.orientation?e/this.element.getBoundingClientRect().width*i:e/this.element.getBoundingClientRect().height*i,this.add(t,parseFloat(this.min.toString()),!0)}sliderBarClick(e){let t;e.preventDefault(),"mousedown"===e.type||"mouseup"===e.type||"click"===e.type?t={x:e.clientX,y:e.clientY}:("touchend"===e.type||"touchstart"===e.type)&&(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});let i=this.xyToPosition(t),s=this.positionToValue(i);if("Range"===this.type&&this.handlePos2-i<i-this.handlePos1){if(this.activeHandle=2,!this.limits.enabled||!this.limits.endHandleFixed){if(this.limits.enabled){let l=this.getLimitValueAndPosition(s,this.limits.maxStart,this.limits.maxEnd);s=l[0],i=l[1]}this.secondHandle.classList.add("e-handle-active"),this.handlePos2=this.preHandlePos2=i,this.handleVal2=s}this.modifyZindex(),this.secondHandle.focus()}else{if(this.activeHandle=1,!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){let l=this.getLimitValueAndPosition(s,this.limits.minStart,this.limits.minEnd);s=l[0],i=l[1]}this.firstHandle.classList.add("e-handle-active"),this.handlePos1=this.preHandlePos1=i,this.handleVal1=s}this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add("e-tooltip-active");let r=this.element.querySelector(".e-tab-handle");if(r&&this.getHandle()!==r&&r.classList.remove("e-tab-handle"),e.target===(1===this.activeHandle?this.firstHandle:this.secondHandle))return this.isMaterial&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.sliderBarUp(e),void this.tooltipToggle(this.getHandle());if(!this.checkRepeatedValue(s))return;let a=this.isMaterial&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=a.handle,"Default"!==this.type&&(this.rangeBar.style.transition=a.rangeBar),this.setHandlePosition(e),this.isMaterialTooltip&&(this.initialTooltip=!1),this.changeEvent("changed",e),"Default"!==this.type&&this.setRangeBar()}handleValueAdjust(e,t,i){1===i?(this.handleVal1=t,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=t,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)}dragRangeBarMove(e){let t,i,s;if("touchmove"!==e.type&&e.preventDefault(),this.rangeBarDragged=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none",[i,s]="mousemove"===e.type?[e.clientX,e.clientY]:[e.changedTouches[0].clientX,e.changedTouches[0].clientY],!(this.limits.enabled&&this.limits.startHandleFixed||this.limits.enabled&&this.limits.endHandleFixed)){if(t=this.enableRtl?{x:i+this.secondPartRemain,y:s+this.secondPartRemain}:{x:i-this.firstPartRemain,y:s+this.secondPartRemain},this.handlePos1=this.xyToPosition(t),this.handleVal1=this.positionToValue(this.handlePos1),t=this.enableRtl?{x:i-this.firstPartRemain,y:s-this.firstPartRemain}:{x:i+this.secondPartRemain,y:s-this.firstPartRemain},this.handlePos2=this.xyToPosition(t),this.handleVal2=this.positionToValue(this.handlePos2),this.limits.enabled){let r=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=r[0],this.handlePos1=r[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),r=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=r[0],this.handlePos2=r[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===this.max&&this.handleValueAdjust(this.handleVal2,this.max,2),this.handleVal1===this.min&&this.handleValueAdjust(this.handleVal1,this.min,1)}this.activeHandle=1,this.setHandlePosition(e),this.activeHandle=2,this.setHandlePosition(e),this.tooltipToggle(this.rangeBar),this.setRangeBar()}sliderBarUp(e){this.changeEvent("changed",e),this.handleFocusOut(),this.firstHandle.classList.remove("e-handle-active"),"Range"===this.type&&(this.initialTooltip=!1,this.secondHandle.classList.remove("e-handle-active")),this.closeTooltip(),this.isMaterial&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove("e-tooltip-active")),k.remove(document,"mousemove touchmove",this.sliderBarMove),k.remove(document,"mouseup touchend",this.sliderBarUp)}sliderBarMove(e){let t;"touchmove"!==e.type&&e.preventDefault(),t="mousemove"===e.type?{x:e.clientX,y:e.clientY}:{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};let i=this.xyToPosition(t),s=this.positionToValue(i);if(i=Math.round(i),"Range"!==this.type&&1===this.activeHandle){if(!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){let r=this.getLimitValueAndPosition(s,this.limits.minStart,this.limits.minEnd);i=r[1],s=r[0]}this.handlePos1=i,this.handleVal1=s}this.firstHandle.classList.add("e-handle-active")}if("Range"===this.type)if(1===this.activeHandle){if(this.firstHandle.classList.add("e-handle-active"),!(this.limits.enabled&&this.limits.startHandleFixed||(i>this.handlePos2&&(i=this.handlePos2,s=this.handleVal2),i===this.preHandlePos1))){if(this.limits.enabled){let r=this.getLimitValueAndPosition(s,this.limits.minStart,this.limits.minEnd);s=r[0],i=r[1]}this.handlePos1=this.preHandlePos1=i,this.handleVal1=s,this.activeHandle=1}}else if(2===this.activeHandle&&(this.secondHandle.classList.add("e-handle-active"),!(this.limits.enabled&&this.limits.endHandleFixed||(i<this.handlePos1&&(i=this.handlePos1,s=this.handleVal1),i===this.preHandlePos2)))){if(this.limits.enabled){let r=this.getLimitValueAndPosition(s,this.limits.maxStart,this.limits.maxEnd);s=r[0],i=r[1]}this.handlePos2=this.preHandlePos2=i,this.handleVal2=s,this.activeHandle=2}!this.checkRepeatedValue(s)||(this.getHandle().style.transition=this.scaleTransform,"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.setHandlePosition(e),this.isMaterial&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.tooltipToggle(this.getHandle()),"Default"!==this.type&&this.setRangeBar())}dragRangeBarUp(e){this.rangeBarDragged?this.isDragComplete=!0:(this.focusSliderElement(),this.sliderBarClick(e)),this.changeEvent("changed",e),this.closeTooltip(),k.remove(document,"mousemove touchmove",this.dragRangeBarMove),k.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1}checkRepeatedValue(e){if("Range"===this.type){if(e===(this.enableRtl&&"Vertical"!==this.orientation?1===this.activeHandle?this.previousVal[1]:this.previousVal[0]:1===this.activeHandle?this.previousVal[0]:this.previousVal[1]))return 0}else if(e===this.previousVal)return 0;return 1}refreshTooltip(e){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),e&&(this.tooltipObj.refresh(e),this.tooltipTarget=e))}openTooltip(e){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(e),this.tooltipTarget=e)}closeTooltip(){this.tooltip.isVisible&&this.tooltipObj&&"Always"!==this.tooltip.showOn&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)}keyDown(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:e.preventDefault(),this.buttonClick(e)}}wireButtonEvt(e){e?(k.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),k.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),k.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),k.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),k.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),k.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),k.remove(this.firstBtn,"focusout",this.sliderFocusOut),k.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(k.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),k.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),k.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),k.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),k.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),k.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),k.add(this.firstBtn,"focusout",this.sliderFocusOut,this),k.add(this.secondBtn,"focusout",this.sliderFocusOut,this))}rangeBarMousedown(e){if(e.preventDefault(),this.focusSliderElement(),"Range"===this.type&&this.drag&&e.target===this.rangeBar){let t,i;"mousedown"===e.type?[t,i]=[e.clientX,e.clientY]:"touchstart"===e.type&&([t,i]=[e.changedTouches[0].clientX,e.changedTouches[0].clientY]),"Horizontal"===this.orientation?(this.firstPartRemain=t-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-t):(this.firstPartRemain=i-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-i),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);let s=this.element.querySelector(".e-tab-handle");s&&s.classList.remove("e-tab-handle"),k.add(document,"mousemove touchmove",this.dragRangeBarMove,this),k.add(document,"mouseup touchend",this.dragRangeBarUp,this)}}elementClick(e){this.isDragComplete?this.isDragComplete=!1:(e.preventDefault(),this.focusSliderElement(),this.sliderBarClick(e),this.focusHandle())}wireEvents(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(k.add(this.element,"click",this.elementClick,this),"Range"===this.type&&this.drag&&k.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),k.add(this.sliderContainer,"keydown",this.keyDown,this),k.add(this.sliderContainer,"keyup",this.keyUp,this),k.add(this.element,"focusout",this.sliderFocusOut,this),k.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&k.add(this.formElement,"reset",this.formResetHandler,this))}unwireEvents(){k.remove(this.element,"click",this.elementClick),"Range"===this.type&&this.drag&&k.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),k.remove(this.sliderContainer,"keydown",this.keyDown),k.remove(this.sliderContainer,"keyup",this.keyUp),k.remove(this.element,"focusout",this.sliderFocusOut),k.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),"Range"===this.type&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),k.remove(this.element,"reset",this.formResetHandler)}formResetHandler(){this.setProperties({value:this.formResetValue},!0),this.setValue()}keyUp(e){if(9===e.keyCode&&e.target.classList.contains("e-handle")&&(this.focusSliderElement(),!e.target.classList.contains("e-tab-handle"))){this.element.querySelector(".e-tab-handle")&&this.element.querySelector(".e-tab-handle").classList.remove("e-tab-handle"),e.target.classList.add("e-tab-handle");let t=e.target.parentElement;t===this.element&&(t.querySelector(".e-slider-track").classList.add("e-tab-track"),("Range"===this.type||"MinRange"===this.type)&&t.querySelector(".e-range").classList.add("e-tab-range")),"Range"===this.type&&(this.activeHandle=e.target.previousSibling.classList.contains("e-handle")?2:1),this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",e)}hover(e){if(!f(e))if("mouseover"===e.type||"touchmove"===e.type||"mousemove"===e.type||"pointermove"===e.type||"touchstart"===e.type)this.sliderContainer.classList.add("e-slider-hover");else{this.sliderContainer.classList.remove("e-slider-hover");const t=e.currentTarget;this.tooltip.isVisible&&"Always"!==this.tooltip.showOn&&this.tooltipObj&&this.isMaterialTooltip&&!t.classList.contains("e-handle-focused")&&!t.classList.contains("e-tab-handle")&&this.closeMaterialTooltip()}}sliderFocusOut(e){e.relatedTarget!==this.secondHandle&&e.relatedTarget!==this.firstHandle&&e.relatedTarget!==this.element&&e.relatedTarget!==this.firstBtn&&e.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.closeTooltip(),this.element.querySelector(".e-tab-handle")&&this.element.querySelector(".e-tab-handle").classList.remove("e-tab-handle"),this.element.querySelector(".e-tab-track")&&(this.element.querySelector(".e-tab-track").classList.remove("e-tab-track"),("Range"===this.type||"MinRange"===this.type)&&this.element.querySelector(".e-tab-range")&&this.element.querySelector(".e-tab-range").classList.remove("e-tab-range")),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)}removeElement(e){e.parentNode&&e.parentNode.removeChild(e)}changeSliderType(e,t){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove("e-material-slider"),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,"Default"!==e&&("Range"===e&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!f(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&("MinRange"===e||"Default"===e?f(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):f(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),"Range"===this.type&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),"tooltip"!==t&&this.updateConfig()}changeRtl(){if(!this.enableRtl&&"Range"===this.type&&(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){let e=this.enableRtl&&"Vertical"!==this.orientation;Rt(e?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),Rt(e?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}}changeOrientation(){this.changeSliderType(this.type,"null")}updateConfig(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&this.refreshTooltip(this.tooltipTarget),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()}limitsPropertyChange(){this.limits.enabled?(f(this.limitBarFirst)&&"Range"!==this.type&&this.createLimitBar(),f(this.limitBarFirst)&&f(this.limitBarSecond)&&"Range"===this.type&&this.createLimitBar(),this.setLimitBar(),this.setValue()):(f(this.limitBarFirst)||te(this.limitBarFirst),f(this.limitBarSecond)||te(this.limitBarSecond))}getPersistData(){return this.addOnPersist(["value"])}destroy(){super.destroy(),this.unwireEvents(),window.removeEventListener("resize",this.onresize),W([this.sliderContainer],["e-disabled"]),this.firstHandle.removeAttribute("aria-orientation"),"Range"===this.type&&this.secondHandle.removeAttribute("aria-orientation"),this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),te(this.sliderContainer),this.tooltip.isVisible&&this.tooltipObj.destroy(),this.element.innerHTML=""}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"cssClass":this.setCSSClass(t.cssClass);break;case"value":if(e&&t){let s=f(e.value)?"Range"===this.type?[this.min,this.max]:this.min:e.value;this.setProperties({value:s},!0),!f(t.value)&&t.value.toString()!==s.toString()&&(this.setValue(),this.refreshTooltip(this.tooltipTarget),"Range"===this.type&&(this.activeHandle=f(e.value)||t.value[1]===s[1]?1:2))}break;case"min":case"step":case"max":this.setMinMaxValue();break;case"tooltip":!f(e.tooltip)&&!f(t.tooltip)&&this.setTooltip(i);break;case"type":!f(t)&&Object.keys(t).length&&!f(t.type)&&(this.changeSliderType(t.type,i),this.setZindex());break;case"enableRtl":t.enableRtl!==e.enableRtl&&"Vertical"!==this.orientation&&(this.rtl=t.enableRtl,this.changeRtl());break;case"limits":this.limitsPropertyChange();break;case"orientation":this.changeOrientation();break;case"ticks":f(this.sliderContainer.querySelector(".e-scale"))||(te(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,s=>{s.match(/e-scale-/)&&this.sliderContainer.classList.remove(s)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":e.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove("e-slider-btn"),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition());break;case"enabled":this.setEnabled();break;case"readonly":this.setReadOnly();break;case"customValues":this.setValue(),this.reposition();break;case"colorRange":this.reposition();break;case"width":this.setElementWidth(e.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange()}}setReadOnly(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add("e-read-only")):(this.wireEvents(),this.sliderContainer.classList.remove("e-read-only"))}setMinMaxValue(){this.setValue(),this.refreshTooltip(this.tooltipTarget),f(this.sliderContainer.querySelector(".e-scale"))||this.ul&&(te(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,e=>{e.match(/e-scale-/)&&this.sliderContainer.classList.remove(e)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex())}setZindex(){this.zIndex=6,!f(this.ticks)&&"None"!==this.ticks.placement&&(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),!this.isMaterial&&!f(this.ticks)&&"Both"===this.ticks.placement&&(this.element.style.zIndex=this.zIndex+2+""),this.firstHandle.style.zIndex=this.zIndex+3+"","Range"===this.type&&(this.secondHandle.style.zIndex=this.zIndex+4+"")}setTooltip(e){this.changeSliderType(this.type,e)}setBarColor(){let e,t,i=this.sliderTrack.lastElementChild;for(;i;)this.sliderTrack.removeChild(i),i=this.sliderTrack.lastElementChild;for(let s=0;s<this.colorRange.length;s++)if(!f(this.colorRange[s].start)&&!f(this.colorRange[s].end)&&this.colorRange[s].end>this.colorRange[s].start){this.colorRange[s].start<this.min&&(this.colorRange[s].start=this.min),this.colorRange[s].end>this.max&&(this.colorRange[s].end=this.max);const r=this.checkHandlePosition(this.colorRange[s].start),o=this.checkHandlePosition(this.colorRange[s].end),a=this.createElement("div");a.style.backgroundColor=this.colorRange[s].color,a.style.border="1px solid "+this.colorRange[s].color,"Horizontal"===this.orientation?(t="e-slider-horizantal-color",e=this.enableRtl?f(this.customValues)?this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[s].end):this.checkHandlePosition(this.customValues.length-this.colorRange[s].end-1):this.checkHandlePosition(this.colorRange[s].start),a.style.width=o-r+"px",a.style.left=e+"px"):(t="e-slider-vertical-color",e=this.checkHandlePosition(this.colorRange[s].start),a.style.height=o-r+"px",a.style.bottom=e+"px"),a.classList.add(t),this.sliderTrack.appendChild(a)}}getModuleName(){return"slider"}};Ms([_(null)],Mr.prototype,"value",void 0),Ms([_(null)],Mr.prototype,"customValues",void 0),Ms([_(1)],Mr.prototype,"step",void 0),Ms([_(null)],Mr.prototype,"width",void 0),Ms([_(0)],Mr.prototype,"min",void 0),Ms([_(100)],Mr.prototype,"max",void 0),Ms([_(!1)],Mr.prototype,"readonly",void 0),Ms([_("Default")],Mr.prototype,"type",void 0),Ms([rh([{}],S5)],Mr.prototype,"colorRange",void 0),Ms([di({},wk)],Mr.prototype,"ticks",void 0),Ms([di({},Zw)],Mr.prototype,"limits",void 0),Ms([_(!0)],Mr.prototype,"enabled",void 0),Ms([di({},Sk)],Mr.prototype,"tooltip",void 0),Ms([_(!1)],Mr.prototype,"showButtons",void 0),Ms([_(!0)],Mr.prototype,"enableAnimation",void 0),Ms([_("Horizontal")],Mr.prototype,"orientation",void 0),Ms([_("")],Mr.prototype,"cssClass",void 0),Ms([_(!1)],Mr.prototype,"enableHtmlSanitizer",void 0),Ms([G()],Mr.prototype,"created",void 0),Ms([G()],Mr.prototype,"change",void 0),Ms([G()],Mr.prototype,"changed",void 0),Ms([G()],Mr.prototype,"renderingTicks",void 0),Ms([G()],Mr.prototype,"renderedTicks",void 0),Ms([G()],Mr.prototype,"tooltipChange",void 0),Mr=Ms([as],Mr);var BO,bc=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const xk={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")};var HO=(()=>(function(n){n[n.Message=0]="Message",n[n.Label=1]="Label"}(HO||(HO={})),HO))();let dh=BO=class extends Rf{constructor(e,t){super(t,e),this.validated=[],this.errorRules=[],this.allowSubmit=!1,this.required="required",this.infoElement=null,this.inputElement=null,this.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",this.localyMessage={},this.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},void 0===this.rules&&(this.rules={}),this.l10n=new jo("formValidator",this.defaultMessages,this.locale),this.locale&&this.localeFunc(),jE.on("notifyExternalChange",this.afterLocalization,this),e="string"==typeof e?X(e,document):e,null!=this.element&&(this.element.setAttribute("novalidate",""),this.inputElements=bt(this.selectQuery,this.element),this.createHTML5Rules(),this.wireEvents())}addRules(e,t){e&&(this.rules.hasOwnProperty(e)?Ae(this.rules[e],t,{}):this.rules[e]=t)}removeRules(e,t){if(e||t)if(this.rules[e]&&!t)delete this.rules[e];else{if(f(this.rules[e]&&t))return;for(let i=0;i<t.length;i++)delete this.rules[e][t[i]]}else this.rules={}}validate(e){const t=Object.keys(this.rules);if(e&&t.length)return this.validateRules(e),-1!==t.indexOf(e)&&0===this.errorRules.filter(i=>i.name===e).length;this.errorRules=[];for(const i of t)this.validateRules(i);return 0===this.errorRules.length}reset(){this.element.reset(),this.clearForm()}getInputElement(e){return this.inputElement=X('[name="'+e+'"]',this.element),this.inputElement}destroy(){this.reset(),this.unwireEvents(),this.rules={};const e=bt("."+this.errorClass+", ."+this.validClass,this.element);for(const t of e)te(t);super.destroy(),jE.off("notifyExternalChange",this.afterLocalization)}onPropertyChanged(e,t){for(const i of Object.keys(e))"locale"===i&&this.localeFunc()}localeFunc(){for(const e of Object.keys(this.defaultMessages)){this.l10n.setLocale(this.locale);const t=this.l10n.getConstant(e);this.localyMessage[e]=t}}getModuleName(){return"formValidator"}afterLocalization(e){this.locale=e.locale,this.localeFunc()}refresh(){this.unwireEvents(),this.inputElements=bt(this.selectQuery,this.element),this.wireEvents()}clearForm(){this.errorRules=[],this.validated=[];const e=bt(this.selectQuery,this.element);for(const t of e){const i=t;i.removeAttribute("aria-invalid"),i.classList.remove(this.errorClass),i.name.length>0&&(this.getInputElement(i.name),this.getErrorElement(i.name),this.hideMessage(i.name)),i.classList.remove(this.validClass)}}createHTML5Rules(){const e=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],t=["hidden","email","url","date","number","tel"];for(const i of this.inputElements){const s={};for(let r of e)if(null!==i.getAttribute(r))switch(r){case"required":this.defRule(i,s,r,i.required);break;case"data-validation":r=i.getAttribute(r),this.defRule(i,s,r,!0);break;case"type":-1!==t.indexOf(i.type)&&this.defRule(i,s,i.type,!0);break;case"rangeLength":case"range":this.defRule(i,s,r,JSON.parse(i.getAttribute(r)));break;case"equalTo":{const o=i.getAttribute(r);this.defRule(i,s,r,o)}break;default:"true"===i.getAttribute("data-val")?this.annotationRule(i,s,r,i.getAttribute(r)):this.defRule(i,s,r,i.getAttribute(r))}0!==Object.keys(s).length&&this.addRules(i.name,s)}}annotationRule(e,t,i,s){const r=i.split("-"),o=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],a=r[r.length-1],l=r[r.length-2];if(-1!==o.indexOf(a))switch(a){case"required":this.defRule(e,t,"required",s);break;case"creditcard":this.defRule(e,t,"creditcard",s);break;case"phone":this.defRule(e,t,"tel",s)}else if(-1!==o.indexOf(l))switch(l){case"maxlength":this.defRule(e,t,"maxLength",s);break;case"minlength":this.defRule(e,t,"minLength",s);break;case"range":{const h=e.getAttribute("data-val-range-min"),c=e.getAttribute("data-val-range-max");this.defRule(e,t,"range",[h,c])}break;case"equalto":{const h=e.getAttribute(i).split(".");this.defRule(e,t,"equalTo",h[h.length-1])}break;case"regex":this.defRule(e,t,"regex",s)}}defRule(e,t,i,s){const r=e.getAttribute("data-"+i+"-message"),o=e.getAttribute("data-val-"+i);let a;this.rules[e.name]&&"validateHidden"!==i&&"hidden"!==i&&(this.getInputElement(e.name),a=this.getErrorMessage(this.rules[e.name][i],i)),r?s=[s,r]:o?s=[s,o]:a&&(s=[s,a]),t[i]=s}wireEvents(){for(const e of this.inputElements)BO.isCheckable(e)?k.add(e,"click",this.clickHandler,this):"SELECT"===e.tagName?k.add(e,"change",this.changeHandler,this):(k.add(e,"focusout",this.focusOutHandler,this),k.add(e,"keyup",this.keyUpHandler,this));k.add(this.element,"submit",this.submitHandler,this),k.add(this.element,"reset",this.resetHandler,this)}unwireEvents(){for(const e of this.inputElements)k.clearEvents(e);k.remove(this.element,"submit",this.submitHandler),k.remove(this.element,"reset",this.resetHandler)}focusOutHandler(e){this.trigger("focusout",e);const t=e.target;this.rules[t.name]&&(this.rules[t.name][this.required]||t.value.length>0?this.validate(t.name):-1===this.validated.indexOf(t.name)&&this.validated.push(t.name))}keyUpHandler(e){this.trigger("keyup",e);const t=e.target;9===e.which&&(!this.rules[t.name]||this.rules[t.name]&&!this.rules[t.name][this.required])||-1!==this.validated.indexOf(t.name)&&this.rules[t.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(e.which)&&this.validate(t.name)}clickHandler(e){this.trigger("click",e);const t=e.target;"submit"!==t.type?this.validate(t.name):null!==t.getAttribute("formnovalidate")&&(this.allowSubmit=!0)}changeHandler(e){this.trigger("change",e),this.validate(e.target.name)}submitHandler(e){this.trigger("submit",e),this.allowSubmit||this.validate()?this.allowSubmit=!1:e.preventDefault()}resetHandler(){this.clearForm()}validateRules(e){if(!this.rules[e])return;const t=Object.keys(this.rules[e]);let i=!1,s=!1;const r=t.indexOf("validateHidden"),o=t.indexOf("hidden");if(this.getInputElement(e),-1!==o&&(i=!0),-1!==r&&(s=!0),!i||i&&s){-1!==r&&t.splice(r,1),-1!==o&&t.splice(o-1,1),this.getErrorElement(e);for(const a of t){const l=this.getErrorMessage(this.rules[e][a],a),h={name:e,message:l},c={inputName:e,element:this.inputElement,message:l};if(!this.isValid(e,a)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(e),this.errorRules.push(h),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(h):this.createErrorElement(e,h.message,this.inputElement),c.errorElement=this.infoElement,c.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(e,c),this.trigger("validationComplete",c),"required"===a&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(e),c.status="success",this.trigger("validationComplete",c)}}}optionalValidationStatus(e,t){!this.rules[e][this.required]&&!this.inputElement.value.length&&!f(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),t.status="",this.hideMessage(e))}isValid(e,t){const i=this.rules[e][t],r=this.rules[e][t],o={value:this.inputElement.value,param:i instanceof Array&&"string"==typeof i[1]?i[0]:i,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",o),!o.param&&"required"===t||(r&&"function"==typeof r[0]?r[0].call(this,{element:this.inputElement,value:this.inputElement.value}):BO.isCheckable(this.inputElement)?"required"!==t||bt('input[name="'+e+'"]:checked',this.element).length>0:BO.checkValidator[t](o))}getErrorMessage(e,t){let i=this.inputElement.getAttribute("data-"+t+"-message")?this.inputElement.getAttribute("data-"+t+"-message"):e instanceof Array&&"string"==typeof e[1]?e[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[t]:this.defaultMessages[t];const s=i.match(/{(\d)}/g);if(!f(s))for(let r=0;r<s.length;r++)i=i.replace(s[r],e instanceof Array?e[r]:e);return i}createErrorElement(e,t,i){let s=Be(this.errorElement,{className:this.errorClass,innerHTML:t,attrs:{for:e}});this.errorOption===HO.Message&&(s.classList.remove(this.errorClass),s.classList.add("e-message"),s=Be(this.errorContainer,{className:this.errorClass,innerHTML:s.outerHTML})),s.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+i.id+'"]')?this.element.querySelector('[data-valmsg-for="'+i.id+'"]').appendChild(s):!0===i.hasAttribute("data-msg-containerid")?X("#"+i.getAttribute("data-msg-containerid"),this.element).appendChild(s):null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,s):this.inputElement.parentNode.insertBefore(s,this.inputElement.nextSibling),s.style.display="block",this.getErrorElement(e),this.validated.push(e),this.checkRequired(e)}getErrorElement(e){return this.infoElement=X(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=X(this.errorElement+"."+this.errorClass+'[for="'+e+'"]',this.element)),this.infoElement}removeErrorRules(e){for(let t=0;t<this.errorRules.length;t++)this.errorRules[t].name===e&&this.errorRules.splice(t,1)}showMessage(e){this.infoElement.style.display="block",this.infoElement.innerHTML=e.message,this.checkRequired(e.name)}hideMessage(e){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(e),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))}checkRequired(e){!this.rules[e][this.required]&&!this.inputElement.value.length&&!f(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(e))}static isCheckable(e){const t=e.getAttribute("type");return t&&("checkbox"===t||"radio"===t||"submit"===t)}};dh.checkValidator={required:n=>isNaN(Date.parse(n.value))?n.value.toString().length>0:!isNaN(new Date(n.value).getTime()),email:n=>xk.EMAIL.test(n.value),url:n=>xk.URL.test(n.value),dateIso:n=>xk.DATE_ISO.test(n.value),tel:n=>xk.PHONE.test(n.value),creditcard:n=>xk.CREDITCARD.test(n.value),number:n=>!isNaN(Number(n.value))&&-1===n.value.indexOf(" "),digits:n=>xk.DIGITS.test(n.value),maxLength:n=>n.value.length<=n.param,minLength:n=>n.value.length>=n.param,rangeLength:n=>{const e=n.param;return n.value.length>=e[0]&&n.value.length<=e[1]},range:n=>{const e=n.param;return!isNaN(Number(n.value))&&Number(n.value)>=e[0]&&Number(n.value)<=e[1]},date:n=>!isNaN(new Date(n.value).getTime()),max:n=>isNaN(Number(n.value))?new Date(n.value).getTime()<=new Date(JSON.parse(JSON.stringify(n.param))).getTime():+n.value<=n.param,min:n=>{if(isNaN(Number(n.value))){if(-1!==n.value.indexOf(",")){const e=n.value.replace(/,/g,"");return parseFloat(e)>=n.param}return new Date(n.value).getTime()>=new Date(JSON.parse(JSON.stringify(n.param))).getTime()}return+n.value>=n.param},regex:n=>new RegExp(n.param).test(n.value),equalTo:n=>{const e=n.formElement.querySelector("#"+n.param);return n.param=e.value,n.param===n.value}},bc([_("")],dh.prototype,"locale",void 0),bc([_("e-hidden")],dh.prototype,"ignore",void 0),bc([_()],dh.prototype,"rules",void 0),bc([_("e-error")],dh.prototype,"errorClass",void 0),bc([_("e-valid")],dh.prototype,"validClass",void 0),bc([_("label")],dh.prototype,"errorElement",void 0),bc([_("div")],dh.prototype,"errorContainer",void 0),bc([_(HO.Label)],dh.prototype,"errorOption",void 0),bc([G()],dh.prototype,"focusout",void 0),bc([G()],dh.prototype,"keyup",void 0),bc([G()],dh.prototype,"click",void 0),bc([G()],dh.prototype,"change",void 0),bc([G()],dh.prototype,"submit",void 0),bc([G()],dh.prototype,"validationBegin",void 0),bc([G()],dh.prototype,"validationComplete",void 0),bc([G()],dh.prototype,"customPlacement",void 0),dh=BO=bc([as],dh);var bs=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Kle="e-file-select",R$="e-file-drop",Yle="e-upload-files",x5="e-upload-file-list",ja="e-file-status",Zle="e-file-name",Xle="e-file-type",Qle="e-file-size",Hh="e-file-remove-btn",Mf="e-file-delete-btn",Jle="e-spinner-pane",Ea="e-file-abort-btn",Qb="e-file-reload-btn",A$="e-upload-drag-hover",$E="e-upload-progress-wrap",E5="e-upload-progress-bar",L$="e-progress-bar-text",Of="e-upload-progress",hg="e-upload-success",Pf="e-upload-fails",M$="e-file-container",ehe="e-validation-fails",O$="e-disabled",ihe="e-rtl-container",P$="e-clear-icon-focus",id="e-file-pause-btn",KE="e-file-play-btn",VO="e-restrict-retry",she=["title","style","class"],nhe="e-form-upload",zO="e-file-invalid";class _5 extends ii{}bs([_("")],_5.prototype,"name",void 0),bs([_(null)],_5.prototype,"size",void 0),bs([_("")],_5.prototype,"type",void 0);class I5 extends ii{}bs([_("Browse...")],I5.prototype,"browse",void 0),bs([_("Upload")],I5.prototype,"upload",void 0),bs([_("Clear")],I5.prototype,"clear",void 0);class Ek extends ii{}bs([_("")],Ek.prototype,"saveUrl",void 0),bs([_("")],Ek.prototype,"removeUrl",void 0),bs([_(0)],Ek.prototype,"chunkSize",void 0),bs([_(3)],Ek.prototype,"retryCount",void 0),bs([_(500)],Ek.prototype,"retryAfterDelay",void 0);let Ws=class extends Qs{constructor(e,t){super(e,t),this.initialAttr={accept:null,multiple:!1,disabled:!1},this.uploadedFilesData=[],this.base64String=[],this.isForm=!1,this.allTypes=!1,this.pausedData=[],this.uploadMetaData=[],this.tabIndex="0",this.btnTabIndex="0",this.disableKeyboardNavigation=!1,this.count=-1,this.actionCompleteCount=0,this.flag=!0,this.selectedFiles=[],this.uploaderName="UploadFiles",this.fileStreams=[],this.newFileRef=0,this.isFirstFileOnSelection=!1,this.dragCounter=0,this.fileList=[],this.filesData=[],this.uploaderOptions=e}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=f(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=f(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=f(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":case"minFileSize":case"maxFileSize":case"autoUpload":case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=U("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(t.cssClass)}}setLocalizedTexts(){f(this.template)&&("string"==typeof this.buttons.browse&&(this.browseButton.innerText="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!f(this.uploadWrapper.querySelector("."+R$))&&(this.uploadWrapper.querySelector("."+R$).innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())}getKeyValue(e){let t;for(const i of Object.keys(this.preLocaleObj))this.preLocaleObj[i]===e&&(t=i);return t}updateFileList(){let e;if(this.fileList.length>0&&!f(this.uploadWrapper.querySelector("."+Yle)))for(let t=0;t<this.fileList.length;t++)e=this.fileList[t].querySelector(".e-file-status"),e.innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[t].status)),this.filesData[t].status=this.localizedTexts(this.getKeyValue(this.filesData[t].status)),this.fileList[t].classList.contains(hg)&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[t].querySelector(".e-file-play-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[t].querySelector(".e-file-remove-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[t].querySelector(".e-file-reload-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))}reRenderFileList(){this.listParent&&(te(this.listParent),this.listParent=null,this.fileList=[],this.createFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))}preRender(){this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new jo("uploader",this.localeText,this.locale),this.preLocaleObj=U("currentLocale",this.l10n),this.formRendered(),this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);const e=U("ej2_instances",this.element);if("EJS-UPLOADER"===this.element.tagName){const t=this.createElement("input",{attrs:{type:"file"}});let i=0;for(;i<this.element.attributes.length;i++)t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML;t.hasAttribute("name")||t.setAttribute("name","UploadFiles"),this.element.appendChild(t),this.element=t,zt("ej2_instances",e,this.element)}e[0].isPureReactComponent&&(f(e[0].props.name)?!f(e[0].props.id)&&f(e[0].props.name)?this.element.setAttribute("name",e[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",e[0].props.name)),f(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes(),this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=q.info.name,this.uploaderName=this.element.getAttribute("name")}formRendered(){let e=B(this.element,"form");if(!f(e))for(;e&&e!==document.documentElement;e=e.parentElement)"FORM"===e.tagName&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))}getPersistData(){return this.addOnPersist(["filesData"])}getModuleName(){return"uploader"}updateDirectoryAttributes(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))}render(){this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()}renderBrowseButton(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),"string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")}renderActionButtons(){this.element.setAttribute("tabindex","-1"),this.actionButtons=this.createElement("div",{className:"e-upload-actions"}),this.uploadButton=this.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=this.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.isPreloadFiles||this.uploadButton.focus(),this.wireActionButtonEvents()}serverActionButtonsEventBind(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())}wireActionButtonEvents(){k.add(this.uploadButton,"click",this.uploadButtonClick,this),k.add(this.clearButton,"click",this.clearButtonClick,this)}unwireActionButtonEvents(){k.remove(this.uploadButton,"click",this.uploadButtonClick),k.remove(this.clearButton,"click",this.clearButtonClick)}removeActionButtons(){this.actionButtons&&(this.unwireActionButtonEvents(),te(this.actionButtons),this.actionButtons=null)}renderButtonTemplates(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){const e=f(this.buttons.upload)?"Upload":this.buttons.upload;this.buttons.upload=e,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){const e=f(this.buttons.clear)?"Clear":this.buttons.clear;this.buttons.clear=e,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}}initializeUpload(){this.element.setAttribute("tabindex","-1");const e=this.createElement("span",{className:Kle});this.element.parentElement.insertBefore(e,this.element),this.dropAreaWrapper=this.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),e.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(e),this.uploadWrapper=this.createElement("div",{className:"e-upload e-control-wrapper"}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()}renderPreLoadFiles(){if(this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.createFileList(this.filesData);if(f(this.files[0].size))return;this.isPreloadFiles=!0;let e=[].slice.call(this.files);const t=[];this.multiple||(this.clearData(),e=[e[0]]);for(const i of e){const s={name:i.name+"."+i.type.split(".")[i.type.split(".").length-1],rawFile:"",size:i.size,status:this.localizedTexts("uploadSuccessMessage"),type:i.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};t.push(s),this.filesData.push(s)}this.createFileList(t),!this.autoUpload&&this.listParent&&!this.actionButtons&&(!this.isForm||this.allowUpload())&&this.showFileList&&this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1),this.isPreloadFiles=!1}}checkActionButtonStatus(){if(this.actionButtons){const e=this.uploadWrapper.querySelectorAll("."+ehe).length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+hg).length+this.uploadWrapper.querySelectorAll("span."+Of).length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}}setDropArea(){const e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:X(this.dropArea,document);let t=this.element,i=!1;for(;t.parentNode;)t=t.parentNode,t===this.dropZoneElement&&(i=!0,e?e.innerHTML=this.localizedTexts("dropFilesHint"):this.createDropTextHint());!i&&e&&Yt(e)}else!f(this.uploaderOptions)&&void 0===this.uploaderOptions.dropArea&&(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()}updateDropArea(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;const e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&Yt(e)}}createDropTextHint(){const e=this.createElement("span",{className:R$});e.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(e)}updateHTMLAttrToElement(){if(!f(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))she.indexOf(e)<0&&this.element.setAttribute(e,this.htmlAttributes[e])}updateHTMLAttrToWrapper(){if(!f(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(she.indexOf(e)>-1)if("class"===e){const t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&z([this.uploadWrapper],t.split(" "))}else if("style"===e){let t=this.uploadWrapper.getAttribute(e);t=f(t)?this.htmlAttributes[e]:t+this.htmlAttributes[e],this.uploadWrapper.setAttribute(e,t)}else this.uploadWrapper.setAttribute(e,this.htmlAttributes[e])}setMultipleSelection(){if(this.multiple&&!this.element.hasAttribute("multiple")){const e=document.createAttribute("multiple");e.value="multiple",this.element.setAttributeNode(e)}else this.multiple||this.element.removeAttribute("multiple")}checkAutoUpload(e){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(e):this.upload(e),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()}sequenceUpload(e){if(this.filesData.length-e.length==0||"1"!==this.filesData[this.filesData.length-e.length-1].statusCode){++this.count;const t=!this.showFileList;"object"==typeof this.filesData[this.count]?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],t),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(e)):--this.count}}setCSSClass(e){let t=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(t=this.cssClass.replace(/\s+/g," ").trim()),!f(this.cssClass)&&""!==t&&z([this.uploadWrapper],t.split(t.indexOf(",")>-1?",":" "));let i=e;f(e)||(i=e.replace(/\s+/g," ").trim()),!f(e)&&""!==i&&W([this.uploadWrapper],i.split(" "))}wireEvents(){k.add(this.browseButton,"click",this.browseButtonClick,this),k.add(this.element,"change",this.onSelectFiles,this),k.add(document,"click",this.removeFocus,this),this.keyboardModule=new Gn(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&k.add(this.formElement,"reset",this.resetForm,this)}unWireEvents(){k.remove(this.browseButton,"click",this.browseButtonClick),k.remove(this.element,"change",this.onSelectFiles),k.remove(document,"click",this.removeFocus),this.isForm&&k.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()}resetForm(){this.clearAll()}keyActionHandler(e){const t=e.target;if("enter"===e.action){if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(t.classList.contains(id)){const i=this.getCurrentMetaData(null,e);i.file.statusCode="4",i.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(i,!1)}else if(t.classList.contains(KE))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(t.classList.contains(Qb)){const i=this.getCurrentMetaData(null,e);if(f(i)){const r=this.filesData[this.fileList.indexOf(e.target.parentElement)];this.retry(r)}else i.file.statusCode="1",i.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(i.file)}else this.removeFiles(e),t.classList.contains(Ea)||this.browseButton.focus();e.preventDefault(),e.stopPropagation()}}getCurrentMetaData(e,t){let i,s;i=f(e)?this.filesData[this.fileList.indexOf(t.target.parentElement)]:e;for(let r=0;r<this.uploadMetaData.length;r++)this.uploadMetaData[r].file.name===i.name&&(s=this.uploadMetaData[r]);return s}removeFocus(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector("."+P$)&&(document.activeElement.blur(),this.listParent.querySelector("."+P$).classList.remove(P$))}browseButtonClick(){this.element.click()}uploadButtonClick(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)}clearButtonClick(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0}bindDropEvents(){this.dropZoneElement&&(k.add(this.dropZoneElement,"drop",this.dropElement,this),k.add(this.dropZoneElement,"dragover",this.dragHover,this),k.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),k.add(this.dropZoneElement,"paste",this.onPasteFile,this),k.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))}unBindDropEvents(){this.dropZoneElement&&(k.remove(this.dropZoneElement,"drop",this.dropElement),k.remove(this.dropZoneElement,"dragover",this.dragHover),k.remove(this.dropZoneElement,"dragleave",this.onDragLeave),k.remove(this.dropZoneElement,"dragenter",this.onDragEnter))}onDragEnter(e){!this.enabled||(this.dropZoneElement.classList.add(A$),this.dragCounter=this.dragCounter+1,e.preventDefault(),e.stopPropagation())}onDragLeave(){!this.enabled||(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove(A$))}dragHover(e){!this.enabled||("Default"!==this.dropEffect&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),e.preventDefault(),e.stopPropagation())}dropElement(e){this.dragCounter=0,this.dropZoneElement.classList.remove(A$),this.onSelectFiles(e),e.preventDefault(),e.stopPropagation()}onPasteFile(e){const t=e.clipboardData.items;if(1!==t.length)return;const i=[].slice.call(t)[0];"file"===i.kind&&i.type.match("^image/")&&this.renderSelectedFiles(e,[i.getAsFile()],!1,!0)}getSelectedFiles(e){const t=[],i=this.fileList[e],s=this.getFilesData(),r=+i.getAttribute("data-files-count");let o=0;for(let a=0;a<e;a++)o+=+this.fileList[a].getAttribute("data-files-count");for(let a=o;a<o+r;a++)t.push(s[a]);return t}removeFiles(e){if(!this.enabled)return;const i=this.fileList.indexOf(e.target.parentElement),s=this.fileList[i],r=this.isFormUpload(),o=r?this.getSelectedFiles(i):this.getFilesInArray(this.filesData[i]);if(!f(o)){if(e.target.classList.contains(Ea)&&!r){if(o[0].statusCode="5",!f(s)){const a=s.querySelector("."+Ea);vp({target:a,width:"20px"}),xa(a)}this.sequentialUpload&&this.uploadSequential(),s.classList.contains(VO)||this.checkActionComplete(!0)}else B(e.target,"."+Jle)||this.remove(o,!1,!1,!0,e);this.element.value="",this.checkActionButtonStatus()}}removeFilesData(e,t){let i;if(t)return void(this.showFileList||(i=this.filesData.indexOf(e),this.filesData.splice(i,1)));const s=this.getLiElement(e);f(s)||(te(s),i=this.fileList.indexOf(s),this.fileList.splice(i,1),this.filesData.splice(i,1),0===this.fileList.length&&!f(this.listParent)&&(te(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&i<=this.count&&--this.count)}removeUploadedFile(e,t,i,s){const r=e,o=new qb(this.asyncSettings.removeUrl,"POST",!0,null);o.emitError=!1;const a=new FormData;o.beforeSend=l=>{t.currentRequest=o.httpRequest,i?this.removingEventCallback(t,a,r,e):this.trigger("removing",t,h=>{h.cancel?l.cancel=!0:this.removingEventCallback(h,a,r,e)})},o.onLoad=l=>(this.removeCompleted(l,r,s),{}),o.onError=l=>(this.removeFailed(l,r,s),{}),o.send(a)}removingEventCallback(e,t,i,s){const r=this.element.getAttribute("name"),o=this.getLiElement(s);if(!(f(o)||f(o.querySelector("."+Mf))&&f(o.querySelector("."+Hh)))){const a=o.querySelector("."+Mf)?o.querySelector("."+Mf):o.querySelector("."+Hh);vp({target:a,width:"20px"}),xa(a)}e.postRawFile&&!f(i.rawFile)&&""!==i.rawFile?t.append(r,i.rawFile,i.name):t.append(r,i.name),this.updateFormData(t,e.customFormData)}updateFormData(e,t){if(t.length>0&&t[0])for(let i=0;i<t.length;i++){const s=t[i],r=Object.keys(s).map(function(o){return s[o]});e.append(Object.keys(s)[0],r)}}updateCustomheader(e,t){if(t.length>0&&t[0])for(let i=0;i<t.length;i++){const s=t[i],r=Object.keys(s).map(function(o){return s[o]});e.setRequestHeader(Object.keys(s)[0],r)}}removeCompleted(e,t,i){const s=e&&e.currentTarget?this.getResponse(e):null,r=e.target;if(4===r.readyState&&r.status>=200&&r.status<=299){const o={e,response:s,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",o),this.removeFilesData(t,i);const a=this.uploadedFilesData.indexOf(t);this.uploadedFilesData.splice(a,1),this.trigger("change",{files:this.uploadedFilesData})}else this.removeFailed(e,t,i)}removeFailed(e,t,i){const r={e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedFailedMessage"),"0")};if(!i){const a=this.filesData.indexOf(t),l=this.fileList[a];if(l){l.classList.remove(hg),l.classList.add(Pf);const h=l.querySelector("."+ja);h&&(h.classList.remove(hg),h.classList.add(Pf))}this.checkActionButtonStatus()}this.trigger("failure",r);const o=this.getLiElement(t);f(o)||f(o.querySelector("."+Mf))||(Rl(o.querySelector("."+Mf)),te(o.querySelector(".e-spinner-pane")))}getFilesFromFolder(e){this.filesEntries=[];const t=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]];if(this.checkDirectoryUpload(t))for(let s=0;s<t.length;s++){const r=t[s].webkitGetAsEntry();if(r.isFile){const o=[];r.file(a=>{o.push({path:r.fullPath,file:a})}),this.renderSelectedFiles(e,o,!0)}else r.isDirectory&&this.traverseFileTree(r,e)}}checkDirectoryUpload(e){for(let t=0;e&&t<e.length;t++)if(e[t].webkitGetAsEntry().isDirectory)return!0;return!1}traverseFileTree(e,t){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){const i=e.createReader();this.readFileFromDirectory(i,t)}}readFileFromDirectory(e,t){e.readEntries(i=>{for(let s=0;s<i.length;s++)this.traverseFileTree(i[s],t);this.pushFilesEntries(t),i.length&&this.readFileFromDirectory(e)})}pushFilesEntries(e){const t=[];for(let i=0;i<this.filesEntries.length;i++)this.filesEntries[i].file(s=>{this.filesEntries.length&&(t.push({path:this.filesEntries[i].fullPath,file:s}),i===this.filesEntries.length-1&&(this.filesEntries=[],this.renderSelectedFiles(e,t,!0)))})}onSelectFiles(e){if(!this.enabled)return;let t;if("drop"===e.type)if(this.directoryUpload)this.getFilesFromFolder(e);else{const i=this.sortFilesList=e.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=i),i.length>0&&(t=this.multiple?this.sortFileList(i):[i[0]],this.renderSelectedFiles(e,t))}else t=[].slice.call(e.target.files),this.renderSelectedFiles(e,t)}getBase64(e){return new Promise((t,i)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=r=>i(r)})}renderSelectedFiles(e,t,i,s){this.base64String=[];const r={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(t.length<1)return r.isCanceled=!0,void this.trigger("selected",r);this.flag=!0;let o=[];this.multiple||(this.clearData(!0),t=[t[0]]);for(let a=0;a<t.length;a++)this.updateInitialFileDetails(e,t,i?t[a].file:t[a],a,o,i,s);r.filesData=o,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.allTypes||(o=this.checkExtension(o)),this.trigger("selected",r,a=>{this._internalRenderSelect(a,o)})}updateInitialFileDetails(e,t,i,s,r,o,a){const h={name:o?t[s].path.substring(1,t[s].path.length):a?Tn(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):this.directoryUpload?t[s].webkitRelativePath:i.name,rawFile:i,size:i.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(i.name),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:Tn(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};a&&(h.fileSource="paste"),h.status=""!==h.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==h.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):h.status,(""!==h.validationMessages.minSize||""!==h.validationMessages.maxSize)&&(h.statusCode="0"),r.push(h)}_internalRenderSelect(e,t){if(!e.cancel){if(this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(let s=0;s<e.modifiedFilesData.length;s++)for(let r=0;r<t.length;r++)e.modifiedFilesData[s].id===t[r].id&&(e.modifiedFilesData[s].rawFile=t[r].rawFile);const i=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(i),this.filesData=i,(!this.isForm||this.allowUpload())&&this.checkAutoUpload(i)}else this.createFileList(t,!0),this.filesData=this.filesData.concat(t),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(t);!f(e.progressInterval)&&""!==e.progressInterval&&(this.progressInterval=e.progressInterval)}else this.filesData=this.filesData.concat(t),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}}allowUpload(){let e=!1;return this.isForm&&!f(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e}isFormUpload(){let e=!1;return this.isForm&&(f(this.asyncSettings.saveUrl)||""===this.asyncSettings.saveUrl)&&(f(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl)&&(e=!0),e}clearData(e){f(this.listParent)||(te(this.listParent),this.listParent=null),"msie"!==this.browserName&&!e&&(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()}updateSortedFileList(e){const t=this.createElement("div",{id:"clonewrapper"});let s,i=-1;if(this.listParent){for(let o=0;o<this.listParent.querySelectorAll("li").length;o++){const a=this.listParent.querySelectorAll("li")[o];t.appendChild(a.cloneNode(!0))}s=this.listParent.querySelectorAll("li");for(const o of s)te(o);this.removeActionButtons();const r=[].slice.call(t.childNodes);te(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(let o=0;o<e.length;o++){for(let a=0;a<this.filesData.length;a++)this.filesData[a].name===e[o].name&&(this.listParent.appendChild(r[a]),k.add(r[a].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(r[a]),i=o);i!==o&&this.createFileList([e[o]])}}else this.createFileList(e)}isBlank(e){return!e||/^\s*$/.test(e)}checkExtension(e){const t=e;if(!this.isBlank(this.allowedExtensions)){const i=[],s=this.allowedExtensions.split(",");for(const r of s)i.push(r.trim().toLocaleLowerCase());for(let r=0;r<e.length;r++)-1===i.indexOf(("."+e[r].type).toLocaleLowerCase())&&(e[r].status=this.localizedTexts("invalidFileType"),e[r].statusCode="0")}return t}validatedFileSize(e){let t="",i="";return e<this.minFileSize?t=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?i=this.localizedTexts("invalidMaxFileSize"):(t="",i=""),{minSize:t,maxSize:i}}isPreLoadFile(e){let t=!1;for(let i=0;i<this.files.length;i++)this.files[i].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[i].type===e.type&&(t=!0);return t}createCustomfileList(e){this.createParentUL();for(const t of e){const i=this.createElement("li",{className:x5,attrs:{"data-file-name":t.name}});this.uploadTemplateFn=this.templateComplier(this.template);const s=this.uploadTemplateFn(t,this,"template",this.element.id+"Template",this.isStringTemplate,null,i);s&&mi([].slice.call(s),i);const r=e.indexOf(t),o={element:i,fileInfo:t,index:r,isPreload:this.isPreLoadFile(t)},a={element:i,fileInfo:t,index:r,isPreload:this.isPreLoadFile(t)};this.trigger("rendering",o),this.trigger("fileListRendering",a),this.listParent.appendChild(i),this.fileList.push(i)}this.renderReactTemplates()}createParentUL(){f(this.listParent)&&(this.listParent=this.createElement("ul",{className:Yle}),this.uploadWrapper.appendChild(this.listParent))}formFileList(e,t){const i=this.createElement("li",{className:x5});i.setAttribute("data-files-count",e.length+"");const s=this.createElement("span",{className:M$});let r;for(const c of e){const m=this.createElement("span",{className:Zle});m.innerHTML=this.getFileNameOnly(c.name);const b=this.createElement("span",{className:Xle}),v=this.getFileType(c.name);if(b.innerHTML="."+v,v||b.classList.add("e-hidden"),this.enableRtl){const w=this.createElement("span",{className:ihe});w.appendChild(b),w.appendChild(m),s.appendChild(w)}else s.appendChild(m),s.appendChild(b);this.truncateName(m),r=this.formValidateFileInfo(c,i)}i.appendChild(s),this.setListToFileInfo(e,i);const o=this.listParent.querySelectorAll("li").length,a=this.createElement("span");if(i.classList.contains(zO)?(a.classList.add(ja),a.classList.add(zO),a.innerText=e.length>1?this.localizedTexts("invalidFileSelection"):r):(a.classList.add(e.length>1?"e-file-information":Qle),a.innerText=e.length>1?this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),s.appendChild(a),f(i.querySelector(".e-icons"))){const c=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&c.classList.add("e-msie"),c.setAttribute("title",this.localizedTexts("remove")),i.appendChild(s),i.appendChild(c),k.add(c,"click",this.removeFiles,this),c.classList.add(Hh)}const l={element:i,fileInfo:this.mergeFileInfo(e,i),index:o,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,i))},h={element:i,fileInfo:this.mergeFileInfo(e,i),index:o,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,i))};this.trigger("rendering",l),this.trigger("fileListRendering",h),this.listParent.appendChild(i),this.fileList.push(i)}formValidateFileInfo(e,t){let i=e.status;const s=this.validatedFileSize(e.size);(""!==s.minSize||""!==s.maxSize)&&(this.addInvalidClass(t),i=""!==s.minSize?this.localizedTexts("invalidMinFileSize"):""!==s.maxSize?this.localizedTexts("invalidMaxFileSize"):i);const r=this.checkExtension(this.getFilesInArray(e))[0].status;return r===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(t),i=r),i}addInvalidClass(e){e.classList.add(zO)}createFormInput(e){if("safari"!==this.browserName){const t=this.element.cloneNode(!0);t.classList.add("e-hidden-file-input");for(const i of e)i.input=t;t.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector("."+Kle).appendChild(t),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")}}getFileSize(e){let t=0;for(const i of e)t+=i.size;return t}mergeFileInfo(e,t){const i={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:t},s=[];let r="";for(const o of e)s.push(o.name),r=o.type;return i.name=s.join(", "),i.size=this.getFileSize(e),i.type=r,i.status=this.statusForFormUpload(e,t),i}statusForFormUpload(e,t){let s,i=!0;for(const r of e){s=r.status;const o=this.validatedFileSize(r.size);(""!==o.minSize||""!==o.maxSize)&&(i=!1,s=""!==o.minSize?this.localizedTexts("invalidMinFileSize"):""!==o.maxSize?this.localizedTexts("invalidMaxFileSize"):s);const a=this.checkExtension(this.getFilesInArray(r))[0].status;a===this.localizedTexts("invalidFileType")&&(i=!1,s=a)}return i?s=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(t.classList.add(zO),s=e.length>1?this.localizedTexts("invalidFileSelection"):s),s}formCustomFileList(e,t){this.createParentUL();const i=this.createElement("li",{className:x5});i.setAttribute("data-files-count",e.length+""),this.setListToFileInfo(e,i);const s=this.mergeFileInfo(e,i);i.setAttribute("data-file-name",s.name),this.uploadTemplateFn=this.templateComplier(this.template);const r=this.uploadTemplateFn(s,this,"template",this.element.id+"Template",this.isStringTemplate,null,i);r&&mi([].slice.call(r),i);const o=this.listParent.querySelectorAll("li").length;i.classList.contains(zO)||this.createFormInput(e);const a={element:i,fileInfo:s,index:o,isPreload:this.isPreLoadFile(s)},l={element:i,fileInfo:s,index:o,isPreload:this.isPreLoadFile(s)};this.trigger("rendering",a),this.trigger("fileListRendering",l),this.listParent.appendChild(i),this.fileList.push(i),this.renderReactTemplates()}createFileList(e,t){if(this.createParentUL(),""===this.template||f(this.template))if(this.isFormUpload())this.uploadWrapper.classList.add(nhe),this.formFileList(e,this.element.files);else for(const i of e){const s=this.createElement("li",{className:x5,attrs:{"data-file-name":i.name,"data-files-count":"1"}}),r=this.createElement("span",{className:M$}),o=this.createElement("span",{className:Zle,attrs:{title:i.name}});o.innerHTML=this.getFileNameOnly(i.name);const a=this.createElement("span",{className:Xle}),l=this.getFileType(i.name);if(a.innerHTML="."+l,l||a.classList.add("e-hidden"),this.enableRtl){const D=this.createElement("span",{className:ihe});D.appendChild(a),D.appendChild(o),r.appendChild(D)}else r.appendChild(o),r.appendChild(a);const h=this.createElement("span",{className:Qle});h.innerHTML=this.bytesToSize(i.size),r.appendChild(h);const c=this.createElement("span",{className:ja});r.appendChild(c),c.innerHTML=i.status,s.appendChild(r);const m=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&m.classList.add("e-msie"),m.setAttribute("title",this.localizedTexts("remove")),s.appendChild(m),k.add(m,"click",this.removeFiles,this),"2"===i.statusCode?(c.classList.add(hg),m.classList.add(Mf),m.setAttribute("title",this.localizedTexts("delete"))):"1"!==i.statusCode&&(c.classList.remove(hg),c.classList.add(ehe)),this.autoUpload&&"1"===i.statusCode&&""!==this.asyncSettings.saveUrl&&(c.innerHTML=""),m.classList.contains(Mf)||m.classList.add(Hh);const b=e.indexOf(i),v={element:s,fileInfo:i,index:b,isPreload:this.isPreLoadFile(i)},w={element:s,fileInfo:i,index:b,isPreload:this.isPreLoadFile(i)};this.trigger("rendering",v),this.trigger("fileListRendering",w),this.listParent.appendChild(s),this.fileList.push(s),this.truncateName(o);const E=this.flag;this.isPreLoadFile(i)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=E)}else this.isFormUpload()?(this.uploadWrapper.classList.add(nhe),this.formCustomFileList(e,this.element.files)):this.createCustomfileList(e)}getSlicedName(e){const t=e.textContent;e.dataset.tail=t.slice(t.length-10)}setListToFileInfo(e,t){for(const i of e)i.list=t}truncateName(e){("edge"!==this.browserName&&e.offsetWidth<e.scrollWidth||e.offsetWidth+1<e.scrollWidth)&&this.getSlicedName(e)}getFileType(e){let t;const i=e.lastIndexOf(".");return i>=0&&(t=e.substring(i+1)),t||""}getFileNameOnly(e){let t=this.getFileType(e);return e.split("."+t)[0]}setInitialAttributes(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){const e=document.createAttribute("multiple");this.element.setAttributeNode(e)}}filterfileList(e){const t=[];let i;for(let s=0;s<e.length;s++)i=this.getLiElement(e[s]),i.classList.contains(hg)||t.push(e[s]);return t}updateStatus(e,t,i,s=!0){if(!(""===t||f(t))&&!(""===i||f(i))&&(e.status=t,e.statusCode=i),s){const r=this.getLiElement(e);f(r)||!f(r.querySelector("."+ja))&&""!==t&&!f(t)&&(r.querySelector("."+ja).textContent=t)}return e}getLiElement(e){let t;for(let i=0;i<this.filesData.length;i++)!f(e)&&(f(this.filesData[i].id)||f(e.id)?this.filesData[i].name===e.name:this.filesData[i].name===e.name&&this.filesData[i].id===e.id)&&(t=i);return this.fileList[t]}createProgressBar(e){const t=this.createElement("span",{className:$E}),i=this.createElement("progressbar",{className:E5,attrs:{value:"0",max:"100"}}),s=this.createElement("span",{className:"e-progress-inner-wrap"});i.setAttribute("style","width: 0%");const r=this.createElement("span",{className:L$});r.textContent="0%",s.appendChild(i),t.appendChild(s),t.appendChild(r),e.querySelector("."+M$).appendChild(t)}updateProgressbar(e,t){if(!isNaN(Math.round(e.loaded/e.total*100))&&!f(t.querySelector("."+E5)))if(f(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%");else{const i=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);(0===i||100===i)&&this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")}}changeProgressValue(e,t){e.querySelector("."+E5).setAttribute("style","width:"+t),e.querySelector("."+L$).textContent=t}uploadInProgress(e,t,i,s){const r=this.getLiElement(t);if(f(r)&&!i)return;if(f(r))this.cancelUploadingFile(t,e,s);else{"5"===t.statusCode&&this.cancelUploadingFile(t,e,s,r),!(r.querySelectorAll("."+$E).length>0)&&r.querySelector("."+ja)&&(r.querySelector("."+ja).classList.add(Of),this.createProgressBar(r),this.updateProgressBarClasses(r,Of),r.querySelector("."+ja).classList.remove(Pf)),this.updateProgressbar(e,r);const a=r.querySelector("."+Hh);f(a)||(a.classList.add(Ea,Of),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(Hh))}const o={e,operation:"upload",file:this.updateStatus(t,this.localizedTexts("inProgress"),"3")};this.trigger("progress",o)}cancelUploadingFile(e,t,i,s){"5"===e.statusCode&&this.trigger("canceling",{event:t,fileData:e,cancel:!1,customFormData:[]},o=>{if(o.cancel){if(e.statusCode="3",!f(s)){const a=s.querySelector("."+Ea);f(a)||(Rl(a),te(s.querySelector(".e-spinner-pane")))}}else{i.emitError=!1,i.httpRequest.abort();const a=new FormData;if("5"===e.statusCode){const l=this.element.getAttribute("name");a.append(l,e.name),a.append("cancel-uploading",e.name),this.updateFormData(a,o.customFormData);const h=new qb(this.asyncSettings.removeUrl,"POST",!0,null);h.emitError=!1,h.onLoad=c=>(this.removecanceledFile(c,e),{}),h.send(a)}}})}removecanceledFile(e,t){const i=this.getLiElement(t);if(f(i)||i.querySelector("."+Qb)||f(i.querySelector("."+Ea)))return;this.updateStatus(t,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,t,i);const s=i.querySelector("."+Hh);f(i)||(Rl(s),f(i.querySelector(".e-spinner-pane"))||te(i.querySelector(".e-spinner-pane")));const r=e&&e.currentTarget?this.getResponse(e):null;this.trigger("success",{event:e,response:r,operation:"cancel",file:t})}renderFailureState(e,t,i){this.updateProgressBarClasses(i,Pf),this.removeProgressbar(i,"failure"),f(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add(Pf);const s=i.querySelector("."+Ea);f(s)||(s.classList.remove(Ea,Of),s.classList.add(Hh),s.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),s.parentElement.insertBefore(this.pauseButton,s),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),i.querySelector("."+Qb).addEventListener("click",o=>{this.reloadcanceledFile(o,t,i,!1)},!1))}reloadcanceledFile(e,t,i,s){t.statusCode="1",t.status=this.localizedTexts("readyToUploadMessage"),s||(f(i.querySelector("."+ja))||i.querySelector("."+ja).classList.remove(Pf),f(i.querySelector("."+Qb))||te(i.querySelector("."+Qb)),this.pauseButton=null),i.classList.add(VO),this.upload([t])}uploadComplete(e,t,i){const s=e.target;if(4===s.readyState&&s.status>=200&&s.status<=299){const r=this.getLiElement(t);if(f(r)&&(!i||f(i)))return;if(!f(r)){this.updateProgressBarClasses(r,hg),this.removeProgressbar(r,"success");const o=r.querySelector("."+Ea);f(o)||(o.classList.add(Mf),o.setAttribute("title",this.localizedTexts("delete")),o.classList.remove(Ea),o.classList.remove(Of))}this.raiseSuccessEvent(e,t)}else this.uploadFailed(e,t)}getResponse(e){const t=e.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}}raiseSuccessEvent(e,t){const i=e&&e.currentTarget?this.getResponse(e):null,s=this.localizedTexts("uploadSuccessMessage"),r={e,response:i,operation:"upload",file:this.updateStatus(t,s,"2",!1),statusText:s},o=this.getLiElement(t);if(!f(o)){const a=o.querySelector("."+Jle);f(a)||(Rl(o),te(a))}this.trigger("success",r,a=>{this.updateStatus(t,a.statusText,"2"),this.uploadedFilesData.push(t),this.trigger("change",{file:this.uploadedFilesData}),this.checkActionButtonStatus(),this.fileList.length>0&&(this.getLiElement(t).classList.contains(VO)?this.getLiElement(t).classList.remove(VO):(this.uploadSequential(),this.checkActionComplete(!0)))})}uploadFailed(e,t){const i=this.getLiElement(t),s=e&&e.currentTarget?this.getResponse(e):null,r=this.localizedTexts("uploadFailedMessage"),o={e,response:s,operation:"upload",file:this.updateStatus(t,r,"0",!1),statusText:r};f(i)||this.renderFailureState(e,t,i),this.trigger("failure",o,a=>{this.updateStatus(t,a.statusText,"0"),this.checkActionButtonStatus(),this.uploadSequential(),this.checkActionComplete(!0)})}uploadSequential(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())}checkActionComplete(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()}raiseActionComplete(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;const e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",e)}}getSelectedFileStatus(e){const t=[];let i=0;for(let s=0;s<e.length;s++){const r=e[s];for(let o=0;o<this.filesData.length;o++)this.filesData[o].name===r.name&&(t[i]=this.filesData[o],++i)}return t}updateProgressBarClasses(e,t){const i=e.querySelector("."+E5);f(i)||i.classList.add(t)}removeProgressbar(e,t){f(e.querySelector("."+$E))||(this.progressAnimation=new mo({duration:1250}),this.progressAnimation.animate(e.querySelector("."+$E),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector("."+L$),{name:"FadeOut"}),setTimeout(()=>{this.animateProgressBar(e,t)},750))}animateProgressBar(e,t){"success"===t?(e.classList.add(hg),f(e.querySelector("."+ja))||(e.querySelector("."+ja).classList.remove(Of),this.progressAnimation.animate(e.querySelector("."+ja),{name:"FadeIn"}),e.querySelector("."+ja).classList.add(hg))):f(e.querySelector("."+ja))||(e.querySelector("."+ja).classList.remove(Of),this.progressAnimation.animate(e.querySelector("."+ja),{name:"FadeIn"}),e.querySelector("."+ja).classList.add(Pf)),e.querySelector("."+$E)&&te(e.querySelector("."+$E))}setExtensions(e){""===e||f(e)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",e)}templateComplier(e){if(e)try{return bt(e,document).length?ji(X(e,document).innerHTML.trim()):ji(e)}catch(t){return ji(e)}}setRTL(){this.enableRtl?z([this.uploadWrapper],"e-rtl"):W([this.uploadWrapper],"e-rtl")}localizedTexts(e){return this.l10n.setLocale(this.locale),this.l10n.getConstant(e)}setControlStatus(){this.enabled?(this.uploadWrapper.classList.contains(O$)&&this.uploadWrapper.classList.remove(O$),!f(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!f(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!f(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add(O$),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),f(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),f(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))}checkHTMLAttributes(e){const t=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"];for(const i of t)if(!f(this.element.getAttribute(i)))switch(i){case"accept":(f(this.uploaderOptions)||void 0===this.uploaderOptions.allowedExtensions||e)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!e),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if(f(this.uploaderOptions)||void 0===this.uploaderOptions.multiple||e){const s="multiple"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({multiple:s},!e),this.initialAttr.multiple=!0}break;case"disabled":if(f(this.uploaderOptions)||void 0===this.uploaderOptions.enabled||e){const s=!("disabled"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i));this.setProperties({enabled:s},!e),this.initialAttr.disabled=!0}}}chunkUpload(e,t,i){const r=Math.min(this.asyncSettings.chunkSize,e.size),a=e.rawFile.slice(0,r);this.sendRequest(e,{chunkIndex:0,blob:a,file:e,start:0,end:r,retryCount:0,request:null},t,i)}sendRequest(e,t,i,s){const r=new FormData,o=e.rawFile.slice(t.start,t.end);r.append("chunkFile",o,e.name),r.append(this.uploaderName,o,e.name),r.append("chunk-index",t.chunkIndex.toString()),r.append("chunkIndex",t.chunkIndex.toString());const a=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);r.append("total-chunk",a.toString()),r.append("totalChunk",a.toString());const l=new qb({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});l.emitError=!1,l.onLoad=c=>(this.chunkUploadComplete(c,t,i),{}),l.onUploadProgress=c=>(this.chunkUploadInProgress(c,t,i),{});const h={fileData:e,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};l.beforeSend=c=>{h.currentRequest=l.httpRequest,h.currentChunkIndex=t.chunkIndex,this.trigger(0===h.currentChunkIndex?"uploading":"chunkUploading",h,m=>{this.uploadingEventCallback(r,m,c,e)})},l.onError=c=>(this.chunkUploadFailed(c,t,i),{}),l.send(r),t.request=l}uploadingEventCallback(e,t,i,s){t.cancel?this.eventCancelByArgs(i,t,s):this.updateFormData(e,t.customFormData)}eventCancelByArgs(e,t,i){if(e.cancel=!0,"5"===t.fileData.statusCode)return;t.fileData.statusCode="5",t.fileData.status=this.localizedTexts("fileUploadCancel");const s=this.getLiElement(t.fileData);if(s){f(s.querySelector("."+ja))||(s.querySelector("."+ja).innerHTML=this.localizedTexts("fileUploadCancel"),s.querySelector("."+ja).classList.add(Pf)),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});const r=s.querySelector("."+Hh);r&&r.parentElement.insertBefore(this.pauseButton,r),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",o=>{this.reloadcanceledFile(o,i,s)},!1),this.checkActionButtonStatus()}}checkChunkUpload(){return!(this.asyncSettings.chunkSize<=0||f(this.asyncSettings.chunkSize))}chunkUploadComplete(e,t,i){const s=e.target;let r;if(4===s.readyState&&s.status>=200&&s.status<300){const o=e&&e.currentTarget?this.getResponse(e):null,a=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1);if(this.trigger("chunkSuccess",{event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:a,chunkSize:this.asyncSettings.chunkSize,response:o}),(f(i)||!i)&&(r=this.getLiElement(t.file)),this.updateMetaData(t),t.end===t.file.size&&(t.file.statusCode="3"),"5"===t.file.statusCode)this.trigger("canceling",{event:e,fileData:t.file,cancel:!1,customFormData:[]},c=>{if(c.cancel){t.file.statusCode="3";const m=r.querySelector("."+Ea);!f(r)&&!f(m)&&(Rl(m),te(r.querySelector(".e-spinner-pane"))),this.sendNextRequest(t)}else{t.request.emitError=!1,s.abort();const m=new FormData,b=this.element.getAttribute("name");m.append(b,t.file.name),m.append("cancel-uploading",t.file.name),m.append("cancelUploading",t.file.name),this.updateFormData(m,c.customFormData);const v=new qb(this.asyncSettings.removeUrl,"POST",!0,null);v.emitError=!1,v.onLoad=w=>(this.removeChunkFile(w,t,i),{}),v.send(m)}});else{if(a-1===t.chunkIndex&&a>t.chunkIndex){const h=this.pausedData.indexOf(t);return h>=0&&this.pausedData.splice(h,1),f(this.template)&&(f(i)||!i)&&r&&(r&&!f(r.querySelector("."+id))&&te(r.querySelector("."+id)),this.removeChunkProgressBar(t)),void this.raiseSuccessEvent(e,t.file)}"4"!==t.file.statusCode&&this.sendNextRequest(t)}}else this.chunkUploadFailed(e,t)}sendNextRequest(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)}removeChunkFile(e,t,i){if(f(this.template)&&f(i)&&!i){const s=this.getLiElement(t.file),r=s.querySelector("."+Ea),o=r;this.updateStatus(t.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(s,Pf),this.removeProgressbar(s,"failure"),r&&r.classList.remove(Ea),r&&r.classList.add(Hh),r&&r.setAttribute("title",this.localizedTexts("remove"));const a=s.querySelector("."+id);a&&a.classList.add(Qb),a&&a.classList.remove(id),a&&a.setAttribute("title",this.localizedTexts("retry")),!f(s)&&!f(r)&&!f(s.querySelector(".e-spinner-pane"))&&(Rl(o),te(s.querySelector(".e-spinner-pane")))}}pauseUpload(e,t,i){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);const s={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,i,s)}abortUpload(e,t,i){"4"!==e.file.statusCode&&(e.request.emitError=!1,e.request.httpRequest.abort());const s=this.getLiElement(e.file);if(f(this.template)&&(f(t)||!t)){const r=s.querySelector("."+id);r.classList.remove(id),r.classList.add(KE),r.setAttribute("title",this.localizedTexts("resume")),r.nextElementSibling.classList.add(Hh),r.nextElementSibling.classList.remove(Ea),r.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(let r=0;r<this.pausedData.length;r++)this.pausedData[r].file.name===e.file.name&&this.pausedData.splice(r,1);this.pausedData.push(e),this.trigger("pausing",i)}resumeUpload(e,t,i){const s=this.getLiElement(e.file);let r;f(s)||(r=s.querySelector("."+KE)),!f(r)&&(f(i)||!i)&&(r.classList.remove(KE),r.classList.add(id),r.setAttribute("title",this.localizedTexts("pause")),r.nextElementSibling.classList.remove(Hh),r.nextElementSibling.classList.add(Ea),r.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);const o={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",o);for(let a=0;a<this.pausedData.length;a++)this.pausedData[a].end===this.pausedData[a].file.size?this.chunkUploadComplete(t,e,i):this.pausedData[a].file.name===e.file.name&&(this.pausedData[a].start=this.pausedData[a].end,this.pausedData[a].end=this.pausedData[a].end+this.asyncSettings.chunkSize,this.pausedData[a].end=Math.min(this.pausedData[a].end,this.pausedData[a].file.size),this.pausedData[a].chunkIndex=this.pausedData[a].chunkIndex+1,this.sendRequest(this.pausedData[a].file,this.pausedData[a],i))}updateMetaData(e){-1===this.uploadMetaData.indexOf(e)||this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e)}removeChunkProgressBar(e){const t=this.getLiElement(e.file);if(!f(t)){this.updateProgressBarClasses(t,hg),this.removeProgressbar(t,"success");const i=t.querySelector("."+Ea);f(i)||(i.classList.add(Mf),i.setAttribute("title",this.localizedTexts("delete")),i.classList.remove(Ea,Of))}}chunkUploadFailed(e,t,i){const s=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1);let r;f(this.template)&&(f(i)||!i)&&(r=this.getLiElement(t.file));const o=e&&e.currentTarget?this.getResponse(e):null;this.trigger("chunkFailure",{event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:s,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:o},l=>{if(!l.cancel)if(t.retryCount<this.asyncSettings.retryCount)setTimeout(()=>{this.retryRequest(r,t,i)},this.asyncSettings.retryAfterDelay);else{if(!f(r)){const b=r.querySelector("."+id)?r.querySelector("."+id):r.querySelector("."+KE);f(b)||(b.classList.add(Qb),b.classList.remove(id,KE)),this.updateProgressBarClasses(r,Pf),this.removeProgressbar(r,"failure"),r.querySelector(".e-icons").classList.remove(Of);const v=r.querySelector("."+Ea)?r.querySelector("."+Ea):r.querySelector("."+Hh);v.classList.remove(Ea),f(r.querySelector("."+id))||te(r.querySelector("."+id)),t.start>0?(v.classList.add(Mf),v.setAttribute("title",this.localizedTexts("delete"))):(v.classList.add(Hh),v.setAttribute("title",this.localizedTexts("remove")))}t.retryCount=0;const h=t.file,c=this.localizedTexts("uploadFailedMessage"),m={e,response:o,operation:"upload",file:this.updateStatus(h,c,"0",!1),statusText:c};this.trigger("failure",m,b=>{this.updateStatus(h,b.statusText,"0"),this.uploadSequential(),this.checkActionComplete(!0)})}})}retryRequest(e,t,i){f(this.template)&&(f(i)||!i)&&e&&this.updateProgressBarClasses(e,Pf),t.retryCount+=1,this.sendRequest(t.file,t)}checkPausePlayAction(e){const t=e.target,s=this.fileList.indexOf(e.target.parentElement),o=this.getCurrentMetaData(this.filesData[s]);t.classList.contains(id)?this.pauseUpload(o,e):t.classList.contains(KE)?this.resumeUpload(o,e):t.classList.contains(Qb)&&(o.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(o,!1):this.retryUpload(o,!0))}retryUpload(e,t){t?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add(VO)}chunkUploadInProgress(e,t,i){if("4"===t.file.statusCode)return;"4"!==t.file.statusCode&&"5"!==t.file.statusCode&&(t.file.statusCode="3",t.file.status=this.localizedTexts("inProgress")),this.updateMetaData(t);const s=this.getLiElement(t.file);if(f(s))return;const r=s.querySelector("."+Qb);if(f(r)||(r.classList.add(id),r.setAttribute("title",this.localizedTexts("pause")),r.classList.remove(Qb)),!f(s)){if(!(s.querySelectorAll("."+$E).length>0)){const o=s.querySelector("."+ja);f(this.template)&&(o.classList.add(Of),o.classList.remove(Pf),this.createProgressBar(s),this.updateProgressBarClasses(s,Of));const a=s.querySelector("."+Hh)?s.querySelector("."+Hh):s.querySelector("."+Mf);f(a)||(a.classList.add(Ea),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(Hh))}if(!isNaN(Math.round(e.loaded/e.total*100))&&f(this.template)&&"4"!==t.file.statusCode){let o,a=Math.ceil(t.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&a&&(o=Math.round(t.chunkIndex/a*100),this.changeProgressValue(s,o.toString()+"%"))}0===t.chunkIndex&&this.checkActionButtonStatus()}if(f(s.querySelector("."+id))&&f(this.template)&&f(s.querySelector("."+Mf))){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");const o=s.querySelector("."+Ea);o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",a=>{this.checkPausePlayAction(a)},!1)}}bytesToSize(e){let t=-1;if(!e)return"0.0 KB";do{e/=1024,t++}while(e>99);return t>=2&&(e*=1024,t=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][t]}sortFileList(e){const t=e=e||this.sortFilesList,i=[];for(let o=0;o<t.length;o++)i.push(t[o].name);const s=i.sort(),r=[];for(const o of s)for(let a=0;a<t.length;a++)o===t[a].name&&r.push(t[a]);return r}destroy(){this.element.value=null,this.clearTemplate(),this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();const e=["aria-label","directory","webkitdirectory","tabindex"];for(const t of e)this.element.removeAttribute(t);f(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),te(this.uploadWrapper)),this.uploadWrapper=null,super.destroy()}upload(e,t){if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||t))this.sequenceUpload(e);else{const i=this.getFilesInArray(e);this.trigger("beforeUpload",{customFormData:[],currentRequest:null,cancel:!1},r=>{r.cancel||this.uploadFiles(i,t)})}}getFilesInArray(e){let t=[];return e instanceof Array?t=e:t.push(e),t}serverReadFileBase64(e,t,i){return new Promise((s,r)=>{const o=this.fileStreams[e].rawFile;try{const a=new FileReader;a.onload=(l=a,()=>{try{const h=l.result,c=h?h.split(";base64,")[1]:null;s(c)}catch(h){r(h)}}),a.readAsDataURL(o.slice(t,t+i))}catch(a){r(a)}var l})}uploadFileCount(e){const t=this.filesData;return t&&0!==t.length?t.length:-1}getFileRead(e,t){const i=this.filesData;if(!i||0===i.length)return-1;const s=i[e],r=this.newFileRef++;return this.fileStreams[r]=s,r}getFileInfo(e,t){const i=this.filesData;return i&&0!==i.length&&i[e]?this.filesData[e]:null}uploadFiles(e,t){let i=[];if(""!==this.asyncSettings.saveUrl&&!f(this.asyncSettings.saveUrl)){if(!t||f(t))if(this.multiple)i=this.filterfileList(e);else{const s=[];s.push(e[0]),i=this.filterfileList(s)}else i=e;for(let s=0;s<i.length;s++)this.uploadFilesRequest(i,s,t)}}uploadFilesRequest(e,t,i){const s=this.checkChunkUpload(),r=new qb(this.asyncSettings.saveUrl,"POST",!0,null);r.emitError=!1;const o={fileData:e[t],customFormData:[],cancel:!1},a=new FormData;if(r.beforeSend=l=>{o.currentRequest=r.httpRequest,this.trigger("uploading",o,h=>{h.cancel&&this.eventCancelByArgs(l,h,e[t]),this.updateFormData(a,h.customFormData)})},"1"===e[t].statusCode){const l=this.element.getAttribute("name");a.append(l,e[t].rawFile,e[t].name),s&&e[t].size>this.asyncSettings.chunkSize?this.chunkUpload(e[t],i,t):(r.onLoad=h=>(o.cancel||this.uploadComplete(h,e[t],i),{}),r.onUploadProgress=h=>(o.cancel||this.uploadInProgress(h,e[t],i,r),{}),r.onError=h=>(this.uploadFailed(h,e[t]),{}),r.send(a))}}spliceFiles(e){const t=this.fileList[e],i=this.getFilesData(),s=+t.getAttribute("data-files-count");let r=0;for(let a=0;a<e;a++)r+=+this.fileList[a].getAttribute("data-files-count");for(let a=r+s-1;a>=r;a--)i.splice(a,1)}remove(e,t,i,s,r){f(s)&&(s=!0);const o={event:r,cancel:!1,filesData:[],customFormData:[],postRawFile:s,currentRequest:null};this.trigger("beforeRemove",{cancel:!1,customFormData:[],currentRequest:null},l=>{if(!l.cancel)if(this.isFormUpload())o.filesData=e,this.trigger("removing",o,h=>{if(!h.cancel){const c=this.getFilesInArray(e);let b,m=!1;for(const v of c)if(m||(b=this.fileList.indexOf(v.list)),b>-1){const w=f(v.input)?null:v.input;w&&te(w),this.spliceFiles(b),te(this.fileList[b]),this.fileList.splice(b,1),m=!0,b=-1}}});else if(this.isForm&&(f(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl))o.filesData=this.getFilesData(),this.trigger("removing",o,h=>{h.cancel||this.clearAll()});else{let h=[];(e=f(e)?this.filesData:e)instanceof Array?h=e:h.push(e),o.filesData=h;const c=this.asyncSettings.removeUrl,m=!(""===c||f(c));for(const b of h){const v=this.uploadedFilesData.indexOf(b);("2"===b.statusCode||"4"===b.statusCode||"0"===b.statusCode&&-1!==v)&&m?this.removeUploadedFile(b,o,i,t):i?this.removeFilesData(b,t):this.trigger("removing",o,w=>{w.cancel||this.removeFilesData(b,t)}),r&&!r.target.classList.contains(Hh)&&this.checkActionComplete(!1)}}})}clearAll(){if(f(this.listParent))return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);this.trigger("clearing",{cancel:!1,filesData:this.filesData},t=>{t.cancel||(this.clearData(),this.actionCompleteCount=0,this.count=-1)})}getFilesData(e){return f(e)?this.filesData:this.getSelectedFiles(e)}pause(e,t){const i=this.getFilesInArray(e=e||this.filesData);this.pauseUploading(i,t)}pauseUploading(e,t){const i=this.getFiles(e);for(let s=0;s<i.length;s++)"3"===i[s].statusCode&&this.pauseUpload(this.getCurrentMetaData(i[s],null),null,t)}getFiles(e){let t=[];return f(e)||e instanceof Array?t=e:t.push(e),t}resume(e,t){const i=this.getFilesInArray(e=e||this.filesData);this.resumeFiles(i,t)}resumeFiles(e,t){const i=this.getFiles(e);for(let s=0;s<i.length;s++)"4"===i[s].statusCode&&this.resumeUpload(this.getCurrentMetaData(i[s],null),null,t)}retry(e,t,i){const s=this.getFilesInArray(e=e||this.filesData);this.sequentialUpload&&this.isFirstFileOnSelection&&(this.isFirstFileOnSelection=!1),this.retryFailedFiles(s,t,i)}retryFailedFiles(e,t,i){const s=this.getFiles(e);for(let r=0;r<s.length;r++)if("5"===s[r].statusCode||"0"===s[r].statusCode)if(this.asyncSettings.chunkSize>0)this.retryUpload(this.getCurrentMetaData(s[r],null),t);else{let o;i||(o=this.fileList[this.filesData.indexOf(s[r])]),this.reloadcanceledFile(null,s[r],o,i)}}cancel(e){const t=this.getFilesInArray(e=e||this.filesData);this.cancelUpload(t)}cancelUpload(e){const t=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(let i=0;i<t.length;i++)if("3"===t[i].statusCode){const s=this.getCurrentMetaData(t[i],null);s.file.statusCode="5",s.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(s),this.showHideUploadSpinner(t[i])}}else for(let i=0;i<t.length;i++)"3"===t[i].statusCode&&(t[i].statusCode="5",t[i].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(t[i]))}showHideUploadSpinner(e){const t=this.getLiElement(e);if(!f(t)&&f(this.template)){const i=t.querySelector("."+Ea);vp({target:i,width:"20px"}),xa(i)}}};bs([di({saveUrl:"",removeUrl:""},Ek)],Ws.prototype,"asyncSettings",void 0),bs([_(!1)],Ws.prototype,"sequentialUpload",void 0),bs([_({})],Ws.prototype,"htmlAttributes",void 0),bs([_("")],Ws.prototype,"cssClass",void 0),bs([_(!0)],Ws.prototype,"enabled",void 0),bs([_(null)],Ws.prototype,"template",void 0),bs([_(!0)],Ws.prototype,"multiple",void 0),bs([_(!0)],Ws.prototype,"autoUpload",void 0),bs([di({},I5)],Ws.prototype,"buttons",void 0),bs([_("")],Ws.prototype,"allowedExtensions",void 0),bs([_(0)],Ws.prototype,"minFileSize",void 0),bs([_(3e7)],Ws.prototype,"maxFileSize",void 0),bs([_(null)],Ws.prototype,"dropArea",void 0),bs([rh([{}],_5)],Ws.prototype,"files",void 0),bs([_(!0)],Ws.prototype,"showFileList",void 0),bs([_(!1)],Ws.prototype,"directoryUpload",void 0),bs([_("Default")],Ws.prototype,"dropEffect",void 0),bs([G()],Ws.prototype,"created",void 0),bs([G()],Ws.prototype,"actionComplete",void 0),bs([G()],Ws.prototype,"rendering",void 0),bs([G()],Ws.prototype,"beforeUpload",void 0),bs([G()],Ws.prototype,"fileListRendering",void 0),bs([G()],Ws.prototype,"selected",void 0),bs([G()],Ws.prototype,"uploading",void 0),bs([G()],Ws.prototype,"success",void 0),bs([G()],Ws.prototype,"failure",void 0),bs([G()],Ws.prototype,"removing",void 0),bs([G()],Ws.prototype,"beforeRemove",void 0),bs([G()],Ws.prototype,"clearing",void 0),bs([G()],Ws.prototype,"progress",void 0),bs([G()],Ws.prototype,"change",void 0),bs([G()],Ws.prototype,"chunkSuccess",void 0),bs([G()],Ws.prototype,"chunkFailure",void 0),bs([G()],Ws.prototype,"chunkUploading",void 0),bs([G()],Ws.prototype,"canceling",void 0),bs([G()],Ws.prototype,"pausing",void 0),bs([G()],Ws.prototype,"resuming",void 0),Ws=bs([as],Ws);var _a=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const T5="e-apply",F$="e-cancel",N$="e-current",B$="e-ctrl-btn",_k="e-switch-ctrl-btn",rhe="e-disabled",ohe="e-value-switch-btn",H$="e-hide-hex-value",V$="e-hide-opacity",Ik="e-hide-switchable-value",YE="e-hide-value",hhe="e-hide-valueswitcher",jO="e-hsv-color",che="e-hsv-container",Tk="e-selected-value",D5="e-mode-switch-btn",z$="e-nocolor-item",j$="e-opacity-value",UO="e-palette",k5="e-color-palette",U$="e-color-picker",R5="e-preview-container",A5="e-previous",Dk="e-show-value",qO="e-selected",q$="e-split-preview",L5="e-tile",K1e_default=["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"];let yo=class extends Qs{constructor(e,t){super(e,t)}preRender(){const e=this.element;this.formElement=B(this.element,"form"),this.formElement&&k.add(this.formElement,"reset",this.formResetHandler,this),this.l10n=new jo("colorpicker",{Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"},this.locale),e.getAttribute("ejs-for")&&!e.getAttribute("name")&&e.setAttribute("name",e.id)}render(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||z([this.container.parentElement],V$),this.renderComplete()}initWrapper(){const e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(e,this.element),e.appendChild(this.element),Rt(this.element,{tabindex:"-1",spellcheck:"false"}),this.container=this.createElement("div",{className:"e-container"}),this.getWrapper().appendChild(this.container);let t=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&"Palette"===this.mode&&""===this.value&&(t="");const i=t.slice(0,7);f(this.initialInputValue)&&(this.initialInputValue=i),this.element.value=i,this.setProperties(this.enableOpacity?{value:t}:{value:i},!0),this.enableRtl&&e.classList.add("e-rtl"),this.cssClass&&z([e],this.cssClass.split(" ")),this.tileRipple=uc(this.container,{selector:"."+L5}),this.ctrlBtnRipple=uc(this.container,{selector:".e-btn"})}getWrapper(){return this.element.parentElement}createWidget(){"Palette"===this.mode?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),q.isDevice&&this.refreshPopupPos()}createSplitBtn(){const e=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(e),this.splitBtn=new lh({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,createPopupOnClick:this.createPopupOnClick,open:this.onOpen.bind(this),click:()=>{this.trigger("change",{currentValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},previousValue:{hex:null,rgba:null},value:this.value})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(e);const t=this.createElement("span",{className:q$});X(".e-selected-color",e).appendChild(t),t.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));const i=this.getPopupEle();if(z([i],"e-colorpicker-popup"),this.cssClass&&z([i],this.cssClass.split(" ")),q.isDevice){const s=this.getPopupInst();s.relateTo=document.body,s.position={X:"center",Y:"center"},s.targetType="container",s.collision={X:"fit",Y:"fit"},s.offsetY=4,i.style.zIndex=zw(this.splitBtn.element).toString()}this.bindCallBackEvent()}onOpen(){this.trigger("open",{element:this.container})}getPopupInst(){return za(this.getPopupEle(),fc)}bindCallBackEvent(){this.splitBtn.beforeOpen=e=>{const t=new g5;return this.trigger("beforeOpen",e,i=>{if(!i.cancel){const s=this.getPopupEle();s.style.top=st(0+pageYOffset),s.style.left=st(0+pageXOffset),s.style.display="block",this.createWidget(),s.style.display="",q.isDevice&&(this.modal=this.createElement("div"),this.modal.className="e-"+this.getModuleName()+" e-modal",this.modal.style.display="none",document.body.insertBefore(this.modal,s),document.body.className+=" e-colorpicker-overflow",this.modal.style.display="block",this.modal.style.zIndex=(Number(s.style.zIndex)-1).toString())}e.cancel=i.cancel,t.resolve(i)}),t},this.splitBtn.beforeClose=e=>{const t=new g5;return f(e.event)?t.resolve(e):this.trigger("beforeClose",{element:this.container,event:e.event,cancel:!1},s=>{q.isDevice&&e.event.target===this.modal&&(s.cancel=!0),s.cancel||this.onPopupClose(),e.cancel=s.cancel,t.resolve(s)}),t}}onPopupClose(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",X("."+q$,this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",W([this.container],[U$,k5]),q.isDevice&&this.modal&&(W([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)}createPalette(){if(Bi(this.container,[k5],[U$]),this.presetColors){const t=this.createElement("div",{className:"e-custom-palette"});this.appendElement(t);const i=Object.keys(this.presetColors);if(1===i.length)this.appendPalette(this.presetColors[i[0]],i[0],t);else for(let s=0,r=i.length;s<r;s++)this.appendPalette(this.presetColors[i[s]],i[s],t);bt(".e-row",t).length>10&&z([t],"e-palette-group")}else this.appendPalette(K1e_default,"default");"Palette"===this.mode&&!this.modeSwitcher&&this.noColor&&this.setNoColor();const e=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=st(this.container.children[0].offsetWidth+e+e),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)}firstPaletteFocus(){X("."+qO,this.container.children[0])||bt("."+UO,this.container)[0].focus()}appendPalette(e,t,i){const s=this.createElement("div",{className:UO,attrs:{tabindex:"0"}});let r,o,a;i?i.appendChild(s):this.appendElement(s);for(let l=0,h=e.length;l<h;l++)(0===l||l%this.columns==0)&&(r=this.createElement("div",{className:"e-row",attrs:{role:"presentation"}}),s.appendChild(r)),a=this.roundValue(e[l]).toLowerCase(),o=this.createElement("span",{className:L5,attrs:{role:"gridcell","aria-label":a,"aria-selected":"false",tabindex:"0"}}),this.trigger("beforeTileRender",{element:o,presetName:t,value:e[l]}),r.appendChild(o),this.value===a&&(this.addTileSelection(o),s.focus()),o.style.backgroundColor=this.convertToRgbString(this.hexToRgb(a))}setNoColor(){const e=this.container.querySelector(".e-row").children[0];e.classList.add(z$),this.value||(e.classList.add(qO),B(e,"."+UO).focus()),["aria-selected","aria-label"].forEach(t=>{e.removeAttribute(t)}),e.style.backgroundColor=""}appendElement(e,t=0){const i=this.container.children[t];i?this.container.insertBefore(e,i):this.container.appendChild(e)}addTileSelection(e){e.classList.add(qO),e.setAttribute("aria-selected","true")}createPicker(){Bi(this.container,[U$],[k5]);const e=this.createElement("div",{className:che});this.appendElement(e),e.appendChild(this.createElement("div",{className:jO}));const t=this.createElement("span",{className:"e-handler",attrs:{tabindex:"0"}});e.appendChild(t),null===this.value&&(this.value="#008000ff"),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()}setHsvContainerBg(e=this.hsv[0]){this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(e,100,100,1))}getHsvContainer(){return X("."+che,this.container)}setHandlerPosition(){const e=this.getDragHandler(),t=X("."+jO,this.container);e.style.left=st(this.enableRtl?t.offsetWidth*Math.abs(100-this.hsv[1])/100:t.offsetWidth*this.hsv[1]/100),e.style.top=st(t.offsetHeight*(100-this.hsv[2])/100)}createSlider(){const e=this.createElement("div",{className:"e-slider-preview"});this.appendElement(e,1),this.createPreview(e);const t=this.createElement("div",{className:"e-colorpicker-slider"});e.insertBefore(t,e.children[0]);let i=this.createElement("div",{className:"e-hue-slider"});t.appendChild(i),this.hueSlider=new Mr({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(i),this.enableOpacity&&(i=this.createElement("div",{className:"e-opacity-slider"}),t.appendChild(i),this.createOpacitySlider(i))}createOpacitySlider(e){this.opacitySlider=new Mr({value:100*this.rgb[3],min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(e);const t=this.createElement("div",{className:"e-opacity-empty-track"});e.appendChild(t),this.updateOpacitySliderBg()}updateOpacitySliderBg(){const e=this.enableRtl?"to left":"to right",t=X(".e-opacity-empty-track",this.opacitySlider.element);t&&(t.style.background="linear-gradient("+e+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)")}hueChange(e){this.hsv[0]=e.value,this.setHsvContainerBg(),this.convertToOtherFormat()}opacityChange(e){const t=e.value,i=this.rgbToHex(this.rgb);this.hsv[3]=t/100,this.rgb[3]=t/100;const s=this.rgbToHex(this.rgb);this.updateOpacityInput(t);const r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.triggerEvent(s,i,r)}updateOpacityInput(e){if(this.enableOpacity&&!this.getWrapper().classList.contains(YE)){const t=za(X("."+j$,this.container),Kw);t.value=e,t.dataBind()}}createPreview(e){const t=this.createElement("div",{className:R5});e.appendChild(t);let i=this.createElement("span",{className:"e-preview "+N$});t.appendChild(i);const s=this.convertToRgbString(this.rgb);i.style.backgroundColor=s,i=this.createElement("span",{className:"e-preview "+A5}),t.appendChild(i),i.style.backgroundColor=s}isPicker(){return!this.container.classList.contains(k5)}getPopupEle(){return this.container.parentElement}createNumericInput(e,t,i,s){const r=new Kw({value:t,placeholder:i,min:0,max:s,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:o=>{o.event&&this.inputHandler(o.event)}});r.createElement=this.createElement,r.appendTo(e)}createInput(){const e=this.isPicker(),t=this.getWrapper();if(e&&!t.classList.contains(YE)||!e&&t.classList.contains(Dk)){const i=this.createElement("div",{className:Tk});this.appendElement(i,e?2:1);const s=this.createElement("div",{className:"e-input-container"});if(i.appendChild(s),t.classList.contains(hhe)||this.appendValueSwitchBtn(i),!t.classList.contains(H$)){const r=this.createElement("input",{className:"e-hex",attrs:{maxlength:"7",spellcheck:"false"}});s.appendChild(r),Bt.createInput({element:r,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),Bt.setValue(this.value.slice(0,7),r),r.addEventListener("input",this.inputHandler.bind(this))}if(!t.classList.contains(Ik)){let r,o;this.isRgb?(r="RGB",o=this.rgb):(r="HSV",o=this.hsv);const a=["rh","gs","bv"];for(let l=0;l<3;l++)this.createNumericInput(s.appendChild(this.createElement("input",{className:"e-"+a[l]+"-value"})),o[l],r[l],255);this.enableOpacity&&this.appendOpacityValue(s)}}}appendOpacityValue(e){this.createNumericInput(e.appendChild(this.createElement("input",{className:j$})),100*this.rgb[3],"A",100)}appendValueSwitchBtn(e){const t=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn "+ohe});e.appendChild(t),this.isPicker()&&!this.getWrapper().classList.contains(Ik)&&t.addEventListener("click",this.formatSwitchHandler.bind(this))}createCtrlBtn(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);const e=this.createElement("div",{className:_k});if(this.container.appendChild(e),this.showButtons){const t=this.createElement("div",{className:B$});e.appendChild(t);const i=this.l10n.getConstant("Apply");t.appendChild(this.createElement("button",{innerHTML:i,className:"e-btn e-css e-flat e-primary e-small "+T5,attrs:{title:i}}));const s=this.l10n.getConstant("Cancel");t.appendChild(this.createElement("button",{innerHTML:s,className:"e-btn e-css e-flat e-small "+F$,attrs:{title:s}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}}appendModeSwitchBtn(){const e=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+D5,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});X("."+_k,this.container).insertBefore(e,X("."+B$,this.container))}createDragTooltip(){const e=new $n({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",beforeOpen:t=>{this.tooltipEle=t.element},animation:{open:{effect:"None"},close:{effect:"None"}}});e.createElement=this.createElement,e.appendTo(this.container),e.open(this.container),this.tooltipEle.style.zIndex=zw(this.tooltipEle).toString(),X(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))}getTooltipInst(){return za(this.container,$n)}setTooltipOffset(e){this.getTooltipInst().offsetY=e}toggleDisabled(e){e?this.getWrapper().classList.add(rhe):this.getWrapper().classList.remove(rhe),this.showButtons&&[].slice.call(bt(".e-btn",this.container)).forEach(t=>{e?Rt(t,{disabled:""}):t.removeAttribute("disabled")})}convertToRgbString(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""}convertToHsvString(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"}updateHsv(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()}convertToOtherFormat(e=!1){const t=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);const i=this.rgbToHex(this.rgb),s=this.convertToRgbString(this.rgb);this.updatePreview(s),this.updateInput(i),this.triggerEvent(i,t,s,e)}updateInput(e){const t=this.getWrapper();t.classList.contains(YE)||(t.classList.contains(H$)||Bt.setValue(e.substr(0,7),X(".e-hex",this.container)),t.classList.contains(Ik)||this.updateValue(this.isRgb?this.rgb:this.hsv,!1))}updatePreview(e){this.enableOpacity&&this.updateOpacitySliderBg(),X(".e-tip-transparent",this.tooltipEle).style.backgroundColor=e,X("."+R5+" ."+N$,this.container).style.backgroundColor=e,X("."+R5+" ."+A5,this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))}getDragHandler(){return X(".e-handler",this.container)}removeTileSelection(){[].slice.call(bt("."+qO,this.container.children[0])).forEach(t=>{t.classList.remove(qO),t.setAttribute("aria-selected","false")})}convertRgbToNumberArray(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map((t,i)=>3!==i?parseInt(t,10):parseFloat(t))}getValue(e,t){if(e||(e=this.value),t=t?t.toLowerCase():"hex","r"===e[0]){const i=this.convertRgbToNumberArray(e);if("hex"===t||"hexa"===t){const s=this.rgbToHex(i);return"hex"===t?s.slice(0,7):s}return"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===e[0]){const i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e));if("rgba"===t)return this.convertToRgbString(i);if("hex"===t||"hexa"===t){const s=this.rgbToHex(i);return"hex"===t?s.slice(0,7):s}return"rgb"===t?this.convertToRgbString(i.slice(0,3)):"null"}{e=this.roundValue(e);let i=this.hexToRgb(e);return("rgb"===t||"hsv"===t)&&(i=i.slice(0,3)),"rgba"===t||"rgb"===t?this.convertToRgbString(i):"hsva"===t||"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"hex"===t?e.slice(0,7):"a"===t?i[3].toString():"null"}}toggle(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)}getModuleName(){return"colorpicker"}getPersistData(){return this.addOnPersist(["value"])}wireEvents(){if(this.isPicker()){const e=this.getDragHandler();k.add(e,"keydown",this.pickerKeyDown,this),k.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),k.add(X("."+A5,this.container),"click",this.previewHandler,this)}else k.add(this.container,"click",this.paletteClickHandler,this),k.add(this.container,"keydown",this.paletteKeyDown,this)}formResetHandler(){this.value=this.initialInputValue,Rt(this.element,{value:this.initialInputValue})}addCtrlSwitchEvent(){const e=X("."+_k,this.container);e&&k.add(e,"click",this.btnClickHandler,this)}pickerKeyDown(e){switch(e.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,e);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,e);break;case 38:this.handlerDragPosition(2,1,e);break;case 40:this.handlerDragPosition(2,-1,e);break;case 13:{e.preventDefault();const t=this.rgbToHex(this.rgb);this.enterKeyHandler(t,e)}}}enterKeyHandler(e,t){this.triggerChangeEvent(e),this.inline||(this.closePopup(t),this.splitBtn.element.focus())}closePopup(e){this.trigger("beforeClose",{element:this.container,event:e,cancel:!1},i=>{i.cancel||(this.splitBtn.toggle(),this.onPopupClose())})}triggerChangeEvent(e){const t=e.slice(0,7);this.trigger("change",{currentValue:{hex:t,rgba:this.convertToRgbString(this.rgb)},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?e:t}),this.setProperties(this.enableOpacity?{value:e}:{value:t},!0),this.element.value=t||"#000000"}handlerDragPosition(e,t,i){i.preventDefault(),this.hsv[e]+=t*(i.ctrlKey?1:3),this.hsv[e]<0&&(this.hsv[e]=0),this.updateHsv(),this.convertToOtherFormat(!0)}handlerDown(e){e.preventDefault(),"mousedown"===e.type?(this.clientX=Math.abs(e.pageX-pageXOffset),this.clientY=Math.abs(e.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(e.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(e.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(),this.getDragHandler().focus(),k.add(document,"mousemove touchmove",this.handlerMove,this),k.add(document,"mouseup touchend",this.handlerEnd,this)}handlerMove(e){let t,i;"touchmove"!==e.type&&e.preventDefault(),"mousemove"===e.type?(t=Math.abs(e.pageX-pageXOffset),i=Math.abs(e.pageY-pageYOffset)):(t=Math.abs(e.changedTouches[0].pageX-pageXOffset),i=Math.abs(e.changedTouches[0].pageY-pageYOffset)),this.setHsv(t,i);const s=this.getDragHandler();this.updateHsv(),this.convertToOtherFormat(),this.getTooltipInst().refresh(s),this.tooltipEle.style.transform||(Math.abs(this.clientX-t)>8||Math.abs(this.clientY-i)>8)&&(X("."+jO,this.container).style.cursor="pointer",s.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",s.classList.add("e-hide-handler"))}setHsv(e,t){const i=X("."+jO,this.container),s=i.getBoundingClientRect();e=this.enableRtl?e>s.right?0:Math.abs(e-s.right):e>s.left?Math.abs(e-s.left):0,t=t>s.top?Math.abs(t-s.top):0,this.hsv[2]=Math.round(10*Number(100*(i.offsetHeight-Math.max(0,Math.min(i.offsetHeight,t-i.offsetTop)))/i.offsetHeight))/10,this.hsv[1]=Math.round(10*Number(100*Math.max(0,Math.min(i.offsetWidth,e-i.offsetLeft))/i.offsetWidth))/10}handlerEnd(e){"touchend"!==e.type&&e.preventDefault(),k.remove(document,"mousemove touchmove",this.handlerMove),k.remove(document,"mouseup touchend",this.handlerEnd);const t=this.getDragHandler();X("."+jO,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",t.classList.remove("e-hide-handler")),!this.inline&&!this.showButtons&&this.closePopup(e)}btnClickHandler(e){const t=e.target;B(t,"."+D5)?(e.stopPropagation(),this.switchToPalette()):(t.classList.contains(T5)||t.classList.contains(F$))&&this.ctrlBtnClick(t,e)}switchToPalette(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),te(X(".e-slider-preview",this.container)),this.getWrapper().classList.contains(YE)||Yt(X("."+Tk,this.container)),te(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})}refreshPopupPos(){if(!this.inline){const e=this.getPopupEle();e.style.left=st(0+pageXOffset),e.style.top=st(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}}formatSwitchHandler(){this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)}updateValue(e,t,i,s){const r=["e-rh-value","e-gs-value","e-bv-value"];let o;for(let a=0,l=r.length;a<l;a++)o=za(X("."+r[a],this.container),Kw),o.value=Math.round(e[a]),t&&(o.placeholder=r[a].substr(i,1).toUpperCase(),o.max=s?s[a]:255),o.dataBind()}previewHandler(e){const t=e.target,i=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(t.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);const s=this.rgbToHex(this.rgb),r=this.rgbToHsv.apply(this,this.rgb);r[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:r[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(r[0]),this.enableOpacity&&r[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:100*r[3]},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=r,this.setHandlerPosition(),this.updateInput(s),X("."+R5+" ."+N$,this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(s,i,this.convertToRgbString(this.rgb))}paletteClickHandler(e){e.preventDefault();const t=e.target;if(t.classList.contains(L5)){if(this.removeTileSelection(),this.addTileSelection(t),t.classList.contains(z$))this.noColorTile();else{const i=t.getAttribute("aria-label"),s=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(i)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Dk)&&this.updateInput(i),this.triggerEvent(i,s,this.convertToRgbString(this.rgb))}!this.inline&&!this.showButtons&&this.closePopup(e)}else B(t,"."+D5)?this.switchToPicker():t.classList.contains(T5)||t.classList.contains(F$)?this.ctrlBtnClick(t,e):this.getWrapper().classList.contains(Dk)&&B(t,"."+ohe)&&this.formatSwitchHandler()}noColorTile(e=!1){const t=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",t,"",e)}switchToPicker(){const e=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(bt("."+UO,this.container)).forEach(i=>{te(i)}),e.classList.contains(Dk)&&te(X("."+Tk,this.container)),this.container.style.width="";const t=X(".e-custom-palette",this.container);this.presetColors&&Yt(t),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})}ctrlBtnClick(e,t){if(e.classList.contains(T5)){const i=this.rgbToHex(this.rgb);this.triggerChangeEvent(i)}this.inline||(this.closePopup(t),this.splitBtn.element.focus())}paletteKeyDown(e){const t=e.target;if(!t.classList.contains(UO))return;let i,s;const r=[].slice.call(bt("."+L5,t)),o=r.filter(a=>a.classList.contains("e-selected")).pop();switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),i=o?r[this.tilePosition(r,o,this.enableRtl?-1:1)]:r[this.enableRtl?r.length-1:0],this.keySelectionChanges(i);break;case 37:e.preventDefault(),i=o?r[this.tilePosition(r,o,this.enableRtl?1:-1)]:r[this.enableRtl?0:r.length-1],this.keySelectionChanges(i);break;case 38:e.preventDefault(),s=o?this.tilePosition(r,o,-this.columns):0,i=r[s]?r[s]:r[s-this.columns],this.keySelectionChanges(i);break;case 40:e.preventDefault(),s=o?this.tilePosition(r,o,this.columns):r.length-1,r[s]||(s%=r.length,s+=r[r.length-1].parentElement.childElementCount),i=r[s],this.keySelectionChanges(i);break;case 13:if(e.preventDefault(),o){const a=o.getAttribute("aria-label");this.enterKeyHandler(a||"",e)}}}keySelectionChanges(e){if(this.removeTileSelection(),this.addTileSelection(e),e.classList.contains(z$))this.noColorTile(!0);else{const t=e.getAttribute("aria-label"),i=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(t),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Dk)&&this.updateInput(t),this.triggerEvent(t,i,this.convertToRgbString(this.rgb),!0)}}tilePosition(e,t,i){const s=(e=Array.prototype.slice.call(e)).length,r=this.columns-e[s-1].parentElement.childElementCount;let o=e.indexOf(t);return o+=i,o<0?o+=s+r:o%=s+r,o}inputHandler(e){const t=e.target;if(!t.value.length)return;let i,s;switch(X(".e-float-text",t.parentElement).textContent){case"HEX":{let o="";if(("#"===t.value[0]&&5!==t.value.length||"#"!==t.value[0]&&4!==t.value.length)&&(o=this.roundValue(t.value)),9!==o.length)return;s=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(o+o.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),s,t.value);break}case"R":this.rgb[0]!==Number(t.value)&&(s=this.rgbToHex(this.rgb),this.rgb[0]=Number(t.value),i=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(i,s));break;case"G":this.rgb[1]!==Number(t.value)&&(s=this.rgbToHex(this.rgb),this.rgb[1]=Number(t.value),i=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(i,s));break;case"B":this.rgb[2]!==Number(t.value)&&(s=this.rgbToHex(this.rgb),this.rgb[2]=Number(t.value),i=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(i,s));break;case"H":this.hueSlider.value=Number(t.value);break;case"S":this.hsv[1]!==Number(t.value)&&(this.hsv[1]=Number(t.value),this.updateHsv(),this.convertToOtherFormat());break;case"V":this.hsv[2]!==Number(t.value)&&(this.hsv[2]=Number(t.value),this.updateHsv(),this.convertToOtherFormat());break;case"A":this.opacitySlider.value=Number(t.value)}}inputValueChange(e,t,i){e[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:e[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(e[0])),this.hsv=e;const s=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(i||s);const r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.triggerEvent(s,t,r)}triggerEvent(e,t,i,s=!1){const r=e.slice(0,7);this.showButtons||s?this.trigger("select",{currentValue:{hex:r,rgba:i},previousValue:{hex:t.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(t))}}):(this.trigger("change",{currentValue:{hex:r,rgba:i},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:e}),this.setProperties(this.enableOpacity?{value:e}:{value:r},!0),this.element.value=r||"#000000")}destroy(){const e=this.getWrapper();super.destroy(),["tabindex","spellcheck"].forEach(t=>{this.element.removeAttribute(t)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&te(this.element.nextElementSibling),e&&(e.parentElement.insertBefore(this.element,e),te(e)),this.container=null,this.formElement&&k.remove(this.formElement,"reset",this.formResetHandler)}destroyOtherComp(){if(this.isPicker()){this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;const e=this.getTooltipInst();e.close(),e.destroy(),this.tooltipEle=null}}isPopupOpen(){return this.getPopupEle().classList.contains("e-popup-open")}unWireEvents(){if(this.isPicker()){const e=this.getDragHandler();k.remove(e,"keydown",this.pickerKeyDown),k.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&k.remove(X("."+_k,this.container),"click",this.btnClickHandler),k.remove(X("."+A5,this.container),"click",this.previewHandler)}else k.remove(this.container,"click",this.paletteClickHandler),k.remove(this.container,"keydown",this.paletteKeyDown)}roundValue(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);let t=e.length;if(4===t&&(e+="f",t=5),5===t){let i="";for(let s=1,r=e.length;s<r;s++)i+=e.charAt(s)+e.charAt(s);e="#"+i,t=9}return 7===t&&(e+="ff"),e}hexToRgb(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));const t=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);const i=parseInt(e,16),s=[];return s.push(i>>16&255),s.push(i>>8&255),s.push(255&i),s.push(t),s}rgbToHsv(e,t,i,s){if(this.rgb&&!this.rgb.length)return[];e/=255,t/=255,i/=255;const r=Math.max(e,t,i),o=Math.min(e,t,i);let a;const l=r,h=r-o,c=0===r?0:h/r;if(r===o)a=0;else{switch(r){case e:a=(t-i)/h+(t<i?6:0);break;case t:a=(i-e)/h+2;break;case i:a=(e-t)/h+4}a/=6}const m=[Math.round(360*a),Math.round(1e3*c)/10,Math.round(1e3*l)/10];return f(s)||m.push(s),m}hsvToRgb(e,t,i,s){let r,o,a;if(i/=100,0==(t/=100))return r=o=a=i,[Math.round(255*r),Math.round(255*o),Math.round(255*a),s];e/=60;const l=Math.floor(e),h=e-l,c=i*(1-t),m=i*(1-t*h),b=i*(1-t*(1-h));switch(l){case 0:r=i,o=b,a=c;break;case 1:r=m,o=i,a=c;break;case 2:r=c,o=i,a=b;break;case 3:r=c,o=m,a=i;break;case 4:r=b,o=c,a=i;break;default:r=i,o=c,a=m}const v=[Math.round(255*r),Math.round(255*o),Math.round(255*a)];return f(s)||v.push(s),v}rgbToHex(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(f(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""}hex(e){return("0"+e.toString(16)).slice(-2)}changeModeSwitcherProp(e){const t=X("."+_k,this.container);e?t?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):t&&(this.showButtons?te(X("."+D5,t)):Yt(t))}changeShowBtnProps(e){const t=X("."+_k,this.container);e?(t&&Yt(t),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?te(X("."+B$,t)):Yt(t)}changeValueProp(e){if(this.isPicker())this.rgb=this.hexToRgb(e),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),te(B(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(e),4===this.rgb.length&&this.updateOpacityInput(100*this.rgb[3]);else{this.removeTileSelection();const t=this.container.querySelector('span[aria-label="'+this.roundValue(e)+'"]');t&&this.addTileSelection(t)}}setInputEleProps(){Yt(X("."+Tk,this.container)),this.createInput()}changeDisabledProp(e){this.isPicker()&&(this.hueSlider.enabled=!e,this.opacitySlider.enabled=!e,this.setInputEleProps()),e?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())}changeCssClassProps(e,t){const i=this.getWrapper(),s=this.getPopupEle();t&&W([i,s],t.split(" ")),e&&z([i,s],e.split(" "))}changeRtlProps(e){e?z([this.getWrapper()],"e-rtl"):W([this.getWrapper()],"e-rtl")}changePaletteProps(){te(this.container.children[0]),this.container.style.width="",this.createPalette()}changeOpacityProps(e){const t=this.getWrapper();e?(W([this.container.parentElement],V$),this.createOpacitySlider(X(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),!t.classList.contains(YE)&&!t.classList.contains(Ik)&&this.appendOpacityValue(X(".e-input-container",this.container))):(z([this.container.parentElement],V$),this.opacitySlider.destroy(),Yt(this.opacitySlider.element),this.opacitySlider=null,!t.classList.contains(YE)&&!t.classList.contains(Ik)&&Yt(X("."+j$,this.container).parentElement))}onPropertyChanged(e,t){if(!f(e.value)){const i=this.roundValue(e.value);if(9===i.length){this.element.value=this.roundValue(i).slice(0,7);const s=this.splitBtn&&X("."+q$,this.splitBtn.element);s&&(s.style.backgroundColor=this.convertToRgbString(this.hexToRgb(e.value)))}else this.value=t.value}if(!this.inline&&f(e.inline)&&(this.splitBtn.setProperties(PO(e,["disabled","enableRtl"])),!this.isPopupOpen()))return this.changeCssClassProps(e.cssClass,t.cssClass),void this.changeRtlProps(e.enableRtl);for(const i of Object.keys(e))switch(i){case"inline":e.inline?(this.getWrapper().appendChild(this.container),this.splitBtn.destroy(),te(this.element.nextElementSibling),this.container.children.length||this.createWidget()):(this.destroyOtherComp(),this.unWireEvents(),this.container.innerHTML="",this.createSplitBtn());break;case"cssClass":{this.changeCssClassProps(e.cssClass,t.cssClass);let s=e.cssClass.split(" ").concat(t.cssClass.split(" "));s=s.reduce((o,a)=>(o.indexOf(a)<0&&o.push(a),o),[]);let r=0;s.forEach(o=>{0===r&&(o===YE||o===hhe||o===Dk||o===H$||o===Ik)&&(X("."+Tk,this.container)&&Yt(X("."+Tk,this.container)),this.createInput(),r++)});break}case"enableRtl":this.isPicker()&&(this.hueSlider.enableRtl=e.enableRtl,this.enableOpacity&&(this.opacitySlider.enableRtl=e.enableRtl),this.setInputEleProps()),this.changeRtlProps(e.enableRtl);break;case"disabled":this.changeDisabledProp(e.disabled);break;case"value":this.value!==t.value&&this.changeValueProp(e.value);break;case"showButtons":this.changeShowBtnProps(e.showButtons);break;case"mode":"Picker"===e.mode?this.switchToPicker():this.switchToPalette();break;case"modeSwitcher":this.changeModeSwitcherProp(e.modeSwitcher);break;case"columns":case"presetColors":this.isPicker()||this.changePaletteProps();break;case"noColor":e.noColor?"Palette"===this.mode&&!this.modeSwitcher&&this.setNoColor():this.changePaletteProps();break;case"enableOpacity":this.changeOpacityProps(e.enableOpacity)}}focusIn(){this.element.parentElement.focus()}};_a([_("#008000ff")],yo.prototype,"value",void 0),_a([_("")],yo.prototype,"cssClass",void 0),_a([_(!1)],yo.prototype,"disabled",void 0),_a([_("Picker")],yo.prototype,"mode",void 0),_a([_(!0)],yo.prototype,"modeSwitcher",void 0),_a([_(null)],yo.prototype,"presetColors",void 0),_a([_(!0)],yo.prototype,"showButtons",void 0),_a([_(10)],yo.prototype,"columns",void 0),_a([_(!1)],yo.prototype,"inline",void 0),_a([_(!1)],yo.prototype,"noColor",void 0),_a([_(!1)],yo.prototype,"enablePersistence",void 0),_a([_(!0)],yo.prototype,"enableOpacity",void 0),_a([_(!1)],yo.prototype,"createPopupOnClick",void 0),_a([G()],yo.prototype,"select",void 0),_a([G()],yo.prototype,"change",void 0),_a([G()],yo.prototype,"beforeTileRender",void 0),_a([G()],yo.prototype,"beforeOpen",void 0),_a([G()],yo.prototype,"open",void 0),_a([G()],yo.prototype,"beforeClose",void 0),_a([G()],yo.prototype,"beforeModeSwitch",void 0),_a([G()],yo.prototype,"onModeSwitch",void 0),_a([G()],yo.prototype,"created",void 0),yo=_a([as],yo);var Ll=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const dhe="e-input-focus",W$=["title","style","class"];let Uo=class extends Qs{constructor(e,t){super(e,t),this.previousValue=null,this.isAngular=!1,this.isHiddenInput=!1,this.isForm=!1,this.inputPreviousValue=null,this.isVue=!1,this.textboxOptions=e}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"floatLabelType":Bt.removeFloating(this.textboxWrapper),Bt.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":Bt.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":Bt.setWidth(e.width,this.textboxWrapper.container);break;case"value":{const s=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=s,Bt.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(f(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&f(this.preventChange))&&this.raiseChangeEvent()}break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),Bt.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":Bt.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),Bt.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":"TEXTAREA"!==this.respectiveElement.tagName&&(Bt.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent());break;case"enableRtl":Bt.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":Bt.setPlaceholder(this.placeholder,this.respectiveElement);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"locale":this.globalize=new mp(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),Bt.setPlaceholder(this.placeholder,this.respectiveElement)}}getModuleName(){return"textbox"}isBlank(e){return!e||/^\s*$/.test(e)}preRender(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=B(this.element,"form"),f(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){const t=U("ej2_instances",this.element),i=this.createElement(this.multiline?"textarea":"input");let s=0;for(;s<this.element.attributes.length;s++){const r=this.element.attributes[s].nodeName;"id"!==r&&(i.setAttribute(r,this.element.attributes[s].nodeValue),i.innerHTML=this.element.innerHTML,"name"===r&&this.element.removeAttribute("name"))}this.element.appendChild(i),this.element=i,zt("ej2_instances",t,this.element)}if(this.updateHTMLAttrToElement(),this.checkAttributes(!1),(f(this.textboxOptions)||void 0===this.textboxOptions.value)&&""!==this.element.value&&this.setProperties({value:this.element.value},!0),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),this.element.setAttribute("role","textbox"),this.globalize=new mp(this.locale),this.l10n=new jo("textbox",{placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",Tn("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",Tn("textarea"));const t=["placeholder","disabled","value","readonly","type","autocomplete"];for(let i=0;i<this.element.attributes.length;i++){const s=this.element.attributes[i].nodeName;this.element.hasAttribute(s)&&W$.indexOf(s)<0&&"id"!==s&&"type"!==s&&"e-mappinguid"!==s&&(this.textarea.setAttribute(s,this.element.attributes[i].nodeValue),t.indexOf(s)<0&&(this.element.removeAttribute(s),i--))}}}checkAttributes(e){const t=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];for(const i of t)if(!f(this.element.getAttribute(i)))switch(i){case"disabled":if(f(this.textboxOptions)||void 0===this.textboxOptions.enabled||e){const s=!("disabled"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i));this.setProperties({enabled:s},!e)}break;case"readonly":if(f(this.textboxOptions)||void 0===this.textboxOptions.readonly||e){const s="readonly"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({readonly:s},!e)}break;case"placeholder":(f(this.textboxOptions)||void 0===this.textboxOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":(f(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||e)&&this.setProperties({autocomplete:"off"===this.element.autocomplete?"off":"on"},!e);break;case"value":(f(this.textboxOptions)||void 0===this.textboxOptions.value||e)&&this.setProperties({value:this.element.value},!e);break;case"type":(f(this.textboxOptions)||void 0===this.textboxOptions.type||e)&&this.setProperties({type:this.element.type},!e)}}render(){let e=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(e=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=Bt.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),f(this.value)||(Bt.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),f(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:!f(this.textboxOptions)&&void 0!==this.textboxOptions.autocomplete&&this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,Bt.setWidth(this.width,this.textboxWrapper.container),this.renderComplete()}updateHTMLAttrToWrapper(){if(!f(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(W$.indexOf(e)>-1)if("class"===e){const t=this.getInputValidClassList(this.htmlAttributes[e]);""!==t&&z([this.textboxWrapper.container],t.split(" "))}else if("style"===e){let t=this.textboxWrapper.container.getAttribute(e);t=f(t)?this.htmlAttributes[e]:t+this.htmlAttributes[e],this.textboxWrapper.container.setAttribute(e,t)}else this.textboxWrapper.container.setAttribute(e,this.htmlAttributes[e])}updateHTMLAttrToElement(){if(!f(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))W$.indexOf(e)<0&&this.element.setAttribute(e,this.htmlAttributes[e])}updateCssClass(e,t){Bt.setCssClass(this.getInputValidClassList(e),[this.textboxWrapper.container],this.getInputValidClassList(t))}getInputValidClassList(e){let t=e;return!f(e)&&""!==e&&(t=e.replace(/\s+/g," ").trim()),t}setInitialValue(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)}wireEvents(){k.add(this.respectiveElement,"focus",this.focusHandler,this),k.add(this.respectiveElement,"blur",this.focusOutHandler,this),k.add(this.respectiveElement,"input",this.inputHandler,this),k.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&k.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!f(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&k.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)}animationHandler(){this.textboxWrapper.container.classList.add("e-valid-input");const e=this.textboxWrapper.container.querySelector(".e-float-text");f(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))}resetValue(e){const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,this.isProtectedOnChange=t}resetForm(){if(this.resetValue(this.isAngular?"":this.initialValue),!f(this.textboxWrapper)){const e=this.textboxWrapper.container.querySelector(".e-float-text");f(e)||(f(this.initialValue)||""===this.initialValue?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):""!==this.initialValue&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}}focusHandler(e){this.trigger("focus",{container:this.textboxWrapper.container,event:e,value:this.value})}focusOutHandler(e){(null!==this.previousValue||null!==this.value||""!==this.respectiveElement.value)&&this.previousValue!==this.respectiveElement.value&&this.raiseChangeEvent(e,!0),this.trigger("blur",{container:this.textboxWrapper.container,event:e,value:this.value})}inputHandler(e){const i={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",i),e.stopPropagation()}changeHandler(e){this.setProperties({value:this.respectiveElement.value},!0),this.raiseChangeEvent(e,!0),e.stopPropagation()}raiseChangeEvent(e,t){const i={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:t||!1,isInteracted:t||!1};this.preventChange=!1,this.trigger("change",i),this.previousValue=this.value,"INPUT"===this.element.tagName&&this.multiline&&"mozilla"===q.info.name&&(this.element.value=this.respectiveElement.value)}bindClearEvent(){this.showClearButton&&"TEXTAREA"!==this.respectiveElement.tagName&&(this.enabled?k.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):k.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))}resetInputHandler(e){e.preventDefault(),(!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear"))&&(Bt.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0),this.trigger("input",{event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container}),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0))}unWireEvents(){k.remove(this.respectiveElement,"focus",this.focusHandler),k.remove(this.respectiveElement,"blur",this.focusOutHandler),k.remove(this.respectiveElement,"input",this.inputHandler),k.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&k.remove(this.formElement,"reset",this.resetForm),!f(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&k.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)}destroy(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&(te(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-placeholder","aria-disabled","aria-readonly","aria-labelledby"]),f(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),te(this.textboxWrapper.container)),this.textboxWrapper=null,super.destroy()}addIcon(e,t){Bt.addIcon(e,t,this.textboxWrapper.container,this.respectiveElement,this.createElement)}getPersistData(){return this.addOnPersist(["value"])}addAttributes(e){for(const t of Object.keys(e))"disabled"===t?(this.setProperties({enabled:!1},!0),Bt.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===t?(this.setProperties({readonly:!0},!0),Bt.setReadonly(this.readonly,this.respectiveElement)):"class"===t?this.respectiveElement.classList.add(e[t]):"placeholder"===t?(this.setProperties({placeholder:e[t]},!0),Bt.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.setAttribute(t,e[t])}removeAttributes(e){for(const t of e)"disabled"===t?(this.setProperties({enabled:!0},!0),Bt.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===t?(this.setProperties({readonly:!1},!0),Bt.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===t?(this.setProperties({placeholder:null},!0),Bt.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(t)}focusIn(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&z([this.textboxWrapper.container],[dhe]))}focusOut(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&W([this.textboxWrapper.container],[dhe]))}};Ll([_("text")],Uo.prototype,"type",void 0),Ll([_(!1)],Uo.prototype,"readonly",void 0),Ll([_(null)],Uo.prototype,"value",void 0),Ll([_("Never")],Uo.prototype,"floatLabelType",void 0),Ll([_("")],Uo.prototype,"cssClass",void 0),Ll([_(null)],Uo.prototype,"placeholder",void 0),Ll([_("on")],Uo.prototype,"autocomplete",void 0),Ll([_({})],Uo.prototype,"htmlAttributes",void 0),Ll([_(!1)],Uo.prototype,"multiline",void 0),Ll([_(!0)],Uo.prototype,"enabled",void 0),Ll([_(!1)],Uo.prototype,"showClearButton",void 0),Ll([_(!1)],Uo.prototype,"enablePersistence",void 0),Ll([_(null)],Uo.prototype,"width",void 0),Ll([G()],Uo.prototype,"created",void 0),Ll([G()],Uo.prototype,"destroyed",void 0),Ll([G()],Uo.prototype,"change",void 0),Ll([G()],Uo.prototype,"blur",void 0),Ll([G()],Uo.prototype,"focus",void 0),Ll([G()],Uo.prototype,"input",void 0),Uo=Ll([as],Uo);class Z1e extends Qs{constructor(){super(...arguments),this.minDistance=5,this.previous=0,this.interval=30,this.timeout=null,this.isSignatureEmpty=!0,this.backgroundLoaded=null,this.clearArray=[],this.isBlazor=!1,this.isResponsive=!1}initialize(e,t){this.element=e,this.canvasContext=this.element.getContext("2d"),this.canvasContext.canvas.tabIndex=0,t&&(this.dotnetRef=t,this.isBlazor=!0,this.signatureValue&&this.loadPersistedSignature()),this.setHTMLProperties(),f(this.signatureValue)&&this.updateSnapCollection(!0),this.wireEvents(),this.isBlazor||this.trigger("created",null)}wireEvents(){!f(this.pointColl)||this.isReadOnly||this.disabled?this.pointColl&&(k.add(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler,this),k.add(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler,this),k.add(document,"mouseup",this.mouseUpHandler,this)):(k.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this),k.add(this.canvasContext.canvas,"keydown",this.keyboardHandler,this),window.addEventListener("resize",this.resizeHandler.bind(this)))}unwireEvents(e){"mouseup"===e||"touchend"===e?(k.remove(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler),k.remove(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler),k.remove(document,"mouseup",this.mouseUpHandler)):(k.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler),k.remove(this.canvasContext.canvas,"keydown",this.keyboardHandler),window.removeEventListener("resize",this.resizeHandler))}setHTMLProperties(){150===this.element.height&&300===this.element.width&&(this.element.height=this.element.offsetHeight,this.element.width=this.element.offsetWidth,this.isResponsive=!0),this.canvasContext.scale(1,1),this.canvasContext.fillStyle=this.strokeColor,this.backgroundImage?(this.canvasContext.canvas.style.backgroundImage="url("+this.backgroundImage+")",this.canvasContext.canvas.style.backgroundRepeat="no-repeat"):this.backgroundColor&&(this.canvasContext.canvas.style.backgroundColor=this.backgroundColor)}mouseDownHandler(e){(1===e.buttons||2===e.buttons||"touchstart"===e.type)&&("touchstart"===e.type&&(e.preventDefault(),e.stopPropagation()),this.beginStroke(e),this.wireEvents())}mouseMoveHandler(e){(1===e.buttons||2===e.buttons||"touchmove"===e.type)&&("touchmove"===e.type&&(e.preventDefault(),e.stopPropagation()),this.interval?this.updateStrokeWithThrottle(e):this.updateStroke(e))}mouseUpHandler(e){"touchstart"===e.type&&(e.preventDefault(),e.stopPropagation()),this.endDraw(),this.updateSnapCollection(),this.unwireEvents(e.type),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","mouseUp"):this.trigger("change",{actionName:"strokeUpdate"}),this.signatureValue=this.snapColl[this.incStep]}keyboardHandler(e){const t={fileName:"Signature",type:"Png",cancel:!1};switch(e.key){case"Delete":this.clear();break;case e.ctrlKey&&"s":this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","beforeSave"):this.trigger("beforeSave",t,i=>{t.cancel||this.save(i.type,i.fileName)}),e.preventDefault(),e.stopImmediatePropagation();break;case e.ctrlKey&&"z":this.undo();break;case e.ctrlKey&&"y":this.redo()}}resizeHandler(){const e=this;this.isResponsive&&(this.canvasContext.canvas.width=this.element.offsetWidth,this.canvasContext.canvas.height=this.element.offsetHeight,this.canvasContext.scale(1,1));const t=new Image;t.src=this.snapColl[this.incStep],t.onload=()=>{e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height)}}beginStroke(e){this.refresh(),this.updateStroke(e)}updateStroke(e){const t=this.createPoint(e);this.addPoint(t)}updateStrokeWithThrottle(e){const t=Date.now(),i=this.interval-(t-this.previous);this.storedArgs=e,i<=0||i>this.interval?(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.previous=t,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)):this.timeout||(this.timeout=window.setTimeout(this.delay.bind(this),i))}delay(){this.previous=Date.now(),this.timeout=null,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)}createPoint(e){const t=this.canvasContext.canvas.getBoundingClientRect();return"mousedown"===e.type||"mousemove"===e.type?this.point(e.clientX-t.left,e.clientY-t.top,(new Date).getTime()):this.point(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top,(new Date).getTime())}point(e,t,i){return this.pointX=e,this.pointY=t,this.time=i||(new Date).getTime(),{x:this.pointX,y:this.pointY,time:this.time}}addPoint(e){const t=this.pointColl;let i,s;const r=t.length>0&&t[t.length-1],o=!!r&&this.distanceTo(r)<=this.minDistance;(!r||!r||!o)&&(t.push(e),t.length>2&&(3===t.length&&t.unshift(t[0]),i=this.calculateCurveControlPoints(t[0],t[1],t[2]).controlPoint2,s=this.calculateCurveControlPoints(t[1],t[2],t[3]).controlPoint1,this.startPoint=t[1],this.controlPoint1=i,this.controlPoint2=s,this.endPoint=t[2],this.startDraw(),t.shift()))}startDraw(){let e;e=this.pointVelocityCalc(this.startPoint),e=this.velocity*e+(1-this.velocity)*this.lastVelocity;const t=Math.max(this.maxStrokeWidth/(e+1),this.minStrokeWidth);this.curveDraw(this.lastWidth,t),this.lastVelocity=e,this.lastWidth=t}endDraw(){const t=this.pointColl[0];!(this.pointColl.length>2)&&t&&this.strokeDraw(t)}curveDraw(e,t){const i=this.canvasContext;let s,r,o,a,l,h,c,m,b,v;const w=t-e,E=this.bezierLengthCalc(),D=2*Math.ceil(E);for(i.beginPath(),r=0;r<D;r++)o=r/D,a=o*o,l=a*o,h=1-o,c=h*h,m=c*h,b=m*this.startPoint.x,b+=3*c*o*this.controlPoint1.x,b+=3*h*a*this.controlPoint2.x,b+=l*this.endPoint.x,v=m*this.startPoint.y,v+=3*c*o*this.controlPoint1.y,v+=3*h*a*this.controlPoint2.y,v+=l*this.endPoint.y,s=Math.min(e+l*w,this.maxStrokeWidth),this.arcDraw(b,v,s);i.closePath(),i.fill(),this.isSignatureEmpty=!1}strokeDraw(e){const t=this.canvasContext,i=(this.minStrokeWidth+this.maxStrokeWidth)/2;t.beginPath(),this.arcDraw(e.x,e.y,i),t.closePath(),t.fill(),this.isSignatureEmpty=!1}arcDraw(e,t,i){const s=this.canvasContext;s.moveTo(e,t),s.arc(e,t,i,0,2*Math.PI,!1)}calculateCurveControlPoints(e,t,i){const s=e.x-t.x,r=e.y-t.y,o=t.x-i.x,a=t.y-i.y,l_x=(e.x+t.x)/2,l_y=(e.y+t.y)/2,h_x=(t.x+i.x)/2,h_y=(t.y+i.y)/2,c=Math.sqrt(s*s+r*r),m=Math.sqrt(o*o+a*a),w=m/(c+m),D=t.x-(h_x+(l_x-h_x)*w),L=t.y-(h_y+(l_y-h_y)*w);return{controlPoint1:this.point(l_x+D,l_y+L,0),controlPoint2:this.point(h_x+D,h_y+L,0)}}bezierLengthCalc(){let i,s,r,o,a,l,h,c,t=0;for(i=0;i<=10;i++)s=i/10,r=this.bezierPointCalc(s,this.startPoint.x,this.controlPoint1.x,this.controlPoint2.x,this.endPoint.x),o=this.bezierPointCalc(s,this.startPoint.y,this.controlPoint1.y,this.controlPoint2.y,this.endPoint.y),i>0&&(h=r-a,c=o-l,t+=Math.sqrt(h*h+c*c)),a=r,l=o;return t}bezierPointCalc(e,t,i,s,r){return t*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*s*(1-e)*e*e+r*e*e*e}pointVelocityCalc(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}distanceTo(e){return Math.sqrt(Math.pow(this.pointX-e.x,2)+Math.pow(this.pointY-e.y,2))}isRead(e){e?k.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler):this.disabled||k.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this)}enableOrDisable(e){this.disabled=e,e?(this.reDraw("0.5"),this.isRead(!0)):(this.reDraw("1"),this.isRead(!1))}reDraw(e){const t=this.canvasContext.getImageData(0,0,this.element.width,this.element.height);this.canvasContext.clearRect(0,0,this.element.width,this.element.height),this.element.style.opacity=e,this.canvasContext.putImageData(t,0,0)}updateSnapCollection(e){if(f(this.incStep)?(this.incStep=-1,this.incStep++,this.snapColl=[],this.clearArray=[]):this.incStep++,this.incStep<this.snapColl.length&&(this.snapColl.length=this.incStep),this.incStep>0){const t=this.createElement("canvas",{className:"e-"+this.getModuleName()+"-wrapper"}),i=t.getContext("2d");t.width=this.canvasContext.canvas.width,t.height=this.canvasContext.canvas.height,i.drawImage(this.canvasContext.canvas,0,0,t.width,t.height),this.snapColl.push(t.toDataURL())}else this.snapColl.push(this.canvasContext.canvas.toDataURL());e&&this.clearArray.push(this.incStep)}setBackgroundImage(e){const t=this,i=new Image;i.crossOrigin="anonymous",i.src=e,i.onload=()=>{t.canvasContext.globalCompositeOperation="source-over",t.canvasContext.drawImage(i,0,0,t.element.width,t.element.height),t.updateSnapCollection(),t.saveBackground(!0)},this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height)}setBackgroundColor(e){const t=this.canvasContext;let i,s;for(t.strokeStyle=e,i=1;i<=t.canvas.width;i++)for(s=1;s<=t.canvas.height;s++)t.strokeRect(0,0,i,s);this.updateSnapCollection()}loadPersistedSignature(){if(f(this.signatureValue))return;const e=this,t=new Image;t.src=this.signatureValue,t.onload=()=>{e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0),e.updateSnapCollection()},this.isSignatureEmpty=!1}getBlob(e){const t=e.split(","),i=t[0].match(/:(.*?);/)[1],s=atob(t[1]);let r=s.length;const o=new Uint8Array(r);for(;r--;)o[r]=s.charCodeAt(r);return new Blob([o],{type:i})}download(e,t){const i=URL.createObjectURL(e),s=document.createElement("a");s.href=i,s.target="_parent",s.download=t,(document.body||document.documentElement).appendChild(s),s.click(),s.parentNode.removeChild(s)}refresh(){this.pointColl=[],this.lastVelocity=0,this.lastWidth=(this.minStrokeWidth+this.maxStrokeWidth)/2}clear(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.refresh(),this.updateSnapCollection(!0),this.isSignatureEmpty=!0,this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Clear"):this.trigger("change",{actionName:"clear"})}undo(){const t=this;if(this.incStep>0){this.incStep--;const i=new Image;i.src=this.snapColl[this.incStep],i.onload=()=>{t.canvasContext.clearRect(0,0,t.element.width,t.element.height),t.canvasContext.drawImage(i,0,0,t.element.width,t.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Undo"):this.trigger("change",{actionName:"undo"})}redo(){const t=this;if(this.incStep<this.snapColl.length-1){this.incStep++;const i=new Image;i.src=this.snapColl[this.incStep],i.onload=()=>{t.canvasContext.clearRect(0,0,t.element.width,t.element.height),t.canvasContext.drawImage(i,0,0,t.element.width,t.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Redo"):this.trigger("change",{actionName:"redo"})}isClear(){if(this.clearArray){let e=!1;for(let t=0;t<this.clearArray.length;t++)this.clearArray[t]===this.incStep&&(this.isSignatureEmpty=!0,e=!0);e||(this.isSignatureEmpty=!1)}}isEmpty(){return this.isSignatureEmpty}canUndo(){return this.incStep>0}canRedo(){return this.incStep<this.snapColl.length-1}draw(e,t,i){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.canvasContext.font=(i=i||30)+"px "+(t=t||"Arial"),this.canvasContext.textAlign="center",this.canvasContext.textBaseline="middle",this.canvasContext.fillText(e,this.element.width/2,this.element.height/2),this.updateSnapCollection(),this.isSignatureEmpty=!1}load(e,t,i){i=i||this.element.height,t=t||this.element.width,this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);const s=this,r=new Image;r.src=e,"data"!==e.slice(0,4)&&(r.crossOrigin="anonymous"),r.onload=()=>{Promise.all([createImageBitmap(r,0,0,t,i)]).then(o=>{const a=document.createElement("canvas");a.width=t,a.height=i,a.getContext("2d").drawImage(o[0],0,0),"data"!==e.slice(0,4)&&(s.canvasContext.globalCompositeOperation="source-over"),s.canvasContext.drawImage(a,0,0,t,i,0,0,s.element.width,s.element.height),s.updateSnapCollection()})},this.isSignatureEmpty=!1}saveBackground(e){let t;if(t=e&&this.backgroundImage?this.snapColl[this.incStep-1]:this.snapColl[this.incStep],e||(this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.backgroundImage?this.setBackgroundImage(this.backgroundImage):this.backgroundColor&&(this.setBackgroundColor(this.backgroundColor),e=!0)),e){const i=this,s=new Image;s.crossOrigin="anonymous",s.src=t,s.onload=()=>{i.backgroundLoaded=!0,i.canvasContext.globalCompositeOperation="source-over",i.canvasContext.drawImage(s,0,0,i.element.width,i.element.height),i.save(i.fileType,i.fileName)}}}save(e,t){if(this.saveWithBackground&&null==this.backgroundLoaded&&(this.backgroundImage||this.backgroundColor))this.backgroundLoaded=!1,this.fileType=e,this.fileName=t,this.saveBackground(!1);else if("Svg"===e)this.toSVG(t=t||"Signature");else if("Jpeg"===e)if(t=t||"Signature",!this.saveWithBackground||this.saveWithBackground&&!this.backgroundImage&&!this.backgroundColor)this.toJPEG(t);else{const i=this.canvasContext.canvas.toDataURL("image/jpeg");this.download(this.getBlob(i),t+".jpeg")}else{t=t||"Signature";const i=this.canvasContext.canvas.toDataURL("image/png");this.download(this.getBlob(i),t+".png")}this.saveWithBackground&&this.backgroundLoaded&&this.resetSnap()}resetSnap(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);const e=this,t=new Image;t.src=this.snapColl[this.incStep-1],t.onload=()=>{e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height),e.updateSnapCollection()},this.backgroundLoaded=null,this.snapColl.pop(),this.incStep--,this.snapColl.pop(),this.incStep--}toJPEG(e){const t=this.snapColl[this.incStep];this.setBackgroundColor("#ffffff");const i=this,s=new Image;s.crossOrigin="anonymous",s.src=t,s.onload=()=>{i.canvasContext.globalCompositeOperation="source-over",i.canvasContext.drawImage(s,0,0,i.element.width,i.element.height);const r=i.canvasContext.canvas.toDataURL("image/jpeg");i.download(i.getBlob(r),e+".jpeg"),i.canvasContext.clearRect(0,0,i.canvasContext.canvas.width,i.canvasContext.canvas.height),this.resizeHandler()},this.snapColl.pop(),this.incStep--}toSVG(e){const t=this.canvasContext.canvas.toDataURL(),i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",this.canvasContext.canvas.width.toString()),i.setAttribute("height",this.canvasContext.canvas.height.toString());const r=document.createElementNS("http://www.w3.org/2000/svg","image");r.setAttributeNS(null,"height",this.canvasContext.canvas.height.toString()),r.setAttributeNS(null,"width",this.canvasContext.canvas.width.toString()),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),i.appendChild(r);const m="data:image/svg+xml;base64,"+btoa(`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${this.canvasContext.canvas.width}" height="${this.canvasContext.canvas.height}">`+i.innerHTML+"</svg>");return null==e?m:(this.download(this.getBlob(m),e+".svg"),null)}saveAsBlob(){return this.getBlob(this.canvasContext.canvas.toDataURL("image/png"))}getSignature(e){if("Jpeg"===e){const t=this.canvasContext.getImageData(0,0,this.element.width,this.element.height),i=t.data;for(let r=0;r<i.length;r+=4)i[r+3]<255&&(i[r]=255-i[r],i[r+1]=255-i[r+1],i[r+2]=255-i[r+2],i[r+3]=255-i[r+3]);this.canvasContext.putImageData(t,0,0);const s=this.canvasContext.canvas.toDataURL("image/jpeg");return this.resizeHandler(),s}return"Svg"===e?this.toSVG(null):this.canvasContext.canvas.toDataURL("image/png")}getModuleName(){return"signature"}getPersistData(){return this.signatureValue=this.snapColl[this.incStep],this.addOnPersist(["signatureValue"])}destroy(){this.unwireEvents(null),W([this.element],"e-"+this.getModuleName()),this.element.removeAttribute("tabindex"),this.pointColl=null,super.destroy()}propertyChanged(e,t){const i=this.canvasContext;switch(e){case"backgroundColor":i.canvas.style.backgroundColor=t,this.backgroundColor=t;break;case"backgroundImage":i.canvas.style.backgroundImage="url("+t+")",this.backgroundImage=t;break;case"strokeColor":i.fillStyle=t,this.strokeColor=t;break;case"saveWithBackground":this.saveWithBackground=t;break;case"maxStrokeWidth":this.maxStrokeWidth=t;break;case"minStrokeWidth":this.minStrokeWidth=t;break;case"velocity":this.velocity=t;break;case"isReadOnly":this.isRead(t);break;case"disabled":this.enableOrDisable(t)}}}var sd=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let yc=class extends Z1e{constructor(e,t){super(e,t)}preRender(){}render(){this.initialize()}initialize(){z([this.element],"e-"+this.getModuleName()),super.initialize(this.element),this.enablePersistence&&this.loadPersistedSignature()}getModuleName(){return"signature"}getPersistData(){return this.addOnPersist(["signatureValue"])}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"backgroundColor":super.propertyChanged(i,e.backgroundColor);break;case"backgroundImage":super.propertyChanged(i,e.backgroundImage);break;case"strokeColor":e.strokeColor!==t.strokeColor&&super.propertyChanged(i,e.strokeColor);break;case"saveWithBackground":super.propertyChanged(i,e.saveWithBackground);break;case"isReadOnly":super.propertyChanged(i,e.isReadOnly);break;case"disabled":super.propertyChanged(i,e.disabled)}}};sd([_("")],yc.prototype,"backgroundColor",void 0),sd([_("")],yc.prototype,"backgroundImage",void 0),sd([_(!1)],yc.prototype,"disabled",void 0),sd([_(!1)],yc.prototype,"isReadOnly",void 0),sd([_(!0)],yc.prototype,"saveWithBackground",void 0),sd([_("#000000")],yc.prototype,"strokeColor",void 0),sd([_(.5)],yc.prototype,"minStrokeWidth",void 0),sd([_(2)],yc.prototype,"maxStrokeWidth",void 0),sd([_(.7)],yc.prototype,"velocity",void 0),sd([_("en-US")],yc.prototype,"locale",void 0),sd([_(!1)],yc.prototype,"enableRtl",void 0),sd([_(!1)],yc.prototype,"enablePersistence",void 0),sd([G()],yc.prototype,"beforeSave",void 0),sd([G()],yc.prototype,"change",void 0),sd([G()],yc.prototype,"created",void 0),yc=sd([as],yc);var uhe=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const ZE="e-rtl",Xw="e-overlay",WO="e-nav-arrow",GO="e-nav-right-arrow",M5="e-nav-left-arrow",XE="e-scroll-nav",G$="e-scroll-right-nav",phe="e-scroll-left-nav",fhe="e-scroll-device",O5="e-scroll-overlay",$$="e-scroll-right-overlay",K$="e-scroll-left-overlay";let Y$=(()=>{let n=class extends Qs{constructor(t,i){super(t,i)}preRender(){this.browser=q.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=q.isDevice,this.customStep=!0;const t=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===t.id&&(t.id=Tn("hscroll"),this.uniqueId=!0),t.style.display="block",this.enableRtl&&t.classList.add(ZE)}render(){this.touchModule=new Lr(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),k.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(fhe),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()}setScrollState(){f(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0}initialize(){const t=this.createElement("div",{className:"e-hscroll-content"}),i=this.createElement("div",{className:"e-hscroll-bar"});i.setAttribute("tabindex","-1");const s=this.element,r=[].slice.call(s.children);for(const o of r)t.appendChild(o);i.appendChild(t),s.appendChild(i),i.style.overflowX="hidden",this.scrollEle=i,this.scrollItems=t}getPersistData(){return this.addOnPersist(["scrollStep"])}getModuleName(){return"hScroll"}destroy(){const t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove(fhe);const i=bt(".e-"+t.id+"_nav."+XE,t),s=bt("."+O5,t);[].slice.call(s).forEach(r=>{te(r)});for(const r of[].slice.call(this.scrollItems.children))t.appendChild(r);this.uniqueId&&this.element.removeAttribute("id"),te(this.scrollEle),i.length>0&&(te(i[0]),f(i[1])||te(i[1])),k.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,super.destroy()}disable(t){const i=bt(".e-scroll-nav:not(."+Xw+")",this.element);t?this.element.classList.add(Xw):this.element.classList.remove(Xw),[].slice.call(i).forEach(s=>{s.setAttribute("tabindex",t?"-1":"0")})}createOverlay(t){const i=t.id.concat("_nav"),s=this.createElement("div",{className:O5+" "+$$}),r="e-"+t.id.concat("_nav "+XE+" "+G$),o=this.createElement("div",{id:i.concat("_right"),className:r}),a=this.createElement("div",{className:GO+" "+WO+" e-icons"});o.appendChild(a);const l=this.createElement("div",{className:O5+" "+K$});this.ieCheck&&o.classList.add("e-ie-align"),t.appendChild(s),t.appendChild(o),t.insertBefore(l,t.firstChild),this.eventBinding([o])}createNavIcon(t){const i=t.id.concat("_nav"),s="e-"+t.id.concat("_nav "+XE+" "+G$),r={role:"button",id:i.concat("_right"),"aria-label":"Scroll right"},o=this.createElement("div",{className:s,attrs:r});o.setAttribute("aria-disabled","false");const a=this.createElement("div",{className:GO+" "+WO+" e-icons"}),l="e-"+t.id.concat("_nav "+XE+" "+phe),h={role:"button",id:i.concat("_left"),"aria-label":"Scroll left"},c=this.createElement("div",{className:l+" "+Xw,attrs:h});c.setAttribute("aria-disabled","true");const m=this.createElement("div",{className:M5+" "+WO+" e-icons"});c.appendChild(m),o.appendChild(a),t.appendChild(o),t.insertBefore(c,t.firstChild),this.ieCheck&&(o.classList.add("e-ie-align"),c.classList.add("e-ie-align")),this.eventBinding([o,c])}onKeyPress(t){if("Enter"===t.key){const i=()=>{this.keyTimeout=!0,this.eleScrolling(10,t.target,!0)};this.keyTimer=window.setTimeout(()=>{i()},100)}}onKeyUp(t){"Enter"===t.key&&(this.keyTimeout?this.keyTimeout=!1:t.target.click(),clearTimeout(this.keyTimer))}eventBinding(t){[].slice.call(t).forEach(i=>{new Lr(i,{tapHold:this.tabHoldHandler.bind(this),tapHoldThreshold:500}),i.addEventListener("keydown",this.onKeyPress.bind(this)),i.addEventListener("keyup",this.onKeyUp.bind(this)),i.addEventListener("mouseup",this.repeatScroll.bind(this)),i.addEventListener("touchend",this.repeatScroll.bind(this)),i.addEventListener("contextmenu",s=>{s.preventDefault()}),k.add(i,"click",this.clickEventHandler,this)})}repeatScroll(){clearInterval(this.timeout)}tabHoldHandler(t){let i=t.originalEvent.target;i=this.contains(i,XE)?i.firstElementChild:i;const r=()=>{this.eleScrolling(10,i,!0)};this.timeout=window.setInterval(()=>{r()},50)}contains(t,i){return t.classList.contains(i)}eleScrolling(t,i,s){const r=this.element;let o=i.classList;o.contains(XE)&&(o=i.querySelector("."+WO).classList),this.contains(r,ZE)&&this.browserCheck&&(t=-t),!this.contains(r,ZE)||this.browserCheck||this.ieCheck?o.contains(GO)?this.frameScrollRequest(t,"add",s):this.frameScrollRequest(t,"",s):o.contains(M5)?this.frameScrollRequest(t,"add",s):this.frameScrollRequest(t,"",s)}clickEventHandler(t){this.eleScrolling(this.scrollStep,t.target,!1)}swipeHandler(t){const i=this.scrollEle;let s;s=t.velocity<=1?t.distanceX/(10*t.velocity):t.distanceX/t.velocity;let r=.5;const o=()=>{const a=Math.sin(r);a<=0?window.cancelAnimationFrame(a):("Left"===t.swipeDirection?i.scrollLeft+=s*a:"Right"===t.swipeDirection&&(i.scrollLeft-=s*a),r-=.5,window.requestAnimationFrame(o))};o()}scrollUpdating(t,i){"add"===i?this.scrollEle.scrollLeft+=t:this.scrollEle.scrollLeft-=t}frameScrollRequest(t,i,s){if(s)return void this.scrollUpdating(t,i);this.customStep||[].slice.call(bt("."+O5,this.element)).forEach(a=>{t-=a.offsetWidth});const o=()=>{let a,l;this.contains(this.element,ZE)&&this.browserCheck?(a=-t,l=-10):(a=t,l=10),a<10?window.cancelAnimationFrame(l):(this.scrollUpdating(l,i),t-=l,window.requestAnimationFrame(o))};o()}touchHandler(t){const i=this.scrollEle;let s=t.distanceX;this.ieCheck&&this.contains(this.element,ZE)&&(s=-s),"Left"===t.scrollDirection?i.scrollLeft=i.scrollLeft+s:"Right"===t.scrollDirection&&(i.scrollLeft=i.scrollLeft-s)}arrowDisabling(t,i){if(this.isDevice){const r=(f(t)?i:t).querySelector("."+WO);f(t)?Bi(r,[GO],[M5]):Bi(r,[M5],[GO])}else t&&i&&(t.classList.add(Xw),t.setAttribute("aria-disabled","true"),t.removeAttribute("tabindex"),i.classList.remove(Xw),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0"));this.repeatScroll()}scrollHandler(t){const i=t.target,s=i.offsetWidth,o=this.element.querySelector("."+phe),a=this.element.querySelector("."+G$);let l=this.element.querySelector("."+K$),h=this.element.querySelector("."+$$),c=i.scrollLeft;if(c<=0&&(c=-c),this.isDevice&&(this.enableRtl&&!(this.browserCheck||this.ieCheck)&&(l=this.element.querySelector("."+$$),h=this.element.querySelector("."+K$)),l.style.width=c<40?c+"px":"40px",h.style.width=i.scrollWidth-Math.ceil(s+c)<40?i.scrollWidth-Math.ceil(s+c)+"px":"40px"),0===c)this.arrowDisabling(o,a);else if(Math.ceil(s+c+.1)>=i.scrollWidth)this.arrowDisabling(a,o);else{const m=this.element.querySelector("."+XE+"."+Xw);m&&(m.classList.remove(Xw),m.setAttribute("aria-disabled","false"),m.setAttribute("tabindex","0"))}}onPropertyChanged(t,i){for(const s of Object.keys(t))switch(s){case"scrollStep":this.setScrollState();break;case"enableRtl":t.enableRtl?this.element.classList.add(ZE):this.element.classList.remove(ZE)}}};return uhe([_(null)],n.prototype,"scrollStep",void 0),n=uhe([as],n),n})();var ghe=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Z$="e-rtl",Qw="e-overlay",$O="e-nav-arrow",P5="e-nav-up-arrow",KO="e-nav-down-arrow",QE="e-scroll-nav",bhe="e-scroll-up-nav",X$="e-scroll-down-nav",yhe="e-scroll-device",F5="e-scroll-overlay",vhe="e-scroll-up-overlay",Che="e-scroll-down-overlay";let Jw=class extends Qs{constructor(e,t){super(e,t)}preRender(){this.browser=q.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=q.isDevice,this.customStep=!0;const e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Tn("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(Z$)}render(){this.touchModule=new Lr(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),k.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(yhe),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),k.add(this.element,"wheel",this.wheelEventHandler,this)}setScrollState(){f(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0}initialize(){const e=Be("div",{className:"e-vscroll-content"}),t=Be("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");const i=this.element,s=[].slice.call(i.children);for(const r of s)e.appendChild(r);t.appendChild(e),i.appendChild(t),t.style.overflow="hidden",this.scrollEle=t,this.scrollItems=e}getPersistData(){return this.addOnPersist(["scrollStep"])}getModuleName(){return"vScroll"}destroy(){const e=this.element;e.style.display="",W([this.element],["e-vscroll",yhe]);const t=bt(".e-"+e.id+"_nav."+QE,e),i=bt("."+F5,e);[].slice.call(i).forEach(s=>{te(s)});for(const s of[].slice.call(this.scrollItems.children))e.appendChild(s);this.uniqueId&&this.element.removeAttribute("id"),te(this.scrollEle),t.length>0&&(te(t[0]),f(t[1])||te(t[1])),k.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,super.destroy()}disable(e){const t=bt(".e-scroll-nav:not(."+Qw+")",this.element);e?this.element.classList.add(Qw):this.element.classList.remove(Qw),[].slice.call(t).forEach(i=>{i.setAttribute("tabindex",e?"-1":"0")})}createOverlayElement(e){const t=e.id.concat("_nav"),i=Be("div",{className:F5+" "+Che}),s="e-"+e.id.concat("_nav "+QE+" "+X$),r=Be("div",{id:t.concat("down"),className:s}),o=Be("div",{className:KO+" "+$O+" e-icons"});r.appendChild(o);const a=Be("div",{className:F5+" "+vhe});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(a,e.firstChild),this.eventBinding([r])}createNavIcon(e){const t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav "+QE+" "+X$),s=Be("div",{id:t.concat("_down"),className:i});s.setAttribute("aria-disabled","false");const r=Be("div",{className:KO+" "+$O+" e-icons"}),o="e-"+e.id.concat("_nav "+QE+" "+bhe),a=Be("div",{id:t.concat("_up"),className:o+" "+Qw});a.setAttribute("aria-disabled","true");const l=Be("div",{className:P5+" "+$O+" e-icons"});a.appendChild(l),s.appendChild(r),s.setAttribute("tabindex","0"),e.appendChild(s),e.insertBefore(a,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([s,a])}onKeyPress(e){if("Enter"===e.key){const t=()=>{this.keyTimeout=!0,this.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(()=>{t()},100)}}onKeyUp(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))}eventBinding(e){[].slice.call(e).forEach(t=>{new Lr(t,{tapHold:this.tabHoldHandler.bind(this),tapHoldThreshold:500}),t.addEventListener("keydown",this.onKeyPress.bind(this)),t.addEventListener("keyup",this.onKeyUp.bind(this)),t.addEventListener("mouseup",this.repeatScroll.bind(this)),t.addEventListener("touchend",this.repeatScroll.bind(this)),t.addEventListener("contextmenu",i=>{i.preventDefault()}),k.add(t,"click",this.clickEventHandler,this)})}repeatScroll(){clearInterval(this.timeout)}tabHoldHandler(e){let t=e.originalEvent.target;t=this.contains(t,QE)?t.firstElementChild:t;const s=()=>{this.eleScrolling(10,t,!0)};this.timeout=window.setInterval(()=>{s()},50)}contains(e,t){return e.classList.contains(t)}eleScrolling(e,t,i){let s=t.classList;s.contains(QE)&&(s=t.querySelector("."+$O).classList),s.contains(KO)?this.frameScrollRequest(e,"add",i):s.contains(P5)&&this.frameScrollRequest(e,"",i)}clickEventHandler(e){this.eleScrolling(this.scrollStep,e.target,!1)}wheelEventHandler(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)}swipeHandler(e){const t=this.scrollEle;let i;i=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;let s=.5;const r=()=>{const o=Math.sin(s);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?t.scrollTop+=i*o:"Down"===e.swipeDirection&&(t.scrollTop-=i*o),s-=.02,window.requestAnimationFrame(r))};r()}scrollUpdating(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e}frameScrollRequest(e,t,i){if(i)return void this.scrollUpdating(e,t);this.customStep||[].slice.call(bt("."+F5,this.element)).forEach(o=>{e-=o.offsetHeight});const r=()=>{e<10?window.cancelAnimationFrame(10):(this.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(r))};r()}touchHandler(e){const t=this.scrollEle,i=e.distanceY;"Up"===e.scrollDirection?t.scrollTop=t.scrollTop+i:"Down"===e.scrollDirection&&(t.scrollTop=t.scrollTop-i)}arrowDisabling(e,t){if(this.isDevice){const s=(f(e)?t:e).querySelector("."+$O);f(e)?Bi(s,[KO],[P5]):Bi(s,[P5],[KO])}else e.classList.add(Qw),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove(Qw),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()}scrollEventHandler(e){const t=e.target,i=t.offsetHeight,s=this.element.querySelector("."+bhe),r=this.element.querySelector("."+X$),o=this.element.querySelector("."+vhe),a=this.element.querySelector("."+Che);let l=t.scrollTop;if(l<=0&&(l=-l),this.isDevice&&(o.style.height=l<40?l+"px":"40px",a.style.height=t.scrollHeight-Math.ceil(i+l)<40?t.scrollHeight-Math.ceil(i+l)+"px":"40px"),0===l)this.arrowDisabling(s,r);else if(Math.ceil(i+l+.1)>=t.scrollHeight)this.arrowDisabling(r,s);else{const h=this.element.querySelector("."+QE+"."+Qw);h&&(h.classList.remove(Qw),h.setAttribute("aria-disabled","false"),h.setAttribute("tabindex","0"))}}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(Z$):this.element.classList.remove(Z$)}}};function JE(n,e,t,i,s,r){let o,a;const l=e.parentElement;if("vscroll"===i?(o=r||e.getBoundingClientRect().height,a=t.getBoundingClientRect().height):(o=e.getBoundingClientRect().width,a=t.getBoundingClientRect().width),o<a)return She(n,e,t,i,s,r);if(l){const h=l.getBoundingClientRect().width;return h<o&&"hscroll"===i?(a=h,e.style.maxWidth=h+"px",She(n,e,t,i,s,r)):t}return t}function She(n,e,t,i,s,r){const o=n("div",{className:"e-menu-"+i});let a;return e.appendChild(o),o.appendChild(t),r?(o.style.overflow="hidden",o.style.height=r+"px"):(o.style.maxHeight=e.style.maxHeight,e.style.overflow="hidden"),"vscroll"===i?(a=new Jw({enableRtl:s},o),a.scrollStep=X(".e-"+i+"-bar",e).offsetHeight/2):(a=new Y$({enableRtl:s},o),a.scrollStep=X(".e-"+i+"-bar",e).offsetWidth),o}function N5(n,e,t){if(n){const i=X(".e-menu-parent",e);i?(!t||t===i)&&(n.destroy(),e.parentElement.appendChild(i),te(e)):(n.destroy(),te(e))}}ghe([_(null)],Jw.prototype,"scrollStep",void 0),Jw=ghe([as],Jw);var Bn=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const B5="enter",Q$="escape",Ia="e-focused",H5="e-menu-header",qo="e-selected",V5="e-separator",YO="uparrow",aC="downarrow",e_="leftarrow",lC="rightarrow",ZO="home",z5="end",kk="e-menu-item",J$="e-disabled",Rk="e-menu-hide",XO="e-menu-popup";class hC extends ii{}Bn([_("id")],hC.prototype,"itemId",void 0),Bn([_("parentId")],hC.prototype,"parentId",void 0),Bn([_("text")],hC.prototype,"text",void 0),Bn([_("iconCss")],hC.prototype,"iconCss",void 0),Bn([_("url")],hC.prototype,"url",void 0),Bn([_("separator")],hC.prototype,"separator",void 0),Bn([_("items")],hC.prototype,"children",void 0);class cg extends ii{}Bn([_(null)],cg.prototype,"iconCss",void 0),Bn([_("")],cg.prototype,"id",void 0),Bn([_(!1)],cg.prototype,"separator",void 0),Bn([rh([],cg)],cg.prototype,"items",void 0),Bn([_("")],cg.prototype,"text",void 0),Bn([_("")],cg.prototype,"url",void 0);class j5 extends ii{}Bn([_("SlideDown")],j5.prototype,"effect",void 0),Bn([_(400)],j5.prototype,"duration",void 0),Bn([_("ease")],j5.prototype,"easing",void 0);let Ua=class extends Qs{constructor(e,t){super(e,t),this.navIdx=[],this.animation=new mo({}),this.isTapHold=!1,this.tempItem=[],this.showSubMenuOn="Auto"}preRender(){if(!this.isMenu){let e;if("EJS-CONTEXTMENU"===this.element.tagName){e=this.createElement("ul",{id:Tn(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});const t=U("ej2_instances",this.element);W([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=e,zt("ej2_instances",t,this.element)}else{e=this.createElement("ul",{id:Tn(this.getModuleName())}),mi([].slice.call(this.element.cloneNode(!0).children),e);const t=this.element.nextElementSibling;t?this.element.parentElement.insertBefore(e,t):this.element.parentElement.appendChild(e),this.clonedElement=e}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){let e=this.element;const t=U("ej2_instances",e),i=this.createElement("ul"),s=this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"});for(let r=0,o=e.attributes.length;r<o;r++)i.setAttribute(e.attributes[r].nodeName,e.attributes[r].nodeValue);e.parentNode.insertBefore(s,e),te(e),e=i,s.appendChild(e),zt("ej2_instances",t,e),this.clonedElement=s,this.element=e,this.element.id||(this.element.id=Tn(this.getModuleName()))}}render(){this.initialize(),this.renderItems(),this.wireEvents(),this.renderComplete();const e=this.getWrapper();this.template&&this.enableScrolling&&(this.isReact||this.isAngular)&&requestAnimationFrame(()=>{JE(this.createElement,e,this.element,"hscroll",this.enableRtl)})}initialize(){let e=this.getWrapper();e||(e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(e,this.element):document.body.appendChild(e)),this.cssClass&&z([e],this.cssClass.split(" ")),this.enableRtl&&e.classList.add("e-rtl"),e.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(e)),this.defaultOption=this.showItemOnClick}renderItems(){if(!this.items.length){const t=Js.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:t},!0),this.element.innerHTML=""}const e=this.createItems(this.items);if(mi(Array.prototype.slice.call(e.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu&&(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling)){const t=this.getWrapper();this.element.classList.contains("e-vertical")?JE(this.createElement,t,this.element,"vscroll",this.enableRtl):JE(this.createElement,t,this.element,"hscroll",this.enableRtl)}}wireEvents(){const e=this.getWrapper();if(this.target){let t;const i=bt(this.target);for(let s=0,r=i.length;s<r;s++)t=i[s],this.isMenu?k.add(t,"click",this.menuHeaderClickHandler,this):q.isIos?new Lr(t,{tapHold:this.touchHandler.bind(this)}):k.add(t,"contextmenu",this.cmenuHandler,this);if(this.targetElement=t,!this.isMenu){k.add(this.targetElement,"scroll",this.scrollHandler,this);for(const s of gk(this.targetElement))k.add(s,"scroll",this.scrollHandler,this)}}q.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),k.add(this.isMenu?document:e,"mouseover",this.delegateMoverHandler,this),k.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),k.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(e),this.rippleFn=uc(e,{selector:"."+kk})}wireKeyboardEvent(e){const t={downarrow:aC,uparrow:YO,enter:B5,leftarrow:e_,rightarrow:lC,escape:Q$};this.isMenu&&(t.home=ZO,t.end=z5),new Gn(e,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:t})}mouseDownHandler(e){B(e.target,".e-"+this.getModuleName()+"-wrapper")!==this.getWrapper()&&!B(e.target,".e-"+this.getModuleName()+"-popup")&&this.closeMenu(this.isMenu?null:this.navIdx.length,e)}keyBoardHandler(e){let t="";const i=e.target;let s=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(e.preventDefault(),this.enableScrolling&&13===e.keyCode&&i.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([Ia,qo],[B(i,".e-"+this.getModuleName()+"-wrapper")]),s)switch(e.action){case lC:t=lC,e.action=aC;break;case e_:t=e_,e.action=YO;break;case aC:t=aC,e.action=lC;break;case YO:t=YO,e.action=""}else if(this.enableRtl)switch(e.action){case e_:s=!0,t=e_,e.action=lC;break;case lC:s=!0,t=lC,e.action=e_}switch(e.action){case aC:case YO:case z5:case ZO:this.upDownKeyHandler(e);break;case lC:this.rightEnterKeyHandler(e);break;case e_:this.leftEscKeyHandler(e);break;case B5:this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):this.rightEnterKeyHandler(e);break;case Q$:this.leftEscKeyHandler(e)}s&&(e.action=t)}upDownKeyHandler(e){const t=this.getUlByNavIdx(),i=e.action===aC||e.action===ZO?0:t.childElementCount-1;let s=i;const r=this.getLIByClass(t,Ia);r&&(e.action!==z5&&e.action!==ZO&&(s=this.getIdx(t,r)),r.classList.remove(Ia),e.action!==z5&&e.action!==ZO&&(e.action===aC?s++:s--,s===(e.action===aC?t.childElementCount:-1)&&(s=i))),s=this.isValidLI(t.children[s],s,e.action),t.children[s].classList.add(Ia),t.children[s].focus()}isValidLI(e,t,i){const s=this.getUlByNavIdx();return(e.classList.contains(V5)||e.classList.contains(J$)||e.classList.contains(Rk))&&(i===aC||i===lC?t++:t--),((e=s.children[t]).classList.contains(V5)||e.classList.contains(J$)||e.classList.contains(Rk))&&(t=this.isValidLI(e,t,i)),t}getUlByNavIdx(e=this.navIdx.length){if(this.isMenu){const t=[this.getWrapper()].concat([].slice.call(bt("."+XO)))[e];return f(t)?null:X(".e-menu-parent",t)}return this.getWrapper().children[e]}rightEnterKeyHandler(e){let t;const i=this.getUlByNavIdx(),s=this.getLIByClass(i,Ia);if(s){const r=this.getIdx(i,s),o=this.navIdx.concat(r),a=this.getItem(o);a.items.length?(this.navIdx.push(r),this.keyType="right",this.action=e.action,this.openMenu(s,a,-1,-1,e)):e.action===B5&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([qo],[this.getWrapper()]):s.classList.remove(Ia),s.classList.add(qo),t={element:s,item:a,event:e},this.trigger("select",t),this.closeMenu(null,e))}}leftEscKeyHandler(e){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,e)):e.action===Q$&&this.closeMenu(null,e)}scrollHandler(e){this.closeMenu(null,e)}touchHandler(e){this.isTapHold=!0,this.cmenuHandler(e.originalEvent)}cmenuHandler(e){e.preventDefault(),this.isCMenu=!0,this.pageX=e.changedTouches?e.changedTouches[0].pageX+1:e.pageX+1,this.pageY=e.changedTouches?e.changedTouches[0].pageY+1:e.pageY+1,this.closeMenu(null,e),this.isCMenu&&(this.canOpen(e.target)&&this.openMenu(null,null,this.pageY,this.pageX,e),this.isCMenu=!1)}closeMenu(e=0,t=null,i){if(this.isMenuVisible()){let s,r;const o=this.getWrapper();let a,l;const h=this.getPopups();let c=!1;const m=this.isMenu?h.length+1:o.childElementCount,b=this.isMenu&&1!==m?X(".e-ul",h[m-2]):bt(".e-menu-parent",o)[m-1];if(this.isMenu&&b.classList.contains("e-menu")&&(s=this.getLIByClass(b,qo),s&&s.classList.remove(qo),c=!0),!c){const v=t&&t.target&&this.getLI(t.target);r=this.navIdx.length?this.getItem(this.navIdx):null,l=r?r.items:this.items,a={element:b,parentItem:r,items:l,event:t,cancel:!1,isFocused:!0},this.trigger("beforeClose",a,w=>{let E,D,N,L="";const V=!w.cancel;let $,ie,Q;(V||this.isCMenu)&&(this.isMenu?(E=B(b,"."+XO),this.hamburgerMode&&(E.parentElement.style.minHeight="",B(b,".e-menu-item").setAttribute("aria-expanded","false")),this.unWireKeyboardEvent(E),N5(za(E.children[0],Jw),E.children[0]),N=za(E,fc),N.hide(),L=E.id,N.destroy(),te(E)):this.toggleAnimation(b,!1),D={element:b,parentItem:r,items:l},this.trigger("onClose",D),this.navIdx.pop()),this.updateReactTemplate();const le=this.getWrapper()&&this.getUlByNavIdx();this.isCMenu&&(this.canOpen(t.target)&&this.openMenu(null,null,this.pageY,this.pageX,t),this.isCMenu=!1),this.isMenu&&le&&L.length&&($=new RegExp("(.*)-ej2menu-"+this.element.id+"-popup").exec(L)[1],ie=le.querySelector('[id="'+$+'"]'),Q=v&&le.querySelector('[id="'+v.id+'"]'));const ke=v&&v.querySelectorAll(".e-menu-item");if(V&&this.hamburgerMode&&e&&!ke.length)this.afterCloseMenu(t);else if(V&&!this.hamburgerMode&&this.navIdx.length&&ie&&!Q&&"left"!==this.keyType){let Ye=t&&t.target.classList.contains("e-vscroll")?B(t.target,".e-menu-wrapper"):null;Ye?(Ye=Ye.querySelector(".e-menu-item"),(this.showItemOnClick||Ye&&this.getIndex(Ye.id,!0).length<=this.navIdx.length)&&this.closeMenu(this.navIdx[this.navIdx.length-1],t,!0)):this.closeMenu(this.navIdx[this.navIdx.length-1],t)}else if(V&&!i&&!e&&(this.hamburgerMode&&this.navIdx.length||1===this.navIdx.length))this.closeMenu(null,t);else if(V&&f(e)&&this.navIdx.length)this.closeMenu(null,t);else if(!V||this.isMenu||e||0!==this.navIdx.length||this.isMenusClosed)if(V&&this.isMenu&&t&&t.target&&0!==this.navIdx.length&&B(t.target,".e-menu-parent.e-control"))this.closeMenu(0,t);else if(V&&!this.isMenu&&bt(".e-menu-parent",o)[e-1]&&3===t.which)this.closeMenu(null,t);else{if(!V||"right"!==this.keyType&&"click"!==this.keyType){const Ye=this.getUlByNavIdx(),Nt=this.getLIByClass(Ye,qo);if(Nt&&(Nt.setAttribute("aria-expanded","false"),Nt.classList.remove(qo),(w.isFocused&&v||"left"===this.keyType)&&(Nt.classList.add(Ia),Nt.focus())),!V&&this.hamburgerMode&&v&&"false"===v.getAttribute("aria-expanded")&&"true"===v.getAttribute("aria-haspopup")){B(v,".e-menu-parent.e-control")?this.navIdx=[]:this.navIdx.pop(),this.navIdx.push(this.cliIdx);const Le=this.getItem(this.navIdx);v.setAttribute("aria-expanded","true"),this.openMenu(v,Le,-1,-1,t)}}else this.afterCloseMenu(t);this.navIdx.length<1&&("Hover"===this.showSubMenuOn||"Click"===this.showSubMenuOn)&&(this.showItemOnClick=this.defaultOption,this.showSubMenuOn="Auto")}else this.isMenusClosed=!0,this.closeMenu(0,t);this.removeStateWrapper()})}}}updateReactTemplate(){if(this.isReact&&this.template&&0===this.navIdx.length){const e=this.portals.splice(0,this.items.length);this.clearTemplate(["template"]),this.portals=e,this.renderReactTemplates()}}getMenuItemModel(e,t){if(f(e))return null;f(t)&&(t=0);const i=this.getFields(t);return{text:e[i.text],id:e[i.id],items:e[i.child],separator:e[i.separator],iconCss:e[i.iconCss],url:e[i.url]}}getPopups(){const e=[];return[].slice.call(document.querySelectorAll("."+XO)).forEach(t=>{!f(t.querySelector("."+kk))&&this.getIndex(t.querySelector("."+kk).id,!0).length&&e.push(t)}),e}isMenuVisible(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&Xr(this.element).valueOf()}canOpen(e){let t=!0;if(this.filter){t=!1;const i=this.filter.split(" ");for(let s=0,r=i.length;s<r;s++)if(B(e,"."+i[s])){t=!0;break}}return t}openMenu(e,t,i=0,s=0,r=null,o=this.targetElement){const a=this.getWrapper();this.lItem=e;const l=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,f(i)&&(i=-1),f(s)&&(s=-1),e){if(this.uList=this.createItems(t[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&q.isDevice){a.lastChild.style.display="none";const h={text:t[this.getField("text")].toString(),iconCss:"e-icons e-previous"},c=new cg(this.items[0],"items",h,!0),m=this.createItems([c]).children[0];m.classList.add(H5),this.uList.insertBefore(m,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+XO,id:e.id+"-ej2menu-"+l+"-popup"}),this.hamburgerMode?(i=e.offsetHeight,e.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,e,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,e):(this.cssClass&&z([this.popupWrapper],this.cssClass.split(" ")),this.popupObj.hide()),this.hamburgerMode||this.showItemOnClick||!this.hoverDelay?this.triggerBeforeOpen(e,this.uList,t,r,0,0,"menu"):(window.clearInterval(this.timer),this.timer=window.setTimeout(()=>{this.triggerBeforeOpen(e,this.uList,t,r,0,0,"menu")},this.hoverDelay))):(this.uList.style.zIndex=this.element.style.zIndex,a.appendChild(this.uList),!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout(()=>{this.triggerBeforeOpen(e,this.uList,t,r,i,s,"none")},this.hoverDelay)):this.triggerBeforeOpen(e,this.uList,t,r,i,s,"none"))}else this.uList=this.element,this.uList.style.zIndex=zw(o||this.element).toString(),this.triggerBeforeOpen(e,this.uList,t,r,i,s,"none")}calculateIndentSize(e,t){const i=getComputedStyle(t);let s=parseInt(i.textIndent,10);this.navIdx.length<2&&!t.classList.contains("e-blankicon")?s*=2:s+=s/4,e.style.textIndent=s+"px";const r=e.querySelectorAll(".e-blankicon");if(r&&r.length){const o=e.querySelector(".e-menu-icon"),a=getComputedStyle(o),l=parseInt(a.marginRight,10)+o.offsetWidth+s;for(let h=0;h<r.length;h++)r[h].style.textIndent=l+"px"}}generatePopup(e,t,i,s){const r=new fc(e,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:i,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:s||this.enableRtl?"none":"flip",Y:"fit"},position:s&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:t,open:()=>{const o=X(".e-menu-vscroll",r.element);o&&(o.style.height="inherit",o.style.maxHeight="");const a=X(".e-ul",r.element);r.element.style.maxHeight="",a.focus(),this.triggerOpen(a)}});return r}createHeaderContainer(e){e=e||this.getWrapper();const t=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),i=this.enableHtmlSanitizer?hr.sanitize(this.title):this.title,s=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:i}),r=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});t.appendChild(s),t.appendChild(r),e.insertBefore(t,this.element)}openHamburgerMenu(e){this.hamburgerMode&&this.triggerBeforeOpen(null,this.element,null,e,0,0,"hamburger")}closeHamburgerMenu(e){this.trigger("beforeClose",{element:this.element,parentItem:null,event:e,items:this.items,cancel:!1},i=>{i.cancel||(this.closeMenu(null,e),this.element.classList.add("e-hide-menu"),this.trigger("onClose",{element:this.element,parentItem:null,items:this.items}))})}callFit(e,t,i,s,r){return B9(e,null,{X:t,Y:i},{top:s,left:r})}triggerBeforeOpen(e,t,i,s,r,o,a){const l=e?i[this.getField("children",this.navIdx.length-1)]:this.items,c=a;this.trigger("beforeOpen",{element:t,items:l,parentItem:i,event:s,cancel:!1,top:r,left:o,showSubMenuOn:"Auto"},m=>{switch(c){case"menu":this.hamburgerMode||("Auto"!==m.showSubMenuOn&&(this.showItemOnClick=!this.defaultOption,this.showSubMenuOn=m.showSubMenuOn),this.top=m.top,this.left=m.left),this.popupWrapper.style.display="block",this.hamburgerMode||(this.popupWrapper.style.maxHeight=this.popupWrapper.getBoundingClientRect().height+"px",this.enableScrolling&&JE(this.createElement,this.popupWrapper,this.uList,"vscroll",this.enableRtl),this.checkScrollOffset(s)),this.hamburgerMode||this.left||this.top?(this.popupObj.collision={X:"none",Y:"none"},this.popupWrapper.style.display=""):(this.popupObj.refreshPosition(this.lItem,!0),this.left=parseInt(this.popupWrapper.style.left,10),this.top=parseInt(this.popupWrapper.style.top,10),this.enableRtl&&(this.left=this.isNestedOrVertical?this.left-this.popupWrapper.offsetWidth-this.lItem.parentElement.offsetWidth+2:this.left-this.popupWrapper.offsetWidth+this.lItem.offsetWidth),this.template&&(this.isReact||this.isAngular)?requestAnimationFrame(()=>{this.collision(),this.popupWrapper.style.display=""}):(this.collision(),this.popupWrapper.style.display=""));break;case"none":this.top=m.top,this.left=m.left;break;case"hamburger":m.cancel||(this.element.classList.remove("e-hide-menu"),this.triggerOpen(this.element))}if("hamburger"!==c&&(m.cancel?(this.isMenu?(this.popupObj.destroy(),te(this.popupWrapper)):t.className.indexOf("e-ul")>-1&&te(t),this.navIdx.pop()):this.isMenu?this.hamburgerMode?(this.popupWrapper.style.top=this.top+"px",this.popupWrapper.style.left="0px",this.toggleAnimation(this.popupWrapper)):(this.setBlankIconStyle(this.popupWrapper),this.wireKeyboardEvent(this.popupWrapper),uc(this.popupWrapper,{selector:"."+kk}),this.popupWrapper.style.left=this.left+"px",this.popupWrapper.style.top=this.top+"px",this.popupObj.show("None"!==this.animationSettings.effect?{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing}:null,this.lItem)):(this.setBlankIconStyle(this.uList),this.setPosition(this.lItem,this.uList,this.top,this.left),this.toggleAnimation(this.uList))),"right"===this.keyType){let b=this.getUlByNavIdx();e.classList.remove(Ia),this.isMenu&&1===this.navIdx.length&&this.removeLIStateByClass([qo],[this.getWrapper()]),e.classList.add(qo),this.action===B5&&this.trigger("select",{element:e,item:i,event:s}),e.focus(),b=this.getUlByNavIdx();const v=this.isValidLI(b.children[0],0,this.action);b.children[v].classList.add(Ia),b.children[v].focus()}})}collision(){let e;if(e=Yb(this.popupWrapper,null,this.left,this.top),(this.isNestedOrVertical||this.enableRtl)&&(e.indexOf("right")>-1||e.indexOf("left")>-1)){this.popupObj.collision.X="none";const t=B(this.lItem,".e-"+this.getModuleName()+"-wrapper").offsetWidth;this.left=this.enableRtl?Nh(this.lItem,this.isNestedOrVertical?"right":"left","top").left:this.left-this.popupWrapper.offsetWidth-t+2}e=Yb(this.popupWrapper,null,this.left,this.top),(e.indexOf("left")>-1||e.indexOf("right")>-1)&&(this.left=this.callFit(this.popupWrapper,!0,!1,this.top,this.left).left),this.popupWrapper.style.left=this.left+"px"}setBlankIconStyle(e){const t=[].slice.call(e.getElementsByClassName("e-blankicon"));if(!t.length)return;const i=e.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)"),s=i.querySelector(".e-menu-icon");if(!s)return;const r=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},o=getComputedStyle(s);let a=parseInt(o.fontSize,10);parseInt(o.width,10)&&parseInt(o.width,10)>a&&(a=parseInt(o.width,10));const l=`${a+parseInt(o[r.margin],10)+parseInt(getComputedStyle(i)[r.padding],10)}px`;t.forEach(h=>{h.style[r.padding]=l})}checkScrollOffset(e){const t=this.getWrapper();if(t.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){const i=f(e)?this.element:B(e.target,"."+kk),s=X(".e-hscroll-bar",t);s.scrollLeft>i.offsetLeft&&(s.scrollLeft-=s.scrollLeft-i.offsetLeft);const r=s.scrollLeft+s.offsetWidth,o=i.offsetLeft+i.offsetWidth;r<o&&(s.scrollLeft+=o-r)}}setPosition(e,t,i,s){const r="px";if(this.toggleVisiblity(t),t===this.element||s>-1&&i>-1){let o=Yb(t,null,s,i);if(o.indexOf("right")>-1&&(s-=t.offsetWidth),o.indexOf("bottom")>-1&&(i=this.callFit(t,!1,!0,i,s).top-20)<0){const l=pageYOffset+document.documentElement.clientHeight-t.getBoundingClientRect().height;l>-1&&(i=l)}o=Yb(t,null,s,i),o.indexOf("left")>-1&&(s=this.callFit(t,!0,!1,i,s).left)}else if(q.isDevice)i=Number(this.element.style.top.replace(r,"")),s=Number(this.element.style.left.replace(r,""));else{let a=Nh(e,this.enableRtl?"left":"right","top");s=a.left;const l=Yb(t,null,this.enableRtl?s-t.offsetWidth:s,i=a.top),h=l.indexOf("left")>-1||l.indexOf("right")>-1;h&&(a=Nh(e,this.enableRtl?"right":"left","top"),s=a.left),(this.enableRtl||h)&&(s=this.enableRtl&&h?s:s-t.offsetWidth),l.indexOf("bottom")>-1&&(a=this.callFit(t,!1,!0,i,s),i=a.top)}this.toggleVisiblity(t,!1),t.style.top=i+r,t.style.left=s+r}toggleVisiblity(e,t=!0){e.style.visibility=t?"hidden":"",e.style.display=t?"block":"none"}createItems(e){const t=this.navIdx?this.navIdx.length:0,i=this.getFields(t),s=this.hasField(e,this.getField("iconCss",t)),r={showIcon:s,moduleName:"menu",fields:i,template:this.template,itemNavigable:!0,itemCreating:a=>{a.curData[a.fields[i.id]]||(a.curData[a.fields[i.id]]=Tn("menuitem")),a.curData.htmlAttributes={role:"menuitem",tabindex:"-1"},this.isMenu&&!a.curData[this.getField("separator",t)]&&(a.curData.htmlAttributes["aria-label"]=a.curData[a.fields.text]),""===a.curData[a.fields[i.iconCss]]&&(a.curData[a.fields[i.iconCss]]=null)},itemCreated:a=>{if(a.curData[this.getField("separator",t)]&&(a.item.classList.add(V5),a.item.removeAttribute("role")),s&&!a.curData[a.fields.iconCss]&&!a.curData[this.getField("separator",t)]&&a.item.classList.add("e-blankicon"),a.curData[a.fields.child]&&a.curData[a.fields.child].length){const h=this.createElement("span",{className:"e-icons e-caret"});a.item.appendChild(h),a.item.setAttribute("aria-haspopup","true"),a.item.setAttribute("aria-expanded","false"),this.isMenu||a.item.removeAttribute("role"),a.item.classList.add("e-menu-caret-icon")}this.isMenu&&this.template&&(a.item.setAttribute("id",a.curData[a.fields.id].toString()),a.item.removeAttribute("data-uid"),a.item.classList.contains("e-level-1")&&a.item.classList.remove("e-level-1"),a.item.classList.contains("e-has-child")&&a.item.classList.remove("e-has-child")),this.trigger("beforeItemRender",{item:a.curData,element:a.item})}};this.setProperties({items:this.items},!0),this.isMenu&&(r.templateID=this.element.id+"Template");const o=Js.createList(this.createElement,e,r,!this.template,this);return o.setAttribute("tabindex","0"),this.isMenu&&o.setAttribute("role","menu"),o}moverHandler(e){const t=e.target;this.liTrgt=t;const i=this.getLI(t),s=i?B(i,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),r=this.getWrapper(),o=new RegExp("-ej2menu-(.*)-popup");let a,l=!1;if(s){if(a=""!==s.id?o.exec(s.id)[1]:s.querySelector("ul").id,a!==this.element.id){if(this.removeLIStateByClass([Ia,qo],[this.getWrapper()]),!this.navIdx.length)return;l=!0}i&&B(i,".e-"+this.getModuleName()+"-wrapper")&&!l?(this.removeLIStateByClass([Ia],this.isMenu?[s].concat(this.getPopups()):[s]),this.removeLIStateByClass([Ia],this.isMenu?[r].concat(this.getPopups()):[r]),i.classList.add(Ia),this.showItemOnClick||this.clickHandler(e)):this.isMenu&&this.showItemOnClick&&!l&&this.removeLIStateByClass([Ia],[s].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||t.parentElement===s||B(t,".e-"+this.getModuleName()+"-popup")||i&&(!i||this.getIndex(i.id,!0).length)||"Hover"===this.showSubMenuOn?l&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e)):(this.removeLIStateByClass([Ia],[s]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}}removeStateWrapper(){if(this.liTrgt){const e=B(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&e&&this.removeLIStateByClass([Ia,qo],[e])}}removeLIStateByClass(e,t){let i;for(let s=0;s<t.length;s++)e.forEach(r=>{i=X("."+r,t[s]),i&&i.classList.remove(r)})}getField(e,t=0){const i=this.fields[e];return"string"==typeof i?i:i[t]?i[t].toString():i[i.length-1].toString()}getFields(e=0){return{id:this.getField("itemId",e),iconCss:this.getField("iconCss",e),text:this.getField("text",e),url:this.getField("url",e),child:this.getField("children",e),separator:this.getField("separator",e)}}hasField(e,t){for(let i=0,s=e.length;i<s;i++)if(e[i][t])return!0;return!1}menuHeaderClickHandler(e){B(e.target,".e-menu-wrapper").querySelector("ul.e-menu-parent").id===this.element.id&&(this.element.classList.contains("e-hide-menu")?this.openHamburgerMenu(e):this.closeHamburgerMenu(e))}clickHandler(e){if(this.isTapHold)this.isTapHold=!1;else{const t=this.getWrapper(),i=e.target,s=this.cli=this.getLI(i),r=new RegExp("-ej2menu-(.*)-popup"),o=s?B(s,".e-"+this.getModuleName()+"-wrapper"):null,a=s&&o&&(this.isMenu?this.getIndex(s.id,!0).length>0:t.firstElementChild.id===o.firstElementChild.id);if(q.isDevice&&this.isMenu&&(this.removeLIStateByClass([Ia],[t].concat(this.getPopups())),this.mouseDownHandler(e)),s&&o&&this.isMenu){const l=o.id?r.exec(o.id)[1]:o.querySelector(".e-menu-parent").id;if(this.element.id!==l)return}if(a&&"click"===e.type&&!s.classList.contains(H5)){this.setLISelected(s);const l=this.getIndex(s.id,!0),h=this.getItem(l);this.trigger("select",{element:s,item:h,event:e})}if(a&&("mouseover"===e.type||q.isDevice||this.showItemOnClick)){let l;if(s.classList.contains(H5)){l=t.children[this.navIdx.length-1],this.toggleAnimation(l);const h=this.getLIByClass(l,qo);h&&h.classList.remove(qo),te(s.parentNode),this.navIdx.pop()}else if(!s.classList.contains(V5)){this.showSubMenu=!0;const h=s.parentNode;if(this.cliIdx=this.getIdx(h,s),this.isMenu||!q.isDevice){const c=this.isMenu?Array.prototype.indexOf.call([t].concat(this.getPopups()),B(h,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(t,h);if(this.navIdx[c]===this.cliIdx&&(this.showSubMenu=!1),c!==this.navIdx.length&&("mouseover"!==e.type||this.showSubMenu)){const m=this.getLIByClass(h,qo);m&&m.classList.remove(qo),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&this.setLISelected(s),this.closeMenu(c+1,e),this.showItemOnClick&&this.setLISelected(s)}}this.isClosed||this.afterCloseMenu(e),this.isClosed=!1}}else if(this.isMenu&&"DIV"===i.tagName&&this.navIdx.length&&B(i,".e-menu-vscroll")){const l=B(i,"."+XO),h=Array.prototype.indexOf.call(this.getPopups(),l)+1;h<this.navIdx.length&&(this.closeMenu(h+1,e),l&&this.removeLIStateByClass([Ia,qo],[l]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):("UL"!==i.tagName||(this.isMenu?i.parentElement.classList.contains("e-menu-wrapper")&&!this.getIndex(i.querySelector("."+kk).id,!0).length:i.parentElement!==t))&&(s||this.removeLIStateByClass([qo],[t]),(!s||!s.querySelector(".e-caret"))&&this.closeMenu(null,e))}}afterCloseMenu(e){let t;if(this.showSubMenu){t=B(this.showItemOnClick&&0===this.navIdx.length?e.target:this.element,".e-menu-parent.e-control");const i=this.navIdx.concat(this.cliIdx),s=this.getItem(i);if(s&&s[this.getField("children",i.length-1)]&&s[this.getField("children",i.length-1)].length?(("mouseover"===e.type||q.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&t||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,s,null,null,e))):"mouseover"!==e.type&&this.closeMenu(null,e),!t){const r=this.getUlByNavIdx(),o=this.getLIByClass(r,qo);o&&(o.setAttribute("aria-expanded","false"),o.classList.remove(qo))}}this.keyType=""}setLISelected(e){const t=this.getLIByClass(e.parentElement,qo);t&&t.classList.remove(qo),this.isMenu||e.classList.remove(Ia),e.classList.add(qo)}getLIByClass(e,t){for(let i=0,s=e.children.length;i<s;i++)if(e.children[i].classList.contains(t))return e.children[i];return null}getItemIndex(e,t){let i;return i="string"==typeof e?e:e.id,this.getIndex(i,!1!==t)}setItem(e,t,i){let s;s=i?t||e.id:t||e.text;const r=this.getIndex(s,i),o=this.getItem(r);o.iconCss=e.iconCss||o.iconCss,o.text=e.text||o.text,o.url=e.url||o.url,o.separator=e.separator||o.separator}getItem(e){const t=(e=e.slice()).pop();return this.getItems(e)[t]}getItems(e){let t=this.items;for(let i=0;i<e.length;i++)t=t[e[i]][this.getField("children",i)];return t}setItems(e,t){const i=this.getItems(t);i.splice(0,i.length);for(let s=0;s<e.length;s++)i.splice(s,0,e[s])}getIdx(e,t,i=!0){let s=Array.prototype.indexOf.call(e.children,t);return i&&e.children[0].classList.contains(H5)&&s--,s}getLI(e){return"LI"===e.tagName&&e.classList.contains("e-menu-item")?e:B(e,"li.e-menu-item")}updateItemsByNavIdx(){let e=this.items,t=0;for(let i=0;i<this.navIdx.length&&(e=e[i].items,e);i++){t++;const s=this.getUlByNavIdx(t);if(!s)break;this.updateItem(s,e)}}removeChildElement(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild);return e}onPropertyChanged(e,t){const i=this.getWrapper();for(const s of Object.keys(e))switch(s){case"cssClass":t.cssClass&&W([i],t.cssClass.split(" ")),e.cssClass&&z([i],e.cssClass.split(" "));break;case"enableRtl":i.classList.toggle("e-rtl");break;case"showItemOnClick":this.unWireEvents(),this.showItemOnClick=e.showItemOnClick,this.wireEvents();break;case"enableScrolling":if(e.enableScrolling){let r;this.element.classList.contains("e-vertical")?JE(this.createElement,i,this.element,"vscroll",this.enableRtl):JE(this.createElement,i,this.element,"hscroll",this.enableRtl),this.getPopups().forEach(o=>{r=X(".e-ul",o),JE(this.createElement,o,r,"vscroll",this.enableRtl)})}else{let r=i.children[0];this.element.classList.contains("e-vertical")?N5(za(r,Jw),r):N5(za(r,Y$),r),i.style.overflow="",i.appendChild(this.element),this.getPopups().forEach(o=>{r=o.children[0],N5(za(r,Jw),r),o.style.overflow=""})}break;case"items":{let r,o,a;if(Object.keys(t.items).length){const l=Object.keys(e.items);for(let h=0;h<l.length;h++)o=this.getChangedItemIndex(e,[],Number(l[h])),o.length<=this.getWrapper().children.length&&(r=o.pop(),a=this.getItems(o),this.insertAfter([a[r]],a[r].text),this.removeItem(a,o,r),this.setItems(a,o)),o.length=0}else{if(this.updateItem(this.element,this.items),!this.hamburgerMode)for(let l=1,h=i.childElementCount;l<h;l++)te(i.lastElementChild);this.navIdx=[]}break}}}updateItem(e,t){e.innerHTML="",[].slice.call(this.createItems(t).children).forEach(s=>{e.appendChild(s)})}getChangedItemIndex(e,t,i){t.push(i);const s=Object.keys(e.items[i]).pop();if("items"===s){const r=e.items[i],o=Object.keys(r.items).pop();o&&this.getChangedItemIndex(r,t,Number(o))}else"isParentArray"===s&&t.length>1&&t.pop();return t}removeItem(e,t,i){e.splice(i,1);const s=this.getWrapper().children;t.length<(this.hamburgerMode?1:s.length)&&te(s[this.hamburgerMode?1:t.length].children[i])}unWireEvents(e=this.target){const t=this.getWrapper();if(e){let i,s;const r=bt(e);for(let o=0,a=r.length;o<a;o++)i=r[o],this.isMenu?k.remove(i,"click",this.menuHeaderClickHandler):q.isIos?(s=za(i,Lr),s&&s.destroy()):k.remove(i,"contextmenu",this.cmenuHandler);if(!this.isMenu){k.remove(this.targetElement,"scroll",this.scrollHandler);for(const o of gk(this.targetElement))k.remove(o,"scroll",this.scrollHandler)}}q.isDevice||(k.remove(this.isMenu?document:t,"mouseover",this.delegateMoverHandler),k.remove(document,"mousedown",this.delegateMouseDownHandler)),k.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(t),this.rippleFn()}unWireKeyboardEvent(e){const t=za(e,Gn);t&&t.destroy()}toggleAnimation(e,t=!0){let i,s;"None"!==this.animationSettings.effect&&t?this.animation.animate(e,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:r=>{this.hamburgerMode?(s=r.element.parentElement,r.element.style.position="absolute",i=s.offsetHeight,r.element.style.maxHeight=r.element.offsetHeight+"px",s.style.maxHeight=""):(r.element.style.display="block",r.element.style.maxHeight=r.element.getBoundingClientRect().height+"px")},progress:r=>{this.hamburgerMode&&(s.style.minHeight=i+r.element.offsetHeight+"px")},end:r=>{this.hamburgerMode?(r.element.style.position="",r.element.style.maxHeight="",s.style.minHeight="",r.element.style.top="0px",r.element.children[0].focus(),this.triggerOpen(r.element.children[0])):this.end(r.element,t)}}):this.end(e,t)}triggerOpen(e){const t=this.navIdx.length?this.getItem(this.navIdx):null;this.trigger("onOpen",{element:e,parentItem:t,items:t?t.items:this.items})}end(e,t){if(t)if(e.style.display="block",e.style.maxHeight="",this.triggerOpen(e),e.querySelector("."+Ia))e.querySelector("."+Ia).focus();else{const i=this.getWrapper().children[this.getIdx(this.getWrapper(),e)-1];i?i.querySelector("."+qo).focus():this.element.focus()}else if(e===this.element){const i=this.getLIByClass(this.element,Ia);i&&i.classList.remove(Ia);const s=this.getLIByClass(this.element,qo);s&&s.classList.remove(qo),e.style.display="none"}else te(e)}getPersistData(){return""}getWrapper(){return B(this.element,".e-"+this.getModuleName()+"-wrapper")}getIndex(e,t,i=this.items,s=[],r=!1,o=0){let a;o=r?o+1:0;for(let l=0,h=i.length;l<h;l++){if(a=i[l],(t?a[this.getField("itemId",o)]:a[this.getField("text",o)])===e){s.push(l);break}if(a[this.getField("children",o)]&&a[this.getField("children",o)].length){if(-1!==(s=this.getIndex(e,t,a[this.getField("children",o)],s,!0,o))[s.length-1]){s.unshift(l);break}l!==h-1&&s.pop()}else l===h-1&&s.push(-1)}return r||-1!==s[0]?s:[]}enableItems(e,t=!0,i){let s,r,o;const a=J$;let l;for(let h=0;h<e.length;h++){if(o=this.getIndex(e[h],i),this.navIdx.length){if(1!==o.length){l=!1;for(let c=0,m=o.length-1;c<m;c++)if(o[c]!==this.navIdx[c]){l=!0;break}if(l)continue}}else if(1!==o.length)continue;r=o.pop(),s=this.getUlByNavIdx(o.length),s&&(t?this.isMenu?(s.children[r].classList.remove(a),s.children[r].removeAttribute("aria-disabled")):q.isDevice&&!s.classList.contains("e-contextmenu")?s.children[r+1].classList.remove(a):s.children[r].classList.remove(a):this.isMenu?(s.children[r].classList.add(a),s.children[r].setAttribute("aria-disabled","true")):q.isDevice&&!s.classList.contains("e-contextmenu")?s.children[r+1].classList.add(a):s.children[r].classList.add(a))}}showItems(e,t){this.showHideItems(e,!1,t)}hideItems(e,t){this.showHideItems(e,!0,t)}showHideItems(e,t,i){let s,r,o;for(let a=0;a<e.length;a++)o=this.getIndex(e[a],i),r=o.pop(),s=this.getUlByNavIdx(o.length),s&&(t?q.isDevice&&!s.classList.contains("e-contextmenu")?s.children[r+1].classList.add(Rk):s.children[r].classList.add(Rk):q.isDevice&&!s.classList.contains("e-contextmenu")?s.children[r+1].classList.remove(Rk):s.children[r].classList.remove(Rk))}removeItems(e,t){let i,s,r;for(let o=0;o<e.length;o++)s=this.getIndex(e[o],t),i=s.pop(),r=this.getItems(s),this.removeItem(r,s,i)}insertAfter(e,t,i){this.insertItems(e,t,i)}insertBefore(e,t,i){this.insertItems(e,t,i,!1)}insertItems(e,t,i,s=!0){let r,o,a,l,h;for(let c=0;c<e.length;c++){a=this.getIndex(t,i),o=a.pop(),l=this.getItems(a),h=new cg(l[0],"items",e[c],!0),l.splice(s?o+1:o,0,h);const m=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(a.length<m.length){o=s?o+1:o,r=this.createItems(l).children[o];const b=this.isMenu?X(".e-menu-parent",m[a.length]):m[a.length];b.insertBefore(r,b.children[o])}}}removeAttributes(){["top","left","display","z-index"].forEach(e=>{this.element.style.removeProperty(e)}),["role","tabindex","class","style"].forEach(e=>{"class"===e&&this.element.classList.contains("e-menu-parent")&&this.element.classList.remove("e-menu-parent"),(-1===["class","style"].indexOf(e)||!this.element.getAttribute(e))&&this.element.removeAttribute(e),this.isMenu&&"class"===e&&this.element.classList.contains("e-vertical")&&this.element.classList.remove("e-vertical")})}destroy(){const e=this.getWrapper();if(e){if(this.unWireEvents(),this.isMenu)this.closeMenu(),this.element.innerHTML="",this.removeAttributes(),e.parentNode.insertBefore(this.element,e),this.clonedElement=null;else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)z([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){const t=this.clonedElement.nextElementSibling;t&&t!==e?this.clonedElement.parentElement.insertBefore(this.element,t):this.clonedElement.parentElement.appendChild(this.element),this.element.innerHTML="",mi([].slice.call(this.clonedElement.children),this.element),te(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(te(this.element),e.style.display="",e.classList.remove("e-"+this.getModuleName()+"-wrapper"),e.removeAttribute("data-ripple")):te(e),super.destroy(),this.template&&this.clearTemplate(["template"])}}};Bn([G()],Ua.prototype,"beforeItemRender",void 0),Bn([G()],Ua.prototype,"beforeOpen",void 0),Bn([G()],Ua.prototype,"onOpen",void 0),Bn([G()],Ua.prototype,"beforeClose",void 0),Bn([G()],Ua.prototype,"onClose",void 0),Bn([G()],Ua.prototype,"select",void 0),Bn([G()],Ua.prototype,"created",void 0),Bn([_("")],Ua.prototype,"cssClass",void 0),Bn([_(0)],Ua.prototype,"hoverDelay",void 0),Bn([_(!1)],Ua.prototype,"showItemOnClick",void 0),Bn([_("")],Ua.prototype,"target",void 0),Bn([_("")],Ua.prototype,"filter",void 0),Bn([_(null)],Ua.prototype,"template",void 0),Bn([_(!1)],Ua.prototype,"enableScrolling",void 0),Bn([_(!1)],Ua.prototype,"enableHtmlSanitizer",void 0),Bn([di({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},hC)],Ua.prototype,"fields",void 0),Bn([rh([],cg)],Ua.prototype,"items",void 0),Bn([di({duration:400,easing:"ease",effect:"SlideDown"},j5)],Ua.prototype,"animationSettings",void 0),Ua=Bn([as],Ua);var ur=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const eK="e-vertical",vo="e-toolbar-items",qa="e-toolbar-item",Jb="e-rtl",Ta="e-separator",U5="e-popup-up-icon",QO="e-popup-down-icon",Ihe="e-popup-open",The="e-template",dg="e-overlay",Dhe="e-toolbar-text",tK="e-popup-text",ug="e-overflow-show",q5="e-overflow-hide",Hd="e-hor-nav",khe="e-scroll-nav",Rhe="e-toolbar-center",pg="e-tbar-pos",Ahe="e-hscroll-bar",JO="e-toolbar-pop",cC="e-toolbar-popup",eP="e-nav-active",tP="e-ignore",iK="e-popup-alone",iP="e-hidden",Lhe="e-toolbar-multirow",Mhe="e-multirow-pos",sK="e-multirow-separator",nK="e-extended-separator",Ohe="e-extended-toolbar",W5="e-toolbar-extended",rK="e-tbar-extended";class Vh extends ii{}ur([_("")],Vh.prototype,"id",void 0),ur([_("")],Vh.prototype,"text",void 0),ur([_("auto")],Vh.prototype,"width",void 0),ur([_("")],Vh.prototype,"cssClass",void 0),ur([_(!1)],Vh.prototype,"showAlwaysInPopup",void 0),ur([_(!1)],Vh.prototype,"disabled",void 0),ur([_("")],Vh.prototype,"prefixIcon",void 0),ur([_("")],Vh.prototype,"suffixIcon",void 0),ur([_(!0)],Vh.prototype,"visible",void 0),ur([_("None")],Vh.prototype,"overflow",void 0),ur([_("")],Vh.prototype,"template",void 0),ur([_("Button")],Vh.prototype,"type",void 0),ur([_("Both")],Vh.prototype,"showTextOn",void 0),ur([_(null)],Vh.prototype,"htmlAttributes",void 0),ur([_("")],Vh.prototype,"tooltipText",void 0),ur([_("Left")],Vh.prototype,"align",void 0),ur([G()],Vh.prototype,"click",void 0);let zh=class extends Qs{constructor(e,t){super(e,t),this.resizeContext=this.resize.bind(this),this.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"}}destroy(){(this.isReact||this.isAngular)&&this.clearTemplate();const e=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(e).forEach(t=>{!f(t)&&!f(t.ej2_instances)&&!f(t.ej2_instances[0])&&!t.ej2_instances[0].isDestroyed&&t.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(t=>{f(this.element.querySelector(t))||(document.body.appendChild(this.element.querySelector(t)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),te(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&W([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(t=>this.element.removeAttribute(t)),super.destroy()}preRender(){const e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(eK),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,Jb)}wireEvents(){k.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()}wireKeyboardEvent(){this.keyModule=new Gn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),k.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")}unwireKeyboardEvent(){this.keyModule&&(k.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)}docKeyDown(e){if("INPUT"===e.target.tagName)return;const t=!f(this.popObj)&&Xr(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}unwireEvents(){k.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),k.remove(document,"scroll",this.docEvent),k.remove(document,"click",this.docEvent)}clearProperty(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}}docEvent(e){const t=B(e.target,".e-popup");this.popObj&&Xr(this.popObj.element)&&!t&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})}destroyScroll(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,pg),this.scrollModule.destroy(),this.scrollModule=null)}destroyItems(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+qa)).forEach(e=>{te(e)}),this.tbarAlign){const e=this.element.querySelector("."+vo);[].slice.call(e.children).forEach(t=>{te(t)}),this.tbarAlign=!1,this.remove(e,pg)}this.clearProperty()}destroyMode(){this.scrollModule&&(this.remove(this.scrollModule.element,Jb),this.destroyScroll()),this.remove(this.element,rK),this.remove(this.element,Ohe);const e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,Lhe),this.popObj&&this.popupRefresh(this.popObj.element,!0)}add(e,t){e.classList.add(t)}remove(e,t){e.classList.remove(t)}elementFocus(e){const t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()}clstElement(e,t){let i;return i=e&&this.popObj&&Xr(this.popObj.element)?this.popObj.element.querySelector("."+qa):this.element===t||e?this.element.querySelector("."+qa+":not(."+dg+" ):not(."+Ta+" ):not(."+iP+" )"):B(t,"."+qa),i}keyHandling(e,t,i,s,r){const o=this.popObj,a=this.element,l={name:"FadeOut",duration:100},h="moveUp"===t.action?"previous":"next";let c,m;switch(t.action){case"moveRight":if(this.isVertical)return;a===i?this.elementFocus(e):s||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;s||this.eleFocus(e,"previous");break;case"home":case"end":if(e){let b=B(e,".e-popup");const v=this.element.querySelector("."+W5);"Extended"===this.overflowMode&&v&&v.classList.contains("e-popup-open")&&(b="end"===t.action?v:null),b?Xr(this.popObj.element)&&(m=[].slice.call(b.children),c="home"===t.action?m[0]:m[m.length-1]):(m=this.element.querySelectorAll("."+vo+" ."+qa+":not(."+Ta+")"),c="home"===t.action?m[0]:m[m.length-1]),c&&this.elementFocus(c)}break;case"moveUp":case"moveDown":if(this.isVertical)this.eleFocus(e,"moveUp"===t.action?"previous":"next");else if(o&&B(i,".e-popup")){const b=o.element,v=b.firstElementChild;if("previous"===h&&v===e||"next"===h&&b.lastElementChild===e)return;this.eleFocus(e,h)}else"moveDown"===t.action&&o&&Xr(o.element)&&this.elementFocus(e);break;case"tab":if(!r&&!s){const b=e.firstElementChild;a===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(b),b.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":o&&"Extended"!==this.overflowMode&&o.hide(l);break;case"popupOpen":if(!s)return;o&&!Xr(o.element)?(o.element.style.top=a.offsetHeight+"px",o.show({name:"FadeIn",duration:100})):o.hide(l)}}keyActionHandler(e){const t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||this.element.classList.contains(dg))return;e.preventDefault();const i=t.classList.contains(Hd),s=t.classList.contains(khe),r=this.clstElement(i,t);(r||s)&&this.keyHandling(r,e,t,i,s)}disable(e){const t=this.element;e?t.classList.add(dg):t.classList.remove(dg),t.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(Xr(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))}eleContains(e){return e.classList.contains(Ta)||e.classList.contains(dg)||e.getAttribute("disabled")||e.classList.contains(iP)||!Xr(e)}eleFocus(e,t){const i=Object(e)[t+"ElementSibling"];if(i){if(this.eleContains(i))return void this.eleFocus(i,t);this.elementFocus(i)}else if(this.tbarAlign){let s=Object(e.parentElement)[t+"ElementSibling"];if(!f(s)&&0===s.children.length&&(s=Object(s)[t+"ElementSibling"]),!f(s)&&s.children.length>0)if("next"===t){const r=s.querySelector("."+qa);this.eleContains(r)?this.eleFocus(r,t):(r.firstElementChild.focus(),this.activeEleSwitch(r))}else{const r=s.lastElementChild;this.eleContains(r)?this.eleFocus(r,t):this.elementFocus(r)}}}clickHandler(e){const t=e.target,i=this.element,s=!f(B(t,"."+JO));let a,r=t.classList,o=B(t,"."+Hd);o||(o=t),!i.children[0].classList.contains("e-hscroll")&&!i.children[0].classList.contains("e-vscroll")&&r.contains(Hd)&&(r=t.querySelector(".e-icons").classList),(r.contains(U5)||r.contains(QO))&&this.popupClickHandler(i,o,Jb);const l=B(e.target,"."+qa);if((f(l)||l.classList.contains(dg))&&!o.classList.contains(Hd))return;l&&(a=this.items[this.tbarEle.indexOf(l)]);const h={originalEvent:e,item:a};a&&!f(a.click)&&this.trigger("items["+this.tbarEle.indexOf(l)+"].click",h),h.cancel||this.trigger("clicked",h,c=>{!f(this.popObj)&&s&&!c.cancel&&"Popup"===this.overflowMode&&c.item&&"Input"!==c.item.type&&this.popObj.hide({name:"FadeOut",duration:100})})}popupClickHandler(e,t,i){const s=this.popObj;Xr(s.element)?(t.classList.remove(eP),s.hide({name:"FadeOut",duration:100})):(e.classList.contains(i)&&(s.enableRtl=!0,s.position={X:"left",Y:"top"}),0===s.offsetX&&!e.classList.contains(i)&&(s.enableRtl=!1,s.position={X:"right",Y:"top"}),s.dataBind(),s.refreshPosition(),s.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(s.element.style.minHeight="0px"),t.classList.add(eP),s.show({name:"FadeIn",duration:100}))}render(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()}initialize(){const e=st(this.width),t=st(this.height);("msie"!==q.info.name||"auto"!==this.height||"MultiRow"===this.overflowMode)&&ht(this.element,{height:t}),ht(this.element,{width:e}),Rt(this.element,{role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"}),this.cssClass&&z([this.element],this.cssClass.split(" "))}renderControl(){const e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()}renderLayout(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()}itemsAlign(e,t){let i,s;this.tbarEle||(this.tbarEle=[]);for(let r=0;r<e.length;r++)i=this.renderSubComponent(e[r],r),-1===this.tbarEle.indexOf(i)&&this.tbarEle.push(i),this.tbarAlign||this.tbarItemAlign(e[r],t,r),s=t.querySelector(".e-toolbar-"+e[r].align.toLowerCase()),s?(e[r].showAlwaysInPopup&&"Show"!==e[r].overflow||this.tbarAlgEle[(e[r].align+"s").toLowerCase()].push(i),s.appendChild(i)):t.appendChild(i);this.isReact&&(this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates())}changeOrientation(){const e=this.element;this.isVertical?(e.classList.remove(eK),this.isVertical=!1,("auto"===this.height||"100%"===this.height)&&(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(eK),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),ht(this.element,{height:st(this.height),width:st(this.width)})),this.destroyMode(),this.refreshOverflow()}initScroll(e,t){!this.scrollModule&&this.checkOverflow(e,t[0])&&(this.tbarAlign&&this.element.querySelector("."+vo+" ."+Rhe).removeAttribute("style"),this.scrollModule=this.isVertical?new Jw({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]):new Y$({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]),this.remove(this.scrollModule.element,pg),ht(this.element,{overflow:"hidden"}))}itemWidthCal(e){let i,t=0;return[].slice.call(bt("."+qa,e)).forEach(s=>{Xr(s)&&(i=window.getComputedStyle(s),t+=this.isVertical?s.offsetHeight:s.offsetWidth,t+=parseFloat(this.isVertical?i.marginTop:i.marginRight),t+=parseFloat(this.isVertical?i.marginBottom:i.marginLeft))}),t}getScrollCntEle(e){return e.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")}checkOverflow(e,t){if(f(e)||f(t)||!Xr(e))return!1;const i=this.isVertical?e.offsetHeight:e.offsetWidth;let s=this.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===s)&&(s=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));const r=e.querySelector("."+Hd),o=e.querySelector("."+khe);let a=0;return r?a=this.isVertical?r.offsetHeight:r.offsetWidth:o&&(a=this.isVertical?2*o.offsetHeight:2*o.offsetWidth),s>i-a}refreshOverflow(){this.resize()}toolbarAlign(e){this.tbarAlign&&(this.add(e,pg),this.itemPositioning())}renderOverflowMode(){const e=this.element,t=e.querySelector("."+vo),i=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===q.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":f(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(vo)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,t)||i)&&this.setOverflowAttributes(e),this.toolbarAlign(t);break;case"MultiRow":this.add(t,Lhe),this.checkOverflow(e,t)&&this.tbarAlign&&(this.removePositioning(),this.add(t,Mhe)),"hidden"===e.style.overflow&&(e.style.overflow=""),("msie"===q.info.name||"auto"!==e.style.height)&&(e.style.height="auto");break;case"Extended":this.add(this.element,Ohe),(this.checkOverflow(e,t)||i)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(t)}}setOverflowAttributes(e){this.createPopupEle(e,[].slice.call(bt("."+vo+" ."+qa,e))),this.element.querySelector("."+Hd).setAttribute("tabIndex","0"),this.element.querySelector("."+Hd).setAttribute("role","list")}separator(){const e=this.element,t=[].slice.call(e.querySelectorAll("."+Ta)),i=e.querySelector("."+sK),s=e.querySelector("."+nK),r="MultiRow"===this.overflowMode?i:s;null!==r&&("MultiRow"===this.overflowMode?r.classList.remove(sK):"Extended"===this.overflowMode&&r.classList.remove(nK));for(let o=0;o<=t.length-1;o++)t[o].offsetLeft<30&&0!==t[o].offsetLeft&&("MultiRow"===this.overflowMode?t[o].classList.add(sK):"Extended"===this.overflowMode&&t[o].classList.add(nK))}createPopupEle(e,t){let i=e.querySelector("."+Hd);const s=this.isVertical;i||this.createPopupIcon(e),i=e.querySelector("."+Hd);const o=(s?e.offsetHeight:e.offsetWidth)-(s?i.offsetHeight:i.offsetWidth);this.element.classList.remove("e-rtl"),ht(this.element,{direction:"initial"}),this.checkPriority(e,t,o,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()}pushingPoppedEle(e,t,i,s,r){const o=e.element,a=[].slice.call(bt("."+cC,o.querySelector("."+vo)));let l=bt("."+ug,i),h=0,c=0;a.forEach((b,v)=>{l=bt("."+ug,i),b.classList.contains(ug)&&l.length>0?e.tbResize&&l.length>v?(i.insertBefore(b,l[v]),++c):(i.insertBefore(b,i.children[l.length]),++c):b.classList.contains(ug)||e.tbResize&&b.classList.contains(q5)&&i.children.length>0&&0===l.length?(i.insertBefore(b,i.firstChild),++c):b.classList.contains(q5)?t.push(b):e.tbResize?(i.insertBefore(b,i.childNodes[h+c]),++h):i.appendChild(b),b.classList.contains(Ta)?ht(b,{display:"",height:r+"px"}):ht(b,{display:"",height:s+"px"})}),t.forEach(b=>{i.appendChild(b)});const m=bt("."+qa,o.querySelector("."+vo));for(let b=m.length-1;b>=0;b--){const v=m[b];if(!v.classList.contains(Ta)||"Extended"===this.overflowMode)break;ht(v,{display:"none"})}}createPopup(){const e=this.element;let t,i;"Extended"===this.overflowMode&&(i=e.querySelector("."+Ta+":not(."+cC+")"),t="auto"===e.style.height||""===e.style.height?null:i.offsetHeight);const s=e.querySelector("."+qa+":not(."+Ta+"):not(."+cC+")"),r="auto"===e.style.height||""===e.style.height?null:s&&s.offsetHeight;let o;if(X("#"+e.id+"_popup."+JO,e))o=X("#"+e.id+"_popup."+JO,e);else{const l=this.createElement("div",{id:e.id+"_popup",className:JO+" "+W5}),h=this.createElement("div",{id:e.id+"_popup",className:JO});o="Extended"===this.overflowMode?l:h}this.pushingPoppedEle(this,[],o,r,t),this.popupInit(e,o)}getElementOffsetY(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight}popupInit(e,t){if(this.popObj){const i=this.popObj.element;ht(i,{maxHeight:"",display:"block"}),ht(i,{maxHeight:i.offsetHeight+"px",display:""})}else{e.appendChild(t),ht(this.element,{overflow:""});const i=window.getComputedStyle(this.element),s=new fc(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(s.appendTo(t),"Extended"===this.overflowMode&&(s.width=parseFloat(i.width)+2*parseFloat(i.borderRightWidth),s.offsetX=0),k.add(document,"scroll",this.docEvent.bind(this)),k.add(document,"click ",this.docEvent.bind(this)),s.element.style.maxHeight=s.element.offsetHeight+"px",this.isVertical&&(s.element.style.visibility="hidden"),this.isExtendedOpen){const r=this.element.querySelector("."+Hd);r.classList.add(eP),Bi(r.firstElementChild,[U5],[QO]),this.element.querySelector("."+W5).classList.add(Ihe)}else s.hide();this.popObj=s,this.element.setAttribute("aria-haspopup","true")}}tbarPopupHandler(e){"Extended"===this.overflowMode&&(e?this.add(this.element,rK):this.remove(this.element,rK))}popupOpen(e){const t=this.popObj;this.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());const i=this.popObj.element,s=this.popObj.element.parentElement,r=s.querySelector("."+Hd);ht(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.overflowMode&&(t.element.style.minHeight="");const o=i.offsetTop+i.offsetHeight+Nh(s).top,a=r.firstElementChild;r.classList.add(eP),Bi(a,[U5],[QO]),this.tbarPopupHandler(!0);const l=f(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+l<o&&this.element.offsetTop<i.offsetHeight){let h=i.offsetHeight-(o-window.innerHeight-l+5);t.height=h+"px";for(let c=0;c<=i.childElementCount;c++){const m=i.children[c];if(m.offsetTop+m.offsetHeight>h){h=m.offsetTop;break}}ht(t.element,{maxHeight:h+"px"})}else if(this.isVertical){const h=this.element.getBoundingClientRect();ht(t.element,{maxHeight:h.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(t){const h=i.getBoundingClientRect();h.right>document.documentElement.clientWidth&&h.width>s.getBoundingClientRect().width&&(t.collision={Y:"none"},t.dataBind()),t.refreshPosition()}}popupClose(e){const i=this.element.querySelector("."+Hd),s=i.firstElementChild;i.classList.remove(eP),Bi(s,[QO],[U5]),this.tbarPopupHandler(!1)}checkPriority(e,t,i,s){const r=this.popupPriCount>0,a=i;let l,h,c=0,m=0,b=0;const v=(w,E)=>{let D=!1;return E.forEach(L=>{w.classList.contains(L)&&(D=!0)}),D};for(let w=t.length-1;w>=0;w--){let E;const D=window.getComputedStyle(t[w]);this.isVertical?(E=parseFloat(D.marginTop),E+=parseFloat(D.marginBottom)):(E=parseFloat(D.marginRight),E+=parseFloat(D.marginLeft));const L=t[w]===this.tbarEle[0];L&&(this.tbarEleMrgn=E),l=this.isVertical?t[w].offsetHeight:t[w].offsetWidth;const N=L?l+E:l;if(v(t[w],[iK])&&r&&(t[w].classList.add(cC),ht(t[w],this.isVertical?{display:"none",minHeight:N+"px"}:{display:"none",minWidth:N+"px"}),b++),h=this.isVertical?t[w].offsetTop+t[w].offsetHeight+E>i:t[w].offsetLeft+t[w].offsetWidth+E>i,h){if(t[w].classList.contains(Ta)){if("Extended"===this.overflowMode)m===b&&v(t[w],[Ta,tP])&&(t[w].classList.add(cC),b++),m++;else if("Popup"===this.overflowMode){if(c>0&&m===b){const V=t[w+m+(c-1)];v(V,[Ta,tP])&&ht(V,{display:"none"})}c++,m=0,b=0}}else m++;t[w].classList.contains(ug)&&s||v(t[w],[Ta,tP])?i-=(this.isVertical?t[w].offsetHeight:t[w].offsetWidth)+E:(t[w].classList.add(cC),ht(t[w],this.isVertical?{display:"none",minHeight:N+"px"}:{display:"none",minWidth:N+"px"}),b++)}}if(s){const w=bt("."+qa+":not(."+cC+")",this.element);this.checkPriority(e,w,a,!1)}}createPopupIcon(e){const t=e.id.concat("_nav");let i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.overflowMode?i+" e-expended-nav":i;const s=this.createElement("div",{id:t,className:i});("msie"===q.info.name||"edge"===q.info.name)&&s.classList.add("e-ie-align");const r=this.createElement("div",{className:QO+" e-icons"});s.appendChild(r),s.setAttribute("tabindex","0"),s.setAttribute("role","list"),e.appendChild(s)}tbarPriRef(e,t,i,s,r,o,a,l){const h=l,b=bt("."+cC+":not(."+ug+")",this.popObj.element).length,v=(w,E)=>w.classList.contains(E);if(0===bt(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){const w=e.children[t-(t-i)-1],E=!f(w)&&v(w,tP);if(!f(w)&&v(w,Ta)&&!Xr(w)||E){const D="none";w.style.display="inherit";const L=w.offsetWidth+2*parseFloat(window.getComputedStyle(w).marginRight),N=w.previousElementSibling;o+L<a||r?(e.insertBefore(s,e.children[t+h-(t-i)]),f(N)||(N.style.display="")):N.classList.contains(Ta)&&(N.style.display=D),w.style.display=""}else e.insertBefore(s,e.children[t+h-(t-i)])}else e.insertBefore(s,e.children[t+h-b])}popupRefresh(e,t){const i=this.element,s=this.isVertical,r=i.querySelector("."+vo);let a,o=i.querySelector("."+Hd);if(f(o))return;r.removeAttribute("style"),e.style.display="block",a=s?i.offsetHeight-(o.offsetHeight+r.offsetHeight):i.offsetWidth-(o.offsetWidth+r.offsetWidth);let l=0;[].slice.call(e.children).forEach(h=>{l+=this.popupEleWidth(h),ht(h,{position:""})}),a+(s?o.offsetHeight:o.offsetWidth)>l&&0===this.popupPriCount&&(t=!0),this.popupEleRefresh(a,e,t),e.style.display="",0===e.children.length&&o&&this.popObj&&(te(o),o=null,this.popObj.destroy(),te(this.popObj.element),this.popObj=null,i.setAttribute("aria-haspopup","false"))}ignoreEleFetch(e,t){const i=[].slice.call(t.querySelectorAll("."+tP)),s=[];let r=0;return i.length>0?(i.forEach(o=>{s.push([].slice.call(t.children).indexOf(o))}),s.forEach(o=>{o<=e&&r++}),r):0}checkPopupRefresh(e,t){t.style.display="block";const i=this.popupEleWidth(t.firstElementChild);t.firstElementChild.style.removeProperty("Position");const s=e.offsetWidth-e.querySelector("."+Hd).offsetWidth,r=e.querySelector("."+vo).offsetWidth;return t.style.removeProperty("display"),s>i+r}popupEleWidth(e){e.style.position="absolute";let t=this.isVertical?e.offsetHeight:e.offsetWidth;const i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains(tK)){const s=e.children[0];!f(i)&&e.classList.contains(tK)?i.style.display="none":!f(i)&&e.classList.contains(Dhe)&&(i.style.display="block"),s.style.minWidth="0%",t=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),s.style.minWidth="",s.style.minHeight="",f(i)||(i.style.display="")}return t}popupEleRefresh(e,t,i){const s=this.popupPriCount>0;let o,a,r=this.tbarEle,l=this.element.querySelector("."+vo),h=0;for(const m of[].slice.call(t.children)){if(m.classList.contains(iK)&&s&&!i)continue;let b=this.popupEleWidth(m);if(m===this.tbarEle[0]&&(b+=this.tbarEleMrgn),m.style.position="",!(b<e||i))break;{if(ht(m,{minWidth:"",height:"",minHeight:""}),m.classList.contains(q5)||m.classList.remove(cC),a=this.tbarEle.indexOf(m),this.tbarAlign){const w=this.items[a].align;a=this.tbarAlgEle[(w+"s").toLowerCase()].indexOf(m),r=this.tbarAlgEle[(w+"s").toLowerCase()],l=this.element.querySelector("."+vo+" .e-toolbar-"+w.toLowerCase())}let v=0;"Extended"!==this.overflowMode&&r.slice(0,a).forEach(w=>{(w.classList.contains(ug)||w.classList.contains(Ta))&&(w.classList.contains(Ta)&&(w.style.display="",e-=w.offsetWidth),v++)}),h=this.ignoreEleFetch(a,l),m.classList.contains(ug)?(this.tbarPriRef(l,a,v,m,i,b,e,h),e-=m.offsetWidth):0===a?(l.insertBefore(m,l.firstChild),e-=m.offsetWidth):(o=bt("."+ug,this.popObj.element).length,l.insertBefore(m,l.children[a+h-o]),e-=m.offsetWidth),m.style.height=""}}this.checkOverflow(this.element,this.element.getElementsByClassName(vo)[0])&&!i&&this.renderOverflowMode()}removePositioning(){const e=this.element.querySelector("."+vo);if(f(e)||!e.classList.contains(pg))return;this.remove(e,pg);const t=[].slice.call(e.childNodes);t[1].removeAttribute("style"),t[2].removeAttribute("style")}refreshPositioning(){const e=this.element.querySelector("."+vo);this.add(e,pg),this.itemPositioning()}itemPositioning(){const e=this.element.querySelector("."+vo);let t;if(f(e)||!e.classList.contains(pg))return;const i=this.element.querySelector("."+Hd);let s;s=[].slice.call(this.scrollModule?e.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:e.childNodes),t=this.isVertical?s[0].offsetHeight+s[2].offsetHeight:s[0].offsetWidth+s[2].offsetWidth;let r=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(i){r-=this.isVertical?i.offsetHeight:i.offsetWidth;const l=(this.isVertical?i.offsetHeight:i.offsetWidth)+"px";s[2].removeAttribute("style"),this.isVertical?this.enableRtl?s[2].style.top=l:s[2].style.bottom=l:this.enableRtl?s[2].style.left=l:s[2].style.right=l}if(r<=t)return;const o=(r-t-(this.isVertical?s[1].offsetHeight:s[1].offsetWidth))/2;s[1].removeAttribute("style");const a=(this.isVertical?s[0].offsetHeight:s[0].offsetWidth)+o+"px";this.isVertical?this.enableRtl?s[1].style.marginBottom=a:s[1].style.marginTop=a:this.enableRtl?s[1].style.marginRight=a:s[1].style.marginLeft=a}tbarItemAlign(e,t,i){if(e.showAlwaysInPopup&&"Show"!==e.overflow)return;const s=[];if(s.push(this.createElement("div",{className:"e-toolbar-left"})),s.push(this.createElement("div",{className:Rhe})),s.push(this.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)s.forEach(r=>{t.appendChild(r)}),this.tbarAlign=!0,this.add(t,pg);else if("Left"!==e.align){const o=s[0];[].slice.call(t.childNodes).forEach(a=>{this.tbarAlgEle.lefts.push(a),o.appendChild(a)}),t.appendChild(o),t.appendChild(s[1]),t.appendChild(s[2]),this.tbarAlign=!0,this.add(t,pg)}}ctrlTemplate(){this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,vo),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(t=>{"DIV"===t.tagName&&(this.tbarEle.push(t),t.setAttribute("aria-disabled","false"),this.add(t,qa))})}renderItems(){const e=this.element,t=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&t.length>0){let i;e&&e.children.length>0&&(i=e.querySelector("."+vo)),i||(i=this.createElement("div",{className:vo})),this.itemsAlign(t,i),e.appendChild(i)}}setAttr(e,t){const i=Object.keys(e);let s;for(let r=0;r<i.length;r++)s=i[r],"class"===s?this.add(t,e[s]):t.setAttribute(s,e[s])}enableItems(e,t){const i=e,s=i.length;let r;f(t)&&(t=!0);const o=(a,l)=>{a?(l.classList.remove(dg),l.setAttribute("aria-disabled","false")):(l.classList.add(dg),l.setAttribute("aria-disabled","true"))};if(!f(s)&&s>=1){for(let a=0,l=[].slice.call(i);a<s;a++){const h=l[a];if("number"==typeof h){if(r=this.getElementByIndex(h),f(r))return;i[a]=r}else r=h;o(t,r)}t?W(i,dg):z(i,dg)}else{if("number"==typeof i){if(r=this.getElementByIndex(i),f(r))return}else r=e;o(t,r)}}getElementByIndex(e){return this.tbarEle[e]?this.tbarEle[e]:null}addItems(e,t){let i;this.extendedOpen();const s=this.element.querySelector("."+vo);if(f(s))return void this.itemsRerender(e);let r,o="Left";f(t)&&(t=0),e.forEach(a=>{!f(a.align)&&"Left"!==a.align&&"Left"===o&&(o=a.align)});for(const a of e)if(f(a.type)&&(a.type="Button"),i=bt("."+qa,this.element),a.align=o,r=this.renderSubComponent(a,t),this.tbarEle.length>=t&&i.length>=0){f(this.scrollModule)&&this.destroyMode();const l="L"===a.align[0]?0:"C"===a.align[0]?1:2;let h;this.tbarAlign||"Left"===o?this.tbarAlign?(h=B(i[0],"."+vo).children[l],h.insertBefore(r,h.children[t]),this.tbarAlgEle[(a.align+"s").toLowerCase()].splice(t,0,r),this.refreshPositioning()):0===i.length?(i=bt("."+vo,this.element),i[0].appendChild(r)):i[0].parentNode.insertBefore(r,i[t]):(this.tbarItemAlign(a,s,1),this.tbarAlign=!0,h=B(i[0],"."+vo).children[l],h.appendChild(r),this.tbarAlgEle[(a.align+"s").toLowerCase()].push(r),this.refreshPositioning()),this.items.splice(t,0,a),a.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(t,0,r),t++,this.offsetWid=s.offsetWidth}s.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}removeItems(e){const t=e;let i,s=[].slice.call(bt("."+qa,this.element));if("number"==typeof t)i=parseInt(e.toString(),10),this.removeItemByIndex(i,s);else if(t&&t.length>1)for(const r of[].slice.call(t))i=this.tbarEle.indexOf(r),this.removeItemByIndex(i,s),s=bt("."+qa,this.element);else i=s.indexOf(t&&t.length&&1===t.length?t[0]:e),this.removeItemByIndex(i,s);this.resize()}removeItemByIndex(e,t){if(this.tbarEle[e]&&t[e]){const i=this.tbarEle.indexOf(t[e]);if(this.tbarAlign){const r=this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].indexOf(this.tbarEle[i]);this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].splice(r,1)}this.isReact&&this.clearTemplate();const s=t[e].querySelector(".e-control.e-btn");!f(s)&&!f(s.ej2_instances[0])&&!s.ej2_instances[0].isDestroyed&&s.ej2_instances[0].destroy(),te(t[e]),this.items.splice(i,1),this.tbarEle.splice(i,1)}}templateRender(e,t,i,s){const o=e;let a;if("object"==typeof e&&(a="function"==typeof o.appendTo),"string"!=typeof e&&a){if("Input"===i.type){const l=this.createElement("input");l.id=i.id?i.id:Tn("tbr-ipt"),t.appendChild(l),o.appendTo(l)}}else{let l,h=e;const c=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);h="string"==typeof e?e.trim():e;try{if("object"!=typeof e||f(e.tagName))if("string"==typeof e&&c.test(h))t.innerHTML=h;else if(document.querySelectorAll(h).length){const b=document.querySelector(h),v=b.outerHTML.trim();t.appendChild(b),b.style.display="",f(v)||this.tempId.push(h)}else l=ji(h);else t.appendChild(e)}catch(b){l=ji(h)}let m;f(l)||(m=l({},this,"template",this.element.id+s+"_template",this.isStringTemplate)),!f(m)&&m.length>0&&[].slice.call(m).forEach(b=>{f(b.tagName)||(b.style.display=""),t.appendChild(b)})}this.add(t,The),this.tbarEle.push(t)}buttonRendering(e,t){const i=this.createElement("button",{className:"e-tbar-btn"});i.setAttribute("type","button");const s=e.text;let r,o;i.id=e.id?e.id:Tn("e-tbr-btn");const a=this.createElement("span",{className:"e-tbar-btn-text"});s?(a.innerHTML=this.enableHtmlSanitizer?hr.sanitize(s):s,i.appendChild(a),i.classList.add("e-tbtn-txt")):this.add(t,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(r=e.prefixIcon+" e-icons",o="Left"):(r=e.suffixIcon+" e-icons",o="Right"));const l=new Sa({iconCss:r,iconPosition:o});return l.createElement=this.createElement,l.appendTo(i),e.width&&ht(i,{width:st(e.width)}),i}renderSubComponent(e,t){let i;const s=this.createElement("div",{className:qa});s.setAttribute("aria-disabled","false");const r=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?hr.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,s),e.tooltipText&&s.setAttribute("title",r.textContent),e.cssClass&&(s.className=s.className+" "+e.cssClass),e.template)this.templateRender(e.template,s,e,t);else switch(e.type){case"Button":i=this.buttonRendering(e,s),i.setAttribute("tabindex","-1"),i.setAttribute("aria-label",e.text||e.tooltipText),s.appendChild(i),s.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(s,Ta)}if(e.showTextOn){const o=e.showTextOn;"Toolbar"===o?(this.add(s,Dhe),this.add(s,"e-tbtn-align")):"Overflow"===o&&this.add(s,tK)}if(e.overflow){const o=e.overflow;"Show"===o?this.add(s,ug):"Hide"===o&&(s.classList.contains(Ta)||this.add(s,q5))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!s.classList.contains(Ta)&&(this.add(s,iK),this.popupPriCount++),e.disabled&&this.add(s,dg),!1===e.visible&&this.add(s,iP),s}itemClick(e){this.activeEleSwitch(e.currentTarget)}activeEleSwitch(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()}activeEleRemove(e){f(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,f(this.trgtEle)&&!e.parentElement.classList.contains(The)?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")}getPersistData(){return this.addOnPersist([])}getModuleName(){return"toolbar"}itemsRerender(e){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}resize(){const e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();const t=this.checkOverflow(e,e.getElementsByClassName(vo)[0]);if(!t){this.destroyScroll();const i=e.querySelector("."+vo);f(i)||(this.remove(i,Mhe),this.tbarAlign&&this.add(i,pg))}if(!t||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||t)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){const i=window.getComputedStyle(this.element);this.popObj.width=parseFloat(i.width)+2*parseFloat(i.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector("."+Ahe)&&(this.scrollStep=this.element.querySelector("."+Ahe).offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}}extendedOpen(){const e=this.element.querySelector("."+W5);"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains(Ihe))}onPropertyChanged(e,t){const i=this.element,s=i.offsetWidth;this.extendedOpen();for(const r of Object.keys(e))switch(r){case"items":if(e.items instanceof Array&&t.items instanceof Array)this.itemsRerender(e.items);else{const o=Object.keys(e.items);for(let a=0;a<o.length;a++){const l=parseInt(Object.keys(e.items)[a],10),h=Object.keys(e.items[l])[0],c=Object(e.items[l])[h];if("function"!=typeof c){if(this.tbarAlign||"align"===h){this.refresh(),this.trigger("created");break}const b="overflow"===h&&0!==this.popupPriCount;("showAlwaysInPopup"===h&&!c||this.items[l].showAlwaysInPopup&&b)&&--this.popupPriCount,f(this.scrollModule)&&this.destroyMode();const v=[].slice.call(bt("."+vo+" ."+qa,i));this.isReact&&this.clearTemplate(),te(v[l]),this.tbarEle.splice(l,1),this.addItems([this.items[l]],l),this.items.splice(l,1),this.items[l].template&&this.tbarEle.splice(this.items.length,1)}}}break;case"width":ht(i,{width:st(e.width)}),this.renderOverflowMode(),this.popObj&&s<i.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":ht(this.element,{height:st(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(i,Jb),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(i,Jb):this.remove(i,Jb),f(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,Jb):this.remove(this.scrollModule.element,Jb)),f(this.popObj)||(e.enableRtl?this.add(this.popObj.element,Jb):this.remove(this.popObj.element,Jb)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":t.cssClass&&W([this.element],t.cssClass.split(" ")),e.cssClass&&z([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}}hideItem(e,t){const i="object"==typeof e;let r,o,s=e;const a=[].slice.call(bt("."+qa,this.element));if(i?o=e:this.tbarEle[s]&&(o=[].slice.call(bt("."+qa,this.element))[s]),o){if(t?o.classList.add(iP):o.classList.remove(iP),t&&f(this.element.getAttribute("tabindex"))&&!o.classList.contains(Ta)){if(f(o.firstElementChild.getAttribute("tabindex"))){o.firstElementChild.setAttribute("tabindex","-1");const l=[].slice.call(bt("."+qa,this.element));i&&(s=l.indexOf(o));let h=l[++s];for(;h;){if(!this.eleContains(h)){h.firstElementChild.removeAttribute("tabindex");break}h=l[++s]}}}else if(f(this.element.getAttribute("tabindex"))&&!o.classList.contains(Ta)){r=0;let l=!1,h=!1,c=a[r];for(;c;)if(c.classList.contains(Ta))c=a[++r];else if(f(c.firstElementChild.getAttribute("tabindex")))c.firstElementChild.setAttribute("tabindex","-1"),l=!0;else{if(l&&h)break;this.eleContains(c)||(c.firstElementChild.removeAttribute("tabindex"),h=!0),c=a[++r]}}this.refreshOverflow()}}};ur([rh([],Vh)],zh.prototype,"items",void 0),ur([_("auto")],zh.prototype,"width",void 0),ur([_("auto")],zh.prototype,"height",void 0),ur([_("")],zh.prototype,"cssClass",void 0),ur([_("Scrollable")],zh.prototype,"overflowMode",void 0),ur([_()],zh.prototype,"scrollStep",void 0),ur([_(!0)],zh.prototype,"enableCollision",void 0),ur([_(!0)],zh.prototype,"enableHtmlSanitizer",void 0),ur([_(!0)],zh.prototype,"allowKeyboard",void 0),ur([G()],zh.prototype,"clicked",void 0),ur([G()],zh.prototype,"created",void 0),ur([G()],zh.prototype,"destroyed",void 0),ur([G()],zh.prototype,"beforeCreate",void 0),zh=ur([as],zh);var Sr=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const G5="e-acrdn-root",t_="e-accordion",Cp="e-acrdn-item",Phe="e-item-focus",sP="e-hide",Ml="e-acrdn-header",oK="e-acrdn-header-content",Ff="e-acrdn-panel",$5="e-acrdn-content",nP="e-toggle-icon",Fhe="e-expand-icon",aK="e-rtl",lK="e-content-hide",hK="e-select",rP="e-selected",oP="e-active",Ak="e-overlay",K5="e-toggle-animation",fg="e-expand-state",Nhe="e-accordion-container";class aP extends ii{}Sr([_("SlideDown")],aP.prototype,"effect",void 0),Sr([_(400)],aP.prototype,"duration",void 0),Sr([_("linear")],aP.prototype,"easing",void 0);class cK extends ii{}Sr([di({effect:"SlideUp",duration:400,easing:"linear"},aP)],cK.prototype,"collapse",void 0),Sr([di({effect:"SlideDown",duration:400,easing:"linear"},aP)],cK.prototype,"expand",void 0);class dC extends ii{}Sr([_(null)],dC.prototype,"content",void 0),Sr([_(null)],dC.prototype,"header",void 0),Sr([_(null)],dC.prototype,"cssClass",void 0),Sr([_(null)],dC.prototype,"iconCss",void 0),Sr([_(!1)],dC.prototype,"expanded",void 0),Sr([_(!0)],dC.prototype,"visible",void 0),Sr([_(!1)],dC.prototype,"disabled",void 0),Sr([_()],dC.prototype,"id",void 0);let vc=class extends Qs{constructor(e,t){super(e,t),this.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"}}destroy(){(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate();const e=this.element;if(super.destroy(),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null),[].slice.call(e.children).forEach(t=>{e.removeChild(t)}),this.trgtEle){for(this.trgtEle=null;this.ctrlTem.firstElementChild;)e.appendChild(this.ctrlTem.firstElementChild);this.ctrlTem=null}e.classList.remove(G5),e.removeAttribute("style"),["aria-disabled","aria-multiselectable","role","data-ripple"].forEach(t=>{this.element.removeAttribute(t)}),!this.isNested&&Wb&&this.removeRippleEffect()}preRender(){const e=B(this.element,"."+Ff);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),e&&e.firstElementChild&&e.firstElementChild.firstElementChild?e.firstElementChild.firstElementChild.classList.contains(t_)&&(e.classList.add("e-nested"),this.isNested=!0):this.element.classList.add(G5),this.enableRtl&&this.add(this.element,aK)}add(e,t){e.classList.add(t)}remove(e,t){e.classList.remove(t)}render(){this.initializeHeaderTemplate(),this.initializeItemTemplate(),this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()}initialize(){const e=st(this.width),t=st(this.height);ht(this.element,{width:e,height:t}),f(this.initExpand)&&(this.initExpand=[]),this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),Rt(this.element,{"aria-disabled":"false",role:"presentation","aria-multiselectable":"true"}),"Single"===this.expandMode&&this.element.setAttribute("aria-multiselectable","false")}renderControl(){this.trgtEle=this.element.children.length>0?X("div",this.element):null,this.renderItems(),this.initItemExpand()}wireFocusEvents(){const e=[].slice.call(this.element.querySelectorAll("."+Cp));for(const t of e){const i=t.querySelector("."+Ml);t.childElementCount>0&&i&&(k.clearEvents(i),k.add(i,"focus",this.focusIn,this),k.add(i,"blur",this.focusOut,this))}}unwireEvents(){k.remove(this.element,"click",this.clickHandler),f(this.keyModule)||this.keyModule.destroy()}wireEvents(){k.add(this.element,"click",this.clickHandler,this),!this.isNested&&!this.isDestroy&&(this.removeRippleEffect=uc(this.element,{selector:"."+Ml})),this.isNested||(this.keyModule=new Gn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))}templateParser(e){if(e)try{return document.querySelectorAll(e).length?ji(document.querySelector(e).innerHTML.trim()):ji(e)}catch(t){return ji(e)}}initializeHeaderTemplate(){this.headerTemplate&&(this.headerTemplateFn=this.templateParser(this.headerTemplate))}initializeItemTemplate(){this.itemTemplate&&(this.itemTemplateFn=this.templateParser(this.itemTemplate))}getHeaderTemplate(){return this.headerTemplateFn}getItemTemplate(){return this.itemTemplateFn}focusIn(e){e.target.parentElement.classList.add(Phe)}focusOut(e){e.target.parentElement.classList.remove(Phe)}ctrlTemplate(){let e;this.ctrlTem=this.element.cloneNode(!0);const t=X("."+Nhe,this.element);e=t?t.children:this.element.children;const i=[];[].slice.call(e).forEach(s=>{i.push({header:s.childElementCount>0&&s.children[0]?s.children[0]:"",content:s.childElementCount>1&&s.children[1]?s.children[1]:""}),s.parentNode.removeChild(s)}),t&&this.element.removeChild(t),this.setProperties({items:i},!0)}toggleIconGenerate(){const e=this.createElement("div",{className:nP}),t=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return e.appendChild(t),e}initItemExpand(){const e=this.initExpand.length;if(0!==e){if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[e-1]);else for(let t=0;t<e;t++)this.expandItem(!0,this.initExpand[t]);this.isReact&&this.renderReactTemplates()}}renderItems(){const e=this.element;let t,i;if(f(this.trgtEle)||this.ctrlTemplate(),this.dataSource.length>0)this.dataSource.forEach((s,r)=>{i=this.renderInnerItem(s,r),e.appendChild(i),i.childElementCount>0&&(k.add(i.querySelector("."+Ml),"focus",this.focusIn,this),k.add(i.querySelector("."+Ml),"blur",this.focusOut,this))});else{const s=this.items;e&&s.length>0&&s.forEach((r,o)=>{t=this.renderInnerItem(r,o),e.appendChild(t),t.childElementCount>0&&(k.add(t.querySelector("."+Ml),"focus",this.focusIn,this),k.add(t.querySelector("."+Ml),"blur",this.focusOut,this))})}this.isReact&&this.renderReactTemplates()}clickHandler(e){const t=e.target,i=this.getItems(),s={};let r;if(B(t,"."+t_)!==this.element)return;t.classList.add("e-target");const a=B(t,"."+Cp);let c,l=B(t,"."+Ml),h=B(t,"."+Ff);a&&(f(l)||f(h))&&(l=a.children[0],h=a.children[1]),l&&(r=X("."+nP,l)),l?c=B(l,"."+Cp):h&&(c=B(h,"."+Cp));const m=this.getIndexByItem(a);c&&(s.item=i[this.getIndexByItem(c)]),s.originalEvent=e,!f(r)&&a.childElementCount<=1&&(f(h)||!f(X("."+Ml+" ."+nP,c)))?(a.appendChild(this.contentRendering(m)),this.ariaAttrUpdate(a),this.afterContentRender(t,s,a,l,h,c)):this.afterContentRender(t,s,a,l,h,c),this.isReact&&this.renderReactTemplates()}afterContentRender(e,t,i,s,r,o){const a=[];this.trigger("clicked",t);let l=r&&!f(X(".e-target",r));const c=r&&!f(X("."+t_,r))&&f(B(e,".e-acrdn-panel .e-accordion")),m=r&&f(X("."+t_,r))||B(e,"."+t_)!==this.element;if(l=l&&(c||m),e.classList.remove("e-target"),e.classList.contains(Ff)||e.classList.contains($5)||l)return;const b=this.element.querySelector("."+Nhe);[].slice.call(b?b.children:this.element.children).forEach(L=>{L.classList.contains(oP)&&a.push(L)});const w=[].slice.call(this.element.querySelectorAll("."+Cp+" [e-animate]"));if(w.length>0)for(const L of w)a.push(L.parentElement);const E=-1!==a.indexOf(o)&&"true"===r.getAttribute("e-animate");let D=!1;if(!f(i)&&!f(s)){const L=X("."+Ff,i),V=B(i,"."+G5).querySelector("."+fg);if(f(L))return;D=V===i,!Xr(L)||E&&!o.classList.contains(rP)?(a.length>0&&"Single"===this.expandMode&&!E&&a.forEach($=>{this.collapse(X("."+Ff,$)),$.classList.remove(fg)}),this.expand(L)):this.collapse(L),!f(V)&&!D&&V.classList.remove(fg)}}eleMoveFocus(e,t,i){let s,r=B(i,"."+Cp);i===t?s=("moveUp"===e?i.lastElementChild:i).querySelector("."+Ml):i.classList.contains(Ml)&&(r="moveUp"===e?r.previousElementSibling:r.nextElementSibling,r&&(s=X("."+Ml,r))),s&&s.focus()}keyActionHandler(e){const t=e.target;if(f(B(e.target,Ml))&&!t.classList.contains(t_)&&!t.classList.contains(Ml))return;let s;const r=this.element;let o;switch(e.action){case"moveUp":case"moveDown":this.eleMoveFocus(e.action,r,t);break;case"space":case"enter":o=t.nextElementSibling,!f(o)&&o.classList.contains(Ff)?"true"!==o.getAttribute("e-animate")&&t.click():t.click(),e.preventDefault();break;case"home":case"end":s="home"===e.action?r.firstElementChild.children[0]:r.lastElementChild.children[0],s.focus(),e.preventDefault()}}headerEleGenerate(){const e=this.createElement("div",{className:Ml,id:Tn("acrdn_header")});return Rt(e,{tabindex:"0",role:"heading","aria-label":"collapsed","aria-disabled":"false","aria-level":this.getItems().length.toString()}),e}renderInnerItem(e,t){const i=this.createElement("div",{className:Cp,id:e.id||Tn("acrdn_item"),attrs:{"aria-expanded":"false",role:"row"}});if(this.headerTemplate){const r=this.headerEleGenerate(),o=this.createElement("div",{className:oK});return r.appendChild(o),mi(this.getHeaderTemplate()(e,this,"headerTemplate",this.element.id+"_headerTemplate",!1),o),i.appendChild(r),r.appendChild(this.toggleIconGenerate()),this.add(i,hK),i}if(e.header&&this.angularnativeCondiCheck(e,"header")){this.enableHtmlSanitizer&&"string"==typeof e.header&&(e.header=hr.sanitize(e.header));const r=this.headerEleGenerate(),o=this.createElement("div",{className:oK});r.appendChild(o),r.appendChild(this.fetchElement(o,e.header,t,!0)),i.appendChild(r)}let s=X("."+Ml,i);if(e.expanded&&!f(t)&&!this.enablePersistence&&-1===this.initExpand.indexOf(t)&&this.initExpand.push(t),e.cssClass&&z([i],e.cssClass.split(" ")),e.disabled&&z([i],Ak),!1===e.visible&&z([i],sP),e.iconCss){const r=this.createElement("div",{className:"e-acrdn-header-icon"}),o=this.createElement("span",{className:e.iconCss+" e-icons"});r.appendChild(o),f(s)?(s=this.headerEleGenerate(),s.appendChild(r),i.appendChild(s)):s.insertBefore(r,s.childNodes[0])}if(e.content&&this.angularnativeCondiCheck(e,"content")){const r=this.toggleIconGenerate();f(s)&&(s=this.headerEleGenerate(),i.appendChild(s)),s.appendChild(r),this.add(i,hK)}return i}angularnativeCondiCheck(e,t){const s="content"===t?e.content:e.header;if(this.isAngular&&!f(s.elementRef)){const r=s.elementRef.nativeElement.data;if(f(r)||""===r||-1===r.indexOf("bindings="))return!0;const o=JSON.parse(s.elementRef.nativeElement.data.replace("bindings=",""));return!(!f(o)&&"false"===o["ng-reflect-ng-if"])}return!0}fetchElement(e,t,i,s){let r,o,a;try{if(document.querySelectorAll(t).length&&"Button"!==t){const l=document.querySelector(t);o=l.outerHTML.trim(),e.appendChild(l),l.style.display=""}else r=ji(t)}catch(l){"string"==typeof t?e.innerHTML=hr.sanitize(t):!f(this.trgtEle)&&t instanceof HTMLElement?(e.appendChild(t),e.firstElementChild.style.display=""):r=ji(t)}if(!f(r)){let l,h;this.isReact&&this.renderReactTemplates(),e.classList.contains(oK)?(l=this.element.id+i+"_header",h="header"):e.classList.contains($5)&&(l=this.element.id+i+"_content",h="content"),a=r({},this,h,l,this.isStringTemplate)}return f(a)||!(a.length>0)||f(a[0].tagName)&&1===a.length?0===e.childElementCount&&(e.innerHTML=hr.sanitize(t)):[].slice.call(a).forEach(l=>{f(l.tagName)||(l.style.display=""),e.appendChild(l)}),f(o)||-1===this.templateEle.indexOf(t)&&this.templateEle.push(t),e}ariaAttrUpdate(e){const t=X("."+Ml,e),i=X("."+Ff,e);t.setAttribute("aria-controls",i.id),i.setAttribute("aria-labelledby",t.id),i.setAttribute("role","definition")}contentRendering(e){const t=this.createElement("div",{className:Ff+" "+lK,id:Tn("acrdn_panel")});Rt(t,{"aria-hidden":"true"});const i=this.createElement("div",{className:$5});return this.dataSource.length>0?(this.isReact&&this.renderReactTemplates(),mi(this.getItemTemplate()(this.dataSource[e],this,"itemTemplate",this.element.id+"_itemTemplate",!1),i),t.appendChild(i)):(this.enableHtmlSanitizer&&typeof this.items[e].content&&(this.items[e].content=hr.sanitize(this.items[e].content)),t.appendChild(this.fetchElement(i,this.items[e].content,e,!1))),t}expand(e){const t=this.getItems(),i=B(e,"."+Cp);if(f(e)||Xr(e)&&"true"!==e.getAttribute("e-animate")||i.classList.contains(Ak))return;const r=B(i,"."+G5).querySelector("."+fg),o={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},a=X("."+nP,i).firstElementChild,l={element:i,item:t[this.getIndexByItem(i)],index:this.getIndexByItem(i),content:i.querySelector("."+Ff),isExpanded:!0};this.trigger("expanding",l,h=>{h.cancel||(a.classList.add(K5),this.expandedItemsPush(i),f(r)||r.classList.remove(fg),i.classList.add(fg),"None"===o.name?(this.expandProgress("begin",a,e,i,h),this.expandProgress("end",a,e,i,h)):this.expandAnimation(o.name,a,e,i,o,h))})}expandAnimation(e,t,i,s,r,o){let a;this.lastActiveItemId=s.id,"SlideDown"===e?(r.begin=()=>{this.expandProgress("begin",t,i,s,o),i.style.position="absolute",a=s.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",s.style.maxHeight=""},r.progress=()=>{s.style.minHeight=a+i.offsetHeight+"px"},r.end=()=>{ht(i,{position:"",maxHeight:""}),s.style.minHeight="",this.expandProgress("end",t,i,s,o)}):(r.begin=()=>{this.expandProgress("begin",t,i,s,o)},r.end=()=>{this.expandProgress("end",t,i,s,o)}),new mo(r).animate(i)}expandProgress(e,t,i,s,r){this.remove(i,lK),this.add(s,rP),this.add(t,Fhe),"end"===e&&(this.add(s,oP),i.setAttribute("aria-hidden","false"),Rt(s,{"aria-expanded":"true"}),Rt(i.previousElementSibling,{"aria-label":"expanded"}),t.classList.remove(K5),this.trigger("expanded",r))}expandedItemsPush(e){const t=this.getIndexByItem(e);if(-1===this.expandedIndices.indexOf(t)){const i=[].slice.call(this.expandedIndices);i.push(t),this.setProperties({expandedIndices:i},!0)}}getIndexByItem(e){const t=this.getItemElements();return[].slice.call(t).indexOf(e)}getItemElements(){const e=[];return[].slice.call(this.element.children).forEach(i=>{i.classList.contains(Cp)&&e.push(i)}),e}expandedItemsPop(e){const t=this.getIndexByItem(e),i=[].slice.call(this.expandedIndices);i.splice(i.indexOf(t),1),this.setProperties({expandedIndices:i},!0)}collapse(e){const t=this.getItems(),i=B(e,"."+Cp);if(f(e)||!Xr(e)||i.classList.contains(Ak))return;const s={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},r=X("."+nP,i).firstElementChild,o={element:i,item:t[this.getIndexByItem(i)],index:this.getIndexByItem(i),content:i.querySelector("."+Ff),isExpanded:!1};this.trigger("expanding",o,a=>{a.cancel||(this.expandedItemsPop(i),i.classList.remove(fg),r.classList.add(K5),"None"===s.name?(this.collapseProgress("begin",r,e,i,a),this.collapseProgress("end",r,e,i,a)):this.collapseAnimation(s.name,e,i,r,s,a))})}collapseAnimation(e,t,i,s,r,o){let a,l,h,c;this.lastActiveItemId=i.id,"SlideUp"===e?(r.begin=()=>{h=i.offsetHeight,i.style.minHeight=h+"px",t.style.position="absolute",a=i.offsetHeight,l=t.offsetHeight,t.style.maxHeight=l+"px",this.collapseProgress("begin",s,t,i,o)},r.progress=()=>{c=a-(l-t.offsetHeight),c<h&&(i.style.minHeight=c+"px")},r.end=()=>{t.style.display="none",this.collapseProgress("end",s,t,i,o),i.style.minHeight="",ht(t,{position:"",maxHeight:"",display:""})}):(r.begin=()=>{this.collapseProgress("begin",s,t,i,o)},r.end=()=>{this.collapseProgress("end",s,t,i,o)}),new mo(r).animate(t)}collapseProgress(e,t,i,s,r){this.remove(t,Fhe),this.remove(s,rP),"end"===e&&(this.add(i,lK),t.classList.remove(K5),this.remove(s,oP),i.setAttribute("aria-hidden","true"),Rt(s,{"aria-expanded":"false"}),Rt(i.previousElementSibling,{"aria-label":"collapsed"}),this.trigger("expanded",r))}getModuleName(){return"accordion"}itemAttribUpdate(){const e=this.getItems(),t=this.getItemElements(),i=e.length;t.forEach(s=>{X("."+Ml,s).setAttribute("aria-level",""+i)})}getItems(){let e;return e=this.itemTemplate&&this.headerTemplate?this.dataSource:this.items,e}addItem(e,t){const i=this.element,s=this.getItemElements(),r=this.getItems();f(t)&&(t=r.length),i.childElementCount>=t&&(e instanceof Array?e:[e]).forEach((a,l)=>{const h=t+l;r.splice(h,0,a);const c=this.renderInnerItem(a,h);i.childElementCount===h?i.appendChild(c):i.insertBefore(c,s[h]),k.add(c.querySelector("."+Ml),"focus",this.focusIn,this),k.add(c.querySelector("."+Ml),"blur",this.focusOut,this),this.itemAttribUpdate(),this.expandedIndices=[],this.expandedItemRefresh(i),a&&a.expanded&&this.expandItem(!0,h)}),this.isReact&&this.renderReactTemplates()}expandedItemRefresh(e){const t=this.getItemElements();[].slice.call(t).forEach(i=>{i.classList.contains(rP)&&this.expandedItemsPush(i)})}removeItem(e){this.isReact&&this.clearTemplate(["headerTemplate","itemTemplate"],e);const i=this.getItemElements()[e],s=this.getItems();f(i)||(this.restoreContent(e),te(i),s.splice(e,1),this.itemAttribUpdate(),this.expandedIndices=[],this.expandedItemRefresh(this.element))}select(e){const i=this.getItemElements()[e];f(i)||f(X("."+Ml,i))||i.children[0].focus()}hideItem(e,t){const s=this.getItemElements()[e];f(s)||(f(t)&&(t=!0),t?this.add(s,sP):this.remove(s,sP))}enableItem(e,t){const s=this.getItemElements()[e];if(f(s))return;const r=s.firstElementChild;t?(this.remove(s,Ak),Rt(r,{tabindex:"0","aria-disabled":"false"}),r.focus()):(s.classList.contains(oP)&&(this.expandItem(!1,e),this.eleMoveFocus("movedown",this.element,r)),this.add(s,Ak),r.setAttribute("aria-disabled","true"),r.removeAttribute("tabindex"))}expandItem(e,t){const i=this.getItemElements();if(f(t))if("Single"===this.expandMode&&e){const s=i[i.length-1];this.itemExpand(e,s,this.getIndexByItem(s))}else{const s=X("#"+this.lastActiveItemId,this.element);[].slice.call(i).forEach(o=>{this.itemExpand(e,o,this.getIndexByItem(o)),o.classList.remove(fg)});const r=X("."+fg,this.element);r&&r.classList.remove(fg),s&&s.classList.add(fg)}else{const s=i[t];if(f(s)||!s.classList.contains(hK)||s.classList.contains(oP)&&e)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(e,s,t)}}itemExpand(e,t,i){let s=t.children[1];t.classList.contains(Ak)||(f(s)&&e?(s=this.contentRendering(i),t.appendChild(s),this.ariaAttrUpdate(t),this.expand(s)):f(s)||(e?this.expand(s):this.collapse(s)),this.isReact&&this.renderReactTemplates())}destroyItems(){this.restoreContent(null),(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate(),[].slice.call(this.element.querySelectorAll("."+Cp)).forEach(e=>{te(e)})}restoreContent(e){let t;t=f(e)?this.element:this.element.querySelectorAll("."+Cp)[e],this.templateEle.forEach(i=>{f(t.querySelector(i))||(document.body.appendChild(t.querySelector(i)).style.display="none")})}updateItem(e,t){if(!f(e)){const i=this.getItems(),s=i[t];i.splice(t,1),this.restoreContent(t),te(e),this.addItem(s,t)}}setTemplate(e,t,i){t.innerHTML="",this.templateCompile(t,e,i),this.isReact&&this.renderReactTemplates()}templateCompile(e,t,i){const s=this.createElement("div");this.fetchElement(s,t,i,!1),0!==s.childNodes.length&&[].slice.call(s.childNodes).forEach(r=>{e.appendChild(r)})}getPersistData(){return this.addOnPersist(["expandedIndices"])}onPropertyChanged(e,t){const i=this.element;let s=!1;for(const r of Object.keys(e))switch(r){case"items":if(e.items instanceof Array&&t.items instanceof Array)s=!0;else{const o=Object.keys(e.items);for(let a=0;a<o.length;a++){const l=parseInt(Object.keys(e.items)[a],10),h=Object.keys(e.items[l])[0],c=bt("."+Cp,this.element)[l],m=Object(t.items[l])[h],b=Object(e.items[l])[h],v=h;if(("header"===v||"iconCss"===v||"expanded"===v||"content"===v&&""===m)&&this.updateItem(c,l),"cssClass"===h&&!f(c)&&(c.classList.remove(m),c.classList.add(b)),"visible"===h&&!f(c)&&(!1===Object(e.items[l])[h]?c.classList.add(sP):c.classList.remove(sP)),"disabled"===h&&!f(c)&&this.enableItem(l,!b),"content"===h&&!f(c)&&2===c.children.length)if("function"==typeof b){const w=c.querySelector("."+$5);w.innerHTML="",this.setTemplate(b,w,l)}else c.classList.contains(rP)&&this.expandItem(!1,l),te(c.querySelector("."+Ff))}}break;case"dataSource":case"expandedIndices":null===this.expandedIndices&&(this.expandedIndices=[]),s=!0;break;case"headerTemplate":this.initializeHeaderTemplate(),s=!0;break;case"itemTemplate":this.initializeItemTemplate(),s=!0;break;case"enableRtl":e.enableRtl?this.add(i,aK):this.remove(i,aK);break;case"height":ht(this.element,{height:st(e.height)});break;case"width":ht(this.element,{width:st(e.width)});break;case"expandMode":"Single"===e.expandMode?(this.element.setAttribute("aria-multiselectable","false"),this.expandedIndices.length>1&&this.expandItem(!1)):this.element.setAttribute("aria-multiselectable","true")}s&&(this.initExpand=[],this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),this.destroyItems(),this.renderItems(),this.initItemExpand())}};Sr([rh([],dC)],vc.prototype,"items",void 0),Sr([_([])],vc.prototype,"dataSource",void 0),Sr([_()],vc.prototype,"itemTemplate",void 0),Sr([_()],vc.prototype,"headerTemplate",void 0),Sr([_("100%")],vc.prototype,"width",void 0),Sr([_("auto")],vc.prototype,"height",void 0),Sr([_([])],vc.prototype,"expandedIndices",void 0),Sr([_("Multiple")],vc.prototype,"expandMode",void 0),Sr([_(!1)],vc.prototype,"enableHtmlSanitizer",void 0),Sr([di({},cK)],vc.prototype,"animation",void 0),Sr([G()],vc.prototype,"clicked",void 0),Sr([G()],vc.prototype,"expanding",void 0),Sr([G()],vc.prototype,"expanded",void 0),Sr([G()],vc.prototype,"created",void 0),Sr([G()],vc.prototype,"destroyed",void 0),vc=Sr([as],vc);var Y5=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let eS=class extends Ua{constructor(e,t){super(e,t)}preRender(){this.isMenu=!1,this.element.id=this.element.id||Tn("ej2-contextmenu"),super.preRender()}initialize(){super.initialize(),Rt(this.element,{role:"menubar",tabindex:"0"}),this.element.style.zIndex=zw(this.element).toString()}open(e,t,i){super.openMenu(null,null,e,t,null,i)}close(){super.closeMenu()}onPropertyChanged(e,t){super.onPropertyChanged(e,t);for(const i of Object.keys(e))switch(i){case"filter":this.close(),this.filter=e.filter;break;case"target":this.unWireEvents(t.target),this.wireEvents()}}getModuleName(){return"contextmenu"}};Y5([_("")],eS.prototype,"target",void 0),Y5([_("")],eS.prototype,"filter",void 0),Y5([rh([],cg)],eS.prototype,"items",void 0),eS=Y5([as],eS);var uC=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const mg="e-vertical",dK="e-hamburger";let ey=class extends Ua{constructor(e,t){super(e,t),this.tempItems=[]}getModuleName(){return"menu"}preRender(){if(this.isMenu=!0,this.element.id=this.element.id||Tn("ej2-menu"),this.template)try{document.querySelectorAll(this.template).length&&(this.template=document.querySelector(this.template).innerHTML.trim(),this.clearChanges())}catch(e){}else this.updateMenuItems(this.items);super.preRender()}initialize(){super.initialize(),Rt(this.element,{role:"menubar",tabindex:"0"}),"Vertical"===this.orientation?(this.element.classList.add(mg),this.hamburgerMode&&!this.target&&this.element.previousElementSibling.classList.add(mg),this.element.setAttribute("aria-orientation","vertical")):q.isDevice&&!this.enableScrolling&&this.element.parentElement.classList.add("e-scrollable"),this.hamburgerMode&&(this.element.parentElement.classList.add(dK),"Horizontal"===this.orientation&&this.element.classList.add("e-hide-menu"))}updateMenuItems(e){this.tempItems=e,this.items=[],this.tempItems.map(this.createMenuItems,this),this.setProperties({items:this.items},!0),this.tempItems=[]}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"orientation":"Vertical"===e.orientation?(this.element.classList.add(mg),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.add(mg),this.element.classList.remove("e-hide-menu")),this.element.setAttribute("aria-orientation","vertical")):(this.element.classList.remove(mg),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.remove(mg),this.element.classList.add("e-hide-menu")),this.element.removeAttribute("aria-orientation"));break;case"items":Object.keys(t.items).length||this.updateMenuItems(e.items);break;case"hamburgerMode":this.element.previousElementSibling||super.createHeaderContainer(),e.hamburgerMode?(this.element.parentElement.classList.add(dK),[].slice.call(this.element.getElementsByClassName("e-blankicon")).forEach(s=>{s.style[this.enableRtl?"paddingRight":"paddingLeft"]=""})):(this.element.parentElement.classList.remove(dK),"Vertical"===this.orientation&&this.setBlankIconStyle(this.element)),"Vertical"===this.orientation?(this.target||this.element.previousElementSibling.classList.add(mg),this.element.classList.remove("e-hide-menu")):(this.target?this.element.previousElementSibling.classList.add(mg):this.element.previousElementSibling.classList.remove(mg),this.element.classList[e.hamburgerMode?"add":"remove"]("e-hide-menu"));break;case"title":this.hamburgerMode&&this.element.previousElementSibling&&(e.title=this.enableHtmlSanitizer?hr.sanitize(e.title):e.title,this.element.previousElementSibling.querySelector(".e-menu-title").innerHTML=e.title);break;case"target":this.hamburgerMode&&(this.unWireEvents(t.target),this.wireEvents(),"Horizontal"===this.orientation&&(e.target?this.element.previousElementSibling.classList.add(mg):(this.element.previousElementSibling||super.createHeaderContainer(),this.element.previousElementSibling.classList.remove(mg)),this.element.classList.add("e-hide-menu")))}super.onPropertyChanged(e,t)}createMenuItems(e){let t,i,s=this.items;const r=this.getField("parentId");if(e[r]){for(t=this.getIndex(e[r].toString(),!0),i=0;i<t.length;i++)s[t[i]].items||(s[t[i]].items=[]),s=s[t[i]].items;s.push(e)}else this.items.push(e)}open(){super.openHamburgerMenu()}close(){super.closeHamburgerMenu()}};uC([_("Horizontal")],ey.prototype,"orientation",void 0),uC([_("")],ey.prototype,"target",void 0),uC([_(null)],ey.prototype,"template",void 0),uC([_(!1)],ey.prototype,"enableScrolling",void 0),uC([_(!1)],ey.prototype,"hamburgerMode",void 0),uC([_("Menu")],ey.prototype,"title",void 0),uC([_(!1)],ey.prototype,"enableHtmlSanitizer",void 0),uC([di({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},hC)],ey.prototype,"fields",void 0),ey=uC([as],ey);var Vs=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const pC="e-tab",Cc="e-tab-header",nn="e-content",Z5="e-nested",Wa="e-item",uK="e-template",pK="e-rtl",Dn="e-active",tS="e-disable",Or="e-hidden",fK="e-focused",mK="e-icons",gK="e-icon",Bhe="e-icon-tab",bK="e-close-icon",X5="e-close-show",Q5="e-tab-text",Lk="e-indicator",Nf="e-tab-wrap",J5="e-text-wrap",Hhe="e-tab-icon",wp="e-toolbar-items",rn="e-toolbar-item",Vhe="e-toolbar-pop",fC="e-toolbar-popup",ej="e-progress",yK="e-overlay",vK="e-vertical-tab",CK="e-vertical",jhe="e-vertical-left",Uhe="e-vertical-right",qhe="e-horizontal-bottom",wK="e-fill-mode",SK="e-reorder-active-item";class lP extends ii{}Vs([_("SlideLeftIn")],lP.prototype,"effect",void 0),Vs([_(600)],lP.prototype,"duration",void 0),Vs([_("ease")],lP.prototype,"easing",void 0);class xK extends ii{}Vs([di({effect:"SlideLeftIn",duration:600,easing:"ease"},lP)],xK.prototype,"previous",void 0),Vs([di({effect:"SlideRightIn",duration:600,easing:"ease"},lP)],xK.prototype,"next",void 0);class tj extends ii{}Vs([_("")],tj.prototype,"text",void 0),Vs([_("")],tj.prototype,"iconCss",void 0),Vs([_("left")],tj.prototype,"iconPosition",void 0);class iS extends ii{}Vs([di({},tj)],iS.prototype,"header",void 0),Vs([_(null)],iS.prototype,"headerTemplate",void 0),Vs([_("")],iS.prototype,"content",void 0),Vs([_("")],iS.prototype,"cssClass",void 0),Vs([_(!1)],iS.prototype,"disabled",void 0),Vs([_(!0)],iS.prototype,"visible",void 0),Vs([_()],iS.prototype,"id",void 0);let br=class extends Qs{constructor(e,t){super(e,t),this.show={},this.hide={},this.maxHeight=0,this.title="Close",this.isInteracted=!1,this.lastIndex=0,this.isAdd=!1,this.isIconAlone=!1,this.draggableItems=[],this.resizeContext=this.refreshActiveTabBorder.bind(this),this.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"}}destroy(){if((this.isReact||this.isAngular)&&this.clearTemplate(),f(this.tbObj)||(this.tbObj.destroy(),this.tbObj=null),this.unWireEvents(),["role","aria-disabled","aria-activedescendant","tabindex","aria-orientation"].forEach(e=>{this.element.removeAttribute(e)}),this.expTemplateContent(),this.isTemplate){const e=X(".e-tab > ."+nn,this.element);this.element.classList.remove(uK),f(e)||(e.innerHTML=this.cnt)}else for(;this.element.firstElementChild;)Yt(this.element.firstElementChild);if(this.btnCls&&(this.btnCls=null),this.hdrEle=null,this.cntEle=null,this.tbItems=null,this.tbItem=null,this.tbPop=null,this.prevItem=null,this.popEle=null,this.bdrLine=null,this.content=null,this.dragItem=null,this.cloneElement=null,this.draggingItems=[],this.draggableItems&&this.draggableItems.length>0){for(let e=0;e<this.draggableItems.length;e++)this.draggableItems[e].destroy(),this.draggableItems[e]=null;this.draggableItems=[]}super.destroy(),this.trigger("destroyed")}refresh(){this.isReact&&this.clearTemplate(),super.refresh(),this.isReact&&this.renderReactTemplates()}preRender(){const e=B(this.element,"."+nn);this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwipeed=!1,this.itemIndexArray=[],this.templateEle=[],this.allowDragAndDrop&&(this.dragArea=f(this.dragArea)?"#"+this.element.id+" ."+Cc:this.dragArea),f(e)||(e.parentElement.classList.add(Z5),this.isNested=!0);const t=q.info.name,i="msie"===t?"e-ie":"edge"===t?"e-edge":"safari"===t?"e-safari":"";ht(this.element,{width:st(this.width),height:st(this.height)}),this.setCssClass(this.element,this.cssClass,!0),Rt(this.element,{role:"tablist","aria-disabled":"false","aria-activedescendant":""}),this.setCssClass(this.element,i,!0),this.updatePopAnimationConfig()}render(){this.btnCls=this.createElement("span",{className:mK+" "+bK,attrs:{title:this.title}}),this.tabId=this.element.id.length>0?"-"+this.element.id:rae(),this.renderContainer(),this.wireEvents(),this.initRender=!1}renderContainer(){const e=this.element;if(this.items.forEach((t,i)=>{f(t.id)&&!f(t.setProperties)&&t.setProperties({id:"tabitem_"+i.toString()},!0)}),this.items.length>0&&0===e.children.length)e.appendChild(this.createElement("div",{className:nn})),this.setOrientation(this.headerPlacement,this.createElement("div",{className:Cc})),this.isTemplate=!1;else if(this.element.children.length>0){this.isTemplate=!0,e.classList.add(uK);const t=e.querySelector("."+Cc);t&&"Bottom"===this.headerPlacement&&this.setOrientation(this.headerPlacement,t)}if(!f(X("."+Cc,this.element))&&!f(X("."+nn,this.element))){if(this.renderHeader(),this.tbItems=X("."+Cc+" ."+wp,this.element),f(this.tbItems)||uc(this.tbItems,{selector:".e-tab-wrap"}),this.renderContent(),bt("."+rn,this.element).length>0){this.tbItems=X("."+Cc+" ."+wp,this.element),this.bdrLine=this.createElement("div",{className:Lk+" "+Or+" e-ignore"});const t=X("."+this.scrCntClass,this.tbItems);f(t)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstChild):t.insertBefore(this.bdrLine,t.firstChild),this.setContentHeight(!0),this.select(this.selectedItem)}if(!f(this.tbItem))for(let t=0;t<this.items.length;t++)this.tbItem[t].setAttribute("data-id",this.items[t].id);this.setRTL(this.enableRtl)}}serverItemsChanged(){if(this.enableAnimation=!1,this.setActive(this.selectedItem,!0),"Dynamic"!==this.loadOn&&!f(this.cntEle)){const e=[].slice.call(this.cntEle.children),t=nn+this.tabId+"_"+this.selectedItem;e.forEach(i=>{i.classList.contains(Dn)&&i.id!==t&&i.classList.remove(Dn),i.id===t&&i.classList.add(Dn)}),this.prevIndex=this.selectedItem,this.triggerAnimation(Wa+this.tabId+"_"+this.selectedItem,!1)}this.enableAnimation=!0}headerReady(){if(this.initRender=!0,this.hdrEle=this.getTabHeader(),this.setOrientation(this.headerPlacement,this.hdrEle),f(this.hdrEle)||(this.tbObj=this.hdrEle&&this.hdrEle.ej2_instances[0]),this.tbObj.clicked=this.clickHandler.bind(this),this.tbObj.on("onItemsChanged",this.serverItemsChanged.bind(this)),this.tbItems=X("."+Cc+" ."+wp,this.element),f(this.tbItems)||uc(this.tbItems,{selector:".e-tab-wrap"}),bt("."+rn,this.element).length>0){this.bdrLine=X("."+Lk+".e-ignore",this.element);const e=X("."+this.scrCntClass,this.tbItems);f(e)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstElementChild):e.insertBefore(this.bdrLine,e.firstElementChild),this.select(this.selectedItem)}if(this.cntEle=X(".e-tab > ."+nn,this.element),f(this.cntEle)||(this.touchModule=new Lr(this.cntEle,{swipe:this.swipeHandler.bind(this)})),"Demand"===this.loadOn){const e=this.setActiveContent();this.triggerAnimation(e,!1)}this.initRender=!1,this.renderComplete()}setActiveContent(){const e=Wa+this.tabId+"_"+this.selectedItem,t=this.getTrgContent(this.cntEle,this.extIndex(e));return f(t)||t.classList.add(Dn),e}renderHeader(){const e=this.headerPlacement;let t=[];if(this.hdrEle=this.getTabHeader(),this.addVerticalClass(),this.isTemplate){this.element.children.length>1&&this.element.children[1].classList.contains(Cc)&&this.setProperties({headerPlacement:"Bottom"},!0);const i=this.hdrEle.children.length,s=[];for(let r=0;r<i;r++)s.push(this.hdrEle.children.item(r).innerHTML);if(i>0){for(;this.hdrEle.firstElementChild;)te(this.hdrEle.firstElementChild);const r=this.createElement("div",{className:"e-items"});this.hdrEle.appendChild(r),s.forEach((o,a)=>{this.lastIndex=a;const l={className:Wa,id:Wa+this.tabId+"_"+a,attrs:{role:"tab","aria-controls":nn+this.tabId+"_"+a,"aria-selected":"false"}},h=this.createElement("span",{className:Q5,innerHTML:o,attrs:{role:"presentation"}}).outerHTML,c=this.createElement("div",{className:J5,innerHTML:h+this.btnCls.outerHTML}).outerHTML,m=this.createElement("div",{className:Nf,innerHTML:c,attrs:{tabIndex:"-1"}});r.appendChild(this.createElement("div",l)),bt("."+Wa,r)[a].appendChild(m)})}}else t=this.parseObject(this.items,0);this.tbObj=new zh({width:"Left"===e||"Right"===e?"auto":"100%",height:"Left"===e||"Right"===e?"100%":"auto",overflowMode:this.overflowMode,items:0!==t.length?t:[],clicked:this.clickHandler.bind(this),scrollStep:this.scrollStep,enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tbObj.isStringTemplate=!0,this.tbObj.createElement=this.createElement,this.tbObj.appendTo(this.hdrEle),Rt(this.hdrEle,{"aria-label":"tab-header"}),this.updateOrientationAttribute(),this.setCloseButton(this.showCloseButton)}renderContent(){this.cntEle=X("."+nn,this.element);const e=bt("."+rn,this.element);if(this.isTemplate){this.cnt=this.cntEle.children.length>0?this.cntEle.innerHTML:"";const t=this.cntEle.children;for(let i=0;i<e.length;i++)t.length-1>=i&&(z([t.item(i)],Wa),Rt(t.item(i),{role:"tabpanel","aria-labelledby":Wa+this.tabId+"_"+i}),t.item(i).id=nn+this.tabId+"_"+i)}}reRenderItems(){this.renderContainer(),f(this.cntEle)||(this.touchModule=new Lr(this.cntEle,{swipe:this.swipeHandler.bind(this)}))}parseObject(e,t){const i=bt(".e-tab-header ."+rn,this.element);let s=this.lastIndex;if(!this.isReplace&&i.length>0){const l=[];i.forEach(h=>{l.push(parseInt(h.id.slice(h.id.indexOf("_")+1),10))}),s=Math.max(...l)}const r=[];let o;const a=[];return e.forEach((l,h)=>{const c=f(l.header)||f(l.header.iconPosition)?"":l.header.iconPosition,m=f(l.header)||f(l.header.iconCss)?"":l.header.iconCss;if(f(l.headerTemplate)&&(f(l.header)||f(l.header.text)||0===l.header.text.length&&""===m))return void a.push(h);let v,b=l.headerTemplate||l.header.text;if("string"==typeof b&&this.enableHtmlSanitizer&&(b=hr.sanitize(b)),this.isReplace&&!f(this.tbId)&&""!==this.tbId){const Ye=this.tbId.indexOf("_");v=parseInt(this.tbId.substring(Ye+1),10),this.tbId=""}else v=t+h;this.lastIndex=0===i.length?h:this.isReplace?v:s+1+h;const w=l.disabled?" "+tS+" "+yK:"",E=!1===l.visible?" "+Or:"";o=this.createElement("div",{className:Q5,attrs:{role:"presentation"}});const D=b instanceof Object?b.outerHTML:b,L=!f(D)&&""!==D;let N;f(b.tagName)?this.headerTextCompile(o,b,h):o.appendChild(b);const V=this.createElement("span",{className:mK+" "+Hhe+" "+gK+"-"+c+" "+m}),$=this.createElement("div",{className:J5});$.appendChild(o),""!==b&&void 0!==b&&""!==m?("left"===c||"top"===c?$.insertBefore(V,$.firstElementChild):$.appendChild(V),N=o,this.isIconAlone=!1):(N=""===m?o:V,N===V&&(te(o),$.appendChild(V),this.isIconAlone=!0));const ie=l.disabled?{}:{tabIndex:"-1"};$.appendChild(this.btnCls.cloneNode(!0));const Q=this.createElement("div",{className:Nf,attrs:ie});Q.appendChild($),this.itemIndexArray===[]?this.itemIndexArray.push(Wa+this.tabId+"_"+this.lastIndex):this.itemIndexArray.splice(t+h,0,Wa+this.tabId+"_"+this.lastIndex);const ke={htmlAttributes:{id:Wa+this.tabId+"_"+this.lastIndex,role:"tab","aria-selected":"false"},template:Q};ke.cssClass=(void 0!==l.cssClass?l.cssClass:" ")+" "+w+" "+E+" "+(""!==m?"e-i"+c:"")+" "+(L?"":gK),("top"===c||"bottom"===c)&&this.element.classList.add("e-vertical-icon"),r.push(ke),h++}),this.isAdd||a.forEach(l=>{this.items.splice(l,1)}),this.isIconAlone?this.element.classList.add(Bhe):this.element.classList.remove(Bhe),r}removeActiveClass(){const e=this.getTabHeader();if(e){const t=bt("."+rn+"."+Dn,e);[].slice.call(t).forEach(i=>i.classList.remove(Dn))}}checkPopupOverflow(e){this.tbPop=X("."+Vhe,this.element);const t=X(".e-hor-nav",this.element),i=X("."+wp,this.element),s=i.lastChild;let r=!1;return(!this.isVertical()&&(this.enableRtl&&t.offsetLeft+t.offsetWidth>i.offsetLeft||!this.enableRtl&&t.offsetLeft<i.offsetWidth)||this.isVertical()&&t.offsetTop<s.offsetTop+s.offsetHeight)&&(r=!0),r&&(e.classList.add(fC),this.tbPop.insertBefore(e,bt("."+fC,this.tbPop)[0])),!0}popupHandler(e){const t=e.querySelector(".e-ripple-element");f(t)||(t.outerHTML="",e.querySelector("."+Nf).classList.remove("e-ripple")),this.tbItem=bt("."+wp+" ."+rn,this.hdrEle);const i=this.tbItem[this.tbItem.length-1];return 0!==this.tbItem.length&&(e.classList.remove(fC),e.removeAttribute("style"),this.tbItems.appendChild(e),this.actEleId=e.id,this.checkPopupOverflow(i)&&this.checkPopupOverflow(this.tbItems.lastChild.previousElementSibling),this.isPopup=!0),bt("."+rn,this.tbItems).length-1}updateOrientationAttribute(){Rt(this.element,{"aria-orientation":this.isVertical()?"vertical":"horizontal"})}setCloseButton(e){const t=X("."+Cc,this.element);!0===e?t.classList.add(X5):t.classList.remove(X5),this.tbObj.refreshOverflow(),this.refreshActiveTabBorder()}prevCtnAnimation(e,t){let i;return this.enableRtl||this.element.classList.contains(pK),i=this.isPopup||e<=t?"SlideLeftIn"===this.animation.previous.effect?{name:"SlideLeftOut",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}:null:"SlideRightIn"===this.animation.next.effect?{name:"SlideRightOut",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}:null,i}triggerPrevAnimation(e,t){const i=this.prevCtnAnimation(t,this.selectedItem);f(i)?e.classList.remove(Dn):(i.begin=()=>{ht(e,{position:"absolute"}),e.classList.add(ej),e.classList.add("e-view")},i.end=()=>{e.style.display="none",e.classList.remove(Dn),e.classList.remove(ej),e.classList.remove("e-view"),ht(e,{display:"",position:""}),0===e.childNodes.length&&!this.isTemplate&&te(e)},new mo(i).animate(e))}triggerAnimation(e,t){const i=this.prevIndex;let s;[].slice.call(this.element.querySelector("."+nn).children).forEach(c=>{c.id===this.prevActiveEle&&(s=c)});const o=this.tbItem[i],a=this.getTrgContent(this.cntEle,this.extIndex(e));if(f(s)&&!f(o)){const c=this.extIndex(o.id);s=this.getTrgContent(this.cntEle,c)}if(f(a)||(this.prevActiveEle=a.id),this.initRender||!1===t||this.animation==={}||f(this.animation))return void(s&&s!==a&&s.classList.remove(Dn));const l=X("."+nn,this.element);let h;if(this.prevIndex>this.selectedItem&&!this.isPopup){const c=this.animation.previous.effect;h={name:"None"===c?"":"SlideLeftIn"!==c?c:"SlideLeftIn",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.selectedItem||this.prevIndex===this.selectedItem){const c=this.animation.next.effect;h={name:"None"===c?"":"SlideRightIn"!==c?c:"SlideRightIn",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}}h.progress=()=>{l.classList.add(ej),this.setActiveBorder()},h.end=()=>{l.classList.remove(ej),a.classList.add(Dn)},!this.initRender&&!f(s)&&this.triggerPrevAnimation(s,i),this.isPopup=!1,""===h.name?a.classList.add(Dn):new mo(h).animate(a)}keyPressed(e){const t=B(e,"."+Cc+" ."+rn),i=this.getEleIndex(t);!f(this.popEle)&&e.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):e.classList.contains("e-scroll-nav")?e.click():!f(t)&&!1===t.classList.contains(Dn)&&(this.selectTab(i,null,!0),f(this.popEle)||this.popObj.hide(this.hide))}getTabHeader(){if(f(this.element))return;const e=[].slice.call(this.element.children).filter(t=>t.classList.contains(Cc));if(e.length>0)return e[0];{const t=[].slice.call(this.element.children).filter(i=>!i.classList.contains("blazor-template"))[0];return t?[].slice.call(t.children).filter(i=>i.classList.contains(Cc))[0]:void 0}}getEleIndex(e){return Array.prototype.indexOf.call(bt("."+rn,this.getTabHeader()),e)}extIndex(e){return e.replace(Wa+this.tabId+"_","")}expTemplateContent(){this.templateEle.forEach(e=>{f(this.element.querySelector(e))||(document.body.appendChild(this.element.querySelector(e)).style.display="none")})}templateCompile(e,t,i){const s=this.createElement("div");this.compileElement(s,t,"content",i),0!==s.childNodes.length&&e.appendChild(s),this.isReact&&this.renderReactTemplates()}compileElement(e,t,i,s){let r,o;"string"==typeof t?(t=t.trim(),this.isVue?r=ji(hr.sanitize(t)):e.innerHTML=hr.sanitize(t)):r=ji(t),f(r)||(o=r({},this,i)),!f(r)&&o.length>0&&[].slice.call(o).forEach(a=>{e.appendChild(a)})}headerTextCompile(e,t,i){this.compileElement(e,t,"headerTemplate",i)}getContent(e,t,i,s){let r;if("string"==typeof(t=f(t)?"":t)||f(t.innerHTML))if("string"==typeof t&&this.enableHtmlSanitizer&&(t=hr.sanitize(t)),"."===t[0]||"#"===t[0])if(document.querySelectorAll(t).length){const o=document.querySelector(t);r=o.outerHTML.trim(),"clone"===i?e.appendChild(o.cloneNode(!0)):(e.appendChild(o),o.style.display="")}else this.templateCompile(e,t,s);else this.templateCompile(e,t,s);else e.appendChild(t);f(r)||-1===this.templateEle.indexOf(t.toString())&&this.templateEle.push(t.toString())}getTrgContent(e,t){let i;return i=this.element.classList.contains(Z5)?X("."+Z5+"> ."+nn+" > #"+nn+this.tabId+"_"+t,this.element):this.findEle(e.children,nn+this.tabId+"_"+t),i}findEle(e,t){let i;for(let s=0;s<e.length;s++)if(e[s].id===t){i=e[s];break}return i}isVertical(){const e="Left"===this.headerPlacement||"Right"===this.headerPlacement;return this.scrCntClass=e?"e-vscroll-content":"e-hscroll-content",e}addVerticalClass(){if(this.isVertical()){const e="Left"===this.headerPlacement?jhe:Uhe;z([this.hdrEle],[CK,e]),this.element.classList.contains(Z5)?z([this.hdrEle],[vK,e]):z([this.element],[vK,e])}"Bottom"===this.headerPlacement&&z([this.hdrEle],[qhe])}updatePopAnimationConfig(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}}changeOrientation(e){this.setOrientation(e,this.hdrEle);const t=this.hdrEle.querySelector("."+Dn),i=!!this.hdrEle.classList.contains(CK);W([this.element],[vK]),W([this.hdrEle],[CK,jhe,Uhe]),i!==this.isVertical()&&(this.changeToolbarOrientation(),!f(t)&&t.classList.contains(fC)&&this.popupHandler(t)),this.addVerticalClass(),this.updateOrientationAttribute(),this.setActiveBorder(),this.focusItem()}focusItem(){const e=X(" #"+Wa+this.tabId+"_"+this.selectedItem,this.hdrEle);f(e)||e.firstElementChild.focus()}changeToolbarOrientation(){this.tbObj.setProperties({height:this.isVertical()?"100%":"auto",width:this.isVertical()?"auto":"100%"},!0),this.tbObj.changeOrientation(),this.updatePopAnimationConfig()}setOrientation(e,t){const i=Array.prototype.indexOf.call(this.element.children,t),s=Array.prototype.indexOf.call(this.element.children,this.element.querySelector("."+nn));"Bottom"===e&&s>i?this.element.appendChild(t):(W([t],[qhe]),this.element.insertBefore(t,X("."+nn,this.element)))}setCssClass(e,t,i){if(""===t)return;const s=t.split(" ");for(let r=0;r<s.length;r++)i?e.classList.add(s[r]):e.classList.remove(s[r])}setContentHeight(e){if(this.element.classList.contains(wK)&&W([this.element],[wK]),f(this.cntEle))return;const t=this.getTabHeader();if("None"===this.heightAdjustMode){if("auto"===this.height)return;this.isVertical()||ht(this.cntEle,{height:this.element.offsetHeight-t.offsetHeight+"px"})}else if("Fill"===this.heightAdjustMode)z([this.element],[wK]),ht(this.element,{height:"100%"}),ht(this.cntEle,{height:this.element.offsetHeight-t.offsetHeight+"px"});else if("Auto"===this.heightAdjustMode){if(!0===this.isTemplate){const i=bt("."+nn+" > ."+Wa,this.element);for(let s=0;s<i.length;s++)i[s].setAttribute("style","display:block; visibility: visible"),this.maxHeight=Math.max(this.maxHeight,this.getHeight(i[s])),i[s].style.removeProperty("display"),i[s].style.removeProperty("visibility")}else{this.cntEle=X("."+nn,this.element),!0===e&&this.cntEle.appendChild(this.createElement("div",{id:nn+this.tabId+"_0",className:Wa+" "+Dn,attrs:{role:"tabpanel","aria-labelledby":Wa+this.tabId+"_0"}}));const i=this.cntEle.children.item(0);for(let s=0;s<this.items.length;s++)for(this.getContent(i,this.items[s].content,"clone",s),this.maxHeight=Math.max(this.maxHeight,this.getHeight(i));i.firstChild;)i.removeChild(i.firstChild);this.isReact&&this.clearTemplate(["content"]),this.templateEle=[],this.getContent(i,this.items[0].content,"render",0),this.prevIndex!==this.selectedItem&&i.classList.remove(Dn)}ht(this.cntEle,{height:this.maxHeight+"px"})}else ht(this.cntEle,{height:"auto"})}getHeight(e){const t=window.getComputedStyle(e);return e.offsetHeight+parseFloat(t.getPropertyValue("padding-top"))+parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}setActiveBorder(){const e=this.getTabHeader(),t=X("."+rn+"."+Dn,e);if(f(t))return;this.reorderActiveTab?e&&e.classList.remove(SK):(t.classList.contains(fC)&&!this.bdrLine.classList.contains(Or)&&this.bdrLine.classList.add(Or),e&&!e.classList.contains(SK)&&e.classList.add(SK));const i=B(t,"."+pC);if(this.element!==i)return;this.tbItems=X("."+wp,e);const s=X("."+Lk,e),r=X("."+wp+" ."+this.scrCntClass,e);if(this.isVertical())ht(s,{left:"",right:""}),0!==(f(r)?this.tbItems.offsetHeight:r.offsetHeight)?ht(s,{top:t.offsetTop+"px",height:t.offsetHeight+"px"}):ht(s,{top:0,height:0});else{"MultiRow"===this.overflowMode?ht(X("."+Lk,this.element),{top:t.offsetHeight+t.offsetTop+"px",height:""}):ht(s,{top:"",height:""});let o=f(r)?this.tbItems.offsetWidth:r.offsetWidth;ht(s,0!==o?{left:t.offsetLeft+"px",right:o-(t.offsetLeft+t.offsetWidth)+"px"}:{left:"auto",right:"auto"})}!f(this.bdrLine)&&!t.classList.contains(fC)&&this.bdrLine.classList.remove(Or)}setActive(e,t=!1,i=!1){this.tbItem=bt("."+rn,this.getTabHeader());const s=this.tbItem[e];if(e<0||isNaN(e)||0===this.tbItem.length)return;if(e>=0&&!t&&(this.allowServerDataBinding=!1,this.setProperties({selectedItem:e},!0),this.allowServerDataBinding=!0,this.initRender||this.serverDataBind()),s.classList.contains(Dn))return void this.setActiveBorder();if(!this.isTemplate){const a=this.tbItem[this.prevIndex];f(a)||a.removeAttribute("aria-controls"),Rt(s,{"aria-controls":nn+this.tabId+"_"+e})}const r=s.id;this.removeActiveClass(),s.classList.add(Dn),this.tbItem[this.prevIndex].setAttribute("aria-selected","false"),s.setAttribute("aria-selected","true");const o=Number(this.extIndex(r));if(f(this.prevActiveEle)&&(this.prevActiveEle=nn+this.tabId+"_"+o),Rt(this.element,{"aria-activedescendant":r}),this.isTemplate){if(X("."+nn,this.element).children.length>0){const a=this.findEle(X("."+nn,this.element).children,nn+this.tabId+"_"+o);f(a)||a.classList.add(Dn),this.triggerAnimation(r,this.enableAnimation)}}else{this.cntEle=X(".e-tab > ."+nn,this.element);const a=this.getTrgContent(this.cntEle,this.extIndex(r));if(f(a)){this.cntEle.appendChild(this.createElement("div",{id:nn+this.tabId+"_"+this.extIndex(r),className:Wa+" "+Dn,attrs:{role:"tabpanel","aria-labelledby":Wa+this.tabId+"_"+this.extIndex(r)}}));const l=this.getTrgContent(this.cntEle,this.extIndex(r)),h=Array.prototype.indexOf.call(this.itemIndexArray,r);this.getContent(l,this.items[h].content,"render",h)}else a.classList.add(Dn);this.triggerAnimation(r,this.enableAnimation)}if(this.setActiveBorder(),this.refreshItemVisibility(s),!this.initRender&&!t){s.firstElementChild.focus();const a={previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:s,selectedIndex:e,selectedContent:X("#"+nn+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,isInteracted:i};this.trigger("selected",a)}}contentReady(){const e=this.setActiveContent();this.triggerAnimation(e,this.enableAnimation)}setItems(e){this.isReplace=!0,this.tbItems=X("."+wp,this.getTabHeader()),this.tbObj.items=this.parseObject(e,0),this.tbObj.dataBind(),this.isReplace=!1}setRTL(e){this.tbObj.enableRtl=e,this.tbObj.dataBind(),this.setCssClass(this.element,pK,e),this.refreshActiveBorder()}refreshActiveBorder(){f(this.bdrLine)||this.bdrLine.classList.add(Or),this.setActiveBorder()}showPopup(e){const t=X(".e-popup.e-toolbar-pop",this.hdrEle);if(t.classList.contains("e-popup-close")){const i=t&&t.ej2_instances[0];i.position.X="Left"===this.headerPlacement?"left":"right",i.dataBind(),i.show(e)}}bindDraggable(){this.allowDragAndDrop&&this.element.querySelector("."+Cc).querySelectorAll("."+rn).forEach(i=>{this.initializeDrag(i)})}wireEvents(){this.bindDraggable(),window.addEventListener("resize",this.resizeContext),k.add(this.element,"mouseover",this.hoverHandler,this),k.add(this.element,"keydown",this.spaceKeyDown,this),f(this.cntEle)||(this.touchModule=new Lr(this.cntEle,{swipe:this.swipeHandler.bind(this)})),this.keyModule=new Gn(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new Gn(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})}unWireEvents(){f(this.keyModule)||this.keyModule.destroy(),f(this.tabKeyModule)||this.tabKeyModule.destroy(),!f(this.cntEle)&&!f(this.touchModule)&&(this.touchModule.destroy(),this.touchModule=null),window.removeEventListener("resize",this.resizeContext),k.remove(this.element,"mouseover",this.hoverHandler),k.remove(this.element,"keydown",this.spaceKeyDown),this.element.classList.remove(pK),this.element.classList.remove(fK)}clickHandler(e){this.element.classList.remove(fK);const t=e.originalEvent.target,i=B(t,"."+rn),s=this.getEleIndex(i);t.classList.contains(bK)?this.removeTab(s):this.isVertical()&&B(t,".e-hor-nav")?this.showPopup(this.show):(this.isPopup=!1,!f(i)&&(s!==this.selectedItem||s!==this.prevIndex)&&this.selectTab(s,e.originalEvent,!0))}swipeHandler(e){if(e.velocity<3&&f(e.originalEvent.changedTouches))return;this.isNested&&this.element.setAttribute("data-swipe","true");const t=this.element.querySelector('[data-swipe="true"]');if(t)t.removeAttribute("data-swipe");else{if(this.isSwipeed=!0,"Right"===e.swipeDirection&&0!==this.selectedItem){for(let i=this.selectedItem-1;i>=0;i--)if(!this.tbItem[i].classList.contains(Or)){this.selectTab(i,null,!0);break}}else if("Left"===e.swipeDirection&&this.selectedItem!==bt("."+rn,this.element).length-1)for(let i=this.selectedItem+1;i<this.tbItem.length;i++)if(!this.tbItem[i].classList.contains(Or)){this.selectTab(i,null,!0);break}this.isSwipeed=!1}}spaceKeyDown(e){(32===e.keyCode&&32===e.which||35===e.keyCode&&35===e.which)&&(f(B(e.target,"."+Cc))||e.preventDefault())}keyHandler(e){if(this.element.classList.contains(tS))return;this.element.classList.add(fK);const t=e.target,i=this.getTabHeader(),s=X("."+Dn,i);this.popEle=X("."+Vhe,i),f(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]);const r=B(document.activeElement,"."+rn),o=B(t,"."+rn);switch(e.action){case"space":case"enter":if(t.parentElement.classList.contains(tS))return;if("enter"===e.action&&t.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(t);break;case"tab":case"shiftTab":t.classList.contains(Nf)&&!1===B(t,"."+rn).classList.contains(Dn)&&t.setAttribute("tabindex","-1"),this.popObj&&Xr(this.popObj.element)&&this.popObj.hide(this.hide),s.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":f(r)||this.refreshItemVisibility(r);break;case"openPopup":e.preventDefault(),!f(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":if(!0===this.showCloseButton&&!f(o)){const a=o.nextSibling;!f(a)&&a.classList.contains(rn)&&a.firstElementChild.focus(),this.removeTab(this.getEleIndex(o))}this.setActiveBorder()}}refreshActiveTabBorder(){const e=X("."+rn+"."+fC+"."+Dn,this.element);!f(e)&&this.reorderActiveTab&&this.select(this.getEleIndex(e)),this.refreshActiveBorder()}refreshItemVisibility(e){const t=X("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!f(t)){const i=X(".e-hscroll-bar",this.tbItems),s=i.scrollLeft,r=s+i.offsetWidth,o=e.offsetLeft,a=e.offsetWidth,l=e.offsetLeft+e.offsetWidth;s<o&&r<l?i.scrollLeft=s+(a-(r-o)):s>o&&r>l&&(i.scrollLeft=s-(a-(l-s)))}}hoverHandler(e){const t=e.target;!f(t.classList)&&t.classList.contains(bK)&&t.setAttribute("title",new jo("tab",{closeButtonTitle:this.title},this.locale).getConstant("closeButtonTitle"))}evalOnPropertyChangeItems(e,t){if(e.items instanceof Array&&t.items instanceof Array)if(this.lastIndex=0,f(this.tbObj))this.reRenderItems();else{(this.isReact||this.isAngular)&&this.clearTemplate(),this.setItems(e.items),this.templateEle.length>0&&this.expTemplateContent(),this.templateEle=[];const i=X(".e-tab > ."+nn,this.element);for(;i.firstElementChild;)te(i.firstElementChild);this.select(this.selectedItem),this.draggableItems=[],this.bindDraggable()}else{const i=Object.keys(e.items);for(let s=0;s<i.length;s++){const r=parseInt(Object.keys(e.items)[s],10),o=Object.keys(e.items[r]);for(let a=0;a<o.length;a++){const l=Object(t.items[r])[o[a]],h=Object(e.items[r])[o[a]],c=this.element.querySelectorAll("."+rn)[r];let m;if(c&&!f(c.id)&&""!==c.id){const w=c.id.lastIndexOf("_");m=parseInt(c.id.substring(w+1),10)}else m=r;const b=X("."+wp+" #"+Wa+this.tabId+"_"+m,this.element),v=X("."+nn+" #"+nn+this.tabId+"_"+m,this.element);if("header"===o[a]||"headerTemplate"===o[a]){const w=f(this.items[r].header)||f(this.items[r].header.iconCss)?"":this.items[r].header.iconCss;if(""===(this.items[r].headerTemplate||this.items[r].header.text)&&""===w)this.removeTab(r);else{this.tbId=c.id;const D=[];D.push(this.items[r]),this.items.splice(r,1),this.itemIndexArray.splice(r,1),this.tbObj.items.splice(r,1);const L=b.classList.contains(Or);te(b),this.isReplace=!0,this.addTab(D,r),L&&this.hideTab(r),this.isReplace=!1}}if("content"===o[a]&&!f(v))if("string"!=typeof h&&!f(h.innerHTML)||"."!==h[0]&&"#"!==h[0]||!h.length)""===h&&"#"===l[0]?(document.body.appendChild(this.element.querySelector(l)).style.display="none",v.innerHTML=h):this.isReact?(v.innerHTML="",this.templateCompile(v,h,r)):"function"!=typeof h&&(v.innerHTML=h);else{const E=document.querySelector(h);v.appendChild(E),E.style.display=""}"cssClass"===o[a]&&(f(b)||(b.classList.remove(l),b.classList.add(h)),f(v)||(v.classList.remove(l),v.classList.add(h))),"disabled"===o[a]&&this.enableTab(r,!0!==h),"visible"===o[a]&&this.hideTab(r,!0!==h)}}}}initializeDrag(e){let t=new vn(e,{dragArea:this.dragArea,dragTarget:"."+rn,clone:!0,helper:this.helper.bind(this),dragStart:this.itemDragStart.bind(this),drag:i=>{let r,o,s=this.getEleIndex(this.dragItem),a={draggedItem:this.dragItem,event:i.event,target:i.target,droppedItem:i.target.closest("."+rn),clonedElement:this.cloneElement,index:s};if(f(i.target.closest("."+pC))||i.target.closest("."+pC).isEqualNode(this.element)||this.dragArea==="."+Cc){if(i.target.closest(this.dragArea)||"Popup"===this.overflowMode?(document.body.style.cursor="",this.dragItem.querySelector("."+Nf).style.visibility="hidden",this.cloneElement.classList.contains(Or)&&W([this.cloneElement],Or)):(document.body.style.cursor="not-allowed",z([this.cloneElement],Or),this.dragItem.classList.contains(Or)&&W([this.dragItem],Or),this.dragItem.querySelector("."+Nf).style.visibility="visible"),"Scrollable"===this.overflowMode&&!f(this.element.querySelector(".e-hscroll"))){let h=this.element.querySelector(".e-scroll-right-nav"),c=this.element.querySelector(".e-scroll-left-nav"),m=this.element.querySelector(".e-hscroll-bar");!f(h)&&Math.abs(h.offsetWidth/2+h.offsetLeft)>this.cloneElement.offsetLeft+this.cloneElement.offsetWidth&&(m.scrollLeft-=10),!f(c)&&Math.abs(c.offsetLeft+c.offsetWidth-this.cloneElement.offsetLeft)>c.offsetWidth/2&&(m.scrollLeft+=10)}this.cloneElement.style.pointerEvents="none",o=B(i.target,"."+rn+".e-draggable");let l=0;"Scrollable"===this.overflowMode&&!f(this.element.querySelector(".e-hscroll"))&&(l=this.element.querySelector(".e-hscroll-content").offsetWidth),null!=o&&!o.isSameNode(this.dragItem)&&o.closest("."+pC).isSameNode(this.dragItem.closest("."+pC))&&(r=this.getEleIndex(o),r<s&&Math.abs(o.offsetLeft+o.offsetWidth-this.cloneElement.offsetLeft)>o.offsetWidth/2&&this.dragAction(o,s,r),r>s&&Math.abs(o.offsetWidth/2)+o.offsetLeft-l<this.cloneElement.offsetLeft+this.cloneElement.offsetWidth&&this.dragAction(o,s,r)),this.droppedIndex=this.getEleIndex(this.dragItem),this.trigger("dragging",a)}else this.trigger("dragging",a)},dragStop:this.itemDragStop.bind(this)});this.draggableItems.push(t)}helper(e){return this.cloneElement=this.createElement("div"),e.element&&(this.cloneElement=e.element.cloneNode(!0),z([this.cloneElement],"e-tab-clone-element"),this.element.querySelector("."+Cc).classList.contains(X5)&&z([this.cloneElement],X5),W([this.cloneElement.querySelector("."+Nf)],"e-ripple"),f(this.cloneElement.querySelector(".e-ripple-element"))||Yt(this.cloneElement.querySelector(".e-ripple-element")),document.body.appendChild(this.cloneElement)),this.cloneElement}itemDragStart(e){this.draggingItems=this.items.map(i=>i),this.dragItem=e.element;let t={draggedItem:e.element,event:e.event,target:e.target,droppedItem:null,index:this.getEleIndex(this.dragItem),clonedElement:this.cloneElement,cancel:!1};this.trigger("onDragStart",t,i=>{i.cancel?te(this.cloneElement):(this.removeActiveClass(),z([this.tbItems.querySelector("."+Lk)],Or),this.dragItem.querySelector("."+Nf).style.visibility="hidden")})}dragAction(e,t,i){if(this.items.length>0){let s=this.draggingItems[t];this.draggingItems.splice(t,1),this.draggingItems.splice(i,0,s)}if("MultiRow"===this.overflowMode&&e.parentNode.insertBefore(this.dragItem,e.nextElementSibling),t>i)if(this.dragItem.parentElement.isSameNode(e.parentElement))this.dragItem.parentNode.insertBefore(this.dragItem,e);else if("Extended"===this.overflowMode)if(e.isSameNode(e.parentElement.lastChild)){let s=this.dragItem.parentNode;e.parentNode.insertBefore(this.dragItem,e),s.insertBefore(e.parentElement.lastChild,s.childNodes[0])}else this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e);else{let s=e.parentElement.lastChild;if(e.isSameNode(s)){let r=this.dragItem.parentNode;e.parentNode.insertBefore(this.dragItem,e),r.insertBefore(s,r.childNodes[0])}else this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e)}t<i&&(this.dragItem.parentElement.isSameNode(e.parentElement)?this.dragItem.parentNode.insertBefore(e,this.dragItem):"Extended"===this.overflowMode?(this.dragItem.parentElement.appendChild(e.parentElement.firstElementChild),e.parentNode.insertBefore(this.dragItem,e.nextSibling)):(this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e)))}itemDragStop(e){te(this.cloneElement),this.cloneElement=null,this.dragItem.querySelector("."+Nf).style.visibility="visible",document.body.style.cursor="",this.trigger("dragged",{draggedItem:this.dragItem,event:e.event,target:e.target,droppedItem:this.tbItem[this.droppedIndex],clonedElement:null,index:this.droppedIndex,cancel:!1},i=>{i.cancel?this.refresh():this.items.length>0&&this.draggingItems.length>0?(this.items=this.draggingItems,this.selectedItem=this.droppedIndex,this.refresh()):(this.dragItem.querySelector("."+Nf).style.visibility="",W([this.tbItems.querySelector("."+Lk)],Or),this.selectTab(this.droppedIndex,null,!0))}),this.dragItem=null}enableTab(e,t){const i=bt("."+rn,this.element)[e];f(i)||(!0===t?(i.classList.remove(tS,yK),i.firstElementChild.setAttribute("tabindex","-1")):(i.classList.add(tS,yK),i.firstElementChild.removeAttribute("tabindex"),i.classList.contains(Dn)&&this.select(e+1)),f(this.items[e])||(this.items[e].disabled=!t,this.dataBind()),i.setAttribute("aria-disabled",!0===t?"false":"true"))}addTab(e,t){const i={addedItems:e,cancel:!1};this.isReplace?this.addingTabContent(e,t):this.trigger("adding",i,s=>{s.cancel||this.addingTabContent(e,t)}),this.isReact&&this.renderReactTemplates()}addingTabContent(e,t){let i=0;if(this.hdrEle=X("."+Cc,this.element),f(this.hdrEle))this.items=e,this.reRenderItems();else{const s=bt(".e-tab-header ."+rn,this.element).length;if(0!==s&&(i=this.lastIndex+1),f(t)&&(t=s-1),s<t||t<0||isNaN(t))return;0===s&&!f(this.hdrEle)&&(this.hdrEle.style.display=""),f(this.bdrLine)||this.bdrLine.classList.add(Or),this.tbItems=X("."+wp,this.getTabHeader()),this.isAdd=!0;const r=this.parseObject(e,t);this.isAdd=!1;let a,o=0;e.forEach((l,h)=>{if(a=l.headerTemplate||l.header.text,f(l.headerTemplate||l.header)||f(a)||0===a.length&&!f(l.header)&&f(l.header.iconCss)||(this.items.splice(t+o,0,l),o++),this.isTemplate&&!f(l.header)&&!f(l.header.text)){const c=i+h,m=this.createElement("div",{id:nn+this.tabId+"_"+c,className:Wa,attrs:{role:"tabpanel","aria-labelledby":Wa+"_"+c}});this.cntEle.insertBefore(m,this.cntEle.children[t+h]);const b=this.getTrgContent(this.cntEle,c.toString());this.getContent(b,l.content,"render",t)}}),this.tbObj.addItems(r,t),this.isReplace||this.trigger("added",{addedItems:e}),this.selectedItem===t?this.select(t):this.setActiveBorder(),this.bindDraggable()}}removeTab(e){const t=bt("."+rn,this.element)[e];f(t)||this.trigger("removing",{removedItem:t,removedIndex:e,cancel:!1},s=>{if(!s.cancel){this.tbObj.removeItems(e),this.allowDragAndDrop&&e!==Array.prototype.indexOf.call(this.itemIndexArray,t.id)&&(e=Array.prototype.indexOf.call(this.itemIndexArray,t.id)),this.items.splice(e,1),this.itemIndexArray.splice(e,1),this.refreshActiveBorder();const r=X("#"+nn+this.tabId+"_"+this.extIndex(t.id),X("."+nn,this.element));f(r)||te(r),this.trigger("removed",s),this.draggableItems&&this.draggableItems.length>0&&(this.draggableItems[e].destroy(),this.draggableItems[e]=null,this.draggableItems.splice(e,1)),t.classList.contains(Dn)?(e=e>bt("."+rn+":not(."+fC+")",this.element).length-1?e-1:e,this.enableAnimation=!1,this.selectedItem=e,this.select(e)):e!==this.selectedItem&&(e<this.selectedItem&&(e=this.itemIndexArray.indexOf(this.tbItem[this.selectedItem].id),this.setProperties({selectedItem:e>-1?e:this.selectedItem},!0),this.prevIndex=this.selectedItem),this.tbItem=bt("."+rn,this.getTabHeader())),0===bt("."+rn,this.element).length&&(this.hdrEle.style.display="none"),this.enableAnimation=!0}})}hideTab(e,t){let i;const s=bt("."+rn,this.element)[e];if(!f(s)){if(f(t)&&(t=!0),this.bdrLine.classList.add(Or),!0===t)if(s.classList.add(Or),i=bt("."+rn+":not(."+Or+")",this.tbItems),0!==i.length&&s.classList.contains(Dn)){if(0!==e)for(let r=e-1;r>=0;r--){if(!this.tbItem[r].classList.contains(Or)){this.select(r);break}if(0===r)for(let o=e+1;o<this.tbItem.length;o++)if(!this.tbItem[o].classList.contains(Or)){this.select(o);break}}else for(let r=e+1;r<this.tbItem.length;r++)if(!this.tbItem[r].classList.contains(Or)){this.select(r);break}}else 0===i.length&&this.element.classList.add(Or);else this.element.classList.remove(Or),i=bt("."+rn+":not(."+Or+")",this.tbItems),s.classList.remove(Or),0===i.length&&this.select(e);this.setActiveBorder(),s.setAttribute("aria-hidden",""+t),"Popup"===this.overflowMode&&this.tbObj&&this.tbObj.refreshOverflow()}}selectTab(e,t=null,i=!1){this.isInteracted=i,this.select(e,t)}select(e,t){const i=this.getTabHeader();this.tbItems=X("."+wp,i),this.tbItem=bt("."+rn,i),this.content=X("."+nn,this.element),this.prevItem=this.tbItem[this.prevIndex],f(this.selectedItem)||this.selectedItem<0||this.tbItem.length<=this.selectedItem||isNaN(this.selectedItem)?this.selectedItem=0:this.selectedID=this.extIndex(this.tbItem[this.selectedItem].id);const s=this.tbItem[e];f(s)?this.selectedID="0":this.selectingID=this.extIndex(s.id),!f(this.prevItem)&&!this.prevItem.classList.contains(tS)&&this.prevItem.children.item(0).setAttribute("tabindex","-1");const r={event:t,previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:this.tbItem[this.selectedItem],selectedIndex:this.selectedItem,selectedContent:f(this.content)?null:X("#"+nn+this.tabId+"_"+this.selectedID,this.content),selectingItem:s,selectingIndex:e,selectingContent:f(this.content)?null:X("#"+nn+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,isInteracted:this.isInteracted,cancel:!1};this.initRender?this.selectingContent(e,this.isInteracted):this.trigger("selecting",r,o=>{o.cancel||this.selectingContent(e,this.isInteracted)}),this.isInteracted=!1}selectingContent(e,t){if("number"==typeof e){if(!f(this.tbItem[e])&&(this.tbItem[e].classList.contains(tS)||this.tbItem[e].classList.contains(Or)))for(let i=e+1;i<this.items.length;i++){if(!1===this.items[i].disabled&&!0===this.items[i].visible){e=i;break}e=0}if(this.tbItem.length>e&&e>=0&&!isNaN(e))if(this.prevIndex=this.selectedItem,this.prevItem=this.tbItem[this.prevIndex],this.tbItem[e].classList.contains(fC)&&this.reorderActiveTab){if(this.setActive(this.popupHandler(this.tbItem[e]),null,t),!f(this.items)&&this.items.length>0&&this.allowDragAndDrop){this.tbItem=bt("."+wp+" ."+rn,this.hdrEle);let i=this.items[e];this.items.splice(e,1),this.items.splice(this.tbItem.length-1,0,i)}}else this.setActive(e,null,t);else this.setActive(0,null,t)}else e instanceof HTMLElement&&this.setActive(this.getEleIndex(e),null,t)}getItemIndex(e){let t;for(let i=0;i<this.tbItem.length;i++)if(e===this.tbItem[i].getAttribute("data-id")){t=i;break}return t}disable(e){this.setCssClass(this.element,tS,e),this.element.setAttribute("aria-disabled",""+e)}getPersistData(){return this.addOnPersist(["selectedItem","actEleId"])}getModuleName(){return"tab"}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"width":ht(this.element,{width:st(e.width)});break;case"height":ht(this.element,{height:st(e.height)}),this.setContentHeight(!1);break;case"cssClass":""===t.cssClass||f(t.cssClass)||this.setCssClass(this.element,t.cssClass,!1),this.setCssClass(this.element,e.cssClass,!0);break;case"items":this.evalOnPropertyChangeItems(e,t);break;case"showCloseButton":this.setCloseButton(e.showCloseButton);break;case"reorderActiveTab":this.refreshActiveTabBorder();break;case"selectedItem":this.selectedItem=t.selectedItem,this.select(e.selectedItem);break;case"headerPlacement":this.changeOrientation(e.headerPlacement);break;case"enableRtl":this.setRTL(e.enableRtl);break;case"overflowMode":this.tbObj.overflowMode=e.overflowMode,this.tbObj.dataBind(),this.refreshActiveTabBorder();break;case"heightAdjustMode":this.setContentHeight(!1),this.select(this.selectedItem);break;case"scrollStep":this.tbObj&&(this.tbObj.scrollStep=this.scrollStep);break;case"allowDragAndDrop":this.bindDraggable();break;case"dragArea":this.allowDragAndDrop&&(this.draggableItems.forEach(s=>{s.dragArea=this.dragArea}),this.refresh())}}refreshActiveTab(){if(this.isReact&&this.clearTemplate(),this.isTemplate){const e=this.element.querySelector("."+wp),t=this.element.querySelector("."+rn+"."+Dn),i=t.id,s=i.indexOf("_"),r=parseInt(i.substring(s+1),10),o=t.innerText,a=this.element.querySelector("."+nn).querySelector("."+Dn).children[0],l=a.innerHTML;te(t),te(a);const h={className:rn+" "+uK+" "+Dn,id:Wa+this.tabId+"_"+r,attrs:{role:"tab","aria-controls":nn+this.tabId+"_"+r,"aria-disabled":"false","aria-selected":"true"}},c=this.createElement("span",{className:Q5,innerHTML:o,attrs:{role:"presentation"}}).outerHTML,m=this.createElement("div",{className:J5,innerHTML:c+this.btnCls.outerHTML}).outerHTML,b=this.createElement("div",{className:Nf,innerHTML:m,attrs:{tabIndex:"-1"}});e.insertBefore(this.createElement("div",h),e.children[r+1]),this.element.querySelector("."+rn+"."+Dn).appendChild(b);const v=this.createElement("div",{innerHTML:l});this.element.querySelector("."+nn).querySelector("."+Dn).appendChild(v)}else if(this.element.querySelector("."+rn+"."+Dn)){te(this.element.querySelector("."+rn+"."+Dn).children[0]),te(this.element.querySelector("."+nn).querySelector("."+Dn).children[0]);const e=this.items[this.selectedItem],t=f(e.header)||f(e.header.iconPosition)?"":e.header.iconPosition,i=f(e.header)||f(e.header.iconCss)?"":e.header.iconCss,s=e.headerTemplate||e.header.text,r=this.createElement("div",{className:Q5,attrs:{role:"presentation"}});let o;f(s.tagName)?this.headerTextCompile(r,s,this.selectedItem):r.appendChild(s);const a=this.createElement("span",{className:mK+" "+Hhe+" "+gK+"-"+t+" "+i}),l=this.createElement("div",{className:J5});l.appendChild(r),""!==s&&void 0!==s&&""!==i?("left"===t||"top"===t?l.insertBefore(a,l.firstElementChild):l.appendChild(a),o=r,this.isIconAlone=!1):(o=""===i?r:a,o===a&&(te(r),l.appendChild(a),this.isIconAlone=!0));const h=e.disabled?{}:{tabIndex:"-1"};l.appendChild(this.btnCls.cloneNode(!0));const c=this.createElement("div",{className:Nf,attrs:h});c.appendChild(l),("top"===t||"bottom"===t)&&this.element.classList.add("e-vertical-icon"),this.element.querySelector("."+rn+"."+Dn).appendChild(c);const m=this.createElement("div");let v,b=e.content;if("string"==typeof b||f(b.innerHTML))if("string"==typeof b&&this.enableHtmlSanitizer&&(b=hr.sanitize(b)),"."===b[0]||"#"===b[0])if(document.querySelectorAll(b).length){const w=document.querySelector(b);v=w.outerHTML.trim(),m.appendChild(w),w.style.display=""}else this.compileElement(m,b,"content",this.selectedItem);else this.compileElement(m,b,"content",this.selectedItem);else m.appendChild(b);f(v)||-1===this.templateEle.indexOf(b.toString())&&this.templateEle.push(b.toString()),this.element.querySelector(".e-item."+Dn).appendChild(m)}this.isReact&&this.renderReactTemplates()}};Vs([rh([],iS)],br.prototype,"items",void 0),Vs([_("100%")],br.prototype,"width",void 0),Vs([_("auto")],br.prototype,"height",void 0),Vs([_("")],br.prototype,"cssClass",void 0),Vs([_(0)],br.prototype,"selectedItem",void 0),Vs([_("Top")],br.prototype,"headerPlacement",void 0),Vs([_("Content")],br.prototype,"heightAdjustMode",void 0),Vs([_("Scrollable")],br.prototype,"overflowMode",void 0),Vs([_("Dynamic")],br.prototype,"loadOn",void 0),Vs([_(!1)],br.prototype,"enablePersistence",void 0),Vs([_(!1)],br.prototype,"enableHtmlSanitizer",void 0),Vs([_(!1)],br.prototype,"showCloseButton",void 0),Vs([_(!0)],br.prototype,"reorderActiveTab",void 0),Vs([_()],br.prototype,"scrollStep",void 0),Vs([_()],br.prototype,"dragArea",void 0),Vs([_(!1)],br.prototype,"allowDragAndDrop",void 0),Vs([di({},xK)],br.prototype,"animation",void 0),Vs([G()],br.prototype,"created",void 0),Vs([G()],br.prototype,"adding",void 0),Vs([G()],br.prototype,"added",void 0),Vs([G()],br.prototype,"selecting",void 0),Vs([G()],br.prototype,"selected",void 0),Vs([G()],br.prototype,"removing",void 0),Vs([G()],br.prototype,"removed",void 0),Vs([G()],br.prototype,"onDragStart",void 0),Vs([G()],br.prototype,"dragging",void 0),Vs([G()],br.prototype,"dragged",void 0),Vs([G()],br.prototype,"destroyed",void 0),br=Vs([as],br);var EK,ki=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const gg="e-treeview",uh="e-icon-collapsible",xr="e-icon-expandable",is="e-list-item",i_="e-list-text",on="e-list-parent",ty="e-hover",Au="e-active",_K="e-icons-spinner",mC="e-process",Ga="e-icons",Ol="e-text-content",ij="e-input",Ghe="e-input-group",sj="e-tree-input",IK="e-editing",Khe="e-interaction",Yhe="e-droppable",TK="e-dragging",hP="e-sibling",nj="e-drop-in",cP="e-drop-next",DK="e-drop-out",kK="e-no-drop",gC="e-fullrow",Mk="e-selected",rj="e-expanded",Zhe="e-node-collapsed",wc="e-check",Bf="e-stop",Sp="e-checkbox-wrapper",bC="e-frame",Ok="e-node-focus",Jhe="e-list-img",oj="e-animation-active",ece="e-disabled",tce={treeRole:"tree",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""};class Sc extends ii{}ki([_("child")],Sc.prototype,"child",void 0),ki([_([])],Sc.prototype,"dataSource",void 0),ki([_("expanded")],Sc.prototype,"expanded",void 0),ki([_("hasChildren")],Sc.prototype,"hasChildren",void 0),ki([_("htmlAttributes")],Sc.prototype,"htmlAttributes",void 0),ki([_("iconCss")],Sc.prototype,"iconCss",void 0),ki([_("id")],Sc.prototype,"id",void 0),ki([_("imageUrl")],Sc.prototype,"imageUrl",void 0),ki([_("isChecked")],Sc.prototype,"isChecked",void 0),ki([_("parentID")],Sc.prototype,"parentID",void 0),ki([_(null)],Sc.prototype,"query",void 0),ki([_("selected")],Sc.prototype,"selected",void 0),ki([_(null)],Sc.prototype,"tableName",void 0),ki([_("text")],Sc.prototype,"text",void 0),ki([_("tooltip")],Sc.prototype,"tooltip",void 0),ki([_("navigateUrl")],Sc.prototype,"navigateUrl",void 0);class dP extends ii{}ki([_("SlideDown")],dP.prototype,"effect",void 0),ki([_(400)],dP.prototype,"duration",void 0),ki([_("linear")],dP.prototype,"easing",void 0);class RK extends ii{}ki([di({effect:"SlideUp",duration:400,easing:"linear"},dP)],RK.prototype,"collapse",void 0),ki([di({effect:"SlideDown",duration:400,easing:"linear"},dP)],RK.prototype,"expand",void 0);let ys=EK=class extends Qs{constructor(e,t){super(e,t),this.isRefreshed=!1,this.preventExpand=!1,this.checkedElement=[],this.disableNode=[],this.validArr=[],this.validNodes=[],this.expandChildren=[],this.isFieldChange=!1,this.changeDataSource=!1,this.hasTemplate=!1,this.isFirstRender=!1,this.mouseDownStatus=!1}getModuleName(){return"treeview"}preRender(){this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:xr,ariaAttributes:tce,expandIconPosition:"Left",itemCreated:e=>{this.beforeNodeCreate(e)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new mo({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),f(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),f(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),f(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0}getPersistData(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])}render(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()}initialize(){this.element.setAttribute("role","tree"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)}setDisabledMode(){this.disabled?this.element.classList.add(ece):this.element.classList.remove(ece)}setEnableRtl(){(this.enableRtl?z:W)([this.element],"e-rtl")}setRipple(){this.rippleFn=uc(this.element,{selector:"."+gC+",."+Ol,ignore:"."+Ol+" > ."+Ga+",."+Ghe+",."+ij+", ."+Sp}),this.rippleIconFn=uc(this.element,{selector:"."+Ol+" > ."+Ga,isCenterRipple:!0})}setFullRow(e){(e?z:W)([this.element],"e-fullrow-wrap")}setMultiSelect(e){const t=X("."+on,this.element);e?t.setAttribute("aria-multiselectable","true"):t.removeAttribute("aria-multiselectable")}templateComplier(e){if(e){this.hasTemplate=!0,this.element.classList.add(Khe);try{return document.querySelectorAll(e).length?ji(document.querySelector(e).innerHTML.trim()):ji(e)}catch(t){return ji(e)}}this.element.classList.remove(Khe)}setDataBinding(e){this.treeList.push("false"),this.fields.dataSource instanceof ut?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(t=>{this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource instanceof ut&&this.isOffline&&(this.treeList.pop(),this.treeData=t.result,this.isNumberTypeId=this.getType(),this.setRootData(),this.renderItems(!0),0===this.treeList.length&&!this.isLoaded&&this.finalize())}).catch(t=>{this.trigger("actionFailure",{error:t})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(t=>{this.treeList.pop(),this.treeData=t.result,this.isNumberTypeId=this.getType(),this.setRootData(),e&&(this.changeDataSource=!0),this.renderItems(!0),this.changeDataSource=!1,0===this.treeList.length&&!this.isLoaded&&this.finalize()}).catch(t=>{this.trigger("actionFailure",{error:t})})):(this.treeList.pop(),f(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0===this.treeList.length&&!this.isLoaded&&this.finalize()}getQuery(e,t=null){let s,i=[];if(e.query)s=e.query.clone();else{s=new Ut;let r=this.getActualProperties(e);for(let o of Object.keys(r))"dataSource"!==o&&"tableName"!==o&&"child"!==o&&e[o]&&"url"!==o&&-1===i.indexOf(e[o])&&i.push(e[o]);s.select(i),r.hasOwnProperty("tableName")&&s.from(e.tableName)}return Js.addSorting(this.sortOrder,e.text,s),!f(t)&&!f(e.parentID)&&s.where(e.parentID,"equal",this.isNumberTypeId?parseFloat(t):t),s}getType(){return!!this.treeData[0]&&"number"==typeof U(this.fields.id,this.treeData[0])}setRootData(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);let e=this.getChildNodes(this.treeData,void 0,!0);this.rootData=f(e)?[]:e}else this.rootData=this.treeData}renderItems(e){this.listBaseOption.ariaAttributes.level=1;let t=this.getSortedData(this.rootData);this.ulElement=Js.createList(this.createElement,e?this.rootData:t,this.listBaseOption),this.element.appendChild(this.ulElement);let i=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand){let r=0;for(;r<i.length;)this.renderChildNodes(i[r],!0,null,!0),r++}(1===bt("."+on,this.element).length&&i&&0!==i.length||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()}updateCheckedStateFromDS(e){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(1===this.dataType){let t=this.fields,i=new ut(this.treeData).executeLocal((new Ut).where(t.isChecked,"equal",!0,!1));for(let s=0;s<i.length;s++){let r=i[s][this.fields.id]?i[s][this.fields.id].toString():null;if(i[s][this.fields.parentID]&&i[s][this.fields.parentID].toString(),-1===this.checkedNodes.indexOf(r)&&!this.isLoaded&&this.checkedNodes.push(r),i[s][this.fields.hasChildren]){let a=i[s][this.fields.id],l=new ut(this.treeData).executeLocal((new Ut).where(t.parentID,"equal",a,!1));for(let h=0;h<l.length;h++){let c=l[h][this.fields.id]?l[h][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(c)&&this.autoCheck&&this.checkedNodes.push(c)}}}for(let s=0;s<this.checkedNodes.length;s++){let r=this.fields,o=new ut(this.treeData).executeLocal((new Ut).where(r.id,"equal",this.checkedNodes[s],!0));if(o[0]&&this.autoCheck&&(this.getCheckedNodeDetails(r,o),this.checkIndeterminateState(o[0])),o.length>0){let l=o[0][this.fields.id]?o[0][this.fields.id].toString():null;this.checkedNodes.indexOf(l)>-1&&-1===this.validNodes.indexOf(l)&&this.validNodes.push(l)}let a=new ut(this.treeData).executeLocal((new Ut).where(r.parentID,"equal",this.checkedNodes[s],!0));for(let l=0;l<a.length;l++){let h=a[l][this.fields.id]?a[l][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(h)&&this.autoCheck&&this.checkedNodes.push(h),this.checkedNodes.indexOf(h)>-1&&-1===this.validNodes.indexOf(h)&&this.validNodes.push(h)}}}else if(2===this.dataType||this.fields.dataSource instanceof ut&&this.isOffline)for(let t=0;t<this.treeData.length;t++){let i=this.treeData[t][this.fields.id]?this.treeData[t][this.fields.id].toString():"";this.treeData[t][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(i)&&this.checkedNodes.push(i),this.checkedNodes.indexOf(i)>-1&&-1===this.validNodes.indexOf(i)&&this.validNodes.push(i);let s=U(this.fields.child.toString(),this.treeData[t]);s&&this.updateChildCheckState(s,this.treeData[t])}this.setProperties({checkedNodes:this.validNodes},!0)}}getCheckedNodeDetails(e,t){let i=t[0][this.fields.parentID]?t[0][this.fields.parentID].toString():null,s=0,r=this.element.querySelector('[data-uid="'+t[0][this.fields.id]+'"]'),o=this.element.querySelector('[data-uid="'+t[0][this.fields.parentID]+'"]');if(r||o)o&&(X("."+wc,o)||this.changeState(o,"indeterminate",null,!0,!0));else{-1===this.parentNodeCheck.indexOf(i)&&this.parentNodeCheck.push(i);let l=this.getChildNodes(this.treeData,i);for(let c=0;c<l.length;c++){let m=l[c][this.fields.id]?l[c][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(m)&&s++,s===l.length&&-1===this.checkedNodes.indexOf(i)&&this.checkedNodes.push(i)}let h=new ut(this.treeData).executeLocal((new Ut).where(e.id,"equal",i,!0));this.getCheckedNodeDetails(e,h)}}updateParentCheckState(){let t,e=bt("."+Bf,this.element);for(let i=0;i<e.length;i++){let s=B(e[i],"."+is),r=s.getAttribute("data-uid").toString();t=1===this.dataType?new ut(this.treeData).executeLocal((new Ut).where(this.fields.parentID,"equal",r,!0)):this.getChildNodes(this.treeData,r);let o=0;if(t){for(let a=0;a<t.length;a++){let l=t[a][this.fields.id].toString();-1!==this.checkedNodes.indexOf(l)&&o++}if(o===t.length){let a=s.getAttribute("data-uid");-1===this.checkedNodes.indexOf(a)&&this.checkedNodes.push(a),this.changeState(s,"check",null,!0,!0)}else 0===o&&0===this.checkedNodes.length&&this.changeState(s,"uncheck",null,!0,!0)}}}checkIndeterminateState(e){let t;t=this.element.querySelector(1===this.dataType?'[data-uid="'+e[this.fields.parentID]+'"]':'[data-uid="'+e[this.fields.id]+'"]'),t?"true"!==t.querySelector("."+Sp).getAttribute("aria-checked")&&this.changeState(t,"indeterminate",null,!0,!0):2===this.dataType&&-1===this.parentNodeCheck.indexOf(e[this.fields.id].toString())&&this.parentNodeCheck.push(e[this.fields.id].toString())}updateChildCheckState(e,t){let i=0,s=t[this.fields.id]?t[this.fields.id].toString():"";for(let r=0;r<e.length;r++){let o=e[r][this.fields.id]?e[r][this.fields.id].toString():"";e[r][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o),-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(o)&&this.autoCheck&&this.checkedNodes.push(o),-1!==this.checkedNodes.indexOf(o)&&this.autoCheck&&i++,this.checkedNodes.indexOf(o)>-1&&-1===this.validNodes.indexOf(o)&&this.validNodes.push(o);let a=U(this.fields.child.toString(),e[r]);a&&a.length&&(this.parentCheckData.push(t),this.updateChildCheckState(a,e[r])),i===e.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(s)&&this.checkedNodes.push(s)}if(0!==i&&this.autoCheck){this.checkIndeterminateState(t);for(let r=0;r<this.parentCheckData.length;r++)t!==this.parentCheckData[r]&&this.parentCheckData[r]&&this.checkIndeterminateState(this.parentCheckData[r])}this.parentCheckData=[]}beforeNodeCreate(e){if(this.showCheckBox){let s=Vw(this.createElement,!0,{cssClass:this.touchClass});s.setAttribute("role","checkbox");let r=X("div."+Ga,e.item),o=e.item.getAttribute("data-uid");e.item.childNodes[0].insertBefore(s,e.item.childNodes[0].childNodes[f(r)?0:1]);let a=U(e.fields.isChecked,e.curData);this.checkedNodes.indexOf(o)>-1?(X("."+bC,s).classList.add(wc),s.setAttribute("aria-checked","true"),this.addCheck(e.item)):f(a)||"true"!==a.toString()?s.setAttribute("aria-checked","false"):(X("."+bC,s).classList.add(wc),s.setAttribute("aria-checked","true"),this.addCheck(e.item));let l=X("."+bC,s);k.add(l,"mousedown",this.frameMouseHandler,this),k.add(l,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(e.item),this.allowMultiSelection&&!e.item.classList.contains(Mk)&&e.item.setAttribute("aria-selected","false");let t=e.fields;if(this.addActionClass(e,t.selected,Mk),this.addActionClass(e,t.expanded,rj),!f(this.nodeTemplateFn)){let s=e.item.querySelector("."+i_),r=e.item.getAttribute("data-uid");s.innerHTML="",this.renderNodeTemplate(e.curData,s,r)}this.isRefreshed||this.trigger("drawNode",{node:e.item,nodeData:e.curData,text:e.text})}frameMouseHandler(e){SO(e,X(".e-ripple-container",e.target.parentElement))}addActionClass(e,t,i){let r=U(t,e.curData);!f(r)&&"false"!==r.toString()&&e.item.classList.add(i)}getDataType(e,t){if(this.fields.dataSource instanceof ut){for(let i=0;i<e.length;i++)if(this.isOffline){if("string"==typeof t.child&&f(U(t.child,e[i]))&&!f(U(t.parentID,e[i])))return 1}else if("string"==typeof t.child&&f(U(t.child,e[i])))return 1;return 2}for(let i=0,s=e.length;i<s;i++){if("string"==typeof t.child&&!f(U(t.child,e[i])))return 2;if(!f(U(t.parentID,e[i]))||!f(U(t.hasChildren,e[i])))return 1}return 1}getGroupedData(e,t){let i=(new Ut).group(t),s=Js.getDataSource(e,i),r=[];for(let o=0;o<s.length;o++)r.push(s[o].items);return r}getSortedData(e){return e&&"None"!==this.sortOrder&&(e=Js.getDataSource(e,Js.addSorting(this.sortOrder,this.fields.text))),e}finalizeNode(e){let t=bt("."+Jhe,e);for(let r=0;r<t.length;r++)t[r].setAttribute("alt",Jhe);if(this.isLoaded){let r=bt("."+Mk,e);for(let o=0;o<r.length;o++){this.selectNode(r[o],null);break}W(r,Mk)}let i=bt("."+is+":not(."+rj+")",e);for(let r=0;r<i.length;r++){let o=X("div."+Ga,i[r]);o&&o.classList.contains(xr)&&this.disableExpandAttr(i[r])}let s=bt("."+rj,e);if(!this.isInitalExpand)for(let r=0;r<s.length;r++)this.renderChildNodes(s[r]);W(s,rj),this.updateList(),this.isLoaded&&this.updateCheckedProp()}updateCheckedProp(){if(this.showCheckBox){let e=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:e},!0)}}ensureIndeterminate(){if(this.autoCheck){let t,e=bt("li",this.element);for(let i=0;i<e.length;i++)e[i].classList.contains(is)&&(t=X("."+on,e[i]),t?this.ensureParentCheckState(e[i]):this.ensureChildCheckState(e[i]))}else{let e=bt("."+Bf,this.element);for(let t=0;t<e.length;t++)e[t].classList.remove(Bf)}}ensureParentCheckState(e){if(!f(e)){if(e.classList.contains(gg))return;let t=e;e.classList.contains(is)&&(t=X("."+on,e));let i=bt("."+wc,t),s=bt("."+Bf,t),r=bt("."+is,t),o=e.getElementsByClassName(Sp)[0];r.length===i.length?this.changeState(o,"check",null,!0,!0):i.length>0||s.length>0?this.changeState(o,"indeterminate",null,!0,!0):0===i.length&&this.changeState(o,"uncheck",null,!0,!0);let a=B(e,"."+on);if(!f(a)){let l=B(a,"."+is);this.ensureParentCheckState(l)}}}ensureChildCheckState(e,t){if(!f(e)){let s,i=X("."+on,e);if(!f(i)){s=bt("."+Sp,i);let h,r=e.getElementsByClassName(bC)[0].classList.contains(wc),o=e.getElementsByClassName(bC)[0].classList.contains(Bf),a=i.querySelectorAll("li");i.parentElement.getAttribute("aria-expanded");for(let c=0;c<s.length;c++){let m=a[c].getAttribute("data-uid");if(f(this.currentLoadData)||f(U(this.fields.isChecked,this.currentLoadData[c]))){let b=s[c].getElementsByClassName(bC)[0].classList.contains(wc);r||b&&!this.isLoaded||-1!==this.checkedNodes.indexOf(m)&&this.isLoaded&&(o||r)?h="check":a[c].classList.contains("e-has-child")&&!li(this.parentNodeCheck)&&this.autoCheck&&(r||o)&&-1!==this.parentNodeCheck.indexOf(m)||1===this.dataType&&!li(this.parentNodeCheck)&&this.autoCheck&&(r||o)&&-1!==this.parentNodeCheck.indexOf(m)?(h="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(m),1)):h="uncheck"}else h=U(this.fields.isChecked,this.currentLoadData[c])?"check":"uncheck",-1!==this.ele&&(h=r?"check":"uncheck"),"uncheck"===h&&!li(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(m)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(m),1),h="indeterminate");this.changeState(s[c],h,t,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}}doCheckBoxAction(e,t){if(bt("."+is,this.element),f(e)){let s=bt("."+Sp,this.element);if(this.loadOnDemand)for(let r=0;r<s.length;r++)this.updateFieldChecked(s[r],t),this.changeState(s[r],t?"check":"uncheck",null,null,null,t);else for(let r=0;r<s.length;r++)this.updateFieldChecked(s[r],t),this.changeState(s[r],t?"check":"uncheck")}else for(let s=e.length;s>=0;s--){let r;if(r=this.getElement(1===e.length?e[s-1]:e[s]),f(r)){let a;if(a=e[s-e.length]?e[s-e.length].toString():e[s]?e[s].toString():null,""!==a&&t&&a)this.setValidCheckedNode(a),this.dynamicCheckState(a,t);else if(-1!==this.checkedNodes.indexOf(a)&&""!==a&&!t){this.checkedNodes.splice(this.checkedNodes.indexOf(a),1);let l=this.getChildNodes(this.treeData,a);if(l){for(let h=0;h<l.length;h++){let c=l[h][this.fields.id]?l[h][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(c)){this.checkedNodes.splice(this.checkedNodes.indexOf(c),1);let m=this.element.querySelector('[data-uid="'+c+'"]');m&&this.changeState(m,"uncheck",null)}}-1!==this.parentNodeCheck.indexOf(a)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)}a&&this.dynamicCheckState(a,t),this.updateField(this.treeData,this.fields,a,"isChecked",null)}continue}let o=X("."+on+" ."+Sp,r);this.validateCheckNode(o,!t,r,null)}if(e)for(let s=0;s<e.length;s++){let r=e[s]?e[s].toString():"";t||this.updateField(this.treeData,this.fields,r,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()}updateFieldChecked(e,t){let i=B(e,"."+is),s=i.getAttribute("data-uid");"true"===this.getNodeData(i).isChecked&&!t&&this.updateField(this.treeData,this.fields,s,"isChecked",null)}dynamicCheckState(e,t){if(1===this.dataType){let i=0,s=new ut(this.treeData).executeLocal((new Ut).where(this.fields.id,"equal",e,!0));if(s[0]){let r=s[0][this.fields.id]?s[0][this.fields.id].toString():null,o=s[0][this.fields.parentID]?s[0][this.fields.parentID].toString():null,a=this.element.querySelector('[data-uid="'+o+'"]'),c=(a&&X("."+Bf,a),a&&X("."+wc,a),this.element.querySelector('[data-uid="'+r+'"]')),m=this.getChildNodes(this.treeData,o);if(m)for(let b=0;b<m.length;b++){let v=m[b][this.fields.id]?m[b][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(v)&&i++}-1!==this.checkedNodes.indexOf(e)&&a&&r===e&&this.autoCheck?this.changeState(a,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&c&&r===e&&!t?this.changeState(c,"uncheck",null):-1!==this.checkedNodes.indexOf(e)&&c&&r===e&&t?this.changeState(c,"check",null):-1===this.checkedNodes.indexOf(e)&&!c&&a&&r===e&&this.autoCheck&&0!==i?this.changeState(a,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&!c&&a&&r===e&&this.autoCheck&&0===i?this.changeState(a,"uncheck",null):!c&&!a&&r===e&&this.autoCheck&&this.updateIndeterminate(e,t)}}else if(2===this.dataType||this.fields.dataSource instanceof ut&&this.isOffline){let i,s,r;for(let o=0;o<this.treeData.length;o++){i=this.treeData[o][this.fields.id]?this.treeData[o][this.fields.id].toString():"",s=this.element.querySelector('[data-uid="'+i+'"]'),r=s?X("."+wc,s):null,-1===this.checkedNodes.indexOf(i)&&s&&r&&!t&&this.changeState(s,"uncheck",null);let a=U(this.fields.child.toString(),this.treeData[o]);a&&this.updateChildIndeterminate(a,i,e,t,i)}}}updateIndeterminate(e,t){let r,i=this.getTreeData(e),s=0;1===this.dataType&&(r=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null);let o=this.getChildNodes(this.treeData,r);if(o)for(let l=0;l<o.length;l++){let h=o[l][this.fields.id]?o[l][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(h)&&s++}let a=this.element.querySelector('[data-uid="'+r+'"]');a&&t||!t&&a&&-1===this.parentNodeCheck.indexOf(r)&&0!==s?this.changeState(a,"indeterminate",null):!t&&a&&-1===this.parentNodeCheck.indexOf(r)&&0===s?this.changeState(a,"uncheck",null):a||(t||-1!==this.checkedNodes.indexOf(r)||-1===this.parentNodeCheck.indexOf(r)?(t&&-1===this.checkedNodes.indexOf(r)&&-1===this.parentNodeCheck.indexOf(r)||!t&&-1!==this.checkedNodes.indexOf(r)&&-1===this.parentNodeCheck.indexOf(r)&&0!==s)&&this.parentNodeCheck.push(r):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r),1),this.updateIndeterminate(r,t),-1!==this.checkedNodes.indexOf(r)&&!t&&this.checkedNodes.splice(this.checkedNodes.indexOf(r),1))}updateChildIndeterminate(e,t,i,s,r){let o=0;for(let a=0;a<e.length;a++){let l=e[a][this.fields.id]?e[a][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(l)&&o++;let h=this.element.querySelector('[data-uid="'+t+'"]'),c=h?X("."+Bf,h):null,m=h?X("."+wc,h):null,b=this.element.querySelector('[data-uid="'+l+'"]'),v=b?X("."+wc,b):null;if(-1!==this.checkedNodes.indexOf(i)&&h&&l===i&&this.autoCheck)this.changeState(h,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(i)||!h||b||l!==i||s){if(-1===this.checkedNodes.indexOf(i)&&b&&l===i&&!s)this.changeState(b,"uncheck",null);else if(-1===this.checkedNodes.indexOf(i)&&c&&l===i&&this.autoCheck&&0===o&&!s)c.classList.remove(Bf);else if(-1===this.checkedNodes.indexOf(i)&&!b&&m&&l===i&&0===o)this.changeState(h,"uncheck",null);else if(-1===this.checkedNodes.indexOf(l)&&b&&v&&0===o)this.changeState(b,"uncheck",null);else if(!b&&!h&&l===i||-1!==this.parentNodeCheck.indexOf(t)&&this.autoCheck){let E=this.element.querySelector('[data-uid="'+r+'"]');s&&0!==o?this.changeState(E,"indeterminate",null):s&&o===e.length&&-1===this.checkedNodes.indexOf(t)?this.checkedNodes.push(t):!s&&0===o&&-1!==this.parentNodeCheck.indexOf(t)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(t)),-1===this.parentNodeCheck.indexOf(t)&&this.parentNodeCheck.push(t)}}else this.changeState(h,this.autoCheck?"uncheck":0!==o?"indeterminate":"uncheck",null);let w=U(this.fields.child.toString(),e[a]);w&&this.updateChildIndeterminate(w,l,i,s,r)}}changeState(e,t,i,s,r,o){let a,l=B(e,"."+is);e===l&&(e=X("."+Sp,l)),s?this.nodeCheckAction(e,t,l,a,i,s,r,o):(this.checkActionNodes=[],a=this.getCheckEvent(l,t,i),this.trigger("nodeChecking",a,h=>{h.cancel||this.nodeCheckAction(e,t,l,h,i,s,r,o)}))}nodeCheckAction(e,t,i,s,r,o,a,l){let h,c=e.getElementsByClassName(bC)[0];if("check"!==t||c.classList.contains(wc)?"uncheck"===t&&(c.classList.contains(wc)||c.classList.contains(Bf))?(W([c],[wc,Bf]),this.removeCheck(i),h="false"):"indeterminate"===t&&this.autoCheck&&(c.classList.remove(wc),c.classList.add(Bf),this.removeCheck(i),h="mixed"):(c.classList.remove(Bf),c.classList.add(wc),this.addCheck(i),h="true"),h="check"===t?"true":"uncheck"===t?"false":h,f(h)||e.setAttribute("aria-checked",h),a){let m=[].concat([],this.checkActionNodes);s=this.getCheckEvent(i,t,r),li(o)&&(s.data=m)}void 0!==l&&this.ensureStateChange(i,l),o||f(h)||(e.setAttribute("aria-checked",h),s.data[0].checked=h,this.trigger("nodeChecked",s),this.checkActionNodes=[])}addCheck(e){let t=e.getAttribute("data-uid");!f(t)&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t)}removeCheck(e){let t=this.checkedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.checkedNodes.splice(t,1)}getCheckEvent(e,t,i){this.checkActionNodes.push(this.getNodeData(e));let s=this.checkActionNodes;return{action:t,cancel:!1,isInteracted:!f(i),node:e,data:s}}finalize(){let e=X("."+on,this.element);if(!f(e)){e.setAttribute("role",tce.treeRole),this.setMultiSelect(this.allowMultiSelection);let t=X("."+is,this.element);t&&(z([t],Ok),this.updateIdAttr(null,t)),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()}}setTextWrap(){(this.allowTextWrap?z:W)([this.element],"e-text-wrap"),q.isIE&&(this.allowTextWrap?z:W)([this.element],"e-ie-wrap")}updateWrap(e){if(!this.fullRowSelect)return;const t=e?bt("."+is,e):this.liList,i=t.length;for(let s=0;s<i;s++)this.calculateWrap(t[s])}calculateWrap(e){const t=X("."+gC,e);t&&t.nextElementSibling&&(t.style.height=this.allowTextWrap?t.nextElementSibling.offsetHeight+"px":"")}doExpandAction(){let e=this.expandedNodes;if(this.isInitalExpand&&e.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof ut)this.expandGivenNodes(e);else{for(let t=0;t<e.length;t++){let i=X('[data-uid="'+e[t]+'"]',this.element);if(f(i))e[t]&&-1===this.expandChildren.indexOf(e[t])&&this.expandChildren.push(e[t].toString());else{let s=X("."+xr,X("."+Ol,i));f(s)||this.expandAction(i,s,null)}}this.afterFinalized()}else this.afterFinalized()}expandGivenNodes(e){let t=this;this.expandCallback(e[this.index],()=>{t.index++,t.index<e.length?t.expandGivenNodes(e):t.afterFinalized()})}expandCallback(e,t){let i=X('[data-uid="'+e+'"]',this.element);if(f(i))t();else{let s=X("."+xr,X("."+Ol,i));f(s)?t():this.expandAction(i,s,null,!1,t)}}afterFinalized(){this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,(!this.isLoaded||this.isFieldChange)&&this.trigger("dataBound",{data:this.treeData}),this.isLoaded=!0}doSelectionAction(){let e=bt("."+Mk,this.element),t=this.selectedNodes;if(t.length>0){this.setProperties({selectedNodes:[]},!0);for(let i=0;i<t.length;i++){let s=X('[data-uid="'+t[i]+'"]',this.element);if(s&&!s.classList.contains("e-active")?this.selectNode(s,null,!0):this.selectedNodes.push(t[i]),!this.allowMultiSelection)break}}else this.selectGivenNodes(e);W(e,Mk)}selectGivenNodes(e){for(let t=0;t<e.length&&(e[t].classList.contains("e-disable")||this.selectNode(e[t],null,!0),this.allowMultiSelection);t++);}clickHandler(e){let t=e.originalEvent.target;if(k.remove(this.element,"contextmenu",this.preventContextMenu),t&&!this.dragStartAction){let i=t.classList,s=B(t,"."+is);if(!s)return;if(3!==e.originalEvent.which){let r=X(".e-ripple-element",s),o=X("."+Ga,s);if(this.removeHover(),this.setFocusElement(s),this.showCheckBox&&!s.classList.contains("e-disable")){let a=B(t,"."+Sp);if(!f(a)){let l=X("."+bC,a);return this.validateCheckNode(a,l.classList.contains(wc),s,e.originalEvent),void this.triggerClickEvent(e.originalEvent,s)}}i.contains(xr)?this.expandAction(s,t,e):i.contains(uh)?this.collapseNode(s,t,e):r&&o?o.classList.contains("e-ripple")&&o.classList.contains(xr)?this.expandAction(s,o,e):o.classList.contains("e-ripple")&&o.classList.contains(uh)?this.collapseNode(s,o,e):!i.contains(on)&&!i.contains(is)&&this.toggleSelect(s,e.originalEvent,!1):!i.contains(on)&&!i.contains(is)&&this.toggleSelect(s,e.originalEvent,!1)}this.triggerClickEvent(e.originalEvent,s)}}nodeCheckedEvent(e,t,i){B(e,"."+is);let r=this.getCheckEvent(e,t?"uncheck":"check",i);r.data=r.data.splice(0,r.data.length-1),this.trigger("nodeChecked",r)}triggerClickEvent(e,t){this.trigger("nodeClicked",{event:e,node:t})}expandNode(e,t,i){if(this.renderReactTemplates(),t.classList.contains(_K)&&this.hideSpinner(t),this.initialRender||t.classList.add("interaction"),!0!==i||!0===i&&e.classList.contains("e-expanded")){if(!0!==this.preventExpand){W([t],xr),z([t],uh);let s=0,r=0,o=this,a=X("."+on,e),l=e;this.setHeight(l,a);let h=X("."+is+"."+Au,e);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(a,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:c=>{l.style.overflow="hidden",!f(h)&&h instanceof HTMLElement&&h.classList.add(oj),s=l.offsetHeight,r=X("."+Ol,e).offsetHeight},progress:c=>{c.element.style.display="block",o.animateHeight(c,s,r)},end:c=>{c.element.style.display="block",!f(h)&&h instanceof HTMLElement&&h.classList.remove(oj),this.expandedNode(l,a,t)}}):this.expandedNode(l,a,t)}}else X("."+on,e).style.display="none",this.fields.dataSource instanceof ut&&(this.preventExpand=!1);this.initialRender&&t.classList.add("interaction")}expandedNode(e,t,i){t.style.display="block",e.style.display="block",e.style.overflow="",e.style.height="",W([i],mC),this.addExpand(e),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(e),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(e,null),this.trigger("nodeExpanded",this.expandArgs))}addExpand(e){e.setAttribute("aria-expanded","true"),W([e],Zhe);let t=e.getAttribute("data-uid");!f(t)&&-1===this.expandedNodes.indexOf(t)&&this.expandedNodes.push(t)}collapseNode(e,t,i){if(t.classList.contains(mC))return;let s;z([t],mC),this.isLoaded?(s=this.getExpandEvent(e,i),this.trigger("nodeCollapsing",s,r=>{r.cancel?W([t],mC):this.nodeCollapseAction(e,t,r)})):this.nodeCollapseAction(e,t,s)}nodeCollapseAction(e,t,i){W([t],uh),z([t],xr);let s=0,r=0,o=this,a=X("."+on,e),l=e,h=X("."+is+"."+Au,e);this.isAnimate?this.aniObj.animate(a,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:c=>{l.style.overflow="hidden",!f(h)&&h instanceof HTMLElement&&h.classList.add(oj),s=X("."+Ol,e).offsetHeight,r=l.offsetHeight},progress:c=>{o.animateHeight(c,s,r)},end:c=>{c.element.style.display="none",!f(h)&&h instanceof HTMLElement&&h.classList.remove(oj),this.collapsedNode(l,a,t,i)}}):this.collapsedNode(l,a,t,i)}collapsedNode(e,t,i,s){t.style.display="none",e.style.overflow="",e.style.height="",W([i],mC),this.removeExpand(e),this.isLoaded&&(s=this.getExpandEvent(e,null),this.trigger("nodeCollapsed",s))}removeExpand(e,t){t?e.removeAttribute("aria-expanded"):this.disableExpandAttr(e);let i=this.expandedNodes.indexOf(e.getAttribute("data-uid"));i>-1&&this.expandedNodes.splice(i,1)}disableExpandAttr(e){e.setAttribute("aria-expanded","false"),z([e],Zhe)}setHeight(e,t){t.style.display="block",t.style.visibility="hidden",e.style.height=e.offsetHeight+"px",t.style.display="none",t.style.visibility=""}animateHeight(e,t,i){e.element.parentElement.style.height=(e.duration-e.timeStamp)/e.duration*(i-t)+t+"px"}renderChildNodes(e,t,i,s){let o,r=X("div."+Ga,e);if(!f(r))if(this.showSpinner(r),this.fields.dataSource instanceof ut){let a=this.parents(e,"."+on).length,l=this.getChildFields(this.fields,a,1);if(f(l)||f(l.dataSource))return te(r),void this.removeExpand(e,!0);this.treeList.push("false"),this.fields.dataSource instanceof ut&&this.isOffline?(this.treeList.pop(),o=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.loadChild(o,l,r,e,t,i,s)):l.dataSource.executeQuery(this.getQuery(l,e.getAttribute("data-uid"))).then(h=>{this.treeList.pop(),o=h.result,1===this.dataType&&(this.dataType=2),this.loadChild(o,l,r,e,t,i,s)}).catch(h=>{this.trigger("actionFailure",{error:h})})}else{if(o=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.currentLoadData=this.getSortedData(o),f(o)||0===o.length)return te(r),void this.removeExpand(e,!0);this.listBaseOption.ariaAttributes.level=parseFloat(e.getAttribute("aria-level"))+1,e.appendChild(Js.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(e,r,s),this.setSelectionForChildNodes(o),this.ensureCheckNode(e),this.finalizeNode(e),this.disableTreeNodes(o),this.renderSubChild(e,t,s)}}loadChild(e,t,i,s,r,o,a){if(this.currentLoadData=e,f(e)||0===e.length)te(i),this.removeExpand(s,!0);else{if(this.updateListProp(t),this.fields.dataSource instanceof ut&&!this.isOffline){let l=s.getAttribute("data-uid");zt("child",e,this.getNodeObject(l))}this.listBaseOption.ariaAttributes.level=parseFloat(s.getAttribute("aria-level"))+1,s.appendChild(Js.createList(this.createElement,e,this.listBaseOption)),this.expandNode(s,i,a),this.setSelectionForChildNodes(e),this.ensureCheckNode(s),this.finalizeNode(s),this.disableTreeNodes(e),this.renderSubChild(s,r,a)}o&&o(),0===this.treeList.length&&!this.isLoaded&&this.finalize()}disableTreeNodes(e){let t=0;for(;t<e.length;){let i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(i)&&this.doDisableAction([i]),t++}}setSelectionForChildNodes(e){let t;for(t=0;t<e.length;t++){let i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(i)&&this.doSelectionAction()}}ensureCheckNode(e){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(e.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(e),this.ensureParentCheckState(e))),this.currentLoadData=null}getFields(e,t,i){return t===i?e:this.getFields(this.getChildMapper(e),t,i+1)}getChildFields(e,t,i){return t===i?this.getChildMapper(e):this.getChildFields(this.getChildMapper(e),t,i+1)}getChildMapper(e){return"string"==typeof e.child||f(e.child)?e:e.child}getChildNodes(e,t,i=!1){let s;if(f(e))return s;if(1===this.dataType)return this.getChildGroup(this.groupedData,t,i);if("string"==typeof this.fields.child)for(let r=0,o=e.length;r<o;r++){let a=U(this.fields.id,e[r]);if(a&&a.toString()===t)return U(this.fields.child,e[r]);if(!f(U(this.fields.child,e[r]))&&(s=this.getChildNodes(U(this.fields.child,e[r]),t),void 0!==s))break}return s}getChildGroup(e,t,i){let s;if(f(e))return s;for(let r=0,o=e.length;r<o;r++){if(f(e[r][0])||f(U(this.fields.parentID,e[r][0])))return i?e[r]:[];if(U(this.fields.parentID,e[r][0]).toString()===t)return e[r]}return s}renderSubChild(e,t,i){if(t){let s=bt("."+xr,e);for(let r=0,o=s.length;r<o;r++){let a=s[r];if(e.querySelector(".e-icons")!==s[r]){let l=B(a,"."+is);this.expandArgs=this.getExpandEvent(l,null),!0!==i&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(l,t,null,i)}}}}toggleSelect(e,t,i){e.classList.contains("e-disable")||(this.allowMultiSelection&&(t&&t.ctrlKey||i)&&this.isActive(e)?this.unselectNode(e,t):this.selectNode(e,t,i))}isActive(e){return!!e.classList.contains(Au)}selectNode(e,t,i){if(f(e)||!this.allowMultiSelection&&this.isActive(e)&&!f(t))return void this.setFocusElement(e);let s;this.isLoaded?(s=this.getSelectEvent(e,"select",t),this.trigger("nodeSelecting",s,r=>{r.cancel||this.nodeSelectAction(e,t,r,i)})):this.nodeSelectAction(e,t,s,i)}nodeSelectAction(e,t,i,s){if((!this.allowMultiSelection||!s&&(!t||t&&!t.ctrlKey))&&this.removeSelectAll(),this.allowMultiSelection&&t&&t.shiftKey){this.startNode||(this.startNode=e);let r=this.liList.indexOf(this.startNode),o=this.liList.indexOf(e);if(r>o){let a=r;r=o,o=a}for(let a=r;a<=o;a++){let l=this.liList[a];Xr(l)&&!l.classList.contains("e-disable")&&this.addSelect(l)}}else this.startNode=e,this.addSelect(e);this.setFocusElement(e),this.isLoaded&&(i.nodeData=this.getNodeData(e),this.trigger("nodeSelected",i))}unselectNode(e,t){let i;this.isLoaded?(i=this.getSelectEvent(e,"un-select",t),this.trigger("nodeSelecting",i,s=>{s.cancel||this.nodeUnselectAction(e,s)})):this.nodeUnselectAction(e,i)}nodeUnselectAction(e,t){this.removeSelect(e),this.setFocusElement(e),this.isLoaded&&(t.nodeData=this.getNodeData(e),this.trigger("nodeSelected",t))}setFocusElement(e){if(!f(e)){let t=this.getFocusedNode();t&&W([t],Ok),z([e],Ok),this.updateIdAttr(t,e)}}addSelect(e){e.setAttribute("aria-selected","true"),z([e],Au);let t=e.getAttribute("data-uid");!f(t)&&-1===this.selectedNodes.indexOf(t)&&this.selectedNodes.push(t)}removeSelect(e){this.allowMultiSelection?e.setAttribute("aria-selected","false"):e.removeAttribute("aria-selected"),W([e],Au);let t=this.selectedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.selectedNodes.splice(t,1)}removeSelectAll(){let e=this.element.querySelectorAll("."+Au);for(let t of e)this.allowMultiSelection?t.setAttribute("aria-selected","false"):t.removeAttribute("aria-selected");W(e,Au),this.setProperties({selectedNodes:[]},!0)}getSelectEvent(e,t,i){let s=this.getNodeData(e);return{action:t,cancel:!1,isInteracted:!f(i),node:e,nodeData:s}}setExpandOnType(){this.expandOnType="Auto"===this.expandOn?q.isDevice?"Click":"DblClick":this.expandOn}expandHandler(e){let t=e.originalEvent.target;!t||t.classList.contains(ij)||t.classList.contains(gg)||t.classList.contains(on)||t.classList.contains(is)||t.classList.contains(Ga)||this.showCheckBox&&B(t,"."+Sp)||this.expandCollapseAction(B(t,"."+is),e)}expandCollapseAction(e,t){let i=X("div."+Ga,e);if(i&&!i.classList.contains(mC)){let s=i.classList;s.contains(xr)?this.expandAction(e,i,t):s.contains(uh)&&this.collapseNode(e,i,t)}}expandAction(e,t,i,s,r){t.classList.contains(mC)||(z([t],mC),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(e,i),this.trigger("nodeExpanding",this.expandArgs,o=>{o.cancel?W([t],mC):this.nodeExpandAction(e,t,s,r)})):this.nodeExpandAction(e,t,s,r))}nodeExpandAction(e,t,i,s){let r=X("."+on,e);if(r&&"UL"===r.nodeName)this.expandNode(e,t);else{this.isFirstRender=!0,this.renderChildNodes(e,i,s);let o=bt("."+is,e);for(let a=0;a<o.length;a++){let l=this.getId(o[a]);if(-1!==this.expandChildren.indexOf(l)&&void 0!==this.expandChildren){let h=X("."+xr,X("."+Ol,o[a]));f(h)||this.expandAction(o[a],h,null),this.expandChildren.splice(this.expandChildren.indexOf(l),1)}}}}keyActionHandler(e){let t=e.target,i=this.getFocusedNode();if(t&&t.classList.contains(ij)){let r=t;"enter"===e.action?(r.blur(),this.element.focus(),z([i],ty)):"escape"===e.action&&(r.value=this.oldText,r.blur(),this.element.focus(),z([i],ty))}else e.preventDefault(),this.trigger("keyPress",{cancel:!1,event:e,node:i},r=>{if(!r.cancel)switch(e.action){case"space":this.showCheckBox&&this.checkNode(e);break;case"moveRight":this.openNode(!this.enableRtl,e);break;case"moveLeft":this.openNode(!!this.enableRtl,e);break;case"shiftDown":this.shiftKeySelect(!0,e);break;case"moveDown":case"ctrlDown":case"csDown":this.navigateNode(!0);break;case"shiftUp":this.shiftKeySelect(!1,e);break;case"moveUp":case"ctrlUp":case"csUp":this.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":this.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":this.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":this.toggleSelect(i,e);break;case"f2":this.allowEditing&&!i.classList.contains("e-disable")&&this.createTextbox(i,e);break;case"ctrlA":if(this.allowMultiSelection){let o=bt("."+is+":not(."+Au+")",this.element);this.selectGivenNodes(o)}}})}navigateToFocus(e){let t=this.getFocusedNode().querySelector("."+Ol),i=t.getBoundingClientRect(),s=this.getScrollParent(this.element);if(!f(s)){let o=s.getBoundingClientRect();i.bottom>o.bottom?s.scrollTop+=i.bottom-o.bottom:i.top<o.top&&(s.scrollTop-=o.top-i.top)}this.isVisibleInViewport(t)||t.scrollIntoView(e)}isVisibleInViewport(e){let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}getScrollParent(e){return f(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)}shiftKeySelect(e,t){if(this.allowMultiSelection){let i=this.getFocusedNode(),s=e?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(s),this.toggleSelect(s,t,!1),this.navigateToFocus(!e)}else this.navigateNode(e)}checkNode(e){let t=this.getFocusedNode(),i=X("."+Sp,t),s=X(" ."+bC,i).classList.contains(wc);t.classList.contains("e-disable")||0==t.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(i,s,t,e)}validateCheckNode(e,t,i,s){let r=B(e,"."+is);this.checkActionNodes=[];let o=t?"false":"true";f(o)||e.setAttribute("aria-checked",o);let a=this.getCheckEvent(r,t?"uncheck":"check",s);this.trigger("nodeChecking",a,l=>{l.cancel||this.nodeCheckingAction(e,t,i,l,s)})}nodeCheckingAction(e,t,i,s,r){if(-1===this.checkedElement.indexOf(i.getAttribute("data-uid"))&&(this.checkedElement.push(i.getAttribute("data-uid")),this.autoCheck)){let o=this.getChildNodes(this.treeData,i.getAttribute("data-uid"));null!==o?this.allCheckNode(o,this.checkedElement,null,null,!1):o=null}if(this.changeState(e,t?"uncheck":"check",r,!0),this.autoCheck){let o;this.ensureChildCheckState(i),this.ensureParentCheckState(B(B(i,"."+on),"."+is)),"check"===s.action?o=!0:"uncheck"===s.action&&(o=!1),this.ensureStateChange(i,o)}this.nodeCheckedEvent(e,t,r)}ensureStateChange(e,t){let i=X("."+on,e),s=e.getAttribute("data-uid"),r=this.fields;if(1===this.dataType&&this.autoCheck){let o=new ut(this.treeData).executeLocal((new Ut).where(r.parentID,"equal",s,!0));for(let a=0;a<o.length;a++){let l=o[a][this.fields.id]?o[a][this.fields.id].toString():null,h=o[a][this.fields.isChecked]?o[a][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(l)){this.checkedNodes.push(l);let c=this.getChildNodes(this.treeData,l);this.getChildItems(c,t),-1!==this.parentNodeCheck.indexOf(l)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(l),1)}else if(-1===this.checkedNodes.indexOf(s)&&null===i&&-1!==this.checkedNodes.indexOf(l)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),"true"===h&&this.updateField(this.treeData,this.fields,l,"isChecked",null),-1===this.checkedNodes.indexOf(s)&&null===i||-1!==this.parentNodeCheck.indexOf(l)){let c=this.getChildNodes(this.treeData,l);this.getChildItems(c,t),-1!==this.parentNodeCheck.indexOf(l)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(l),1)}}else{let c=this.getChildNodes(this.treeData,l);this.getChildItems(c,t)}}}else if(1!==this.dataType||this.autoCheck){let o=this.getChildNodes(this.treeData,s);o&&this.childStateChange(o,s,i,t)}else if(t)for(let o=0;o<this.treeData.length;o++){let a=this.treeData[o][this.fields.id]?this.treeData[o][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(a)&&this.checkedNodes.push(a)}else{let o=new ut(this.treeData).executeLocal((new Ut).where(r.isChecked,"equal",!0,!1));for(let a=0;a<o.length;a++){let l=o[a][this.fields.id]?o[a][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(l)&&this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),this.updateField(this.treeData,this.fields,l,"isChecked",null)}this.checkedNodes=[]}}getChildItems(e,t){for(let i=0;i<e.length;i++){let s=e[i][this.fields.id]?e[i][this.fields.id].toString():null,r=e[i][this.fields.isChecked]?e[i][this.fields.isChecked].toString():null;-1!==this.checkedNodes.indexOf(s)&&!t&&this.checkedNodes.splice(this.checkedNodes.indexOf(s),1),-1===this.checkedNodes.indexOf(s)&&t&&this.checkedNodes.push(s),"true"===r&&!t&&this.updateField(this.treeData,this.fields,s,"isChecked",null);let o=this.getChildNodes(this.treeData,s);o.length>0&&this.getChildItems(o,t)}}childStateChange(e,t,i,s){for(let r=0;r<e.length;r++){let o=e[r][this.fields.id]?e[r][this.fields.id].toString():"",a=e[r][this.fields.isChecked]?e[r][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(t)&&-1===this.checkedNodes.indexOf(o)?(this.checkedNodes.push(o),-1!==this.parentNodeCheck.indexOf(o)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(o),1)):-1===this.checkedNodes.indexOf(t)&&-1!==this.checkedNodes.indexOf(o)&&!s&&(this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),"true"===a&&this.updateField(this.treeData,this.fields,o,"isChecked",null)):this.autoCheck||(s?-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o):(-1!==this.checkedNodes.indexOf(o)&&this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),this.updateField(this.treeData,this.fields,o,"isChecked",null),this.checkedNodes=[]));let l=this.getChildNodes([e[r]],o);l&&this.childStateChange(l,t,i,s)}}allCheckNode(e,t,i,s,r){if(e)for(let o=0;o<e.length;o++){let a=U(this.fields.id,e[o]),l=this.element.querySelector('[data-uid="'+a+'"]');!1!==r&&-1===this.checkedElement.indexOf(a.toString())&&(null===l&&!f(e[o][this.fields.isChecked])&&-1===t.indexOf(a.toString())||0===s||2===i)&&(!1!==e[o][this.fields.isChecked]||2===i?t.push(a.toString()):s=null,s=!1!==e[o][this.fields.isChecked]||2===i?0:null),-1===t.indexOf(a.toString())&&f(i)&&t.push(a.toString());let h=U(this.fields.child.toString(),e[o]);if(!0===U(this.fields.hasChildren,e[o])||h){let m,c=U(this.fields.id,e[o]);m=1===this.dataType?this.getChildNodes(this.treeData,c.toString()):h,m&&(f(r)?this.allCheckNode(m,t,i,s):this.allCheckNode(m,t,i,s,r),s=null)}s=null}}openNode(e,t){let i=this.getFocusedNode(),s=X("div."+Ga,i);if(e){if(!s)return;s.classList.contains(xr)?this.expandAction(i,s,t):this.focusNextNode(i,!0)}else if(s&&s.classList.contains(uh))this.collapseNode(i,s,t);else{let r=B(B(i,"."+on),"."+is);if(!r)return;r.classList.contains("e-disable")||(this.setFocus(i,r),this.navigateToFocus(!0))}}navigateNode(e){let t=this.getFocusedNode();this.focusNextNode(t,e)}navigateRootNode(e){let t=this.getFocusedNode(),i=e?this.getRootNode():this.getEndNode();i.classList.contains("e-disable")||(this.setFocus(t,i),this.navigateToFocus(e))}getFocusedNode(){let e,t=X("."+is+"."+Ok,this.element);return f(t)&&(e=X("."+is,this.element)),f(t)?f(e)?this.element.firstElementChild:e:t}focusNextNode(e,t){let i=t?this.getNextNode(e):this.getPrevNode(e);if(this.setFocus(e,i),this.navigateToFocus(!t),i.classList.contains("e-disable")){let s=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")||null==i.nextSibling&&s.classList.contains(Ol)?this.focusNextNode(i,!1):this.focusNextNode(i,t)}}getNextNode(e){let i,t=this.liList.indexOf(e);do{if(t++,i=this.liList[t],f(i))return e}while(!Xr(i));return i}getPrevNode(e){let i,t=this.liList.indexOf(e);do{if(t--,i=this.liList[t],f(i))return e}while(!Xr(i));return i}getRootNode(){let t,e=0;do{t=this.liList[e],e++}while(!Xr(t));return t}getEndNode(){let t,e=this.liList.length-1;do{t=this.liList[e],e--}while(!Xr(t));return t}setFocus(e,t){W([e],[ty,Ok]),t.classList.contains("e-disable")||(z([t],[ty,Ok]),this.updateIdAttr(e,t))}updateIdAttr(e,t){this.element.removeAttribute("aria-activedescendant"),e&&e.removeAttribute("id"),t.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")}focusIn(){this.mouseDownStatus||z([this.getFocusedNode()],ty),this.mouseDownStatus=!1}focusOut(){W([this.getFocusedNode()],ty)}onMouseOver(e){let t=e.target,i=t.classList,s=B(t,"."+is);!s||i.contains(on)||i.contains(is)?this.removeHover():s&&!s.classList.contains("e-disable")&&this.setHover(s)}setHover(e){e.classList.contains(ty)||(this.removeHover(),z([e],ty))}onMouseLeave(e){this.removeHover()}removeHover(){let e=bt("."+ty,this.element);e&&e.length&&W(e,ty)}getNodeData(e,t){if(!f(e)&&e.classList.contains(is)&&!f(B(e,".e-control"))&&B(e,".e-control").classList.contains(gg)){let i=e.getAttribute("data-uid"),s=this.getText(e,t),r=B(e.parentNode,"."+is),o=r?r.getAttribute("data-uid"):null,a=e.classList.contains(Au),l="true"===e.getAttribute("aria-expanded"),h=null!==e.getAttribute("aria-expanded")||null!=(X("."+xr,e)||X("."+uh,e)),c=null;return this.showCheckBox&&(c=X("."+Sp,e).getAttribute("aria-checked")),{id:i,text:s,parentID:o,selected:a,expanded:l,isChecked:c,hasChildren:h}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}}getText(e,t){if(t){let i=this.getNodeObject(e.getAttribute("data-uid")),s=parseFloat(e.getAttribute("aria-level"));return U(this.getFields(this.fields,s,1).text,i)}return X("."+i_,e).textContent}getExpandEvent(e,t){let i=this.getNodeData(e);return{cancel:!1,isInteracted:!f(t),node:e,nodeData:i,event:t}}renderNodeTemplate(e,t,i){let s=this.nodeTemplateFn(e,this,"nodeTemplate"+i,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,t,this.root);s&&(s=Array.prototype.slice.call(s),mi(s,t))}destroyTemplate(e){this.clearTemplate(["nodeTemplate"+e.getAttribute("data-uid")])}reRenderNodes(){this.updateListProp(this.fields),q.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",f(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)}setCssClass(e,t){!f(e)&&""!==e&&W([this.element],e.split(" ")),!f(t)&&""!==t&&z([this.element],t.split(" "))}editingHandler(e){let t=e.target;if(!(!t||t.classList.contains(gg)||t.classList.contains(on)||t.classList.contains(is)||t.classList.contains(Ga)||t.classList.contains(ij)||t.classList.contains(Ghe))){let i=B(t,"."+is);this.createTextbox(i,e)}}createTextbox(e,t){let i=X("."+sj,this.element);i&&i.blur();let s=X("."+i_,e);this.updateOldText(e);let r=this.createElement("input",{className:sj,attrs:{value:this.oldText}}),o=this.getEditEvent(e,null,r.outerHTML);this.trigger("nodeEditing",o,a=>{if(!a.cancel){let h="width:"+(s.offsetWidth+5)+"px";z([e],IK),f(this.nodeTemplateFn)||this.destroyTemplate(e),s.innerHTML=o.innerHtml;let c=X("."+sj,s);this.inputObj=Bt.createInput({element:c,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.setAttribute("style",h),c.focus(),c.setSelectionRange(0,c.value.length),this.wireInputEvents(c)}})}updateOldText(e){let t=e.getAttribute("data-uid");this.editData=this.getNodeObject(t);let i=parseFloat(e.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,i,1),this.oldText=U(this.editFields.text,this.editData)}inputFocusOut(e){if(!X("."+sj,this.element))return;let t=e.target,i=t.value,s=B(t,"."+i_),r=B(t,"."+is);te(this.inputObj.container),this.fields.dataSource instanceof ut&&!this.isOffline?this.crudOperation("update",null,r,i,null,null,!0):this.appendNewText(r,s,i,!0)}appendNewText(e,t,i,s){let r=this.getEditEvent(e,i,null);this.trigger("nodeEdited",r,o=>{this.updateText(e,t,i=o.cancel?o.oldText:o.newText,s),o.oldText!==i&&this.triggerEvent()})}updateText(e,t,i,s){let r=zt(this.editFields.text,i,this.editData);if(f(this.nodeTemplateFn))t.innerText=i;else{t.innerText="";let o=e.getAttribute("data-uid");this.renderNodeTemplate(r,t,o),this.renderReactTemplates()}s&&(W([e],IK),t.focus()),this.allowTextWrap&&this.calculateWrap(e)}getElement(e){return f(e)?null:"string"==typeof e?this.element.querySelector('[data-uid="'+e+'"]'):"object"==typeof e?Ioe(e):null}getId(e){return f(e)?null:"string"==typeof e?e:"object"==typeof e?Ioe(e).getAttribute("data-uid"):null}getEditEvent(e,t,i){return{cancel:!1,newText:t,node:e,nodeData:this.getNodeData(e),oldText:this.oldText,innerHtml:i}}getNodeObject(e){let t;if(f(e))return t;if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,e);for(let i=0,s=this.treeData.length;i<s;i++){let r=U(this.fields.id,this.treeData[i]);if(!f(this.treeData[i])&&!f(r)&&r.toString()===e)return this.treeData[i]}return t}getChildNodeObject(e,t,i){let s;if(f(e))return s;for(let r=0,o=e.length;r<o;r++){let a=U(t.id,e[r]);if(e[r]&&a&&a.toString()===i)return e[r];if("string"!=typeof t.child||f(U(t.child,e[r]))){if(this.fields.dataSource instanceof ut&&!f(U("child",e[r]))&&(s=this.getChildNodeObject(U("child",e[r]),this.getChildMapper(t),i),void 0!==s))break}else{let l=U(t.child,e[r]);if(s=this.getChildNodeObject(l,this.getChildMapper(t),i),void 0!==s)break}}return s}setDragAndDrop(e){e&&!this.disabled?this.initializeDrag():this.destroyDrag()}initializeDrag(){let e,t=this;this.dragObj=new vn(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+Ol,helper:i=>{this.dragTarget=i.sender.target;let s=B(this.dragTarget,"."+gg),r=B(this.dragTarget,"."+Ol);if(this.dragLi=B(this.dragTarget,"."+is),this.fullRowSelect&&!r&&this.dragTarget.classList.contains(gC)&&(r=this.dragTarget.nextElementSibling),!this.dragTarget||!i.element.isSameNode(s)||!r||this.dragTarget.classList.contains(gg)||this.dragTarget.classList.contains(on)||this.dragTarget.classList.contains(is)||this.dragLi.classList.contains("e-disable"))return!1;let o=r.cloneNode(!0);if(f(X("div."+Ga,o))){let h=t.createElement("div",{className:Ga+" "+xr});o.insertBefore(h,o.children[0])}e=t.createElement("div",{className:"e-drag-item "+gg+" "+this.cssClass+" "+(this.enableRtl?"e-rtl":"")}),e.appendChild(o);let l=this.selectedNodes.length;if(l>1&&this.allowMultiSelection&&this.dragLi.classList.contains(Au)){let h=t.createElement("span",{className:"e-drop-count",innerHTML:""+l});e.appendChild(h)}return document.body.appendChild(e),document.body.style.cursor="",this.dragData=this.getNodeData(this.dragLi),e},dragStart:i=>{z([this.element],TK);let r,s=B(i.target,".e-list-item");s&&(r=parseInt(s.getAttribute("aria-level"),10));let o=this.getDragEvent(i.event,this,null,i.target,null,e,r);o.draggedNode.classList.contains(IK)?(this.dragObj.intDestroy(i.event),this.dragCancelAction(e)):this.trigger("nodeDragStart",o,a=>{a.cancel?(this.dragObj.intDestroy(i.event),this.dragCancelAction(e)):this.dragStartAction=!0})},drag:i=>{this.dragObj.setProperties({cursorAt:{top:!f(i.event.targetTouches)||q.isDevice?60:-20}}),this.dragAction(i,e)},dragStop:i=>{W([this.element],TK),this.removeVirtualEle();let s=i.target,o=B(s,"."+Yhe);(!s||!o)&&(te(i.helper),document.body.style.cursor="");let l,a=B(s,".e-list-item");a&&(l=parseInt(a.getAttribute("aria-level"),10));let h=this.getDragEvent(i.event,this,s,s,null,i.helper,l);h.preventTargetExpand=!1,this.trigger("nodeDragStop",h,c=>{this.dragParent=c.draggedParentNode,this.preventExpand=c.preventTargetExpand,c.cancel&&(i.helper.parentNode&&te(i.helper),document.body.style.cursor=""),this.dragStartAction=!1})}}),this.dropObj=new tg(this.element,{out:i=>{!f(i)&&!i.target.classList.contains(hP)&&(document.body.style.cursor="not-allowed")},over:i=>{document.body.style.cursor=""},drop:i=>{this.dropAction(i)}})}dragCancelAction(e){te(e),W([this.element],TK),this.dragStartAction=!1}dragAction(e,t){let i=B(e.target,"."+Yhe),s=B(e.target,"."+Ol),r=X("div."+Ga,t);W([r],[nj,cP,DK,kK]),this.removeVirtualEle(),document.body.style.cursor="";let o=e.target.classList;if(this.fullRowSelect&&!s&&!f(o)&&o.contains(gC)&&(s=e.target.nextElementSibling),i){let c=B(e.target,"."+is),m=B(e.target,"."+Sp),b=B(e.target,"."+uh),v=B(e.target,"."+xr);if(!i.classList.contains(gg)||s&&!c.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,c))if(this.hasTemplate&&c){let w=X(this.fullRowSelect?"."+gC:"."+Ol,c);e&&!v&&!b&&e.event.offsetY<7&&!m||v&&e.event.offsetY<5||b&&e.event.offsetX<3?this.appendIndicator(c,r,this.fullRowSelect?1:0):e&&!v&&!b&&!m&&w&&e.event.offsetY>w.offsetHeight-10||v&&e.event.offsetY>19||b&&e.event.offsetX>19?this.appendIndicator(c,r,this.fullRowSelect?2:1):z([r],nj)}else c&&e&&!v&&!b&&e.event.offsetY<7&&!m||v&&e.event.offsetY<5||b&&e.event.offsetX<3?this.appendIndicator(c,r,this.fullRowSelect?1:0):c&&e&&!v&&!b&&e.target.offsetHeight>0&&e.event.offsetY>e.target.offsetHeight-10&&!m||v&&e.event.offsetY>19||b&&e.event.offsetX>19?this.appendIndicator(c,r,this.fullRowSelect?2:1):z([r],nj);else"LI"!==e.target.nodeName||c.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,c)?e.target.classList.contains(hP)?z([r],cP):z([r],DK):(z([r],cP),this.renderVirtualEle(e))}else z([r],kK),document.body.style.cursor="not-allowed";let l,a=B(e.target,".e-list-item");a&&(l=parseInt(a.getAttribute("aria-level"),10));let h=this.getDragEvent(e.event,this,e.target,e.target,null,t,l);h.dropIndicator&&W([r],h.dropIndicator),this.trigger("nodeDragging",h),h.dropIndicator&&z([r],h.dropIndicator)}appendIndicator(e,t,i){z([t],cP);let s=this.createElement("div",{className:hP});e.insertBefore(s,e.children[i])}dropAction(e){let s,r,a,t=e.event.offsetY,i=e.target,o=!1;a=e.dragData.draggable;for(let l=0;l<a.ej2_instances.length;l++)if(a.ej2_instances[l]instanceof EK){s=a.ej2_instances[l];break}if(s&&s.dragTarget){let h=B(s.dragTarget,"."+is),c=B(i,"."+is);if(null==c&&i.classList.contains(gg)&&(c=i.firstElementChild),te(e.droppedElement),document.body.style.cursor="",!c||c.isSameNode(h)||this.isDescendant(h,c))return void(this.fields.dataSource instanceof ut||(this.preventExpand=!1));if(s.allowMultiSelection&&h.classList.contains(Au)){let m=bt("."+Au,s.element);if(e.target.offsetHeight<=33&&t>e.target.offsetHeight-10&&t>6)for(let b=m.length-1;b>=0;b--)c.isSameNode(m[b])||this.isDescendant(m[b],c)||this.appendNode(i,m[b],c,e,s,t);else for(let b=0;b<m.length;b++)c.isSameNode(m[b])||this.isDescendant(m[b],c)||this.appendNode(i,m[b],c,e,s,t)}else this.appendNode(i,h,c,e,s,t);r=parseInt(h.getAttribute("aria-level"),10),o=!0}this.fields.dataSource instanceof ut||(this.preventExpand=!1),this.trigger("nodeDropped",this.getDragEvent(e.event,s,i,e.target,e.dragData.draggedElement,null,r,o)),s.element.id!==this.element.id&&s.triggerEvent(),this.triggerEvent()}appendNode(e,t,i,s,r,o){let a=B(e,"."+Sp),l=B(s.target,"."+uh),h=B(s.target,"."+xr);t.classList.contains("e-disable")||a||!(h&&s.event.offsetY<5||l&&s.event.offsetX<3||h&&s.event.offsetY>19||l&&s.event.offsetX>19||!h&&!l)?this.dropAsChildNode(t,i,r,null,s,o,!0):"LI"===e.nodeName?this.dropAsSiblingNode(t,i,s,r):e.firstElementChild&&e.classList.contains(gg)?"UL"===e.firstElementChild.nodeName&&this.dropAsSiblingNode(t,i,s,r):e.classList.contains("e-icon-collapsible")||e.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(t,i,s,r):this.dropAsChildNode(t,i,r,null,s,o)}dropAsSiblingNode(e,t,i,s){let l,r=B(t,"."+on),o=B(e,"."+on),a=B(o,"."+is);if(i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-2?l=!1:i.event.offsetY<2?l=!0:(i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible"))&&(i.event.offsetY<5||i.event.offsetX<3?l=!0:(i.event.offsetY>15||i.event.offsetX>17)&&(l=!1)),i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible")){let h=i.target.closest("li");r.insertBefore(e,l?h:h.nextElementSibling)}else r.insertBefore(e,l?i.target:i.target.nextElementSibling);this.moveData(e,t,r,l,s),this.updateElement(o,a),this.updateAriaLevel(e),s.element.id===this.element.id?this.updateList():(s.updateInstance(),this.updateInstance())}dropAsChildNode(e,t,i,s,r,o,a){let m,l=B(e,"."+on),h=B(l,"."+is),c=B(t,"."+on);if(r&&r.target&&(m=X(this.fullRowSelect?"."+gC:"."+Ol,t)),r&&o<7&&!a)c.insertBefore(e,t),this.moveData(e,t,c,!0,i);else if(r&&r.target.offsetHeight>0&&o>r.target.offsetHeight-10&&!a&&!this.hasTemplate)c.insertBefore(e,t.nextElementSibling),this.moveData(e,t,c,!1,i);else if(this.hasTemplate&&m&&o>m.offsetHeight-10&&!a)c.insertBefore(e,t.nextElementSibling),this.moveData(e,t,c,!1,i);else{let b=this.expandParent(t),v=b.childNodes[s];b.insertBefore(e,v),this.moveData(e,v,b,!0,i)}this.updateElement(l,h),this.updateAriaLevel(e),i.element.id===this.element.id?this.updateList():(i.updateInstance(),this.updateInstance())}moveData(e,t,i,s,r){let o=B(i,"."+is),a=this.getId(e),l=r.updateChildField(r.treeData,r.fields,a,null,null,!0),h=this.getId(t),c=this.getDataPos(this.treeData,this.fields,h),m=this.getId(o);if(1===this.dataType){this.updateField(this.treeData,this.fields,m,"hasChildren",!0);let b=f(c)?this.treeData.length:s?c:c+1;if(f(m)&&!this.hasPid)delete l[0][this.fields.parentID];else{let v=this.isNumberTypeId?parseFloat(m):m;zt(this.fields.parentID,v,l[0])}if(this.treeData.splice(b,0,l[0]),r.element.id!==this.element.id){let v=r.removeChildNodes(a);b++;for(let w=0,E=v.length;w<E;w++)this.treeData.splice(b,0,v[w]),b++;r.groupedData=r.getGroupedData(r.treeData,r.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,m,l,s?c:c+1)}expandParent(e){let t=X("div."+Ga,e);t&&t.classList.contains(xr)&&!0!==this.preventExpand&&this.expandAction(e,t,null);let i=X("."+on,e);if(!0===this.preventExpand&&!i&&t&&this.renderChildNodes(e),i=X("."+on,e),!f(i)&&!0===this.preventExpand&&(i.style.display="none"),!f(i)&&!1===this.preventExpand&&(i.style.display="block"),f(i)&&!0===this.preventExpand){f(t)&&Js.generateIcon(this.createElement,e,xr,this.listBaseOption);let s=X("div."+Ga,e);s&&s.classList.add("e-icon-expandable"),i=Js.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(i),s?W([s],uh):Js.generateIcon(this.createElement,e,xr,this.listBaseOption),e.setAttribute("aria-expanded","false"),i.style.display="none"}if(f(i)){this.trigger("nodeExpanding",this.getExpandEvent(e,null)),f(t)&&Js.generateIcon(this.createElement,e,uh,this.listBaseOption);let s=X("div."+Ga,e);s||(Js.generateIcon(this.createElement,e,uh,this.listBaseOption),s=X("div."+Ga,e)),W([s],xr),i=Js.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(i),this.addExpand(e),this.trigger("nodeExpanded",this.getExpandEvent(e,null))}return i}updateElement(e,t){if(t&&0===e.childElementCount){let i=X("div."+Ga,t);te(e),te(i);let s=this.getId(t);this.updateField(this.treeData,this.fields,s,"hasChildren",!1),this.removeExpand(t,!0)}}updateAriaLevel(e){let t=this.parents(e,"."+on).length;e.setAttribute("aria-level",""+t),this.updateChildAriaLevel(X("."+on,e),t+1)}updateChildAriaLevel(e,t){if(!f(e)){let i=e.childNodes;for(let s=0,r=i.length;s<r;s++){let o=i[s];o.setAttribute("aria-level",""+t),this.updateChildAriaLevel(X("."+on,o),t+1)}}}renderVirtualEle(e){let t;e.event.offsetY>e.target.offsetHeight-2?t=!1:e.event.offsetY<2&&(t=!0);let i=this.createElement("div",{className:hP});e.target.insertBefore(i,e.target.children[this.fullRowSelect?t?1:2:t?0:1])}removeVirtualEle(){let e=X("."+hP);e&&te(e)}destroyDrag(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())}getDragEvent(e,t,i,s,r,o,a,l){let h=i?B(i,"."+is):null,c=h?this.getNodeData(h):null,m=t?t.dragLi:r,b=t?t.dragData:null,v=i?this.parents(i,"."+is):null,w=t.dragLi.parentElement,E=t.dragLi?B(w,"."+is):null,D=null,L=null,N=[cP,nj,DK,kK],V=null,$=!0===l?m:h,ie=$?B($,".e-list-parent"):null,Q=0,le=null;if(E=t.dragLi&&null===E?B(w,"."+gg):E,E=!0===l?this.dragParent:E,o)for(;Q<4;){if(X("."+Ga,o).classList.contains(N[Q])){V=N[Q];break}Q++}if(ie){let ke=0;for(Q=0;Q<ie.childElementCount;Q++){if(ke=!0!==l&&ie.children[Q]===m&&h!==m?++ke:ke,!0!==l&&ie.children[Q].classList.contains("e-hover")){L=e.offsetY>=23?Q+1:Q;break}if(ie.children[Q]===$){L=Q;break}}L=0!==ke?--L:L,le="e-drop-in"==V?"Inside":e.offsetY<7?"Before":"After"}if(i&&(D=0===v.length?null:i.classList.contains(is)?v[0]:v[1]),h===m&&(D=h),i&&s.offsetHeight<=33&&e.offsetY<s.offsetHeight-10&&e.offsetY>6&&(D=h,!0!==l)){a=++a;let ke=D?X(".e-list-parent",D):null;if(L=ke?ke.children.length:0,!(this.fields.dataSource instanceof ut)&&null===ke&&D){let Ye=D.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,D.getAttribute("data-uid").toString()):null;L=Ye?Ye.length:0}}return{cancel:!1,clonedNode:o,event:e,draggedNode:m,draggedNodeData:b,droppedNode:h,droppedNodeData:c,dropIndex:L,dropLevel:a,draggedParentNode:E,dropTarget:D,dropIndicator:V,target:s,position:le}}addFullRow(e){let t=this.liList.length;if(e)for(let i=0;i<t;i++)this.createFullRow(this.liList[i]);else for(let i=0;i<t;i++)te(X("."+gC,this.liList[i]))}createFullRow(e){let t=this.createElement("div",{className:gC});e.insertBefore(t,e.childNodes[0])}addMultiSelect(e){if(e){let t=bt("."+is+':not([aria-selected="true"])',this.element);for(let i of t)i.setAttribute("aria-selected","false")}else{let t=bt("."+is+'[aria-selected="false"]',this.element);for(let i of t)i.removeAttribute("aria-selected")}}collapseByLevel(e,t,i){if(t>0&&!f(e)){let s=this.getVisibleNodes(i,e.childNodes);for(let r=0,o=s.length;r<o;r++){let a=s[r],l=X("."+uh,X("."+Ol,a));f(l)||this.collapseNode(a,l,null),this.collapseByLevel(X("."+on,a),t-1,i)}}}collapseAllNodes(e){let t=this.getVisibleNodes(e,bt("."+uh,this.element));for(let i=0,s=t.length;i<s;i++){let r=t[i],o=B(r,"."+is);this.collapseNode(o,r,null)}}expandByLevel(e,t,i){if(t>0&&!f(e)){let s=this.getVisibleNodes(i,e.childNodes);for(let r=0,o=s.length;r<o;r++){let a=s[r],l=X("."+xr,X("."+Ol,a));f(l)||this.expandAction(a,l,null),this.expandByLevel(X("."+on,a),t-1,i)}}}expandAllNodes(e){let t=this.getVisibleNodes(e,bt("."+xr,this.element));for(let i=0,s=t.length;i<s;i++){let r=t[i],o=B(r,"."+is);this.expandAction(o,r,null,!0)}}getVisibleNodes(e,t){let i=Array.prototype.slice.call(t);if(e)for(let s=0;s<i.length;s++)Xr(i[s])||(i.splice(s,1),s--);return i}removeNode(e){let t=B(e,"."+on),i=B(t,"."+is);f(this.nodeTemplateFn)||this.destroyTemplate(e),te(e),this.updateElement(t,i),this.removeData(e)}updateInstance(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()}updateList(){this.liList=Array.prototype.slice.call(bt("."+is,this.element))}updateSelectedNodes(){this.setProperties({selectedNodes:[]},!0);let e=bt("."+Au,this.element);this.selectGivenNodes(e)}updateExpandedNodes(){this.setProperties({expandedNodes:[]},!0);let e=bt('[aria-expanded="true"]',this.element);for(let t=0,i=e.length;t<i;t++)this.addExpand(e[t])}removeData(e){if(1===this.dataType){let t=new ut(this.treeData),i=this.getId(e),s={},r=this.isNumberTypeId?parseFloat(i):i;s[this.fields.id]=r,t.remove(this.fields.id,s),this.removeChildNodes(i)}else{let t=this.getId(e);this.updateChildField(this.treeData,this.fields,t,null,null,!0)}}removeChildNodes(e){let t=this.getChildGroup(this.groupedData,e,!1),i=[];if(t)for(let s=0,r=t.length;s<r;s++){let o=new ut(this.treeData),a=U(this.fields.id,t[s]).toString(),l={},h=this.isNumberTypeId?parseFloat(a):a;l[this.fields.id]=h;let c=o.remove(this.fields.id,l);i.push(c[0]),this.removeChildNodes(a)}return i}doGivenAction(e,t,i){for(let s=0,r=e.length;s<r;s++){let o=this.getElement(e[s]);if(f(o))continue;let a=X("."+t,X("."+Ol,o));f(a)||(i?this.expandAction(o,a,null):this.collapseNode(o,a,null))}}addGivenNodes(e,t,i,s,r){if(0===e.length)return;let o=this.getSortedData(e),a=t?parseFloat(t.getAttribute("aria-level"))+1:1;s&&this.updateMapper(a);let h,l=Js.createListItemFromJson(this.createElement,o,this.listBaseOption,a);h=r||(t?this.expandParent(t):X("."+on,this.element));let c=h.childNodes[i];for(let b=0;b<l.length;b++)h.insertBefore(l[b],c);let m=this.getId(t);if(1===this.dataType){this.updateField(this.treeData,this.fields,m,"hasChildren",!0);let b=this.getId(c),v=f(b)?this.treeData.length:this.getDataPos(this.treeData,this.fields,b);for(let w=0;w<e.length;w++){if(!f(m)){let E=this.isNumberTypeId?parseFloat(m):m;zt(this.fields.parentID,E,e[w])}this.treeData.splice(v,0,e[w]),v++}}else this.addChildData(this.treeData,this.fields,m,e,i);this.finalizeNode(h)}updateMapper(e){let t=1===e?this.fields:this.getChildFields(this.fields,e-1,1);this.updateListProp(t)}updateListProp(e){let t=this.getActualProperties(e);this.listBaseOption.fields=t,this.listBaseOption.fields.url=t.hasOwnProperty("navigateUrl")?t.navigateUrl:"navigateUrl"}getDataPos(e,t,i){let s=null;for(let r=0,o=e.length;r<o;r++){let a=U(t.id,e[r]);if(e[r]&&a&&a.toString()===i)return r;if("string"!=typeof t.child||f(U(t.child,e[r]))){if(this.fields.dataSource instanceof ut&&!f(U("child",e[r]))){let l=U("child",e[r]);if(s=this.getDataPos(l,this.getChildMapper(t),i),null!==s)break}}else{let l=U(t.child,e[r]);if(s=this.getDataPos(l,this.getChildMapper(t),i),null!==s)break}}return s}addChildData(e,t,i,s,r){let o;if(f(i)){r=f(r)?e.length:r;for(let a=0,l=s.length;a<l;a++)e.splice(r,0,s[a]),r++;return o}for(let a=0,l=e.length;a<l;a++){let h=U(t.id,e[a]);if(e[a]&&h&&h.toString()===i){if("string"==typeof t.child&&e[a].hasOwnProperty(t.child)&&null!==e[a][t.child]||this.fields.dataSource instanceof ut&&e[a].hasOwnProperty("child")){let m=U("string"==typeof t.child?t.child:"child",e[a]);f(m)&&(m=[]),r=f(r)?m.length:r;for(let b=0,v=s.length;b<v;b++)m.splice(r,0,s[b]),r++}else e[a]["string"==typeof t.child?t.child:"child"]=s;return!0}if("string"!=typeof t.child||f(U(t.child,e[a]))){if(this.fields.dataSource instanceof ut&&!f(U("child",e[a]))){let c=U("child",e[a]);if(o=this.addChildData(c,this.getChildMapper(t),i,s,r),void 0!==o)break}}else{let c=U(t.child,e[a]);if(o=this.addChildData(c,this.getChildMapper(t),i,s,r),void 0!==o)break}}return o}doDisableAction(e){let t=this.nodeType(e),i=this.checkValidId(t);this.validArr=[];for(let s=0,r=i.length;s<r;s++){let o=i[s][this.fields.id].toString();o&&-1===this.disableNode.indexOf(o)&&this.disableNode.push(o);let a=this.getElement(o);a&&(a.setAttribute("aria-disabled","true"),z([a],"e-disable"))}}doEnableAction(e){let t=this.nodeType(e);for(let i=0,s=t.length;i<s;i++){let r=this.getElement(t[i]),o=t[i];o&&-1!==this.disableNode.indexOf(o)&&this.disableNode.splice(this.disableNode.indexOf(o),1),r&&(r.removeAttribute("aria-disabled"),W([r],"e-disable"))}}nodeType(e){let t=[];for(let i=0,s=e.length;i<s;i++){let r;"string"==typeof e[i]?r=e[i]?e[i].toString():null:"object"==typeof e[i]&&(r=e[i]?e[i].getAttribute("data-uid").toString():null),-1==t.indexOf(r)&&t.push(r)}return t}checkValidId(e){if(1===this.dataType)this.validArr=this.treeData.filter(t=>-1!==e.indexOf(t[this.fields.id]?t[this.fields.id].toString():null));else if(2===this.dataType)for(let t=0;t<this.treeData.length;t++){let i=this.treeData[t][this.fields.id]?this.treeData[t][this.fields.id].toString():null;-1!==e.indexOf(i)&&this.validArr.push(this.treeData[t]);let s=U(this.fields.child.toString(),this.treeData[t]);s&&this.filterNestedChild(s,e)}return this.validArr}filterNestedChild(e,t){for(let i=0;i<e.length;i++){let s=e[i][this.fields.id]?e[i][this.fields.id].toString():null;-1!==t.indexOf(s)&&this.validArr.push(e[i]);let r=U(this.fields.child.toString(),e[i]);r&&this.filterNestedChild(r,t)}}setTouchClass(){let e=B(this.element,".e-bigger");this.touchClass=f(e)?"":"e-small"}updatePersistProp(){this.removeField(this.treeData,this.fields,["selected","expanded"]);let e=this.selectedNodes;for(let i=0,s=e.length;i<s;i++)this.updateField(this.treeData,this.fields,e[i],"selected",!0);let t=this.expandedNodes;for(let i=0,s=t.length;i<s;i++)this.updateField(this.treeData,this.fields,t[i],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);let i=this.checkedNodes;for(let s=0,r=i.length;s<r;s++)this.updateField(this.treeData,this.fields,i[s],"isChecked",!0)}}removeField(e,t,i){if(!f(e)&&!f(t))for(let s=0,r=e.length;s<r;s++){for(let o=0;o<i.length;o++){let a=this.getMapperProp(t,i[o]);f(e[s][a])||delete e[s][a]}"string"!=typeof t.child||f(U(t.child,e[s]))?this.fields.dataSource instanceof ut&&!f(U("child",e[s]))&&this.removeField(U("child",e[s]),this.getChildMapper(t),i):this.removeField(U(t.child,e[s]),this.getChildMapper(t),i)}}getMapperProp(e,t){switch(t){case"selected":return f(e.selected)?"selected":e.selected;case"expanded":return f(e.expanded)?"expanded":e.expanded;case"isChecked":return f(e.isChecked)?"isChecked":e.isChecked;case"hasChildren":return f(e.hasChildren)?"hasChildren":e.hasChildren;default:return t}}updateField(e,t,i,s,r){if(!f(i))if(1===this.dataType){let o=this.isNumberTypeId?parseFloat(i):i,a=new ut(this.treeData).executeLocal((new Ut).where(t.id,"equal",o,!1));zt(this.getMapperProp(t,s),r,a[0])}else this.updateChildField(e,t,i,s,r)}updateChildField(e,t,i,s,r,o){let a;if(f(e))return a;for(let l=0,h=e.length;l<h;l++){let c=U(t.id,e[l]);if(e[l]&&c&&c.toString()===i)return o?a=e.splice(l,1):(zt(this.getMapperProp(t,s),r,e[l]),a=[]),a;if("string"!=typeof t.child||f(U(t.child,e[l]))){if(this.fields.dataSource instanceof ut&&!f(U("child",e[l]))){let m=U("child",e[l]);if(a=this.updateChildField(m,this.getChildMapper(t),i,s,r,o),void 0!==a)break}}else{let m=U(t.child,e[l]);if(a=this.updateChildField(m,this.getChildMapper(t),i,s,r,o),void 0!==a)break}}return a}triggerEvent(){this.renderReactTemplates(),this.trigger("dataSourceChanged",{data:this.treeData})}wireInputEvents(e){k.add(e,"blur",this.inputFocusOut,this)}wireEditingEvents(e){if(e&&!this.disabled){let t=this;this.touchEditObj=new Lr(this.element,{tap:i=>{this.isDoubleTapped(i)&&2===i.tapCount&&(i.originalEvent.preventDefault(),t.editingHandler(i.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()}wireClickEvent(e){if(e){let t=this;this.touchClickObj=new Lr(this.element,{tap:i=>{t.clickHandler(i)}})}else this.touchClickObj&&this.touchClickObj.destroy()}wireExpandOnEvent(e){if(e){let t=this;this.touchExpandObj=new Lr(this.element,{tap:i=>{("Click"===this.expandOnType||"DblClick"===this.expandOnType&&this.isDoubleTapped(i)&&2===i.tapCount)&&3!==i.originalEvent.which&&t.expandHandler(i)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()}mouseDownHandler(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.allowMultiSelection&&k.add(this.element,"contextmenu",this.preventContextMenu,this)}preventContextMenu(e){e.preventDefault()}wireEvents(){k.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),k.add(this.element,"focus",this.focusIn,this),k.add(this.element,"blur",this.focusOut,this),k.add(this.element,"mouseover",this.onMouseOver,this),k.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new Gn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}unWireEvents(){k.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),k.remove(this.element,"focus",this.focusIn),k.remove(this.element,"blur",this.focusOut),k.remove(this.element,"mouseover",this.onMouseOver),k.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()}parents(e,t){let i=[],s=e.parentNode;for(;!f(s);)ck(s,t)&&i.push(s),s=s.parentNode;return i}isDoubleTapped(e){let i,t=e.originalEvent.target;return t&&e.tapCount&&(1===e.tapCount?this.firstTap=B(t,"."+is):2===e.tapCount&&(i=B(t,"."+is))),this.firstTap===i}isDescendant(e,t){let i=t.parentNode;for(;!f(i);){if(i===e)return!0;i=i.parentNode}return!1}showSpinner(e){z([e],_K),vp({target:e,width:q.isDevice?16:14},this.createElement),xa(e)}hideSpinner(e){Rl(e),e.innerHTML="",W([e],_K)}setCheckedNodes(e){e=JSON.parse(JSON.stringify(e)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(e),e.length>0&&this.checkAll(e)}setValidCheckedNode(e){if(1===this.dataType){let t=this.fields,i=new ut(this.treeData).executeLocal((new Ut).where(t.id,"equal",e,!0));if(i[0]&&(this.setChildCheckState(i,e,i[0]),this.autoCheck)){let s=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null,r=this.getChildNodes(this.treeData,s),o=0;for(let a=0;a<r.length;a++){let l=r[a][this.fields.id].toString();-1!==this.checkedNodes.indexOf(l)&&o++}o===r.length&&-1===this.checkedNodes.indexOf(s)&&s&&this.checkedNodes.push(s)}}else if(2===this.dataType)for(let t=0;t<this.treeData.length;t++){if((this.treeData[t][this.fields.id]?this.treeData[t][this.fields.id].toString():"")===e&&-1===this.checkedNodes.indexOf(e)){this.checkedNodes.push(e);break}let s=U(this.fields.child.toString(),this.treeData[t]);s&&this.setChildCheckState(s,e,this.treeData[t])}}setChildCheckState(e,t,i){let s,r=0;if(1===this.dataType){i&&(s=i[this.fields.id]?i[this.fields.id].toString():null);for(let o=0;o<e.length;o++){let a=e[o][this.fields.id]?e[o][this.fields.id].toString():null;i&&s&&this.autoCheck&&-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(a)&&this.checkedNodes.push(a),a===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t);let l=this.getChildNodes(this.treeData,a);l&&this.setChildCheckState(l,t,i)}}else{i&&(s=i[this.fields.id]?i[this.fields.id].toString():"");for(let o=0;o<e.length;o++){let a=e[o][this.fields.id]?e[o][this.fields.id].toString():"";i&&s&&this.autoCheck&&-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(a)&&this.checkedNodes.push(a),a===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t);let l=U(this.fields.child.toString(),e[o]);l&&this.setChildCheckState(l,t,e[o]),-1!==this.checkedNodes.indexOf(a)&&this.autoCheck&&r++,r===e.length&&-1===this.checkedNodes.indexOf(s)&&this.autoCheck&&this.checkedNodes.push(s)}}}setIndeterminate(e){for(let t=0;t<e.length;t++)this.setValidCheckedNode(e[t])}updatePosition(e,t,i,s){if(1===this.dataType){let r=this.getDataPos(this.treeData,this.fields,e);if(this.treeData.splice(r,1,t),i){this.removeChildNodes(e);for(let o=0;o<s.length;o++)this.treeData.splice(r,0,s[o]),r++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,e,[t],void 0)}updateChildPosition(e,t,i,s,r){let o;for(let a=0,l=e.length;a<l;a++){let h=U(t.id,e[a]);if(e[a]&&h&&h.toString()===i)return e[a]=s[0],!0;if("string"!=typeof t.child||f(U(t.child,e[a]))){if(this.fields.dataSource instanceof ut&&!f(U("child",e[a]))){let c=U("child",e[a]);if(o=this.updateChildPosition(c,this.getChildMapper(t),i,s,r),void 0!==o)break}}else{let c=U(t.child,e[a]);if(o=this.updateChildPosition(c,this.getChildMapper(t),i,s,r),void 0!==o)break}}return o}dynamicState(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())}crudOperation(e,t,i,s,r,o,a){let b,l=this.fields.dataSource,h=[],c=this.getQuery(this.fields),m=this.fields.id,v={addedRecords:[],deletedRecords:[],changedRecords:[]},w=[];t?w=this.nodeType(t):i&&("string"==typeof i?w[0]=i.toString():"object"==typeof i&&(w[0]=i.getAttribute("data-uid").toString()));for(let E=0,D=w.length;E<D;E++){if(f(this.getElement(w[E])))continue;let N=this.getNodeObject(w[E]);h.push(N)}switch(e){case"delete":1==t.length?b=l.remove(m,h[0],c.fromTable,c):(v.deletedRecords=h,b=l.saveChanges(v,m,c.fromTable,c)),b.then(E=>this.deleteSuccess(w)).catch(E=>this.dmFailure(E));break;case"update":h[0][this.fields.text]=s,b=l.update(m,h[0],c.fromTable,c),b.then(E=>this.editSucess(i,s,a)).catch(E=>this.dmFailure(E,i,a));break;case"insert":if(1==r.length)b=l.insert(r[0],c.fromTable,c);else{let E=[];for(let D=0,L=r.length;D<L;D++)E.push(r[D]);v.addedRecords=E,b=l.saveChanges(v,m,c.fromTable,c)}b.then(E=>{let D=this.getElement(i);this.addSuccess(r,D,o),this.preventExpand=!1}).catch(E=>this.dmFailure(E))}}deleteSuccess(e){for(let t=0,i=e.length;t<i;t++){let s=this.getElement(e[t]);f(s)||this.removeNode(s)}this.updateInstance(),1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent()}editSucess(e,t,i){let s=this.getElement(e),r=X("."+i_,s);this.appendNewText(s,r,t,i)}addSuccess(e,t,i){let s,r=t?t.querySelector("."+Ga):null,o=this;t&&r&&r.classList.contains(xr)&&null===t.querySelector("."+on)?o.renderChildNodes(t,null,()=>{s=t.querySelector("."+on),o.addGivenNodes(e,t,i,!0,s),o.triggerEvent()}):(this.addGivenNodes(e,t,i,!0),this.triggerEvent())}dmFailure(e,t,i){t&&this.updatePreviousText(t,i),this.trigger("actionFailure",{error:e})}updatePreviousText(e,t){let i=this.getElement(e),s=X("."+i_,i);this.updateText(i,s,this.oldText,t)}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){let s=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(s,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=t.checkedNodes,this.setCheckedNodes(e.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=e.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(t.cssClass,e.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:f(e.expandedNodes)?[]:e.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"!==this.expandOnType&&!this.disabled&&this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.reRenderNodes(),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){let s=this.element.querySelectorAll("li"),r=0;for(;r<s.length;)"true"!==s[r].getAttribute("aria-expanded")&&this.renderChildNodes(s[r],!0,null,!0),r++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:e.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:e.fullRowNavigable},!0),this.listBaseOption.itemNavigable=e.fullRowNavigable,this.reRenderNodes()}}destroy(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.element.removeAttribute("tabindex"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),super.destroy()}addNodes(e,t,i,s){if(f(e))return;e=JSON.parse(JSON.stringify(e));let r=this.getElement(t);if(this.preventExpand=s,this.fields.dataSource instanceof ut)this.isOffline?this.addSuccess(e,r,i):this.crudOperation("insert",null,t,null,e,i,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(e,r,i);else{if(r)this.addGivenNodes(e,r,i);else{e=this.getSortedData(e);for(let o=0;o<e.length;o++){let a=U(this.fields.parentID,e[o]);r=a&&this.getElement(a.toString()),this.addGivenNodes([e[o]],r,i)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.updateCheckedStateFromDS(),this.showCheckBox&&r&&this.ensureParentCheckState(r),this.fields.dataSource instanceof ut||(this.preventExpand=!1,this.triggerEvent())}beginEdit(e){let t=this.getElement(e);f(t)||this.disabled||this.createTextbox(t,null)}checkAll(e){this.showCheckBox&&this.doCheckBoxAction(e,!0)}collapseAll(e,t,i){f(e)?t>0?this.collapseByLevel(X("."+on,this.element),t,i):this.collapseAllNodes(i):this.doGivenAction(e,uh,!1)}disableNodes(e){f(e)||this.doDisableAction(e)}enableNodes(e){f(e)||this.doEnableAction(e)}ensureVisible(e){let t=this.getElement(e);if(f(t))return;let i=this.parents(t,"."+is);this.expandAll(i),setTimeout(()=>{t.scrollIntoView(!0)},450)}expandAll(e,t,i){f(e)?t>0?this.expandByLevel(X("."+on,this.element),t,i):this.expandAllNodes(i):this.doGivenAction(e,xr,!0)}getAllCheckedNodes(){return this.checkedNodes}getDisabledNodes(){return this.disableNode}getNode(e){let t=this.getElement(e);return this.getNodeData(t,!0)}getTreeData(e){let t=this.getId(e);if(this.updatePersistProp(),f(t))return this.treeData;{let i=this.getNodeObject(t);return f(i)?[]:[i]}}moveNodes(e,t,i,s){let r=this.getElement(t);if(!f(r)){for(let o=0;o<e.length;o++){let a=this.getElement(e[o]);f(a)||r.isSameNode(a)||this.isDescendant(a,r)||(this.preventExpand=s,this.dropAsChildNode(a,r,this,i))}this.fields.dataSource instanceof ut||(this.preventExpand=!1),this.triggerEvent()}}refreshNode(e,t){if(f(e)||f(t))return;let i,s=!1;1==this.dataType&&t.length>1?s=!0:2==this.dataType&&1===t.length&&(f(U(this.fields.child.toString(),t[0]))||(s=!0));let o,a,r=this.getElement(e);if(i=r?r.getAttribute("data-uid"):e?e.toString():null,this.refreshData=this.getNodeObject(i),t=JSON.parse(JSON.stringify(t)),1==this.dataType&&s){for(let b=0;b<t.length;b++)if(f(t[b][this.fields.parentID])){a=t[b],t.splice(b,1);break}o=Ae({},this.refreshData,a)}else o=Ae({},this.refreshData,t[0]);if(f(r))return void this.updatePosition(i,o,s,t);this.isRefreshed=!0;let l=parseFloat(r.getAttribute("aria-level")),h=Js.createListItemFromJson(this.createElement,[o],this.listBaseOption,l),c=X("."+on,r),m=U(this.fields.child.toString(),o);if(s&&c||s&&!f(m)){let b=r.parentElement,v=Array.prototype.indexOf.call(b.childNodes,r);Yt(r),b.insertBefore(h[0],b.childNodes[v]),this.updatePosition(i,o,s,t),s&&c&&this.expandAll([i])}else{let b=X("."+Ol,r),v=X("."+Ol,h[0]),w=X("div."+Ga,b),E=X("div."+Ga,v);w&&E&&(E.classList.contains(xr)&&w.classList.contains(uh)?(W([E],xr),z([E],uh)):E.classList.contains(uh)&&w.classList.contains(xr)?(W([E],uh),z([E],xr)):w.classList.contains("interaction")&&z([E],"interaction")),Yt(b);let D=X("."+gC,r);D.parentNode.insertBefore(v,D.nextSibling),this.updatePosition(i,o,s,t)}if(r=this.getElement(e),o[this.fields.tooltip]&&r.setAttribute("title",o[this.fields.tooltip]),o.hasOwnProperty(this.fields.htmlAttributes)&&o[this.fields.htmlAttributes]){let b={};Ph(b,o[this.fields.htmlAttributes]),b.class?(z([r],b.class.split(" ")),delete b.class):Rt(r,b)}-1!==this.selectedNodes.indexOf(i)&&(r.setAttribute("aria-selected","true"),z([r],Au)),this.isRefreshed=!1,this.triggerEvent()}removeNodes(e){f(e)||(this.fields.dataSource instanceof ut&&!this.isOffline?this.crudOperation("delete",e):this.deleteSuccess(e))}updateNode(e,t){if(f(e)||f(t)||!this.allowEditing)return;let i=this.getElement(e);if(f(i))return;let s=X("."+i_,i);this.updateOldText(i);let r=this.getEditEvent(i,null,null);this.trigger("nodeEditing",r,o=>{o.cancel||(this.fields.dataSource instanceof ut&&!this.isOffline?this.crudOperation("update",null,e,t,null,null,!1):this.appendNewText(i,s,t,!1))})}uncheckAll(e){this.showCheckBox&&this.doCheckBoxAction(e,!1)}};ki([_(!1)],ys.prototype,"allowDragAndDrop",void 0),ki([_(!1)],ys.prototype,"allowEditing",void 0),ki([_(!1)],ys.prototype,"allowMultiSelection",void 0),ki([_(!1)],ys.prototype,"allowTextWrap",void 0),ki([di({},RK)],ys.prototype,"animation",void 0),ki([_()],ys.prototype,"checkedNodes",void 0),ki([_("")],ys.prototype,"cssClass",void 0),ki([_(!1)],ys.prototype,"disabled",void 0),ki([_(null)],ys.prototype,"dragArea",void 0),ki([_(!1)],ys.prototype,"enableHtmlSanitizer",void 0),ki([_(!1)],ys.prototype,"enablePersistence",void 0),ki([_()],ys.prototype,"expandedNodes",void 0),ki([_("Auto")],ys.prototype,"expandOn",void 0),ki([di({},Sc)],ys.prototype,"fields",void 0),ki([_(!0)],ys.prototype,"fullRowSelect",void 0),ki([_(!0)],ys.prototype,"loadOnDemand",void 0),ki([_()],ys.prototype,"locale",void 0),ki([_()],ys.prototype,"nodeTemplate",void 0),ki([_()],ys.prototype,"selectedNodes",void 0),ki([_("None")],ys.prototype,"sortOrder",void 0),ki([_(!1)],ys.prototype,"showCheckBox",void 0),ki([_(!0)],ys.prototype,"autoCheck",void 0),ki([_(!1)],ys.prototype,"fullRowNavigable",void 0),ki([G()],ys.prototype,"actionFailure",void 0),ki([G()],ys.prototype,"created",void 0),ki([G()],ys.prototype,"dataBound",void 0),ki([G()],ys.prototype,"dataSourceChanged",void 0),ki([G()],ys.prototype,"drawNode",void 0),ki([G()],ys.prototype,"destroyed",void 0),ki([G()],ys.prototype,"keyPress",void 0),ki([G()],ys.prototype,"nodeChecked",void 0),ki([G()],ys.prototype,"nodeChecking",void 0),ki([G()],ys.prototype,"nodeClicked",void 0),ki([G()],ys.prototype,"nodeCollapsed",void 0),ki([G()],ys.prototype,"nodeCollapsing",void 0),ki([G()],ys.prototype,"nodeDragging",void 0),ki([G()],ys.prototype,"nodeDragStart",void 0),ki([G()],ys.prototype,"nodeDragStop",void 0),ki([G()],ys.prototype,"nodeDropped",void 0),ki([G()],ys.prototype,"nodeEdited",void 0),ki([G()],ys.prototype,"nodeEditing",void 0),ki([G()],ys.prototype,"nodeExpanded",void 0),ki([G()],ys.prototype,"nodeExpanding",void 0),ki([G()],ys.prototype,"nodeSelected",void 0),ki([G()],ys.prototype,"nodeSelecting",void 0),ys=EK=ki([as],ys);var Da=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const AK="e-sidebar",bg="e-close",Hf="e-open",LK="e-transition",ice="e-backdrop",uP="e-right",pP="e-left",Pk="e-over",s_="e-push",aj="e-slide",MK="e-visibility",sce="e-disable-animation",OK="e-sidebar-context",PK="e-sidebar-absolute";let aa=class extends Qs{constructor(e,t){super(e,t)}preRender(){this.setWidth()}render(){this.initialize(),this.wireEvents(),this.renderComplete()}initialize(){this.setTarget(),this.addClass(),this.setZindex(),this.enableDock&&this.setDock(),this.isOpen?(this.show(),this.firstRender=!0):this.setMediaQuery(),this.checkType(!0),this.setType(this.type),this.setCloseOnDocumentClick(),this.setEnableRTL(),q.isDevice&&(this.windowWidth=window.innerWidth)}setEnableRTL(){(this.enableRtl?z:W)([this.element],"e-rtl")}setTarget(){this.targetEle=this.element.nextElementSibling,this.sidebarEleCopy=this.element.cloneNode(!0),"string"==typeof this.target&&this.setProperties({target:document.querySelector(this.target)},!0),this.target&&(this.target.insertBefore(this.element,this.target.children[0]),z([this.element],PK),z([this.target],OK),this.targetEle=this.getTargetElement())}getTargetElement(){let e=this.element.nextElementSibling;for(;!f(e)&&e.classList.contains(AK);)e=e.nextElementSibling;return e}setCloseOnDocumentClick(){this.closeOnDocumentClick?k.add(document,"mousedown touchstart",this.documentclickHandler,this):k.remove(document,"mousedown touchstart",this.documentclickHandler)}setWidth(){this.enableDock&&"Left"===this.position||this.enableDock&&"Right"===this.position?ht(this.element,{width:this.setDimension(this.dockSize)}):this.enableDock||ht(this.element,{width:this.setDimension(this.width)})}setDimension(e){return"number"==typeof e?st(e):"string"==typeof e?e.match(/px|%|em/)?e:st(e):"100%"}setZindex(){ht(this.element,{"z-index":""+this.zIndex})}addClass(){"EJS-SIDEBAR"===this.element.tagName&&z([this.element],"e-sidebar-display");const e=document.querySelector(".e-main-content");f(e||this.targetEle)||z([e||this.targetEle],["e-content-animation"]),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",!this.enableDock&&"Auto"!==this.type&&z([this.element],[MK]),W([this.element],[Hf,bg,uP,pP,aj,s_,Pk]),this.element.classList.add(AK),z([this.element],"Right"===this.position?uP:pP),this.enableDock&&z([this.element],"e-dock"),this.element.setAttribute("tabindex",this.tabIndex),"Auto"!==this.type||q.isDevice?this.isOpen||z([this.element],bg):this.show()}checkType(e){"Push"===this.type||"Over"===this.type||"Slide"===this.type?!this.element.classList.contains(bg)&&!e&&this.hide():this.type="Auto"}transitionEnd(e){this.setDock(),!f(e)&&!this.firstRender&&this.triggerChange(),this.firstRender=!1,k.remove(this.element,"transitionend",this.transitionEnd)}destroyBackDrop(){const e=document.querySelector(".e-main-content")||this.targetEle;this.target&&this.showBackdrop&&e?W([e],ice):this.showBackdrop&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)}hide(e){const t={model:this,element:this.element,cancel:!1,isInteracted:!f(e),event:e||null};this.trigger("close",t,i=>{if(!i.cancel){if(this.element.classList.contains(bg))return;this.element.classList.contains(Hf)&&!this.animate&&this.triggerChange(),z([this.element],bg),W([this.element],Hf),ht(this.element,{width:st(this.enableDock?this.dockSize:this.width)}),this.setType(this.type);const s=document.querySelector(".e-main-content")||this.targetEle;!this.enableDock&&s&&(s.style.transform="translateX(0px)",s.style["Left"===this.position?"marginLeft":"marginRight"]="0px"),this.destroyBackDrop(),this.setAnimation(),"Slide"===this.type&&document.body.classList.remove("e-sidebar-overflow"),this.setProperties({isOpen:!1},!0),this.enableDock&&setTimeout(()=>this.setTimeOut(),50),k.add(this.element,"transitionend",this.transitionEnd,this)}})}setTimeOut(){const e=document.querySelector(".e-main-content")||this.targetEle,t=this.element.getBoundingClientRect().width;!this.element.classList.contains(Hf)||!e||"Over"===this.type&&this.enableDock?this.element.classList.contains(bg)&&e&&("Left"===this.position?e.style.marginLeft=this.setDimension("auto"===this.dockSize?t:this.dockSize):e.style.marginRight=this.setDimension("auto"===this.dockSize?t:this.dockSize)):"Left"===this.position?e.style.marginLeft=this.setDimension("auto"===this.width?t:this.width):e.style.marginRight=this.setDimension("auto"===this.width?t:this.width)}show(e){const t={model:this,element:this.element,cancel:!1,isInteracted:!f(e),event:e||null};this.trigger("open",t,i=>{if(!i.cancel){if(W([this.element],MK),this.element.classList.contains(Hf))return;this.element.classList.contains(bg)&&!this.animate&&this.triggerChange(),z([this.element],[Hf,LK]),ht(this.element,{transform:""}),W([this.element],bg),ht(this.element,{width:st(this.width)}),this.setType(this.type),this.createBackDrop(),this.setAnimation(),"Slide"===this.type&&document.body.classList.add("e-sidebar-overflow"),this.setProperties({isOpen:!0},!0),k.add(this.element,"transitionend",this.transitionEnd,this)}})}setAnimation(){this.animate?W([this.element],sce):z([this.element],sce)}triggerChange(){this.trigger("change",{name:"change",element:this.element})}setDock(){this.enableDock&&"Left"===this.position&&!this.getState()?ht(this.element,{transform:"translateX(-100%) translateX("+this.setDimension(this.dockSize)+")"}):this.enableDock&&"Right"===this.position&&!this.getState()&&ht(this.element,{transform:"translateX(100%) translateX(-"+this.setDimension(this.dockSize)+")"}),this.element.classList.contains(bg)&&this.enableDock&&ht(this.element,{width:this.setDimension(this.dockSize)})}createBackDrop(){this.target&&this.showBackdrop&&this.getState()?z([document.querySelector(".e-main-content")||this.targetEle],ice):this.showBackdrop&&!this.modal&&this.getState()&&(this.modal=this.createElement("div"),this.modal.className="e-sidebar-overlay",this.modal.style.display="block",document.body.appendChild(this.modal))}getPersistData(){return this.addOnPersist(["type","position","isOpen"])}getModuleName(){return"sidebar"}toggle(){this.element.classList.contains(Hf)?this.hide():this.show()}getState(){return!!this.element.classList.contains(Hf)}setMediaQuery(){if(this.mediaQuery){let e=!1;e="string"==typeof this.mediaQuery?window.matchMedia(this.mediaQuery).matches:this.mediaQuery.matches,e&&this.windowWidth!==window.innerWidth?this.show():this.getState()&&this.windowWidth!==window.innerWidth&&this.hide()}}resize(){"Auto"===this.type&&z([this.element],q.isDevice?Pk:s_),this.setMediaQuery(),q.isDevice&&(this.windowWidth=window.innerWidth)}documentclickHandler(e){B(e.target,".e-control."+AK)||this.hide(e)}enableGestureHandler(e){!this.isOpen&&"Left"===this.position&&"Right"===e.swipeDirection&&e.startX<=20&&e.distanceX>=50&&e.velocity>=.5?this.show():this.isOpen&&"Left"===this.position&&"Left"===e.swipeDirection||this.isOpen&&"Right"===this.position&&"Right"===e.swipeDirection?this.hide():!this.isOpen&&"Right"===this.position&&"Left"===e.swipeDirection&&window.innerWidth-e.startX<=20&&e.distanceX>=50&&e.velocity>=.5&&this.show()}setEnableGestures(){this.enableGestures?(this.mainContentEle=new Lr(document.body,{swipe:this.enableGestureHandler.bind(this)}),this.sidebarEle=new Lr(this.element,{swipe:this.enableGestureHandler.bind(this)})):this.mainContentEle&&this.sidebarEle&&(this.mainContentEle.destroy(),this.sidebarEle.destroy())}wireEvents(){this.setEnableGestures(),k.add(window,"resize",this.resize,this)}unWireEvents(){k.remove(window,"resize",this.resize),k.remove(document,"mousedown touchstart",this.documentclickHandler),this.mainContentEle&&this.mainContentEle.destroy(),this.sidebarEle&&this.sidebarEle.destroy()}onPropertyChanged(e,t){const i=document.querySelector(".e-main-content")||this.targetEle,s=this.isServerRendered;for(const r of Object.keys(e))switch(r){case"isOpen":this.isOpen?this.show():this.hide();break;case"width":this.setWidth(),this.getState()||this.setDock();break;case"animate":this.setAnimation();break;case"type":this.checkType(!1),W([this.element],[MK]),this.addClass(),z([this.element],"Auto"===this.type?q.isDevice?["e-over"]:["e-push"]:["e-"+this.type.toLowerCase()]);break;case"position":this.element.style.transform="",this.setDock(),i&&(i.style["Left"===this.position?"marginRight":"marginLeft"]="0px"),"Right"===this.position?(W([this.element],pP),z([this.element],uP)):(W([this.element],uP),z([this.element],pP)),this.setType(this.type);break;case"showBackdrop":this.showBackdrop?this.createBackDrop():this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null);break;case"target":"string"==typeof this.target&&this.setProperties({target:document.querySelector(this.target)},!0),f(this.target)&&(W([this.element],PK),W([t.target],OK),ht(i,{"margin-left":0,"margin-right":0}),document.body.insertAdjacentElement("afterbegin",this.element)),this.isServerRendered=!1,super.refresh(),this.isServerRendered=s;break;case"closeOnDocumentClick":this.setCloseOnDocumentClick();break;case"enableDock":this.getState()||this.setDock();break;case"zIndex":this.setZindex();break;case"mediaQuery":this.setMediaQuery();break;case"enableGestures":this.setEnableGestures();break;case"enableRtl":this.setEnableRTL()}}setType(e){const t=this.element.getBoundingClientRect().width;this.setZindex();const i=document.querySelector(".e-main-content")||this.targetEle;i&&(i.style.transform="translateX(0px)",!q.isDevice&&"Auto"!==this.type&&("Over"!==this.type||!this.enableDock)&&(i.style["Left"===this.position?"marginLeft":"marginRight"]="0px"));const s=t+"px",r="Left"===this.position?t:-t;switch(W([this.element],[s_,Pk,aj]),e){case"Push":z([this.element],[s_]),i&&(this.enableDock||this.element.classList.contains(Hf))&&(i.style["Left"===this.position?"marginLeft":"marginRight"]=s);break;case"Slide":z([this.element],[aj]),i&&(this.enableDock||this.element.classList.contains(Hf))&&(i.style.transform="translateX("+r+"px)");break;case"Over":z([this.element],[Pk]),this.enableDock&&(this.element.classList.contains(bg)||this.isOpen)&&i&&(i.style["Left"===this.position?"marginLeft":"marginRight"]=this.setDimension(this.dockSize));break;case"Auto":z([this.element],[LK]),q.isDevice?i&&this.enableDock&&!this.getState()?(i.style["Left"===this.position?"marginLeft":"marginRight"]=s,z([this.element],s_)):z([this.element],Pk):(z([this.element],s_),i&&(this.enableDock||this.element.classList.contains(Hf))&&(i.style["Left"===this.position?"marginLeft":"marginRight"]=s)),this.createBackDrop()}}destroy(){super.destroy(),this.target&&W([this.target],OK),this.destroyBackDrop(),this.element&&(W([this.element],[Hf,bg,s_,aj,Pk,pP,uP,LK]),W([this.element],PK),this.element.style.width="",this.element.style.zIndex="",this.element.style.transform="",f(this.sidebarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.windowWidth=null;const e=document.querySelector(".e-main-content")||this.targetEle;f(e)||(e.style.margin="",e.style.transform=""),this.unWireEvents()}};Da([_("auto")],aa.prototype,"dockSize",void 0),Da([_(null)],aa.prototype,"mediaQuery",void 0),Da([_(!1)],aa.prototype,"enableDock",void 0),Da([_("en-US")],aa.prototype,"locale",void 0),Da([_(!1)],aa.prototype,"enablePersistence",void 0),Da([_(!0)],aa.prototype,"enableGestures",void 0),Da([_(!1)],aa.prototype,"isOpen",void 0),Da([_(!1)],aa.prototype,"enableRtl",void 0),Da([_(!0)],aa.prototype,"animate",void 0),Da([_("auto")],aa.prototype,"height",void 0),Da([_(!1)],aa.prototype,"closeOnDocumentClick",void 0),Da([_("Left")],aa.prototype,"position",void 0),Da([_(null)],aa.prototype,"target",void 0),Da([_(!1)],aa.prototype,"showBackdrop",void 0),Da([_("Auto")],aa.prototype,"type",void 0),Da([_("auto")],aa.prototype,"width",void 0),Da([_(1e3)],aa.prototype,"zIndex",void 0),Da([G()],aa.prototype,"created",void 0),Da([G()],aa.prototype,"close",void 0),Da([G()],aa.prototype,"open",void 0),Da([G()],aa.prototype,"change",void 0),Da([G()],aa.prototype,"destroyed",void 0),aa=Da([as],aa);var Pl=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Fk="e-icon-right",FK="e-breadcrumb-text",NK="e-breadcrumb-icon",Nk="e-breadcrumb-menu",BK="e-breadcrumb-item",nce="e-breadcrumb-popup",lj="e-breadcrumb-wrap-mode",hj="e-breadcrumb-scroll-mode",cj="e-disabled",dj="aria-disabled",yg=".";class fP extends ii{}Pl([_("")],fP.prototype,"text",void 0),Pl([_("")],fP.prototype,"url",void 0),Pl([_(null)],fP.prototype,"iconCss",void 0),Pl([_(!1)],fP.prototype,"disabled",void 0);let xc=class extends Qs{constructor(e,t){super(e,t)}preRender(){}render(){this.initialize(),this.renderItems(this.items),this.wireEvents()}initialize(){this._maxItems=this.maxItems,this.element.setAttribute("aria-label","breadcrumb"),this.cssClass&&z([this.element],this.cssClass.split(" ")),this.enableRtl&&this.element.classList.add("e-rtl"),this.disabled&&(this.element.classList.add(cj),this.element.setAttribute(dj,"true")),"Wrap"===this.overflowMode?this.element.classList.add(lj):"Scroll"===this.overflowMode&&this.element.classList.add(hj),this.initItems(),this.initPvtProps()}initPvtProps(){"Hidden"===this.overflowMode&&this._maxItems>0&&(this.endIndex=this.getEndIndex(),this.startIndex=this.endIndex+1-(this._maxItems-1)),"Menu"===this.overflowMode&&(this._maxItems>=0?(this.startIndex=this._maxItems>1?1:0,this.endIndex=this.getEndIndex(),this.popupUl=this.createElement("ul",{attrs:{TABINDEX:"0",role:"menu"}})):this.startIndex=this.endIndex=null)}getEndIndex(){let e;return this.activeItem?this.items.forEach((t,i)=>{(t.url===this.activeItem||t.text===this.activeItem)&&(e=i)}):e=this.items.length-1,e}initItems(){if(!this.items.length){let e,t;const i=[];if(this.url){const s=new URL(this.url,window.location.origin);e=s.origin+"/",t=s.href.split(e)[1].split("/")}else e=window.location.origin+"/",t=window.location.href.split(e)[1].split("/");i.push({iconCss:"e-icons e-home",url:e});for(let s=0;s<t.length;s++)t[s]&&(i.push({text:t[s],url:e+t[s]}),e+=t[s]+"/");this.setProperties({items:i},!0)}}renderItems(e){let t,i;const s=this.element.classList.contains(Fk),r=e.length;if(r){let o,a,l,c,h=0;const m=2*r-1;let b=!1;const v=this.createElement("ol",{className:"Wrap"===this.overflowMode?"e-breadcrumb-wrapped-ol":""}),w=this.createElement("ol",{className:"Wrap"===this.overflowMode?"e-breadcrumb-first-ol":""}),E=this.hasField(e,"iconCss"),D="Collapsed"===this.overflowMode&&this._maxItems>0&&r>this._maxItems&&!this.isExpanded,L="Hidden"===this.overflowMode&&this._maxItems>0;"Menu"===this.overflowMode&&this.popupUl&&(this.popupUl.innerHTML="");const N={moduleName:this.getModuleName(),showIcon:E,itemNavigable:!0,itemCreated:V=>{const $=V.curData.isLastItem;$&&V.item.children.length&&!this.itemTemplate&&(delete V.curData.isLastItem,!l&&!this.enableActiveItemNavigation&&(V.item.innerHTML=this.createElement("span",{className:FK,innerHTML:V.item.children[0].innerHTML}).outerHTML)),V.curData.iconCss&&!V.curData.text&&!this.itemTemplate&&V.item.classList.add("e-icon-item"),L&&V.item.setAttribute("item-index",h.toString());const ie={item:Ae({},V.curData.properties?V.curData.properties:V.curData),element:V.item,cancel:!1};this.trigger("beforeItemRender",ie),b=ie.cancel;const Q=s||ie.element.classList.contains(Fk);Q&&V.curData.iconCss&&!this.itemTemplate&&V.item.querySelector(".e-anchor-wrap").appendChild(V.item.querySelector(yg+NK)),ie.item.disabled&&(V.item.setAttribute(dj,"true"),V.item.classList.add(cj)),(ie.item.disabled||this.disabled)&&V.item.children.length&&!this.itemTemplate&&V.item.children[0].setAttribute("tabindex","-1"),V.curData.isEmptyUrl&&(V.item.children[0].removeAttribute("href"),(!$||$&&this.enableActiveItemNavigation)&&!(ie.item.disabled||this.disabled)&&(V.item.children[0].setAttribute("tabindex","0"),k.add(V.item.children[0],"keydown",this.keyDownHandler,this))),$&&V.item.setAttribute("data-active-item",""),this.itemTemplate||this.beforeItemRenderChanges(V.curData,ie.item,V.item,Q)}};for(let V=0;V<m;V%2&&h++,V++){if(o=this.activeItem&&(this.activeItem===e[h].url||this.activeItem===e[h].text),D&&V>1&&V<m-2)continue;if(L&&(h<this.startIndex||h>this.endIndex)&&(!(V%2)||h!==this.startIndex-1)&&0!==h)continue;V%2?(c=this.createElement("div",{className:"e-breadcrumb-item-wrapper"}),N.template=this.separatorTemplate?this.separatorTemplate:"/",N.itemClass="e-breadcrumb-separator",i=!1,t=[{previousItem:e[h],nextItem:e[h+1]}]):(N.itemClass="",this.itemTemplate?(N.template=this.itemTemplate,i=!1):i=!0,t=[Ae({},e[h].properties?e[h].properties:e[h])],!t[0].url&&!this.itemTemplate&&(t=[Ae({},t[0],{isEmptyUrl:!0,url:"#"})]),a=(L||"Menu"===this.overflowMode)&&h===this.endIndex,((V===m-1||a)&&!this.itemTemplate||o)&&(t[0].isLastItem=!0));let $=v;const ie=this.startIndex+this.endIndex-this._maxItems;if("Menu"===this.overflowMode&&(h>=this.startIndex&&h<=ie&&(!(V%2)||h!==ie)&&this.endIndex>=this._maxItems&&this._maxItems>0||0===this._maxItems)){if(V%2)continue;$=this.popupUl,a&&(l=!0)}else"Wrap"===this.overflowMode&&($=0===V?w:c);const Q=Js.createList(this.createElement,t,N,i,this).childNodes;if(b){if(L||D||"Menu"===this.overflowMode||"Wrap"===this.overflowMode)return e.splice(h,1),this.initPvtProps(),this.reRenderItems();(V===m-1||a)&&Yt($.lastElementChild)}else mi(Q,$);if("Wrap"===this.overflowMode&&0!==V&&V%2==0&&v.appendChild(c),D&&1===V){const le=this.createElement("li",{className:"e-icons e-breadcrumb-collapsed",attrs:{TABINDEX:"0"}});k.add(le,"keyup",this.expandHandler,this),v.appendChild(le)}if("Menu"===this.overflowMode&&this.startIndex===V&&this.endIndex>=this._maxItems&&this._maxItems>=0){const le=this.getMenuElement();k.add(le,"keyup",this.keyDownHandler,this),v.appendChild(le)}if(o||a)break;b&&V++}this.isReact&&this.renderReactTemplates(),"Wrap"===this.overflowMode&&this.element.appendChild(w),this.element.appendChild(v),this.calculateMaxItems()}}calculateMaxItems(){if("Hidden"===this.overflowMode||"Collapsed"===this.overflowMode||"Menu"===this.overflowMode){let e;const t=this.element.offsetWidth,i=[].slice.call(this.element.children[0].children).reverse();let s="Menu"===this.overflowMode?0:i[i.length-1].offsetWidth+(i[i.length-2]?i[i.length-2].offsetWidth:0);if("Menu"===this.overflowMode){const r=this.getMenuElement();this.element.appendChild(r),s+=r.offsetWidth,Yt(r)}for(let r=0;r<i.length-2;r++){if(s>t){if(e=Math.ceil((r-1)/2)+("Menu"===this.overflowMode&&r<=2?0:1),(this.maxItems>e&&!(this.maxItems>-1&&-1==e)||-1==this.maxItems)&&this._maxItems!=e)return this._maxItems=e,this.initPvtProps(),this.reRenderItems();break}if("Menu"===this.overflowMode&&2===r&&(s+=i[i.length-1].offsetWidth+i[i.length-2].offsetWidth,s>t))return this._maxItems=1,this.initPvtProps(),this.reRenderItems();if(("Menu"!==this.overflowMode||!i[r].classList.contains(Nk))&&(s+=i[r].offsetWidth,s>t))return e=Math.ceil(r/2)+("Menu"===this.overflowMode&&r<=2?0:1),this._maxItems=e,this.initPvtProps(),this.reRenderItems()}}else if(("Wrap"===this.overflowMode||"Scroll"===this.overflowMode)&&this._maxItems>0){let e=0;const t=this.element.querySelectorAll(yg+BK);if(t.length>this._maxItems+this._maxItems-1){for(let i="Wrap"===this.overflowMode?1:0;i<this._maxItems+this._maxItems-1;i++)e+=t[i].offsetWidth;e=e+5+2*parseInt(getComputedStyle(this.element.children[0]).paddingLeft,10),"Wrap"===this.overflowMode?this.element.querySelector(".e-breadcrumb-wrapped-ol").style.width=e+"px":this.element.style.width=e+"px"}}}hasField(e,t){for(let i=0,s=e.length;i<s;i++)if(e[i][t])return!0;return!1}getMenuElement(){return this.createElement("li",{className:"e-icons e-breadcrumb-menu",attrs:{TABINDEX:"0"}})}beforeItemRenderChanges(e,t,i,s){const r=i.querySelector(".e-anchor-wrap");if(t.text!==e.text&&r.childNodes.forEach(o=>{o.nodeType===Node.TEXT_NODE&&(o.textContent=t.text)}),t.iconCss!==e.iconCss&&r){const o=i.querySelector(yg+NK);if(o)t.iconCss?(W([o],e.iconCss.split(" ")),z([o],t.iconCss.split(" "))):Yt(o);else if(t.iconCss){const a=this.createElement("span",{className:NK+" "+t.iconCss});s?mi([a],r):r.insertBefore(a,r.childNodes[0])}}if(t.url!==e.url&&this.enableNavigation){const o=i.querySelector("a."+FK);o&&(t.url?o.setAttribute("href",t.url):o.removeAttribute("href"))}}reRenderItems(){this.element.innerHTML="",this.renderItems(this.items)}clickHandler(e){const t=B(e.target,yg+BK+":not(.e-breadcrumb-separator)");if(this.enableNavigation||e.preventDefault(),t&&(B(e.target,yg+FK)||this.itemTemplate)){let i;i="Wrap"===this.overflowMode?[].slice.call(this.element.querySelectorAll(yg+BK)).indexOf(t):[].slice.call(t.parentElement.children).indexOf(t),"Menu"===this.overflowMode?B(e.target,yg+nce)?(i+=this.startIndex,this.endIndex=i,"keydown"===e.type&&this.documentClickHandler(e)):this.element.querySelector(yg+Nk)?i>[].slice.call(this.element.children[0].children).indexOf(this.element.querySelector(yg+Nk))?(i+=2*this.popupUl.childElementCount-2,i=Math.floor(i/2),this.endIndex=i):this.startIndex=this.endIndex=i:(i=Math.floor(i/2),this.startIndex=this.endIndex=i):i=Math.floor(i/2),"Hidden"===this.overflowMode&&this._maxItems>0&&0!==this.endIndex&&(i=parseInt(t.getAttribute("item-index"),10),this.startIndex>1&&(this.startIndex-=this.endIndex-i),this.endIndex=i),this.trigger("itemClick",{element:t,item:this.items[i],event:e}),this.activeItem=this.items[i].url||this.items[i].text,this.dataBind()}e.target.classList.contains("e-breadcrumb-collapsed")&&(this.isExpanded=!0,this.reRenderItems()),e.target.classList.contains(Nk)&&this.renderPopup()}renderPopup(){const e=this.createElement("div",{className:nce+" "+this.cssClass+(this.enableRtl?" e-rtl":"")});document.body.appendChild(e),this.popupObj=new fc(e,{content:this.popupUl,relateTo:this.element.querySelector(yg+Nk),enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},collision:{X:"fit",Y:"flip"},open:()=>{this.popupUl.focus()}}),this.popupWireEvents(),this.popupObj.show()}documentClickHandler(e){"Menu"===this.overflowMode&&this.popupObj&&this.popupObj.element.classList.contains("e-popup-open")&&!B(e.target,yg+Nk)&&(this.popupObj.hide(),this.popupObj.destroy(),te(this.popupObj.element))}resize(){this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems()}expandHandler(e){"Enter"===e.key&&(this.isExpanded=!0,this.reRenderItems())}keyDownHandler(e){"Enter"===e.key&&this.clickHandler(e)}popupKeyDownHandler(e){"Escape"===e.key&&this.documentClickHandler(e)}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"items":case"enableActiveItemNavigation":this.reRenderItems();break;case"activeItem":this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems();break;case"overflowMode":case"maxItems":this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems(),"Wrap"===t.overflowMode?this.element.classList.remove(lj):"Wrap"===e.overflowMode&&this.element.classList.add(lj),"Scroll"===t.overflowMode?this.element.classList.remove(hj):"Scroll"===e.overflowMode&&this.element.classList.add(hj);break;case"url":this.initItems(),this.reRenderItems();break;case"cssClass":t.cssClass&&W([this.element],t.cssClass.split(" ")),e.cssClass&&z([this.element],e.cssClass.split(" ")),(t.cssClass&&t.cssClass.indexOf(Fk)>-1&&!(e.cssClass&&e.cssClass.indexOf(Fk)>-1)||!(t.cssClass&&t.cssClass.indexOf(Fk)>-1)&&e.cssClass&&e.cssClass.indexOf(Fk)>-1)&&this.reRenderItems();break;case"enableRtl":this.element.classList.toggle("e-rtl");break;case"disabled":this.element.classList.toggle(cj),this.element.setAttribute(dj,e.disabled+"")}}wireEvents(){this.delegateClickHanlder=this.documentClickHandler.bind(this),k.add(document,"click",this.delegateClickHanlder,this),k.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resize.bind(this))}popupWireEvents(){k.add(this.popupObj.element,"click",this.clickHandler,this),k.add(this.popupObj.element,"keydown",this.popupKeyDownHandler,this)}unWireEvents(){k.remove(document,"click",this.delegateClickHanlder),k.remove(this.element,"click",this.clickHandler),window.removeEventListener("resize",this.resize.bind(this)),this.popupObj&&(k.remove(this.popupObj.element,"click",this.clickHandler),k.remove(this.popupObj.element,"keydown",this.popupKeyDownHandler))}getPersistData(){return this.addOnPersist(["activeItem"])}getModuleName(){return"breadcrumb"}destroy(){let e=[],t=["aria-label"];this.cssClass&&e.concat(this.cssClass.split(" ")),this.enableRtl&&e.push("e-rtl"),this.disabled&&(e.push(cj),t.push(dj)),"Wrap"===this.overflowMode?e.push(lj):"Scroll"===this.overflowMode&&e.push(hj),this.unWireEvents(),this.element.innerHTML="",W([this.element],e),t.forEach(i=>{this.element.removeAttribute(i)}),super.destroy()}};Pl([_("")],xc.prototype,"url",void 0),Pl([rh([],fP)],xc.prototype,"items",void 0),Pl([_("")],xc.prototype,"activeItem",void 0),Pl([_(-1)],xc.prototype,"maxItems",void 0),Pl([_("Menu")],xc.prototype,"overflowMode",void 0),Pl([_("")],xc.prototype,"cssClass",void 0),Pl([_(null)],xc.prototype,"itemTemplate",void 0),Pl([_("/")],xc.prototype,"separatorTemplate",void 0),Pl([_(!0)],xc.prototype,"enableNavigation",void 0),Pl([_(!1)],xc.prototype,"enableActiveItemNavigation",void 0),Pl([_(!1)],xc.prototype,"disabled",void 0),Pl([_("")],xc.prototype,"locale",void 0),Pl([G()],xc.prototype,"beforeItemRender",void 0),Pl([G()],xc.prototype,"itemClick",void 0),Pl([G()],xc.prototype,"created",void 0),xc=Pl([as],xc);var Er=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const HK="e-carousel",Lu="e-active",uj="e-rtl",vg="e-carousel-items",Bk="e-carousel-item",pj="e-previous",mP="e-carousel-navigators",ace="e-carousel-indicators",gP="e-indicator-bar",lce="e-indicator",fj="e-icons",VK="e-play-pause",Hk="e-play-icon",Vk="e-pause-icon",mj="e-previous-button",gj="e-next-button",zk="e-play-button",jk="e-hover-arrows",n_="e-carousel-hover",bj="e-template",dce="e-carousel-slide-animation",uce="e-carousel-fade-animation",zK="e-prev",jK="e-next",pce="e-transition-start",fce="e-transition-end";class bP extends ii{}Er([_()],bP.prototype,"cssClass",void 0),Er([_()],bP.prototype,"interval",void 0),Er([_()],bP.prototype,"template",void 0),Er([_()],bP.prototype,"htmlAttributes",void 0);class UK extends ii{}Er([_("Slide")],UK.prototype,"effect",void 0),Er([_()],UK.prototype,"customEffect",void 0);let la=class extends Qs{constructor(e,t){super(e,t)}getModuleName(){return HK.replace("e-","")}getPersistData(){return this.addOnPersist(["selectedIndex"])}preRender(){this.keyConfigs={home:"home",end:"end",space:"space",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"},this.localeObj=new jo(this.getModuleName(),{nextSlide:"Next slide",of:"of",pauseSlideTransition:"Pause slide transition",playSlideTransition:"Play slide transition",previousSlide:"Previous slide",slide:"Slide",slideShow:"Slide show"},this.locale)}render(){this.initialize(),this.renderSlides(),this.renderNavigators(),this.renderPlayButton(),this.renderIndicators(),this.applyAnimation(),this.wireEvents()}onPropertyChanged(e,t){let i;for(const s of Object.keys(e))switch(s){case"animation":for(const r of Object.keys(e.animation))"customEffect"===r&&!f(t.animation.customEffect)&&W([this.element.querySelector(`.${vg}`)],t.animation.customEffect);this.applyAnimation();break;case"cssClass":Bi(this.element,[e.cssClass],[t.cssClass]);break;case"selectedIndex":this.setActiveSlide(this.selectedIndex,t.selectedIndex>this.selectedIndex?"Previous":"Next"),this.autoSlide();break;case"htmlAttributes":f(this.htmlAttributes)||this.setHtmlAttributes(this.htmlAttributes,this.element);break;case"enableTouchSwipe":!this.enableTouchSwipe&&this.touchModule&&this.touchModule.destroy(),this.element.querySelector(`.${vg}`)&&this.renderTouchActions();break;case"loop":this.loop&&f(this.autoSlideInterval)&&this.applySlideInterval(),this.handleNavigatorsActions(this.selectedIndex);break;case"enableRtl":this.enableRtl?z([this.element],uj):W([this.element],uj);break;case"buttonsVisibility":if(i=this.element.querySelector(`.${mP}`),i)switch(this.buttonsVisibility){case"Hidden":this.resetTemplates(["previousButtonTemplate","nextButtonTemplate"]),Yt(i);break;case"VisibleOnHover":z([].slice.call(i.childNodes),jk);break;case"Visible":W([].slice.call(i.childNodes),jk)}else this.renderNavigators(),this.renderPlayButton();break;case"width":ht(this.element,{width:st(this.width)});break;case"height":ht(this.element,{height:st(this.height)});break;case"autoPlay":this.showPlayButton&&f(this.playButtonTemplate)&&this.playButtonClickHandler(null,!0),this.autoSlide();break;case"interval":this.autoSlide();break;case"showIndicators":i=this.element.querySelector(`.${ace}`),!this.showIndicators&&i&&(this.resetTemplates(["indicatorsTemplate"]),Yt(i)),this.renderIndicators();break;case"showPlayButton":i=this.element.querySelector(`.${VK}`),!this.showPlayButton&&i&&(Yt(i),this.resetTemplates(["playButtonTemplate"])),this.renderPlayButton();break;case"items":case"dataSource":i=this.element.querySelector(`.${vg}`),i&&(this.resetTemplates(["itemTemplate"]),Yt(i)),this.renderSlides()}}initialize(){const e=[];this.cssClass&&e.push(this.cssClass),this.enableRtl&&e.push(uj),z([this.element],e),ht(this.element,{width:st(this.width),height:st(this.height)}),Rt(this.element,{tabindex:"0","aria-roledescription":"carousel","aria-label":this.localeObj.getConstant("slideShow")}),f(this.htmlAttributes)||this.setHtmlAttributes(this.htmlAttributes,this.element)}renderSlides(){const e=this.createElement("div",{className:vg,attrs:{"aria-live":this.autoPlay?"off":"polite"}});this.element.appendChild(e),this.items.length>0?(this.slideItems=this.items,this.items.forEach((t,i)=>{this.renderSlide(t,t.template,i,e)})):this.dataSource.length>0&&(this.slideItems=this.dataSource,this.dataSource.forEach((t,i)=>{this.renderSlide(t,this.itemTemplate,i,e)})),this.renderTemplates(),this.autoSlide(),this.renderTouchActions(),this.renderKeyboardActions()}renderSlide(e,t,i,s){const r=this.createElement("div",{id:Tn("carousel_item"),className:`${Bk} ${e.cssClass?e.cssClass:""} ${this.selectedIndex===i?Lu:""}`,attrs:{"aria-hidden":this.selectedIndex===i?"false":"true","data-index":i.toString(),"aria-role":"group","aria-roledescription":"slide"}});f(e.htmlAttributes)||this.setHtmlAttributes(e.htmlAttributes,r);const o=this.element.id+"_template";mi(this.templateParser(t)(e,this,"itemTemplate",o,!1),r),s.appendChild(r)}renderNavigators(){if("Hidden"===this.buttonsVisibility)return;const e=this.createElement("div",{className:mP});this.element.querySelector(`.${vg}`).insertAdjacentElement("afterend",e),this.renderNavigatorButton("Previous"),this.renderNavigatorButton("Next"),this.renderTemplates()}renderNavigatorButton(e){const t=this.createElement("div",{className:("Previous"===e?pj:"e-next")+" "+("VisibleOnHover"===this.buttonsVisibility?jk:""),attrs:{"aria-label":this.localeObj.getConstant("Previous"===e?"previousSlide":"nextSlide")}});if("Previous"===e&&this.previousButtonTemplate){z([t],bj);const i=this.element.id+"_previousButtonTemplate";mi(this.templateParser(this.previousButtonTemplate)({type:"Previous"},this,"previousButtonTemplate",i,!1),t)}else if("Next"===e&&this.nextButtonTemplate){z([t],bj);const i=this.element.id+"_nextButtonTemplate";mi(this.templateParser(this.nextButtonTemplate)({type:"Next"},this,"nextButtonTemplate",i,!1),t)}else{const i=this.createElement("button");new Sa({cssClass:"e-flat e-round "+("Previous"===e?mj:gj),iconCss:fj+" "+("Previous"===e?"e-previous-icon":"e-next-icon"),enableRtl:this.enableRtl,disabled:!this.loop&&this.selectedIndex===("Previous"===e?0:this.slideItems.length-1)}).appendTo(i),t.appendChild(i)}this.element.querySelector("."+mP).appendChild(t),k.add(t,"click",this.navigatorClickHandler,this)}renderPlayButton(){if("Hidden"===this.buttonsVisibility||!this.showPlayButton)return;const e=this.createElement("div",{className:VK+" "+("VisibleOnHover"===this.buttonsVisibility?jk:"")});if(this.playButtonTemplate){z([e],bj);const i=this.element.id+"_playButtonTemplate";mi(this.templateParser(this.playButtonTemplate)({},this,"playButtonTemplate",i,!1),e)}else{const i=this.createElement("button",{attrs:{"aria-label":this.localeObj.getConstant(this.autoPlay?"pauseSlideTransition":"playSlideTransition")}}),s=this.selectedIndex===this.slideItems.length-1&&!this.loop,r=new Sa({cssClass:"e-flat e-round "+zk,iconCss:fj+" "+(this.autoPlay&&!s?Vk:Hk),isToggle:!0,enableRtl:this.enableRtl});s&&(this.setProperties({autoPlay:!1},!0),i.setAttribute("aria-label",this.localeObj.getConstant("playSlideTransition")),this.element.querySelector(`.${vg}`).setAttribute("aria-live","polite")),r.appendTo(i),e.appendChild(i)}const t=this.element.querySelector(`.${mP}`);t.insertBefore(e,t.lastElementChild),this.renderTemplates(),k.add(e,"click",this.playButtonClickHandler,this)}renderIndicators(){if(!this.showIndicators)return;const e=this.createElement("div",{className:ace}),t=this.createElement("div",{className:"e-indicator-bars"});e.appendChild(t),this.slideItems&&this.slideItems.forEach((i,s)=>{const r=this.createElement("div",{className:gP+" "+(this.selectedIndex===s?Lu:""),attrs:{"data-index":s.toString(),"aria-current":this.selectedIndex===s?"true":"false"}});if(this.indicatorsTemplate){z([r],bj);const o=this.element.id+"_indicatorsTemplate";mi(this.templateParser(this.indicatorsTemplate)({index:s,selectedIndex:this.selectedIndex},this,"indicatorsTemplate",o,!1),r)}else{const o=this.createElement("button",{className:lce});r.appendChild(o),o.appendChild(this.createElement("div",{attrs:{"aria-label":this.localeObj.getConstant("slide")+" "+(s+1)+" "+this.localeObj.getConstant("of")+" "+this.slideItems.length}})),new Sa({cssClass:"e-flat e-small"}).appendTo(o)}t.appendChild(r),k.add(r,"click",this.indicatorClickHandler,this)}),this.element.appendChild(e)}renderKeyboardActions(){this.keyModule=new Gn(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs})}renderTouchActions(){!this.enableTouchSwipe||(this.touchModule=new Lr(this.element,{swipe:this.swipeHandler.bind(this)}))}applyAnimation(){const e=this.element.querySelector(`.${vg}`);W([e],[uce,dce]),this.animation.customEffect?z([e],this.animation.customEffect):"None"!==this.animation.effect&&z([e],"Fade"===this.animation.effect?uce:dce)}autoSlide(){this.resetSlideInterval(),this.applySlideInterval()}autoSlideChange(){const e=this.element.querySelector(`.${Lu}`);if(f(e))return;const t=parseInt(e.dataset.index,10);if(this.loop||t!==this.slideItems.length-1){const i=(t+1)%this.slideItems.length;this.element.classList.contains(n_)||this.setActiveSlide(i,"Next"),this.autoSlide()}else this.resetSlideInterval()}applySlideInterval(){if(!this.autoPlay||this.element.classList.contains(n_))return;let e=this.interval;this.items.length>0&&!f(this.items[this.selectedIndex].interval)&&(e=this.items[this.selectedIndex].interval),this.autoSlideInterval=setInterval(()=>this.autoSlideChange(),e)}resetSlideInterval(){clearInterval(this.autoSlideInterval),this.autoSlideInterval=null}getSlideIndex(e){let t=this.selectedIndex;return"Previous"===e?(t--,t<0&&(t=this.slideItems.length-1)):(t++,t===this.slideItems.length&&(t=0)),t}setActiveSlide(e,t,i=!1){if(this.element.querySelectorAll(`.${Bk}.${zK},.${Bk}.${jK}`).length>0)return;const s=[].slice.call(this.element.querySelectorAll(`.${Bk}`)),r=this.element.querySelector(`.${Bk}.${Lu}`);if(f(r)&&this.showIndicators){const h=this.element.querySelector(`.${gP}.${Lu}`);return void z([s[parseInt(h.dataset.index,10)]],Lu)}if(f(r))return void z([s[e]],Lu);const o=parseInt(r.dataset.index,10);this.trigger("slideChanging",{currentIndex:o,nextIndex:e,currentSlide:r,nextSlide:s[e],slideDirection:t,isSwiped:i,cancel:!1},h=>{if(h.cancel)return;this.setProperties({selectedIndex:e},!0),Rt(h.currentSlide,{"aria-hidden":"true"}),Rt(h.nextSlide,{"aria-hidden":"false"});const c=[].slice.call(this.element.querySelectorAll(`.${gP}`));let m;c.length>0&&(Rt(c[o],{"aria-current":"false"}),Rt(c[e],{"aria-current":"true"}),W(c,Lu),z([c[e]],Lu)),this.slideChangedEventArgs={currentIndex:h.nextIndex,previousIndex:h.currentIndex,currentSlide:h.nextSlide,previousSlide:h.currentSlide,slideDirection:t,isSwiped:i},"None"===this.animation.effect||this.animation.customEffect?this.onTransitionEnd():"Slide"===this.animation.effect?"Previous"===t?(z([h.nextSlide],zK),m=h.nextSlide.offsetHeight,z([h.currentSlide,h.nextSlide],fce)):(z([h.nextSlide],jK),m=h.nextSlide.offsetHeight,z([h.currentSlide,h.nextSlide],pce)):"Fade"===this.animation.effect&&(W([h.currentSlide],Lu),z([h.nextSlide],Lu)),this.handleNavigatorsActions(e)})}onTransitionEnd(){this.slideChangedEventArgs&&(z([this.slideChangedEventArgs.currentSlide],Lu),W([this.slideChangedEventArgs.previousSlide],Lu),this.trigger("slideChanged",this.slideChangedEventArgs,()=>{W(this.element.querySelectorAll(`.${Bk}`),[zK,jK,pce,fce]),this.slideChangedEventArgs=null}))}setHtmlAttributes(e,t){const i=Object.keys(e);for(const s of i)"class"===s?z([t],e[s]):t.setAttribute(s,e[s])}templateParser(e){if(e)try{return document.querySelectorAll(e).length?ji(document.querySelector(e).innerHTML.trim()):ji(e)}catch(t){return ji(e)}}getNavigatorState(e,t){const i=e.querySelector(`.${t?mj:gj}`);return!!i&&za(i,Sa).disabled}navigatorClickHandler(e){const t=e.currentTarget;if(this.getNavigatorState(t,t.classList.contains(pj)))return;const s=t.classList.contains(pj)?"Previous":"Next";this.setActiveSlide(this.getSlideIndex(s),s),this.autoSlide()}indicatorClickHandler(e){const t=B(e.target,`.${gP}`),i=parseInt(t.dataset.index,10);this.selectedIndex!==i&&(this.setActiveSlide(i,this.selectedIndex>i?"Previous":"Next"),this.autoSlide())}playButtonClickHandler(e,t=!1){const i=this.element.querySelector(`.${zk}`);if(i){const s=za(i,Sa);t||this.setProperties({autoPlay:!this.autoPlay},!0),i.setAttribute("aria-label",this.localeObj.getConstant(this.autoPlay?"pauseSlideTransition":"playSlideTransition")),s.iconCss=fj+" "+(this.autoPlay?Vk:Hk),s.dataBind(),this.element.querySelector(`.${vg}`).setAttribute("aria-live",this.autoPlay?"off":"polite"),this.autoPlay&&!this.loop&&this.selectedIndex===this.slideItems.length-1&&this.setActiveSlide(0,"Next"),this.autoSlide()}}keyHandler(e){let t,i,s=!1;const r=e.target;switch(e.preventDefault(),e.action){case"space":this.showIndicators&&r.classList.contains(lce)?r.click():r.classList.contains(HK)||r.classList.contains(zk)?this.playButtonClickHandler(e):r.classList.contains(gj)?this.next():r.classList.contains(mj)&&this.prev();break;case"end":i=this.slideItems.length-1,t="Next",s=!0;break;case"home":i=0,t="Previous",s=!0;break;case"moveUp":case"moveLeft":case"moveDown":case"moveRight":this.showIndicators&&f(this.indicatorsTemplate)&&this.element.focus(),t="moveUp"===e.action||"moveLeft"===e.action?"Previous":"Next",i=this.getSlideIndex(t),s=!this.isSuspendSlideTransition(i,t)}s&&(this.setActiveSlide(i,t),this.autoSlide(),s=!1)}swipeHandler(e){if(this.element.classList.contains(n_))return;const t="Right"===e.swipeDirection?"Previous":"Next",i=this.getSlideIndex(t);this.isSuspendSlideTransition(i,t)||(this.setActiveSlide(i,t,!0),this.autoSlide())}isSuspendSlideTransition(e,t){return!this.loop&&("Next"===t&&0===e||"Previous"===t&&e===this.slideItems.length-1)}handleNavigatorsActions(e){if("Hidden"===this.buttonsVisibility)return;if(this.showPlayButton){const s=this.element.querySelector(`.${zk}`),r=this.selectedIndex===this.slideItems.length-1&&!this.loop;let o=f(this.playButtonTemplate)&&s&&r;if(f(this.playButtonTemplate)&&s&&!r&&(o=!s.classList.contains(Lu)),o){this.setProperties({autoPlay:!r},!0),s.setAttribute("aria-label",this.localeObj.getConstant(this.autoPlay?"pauseSlideTransition":"playSlideTransition")),this.element.querySelector(`.${vg}`).setAttribute("aria-live",this.autoPlay?"off":"polite");const l=za(s,Sa);l.iconCss=fj+" "+(this.autoPlay?Vk:Hk),l.dataBind()}}const t=this.element.querySelector(`.${mj}`);if(t&&f(this.previousButtonTemplate)){const s=za(t,Sa);s.disabled=!this.loop&&0===e,s.dataBind()}const i=this.element.querySelector(`.${gj}`);if(i&&f(this.nextButtonTemplate)){const s=za(i,Sa);s.disabled=!this.loop&&e===this.slideItems.length-1,s.dataBind()}}onHoverActions(e){const t=this.element.querySelector(`.${mP}`);switch(e.type){case"mouseenter":"VisibleOnHover"===this.buttonsVisibility&&t&&W([].slice.call(t.childNodes),jk),z([this.element],n_);break;case"mouseleave":"VisibleOnHover"===this.buttonsVisibility&&t&&z([].slice.call(t.childNodes),jk),W([this.element],n_)}this.autoSlide()}onFocusActions(e){switch(e.type){case"focusin":z([this.element],n_);break;case"focusout":W([this.element],n_)}this.autoSlide()}destroyButtons(){const e=[].slice.call(this.element.querySelectorAll(".e-control.e-btn"));for(const t of e){const i=za(t,Sa);i&&i.destroy()}}wireEvents(){k.add(this.element,"focusin focusout",this.onFocusActions,this),k.add(this.element,"mouseenter mouseleave",this.onHoverActions,this),k.add(this.element.firstElementChild,"transitionend",this.onTransitionEnd,this)}unWireEvents(){[].slice.call(this.element.querySelectorAll(`.${gP}`)).forEach(s=>{k.remove(s,"click",this.indicatorClickHandler)}),[].slice.call(this.element.querySelectorAll(`.${pj},.e-next`)).forEach(s=>{k.remove(s,"click",this.navigatorClickHandler)});const i=this.element.querySelector(`.${VK}`);i&&k.remove(i,"click",this.playButtonClickHandler),k.remove(this.element.firstElementChild,"transitionend",this.onTransitionEnd),k.clearEvents(this.element)}prev(){(this.loop||0!==this.selectedIndex)&&(this.setActiveSlide(0===this.selectedIndex?this.slideItems.length-1:this.selectedIndex-1,"Previous"),this.autoSlide())}next(){(this.loop||this.selectedIndex!==this.slideItems.length-1)&&(this.setActiveSlide(this.selectedIndex===this.slideItems.length-1?0:this.selectedIndex+1,"Next"),this.autoSlide())}play(){const e=this.element.querySelector(`.${Hk}`);this.showPlayButton&&e&&(Bi(e,[Vk],[Hk]),this.element.querySelector(`.${zk}`).setAttribute("aria-label",this.localeObj.getConstant("pauseSlideTransition"))),this.setProperties({autoPlay:!0},!0),this.element.querySelector(`.${vg}`).setAttribute("aria-live","off"),this.applySlideInterval()}pause(){const e=this.element.querySelector(`.${Vk}`);this.showPlayButton&&e&&(this.element.querySelector(`.${zk}`).setAttribute("aria-label",this.localeObj.getConstant("playSlideTransition")),Bi(e,[Hk],[Vk])),this.setProperties({autoPlay:!1},!0),this.element.querySelector(`.${vg}`).setAttribute("aria-live","off"),this.resetSlideInterval()}renderTemplates(){(this.isAngular||this.isReact)&&this.renderReactTemplates()}resetTemplates(e){(this.isAngular||this.isReact)&&this.clearTemplate(e)}destroy(){this.resetTemplates(),this.touchModule&&(this.touchModule.destroy(),this.touchModule=null),this.keyModule.destroy(),this.keyModule=null,this.resetSlideInterval(),this.destroyButtons(),this.unWireEvents(),[].slice.call(this.element.children).forEach(e=>{this.element.removeChild(e)}),W([this.element],[HK,this.cssClass,uj]),["tabindex","role","style"].forEach(e=>{this.element.removeAttribute(e)}),super.destroy()}};Er([rh([],bP)],la.prototype,"items",void 0),Er([di({},UK)],la.prototype,"animation",void 0),Er([_()],la.prototype,"previousButtonTemplate",void 0),Er([_()],la.prototype,"nextButtonTemplate",void 0),Er([_()],la.prototype,"indicatorsTemplate",void 0),Er([_()],la.prototype,"playButtonTemplate",void 0),Er([_()],la.prototype,"cssClass",void 0),Er([_([])],la.prototype,"dataSource",void 0),Er([_()],la.prototype,"itemTemplate",void 0),Er([_(0)],la.prototype,"selectedIndex",void 0),Er([_("100%")],la.prototype,"width",void 0),Er([_("100%")],la.prototype,"height",void 0),Er([_(5e3)],la.prototype,"interval",void 0),Er([_(!0)],la.prototype,"autoPlay",void 0),Er([_(!0)],la.prototype,"loop",void 0),Er([_(!1)],la.prototype,"showPlayButton",void 0),Er([_(!0)],la.prototype,"enableTouchSwipe",void 0),Er([_(!0)],la.prototype,"showIndicators",void 0),Er([_("Visible")],la.prototype,"buttonsVisibility",void 0),Er([_()],la.prototype,"htmlAttributes",void 0),Er([G()],la.prototype,"slideChanging",void 0),Er([G()],la.prototype,"slideChanged",void 0),la=Er([as],la);var Pr=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const yj="e-splitter",qK="e-splitter-horizontal",WK="e-splitter-vertical",r_="e-pane",o_="e-pane-horizontal",a_="e-pane-vertical",l_="e-split-bar",mce="e-split-bar-horizontal",gce="e-split-bar-vertical",Fl="e-static-pane",vj="e-scrollable",Uk="e-resize-handler",GK="e-resizable-split-bar",h_="e-split-bar-hover",sS="e-split-bar-active",Cj="e-hide-handler",bce="e-disabled",wj="e-collapsible",c_="e-navigate-arrow",d_="e-arrow-right",u_="e-arrow-left",p_="e-arrow-up",f_="e-arrow-down",Ec="e-icon-hidden",xp="e-expanded",Ts="e-collapsed",vce="e-pane-hidden",nS="e-resizable",$K="e-last-bar";let $Re=(()=>{class n extends ii{}return Pr([_()],n.prototype,"size",void 0),Pr([_(!1)],n.prototype,"collapsible",void 0),Pr([_(!1)],n.prototype,"collapsed",void 0),Pr([_(!0)],n.prototype,"resizable",void 0),Pr([_(null)],n.prototype,"min",void 0),Pr([_(null)],n.prototype,"max",void 0),Pr([_()],n.prototype,"content",void 0),Pr([_("")],n.prototype,"cssClass",void 0),n})(),KRe=(()=>{let n=class extends Qs{constructor(t,i){super(t,i)}onPropertyChanged(t,i){if(this.element.classList.contains(yj))for(const s of Object.keys(t))switch(s){case"height":this.setSplitterSize(this.element,t.height,"height");break;case"width":this.setSplitterSize(this.element,t.width,"width");break;case"cssClass":this.setCssClass(this.element,t.cssClass);break;case"enabled":this.isEnabled(this.enabled);break;case"enableReversePanes":this.setReversePane();break;case"separatorSize":this.setSeparatorSize(t.separatorSize);break;case"orientation":this.changeOrientation(t.orientation);break;case"paneSettings":if(t.paneSettings instanceof Array&&i.paneSettings instanceof Array)this.destroyPaneSettings(),this.allBars=[],this.allPanes=[],this.createSplitPane(this.element),this.addSeparator(this.element),this.getPanesDimensions(),this.setRTL(this.enableRtl),this.isCollapsed();else{const r=Object.keys(t.paneSettings);for(let o=0;o<r.length;o++){const a=parseInt(Object.keys(t.paneSettings)[o],10),l=Object.keys(t.paneSettings[a]).length;for(let h=0;h<l;h++){const c=Object.keys(t.paneSettings[a])[h];switch(c){case"content":{const m=Object(t.paneSettings[a])[c];f(m)||(this.allPanes[a].innerHTML="",this.setTemplate(m,this.allPanes[a]));break}case"resizable":{const m=Object(t.paneSettings[a])[c];this.resizableModel(a,m);break}case"collapsible":this.collapsibleModelUpdate(a);break;case"collapsed":t.paneSettings[a].collapsed?this.isCollapsed(a):this.collapsedOnchange(a);break;case"cssClass":this.setCssClass(this.allPanes[a],t.paneSettings[a].cssClass);break;case"size":{const m=Object(t.paneSettings[a])[c];""!==m&&!f(m)&&this.updatePaneSize(m,a);break}}}}}break;case"enableRtl":this.setRTL(t.enableRtl)}}updatePaneSize(t,i){this.allPanes[i].style.flexBasis=t;const s=[];let r,o=0;for(let h=0;h<this.allPanes.length;h++)this.paneSettings[h].size||""===this.allPanes[h].innerText?this.paneSettings[h].size&&(r="Horizontal"===this.orientation?this.allPanes[i].offsetWidth:this.allPanes[i].offsetHeight):(s[o]=h,o++);r="Horizontal"===this.orientation?this.allBars[0].offsetWidth*this.allBars.length+r:this.allBars[0].offsetHeight*this.allBars.length+r;const l=(("Horizontal"===this.orientation?this.element.offsetWidth:this.element.offsetHeight)-r-2*this.border)/s.length;for(let h=0;h<s.length;h++)this.allPanes[s[h]].style.flexBasis=l+"px";this.allPanes[i].classList.add(Fl)}initializeValues(){this.allPanes=[],this.paneOrder=[],this.separatorOrder=[],this.allBars=[],this.previousCoordinates={},this.currentCoordinates={},this.updatePrePaneInPercentage=!1,this.updateNextPaneInPercentage=!1,this.panesDimensions=[],this.border=0,this.validDataAttributes=["data-size","data-min","data-max","data-collapsible","data-resizable","data-content","data-collapsed"],this.validElementAttributes=["data-orientation","data-width","data-height"],this.iconsDelay=300,this.templateElement=[],this.collapseFlag=!1,this.expandFlag=!0}preRender(){this.initializeValues(),this.onReportWindowSize=this.reportWindowSize.bind(this),this.onMouseMoveHandler=this.onMouseMove.bind(this),this.onMouseUpHandler=this.onMouseUp.bind(this),this.onTouchMoveHandler=this.onMouseMove.bind(this),this.onTouchEndHandler=this.onMouseUp.bind(this),this.wrapper=this.element.cloneNode(!0),this.wrapperParent=this.element.parentElement,W([this.wrapper],["e-control","e-lib",yj]),z([this.element],"Horizontal"===this.orientation?qK:WK),this.setCssClass(this.element,"msie"===q.info.name?"e-ie":""),q.isDevice&&z([this.element],"e-splitter-touch")}getPersistData(){return this.addOnPersist(["paneSettings"])}getModuleName(){return"splitter"}render(){this.checkDataAttributes(),this.setCssClass(this.element,this.cssClass),this.isEnabled(this.enabled),this.setDimension(this.getHeight(this.element),this.getWidth(this.element)),this.createSplitPane(this.element),this.addSeparator(this.element),this.getPanesDimensions(),this.setPaneSettings(),this.setRTL(this.enableRtl),this.enableReversePanes&&this.setReversePane(),this.collapseFlag=!0,this.isCollapsed(),this.collapseFlag=!1,k.add(document,"touchstart click",this.onDocumentClick,this),this.renderComplete(),this.element.ownerDocument.defaultView.addEventListener("resize",this.onReportWindowSize,!0),k.add(this.element,"keydown",this.onMove,this)}onDocumentClick(t){!t.target.classList.contains(l_)&&!f(this.currentSeparator)&&(this.currentSeparator.classList.remove(h_),this.currentSeparator.classList.remove(sS))}checkPaneSize(t){const i="Horizontal"===this.orientation?this.previousPane.offsetWidth:this.previousPane.offsetHeight,s="Horizontal"===this.orientation?this.nextPane.offsetWidth:this.nextPane.offsetHeight,r=f(this.separatorSize)?1:this.separatorSize;if(this.previousPane.style.flexBasis.indexOf("%")>0||this.nextPane.style.flexBasis.indexOf("%")>0){const o=this.updatePaneFlexBasis(this.previousPane),a=this.updatePaneFlexBasis(this.nextPane);this.totalPercent=o+a,this.totalWidth=this.convertPercentageToPixel(this.totalPercent+"%"),"keydown"===t.type&&!f(t.keyCode)&&((39===t.keyCode||40===t.keyCode)&&s>0&&this.getMinInPixel(this.paneSettings[this.nextPaneIndex].min)<this.convertPercentageToPixel(a-1+"%")?(this.previousPane.style.flexBasis=o+1+"%",this.nextPane.style.flexBasis=a-1+"%"):(37===t.keyCode||38===t.keyCode)&&i>0&&this.getMinInPixel(this.paneSettings[this.prevPaneIndex].min)<this.convertPercentageToPixel(o-1+"%")&&(this.previousPane.style.flexBasis=o-1+"%",this.nextPane.style.flexBasis=a+1+"%"))}else this.totalWidth="Horizontal"===this.orientation?this.previousPane.offsetWidth+this.nextPane.offsetWidth:this.previousPane.offsetHeight+this.nextPane.offsetHeight,"keydown"===t.type&&!f(t.keyCode)&&((39===t.keyCode||40===t.keyCode)&&s>0&&this.getMinInPixel(this.paneSettings[this.nextPaneIndex].min)<s+r?(this.addStaticPaneClass(),this.previousPane.style.flexBasis=i+r+"px",this.nextPane.style.flexBasis=s<r?"0px":s-r+"px"):(37===t.keyCode||38===t.keyCode)&&i>0&&this.getMinInPixel(this.paneSettings[this.prevPaneIndex].min)<i-r&&(this.addStaticPaneClass(),this.previousPane.style.flexBasis=i<r?"0px":i-r+"px",this.nextPane.style.flexBasis=s+r+"px"))}onMove(t){if(this.allPanes.length>1){const i=this.getSeparatorIndex(this.currentSeparator),s=this.previousPane.classList.contains(Ts),r=this.previousPane.classList.contains(xp),o=this.nextPane.classList.contains(Ts);("Horizontal"!==this.orientation&&38===t.keyCode||"Horizontal"===this.orientation&&39===t.keyCode||"Horizontal"===this.orientation&&37===t.keyCode||"Horizontal"!==this.orientation&&40===t.keyCode)&&(!r&&!o&&!s||r&&!o)&&document.activeElement.classList.contains(l_)&&this.paneSettings[i].resizable&&this.paneSettings[i+1].resizable?(t.preventDefault(),this.checkPaneSize(t),this.triggerResizing(t)):13===t.keyCode&&this.paneSettings[i].collapsible&&document.activeElement.classList.contains(l_)&&this.currentSeparator.classList.contains(sS)&&(this.previousPane.classList.contains(Ts)?(this.expand(i),z([this.currentSeparator],sS)):(this.collapse(i),z([this.currentSeparator],sS)))}}getMinInPixel(t){let i;if(f(t))return 0;let s=this.convertPixelToNumber(t.toString());return t.indexOf("%")>0&&(s=this.convertPercentageToPixel(t)),i=this.convertPixelToNumber(s.toString()),i}sanitizeHelper(t){if(this.enableHtmlSanitizer){const i=hr.beforeSanitize();Ae(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i),i.cancel&&!f(i.helper)?t=i.helper(t):i.cancel||(t=hr.serializeValue(i,t))}return t}checkDataAttributes(){let t,i;for(let s=0;s<this.validElementAttributes.length;s++)i=this.element.getAttribute(this.validElementAttributes[s]),f(i)||(t=this.removeDataPrefix(this.validElementAttributes[s]),this[t]=i);for(let s=0;s<this.element.children.length;s++)for(let r=0;r<this.validDataAttributes.length;r++)if(i=this.element.children[s].getAttribute(this.validDataAttributes[r]),!f(i)){t=this.removeDataPrefix(this.validDataAttributes[r]),i="collapsible"===t||"resizable"===t?"true"===i:i,f(this.paneSettings[s])&&(this.paneSettings[s]={size:"",min:null,max:null,content:"",resizable:!0,collapsible:!1,collapsed:!1});let o=this.paneSettings[s][t];("resizable"===t||"collapsible"===t||"collapsed"===t)&&(this.paneSettings[s][t]=i),(f(o)||""===o)&&(this.paneSettings[s][t]=i)}}destroyPaneSettings(){[].slice.call(this.element.children).forEach(t=>{te(t)}),this.restoreElem()}setPaneSettings(){const t=this.allPanes.length,i=[],s={size:"",min:null,max:null,content:"",resizable:!0,collapsed:!1,collapsible:!1,cssClass:""};for(let r=0;r<t;r++)i[r]=f(this.paneSettings[r])?s:this.paneSettings[r];this.setProperties({paneSettings:i},!0)}checkArrow(t,i){return this.allBars[t].querySelector("."+c_+"."+i)}removeDataPrefix(t){return t.slice(t.lastIndexOf("-")+1)}setRTL(t){t?z([this.element],"e-rtl"):W([this.element],"e-rtl")}setReversePane(){this.allPanes=this.allPanes.reverse(),this.allBars=this.allBars.reverse(),z([this.allBars[this.allBars.length-1]],$K),W([this.allBars[0]],$K),this.setProperties({paneSettings:this.paneSettings.reverse()},!0),this.enableReversePanes?this.element.setAttribute("dir","rtl"):this.element.removeAttribute("dir")}setSplitterSize(t,i,s){ht(t,"width"===s?{width:st(i)}:{height:st(i)})}getPanesDimensions(){for(let t=0;t<this.allPanes.length;t++)this.panesDimensions.push("Horizontal"===this.orientation?this.allPanes[t].getBoundingClientRect().width:this.allPanes[t].getBoundingClientRect().height)}setCssClass(t,i){i&&z([t],i.split(i.indexOf(",")>-1?",":" "))}hideResizer(t){z([X("."+Uk,t)],Cj)}showResizer(t){!f(this.previousPane)&&this.previousPane.classList.contains(nS)&&!f(this.nextPane)&&this.nextPane.classList.contains(nS)&&W([X("."+Uk,t)],Cj)}resizableModel(t,i){const s=t===this.allBars.length?t-1:t,r=t;k.remove(this.allBars[s],"mousedown",this.onMouseDown),i?(k.add(this.allBars[s],"mousedown",this.onMouseDown,this),this.isResizable()&&(this.showResizer(this.allBars[s]),W([X("."+Uk,this.allBars[s])],Cj),this.allBars[s].classList.add(GK),t===this.allBars.length?this.allPanes[t].classList.add(nS):this.allPanes[s].classList.add(nS),this.updateResizablePanes(r))):(this.updateResizablePanes(r),this.hideResizer(this.allBars[s]),this.allBars[s].classList.remove(GK),t===this.allBars.length?this.allPanes[t].classList.remove(nS):this.allPanes[s].classList.remove(nS))}collapsibleModelUpdate(t){const i=t===this.allBars.length?t-1:t,s=this.checkArrow(i,"Horizontal"===this.orientation?u_:p_),r=this.checkArrow(i,"Horizontal"===this.orientation?d_:f_);this.paneCollapsible(this.allPanes[t],t),this.updateCollapseIcons(i,r,s)}collapseArrow(t,i){return bt("."+i,this.allBars[t])[0]}updateIsCollapsed(t,i,s){if(!f(t)){let r;const o=t===this.allBars.length,a=o?t-1:t;r=!o&&this.allPanes[t+1].classList.contains(Ts)&&0!==t?this.collapseArrow(a-1,s):this.collapseArrow(a,o?s:i),r.click()}}isCollapsed(t){if(f(t)||!this.paneSettings[t].collapsed||!f(this.allPanes[t].classList.contains(Ts))){if(this.expandFlag=!1,f(t)){for(let i=0;i<this.allPanes.length;i++)!f(this.paneSettings[i])&&this.paneSettings[i].collapsed&&this.updateIsCollapsed(i,this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(let i=this.allPanes.length-1;i>=0;i--)if(!f(this.paneSettings[i])&&this.paneSettings[i].collapsed&&!this.allPanes[i].classList.contains(Ts)){const s="Horizontal"===this.orientation?d_:f_;0!==i&&this.collapseArrow(i-1,s).click(),this.nextPane.classList.contains(Ts)||this.collapseArrow(i-1,s).click()}}else{let i;this.collapseFlag=!0;const s=t===this.allBars.length,r=s?t-1:t;i=!s&&this.allPanes[t+1].classList.contains(Ts)&&0!==t?this.collapseArrow(r-1,this.targetArrows().lastBarArrow):this.collapseArrow(r,s?this.targetArrows().lastBarArrow:this.targetArrows().collapseArrow);const o={target:i},a=this.beforeAction(o);this.trigger("beforeCollapse",a,l=>{if(!l.cancel){let h=[];h[0]=t;let c=1;for(let b=0;b<this.allPanes.length;b++)this.allPanes[b].classList.contains(Ts)&&(h[c]=b,c++);h=h.sort(),this.updateIsCollapsed(t,this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(let b=0;b<h.length;b++)this.allPanes[h[b]].classList.contains(Ts)||this.updateIsCollapsed(h[b],this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(let b=h.length;b>0;b--)if(!this.allPanes[h[b-1]].classList.contains(Ts)){const v=this.targetArrows();this.updateIsCollapsed(h[b-1],v.collapseArrow,v.lastBarArrow)}const m=this.afterAction(o);this.trigger("collapsed",m),this.collapseFlag=!1}})}this.expandFlag=!0}}targetArrows(){return this.splitterProperty(),{collapseArrow:"Horizontal"===this.orientation?u_:p_,lastBarArrow:"Vertical"===this.orientation?f_:d_}}collapsedOnchange(t){!f(this.paneSettings[t])&&!f(this.paneSettings[t].collapsed)&&this.allPanes[t].classList.contains(Ts)&&this.updateIsCollapsed(t,this.targetArrows().lastBarArrow,this.targetArrows().collapseArrow)}isEnabled(t){t?W([this.element],bce):z([this.element],bce)}setSeparatorSize(t){const i=f(t)?"auto":t+"px",s="Horizontal"===this.orientation?mce:gce;for(let r=0;r<this.allBars.length;r++){const o=bt("."+s,this.element)[r],a=bt("."+Uk,o)[0];"Horizontal"===this.orientation?(o.style.width=i,f(a)||(a.style.width=i)):(o.style.height=i,f(a)||(a.style.height=i))}}changeOrientation(t){const i="Vertical"===t;this.element.classList.remove(i?qK:WK),this.element.classList.add(i?WK:qK);for(let s=0;s<this.allPanes.length;s++)this.allPanes[s].classList.remove(i?o_:a_),this.allPanes[s].classList.add(i?a_:o_);for(let s=0;s<this.allBars.length;s++)te(this.allBars[s]);this.allBars=[],this.addSeparator(this.element)}checkSplitPane(t,i){return this.collectPanes(t.parentElement.children)[i]}collectPanes(t){const i=[];for(let s=0;s<t.length;s++)t[s].classList.contains(r_)&&i.push(t[s]);return i}getPrevPane(t){return this.getOrderPane(this.enableReversePanes?t+1:t-1)}getNextPane(t){return this.getOrderPane(this.enableReversePanes?t-1:t+1)}getOrderPane(t){let i;for(let s=0;s<this.element.children.length;s++)parseInt(this.element.children[s].style.order,10)===t&&(i=this.element.children[s]);return i}getOrderIndex(t,i){let s,r;r="pane"===i?this.allPanes:this.allBars;for(let o=0;o<r.length;o++)parseInt(r[o].style.order,10)===t&&(s=o);return s}updateSeparatorSize(t){const i=f(this.separatorSize)?"1px":this.separatorSize+"px";"Horizontal"===this.orientation?t.style.width=i:t.style.height=i}addResizeHandler(t){const i=this.createElement("div");z([i],[Uk,"e-icons"]),this.updateSeparatorSize(i),t.appendChild(i)}getHeight(t){let i=this.height;return i=""!==t.style.height&&"100%"===this.height?t.style.height:this.height,i}getWidth(t){let i=this.width;return i=""!==t.style.width&&"100%"===this.width?t.style.width:this.width,i}setDimension(t,i){ht(this.element,{height:t,width:i})}updateCollapseIcons(t,i,s){f(this.paneSettings[t])||f(this.paneSettings[t].collapsible)||(this.paneSettings[t].collapsible?W([s],[Ec]):z([s],[Ec]),f(this.paneSettings[t+1])||(this.paneSettings[t+1].collapsible?W([i],[Ec]):z([i],[Ec])),f(this.paneSettings[t+1])||this.paneSettings[t+1].collapsible&&(this.paneSettings[t+1].collapsible?W([i],[Ec]):z([i],[Ec])))}updateIconClass(){"Horizontal"===this.orientation?(this.leftArrow=u_,this.rightArrow=d_):(this.leftArrow=p_,this.rightArrow=f_)}createSeparator(t){const i=this.createElement("div");this.allBars.push(i);const s=this.createElement("button"),r=this.createElement("button");s.setAttribute("tabindex","-1"),r.setAttribute("tabindex","-1"),s.setAttribute("aria-label","Toggle navigation"),r.setAttribute("aria-label","Toggle navigation"),s.setAttribute("type","button"),r.setAttribute("type","button");const o=f(this.separatorSize)?"1px":this.separatorSize+"px",a=this;return"Horizontal"===this.orientation?(this.updateIconClass(),z([r],[c_,u_,Ec]),z([s],[c_,d_,Ec]),z([i],[l_,mce]),i.style.width=o):(z([s],[c_,f_,Ec]),z([r],[c_,p_,Ec]),z([i],[l_,gce]),this.updateIconClass(),i.style.height=o),this.addMouseActions(i),i.appendChild(r),this.addResizeHandler(i),i.appendChild(s),this.updateCollapseIcons(t,s,r),i.setAttribute("tabindex","0"),this.enableReversePanes?i.setAttribute("dir","ltr"):i.removeAttribute("dir"),i.addEventListener("focus",()=>{i.classList.add(sS),a.currentSeparator=i,a.getPaneDetails()}),i.addEventListener("blur",()=>{i.classList.remove(sS)}),i}updateResizablePanes(t){this.getPaneDetails(),this.isResizable()?this.allPanes[t].classList.add(nS):this.allPanes[t].classList.remove(nS)}addSeparator(t){const i=this.allPanes.length,s=t.children;let r;for(let o=0;o<i;o++)o<i-1?(r=this.createSeparator(o),ht(r,{order:2*o+1}),this.separatorOrder.push(2*o+1),s[o].parentNode.appendChild(r),this.currentSeparator=r,r.setAttribute("role","separator"),r.setAttribute("aria-orientation",this.orientation.toLowerCase()),this.wireClickEvents(),f(r)||(this.isResizable()?(k.add(r,"mousedown",this.onMouseDown,this),k.add(r,"msie"===q.info.name?"pointerdown":"touchstart",this.onMouseDown,this),r.classList.add(GK),this.updateResizablePanes(o)):z([X("."+Uk,r)],Cj))):(r&&z([r],$K),i>1&&this.updateResizablePanes(o));if("msie"===q.info.name){const o=this.element.querySelectorAll(".e-splitter .e-resize-handler");for(let a=0;a<o.length;a++){const l=f(this.separatorSize)?1:this.separatorSize;o[a].style.paddingLeft=l/2+"px",o[a].style.paddingRight=l/2+"px"}}}isResizable(){let t=!1;return(!f(this.paneSettings[this.getPreviousPaneIndex()])&&this.paneSettings[this.getPreviousPaneIndex()].resizable&&!f(this.paneSettings[this.getNextPaneIndex()])&&this.paneSettings[this.getNextPaneIndex()].resizable||f(this.paneSettings[this.getNextPaneIndex()]))&&(t=!0),t}addMouseActions(t){let i,s;t.addEventListener("mouseenter",()=>{i=setTimeout(()=>{z([t],[h_])},this.iconsDelay)}),t.addEventListener("mouseleave",()=>{clearTimeout(i),W([t],[h_])}),t.addEventListener("mouseout",()=>{clearTimeout(s)}),t.addEventListener("mouseover",()=>{s=setTimeout(()=>{z([t],[h_])},this.iconsDelay)})}getEventType(t){return t.indexOf("mouse")>-1?"mouse":"touch"}updateCurrentSeparator(t){this.currentSeparator=this.isSeparator(t)?t.parentElement:t}isSeparator(t){return!t.classList.contains(l_)}isMouseEvent(t){let i=!1;return("mouse"===this.getEventType(t.type)||!f(t.pointerType)&&"mouse"===this.getEventType(t.pointerType))&&(i=!0),i}updateCursorPosition(t,i){if(this.isMouseEvent(t))this.changeCoordinates({x:t.pageX,y:t.pageY},i);else{const s="msie"!==q.info.name?t.touches[0]:t;this.changeCoordinates({x:s.pageX,y:s.pageY},i)}}changeCoordinates(t,i){"previous"===i?this.previousCoordinates=t:this.currentCoordinates=t}reportWindowSize(){const t=this.allPanes.length;if(document.body.contains(this.element)){for(let i=0;i<t;i++)f(this.paneSettings[i].size)&&this.allPanes[i].classList.remove(Fl),t-1===i&&this.element.querySelectorAll("."+Fl).length===t&&W([this.allPanes[i]],Fl);t>0&&setTimeout(()=>{this.updateSplitterSize(!0)},200)}else document.defaultView.removeEventListener("resize",this.onReportWindowSize)}updateSplitterSize(t){let i=0;const s=[];let r=0;const o=this.element.children;for(let h=0;h<o.length;h++)i+="Horizontal"===this.orientation?o[h].offsetWidth:o[h].offsetHeight;for(let h=0;h<this.allBars.length;h++)i+="Horizontal"===this.orientation?parseInt(getComputedStyle(this.allBars[h]).marginLeft,10)+parseInt(getComputedStyle(this.allBars[h]).marginLeft,10):parseInt(getComputedStyle(this.allBars[h]).marginTop,10)+parseInt(getComputedStyle(this.allBars[h]).marginBottom,10);const a="Horizontal"===this.orientation?this.element.offsetWidth-(2*this.border+i):this.element.offsetHeight-(2*this.border+i);for(let h=0;h<this.allPanes.length;h++)!this.paneSettings[h].size&&""!==this.allPanes[h].innerText&&(s[r]=h,r++);const l=a/s.length;for(let h=0;h<s.length;h++)this.allPanes[s[h]].style.flexBasis="Horizontal"===this.orientation?this.allPanes[s[h]].offsetWidth+l+"px":this.allPanes[s[h]].offsetHeight+l+"px";if(2===this.allPanes.length&&t){const h=this.allPanes.length;let c,m;const b=0;let v,w;for(let E=0;E<h;E++)if(!f(this.paneSettings[E].min)&&(m=this.convertPixelToNumber(this.paneSettings[E].min.toString()),this.paneSettings[E].min.indexOf("%")>0&&(m=this.convertPercentageToPixel(this.paneSettings[E].min)),c=this.convertPixelToNumber(m.toString()),this.allPanes[E].offsetWidth<c)){E===b?(v=this.allPanes[E],w=this.allPanes[E+1]):(v=this.allPanes[E],w=this.allPanes[E-1]);const D=c-this.allPanes[E].offsetWidth,L=v.style.flexBasis.indexOf("%")>-1;v.style.flexBasis=L?this.convertPixelToPercentage(v.offsetWidth+D)+"%":v.offsetWidth+D+"px",w.style.flexBasis=w.style.flexBasis.indexOf("%")>-1?this.convertPixelToPercentage(w.offsetWidth-D)+"%":w.offsetWidth-D+"px"}}}wireResizeEvents(){document.addEventListener("mousemove",this.onMouseMoveHandler,!0),document.addEventListener("mouseup",this.onMouseUpHandler,!0);const i="msie"===q.info.name?"pointerup":"touchend";document.addEventListener("msie"===q.info.name?"pointermove":"touchmove",this.onTouchMoveHandler,!0),document.addEventListener(i,this.onTouchEndHandler,!0)}unwireResizeEvents(){this.element.ownerDocument.defaultView.removeEventListener("resize",this.onReportWindowSize);const t="msie"===q.info.name?"pointermove":"touchmove",i="msie"===q.info.name?"pointerup":"touchend";document.removeEventListener("mousemove",this.onMouseMoveHandler,!0),document.removeEventListener("mouseup",this.onMouseUpHandler,!0),document.removeEventListener(t,this.onTouchMoveHandler,!0),document.removeEventListener(i,this.onTouchEndHandler,!0)}wireClickEvents(){k.add(this.currentSeparator,"touchstart click",this.clickHandler,this)}clickHandler(t){if(!t.target.classList.contains(c_)){const o=bt("."+yj+" > ."+l_+"."+h_);o.length>0&&W(o,h_),t.target.classList.add(h_)}const i=t.target;(i.classList.contains(u_)||i.classList.contains(p_))&&this.collapseAction(t),(i.classList.contains(d_)||i.classList.contains(f_))&&this.expandAction(t);let s=0;const r=this.element.children;for(let o=0;o<r.length;o++)s+="Horizontal"===this.orientation?r[o].offsetWidth:r[o].offsetHeight;s>this.element.offsetWidth&&this.updateSplitterSize()}expandAction(t){this.splitterDetails(t);const i=this.beforeAction(t);this.expandFlag?this.trigger("beforeExpand",i,s=>{s.cancel||this.expandPane(t);const r=this.afterAction(t);this.trigger("expanded",r)}):this.expandPane(t)}expandPane(t){this.removeStaticPanes();const i=this.element.querySelectorAll("."+Ts).length,s=!this.previousPane.classList.contains(Ts)&&this.previousPane.classList.contains(Fl)&&!this.nextPane.classList.contains(Ts)&&!this.nextPane.classList.contains(xp)&&this.nextPane.nextElementSibling.classList.contains(r_)&&!this.nextPane.nextElementSibling.classList.contains(Fl)&&i!==this.allPanes.length-2,r=[Ts,vce];this.previousPane.classList.contains(Ts)?(W([this.previousPane],r),W([this.nextPane],xp),this.expandFlag&&this.updatePaneSettings(this.prevPaneIndex,!1)):(W([this.nextPane],xp),W([this.previousPane],r),z([this.previousPane],xp),z([this.nextPane],r),this.expandFlag&&this.updatePaneSettings(this.nextPaneIndex,!0)),this.updateIconsOnExpand(t),this.previousPane.setAttribute("aria-expanded","true"),this.nextPane.setAttribute("aria-expanded","false"),this.updateFlexGrow(this.checkStaticPanes()),s&&(this.previousPane.classList.remove(xp),this.previousPane.style.flexGrow="")}checkStaticPanes(){let t=!0;for(let i=0;i<this.allPanes.length;i++)!this.allPanes[i].classList.contains(Ts)&&t&&(t=!!this.allPanes[i].classList.contains(Fl));return t}updateFlexGrow(t){let i=0;for(let o=0;o<this.element.children.length;o++)this.element.children[o].classList.contains(Ts)&&(i+=1);const s=i===this.allPanes.length-2,r=this.allPanes;for(let o=0;o<r.length;o++)r[o].style.flexGrow=r[o].classList.contains(xp)?"1":r[o].classList.contains(Ts)?"0":"",t&&!this.nextPane.classList.contains(Ts)&&(this.nextPane.style.flexGrow="1"),s&&!this.allPanes[o].classList.contains(Ts)&&this.paneSettings[o].size&&o!==this.allPanes.length-1&&(r[o].style.flexGrow="")}hideTargetBarIcon(t,i){z([X("."+i,t)],Ec)}showTargetBarIcon(t,i){W([X("."+i,t)],Ec)}updateIconsOnCollapse(t){this.splitterProperty(),this.previousPane.classList.contains(Ts)&&!this.nextPane.classList.contains(Ts)?(z([t.target],Ec),this.paneSettings[this.prevPaneIndex].collapsible&&this.showCurrentBarIcon(),this.resizableModel(this.currentBarIndex,!1),this.previousPane.classList.contains(Ts)&&!this.nextPane.classList.contains(Ts)&&!this.paneSettings[this.prevPaneIndex].collapsible&&this.hideTargetBarIcon(this.prevBar,this.rightArrow),this.previousPane.previousElementSibling&&!this.previousPane.previousElementSibling.classList.contains(Ts)&&(this.previousPane.classList.contains(Ts)&&this.paneSettings[this.prevPaneIndex].collapsible?this.showTargetBarIcon(this.prevBar,this.leftArrow):this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.prevBar,this.leftArrow)),f(this.prevBar)||(this.resizableModel(this.currentBarIndex-1,!1),this.hideTargetBarIcon(this.prevBar,this.arrow)),this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)):!this.splitInstance.prevPaneCollapsed&&!this.splitInstance.nextPaneExpanded&&(this.paneSettings[this.currentBarIndex].resizable&&this.resizableModel(this.currentBarIndex,!0),!this.splitInstance.nextPaneNextEle.classList.contains(Ts)&&this.paneSettings[this.currentBarIndex+1].resizable&&this.resizableModel(this.currentBarIndex+1,!0),this.paneSettings[this.currentBarIndex].collapsible||z([t.target],Ec),this.previousPane&&0===this.prevPaneIndex&&this.paneSettings[this.prevPaneIndex].collapsible&&this.showTargetBarIcon(this.currentSeparator,this.leftArrow),this.nextPane&&this.nextPaneIndex===this.allPanes.length-1&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.getPrevBar(this.nextPaneIndex),this.rightArrow),!this.previousPane.classList.contains(Ts)&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.currentSeparator,this.rightArrow),f(this.nextBar)||(this.nextPane.nextElementSibling&&this.nextPane.nextElementSibling.classList.contains(Ts)&&this.paneSettings[this.nextPaneIndex+1].collapsible||!this.nextPane.nextElementSibling.classList.contains(Ts)&&this.paneSettings[this.nextPaneIndex].collapsible?this.showTargetBarIcon(this.nextBar,this.leftArrow):!this.paneSettings[this.splitInstance.nextPaneIndex+1].collapsible&&this.paneSettings[this.currentBarIndex]&&this.hideTargetBarIcon(this.nextBar,this.arrow)),this.nextPaneIndex!==this.allPanes.length-1&&this.nextPane.nextElementSibling&&!this.nextPane.classList.contains(Ts)&&!this.nextPane.nextElementSibling.classList.contains(Ts)&&!this.paneSettings[this.nextPaneIndex+1].collapsible&&this.hideTargetBarIcon(this.nextBar,this.rightArrow))}collapseAction(t){this.splitterDetails(t);const i=this.beforeAction(t);this.collapseFlag?this.collapsePane(t):this.trigger("beforeCollapse",i,s=>{if(!s.cancel){this.collapsePane(t);const r=this.afterAction(t);this.trigger("collapsed",r)}})}collapsePane(t){this.removeStaticPanes();const i=this.element.querySelectorAll("."+Ts).length,s=this.previousPane.classList.contains(Fl)&&!this.previousPane.classList.contains(Ts)&&!this.nextPane.classList.contains(Ts)&&this.nextPane.nextElementSibling.classList.contains(r_)&&!this.nextPane.nextElementSibling.classList.contains(Fl)&&!this.nextPane.nextElementSibling.classList.contains(Ts)&&i!==this.allPanes.length-2||this.nextPane.classList.contains(Ts)&&!this.previousPane.classList.contains(Fl)&&this.nextPane.classList.contains(Fl),r=[Ts,vce];this.nextPane.classList.contains(Ts)?(W([this.previousPane],xp),W([this.nextPane],r),this.collapseFlag||this.updatePaneSettings(this.nextPaneIndex,!1)):(W([this.previousPane],xp),W([this.nextPane],r),z([this.nextPane],xp),z([this.previousPane],r),this.collapseFlag||this.updatePaneSettings(this.prevPaneIndex,!0)),this.updateIconsOnCollapse(t),this.previousPane.setAttribute("aria-expanded","false"),this.nextPane.setAttribute("aria-expanded","true"),this.updateFlexGrow(this.checkStaticPanes()),s&&(this.nextPane.classList.remove(xp),this.nextPane.style.flexGrow="")}removeStaticPanes(){for(let t=0;t<this.allPanes.length;t++)f(this.paneSettings[t].size)&&this.allPanes[t].classList.remove(Fl)}beforeAction(t){return{element:this.element,event:t,pane:[this.previousPane,this.nextPane],index:[this.prevPaneIndex,this.nextPaneIndex],separator:this.currentSeparator,cancel:!1}}updatePaneSettings(t,i){const s=this.paneSettings;s[t].collapsed=i,this.setProperties({paneSettings:s},!0)}splitterProperty(){this.splitInstance={currentBarIndex:this.currentBarIndex,nextPaneCollapsible:this.nextPane.classList.contains(wj),prevPaneCollapsible:this.previousPane.classList.contains(wj),prevPaneExpanded:this.previousPane.classList.contains(xp),nextPaneExpanded:this.nextPane.classList.contains(xp),nextPaneCollapsed:this.nextPane.classList.contains(Ts),prevPaneCollapsed:this.previousPane.classList.contains(Ts),nextPaneIndex:this.getNextPaneIndex(),prevPaneIndex:this.getPreviousPaneIndex(),nextPaneNextEle:this.nextPane.nextElementSibling,prevPanePreEle:this.previousPane.previousElementSibling}}showCurrentBarIcon(){W([X("."+this.arrow,this.currentSeparator)],Ec)}updateIconsOnExpand(t){this.splitterProperty(),z([t.target],Ec),this.splitInstance.prevPaneExpanded||this.splitInstance.nextPaneCollapsed?this.splitInstance.prevPaneExpanded&&this.splitInstance.nextPaneCollapsed&&(this.resizableModel(this.currentBarIndex,!1),this.resizableModel(this.currentBarIndex+1,!1),this.paneSettings[this.nextPaneIndex].collapsible&&this.showCurrentBarIcon(),f(this.nextBar)||this.hideTargetBarIcon(this.nextBar,this.arrow),this.nextPane&&this.nextPaneIndex===this.allPanes.length-1&&!this.paneSettings[this.nextPaneIndex].collapsible&&this.splitInstance.nextPaneCollapsed&&this.hideTargetBarIcon(this.currentSeparator,this.arrow),this.nextPaneIndex!==this.allPanes.length-1&&this.nextPane.nextElementSibling&&this.nextPane.classList.contains(Ts)&&!this.nextPane.nextElementSibling.classList.contains(Ts)&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.nextBar,this.rightArrow)):(this.paneSettings[this.prevPaneIndex].collapsible&&this.showCurrentBarIcon(),this.paneSettings[this.nextPaneIndex].collapsible&&W([t.target],Ec),this.paneSettings[this.currentBarIndex].resizable&&this.resizableModel(this.currentBarIndex,!0),f(this.prevBar)||this.splitInstance.prevPanePreEle.classList.contains(Ts)?(this.previousPane.previousElementSibling&&this.paneSettings[this.prevPaneIndex].collapsible&&this.previousPane.previousElementSibling.classList.contains(Ts)&&this.paneSettings[this.prevPaneIndex-1].collapsible&&this.showTargetBarIcon(this.prevBar,this.rightArrow),this.paneSettings[this.currentBarIndex+1].collapsible||this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)):(this.paneSettings[this.currentBarIndex-1].resizable&&this.resizableModel(this.currentBarIndex-1,!0),this.paneSettings[this.prevPaneIndex].collapsible&&this.showTargetBarIcon(this.prevBar,this.rightArrow),this.paneSettings[this.currentBarIndex-1].collapsible||this.hideTargetBarIcon(this.prevBar,this.arrow),this.paneSettings[this.currentBarIndex].collapsible&&!this.paneSettings[this.currentBarIndex+1].collapsible&&this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)))}afterAction(t){return{element:this.element,event:t,pane:[this.previousPane,this.nextPane],index:[this.prevPaneIndex,this.nextPaneIndex],separator:this.currentSeparator}}currentIndex(t){this.currentBarIndex=this.getOrderIndex(parseInt(t.target.parentElement.style.order,10),"splitbar")}getSeparatorIndex(t){let i=[].slice.call(this.allBars);return i=this.enableReversePanes?i.reverse():i,i.indexOf(t)}getPrevBar(t){return this.allBars[t-1]}getNextBar(t){return this.allBars[t+1]}updateBars(t){this.prevBar=this.getPrevBar(t),this.nextBar=this.getNextBar(t)}splitterDetails(t){this.arrow="Horizontal"===this.orientation?t.target.classList.contains(u_)?d_:u_:t.target.classList.contains(p_)?f_:p_,this.updateCurrentSeparator(t.target),this.currentIndex(t),this.updateBars(this.currentBarIndex),this.getPaneDetails()}triggerResizing(t){this.trigger("resizing",{element:this.element,event:t,pane:[this.previousPane,this.nextPane],index:[this.prevPaneIndex,this.nextPaneIndex],paneSize:[this.prePaneDimenson,this.nextPaneDimension],separator:this.currentSeparator})}onMouseDown(t){t.preventDefault();const i=t.target;if(i.classList.contains(c_))return;this.updateCurrentSeparator(i),z([this.currentSeparator],sS),this.updateCursorPosition(t,"previous"),this.getPaneDetails();const s={element:this.element,event:t,pane:[this.previousPane,this.nextPane],index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.currentSeparator,cancel:!1};for(let r=0;r<this.element.querySelectorAll("iframe").length;r++)this.element.querySelectorAll("iframe")[r].style.pointerEvents="none";this.trigger("resizeStart",s,r=>{r.cancel||(this.wireResizeEvents(),this.checkPaneSize(t))})}updatePaneFlexBasis(t){let i;return i=t.style.flexBasis.indexOf("%")>0?this.removePercentageUnit(t.style.flexBasis):this.convertPixelToPercentage(""!==t.style.flexBasis?this.convertPixelToNumber(t.style.flexBasis):"Horizontal"===this.orientation?t.offsetWidth:t.offsetHeight),i}removePercentageUnit(t){return parseFloat(t.slice(0,t.indexOf("%")))}convertPercentageToPixel(t,i){const s=t.toString();let r;if(s.indexOf("%")>-1){let o;r=parseFloat(s.slice(0,s.indexOf("%"))),o=f(i)?"Horizontal"===this.orientation?this.element.offsetWidth:this.element.offsetHeight:this.panesDimensions[this.allPanes.indexOf(i)],r=Math.ceil(o*(r/100))}else r=parseInt(s,10);return r}convertPixelToPercentage(t){return t/("Horizontal"===this.orientation?this.element.offsetWidth:this.element.offsetHeight)*100}convertPixelToNumber(t){return t.indexOf("p")>-1?parseFloat(t.slice(0,t.indexOf("p"))):parseFloat(t)}calcDragPosition(t,i){let r;return r=("Horizontal"===this.orientation?this.currentCoordinates.x-t:this.currentCoordinates.y-t)/i,r=r>1?1:r<0?0:r,r*i}getSeparatorPosition(t){this.updateCursorPosition(t,"current");const i="Horizontal"===this.orientation?this.element.getBoundingClientRect().left+window.scrollX:this.element.getBoundingClientRect().top+window.scrollY;return this.calcDragPosition(i,"Horizontal"===this.orientation?this.element.offsetWidth:this.element.offsetHeight)}getMinMax(t,i,s){const r="min"===s?0:null;let o=null;return"min"===s?!f(this.paneSettings[t])&&!f(this.paneSettings[t].min)&&(o=this.paneSettings[t].min):!f(this.paneSettings[t])&&!f(this.paneSettings[t].max)&&(o=this.paneSettings[t].max),this.paneSettings.length>0&&!f(this.paneSettings[t])&&!f(o)?(o.indexOf("%")>0&&(o=this.convertPercentageToPixel(o).toString()),this.convertPixelToNumber(o)):r}getPreviousPaneIndex(){const t=this.enableReversePanes?parseInt(this.currentSeparator.style.order,10)+1:parseInt(this.currentSeparator.style.order,10)-1;return this.getOrderIndex(t,"pane")}getNextPaneIndex(){const t=this.enableReversePanes?parseInt(this.currentSeparator.style.order,10)-1:parseInt(this.currentSeparator.style.order,10)+1;return this.getOrderIndex(t,"pane")}getPaneDetails(){let t=null,i=null;this.order=parseInt(this.currentSeparator.style.order,10),this.allPanes.length>1&&(t=this.getPrevPane(this.order),i=this.getNextPane(this.order)),t&&i&&(this.previousPane=t,this.nextPane=i,this.prevPaneIndex=this.getPreviousPaneIndex(),this.nextPaneIndex=this.getNextPaneIndex())}getPaneHeight(t){return"Horizontal"===this.orientation?t.offsetWidth.toString():t.offsetHeight.toString()}isValidSize(t){let i=!1;return!f(this.paneSettings[t])&&!f(this.paneSettings[t].size)&&this.paneSettings[t].size.indexOf("%")>-1&&(i=!0),i}getPaneDimensions(){this.previousPaneHeightWidth=""===this.previousPane.style.flexBasis?this.getPaneHeight(this.previousPane):this.previousPane.style.flexBasis,this.nextPaneHeightWidth=""===this.nextPane.style.flexBasis?this.getPaneHeight(this.nextPane):this.nextPane.style.flexBasis,this.isValidSize(this.prevPaneIndex)&&(this.previousPaneHeightWidth=this.convertPercentageToPixel(this.previousPaneHeightWidth).toString(),this.updatePrePaneInPercentage=!0),this.isValidSize(this.nextPaneIndex)&&(this.nextPaneHeightWidth=this.convertPercentageToPixel(this.nextPaneHeightWidth).toString(),this.updateNextPaneInPercentage=!0),this.prePaneDimenson=this.convertPixelToNumber(this.previousPaneHeightWidth.toString()),this.nextPaneDimension=this.convertPixelToNumber(this.nextPaneHeightWidth.toString())}checkCoordinates(t,i){let s=!0;return(t===this.previousCoordinates.x||i===this.previousCoordinates.y)&&(s=!1),s}isCursorMoved(t){let i=!0;return i="mouse"===this.getEventType(t.type)||!f(t.pointerType)&&"mouse"===this.getEventType(t.pointerType)?this.checkCoordinates(t.pageX,t.pageY):"msie"!==q.info.name?this.checkCoordinates(t.touches[0].pageX,t.touches[0].pageY):this.checkCoordinates(t.pageX,t.pageY),i}getBorder(){this.border=0,this.border="chrome"!==q.info.name?this.border:"Horizontal"===this.orientation?(this.element.offsetWidth-this.element.clientWidth)/2:(this.element.offsetHeight-this.element.clientHeight)/2}onMouseMove(t){if(!this.isCursorMoved(t))return;this.getPaneDetails(),this.getPaneDimensions(),this.triggerResizing(t);const i=this.validateDraggedPosition(this.getSeparatorPosition(t),this.prePaneDimenson,this.nextPaneDimension);let s;this.getBorder(),s="Horizontal"===this.orientation?this.element.getBoundingClientRect().left+i-this.currentSeparator.getBoundingClientRect().left+this.border:this.element.getBoundingClientRect().top+i-this.currentSeparator.getBoundingClientRect().top+this.border,this.nextPaneHeightWidth="string"==typeof this.nextPaneHeightWidth&&this.nextPaneHeightWidth.indexOf("p")>-1?this.convertPixelToNumber(this.nextPaneHeightWidth):parseInt(this.nextPaneHeightWidth,10),this.prevPaneCurrentWidth=s+this.convertPixelToNumber(this.previousPaneHeightWidth),this.nextPaneCurrentWidth=this.nextPaneHeightWidth-s,this.validateMinMaxValues(),this.nextPaneCurrentWidth<0&&(this.nextPaneCurrentWidth=0),this.prevPaneCurrentWidth<0&&(this.prevPaneCurrentWidth=0),this.nextPaneCurrentWidth+this.prevPaneCurrentWidth>this.totalWidth&&(this.nextPaneCurrentWidth<this.prevPaneCurrentWidth?this.prevPaneCurrentWidth=this.prevPaneCurrentWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth-this.totalWidth):this.nextPaneCurrentWidth=this.nextPaneCurrentWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth-this.totalWidth)),this.nextPaneCurrentWidth+this.prevPaneCurrentWidth<this.totalWidth&&(this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+(this.totalWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth))),this.calculateCurrentDimensions(),this.addStaticPaneClass(),this.previousPane.style.flexBasis=this.prevPaneCurrentWidth,this.nextPane.style.flexBasis=this.nextPaneCurrentWidth,this.allPanes.length>2||this.updateSplitterSize()}validateMinRange(t,i,s){let o,l,r=null,a=0;return!f(this.paneSettings[t])&&!f(this.paneSettings[t].min)&&(r=this.paneSettings[t].min.toString()),f(r)||(r.indexOf("%")>0&&(r=this.convertPercentageToPixel(r).toString()),o=this.convertPixelToNumber(r),i<o&&(a=i-o<=0?0:i-o,this.totalWidth=this.totalWidth-a,this.totalPercent=this.convertPixelToPercentage(this.totalWidth),l=o)),f(l)?i:l}validateMaxRange(t,i,s){let o,a,r=null;return!f(this.paneSettings[t])&&!f(this.paneSettings[t].max)&&(r=this.paneSettings[t].max.toString()),f(r)||(r.indexOf("%")>0&&(r=this.convertPercentageToPixel(r).toString()),o=this.convertPixelToNumber(r),i>o&&(this.totalWidth=this.totalWidth-(i-o),this.totalPercent=this.convertPixelToPercentage(this.totalWidth),a=o)),f(a)?i:a}validateMinMaxValues(){this.prevPaneCurrentWidth=this.validateMinRange(this.prevPaneIndex,this.prevPaneCurrentWidth,this.previousPane),this.nextPaneCurrentWidth=this.validateMinRange(this.nextPaneIndex,this.nextPaneCurrentWidth,this.nextPane),this.prevPaneCurrentWidth=this.validateMaxRange(this.prevPaneIndex,this.prevPaneCurrentWidth,this.previousPane),this.nextPaneCurrentWidth=this.validateMaxRange(this.nextPaneIndex,this.nextPaneCurrentWidth,this.nextPane)}equatePaneWidths(){let t;this.prevPaneCurrentWidth+this.nextPaneCurrentWidth>this.totalPercent&&(t=this.prevPaneCurrentWidth+this.nextPaneCurrentWidth-this.totalPercent,this.prevPaneCurrentWidth=this.prevPaneCurrentWidth-t/2+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth-t/2+"%"),this.prevPaneCurrentWidth+this.nextPaneCurrentWidth<this.totalPercent&&(t=this.totalPercent-(this.prevPaneCurrentWidth+this.nextPaneCurrentWidth),this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+t/2+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+t/2+"%")}calculateCurrentDimensions(){this.updatePrePaneInPercentage||this.updateNextPaneInPercentage?(this.prevPaneCurrentWidth=Math.round(Number(Math.round(10*this.convertPixelToPercentage(this.prevPaneCurrentWidth))/10)),this.nextPaneCurrentWidth=Math.round(Number(Math.round(10*this.convertPixelToPercentage(this.nextPaneCurrentWidth))/10)),0===this.prevPaneCurrentWidth&&(this.nextPaneCurrentWidth=this.totalPercent),0===this.nextPaneCurrentWidth&&(this.prevPaneCurrentWidth=this.totalPercent),this.prevPaneCurrentWidth+this.nextPaneCurrentWidth!==this.totalPercent?this.equatePaneWidths():(this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+"%"),this.prevPaneCurrentWidth=this.updatePrePaneInPercentage?this.prevPaneCurrentWidth:this.convertPercentageToPixel(this.prevPaneCurrentWidth)+"px",this.nextPaneCurrentWidth=this.updateNextPaneInPercentage?this.nextPaneCurrentWidth:this.convertPercentageToPixel(this.nextPaneCurrentWidth)+"px",this.updatePrePaneInPercentage=!1,this.updateNextPaneInPercentage=!1):(this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+"px",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+"px")}addStaticPaneClass(){this.previousPane.classList.contains(Fl)||this.previousPane.classList.add(Fl),this.nextPane.classList.contains(Fl)||this.nextPane.classList.add(Fl)}validateDraggedPosition(t,i,s){const r="Horizontal"===this.orientation?this.currentSeparator.offsetLeft:this.currentSeparator.offsetTop,o=r-i,a=s+r,l=this.getMinMax(this.prevPaneIndex,this.previousPane,"min"),h=this.getMinMax(this.nextPaneIndex,this.nextPane,"min"),c=this.getMinMax(this.prevPaneIndex,this.previousPane,"max"),m=this.getMinMax(this.nextPaneIndex,this.nextPane,"max");let b=t;return t>a-h?b=a-h:t<o+l&&(b=o+l),f(c)?f(m)||t<a-m&&(b=a-m):t>o+c&&(b=o+c),b}onMouseUp(t){W([this.currentSeparator],sS),this.unwireResizeEvents();const i={event:t,element:this.element,pane:[this.previousPane,this.nextPane],index:[this.prevPaneIndex,this.nextPaneIndex],separator:this.currentSeparator,paneSize:[this.prePaneDimenson,this.nextPaneDimension]};for(let s=0;s<this.element.querySelectorAll("iframe").length;s++)this.element.querySelectorAll("iframe")[s].style.pointerEvents="auto";if(this.trigger("resizeStop",i),this.enablePersistence){const s=this.paneSettings;s[this.getPreviousPaneIndex()].size=this.allPanes[this.getPreviousPaneIndex()].style.flexBasis,s[this.getNextPaneIndex()].size=this.allPanes[this.getNextPaneIndex()].style.flexBasis,this.setProperties({paneSettings:s},!0)}}panesDimension(t,i){const s=i.length;let r;parseInt(this.getHeight(this.element),10),f(this.paneSettings[t])?ht(i[t],{order:2*t}):f(this.paneSettings[t].size)?(this.sizeFlag=!0,ht(i[t],{order:2*t})):(r=this.paneSettings[t].size,t<s&&(ht(i[t],{"flex-basis":r,order:2*t}),t<s-1&&""!==this.paneSettings[t].size?z([i[t]],Fl):this.sizeFlag||(i[t].style.flexBasis=null),t===s-1&&this.sizeFlag&&""!==this.paneSettings[t].size&&z([i[t]],Fl))),this.paneOrder.push(2*t)}setTemplate(t,i){i.innerHTML="",t="string"==typeof t?this.sanitizeHelper(t):t,this.templateCompile(i,t),this.isReact&&this.renderReactTemplates()}templateCompile(t,i){const s=this.createElement("div");this.compileElement(s,i,"content"),0!==s.childNodes.length&&[].slice.call(s.childNodes).forEach(r=>{t.appendChild(r)})}compileElement(t,i,s){if("string"==typeof i)if("."===i[0]||"#"===i[0]){const a=document.querySelector(i);if(!f(a))return this.templateElement.push(a),"none"===a.style.display&&a.style.removeProperty("display"),""===a.getAttribute("style")&&a.removeAttribute("style"),void t.appendChild(a);i=i.trim()}else i=i.trim();let r,o;r=f(i.outerHTML)?ji(i):ji(i.outerHTML),f(r)||(o=r({},this,s,this.element.id+"content"+this.allPanes.length.toString(),!0)),!f(r)&&o&&o.length>0&&[].slice.call(o).forEach(a=>{t.appendChild(a)})}paneCollapsible(t,i){this.paneSettings[i].collapsible?z([t],wj):W([t],wj)}createSplitPane(t){let i=t.children.length;for(let r=0;r<this.paneSettings.length;r++)if(i<this.paneSettings.length){const o=this.createElement("div");this.element.appendChild(o),i+=1}i=t.children.length;const s=[].slice.call(t.children);if(this.sizeFlag=!1,i>0)for(let r=0;r<i;r++)("DIV"===s[r].nodeName||"SPAN"===s[r].nodeName)&&(this.allPanes.push(s[r]),"Horizontal"===this.orientation?(z([s[r]],[r_,o_,vj]),this.panesDimension(r,s)):(z([s[r]],[r_,a_,vj]),this.panesDimension(r,s)),!f(this.paneSettings[r])&&!f(this.paneSettings[r].content)&&this.setTemplate(this.paneSettings[r].content,s[r]),!f(this.paneSettings[r])&&this.paneSettings[r].cssClass&&this.setCssClass(s[r],this.paneSettings[r].cssClass),f(this.paneSettings[r])||this.paneCollapsible(s[r],r))}expand(t){this.collapsedOnchange(t),this.updatePaneSettings(t,!1)}collapse(t){this.isCollapsed(t),this.updatePaneSettings(t,!0)}destroy(){if(!this.isDestroyed){for(super.destroy(),k.remove(document,"touchstart click",this.onDocumentClick),this.element.ownerDocument.defaultView.removeEventListener("resize",this.onReportWindowSize,!0);this.element.attributes.length>0;)this.element.removeAttribute(this.element.attributes[0].name);this.element.innerHTML=this.wrapper.innerHTML;for(let t=0;t<this.wrapper.attributes.length;t++)this.element.setAttribute(this.wrapper.attributes[t].name,this.wrapper.attributes[t].value);this.refreshing&&(z([this.element],["e-control","e-lib",yj]),this.allBars=[],this.allPanes=[]),this.restoreElem(),this.isReact&&this.clearTemplate()}}restoreElem(){if(this.templateElement.length>0)for(let t=0;t<this.templateElement.length;t++)this.templateElement[t].style.display="none",document.body.appendChild(this.templateElement[t])}addPaneClass(t){return z([t],"Horizontal"===this.orientation?[r_,o_,vj]:[r_,a_,vj]),t}removePaneOrders(t){const i=this.element.childNodes,s=[];for(let r=0;i.length<0;r++)i[r].classList.contains(t)&&s.push(i[r]);for(let r=0;r<s.length;r++)s[r].style.removeProperty("order")}setPaneOrder(){for(let t=0;t<this.allPanes.length;t++)this.panesDimension(t,this.allPanes)}removeSeparator(){for(let t=0;t<this.allBars.length;t++)te(this.allBars[t]);this.allBars=[]}updatePanes(){this.setPaneOrder(),this.removeSeparator(),this.addSeparator(this.element)}addPane(t,i){let s=this.createElement("div");s=this.addPaneClass(s),i=i>this.allPanes.length+1?this.allPanes.length:i;const r={size:f(t.size)?"":t.size,min:f(t.min)?null:t.min,max:f(t.max)?null:t.max,content:f(t.content)?"":t.content,resizable:!!f(t.resizable)||t.resizable,collapsible:!f(t.collapsible)&&t.collapsible,collapsed:!f(t.collapsed)&&t.collapsed,cssClass:f(t.cssClass)?"":t.cssClass};this.paneSettings.splice(i,0,r),this.setProperties({paneSettings:this.paneSettings},!0),"Horizontal"===this.orientation?(this.element.insertBefore(s,this.element.querySelectorAll("."+o_)[i]),this.removePaneOrders(o_)):(this.element.insertBefore(s,this.element.querySelectorAll("."+a_)[i]),this.removePaneOrders(a_)),this.allPanes.splice(i,0,s),this.updatePanes(),this.setTemplate(this.paneSettings[i].content,s),this.setCssClass(this.allPanes[i],t.cssClass),this.allPanes[this.allPanes.length-1].classList.remove(Fl)}removePane(t){t=t>this.allPanes.length+1?this.allPanes.length:t;const i="Horizontal"===this.orientation?o_:a_;f(this.element.querySelectorAll("."+i)[t])||(te(this.element.querySelectorAll("."+i)[t]),this.allPanes.splice(t,1),this.removePaneOrders(i),this.updatePanes(),this.paneSettings.splice(t,1),this.setProperties({paneSettings:this.paneSettings},!0),this.allPanes.length>0&&this.allPanes[this.allPanes.length-1].classList.remove(Fl))}};return Pr([_("100%")],n.prototype,"height",void 0),Pr([_(!1)],n.prototype,"enableReversePanes",void 0),Pr([_("100%")],n.prototype,"width",void 0),Pr([_(!1)],n.prototype,"enablePersistence",void 0),Pr([rh([],$Re)],n.prototype,"paneSettings",void 0),Pr([_("Horizontal")],n.prototype,"orientation",void 0),Pr([_("")],n.prototype,"cssClass",void 0),Pr([_(!0)],n.prototype,"enabled",void 0),Pr([_(!0)],n.prototype,"enableHtmlSanitizer",void 0),Pr([_(null)],n.prototype,"separatorSize",void 0),Pr([G()],n.prototype,"beforeSanitizeHtml",void 0),Pr([G()],n.prototype,"created",void 0),Pr([G()],n.prototype,"resizeStart",void 0),Pr([G()],n.prototype,"resizing",void 0),Pr([G()],n.prototype,"resizeStop",void 0),Pr([G()],n.prototype,"beforeCollapse",void 0),Pr([G()],n.prototype,"beforeExpand",void 0),Pr([G()],n.prototype,"collapsed",void 0),Pr([G()],n.prototype,"expanded",void 0),n=Pr([as],n),n})();var wn=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const KK="e-prevent",Sj="e-dragging",xj="e-drag",YK="e-responsive",Cce="e-panel-content",wce="e-panel-container",Sce="e-panel-header";class jh extends ii{}wn([_("")],jh.prototype,"id",void 0),wn([_("")],jh.prototype,"cssClass",void 0),wn([_("")],jh.prototype,"header",void 0),wn([_("")],jh.prototype,"content",void 0),wn([_(!0)],jh.prototype,"enabled",void 0),wn([_(0)],jh.prototype,"row",void 0),wn([_(0)],jh.prototype,"col",void 0),wn([_(1)],jh.prototype,"sizeX",void 0),wn([_(1)],jh.prototype,"sizeY",void 0),wn([_(1)],jh.prototype,"minSizeY",void 0),wn([_(1)],jh.prototype,"minSizeX",void 0),wn([_(null)],jh.prototype,"maxSizeY",void 0),wn([_(null)],jh.prototype,"maxSizeX",void 0),wn([_(1e3)],jh.prototype,"zIndex",void 0);let Wo=class extends Qs{constructor(e,t){super(e,t),this.rows=1,this.panelID=0,this.movePanelCalled=!1,this.resizeCalled=!1,this.mOffX=0,this.mOffY=0,this.maxTop=9999,this.maxRows=100,this.mouseX=0,this.mouseY=0,this.minTop=0,this.minLeft=0,this.isInlineRendering=!1,this.removeAllCalled=!1,this.isPanelRemoved=!1,this.panelsSizeY=0,this.resizeHeight=!1,zt("mergePersistData",this.mergePersistPanelData,this)}preRender(){this.panelCollection=[],this.sortedArray=[],this.gridPanelCollection=[],this.overlapElement=[],this.overlapElementClone=[],this.overlapSubElementClone=[],this.collisionChecker={},this.dragCollection=[],this.elementRef={top:"",left:"",height:"",width:""},this.dimensions=[],this.allItems=[],this.oldRowCol={},this.availableClasses=[],this.setOldRowCol(),this.calculateCellSize(),this.contentTemplateChild=[].slice.call(this.element.children)}setOldRowCol(){for(let e=0;e<this.panels.length;e++)this.panels[e].id||(this.panelPropertyChange(this.panels[e],{id:"layout_"+this.panelID.toString()}),this.panelID=this.panelID+1),this.oldRowCol[this.panels[e].id]={row:this.panels[e].row,col:this.panels[e].col}}createPanelElement(e,t){const i=this.createElement("div");return e&&e.length>0&&z([i],e),t&&i.setAttribute("id",t),i}render(){this.initialize(),this.isRenderComplete=!0,this.showGridLines&&!this.checkMediaQuery()&&this.initGridLines(),this.updateDragArea(),this.renderComplete(),this.renderReactTemplates()}initGridLines(){this.table=document.createElement("table");const e=document.createElement("tbody");this.table.classList.add("e-dashboard-gridline-table");for(let t=0;t<this.maxRow();t++){const i=document.createElement("tr");for(let s=0;s<this.columns;s++){const r=document.createElement("td");r.classList.add("e-dashboard-gridline"),this.setAttributes({value:{row:t.toString(),col:s.toString(),sizeX:"1",sizeY:"1"}},r),r.setAttribute("id",""+s),this.setPanelPosition(r,t,s),this.setHeightAndWidth(r,{row:t,col:s,sizeX:1,sizeY:1}),i.appendChild(r)}e.appendChild(i)}this.table.appendChild(e),this.element.appendChild(this.table),this.renderReactTemplates()}initialize(){if(this.updateRowHeight(),this.element.childElementCount>0&&this.element.querySelectorAll(".e-panel").length>0){const e=[];this.setProperties({panels:[]},!0),this.isInlineRendering=!0;for(let t=0;t<this.element.querySelectorAll(".e-panel").length;t++)e.push(this.element.querySelectorAll(".e-panel")[t]);for(let t=0;t<e.length;t++){const i=e[t];this.enableRtl&&z([i],"e-rtl"),this.getInlinePanels(i),this.maxCol(),this.maxRow()}for(let t=0;t<this.panels.length;t++){const i=this.element.querySelector("#"+this.panels[t].id);if(this.setMinMaxValues(this.panels[t]),this.maxColumnValue<this.panels[t].col||this.maxColumnValue<this.panels[t].col+this.panels[t].sizeX){const r=this.maxColumnValue-this.panels[t].sizeX;this.panelPropertyChange(this.panels[t],{col:r<0?0:r})}this.setXYAttributes(i,this.panels[t]);const s=this.renderPanels(i,this.panels[t],this.panels[t].id,!1);this.panelCollection.push(s),this.setHeightAndWidth(i,this.panels[t]),this.tempObject=this,this.mediaQuery&&!window.matchMedia("("+this.mediaQuery+")").matches&&(this.setPanelPosition(i,this.panels[t].row,this.panels[t].col),this.mainElement=i,this.updatePanelLayout(i,this.panels[t]),this.mainElement=null),this.setClasses([i])}this.updateOldRowColumn(),this.checkMediaQuery()&&this.checkMediaQuerySizing()}else this.renderDashBoardCells(this.panels);this.allowDragging&&(!this.mediaQuery||!window.matchMedia("("+this.mediaQuery+")").matches)&&this.enableDraggingContent(this.panelCollection),this.sortedPanel(),this.bindEvents(),this.updatePanels(),this.updateCloneArrayObject(),this.checkColumnValue=this.maxColumnValue,this.checkMediaQuery()||this.panelResponsiveUpdate(),this.setEnableRtl()}checkMediaQuery(){return this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches}calculateCellSize(){this.cellSize=[],this.checkMediaQuery()?this.cellSize[1]=this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio:(this.cellSize[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSize[0]=this.element.parentElement&&(this.element.parentElement.offsetWidth-(this.maxCol()-1)*this.cellSpacing[0])/this.maxCol(),this.cellSize[1]=this.cellSize[0]/this.cellAspectRatio)}maxRow(e){let t=1;if(this.rows>1&&f(e))return t=this.rows,t;for(let i=0;i<this.panels.length;i++)this.panels[i].sizeY+this.panels[i].row>t&&(t=this.panels[i].sizeY+this.panels[i].row);return 0===this.panels.length&&(t=this.columns),t}maxCol(){let e=1;return e=this.columns,this.maxColumnValue=e,e}updateOldRowColumn(){for(let e=0;e<this.panels.length;e++){const t=this.panels[e].id;if(document.getElementById(t)){const i=parseInt(document.getElementById(t).getAttribute("data-row"),10),s=parseInt(document.getElementById(t).getAttribute("data-col"),10);this.oldRowCol[this.panels[e].id]={row:i,col:s}}}}createSubElement(e,t,i){const s=this.createElement("div");return i&&z([s],[i]),e&&e.length>0&&z([s],e),t&&s.setAttribute("id",t),s}templateParser(e){if(e)try{if(document.querySelectorAll(e).length)return ji(document.querySelector(e).innerHTML.trim())}catch(t){const i=hr.sanitize(e);return ji(this.enableHtmlSanitizer&&"string"==typeof e?i:e)}}renderTemplate(e,t,i,s,r){const o=this.templateParser(e),a=[];if("."!==e[0]&&"#"!==e[0]||"SCRIPT"===document.querySelector(e).tagName){const l=o({},this,r,i,s,null,t);if(l){for(const h of l)a.push(h);mi([].slice.call(a),t)}}else{const l=document.querySelector(e);if(!f(l))return"none"===l.style.display&&l.style.removeProperty("display"),""===l.getAttribute("style")&&l.removeAttribute("style"),void t.appendChild(l);e=e.trim()}}renderPanels(e,t,i,s){z([e],["e-panel","e-panel-transition"]);const r=t.cssClass?t.cssClass.split(" "):null;if(this.panelContent=e.querySelector(".e-panel-container")?e.querySelector(".e-panel-container"):this.createSubElement(r,e.id+"_content",wce),e.appendChild(this.panelContent),t.enabled||this.disablePanel(e),t.header){const o=e.querySelector(".e-panel-header")?e.querySelector(".e-panel-header"):this.createSubElement([],e.id+"template","");z([o],[Sce]),e.querySelector(".e-panel-header")||(this.renderTemplate(t.header,o,this.element.id+"HeaderTemplate"+i,s,"header"),this.panelContent.appendChild(o),this.renderReactTemplates())}if(t.content){const o=t.cssClass?t.cssClass.split(" "):null;this.panelBody=e.querySelector(".e-panel-content")?e.querySelector(".e-panel-content"):this.createSubElement(o,e.id+"_body",Cce);const a=this.panelContent.querySelector(".e-panel-header")?window.getComputedStyle(this.panelContent.querySelector(".e-panel-header")).height:"0px";ht(this.panelBody,{height:"calc( 100% - "+a+")"}),e.querySelector(".e-panel-content")||(this.renderTemplate(t.content,this.panelBody,this.element.id+"ContentTemplate"+i,s,"content"),this.panelContent.appendChild(this.panelBody),this.renderReactTemplates())}return e}disablePanel(e){z([e],["e-disabled"])}getInlinePanels(e){const t={sizeX:e.hasAttribute("data-sizex")?parseInt(e.getAttribute("data-sizex"),10):1,sizeY:e.hasAttribute("data-sizey")?parseInt(e.getAttribute("data-sizey"),10):1,minSizeX:e.hasAttribute("data-minsizex")?parseInt(e.getAttribute("data-minsizex"),10):1,minSizeY:e.hasAttribute("data-minsizey")?parseInt(e.getAttribute("data-minsizey"),10):1,maxSizeX:e.hasAttribute("data-maxsizex")?parseInt(e.getAttribute("data-maxsizex"),10):null,maxSizeY:e.hasAttribute("data-maxsizey")?parseInt(e.getAttribute("data-maxsizey"),10):null,row:e.hasAttribute("data-row")?parseInt(e.getAttribute("data-row"),10):0,col:e.hasAttribute("data-col")?parseInt(e.getAttribute("data-col"),10):0,id:e.getAttribute("id"),zIndex:e.hasAttribute("data-zindex")?parseInt(e.getAttribute("data-zIndex"),10):1e3,header:e.querySelector(".e-panel-header")&&".e-panel-header",content:e.querySelector(".e-panel-content")&&".e-panel-content"};t.id||(t.id="layout_"+this.panelID.toString(),e.setAttribute("id",t.id),this.panelID=this.panelID+1),li(t.enabled)&&(t.enabled=!0),e.style.zIndex=""+t.zIndex;const i=new jh(this,"panels",t,!0);this.panels.push(i)}resizeEvents(){if(this.allowResizing){const e=this.element.querySelectorAll(".e-panel .e-panel-container .e-resize");for(let t=0;t<e.length;t++)k.add(e[t],"msie"===q.info.name?"mousedown pointerdown":"mousedown",this.downResizeHandler,this),"msie"!==q.info.name&&k.add(e[t],"touchstart",this.touchDownResizeHandler,this)}}bindEvents(){this.refreshListener=this.refresh.bind(this),k.add(window,"resize",this.refreshListener),this.resizeEvents()}downResizeHandler(e){this.downHandler(e),this.lastMouseX=e.pageX,this.lastMouseY=e.pageY;const i="msie"===q.info.name?"mouseup pointerup":"mouseup";this.isMouseMoveBound||(k.add(document,"msie"===q.info.name?"mousemove pointermove":"mousemove",this.moveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(k.add(document,i,this.upResizeHandler,this),this.isMouseUpBound=!0)}downHandler(e){this.resizeCalled=!1,this.panelsInitialModel=this.cloneModels(this.panels);const t=B(e.currentTarget,".e-panel");this.trigger("resizeStart",{event:e,element:t,isInteracted:!0}),this.downTarget=e.currentTarget,this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),z([this.element],[KK]),this.element.appendChild(this.shadowEle),this.renderReactTemplates(),this.elementX=parseFloat(t.style.left),this.elementY=parseFloat(t.style.top),this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight,this.originalWidth=this.getCellInstance(t.id).sizeX,this.originalHeight=this.getCellInstance(t.id).sizeY,this.previousRow=this.getCellInstance(t.id).row}touchDownResizeHandler(e){this.downHandler(e),this.lastMouseX=e.changedTouches[0].pageX,this.lastMouseY=e.changedTouches[0].pageY,this.isMouseMoveBound||(k.add(document,"touchmove",this.touchMoveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(k.add(document,"touchend",this.upResizeHandler,this),this.isMouseUpBound=!0)}getCellSize(){return[this.cellSize[0],this.cellSize[1]]}updateMaxTopLeft(e){this.moveTarget=this.downTarget;const t=B(this.moveTarget,".e-panel");this.trigger("resize",{event:e,element:t,isInteracted:!0})}updateResizeElement(e){this.maxLeft=this.element.offsetWidth-1,this.maxTop=this.cellSize[1]*this.maxRows-1,W([e],"e-panel-transition"),z([e],[Sj]);const t=["e-east","e-west","e-north","e-south","e-south-east","e-north-east","e-north-west","e-south-west"];for(let i=0;i<this.moveTarget.classList.length;i++)-1!==t.indexOf(this.moveTarget.classList[i])&&(this.handleClass=this.moveTarget.classList[i])}moveResizeHandler(e){this.updateMaxTopLeft(e);const t=B(this.moveTarget,".e-panel");if(this.lastMouseX===e.pageX||this.lastMouseY===e.pageY)return;this.updateResizeElement(t);const i=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.pageX,this.mouseY=e.pageY;const s=this.mouseY-this.lastMouseY+this.mOffY,r=this.mouseX-this.lastMouseX+this.mOffX;this.mOffX=this.mOffY=0,this.lastMouseY=this.mouseY,this.lastMouseX=this.mouseX,this.resizingPanel(t,i,r,s)}touchMoveResizeHandler(e){this.updateMaxTopLeft(e);const t=B(this.moveTarget,".e-panel");if(this.lastMouseX===e.changedTouches[0].pageX||this.lastMouseY===e.changedTouches[0].pageY)return;this.updateResizeElement(t);const i=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.changedTouches[0].pageX,this.mouseY=e.changedTouches[0].pageY;const s=this.mouseX-this.lastMouseX+this.mOffX,r=this.mouseY-this.lastMouseY+this.mOffY;this.mOffX=this.mOffY=0,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.resizingPanel(t,i,s,r)}resizingPanel(e,t,i,s){let r=this.getCellInstance(e.id).sizeX,o=this.getCellInstance(e.id).sizeY;const a=s,l=i;this.handleClass.indexOf("north")>=0&&(this.elementHeight-a<this.getMinHeight(t)?(s=this.elementHeight-this.getMinHeight(t),this.mOffY=a-s):t.maxSizeY&&this.elementHeight-a>this.getMaxHeight(t)?(s=this.elementHeight-this.getMaxHeight(t),this.mOffY=a-s):this.elementY+a<this.minTop&&(this.mOffY=a-(s=this.minTop-this.elementY)),this.elementY+=s,this.elementHeight-=s),this.handleClass.indexOf("south")>=0&&(this.elementHeight+a<this.getMinHeight(t)?(s=this.getMinHeight(t)-this.elementHeight,this.mOffY=a-s):t.maxSizeY&&this.elementHeight+a>this.getMaxHeight(t)&&(s=this.getMaxHeight(t)-this.elementHeight,this.mOffY=a-s),this.elementHeight+=s),this.handleClass.indexOf("west")>=0&&(this.elementWidth-l<this.getMinWidth(t)?(i=this.elementWidth-this.getMinWidth(t),this.mOffX=l-i):t.maxSizeX&&this.elementWidth-l>this.getMaxWidth(t)?(i=this.elementWidth-this.getMaxWidth(t),this.mOffX=l-i):this.elementX+l<this.minLeft&&(this.mOffX=l-(i=this.minLeft-this.elementX)),this.elementX+=i,this.elementWidth-=i),this.handleClass.indexOf("east")>=0&&(this.elementWidth+l<this.getMinWidth(t)?(i=this.getMinWidth(t)-this.elementWidth,this.mOffX=l-i):t.maxSizeX&&this.elementWidth+l>this.getMaxWidth(t)&&(i=this.getMaxWidth(t)-this.elementWidth,this.mOffX=l-i),this.elementWidth+=i),e.style.top=this.elementY+"px",e.style.left=this.elementX+"px",e.style.width=this.elementWidth+"px",e.style.height=this.elementHeight+"px";const h=this.getResizeRowColumn(t);if(h.col+h.sizeX>this.columns&&this.panelPropertyChange(h,{sizeX:h.sizeX-1}),this.shadowEle.style.top=h.row*this.getCellSize()[1]+h.row*this.cellSpacing[1]+"px",this.shadowEle.style.left=h.col*this.getCellSize()[0]+h.col*this.cellSpacing[0]+"px",this.shadowEle.style.height=h.sizeY*(this.getCellSize()[1]+this.cellSpacing[1])+"px",this.shadowEle.style.width=h.sizeX*(this.getCellSize()[0]+this.cellSpacing[0])+"px",r!==h.sizeX||o!==h.sizeY){r=h.sizeX,o=h.sizeY;const c=this.getCellInstance(e.id),m={attributes:{row:c.row.toString(),col:c.col.toString(),sizeX:c.sizeX.toString(),sizeY:c.sizeY.toString()}};this.setAttributes(m,e),this.mainElement=e,this.updatePanelLayout(e,this.getCellInstance(e.id)),this.updateOldRowColumn(),this.sortedPanel()}}upResizeHandler(e){if(f(this.downTarget))return;this.upTarget=this.downTarget;const t=B(this.upTarget,".e-panel"),i={event:e,element:t,isInteracted:!0};if(t){z([t],"e-panel-transition");const r="msie"===q.info.name?"mouseup pointerup":"mouseup";k.remove(document,"msie"===q.info.name?"mousemove pointermove":"mousemove",this.moveResizeHandler),k.remove(document,r,this.upResizeHandler),"msie"!==q.info.name&&(k.remove(document,"touchmove",this.touchMoveResizeHandler),k.remove(document,"touchend",this.upResizeHandler)),this.isMouseUpBound=!1,this.isMouseMoveBound=!1,this.shadowEle&&te(this.shadowEle),this.shadowEle=null;const o=this.getCellInstance(t.getAttribute("id"));this.setPanelPosition(t,o.row,o.col),this.setHeightAndWidth(t,o)}W([t],[Sj]),this.trigger("resizeStop",i),this.resizeCalled=!1,this.lastMouseX=this.lastMouseY=void 0,this.mOffX=this.mOffY=0,this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.updatePanels(),this.updateCloneArrayObject(),this.checkForChanges(!0)}getResizeRowColumn(e){let t=!1,i=e.col;-1!==["e-west","e-south-west"].indexOf(this.handleClass)&&(i=this.pixelsToColumns(this.elementX,!1));let s=e.row;-1!==["e-north"].indexOf(this.handleClass)&&(s=this.pixelsToRows(this.elementY,!1),this.previousRow!==s&&(this.previousRow=s,t=!0));let r=e.sizeX;-1===["e-north","e-south"].indexOf(this.handleClass)&&(r=this.pixelsToColumns(this.elementWidth-r*this.cellSpacing[1],!0));let o=e.sizeY;return-1===["e-east","e-west"].indexOf(this.handleClass)&&("e-north"!==this.handleClass||t)&&(o=this.pixelsToRows(this.elementHeight-o*this.cellSpacing[0],!0)),e.col+e.sizeX>this.columns&&(e.sizeX=e.sizeX-1),(s>-1&&i>-1&&r+i<=this.maxCol()&&o+s<=this.maxRow()&&0===this.collisions(s,i,r,o,this.getPanelBase(e.id)).length||!1!==this.allowPushing)&&this.panelPropertyChange(e,{row:s,col:i,sizeX:r,sizeY:o}),e}pixelsToColumns(e,t){const i=this.cellSize[0];return t?Math.ceil(e/i):Math.floor(e/i)}pixelsToRows(e,t){return Math.round(t?e/this.cellSize[1]:e/(this.cellSize[1]+this.cellSpacing[0]))}getMinWidth(e){return e.minSizeX*this.getCellSize()[0]}getMaxWidth(e){return e.maxSizeX*this.getCellSize()[0]}getMinHeight(e){return e.minSizeY*this.getCellSize()[1]}getMaxHeight(e){return e.maxSizeY*this.getCellSize()[1]}sortedPanel(){this.sortedArray=[];for(let e=0,t=this.panelCollection.length;e<t;++e)this.sortItem(this.panelCollection[e])}moveItemsUpwards(){if(!1!==this.allowFloating){for(let e=0,t=this.sortedArray.length;e<t;++e){const i=this.sortedArray[e];if(i)for(let s=0,r=i.length;s<r;++s){const o=i[s];o&&this.moveItemUpwards(o)}}this.updateGridLines()}}moveItemUpwards(e){if(!1===this.allowFloating||e===this.mainElement)return;const t=this.getCellInstance(e.id).col,i=parseInt(e.getAttribute("data-sizeY"),10),s=parseInt(e.getAttribute("data-sizeX"),10);let r=null,o=null,a=parseInt(e.getAttribute("data-row"),10)-1;for(;a>-1&&0===this.collisions(a,t,s,i,e).length;)r=a,o=t,--a;null!==r&&this.sortItem(e,r,o)}sortItem(e,t,i){this.overlapElement=[];const s=parseInt(e.getAttribute("data-col"),10),r=parseInt(e.getAttribute("data-row"),10);if(this.sortedArray[r]||(this.sortedArray[r]=[]),this.sortedArray[r][s]=e,void 0!==e&&void 0!==t&&void 0!==i){if(void 0!==this.oldRowCol[e.id]&&null!==this.oldRowCol[e.id].row&&void 0!==this.oldRowCol[e.id].col){const a=this.sortedArray[this.oldRowCol[e.id].row];this.oldRowCol[e.id]&&a[this.oldRowCol[e.id].col]===e&&(delete a[this.oldRowCol[e.id].col],this.updateOldRowColumn(),this.sortedPanel())}this.oldRowCol[e.id].row=t,this.oldRowCol[e.id].row=i,this.sortedArray[r]||(this.sortedArray[r]=[]),this.sortedArray[r][s]=e,-1===this.allItems.indexOf(e)&&this.allItems.push(e),this.panelPropertyChange(this.getCellInstance(e.id),{row:t,col:i});const o=this.getCellInstance(e.id);this.setAttributes({value:{col:o.col.toString(),row:o.row.toString()}},e),this.updateLayout(e,this.getCellInstance(e.id))}}updateLayout(e,t){this.setPanelPosition(e,t.row,t.col),this.setHeightAndWidth(e,t),this.updateRowHeight(),this.sortedPanel()}refresh(){if(this.panelsSizeY=0,this.updateDragArea(),this.checkMediaQuery())this.checkMediaQuerySizing();else{if(this.element.classList.contains(YK)){W([this.element],[YK]);const e=this.element.querySelectorAll((this.element.id?"#"+this.element.id+" > ":"")+".e-panel");for(let t=0;t<e.length;t++){const i=e[t],s=this.getCellInstance(i.id),r=parseInt(i.getAttribute("data-row"),10),o=parseInt(i.getAttribute("data-col"),10);this.panelPropertyChange(s,{row:r,col:o}),this.setHeightAndWidth(i,this.getCellInstance(i.id)),this.setPanelPosition(i,r,o),this.updateRowHeight()}}this.panelResponsiveUpdate(),this.updateGridLines()}this.removeResizeClasses(this.panelCollection),this.setClasses(this.panelCollection),this.resizeEvents(),this.checkDragging(this.dragCollection)}updateGridLines(){this.element.querySelector(".e-dashboard-gridline-table")&&(this.table&&te(this.table),this.initGridLines())}checkDragging(e){if(this.checkMediaQuery()||!this.allowDragging)for(let t=0;t<e.length;t++)e[t].destroy();else{for(let t=0;t<e.length;t++)e[t].destroy();this.enableDraggingContent(this.panelCollection)}}sortPanels(){const e=[];for(let t=0;t<=this.rows;t++)for(let i=0;i<this.columns;i++)this.panels.filter(s=>{s.row===t&&s.col===i&&e.push(s)});return e}checkMediaQuerySizing(){let e;z([this.element],[YK]),e=this.isPanelRemoved&&this.panels?this.panels:this.sortPanels(),this.updatedRows=e.length;for(let t=0;t<e.length;t++){const i=document.getElementById(e[t].id);let s;i&&(ht(i,{width:"100%"}),i.style.height=" "+(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)*e[t].sizeY+"px",e[t].sizeY>1&&(s=(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)*e[t].sizeY+parseInt((Math.round(e[t].sizeY/2)*this.cellSpacing[1]).toString(),0),i.style.height=s+"px"),this.resizeHeight=!0,this.panelPropertyChange(e[t],{row:t,col:0}),this.setPanelPosition(i,e[t].row,e[t].col),this.panelsSizeY=this.panelsSizeY+e[t].sizeY,this.setClasses(this.panelCollection),this.checkDragging(this.dragCollection),this.removeResizeClasses(this.panelCollection))}this.updateRowHeight()}panelResponsiveUpdate(){this.element.classList.add("e-responsive"),this.calculateCellSize();for(let e=0;e<this.element.querySelectorAll(".e-panel").length;e++){const t=this.element.querySelectorAll(".e-panel")[e],i=this.getCellInstance(t.id);this.setHeightAndWidth(t,i)}for(let e=0;e<this.panels.length;e++)this.setPanelPosition(document.getElementById(this.panels[e].id),this.panels[e].row,this.panels[e].col);this.updateRowHeight()}updateRowHeight(){this.getRowColumn(),this.setHeightWidth()}setHeightWidth(){let e,t;e=this.checkMediaQuery()?this.maxRow()*(this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio)+(this.maxRow()-1)*this.cellSpacing[1]+"px":this.maxRow()*(this.cellSize[0]/this.cellAspectRatio)+(this.maxRow()-1)*this.cellSpacing[1]+"px",ht(this.element,{height:e}),t=window.getComputedStyle(this.element).width,ht(this.element,{width:t})}setHeightAndWidth(e,t){ht(e,{height:st(this.setXYDimensions(t)[0])}),ht(e,{width:st(this.setXYDimensions(t)[1])})}renderCell(e,t,i){let s;this.dimensions=this.setXYDimensions(e),li(e.enabled)&&(e.enabled=!0),this.contentTemplateChild.length>0&&!f(i)?(s=this.contentTemplateChild[i],e.cssClass&&z([s],[e.cssClass]),e.id&&s.setAttribute("id",e.id)):s=this.createPanelElement(e.cssClass?e.cssClass.split(" "):null,e.id),s.style.zIndex=""+e.zIndex,this.element.appendChild(s),this.renderReactTemplates();const r=this.renderPanels(s,e,e.id,t);return this.panelCollection.push(r),this.setXYAttributes(s,e),this.setHeightAndWidth(s,e),s}setPanelPosition(e,t,i){if(!e)return;this.checkMediaQuery()&&this.calculateCellSize();const s=this.getCellSize()[1],r=this.getCellSize()[0],o=0===i?0:i*(r+this.cellSpacing[0]);let a=0===t?0:t*(s+this.cellSpacing[1]);this.checkMediaQuery()&&(a=0===t?0:this.panelsSizeY*(s+this.cellSpacing[1])),ht(e,{left:o+"px",top:a+"px"})}getRowColumn(){if(this.rows=null,this.element.querySelectorAll(".e-panel").length>0&&!this.updatedRows){const e=this.element.querySelectorAll(".e-panel");for(let t=0;t<e.length;t++){const i=e[t],s=parseInt(i.getAttribute("data-row"),10),r=parseInt(i.getAttribute("data-sizeY"),10);this.rows=Math.max(this.rows,s+r)}}else{this.updatedRows&&(this.rows=this.updatedRows,this.updatedRows=null);for(let e=0;e<this.panels.length;e++)this.rows=Math.max(this.rows,this.panels[e].row)}}setMinMaxValues(e){this.panelPropertyChange(e,!e.sizeX||e.sizeX<e.minSizeX?{sizeX:e.minSizeX}:e.maxSizeX&&e.sizeX>e.maxSizeX?{sizeX:e.maxSizeX}:e.sizeX>this.columns?{sizeX:this.columns}:{sizeX:e.sizeX}),this.panelPropertyChange(e,!e.sizeY||e.sizeY<e.minSizeY?{sizeY:e.minSizeY}:e.maxSizeY&&e.sizeY>e.maxSizeY?{sizeY:e.maxSizeY}:{sizeY:e.sizeY})}checkMinMaxValues(e){e.col+e.sizeX>this.columns&&this.panelPropertyChange(e,{sizeX:e.sizeX+(this.columns-(e.col+e.sizeX))})}panelPropertyChange(e,t){e.setProperties(t,!0)}renderDashBoardCells(e){if(this.element.querySelectorAll(".e-panel").length>0||this.panels.length>0)for(let t=0;t<e.length;t++){this.gridPanelCollection.push(e[t]),this.setMinMaxValues(e[t]),(this.maxColumnValue<e[t].col||this.maxColumnValue<e[t].col+e[t].sizeX)&&this.panelPropertyChange(e[t],{col:this.maxColumnValue-e[t].sizeX});const i=this.renderCell(e[t],!1,t);this.enableRtl&&z([i],"e-rtl"),this.element.appendChild(i),this.renderReactTemplates(),this.checkMediaQuery()&&t===e.length-1?this.checkMediaQuerySizing():(this.setPanelPosition(i,e[t].row,e[t].col),this.mainElement=i,this.updatePanelLayout(i,e[t]),this.mainElement=null)}this.setClasses(this.panelCollection)}collisions(e,t,i,s,r){const o=[];let a;(!i||!s)&&(i=s=1),r&&!(r instanceof Array)&&(r=[r]);for(let l=0;l<s;++l)for(let h=0;h<i;++h)a=this.getPanel(e+l,t+h,r),a&&(!r||-1===r.indexOf(document.getElementById(a.id)))&&-1===o.indexOf(document.getElementById(a.id))&&o.push(document.getElementById(a.id));return o}rightWardsSpaceChecking(e,t,i){const s=[];let r=[];if(e.forEach(l=>{const h=parseInt(l.getAttribute("data-col"),10),c=parseInt(l.getAttribute("data-sizeX"),10);if(t<this.columns&&h>=t)if(c>1)for(let m=h;m<h+c;m++)s.push(m);else s.push(h)}),s.length>0)for(let l=t+1;l<=this.columns-1;l++)-1===s.indexOf(l)&&l!==t&&-1===r.indexOf(l)&&r.push(l);const o=this.getOccupiedColumns(i);return o.forEach(l=>{l>t&&-1!==r.indexOf(l)&&r.splice(r.indexOf(l),1)}),this.getOccupiedColumns(this.checkingElement).forEach(l=>{l>parseInt(i.getAttribute("data-col"),10)&&-1===o.indexOf(l)&&-1===r.indexOf(l)&&r.push(l)}),r=r.sort((l,h)=>l-h),r}getOccupiedColumns(e){const t=[],i=parseInt(e.getAttribute("data-sizeX"),10),s=parseInt(e.getAttribute("data-col"),10);for(let r=s;r<s+i&&r<=this.columns;r++)t.push(r);return t}leftWardsSpaceChecking(e,t,i){let s=[];const r=[];if(e.forEach(l=>{const h=parseInt(l.getAttribute("data-col"),10),c=parseInt(l.getAttribute("data-sizeX"),10);if(t<=this.columns&&h<=t)if(c>1)for(let m=h;m<h+c;m++)r.push(m);else r.push(h)}),r.length>0)for(let l=0;l<=t;l++)-1===r.indexOf(l)&&l!==t&&-1===s.indexOf(l)&&s.push(l);const o=this.getOccupiedColumns(i);return o.forEach(l=>{l<t&&-1!==s.indexOf(l)&&s.splice(s.indexOf(l),1)}),this.getOccupiedColumns(this.checkingElement).forEach(l=>{l<parseInt(i.getAttribute("data-col"),10)&&-1===o.indexOf(l)&&-1===s.indexOf(l)&&s.push(l)}),s=s.sort((l,h)=>l-h),s=s.reverse(),s}adjustmentAvailable(e,t,i,s,r){this.leftAdjustable=void 0,this.rightAdjustable=void 0;let a,o=!1,l=[];this.topAdjustable=void 0;const h=parseInt(r.getAttribute("data-sizeX"),10),c=parseInt(r.getAttribute("data-col"),10);l=this.getRowElements(this.collisions(e,0,this.columns,i,[])),-1===l.indexOf(r)&&l.push(r);const m=this.leftWardsSpaceChecking(l,t,r);if(m.length>0?(this.leftAdjustable=this.isLeftAdjustable(m,r,e,t,s,i),this.spacedColumnValue!==c-this.getCellInstance(this.checkingElement.id).sizeX&&(this.leftAdjustable=!1),this.leftAdjustable?this.rightAdjustable=!1:(this.leftAdjustable=!1,a=this.rightWardsSpaceChecking(l,t,r),this.rightAdjustable=a.length>0&&this.isRightAdjustable(a,r,e,t,s,i),this.spacedColumnValue!==h+c&&(this.rightAdjustable=!1),this.rightAdjustable||(this.rightAdjustable=!1))):(a=this.rightWardsSpaceChecking(l,t,r),this.rightAdjustable=a.length>0&&this.isRightAdjustable(a,r,e,t,s,i),this.spacedColumnValue!==h+c&&(this.rightAdjustable=!1),this.rightAdjustable&&(this.leftAdjustable=!1)),!this.rightAdjustable&&!this.leftAdjustable&&e>0){const b=this.getCellInstance(r.id).row;let v=!1;this.startRow!==b&&(v=!0);for(let w=e;w>=0;w--){const E=this.getCellInstance(r.id).sizeY>1&&v?this.checkingElement:r;w!==b&&w===b-i&&0===this.collisions(w,t,s,i,E).length&&(v=!1,this.topAdjustable=!0,this.spacedRowValue=f(this.spacedRowValue)?w:this.spacedRowValue,this.spacedColumnValue=t)}}return(this.rightAdjustable||this.leftAdjustable||this.topAdjustable)&&(o=!0,f(this.spacedRowValue)&&(this.spacedRowValue=e)),o}isXSpacingAvailable(e,t){let i=!1,s=[];for(let r=0;r<e.length;r++)if(e[r+1]-e[r]==1||e[r+1]-e[r]==-1){if(s.push(e[r]),2===t&&s.push(e[r+1]),r===e.length-2&&(s.push(e[r+1]),s.length>t&&s.splice(-1)),s.length===t)return i=!0,this.spacedColumnValue=s.sort((o,a)=>o-a)[0],this.spacedColumnValue<0&&(this.spacedColumnValue=1),i}else s=[];return i}getRowElements(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i]);return t}isLeftAdjustable(e,t,i,s,r,o){let a;if(1===r&&1===o&&e.length>0)this.spacedColumnValue=e[0],a=!0;else if(r>1&&1===o)a=this.isXSpacingAvailable(e,r);else if(o>1)if(1===r){let l;if(e.length>=1&&(l=!0),l)for(let h=0;h<e.length;h++){if(0===this.collisions(i,e[h],r,o,this.checkingElement).length)return this.spacedColumnValue=e[h],a=!0,a;a=!1}}else a=this.replacable(e,r,i,o,t);return a}isRightAdjustable(e,t,i,s,r,o){let a;if(1===r&&1===o&&e.length>0)this.spacedColumnValue=e[0],a=!0;else if(r>1&&1===o)a=this.isXSpacingAvailable(e,r);else if(o>1)if(1===r){let l;if(e.length>=1&&(l=!0),l)for(let h=0;h<e.length;h++){const c=this.collisions(i,e[h],r,o,this.checkingElement);for(let m=0;m<c.length;m++)parseInt(t.getAttribute("data-col"),10)!==e[h]&&c.splice(c.indexOf(c[m]),1);if(0===c.length)return a=!0,this.spacedColumnValue=e[h],a;a=!1}}else a=this.replacable(e,r,i,o,t);return a}replacable(e,t,i,s,r){let o;const a=[];for(let l=0;l<e.length;l++)if(this.isXSpacingAvailable(e,t)){const c=[];if(c.push(this.checkingElement),c.push(r),0===a.length)return o=!0,this.spacedColumnValue=this.spacedColumnValue,o;o=!1}return o}sortCollisionItems(e){const t=[];let i;for(let s=this.rows-1;s>=0;s--){i=[],e.forEach(r=>{r&&r.getAttribute("data-row")===s.toString()&&i.push(r)});for(let r=this.columns-1;r>=0;r--)i.forEach(o=>{o&&o.getAttribute("data-col")===r.toString()&&t.push(o)})}return t}updatedModels(e,t,i){const s=[];return this.mainElement||this.sortedPanel(),e.forEach(r=>{this.checkingElement=r;const o=this.getCellInstance(r.id),a=!this.adjustmentAvailable(o.row,o.col,o.sizeY,o.sizeX,i);if(o.sizeX>1&&a)for(let l=o.row;l<t.row+t.sizeY;l++)this.collisions(l,o.col,o.sizeX,o.sizeY,r).forEach(c=>{e.indexOf(c)>=0&&-1===s.indexOf(c)&&s.push(c)})}),s.forEach(r=>{s.indexOf(r)>=0&&e.splice(e.indexOf(r),1)}),e}resetLayout(e){let t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement);if(!this.mainElement||this.addPanelCalled||this.resizeCalled||this.movePanelCalled)return t;if(this.mainElement&&this.oldRowCol!==this.cloneObject)for(let i=0;i<this.panels.length;i++){const s=document.getElementById(this.panels[i].id);if(s===this.mainElement)continue;const r=this.cloneObject[s.id].row,o=this.cloneObject[s.id].col;this.setPanelPosition(s,r,o),this.panelPropertyChange(this.getCellInstance(s.id),{row:r,col:o}),this.setAttributes({value:{col:o.toString(),row:r.toString()}},s),this.updateOldRowColumn()}return this.sortedArray=this.cloneArray,t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement),this.sortedPanel(),this.updateOldRowColumn(),this.checkCollision&&this.checkCollision.length>0&&-1===t.indexOf(this.checkCollision[0])&&this.cloneObject[this.checkCollision[0].id].row===e.row&&t.push(this.checkCollision[0]),t}swapAvailability(e,t){let i=!0;const s=this.getCellInstance(t.id);for(let r=0;r<e.length;r++){const o=this.getCellInstance(e[r].id);for(let a=1;a<s.sizeY;a++){const l=[];if(l.push(t),l.push(e[r]),this.collisions(s.row+a,o.col,o.sizeX,o.sizeY,l).length>0)return i=!1,!1}}return i}checkForSwapping(e,t){if(!this.mainElement||0===e.length)return!1;let i;const s=parseInt(e[0].getAttribute("data-row"),10);if(this.startRow<s?i=1:this.startRow>s&&(i=0),!this.swapAvailability(e,t))return!1;let r=!1;for(let a=0;a<e.length;a++)if(e.length>=1&&this.cloneObject[this.mainElement.id].row===this.oldRowCol[this.mainElement.id].row)return!1;const o=0===i?this.getCellInstance(this.mainElement.id).row+this.getCellInstance(this.mainElement.id).sizeY:this.startRow;for(let a=0;a<e.length;a++){const l=this.getCellInstance(e[a].id),h=this.getCellInstance(t.id),c=[];if(1===l.sizeY&&-1===c.indexOf(e[a]))c.push(e[a]);else if(l.sizeY>1&&-1===c.indexOf(e[a]))if(1===i&&h.row===this.cloneObject[l.id].row+l.sizeY-1)c.push(e[a]);else{if(0!==i||h.row!==this.cloneObject[l.id].row)return!1;c.push(e[a])}if(l.sizeY<=h.sizeY&&-1===c.indexOf(e[a])&&c.push(e[a]),c.push(this.mainElement),this.collisions(o,l.col,l.sizeX,l.sizeY,c).length>0)return r=!1,r;a===e.length-1&&(r=!0)}return r}swapItems(e,t,i){let s;const r=[];r.push(t);const o=parseInt(e[0].getAttribute("data-row"),10);this.startRow<o?s=1:this.startRow>o&&(s=0);const a=0===s?o+i.sizeY:this.startRow;if(!this.movePanelCalled){const l=this.getCellInstance(e[0].id);this.panelPropertyChange(i,{row:0===s?o:a+l.sizeY})}for(let l=0;l<e.length;l++)r.push(e[l]),this.setPanelPosition(e[l],a,this.getCellInstance(e[l].id).col),this.panelPropertyChange(this.getCellInstance(e[l].id),{row:a}),e[l].setAttribute("data-row",a.toString());t.setAttribute("data-row",i.row.toString()),this.setPanelPosition(this.shadowEle,i.row,i.col);for(let l=0;l<this.panels.length;l++)this.oldRowCol[this.panels[l].id]={row:this.panels[l].row,col:this.panels[l].col};this.startRow=i.row,this.updateOldRowColumn(),r.forEach(l=>{this.cloneObject[l.id]=this.oldRowCol[l.id];const h=this.getCellInstance(l.id);for(let c=0;c<this.sortedArray.length;c++)if(this.sortedArray[c])for(let m=0;m<this.sortedArray[c].length;m++)this.sortedArray[c][m]===l&&(this.sortedArray[c][m]=void 0);this.sortedArray[h.row]||(this.sortedArray[h.row]=[]),this.sortedArray[h.row][h.col]=l,this.cloneArray=this.sortedArray})}updatePanelLayout(e,t){this.collisionChecker={};let s,i=[];const r=[];let o;if(i=this.mainElement&&this.isRenderComplete?this.resetLayout(t):this.collisions(t.row,t.col,t.sizeX,t.sizeY,e),i.length>0)if(i=this.sortCollisionItems(i),i=this.updatedModels(i,t,e),o=!f(this.startRow)&&this.checkForSwapping(i,e),o)this.swapItems(i,e,t);else for(let a=0;a<i.length;a++){const l=this.getCellInstance(i[a].id);if(this.checkingElement=i[a],this.spacedRowValue=null,this.spacedColumnValue=null,s=this.adjustmentAvailable(l.row,l.col,l.sizeY,l.sizeX,e),s&&!f(this.spacedColumnValue)){this.setPanelPosition(i[a],this.spacedRowValue,this.spacedColumnValue),this.oldRowCol[i[a].id]={row:this.spacedRowValue,col:this.spacedColumnValue};const h={attributes:{row:this.spacedRowValue.toString(),col:this.spacedColumnValue.toString()}};if(this.setAttributes(h,i[a]),this.panelPropertyChange(l,{col:this.spacedColumnValue,row:this.spacedRowValue}),this.topAdjustable&&this.allowFloating&&(this.updatePanels(),this.updateCloneArrayObject()),this.spacedRowValue=null,a<i.length)continue}else r.push(i[a])}if(r.length>0){const a=this;r.forEach(l=>{-1===a.overlapElement.indexOf(l)&&a.overlapElement.push(l)}),this.overlapElement&&-1!==this.overlapElement.indexOf(e)&&this.overlapElement.splice(this.overlapElement.indexOf(e),1),r.length>0&&(this.updateRowColumn(t.row,this.overlapElement,e),this.checkForCompletePushing())}this.isSubValue||this.sortedPanel(),this.updateRowHeight(),this.updateGridLines()}checkForCompletePushing(){for(let e=0;e<this.panels.length;e++)if(this.collisionChecker[this.panels[e].id]&&null!==this.collisionChecker[this.panels[e].id]){this.overlapElement=[this.collisionChecker[this.panels[e].id].ele];const t=this.panels[e].id;this.updateRowColumn(this.collisionChecker[t].row,this.overlapElement,this.collisionChecker[t].srcEle)}}updateCollisionChecked(e){for(let t=0;t<Object.keys(this.collisionChecker).length;t++)this.collisionChecker[e.id]=null}updateRowColumn(e,t,i){if(!i)return;const s=parseInt(i.getAttribute("data-sizeY"),10),r=parseInt(i.getAttribute("data-row"),10);this.overlapElementClone=this.overlapElement;for(let o=0;o<this.overlapElementClone.length;o++){if(0===this.overlapElementClone.length)return;for(let v=0;v<this.overlapElementClone.length;v++)this.collisionChecker[this.overlapElementClone[v].id]={ele:this.overlapElementClone[v],row:e,srcEle:i};const a=r+s,l=parseInt(this.overlapElementClone[o].getAttribute("data-sizeY"),10),h=parseInt(this.overlapElementClone[o].getAttribute("data-col"),10),c=parseInt(this.overlapElementClone[o].getAttribute("data-sizeX"),10);let m,b;if(-1===this.overlapSubElementClone.indexOf(i)&&this.overlapSubElementClone.push(i),-1===this.overlapSubElementClone.indexOf(this.overlapElementClone[o])&&this.overlapSubElementClone.push(this.overlapElementClone[o]),l>1||c>1){const v=this.getCellInstance(this.overlapElementClone[o].id);m=v.col;const w=document.getElementById(v.id);for(let E=v.row;E<r+s;E++){this.isSubValue=!0,this.panelPropertyChange(v,{row:v.row+1}),w.setAttribute("data-row",v.row.toString()),this.setPanelPosition(w,v.row,m),this.updateCollisionChecked(w),this.oldRowCol[w.id]={row:v.row,col:m};const D=this.getCellInstance(w.id);this.panelPropertyChange(D,{col:m,row:v.row});const L=parseInt(w.getAttribute("data-row"),10),N=parseInt(w.getAttribute("data-col"),10),V=parseInt(w.getAttribute("data-sizeX"),10),$=parseInt(w.getAttribute("data-sizeY"),10),ie=[];ie.push(w),ie.push(i),b=this.collisions(L,N,V,$,ie),this.mainElement&&-1!==b.indexOf(this.mainElement)&&b.splice(b.indexOf(this.mainElement),1),this.collisionPanel(b,N,L,w)}this.isSubValue=!1}else{this.addPanelCalled&&(this.addPanelCalled=!1),this.overlapElementClone[o].setAttribute("data-row",a.toString());const v=[];v.push(this.overlapElementClone[o]),v.push(i),b=this.collisions(a,h,c,l,v),this.mainElement&&-1!==b.indexOf(this.mainElement)&&b.splice(b.indexOf(this.mainElement),1),m=parseInt(this.overlapElementClone[o].getAttribute("data-col"),10),this.setPanelPosition(this.overlapElementClone[o],a,m),this.updateCollisionChecked(this.overlapElementClone[o]),this.oldRowCol[this.overlapElementClone[o].id]={row:a,col:m};const w=this.getCellInstance(this.overlapElementClone[o].id);this.panelPropertyChange(w,{col:m,row:a}),this.collisionPanel(b,m,a,this.overlapElementClone[o])}}}collisionPanel(e,t,i,s){const r=this.getCellInstance(s.id);if(this.panelPropertyChange(r,{row:i,col:t}),e.length>0){const o=this;this.overlapElement=[],this.shouldRestrict=!0,e.forEach(l=>{o.overlapElement.push(l)});const a=parseInt(s.getAttribute("data-row"),10);for(let l=0;l<this.overlapElement.length;l++)this.updateRowColumn(a,this.overlapElement,s);this.shouldRestrict=!1}else{if(this.addPanelCalled||this.sortedPanel(),this.overlapSubElementClone.length>0)for(let o=0;o<this.overlapSubElementClone.length;o++){const a=parseInt(this.overlapSubElementClone[o].getAttribute("data-row"),10),l=parseInt(this.overlapSubElementClone[o].getAttribute("data-col"),10),h=parseInt(this.overlapSubElementClone[o].getAttribute("data-sizeX"),10),c=parseInt(this.overlapSubElementClone[o].getAttribute("data-sizeY"),10),m=this.collisions(a,l,h,c,this.overlapSubElementClone);this.mainElement&&-1!==m.indexOf(this.mainElement)&&m.splice(m.indexOf(this.mainElement),1);const b=this;m.forEach(v=>{b.overlapElement.push(v)}),m.length>0&&this.updateRowColumn(a,this.overlapElement,this.overlapSubElementClone[o])}this.overlapSubElementClone=[]}}removeResizeClasses(e){for(let t=0;t<e.length;t++){const s=e[t].querySelectorAll(".e-resize");for(let r=0;r<s.length;r++)te(s[r])}}ensureDrag(){this.checkDragging(this.dragCollection),W(this.element.querySelectorAll("."+xj),[xj]),this.setClasses(this.panelCollection)}setClasses(e){for(let t=0;t<e.length;t++){const i=e[t],s=e[t].querySelector(".e-panel-container");this.allowDragging&&(this.draggableHandle&&i.querySelectorAll(this.draggableHandle)[0]?z([i.querySelectorAll(this.draggableHandle)[0]],[xj]):z([i],[xj])),this.allowResizing&&this.mediaQuery&&!this.checkMediaQuery()&&this.setResizingClass(i,s)}}setResizingClass(e,t){if(this.availableClasses=this.resizableHandles,!e.querySelector(".e-resize"))for(let i=0;i<this.availableClasses.length;i++){const s=this.createElement("span");let r;t.appendChild(s),r="e-east"===this.availableClasses[i]||"e-west"===this.availableClasses[i]||"e-north"===this.availableClasses[i]||"e-south"===this.availableClasses[i]?"e-single":"e-double",z([s],[r,this.availableClasses[i],"e-resize","e-dl-icon"])}}setXYAttributes(e,t){const i={value:{sizeX:t.sizeX.toString(),sizeY:t.sizeY.toString(),minSizeX:t.minSizeX.toString(),minSizeY:t.minSizeY.toString(),maxSizeX:f(t.maxSizeX)?void 0:t.maxSizeX.toString(),maxSizeY:f(t.maxSizeY)?void 0:t.maxSizeY.toString(),row:t.row.toString(),col:t.col.toString()}};this.setAttributes(i,e)}setXYDimensions(e){const t=this.getCellSize()[1],i=this.getCellSize()[0];let s,r;return s=e&&"number"==typeof i&&"number"==typeof e.sizeX&&e.sizeX>1?e.sizeX*i+(e.sizeX-1)*this.cellSpacing[0]:i,r=e&&"number"==typeof t&&e.sizeY>1&&"number"==typeof e.sizeY?e.sizeY*t+(e.sizeY-1)*this.cellSpacing[1]:st(t),[r,s]}getRowColumnDragValues(e){let t=[];const i=parseFloat(e.element.style.top),s=parseFloat(e.element.style.left);return t=[Math.round(i/(this.getCellSize()[1]+this.cellSpacing[1])),Math.round(s/(this.getCellSize()[0]+ +this.cellSpacing[0]))],t}checkForChanges(e,t,i){let s=[];if(this.removeAllCalled)s=[];else for(let r=0;r<this.panels.length;r++)(f(t)||this.panels[r].id!==t[0].id)&&(f(i)||this.panels[r].id!==i[0].id)&&(this.panels[r].row!==this.panelsInitialModel[r].row||this.panels[r].col!==this.panelsInitialModel[r].col)&&s.push(this.panels[r]);if(s.length>0||this.removeAllCalled){const r={changedPanels:s,isInteracted:e,addedPanels:f(t)?[]:t,removedPanels:f(i)?[]:i};this.trigger("change",r)}}enableDraggingContent(e){for(let t=0;t<e.length;t++)this.dragobj=new vn(e[t],{preventDefault:!1,clone:!1,dragArea:this.element,isDragScroll:!0,handle:this.draggableHandle?this.draggableHandle:".e-panel",abort:[".e-resize",".e-drag-restrict"],dragStart:this.onDraggingStart.bind(this),dragStop:r=>{const o=this.getCellInstance(this.mainElement.id);this.allowPushing&&this.collisions(o.row,o.col,o.sizeX,o.sizeY,this.mainElement).length>0?(this.setHolderPosition(r),this.setPanelPosition(this.mainElement,o.row,o.col),this.updatePanelLayout(this.mainElement,o)):this.setPanelPosition(this.mainElement,o.row,o.col),this.mainElement=null;const a=this.getPanelBase(r);this.shadowEle&&te(this.shadowEle),W([this.element],[KK]),W([r.element],[Sj]),this.shadowEle=null,r.element.classList.remove("e-dragging");const l=this.getRowColumnDragValues(r)[0],h=this.getRowColumnDragValues(r)[1],c=this.getCellInstance(r.element.id);this.allowPushing&&0===this.collisions(l,h,c.sizeX,c.sizeY,document.getElementById(a.id)).length?(this.panelPropertyChange(this.getCellInstance(r.element.id),{row:l,col:h}),this.oldRowCol[r.element.id].row=l,this.oldRowCol[r.element.id].col=h,this.setAttributes({value:{col:h.toString(),row:l.toString()}},r.element),this.sortedPanel()):(this.panelPropertyChange(this.getCellInstance(r.element.id),{row:this.oldRowCol[r.element.id].row,col:this.oldRowCol[r.element.id].col}),r.element.setAttribute("data-col",this.getCellInstance(r.element.id).col.toString()),r.element.setAttribute("data-row",this.getCellInstance(r.element.id).row.toString()),this.sortedPanel());const m=this.getCellInstance(r.element.id);this.setPanelPosition(r.element,m.row,m.col),this.updatePanels(),this.updateCloneArrayObject(),this.checkForChanges(!0),this.dragStopEventArgs={event:r.event,element:r.element},this.trigger("dragStop",r),this.resizeEvents(),this.rows=this.maxRow(!0),this.setHeightWidth(),this.updateDragArea()},drag:r=>{this.draggedEventArgs={event:r.event,element:r.element,target:B(r.target,".e-panel")},this.trigger("drag",this.draggedEventArgs),this.onDragStart(r)}}),-1===this.dragCollection.indexOf(this.dragobj)&&this.dragCollection.push(this.dragobj)}updatePanels(){this.moveItemsUpwards(),this.updateOldRowColumn(),this.sortedPanel()}updateDragArea(){this.dragCollection.forEach(e=>{e.setDragArea()})}updateRowsHeight(e,t,i){e+t>=this.rows&&(this.rows=this.rows+i,this.setHeightWidth())}onDraggingStart(e){this.trigger("dragStart",e,o=>{}),this.panelsInitialModel=this.cloneModels(this.panels),this.mainElement=e.element,this.cloneObject=JSON.parse(JSON.stringify(this.cloneObject));const i=this.startRow=parseInt(e.element.getAttribute("data-row"),10);this.startCol=parseInt(e.element.getAttribute("data-col"),10);const s=parseInt(e.element.getAttribute("data-sizeY"),10);this.updateRowsHeight(i,s,s),this.updateDragArea(),this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),this.shadowEle.classList.add("e-holder-transition"),ht(this.shadowEle,{position:"absolute"}),z([this.element],[KK]),z([e.element],[Sj]),this.element.appendChild(this.shadowEle),this.renderReactTemplates(),this.shadowEle=document.querySelector(".e-holder"),this.shadowEle.style.height=this.getCellInstance(e.element.id).sizeY*this.cellSize[1]+"px",this.shadowEle.style.width=this.getCellInstance(e.element.id).sizeX*this.cellSize[0]+"px";const r=this.getCellInstance(e.element.id);this.setPanelPosition(this.shadowEle,r.row,r.col)}cloneModels(e,t){void 0===t&&(t=[]);for(let i=0;i<e.length;i++){t[i]||(t[i]={});for(const s in e[i])t[i][s]=e[i][s]}return t}onDragStart(e){let t,i,s;const r=s=this.getRowColumnDragValues(e)[1],o=this.getRowColumnDragValues(e)[0];if(r<0||o<0)return;this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:r});const a=this.getCellInstance(e.element.id);this.updateRowsHeight(a.row,a.sizeY,1),this.updateDragArea(),this.allowPushing&&(this.setAttributes({value:{col:r.toString(),row:o.toString()}},e.element),this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:r}),t=this.oldRowCol[e.element.id].col,i=this.oldRowCol[e.element.id].row,this.oldRowCol[e.element.id]={row:o,col:r},this.updateOldRowColumn(),(this.startCol!==t||this.startRow!==i)&&(this.setHolderPosition(e),this.startCol!==t&&(this.startRow=i),this.startRow!==i&&(this.startCol=t),this.allowPushing))&&(this.mainElement=e.element,this.checkCollision=this.collisions(a.row,a.col,a.sizeX,a.sizeY,e.element),a.col>=this.checkColumnValue&&(this.checkCollision=[]),this.updatePanelLayout(e.element,a),this.moveItemsUpwards()),!1!==this.allowPushing&&this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:r}),(this.oldRowCol[e.element.id].row!==o||this.oldRowCol[e.element.id].col!==r)&&(this.panelPropertyChange(this.getCellInstance(e.element.id),{row:o,col:r}),this.setAttributes({value:{col:r.toString(),row:o.toString()}},e.element)),this.startCol!==s&&(this.startCol=t,this.moveItemsUpwards()),this.allowPushing||this.setHolderPosition(e),this.removeResizeClasses(this.panelCollection),this.setClasses(this.panelCollection)}getPanelBase(e){let t;for(let i=0;i<this.panelCollection.length;i++)this.panelCollection[i].id===(e.element&&e.element.id||e)&&(t=this.panelCollection[i]);return t}getPanel(e,t,i){i&&!(i instanceof Array)&&(i=[i]);let s=1;for(;e>-1;){let r=1,o=t;for(;o>-1;){const a=this.sortedArray[e];if(a){const l=a[o];if(l&&(!i||-1===i.indexOf(l))&&parseInt(l.getAttribute("data-sizeX"),10)>=r&&parseInt(l.getAttribute("data-sizeY"),10)>=s)return l}++r,--o}--e,++s}return null}setHolderPosition(e){const t=parseInt(e.element.getAttribute("data-sizeY"),10),i=parseInt(e.element.getAttribute("data-col"),10),s=parseInt(e.element.getAttribute("data-row"),10),r=parseInt(e.element.getAttribute("data-sizeX"),10),o=this.getCellSize()[0],a=this.getCellSize()[1],l=0===s?0:s*(a+this.cellSpacing[1]),h=0===i?0:i*(o+this.cellSpacing[0]),c=this.getCellSize()[1],m=this.getCellSize()[0];this.elementRef.top=this.shadowEle.style.top=l+"px",this.elementRef.left=this.shadowEle.style.left=h+"px",this.elementRef.height=this.shadowEle.style.height=t*c+(t-1)*this.cellSpacing[1]+"px",this.elementRef.width=this.shadowEle.style.width=r*m+(r-1)*this.cellSpacing[0]+"px"}getCellInstance(e){let t;for(let i=0;i<this.panels.length;i++)this.panels[i].id===e&&(t=this.panels[i]);return t}addPanel(e){this.panelsSizeY=0,this.maxCol(),e.minSizeX||(e.minSizeX=1),e.minSizeY||(e.minSizeY=1),e.id||(e.id="layout_"+this.panelID.toString(),this.panelID=this.panelID+1);const t=new jh(this,"panels",e,!0);this.panels.push(t),this.panelsInitialModel=this.cloneModels(this.panels),this.setMinMaxValues(t),(this.maxColumnValue<t.col||this.maxColumnValue<t.col+t.sizeX)&&this.panelPropertyChange(t,{col:this.maxColumnValue-t.sizeX});const i=this.renderCell(t,!0,null);if(this.oldRowCol[t.id]={row:t.row,col:t.col},this.cloneObject[t.id]={row:t.row,col:t.col},this.updateOldRowColumn(),this.element.insertAdjacentElement("afterbegin",i),this.addPanelCalled=!0,this.checkMediaQuery()?(this.checkMediaQuerySizing(),this.removeResizeClasses(this.panelCollection)):(this.mainElement=i,this.checkCollision||(this.checkCollision=[]),this.setPanelPosition(i,t.row,t.col),this.updatePanelLayout(i,t)),this.addPanelCalled=!1,!(!this.allowDragging||!this.mediaQuery)&&!this.checkMediaQuery()&&this.enableDraggingContent([document.getElementById(t.id)]),this.setClasses([i]),this.allowFloating&&(this.mainElement=null,this.moveItemsUpwards()),this.updateOldRowColumn(),this.sortedPanel(),this.updateCloneArrayObject(),this.allowResizing)for(let s=0;s<i.querySelectorAll(".e-resize").length;s++){const r="msie"===q.info.name?"mousedown pointerdown":"mousedown";k.add(i.querySelectorAll(".e-resize")[s],r,this.downResizeHandler,this),"msie"!==q.info.name&&k.add(i.querySelectorAll(".e-resize")[s],"touchstart",this.touchDownResizeHandler,this)}this.checkForChanges(!1,[t])}updatePanel(e){if(this.panelsSizeY=0,!e.id)return;const t=this.getCellInstance(e.id);if(!t)return;this.maxCol(),e.col=e.col<1?0:e.col>this.columns?this.columns-1:e.col,f(e.col)&&(e.col=t.col),this.panelPropertyChange(t,e),this.setMinMaxValues(t);const i=document.getElementById(e.id);this.mainElement=i;const s=t.cssClass?t.cssClass.split(" "):null;if(this.panelContent=i.querySelector(".e-panel-container")?i.querySelector(".e-panel-container"):this.createSubElement(s,i.id+"_content",wce),i.appendChild(this.panelContent),t.header){const r=i.querySelector(".e-panel-header")?i.querySelector(".e-panel-header"):this.createSubElement([],i.id+"template","");z([r],[Sce]),r.innerHTML="",this.renderTemplate(t.header,r,this.element.id+"HeaderTemplate"+t.id,!0,"header"),this.panelContent.appendChild(r),this.renderReactTemplates()}else i.querySelector(".e-panel-header")&&te(i.querySelector(".e-panel-header"));if(t.content){const r=t.cssClass?t.cssClass.split(" "):null;this.panelBody=i.querySelector(".e-panel-content")?i.querySelector(".e-panel-content"):this.createSubElement(r,i.id+"_body",Cce),this.panelBody.innerHTML="";const o=this.panelContent.querySelector(".e-panel-header")?window.getComputedStyle(this.panelContent.querySelector(".e-panel-header")).height:"0px";ht(this.panelBody,{height:"calc( 100% - "+o+")"}),this.renderTemplate(t.content,this.panelBody,this.element.id+"ContentTemplate"+t.id,!0,"content"),this.panelContent.appendChild(this.panelBody),this.renderReactTemplates()}else i.querySelector(".e-panel-content")&&te(i.querySelector(".e-panel-content"));this.setXYAttributes(i,t),this.setHeightAndWidth(i,t),this.setPanelPosition(i,t.row,t.col),this.updatePanelLayout(i,t),this.checkMediaQuery()&&this.checkMediaQuerySizing(),this.mainElement=null,this.updatePanels(),this.updateCloneArrayObject()}updateCloneArrayObject(){this.cloneArray=this.sortedArray,this.cloneObject=JSON.parse(JSON.stringify(this.oldRowCol))}serialize(){const e=this.cloneModels(this.panels),t=[];for(let i=0;i<e.length;i++)t.push({id:e[i].id,row:e[i].row,col:e[i].col,sizeX:e[i].sizeX,sizeY:e[i].sizeY,minSizeX:e[i].minSizeX,minSizeY:e[i].minSizeY,maxSizeX:e[i].maxSizeX,maxSizeY:e[i].maxSizeY});return t}removeAll(){this.removeAllCalled=!0;for(let t=0;t<this.panelCollection.length;t++)te(this.panelCollection[t]),this.clearTemplate();this.removeAllPanel(),this.rows=0,this.gridPanelCollection=[],this.setHeightWidth(),this.sortedPanel(),this.sortedArray=[],this.overlapElementClone=[],this.overlapElement=[],this.overlapSubElementClone=[],this.panelCollection=[],this.oldRowCol={},this.cloneObject={};const e=this.cloneModels(this.panels);this.setProperties({panels:[]},!0),this.updatePanels(),this.updateCloneArrayObject(),this.checkForChanges(!1,null,e),this.removeAllCalled=!1}removePanel(e){let t;this.panelsSizeY=0,this.panelsInitialModel=this.cloneModels(this.panels);for(let i=0;i<this.panelCollection.length;i++)this.panelCollection[i].id===e&&(te(this.panelCollection[i]),this.panelCollection.splice(i,1)),this.panels[i].id===e&&(t=this.panels[i],this.panels.splice(i,1),this.panelsInitialModel.splice(i,1),this.updateOldRowColumn(),this.sortedPanel());this.updatePanels(),this.checkMediaQuery()&&(this.isPanelRemoved=!0,this.checkMediaQuerySizing(),this.isPanelRemoved=!1),this.gridPanelCollection.forEach(i=>{i.id===e&&this.gridPanelCollection.splice(this.gridPanelCollection.indexOf(i),1)}),this.updateCloneArrayObject(),this.checkForChanges(!1,null,[t])}movePanel(e,t,i){this.movePanelCalled=!0,this.panelsInitialModel=this.cloneModels(this.panels);const s=this.getCellInstance(e);if(isNaN(t)||null===t||isNaN(i)||null===i||!s)return;i<0?i=0:i>this.columns&&(i=this.columns-s.sizeX),this.panelPropertyChange(s,{row:t,col:i});const r=document.getElementById(e);this.mainElement=r,this.startRow=parseInt(r.getAttribute("data-row"),10),this.startCol=parseInt(r.getAttribute("data-col"),10),this.setAttributes({value:{col:i.toString(),row:t.toString()}},r),this.updateOldRowColumn(),this.setPanelPosition(r,t,i),this.updatePanelLayout(r,s),this.updateRowHeight(),this.updatePanels(),this.updateCloneArrayObject(),this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.movePanelCalled=!1,this.checkForChanges(!1)}setAttributes(e,t){for(let i=0;i<Object.keys(e).length;i++)Object.keys(e)&&(e[Object.keys(e)[i]].col&&t.setAttribute("data-col",e[Object.keys(e)[i]].col.toString()),e[Object.keys(e)[i]].row&&t.setAttribute("data-row",e[Object.keys(e)[i]].row.toString()),e[Object.keys(e)[i]].sizeX&&t.setAttribute("data-sizeX",e[Object.keys(e)[i]].sizeX.toString()),e[Object.keys(e)[i]].sizeY&&t.setAttribute("data-sizeY",e[Object.keys(e)[i]].sizeY.toString()),e[Object.keys(e)[i]].minSizeX&&t.setAttribute("data-minSizeX",e[Object.keys(e)[i]].minSizeX.toString()),e[Object.keys(e)[i]].minSizeY&&t.setAttribute("data-minSizeY",e[Object.keys(e)[i]].minSizeY.toString()),e[Object.keys(e)[i]].maxSizeX&&t.setAttribute("data-maxSizeY",e[Object.keys(e)[i]].maxSizeX.toString()),e[Object.keys(e)[i]].maxSizeY&&t.setAttribute("data-maxSizeY",e[Object.keys(e)[i]].maxSizeY.toString()))}resizePanel(e,t,i){this.panelsInitialModel=this.cloneModels(this.panels);const s=this.getCellInstance(e);this.resizeCalled=!0;const r=document.getElementById(e),o={event:null,element:r,isInteracted:!1};this.trigger("resizeStart",o),this.panelPropertyChange(s,{sizeX:t,sizeY:i}),this.setMinMaxValues(s),this.checkMinMaxValues(s),this.mainElement=r,this.setAttributes({value:{sizeX:s.sizeX.toString(),sizeY:s.sizeY.toString()}},r),this.setHeightAndWidth(r,s),this.updatePanelLayout(r,s),this.updatePanels(),this.updateRowHeight(),this.resizeCalled=!1,this.trigger("resizeStop",o),this.checkForChanges(!1)}destroy(){k.remove(window,"resize",this.refreshListener),W([this.element],["e-dashboardlayout","e-lib","e-responsive","e-control"]),this.element.removeAttribute("style");for(let e=0;e<this.dragCollection.length;e++)this.dragCollection[e].destroy();this.removeAllPanel(),super.destroy(),this.clearTemplate(),this.renderReactTemplates()}removeAllPanel(){for(;this.element.firstElementChild;)te(this.element.firstElementChild),this.clearTemplate()}setEnableRtl(){!0===this.enableRtl?z([this.element],"e-rtl"):W([this.element],"e-rtl")}updateCellSizeAndSpacing(){this.panelResponsiveUpdate(),this.setHeightWidth(),this.getRowColumn();for(let e=0;e<this.element.querySelectorAll(".e-panel").length;e++){const t=this.element.querySelectorAll(".e-panel")[e],i=this.getCellInstance(t.id);this.setHeightAndWidth(t,i),this.setPanelPosition(t,i.row,i.col)}}updatePanelsDynamically(e){this.removeAll(),this.setProperties({panels:e},!0),this.setOldRowCol(),this.table&&this.table.remove(),this.initialize(),this.checkMediaQuery()&&this.refresh(),this.showGridLines&&this.initGridLines()}checkForIDValues(e){!f(e)&&e.length>0?(this.panelID=0,e.forEach(t=>{t.id||(this.panelPropertyChange(t,{id:"layout_"+this.panelID.toString()}),this.panelID=this.panelID+1)})):this.restrictDynamicUpdate=!0}onPropertyChanged(e,t){e.panels&&e.panels.length>0&&e.panels[0]instanceof jh&&this.checkForIDValues(e.panels);for(const i of Object.keys(e))switch(i){case"enableRtl":this.setProperties({enableRtl:e.enableRtl},!0),this.setEnableRtl();break;case"mediaQuery":this.setProperties({mediaQuery:e.mediaQuery},!0),this.checkMediaQuery()&&this.checkMediaQuerySizing();break;case"allowDragging":this.setProperties({allowDragging:e.allowDragging},!0),this.ensureDrag();break;case"allowResizing":if(this.setProperties({allowResizing:e.allowResizing},!0),this.allowResizing)this.setClasses(this.panelCollection),this.resizeEvents();else{const s=this.element.querySelectorAll(".e-panel .e-panel-container .e-resize");for(let r=0;r<s.length;r++){const a=s[r];k.remove(a,"msie"===q.info.name?"mousedown pointerdown":"mousedown",this.downResizeHandler),"msie"!==q.info.name&&k.remove(a,"touchstart",this.touchDownResizeHandler)}this.removeResizeClasses(this.panelCollection)}break;case"cellSpacing":this.setProperties({cellSpacing:e.cellSpacing},!0),this.updateCellSizeAndSpacing(),this.updateGridLines();break;case"draggableHandle":this.setProperties({draggableHandle:e.draggableHandle},!0),this.ensureDrag();break;case"allowFloating":this.setProperties({allowFloating:e.allowFloating},!0),this.moveItemsUpwards();break;case"showGridLines":this.showGridLines?(this.setProperties({showGridLines:e.showGridLines},!0),this.initGridLines()):this.table&&te(this.table);break;case"allowPushing":this.setProperties({allowPushing:e.allowPushing},!0);break;case"panels":!e.columns&&!this.restrictDynamicUpdate&&e.panels[0]&&e.panels.length>0?(this.isRenderComplete=!1,this.updatePanelsDynamically(e.panels),this.isRenderComplete=!0):e.panels[0]&&e.panels.length?this.restrictDynamicUpdate=!1:(this.isRenderComplete=!1,this.updatePanelsDynamically(this.panels),this.isRenderComplete=!0);break;case"columns":this.isRenderComplete=!1,e.panels&&this.updatePanelsDynamically(e.panels),this.setProperties({columns:e.columns},!0),this.panelCollection=[],this.maxColumnValue=this.columns,this.calculateCellSize(),this.panels.forEach(s=>{if(this.setMinMaxValues(s),this.maxColumnValue<s.col||this.maxColumnValue<s.col+s.sizeX){const r=this.maxColumnValue-s.sizeX;this.panelPropertyChange(s,{col:r<0?0:r}),this.setXYAttributes(document.getElementById(s.id),s)}this.setHeightAndWidth(document.getElementById(s.id),s),this.panelCollection.push(document.getElementById(s.id)),this.setPanelPosition(document.getElementById(s.id),s.row,s.col),this.mainElement=document.getElementById(s.id),this.updatePanelLayout(document.getElementById(s.id),s),this.mainElement=null}),this.updatePanels(),this.updateCloneArrayObject(),this.isRenderComplete=!0,this.updateGridLines()}}getPersistData(){return this.addOnPersist(["panels"])}mergePersistPanelData(e){const t=window.localStorage.getItem(this.getModuleName()+this.element.id);if(!f(t)&&""!==t||!f(e)){const i=f(e)?JSON.parse(t):e,s=Object.keys(i);this.isProtectedOnChange=!0;for(const r of s)"object"==typeof U(r,this)&&!f(U(r,this))&&Array.isArray(U(r,this))&&"panels"===r&&this.mergePanels(i[r],this[r]);this.isProtectedOnChange=!1}}mergePanels(e,t){const i=e;for(let s=0;s<i.length;s++){this.checkForIDValues(t);const r=t.filter(o=>o.id===i[s].id)[0];f(r)||(i[s]=Ae(r,i[s],{},!0))}}getModuleName(){return"DashboardLayout"}};wn([_(!0)],Wo.prototype,"allowDragging",void 0),wn([_(!1)],Wo.prototype,"allowResizing",void 0),wn([_(!0)],Wo.prototype,"allowPushing",void 0),wn([_(!0)],Wo.prototype,"enableHtmlSanitizer",void 0),wn([_(!0)],Wo.prototype,"allowFloating",void 0),wn([_(1)],Wo.prototype,"cellAspectRatio",void 0),wn([_([5,5])],Wo.prototype,"cellSpacing",void 0),wn([_(1)],Wo.prototype,"columns",void 0),wn([_(!1)],Wo.prototype,"showGridLines",void 0),wn([_(null)],Wo.prototype,"draggableHandle",void 0),wn([_("en-US")],Wo.prototype,"locale",void 0),wn([_("max-width: 600px")],Wo.prototype,"mediaQuery",void 0),wn([rh([],jh)],Wo.prototype,"panels",void 0),wn([_(["e-south-east"])],Wo.prototype,"resizableHandles",void 0),wn([G()],Wo.prototype,"change",void 0),wn([G()],Wo.prototype,"dragStart",void 0),wn([G()],Wo.prototype,"drag",void 0),wn([G()],Wo.prototype,"dragStop",void 0),wn([G()],Wo.prototype,"resizeStart",void 0),wn([G()],Wo.prototype,"resize",void 0),wn([G()],Wo.prototype,"resizeStop",void 0),wn([G()],Wo.prototype,"created",void 0),wn([G()],Wo.prototype,"destroyed",void 0),Wo=wn([as],Wo);let iy="",ZK="",yC=[],Ej="";function m_(n,e,t,i){const s=e;i=null==i||i;const r={item:null,index:null};if(n&&n.length){const o=n.length;let a=i?n.toLocaleLowerCase():n;a=function pAe(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(a);for(let l=0,h=s;l<h.length;l++){const c=h[l],m=(i?c.textContent.toLocaleLowerCase():c.textContent).replace(/^\s+|\s+$/g,"");if("Equal"===t&&m===a||"StartsWith"===t&&m.substr(0,o)===a||"EndsWith"===t&&m.substr(m.length-a.length)===a||"Contains"===t&&new RegExp(a,"g").test(m))return r.item=c,r.index=l,{item:c,index:l}}return r}return r}function _j(n,e,t,i){if(""!==e){const s=t?"gim":"gm";e=/^[a-zA-Z0-9- ]*$/.test(e)?e:e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),xce(n,new RegExp("StartsWith"===i?"^("+e+")":"EndsWith"===i?"("+e+")$":"("+e+")",s))}}function xce(n,e){for(let t=0;n.childNodes&&t<n.childNodes.length;t++){if(3===n.childNodes[t].nodeType&&""!==n.childNodes[t].textContent.trim()){const i=n.childNodes[t].nodeValue.trim().replace(e,'<span class="e-highlight">$1</span>');n.childNodes[t].nodeValue="",n.innerHTML=n.innerHTML.trim()+i;break}xce(n.childNodes[t],e)}}function mAe(n){const e=n.querySelectorAll(".e-highlight");for(let t=e.length-1;t>=0;t--){const i=e[t].parentNode,s=document.createTextNode(e[t].textContent);i.replaceChild(s,e[t])}}var Fr=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let XK=(()=>{class n extends ii{}return Fr([_()],n.prototype,"text",void 0),Fr([_()],n.prototype,"value",void 0),Fr([_()],n.prototype,"iconCss",void 0),Fr([_()],n.prototype,"groupBy",void 0),Fr([_()],n.prototype,"htmlAttributes",void 0),n})();const pt_root="e-dropdownbase",pt_focus="e-item-focus",pt_li="e-list-item",pt_group="e-list-group-item";let QK=(()=>{let n=class extends Qs{constructor(t,i){super(t,i),this.preventChange=!1,this.isAngular=!1,this.isPreventChange=!1,this.isDynamicDataChange=!1}getPropObject(t,i,s){const r=new Object,o=new Object;r[t]=i[t],o[t]=s[t];const l=new Object;return l.newProperty=r,l.oldProperty=o,l}getValueByText(t,i,s){let r=null;return f(this.listData)||(r=this.checkValueCase(t,!!i,s)),r}checkValueCase(t,i,s,r){let o=null;r&&(o=t);const a=this.listData,l=this.fields,h=this.typeOfData(a).typeof;if("string"===h||"number"===h||"boolean"===h)for(const c of a)f(c)||(s?o=this.checkingAccent(String(c),t,i):i?this.checkIgnoreCase(String(c),t)&&(o=this.getItemValue(String(c),t,i)):this.checkNonIgnoreCase(String(c),t)&&(o=this.getItemValue(String(c),t,i,r)));else if(i)a.filter(c=>{!f(U(l.value,c))&&this.checkIgnoreCase(U(l.text,c).toString(),t)&&(o=U(l.value,c))});else if(r){let c=null;c=o,a.filter(m=>{const b=U(l.value,m);!f(b)&&!f(o)&&b.toString()===c.toString()&&(o=U(l.text,m))})}else a.filter(c=>{this.checkNonIgnoreCase(U(l.text,c),t)&&(o=U(l.value,c))});return o}checkingAccent(t,i,s){const r=Ze.ignoreDiacritics(String(t)),o=Ze.ignoreDiacritics(i.toString());let a=null;return s?this.checkIgnoreCase(r,o)&&(a=this.getItemValue(String(t),i,s)):this.checkNonIgnoreCase(String(t),i)&&(a=this.getItemValue(String(t),i,s)),a}checkIgnoreCase(t,i){return String(t).toLowerCase()===i.toString().toLowerCase()}checkNonIgnoreCase(t,i){return String(t)===i.toString()}getItemValue(t,i,s,r){let o=null;const l=this.typeOfData(this.listData).typeof;return o=r?t.toString():s?"string"===l?String(t):this.getFormattedValue(String(t)):"string"===l?i:this.getFormattedValue(i),o}templateCompiler(t){let i=!1;if(t)try{i=!!bt(t,document).length}catch(s){i=!1}return i}l10nUpdate(t){const i="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){const s=t?this.actionFailureTemplate:this.noRecordsTemplate;let r;const o=t?this.actionFailureTemplateId:this.noRecordsTemplateId;i.innerHTML="",r=this.templateCompiler(s)?ji(X(s,document).innerHTML.trim()):ji(s);const h=r({},this,t?"actionFailureTemplate":"noRecordsTemplate",o,this.isStringTemplate,null,i);if(h&&h.length>0)for(let c=0;c<h.length;c++)i.appendChild(h[c]);this.renderReactTemplates()}else{const s={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},r=new jo(this.getLocaleName(),{},this.locale);this.l10n=""!==r.getConstant("actionFailureTemplate")?r:new jo("listbox"===this.getModuleName()?"listbox":"dropdowns",s,this.locale);const o=this.l10n.getConstant(t?"actionFailureTemplate":"noRecordsTemplate");if("listbox"===this.getModuleName()){const a=this.createElement("li");a.textContent=o,i.appendChild(a),a.classList.add("e-list-nrt")}else i.innerHTML=o}}getLocaleName(){return"drop-down-base"}getTextByValue(t){return this.checkValueCase(t,!1,!1,!0)}getFormattedValue(t){if(this.listData&&this.listData.length){const i=this.typeOfData(this.listData);if("number"==typeof U(this.fields.value?this.fields.value:"value",i.item)||"number"===i.typeof)return parseFloat(t);if("boolean"==typeof U(this.fields.value?this.fields.value:"value",i.item)||"boolean"===i.typeof)return"true"===t||""+t=="true"}return t}setEnableRtl(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?z(this.enableRtlElements,"e-rtl"):W(this.enableRtlElements,"e-rtl")}initialize(){if(this.bindEvent=!0,this.actionFailureTemplateId=`${this.element.id}ActionFailureTemplate`,"UL"===this.element.tagName){const t=Js.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(t,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!f(this.dataSource))?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query)}getPersistData(){return this.addOnPersist([])}setEnabled(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")}updateDataAttribute(t){const i=["class","style","id","type"],s={};for(let r=0;r<this.element.attributes.length;r++)-1===i.indexOf(this.element.attributes[r].name)&&("dropdownlist"!==this.getModuleName()||"readonly"!==this.element.attributes[r].name)&&(s[this.element.attributes[r].name]=this.element.getAttribute(this.element.attributes[r].name));Ae(s,t,s),this.setProperties({htmlAttributes:s},!0)}renderItemsBySelect(){const t=this.element,i={value:"value",text:"text"},s=[],r=t.querySelectorAll("select>optgroup"),o=t.querySelectorAll("select>option");if(this.getJSONfromOption(s,o,i),r.length){for(let a=0;a<r.length;a++){const l=r[a],h={};h[i.text]=l.label,h.isHeader=!0;const c=l.querySelectorAll("option");s.push(h),this.getJSONfromOption(s,c,i)}t.querySelectorAll("select>option")}this.updateFields(i.text,i.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(s,i)}updateFields(t,i,s,r,o){const a={fields:{text:t,value:i,groupBy:f(s)?this.fields&&this.fields.groupBy:s,htmlAttributes:f(r)?this.fields&&this.fields.htmlAttributes:r,iconCss:f(o)?this.fields&&this.fields.iconCss:o}};this.setProperties(a,!0)}getJSONfromOption(t,i,s){for(const r of i){const o={};o[s.text]=r.innerText,o[s.value]=f(r.getAttribute(s.value))?r.innerText:r.getAttribute(s.value),t.push(o)}}preRender(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=`${this.element.id}ItemTemplate`,this.valueTemplateId=`${this.element.id}ValueTemplate`,this.groupTemplateId=`${this.element.id}GroupTemplate`,this.headerTemplateId=`${this.element.id}HeaderTemplate`,this.footerTemplateId=`${this.element.id}FooterTemplate`,this.noRecordsTemplateId=`${this.element.id}NoRecordsTemplate`}setListData(t,i,s){let r;i=i||this.fields,this.isActive=!0;const o={cancel:!1,data:t,query:s};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionBegin",o,a=>{if(!a.cancel)if(this.showSpinner(),t instanceof ut){if(this.isRequested=!0,this.isDataFetched)return void this.emptyDataRequest(i);a.data.executeQuery(this.getQuery(a.query)).then(l=>{this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionComplete",l,h=>{if(!h.cancel){const c=h.result;0===c.length&&(this.isDataFetched=!0),r=this.renderItems(c,i),this.onActionComplete(r,c,h),this.groupTemplate&&this.renderGroupTemplate(r),this.isRequested=!1,this.bindChildItems(c,r,i,h)}})}).catch(l=>{this.isRequested=!1,this.onActionFailure(l),this.hideSpinner()})}else{const l=new ut(a.data),c={cancel:!1,result:this.getQuery(a.query).executeLocal(l)};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionComplete",c,m=>{m.cancel||(r=this.renderItems(m.result,i),this.onActionComplete(r,m.result),this.groupTemplate&&this.renderGroupTemplate(r),this.bindChildItems(m.result,r,i),setTimeout(()=>{"multiselect"===this.getModuleName()&&null!=this.itemTemplate&&r.childElementCount>0&&(r.children[0].childElementCount>0||this.fields.groupBy&&r.children[1]&&r.children[1].childElementCount>0)&&this.updateDataList()}))})}})}bindChildItems(t,i,s,r){t.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(()=>{mi(this.remainingItems(this.sortedData,s),i),this.liCollections=this.list.querySelectorAll("."+pt_li),this.updateListValues(),this.raiseDataBound(t,r)},0):this.raiseDataBound(t,r)}updateListValues(){}findListElement(t,i,s,r){let o=null;if(t){const a=[].slice.call(t.querySelectorAll(i));for(let l=0;l<a.length;l++)if(a[l].getAttribute(s)===r+""){o=a[l];break}}return o}raiseDataBound(t,i){this.hideSpinner(),this.trigger("dataBound",{items:t,e:i})}remainingItems(t,i){const s=new ut(t).executeLocal((new Ut).skip(100));if(this.itemTemplate){const o=this.templateListItem(s,i);return[].slice.call(o.childNodes)}const r=this.typeOfData(s).typeof;return"string"===r||"number"===r||"boolean"===r?Js.createListItemFromArray(this.createElement,s,!0,this.listOption(s,i),this):Js.createListItemFromJson(this.createElement,s,this.listOption(s,i),1,!0,this)}emptyDataRequest(t){const i=[];this.onActionComplete(this.renderItems(i,t),i),this.isRequested=!1,this.hideSpinner()}showSpinner(){}hideSpinner(){}onActionFailure(t){this.liCollections=[],this.trigger("actionFailure",t),this.l10nUpdate(!0),z([this.list],"e-nodata")}onActionComplete(t,i,s){if(this.listData=i,this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.fixedHeaderElement=f(this.fixedHeaderElement)?this.fixedHeaderElement:null,"multiselect"===this.getModuleName()&&this.properties.allowCustomValue&&this.fields.groupBy)for(let r=0;r<t.childElementCount;r++)t.children[r].classList.contains("e-list-group-item")&&(f(t.children[r].innerHTML)||""===t.children[r].innerHTML)&&z([t.children[r]],"e-hide-group-header");f(this.list)||(this.list.innerHTML="",this.list.appendChild(t),this.liCollections=this.list.querySelectorAll("."+pt_li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,i,this.bindEvent))}postRender(t,i,s){const r=t.querySelector("."+pt_li),o=t.querySelector(".e-active");r&&!o&&r.classList.add(pt_focus),i.length<=0?(this.l10nUpdate(),z([t],"e-nodata")):t.classList.remove("e-nodata")}getQuery(t){return t||(this.query?this.query:new Ut)}renderGroupTemplate(t){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+pt_group)){const i=this.dataSource,s={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},r=t.querySelectorAll("."+pt_group);if(this.templateCompiler(this.groupTemplate)){const a=X(this.groupTemplate,document).innerHTML.trim(),l=Js.renderGroupTemplate(a,i,this.fields.properties,r,s,this);if(this.isGroupChecking)for(let h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}else{const a=Js.renderGroupTemplate(this.groupTemplate,i,this.fields.properties,r,s,this);if(this.isGroupChecking)for(let l=0;l<a.length;l++)this.notify("addItem",{module:"CheckBoxSelection",item:a[l]})}this.renderReactTemplates()}}createListItems(t,i){t&&i.groupBy||this.element.querySelector("optgroup")?(i.groupBy&&("None"!==this.sortOrder&&(t=this.getSortedDataSource(t)),t=Js.groupDataSource(t,i.properties,this.sortOrder)),z([this.list],"e-dd-group")):t=this.getSortedDataSource(t);const s=this.listOption(t,i),r=t.length>100?new ut(t).executeLocal((new Ut).take(100)):t;return this.sortedData=t,Js.createList(this.createElement,"autocomplete"===this.getModuleName()?r:t,s,!0,this)}listOption(t,i){const s=!f(i.iconCss),r=f(i.properties)?i:i.properties;return Ae({},null!==i.text||null!==i.value?{fields:r,showIcon:s,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},i,!0)}setFloatingHeader(t){f(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(pt_group)||(this.fixedHeaderElement.style.display="none"),Qr([this.fixedHeaderElement],this.list),this.setFixedHeader()),!f(this.fixedHeaderElement)&&"0"===this.fixedHeaderElement.style.zIndex&&this.setFixedHeader(),this.scrollStop(t)}scrollStop(t){const i=f(t)?this.list:t.target,s=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10),r=Math.round(i.scrollTop/s),o=this.list.querySelectorAll("li:not(.e-hide-listitem)");for(let a=r;a>-1;a--){if(!f(o[a])&&o[a].classList.contains(pt_group)){this.fixedHeaderElement.innerHTML=o[a].innerHTML,this.fixedHeaderElement.style.top=i.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}}getValidLi(){return this.liCollections[0]}renderItems(t,i){let s;if(this.itemTemplate&&t){let r=t;r&&i.groupBy?("None"!==this.sortOrder&&(r=this.getSortedDataSource(r)),r=Js.groupDataSource(r,i.properties,this.sortOrder)):r=this.getSortedDataSource(r),this.sortedData=r;const o=r.length>100?new ut(r).executeLocal((new Ut).take(100)):r;s=this.templateListItem("autocomplete"===this.getModuleName()?o:r,i)}else s=this.createListItems(t,i);return s}templateListItem(t,i){const s=this.listOption(t,i);if(s.templateID=this.itemTemplateId,s.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){const o=X(this.itemTemplate,document).innerHTML.trim();return Js.renderContentTemplate(this.createElement,o,t,i.properties,s,this)}return Js.renderContentTemplate(this.createElement,this.itemTemplate,t,i.properties,s,this)}typeOfData(t){for(let s=0;!f(t)&&s<t.length;s++)if(!f(t[s])&&!f("string"==typeof t[s]||"number"==typeof t[s]||"boolean"==typeof t[s]?t[s]:U(this.fields.value?this.fields.value:"value",t[s])))return{typeof:typeof t[s],item:t[s]};return{typeof:null,item:null}}setFixedHeader(){this.list.parentElement.style.display="block";let t=0;this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(t))&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10));const i=this.getValidLi().offsetWidth-t;this.fixedHeaderElement.style.width=i.toString()+"px",ht(this.fixedHeaderElement,{zIndex:10});const s=this.ulElement.querySelector("."+pt_group+":not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=s.innerHTML}getSortedDataSource(t){if(t&&"None"!==this.sortOrder){let i=this.fields.text?this.fields.text:"text";("string"===this.typeOfData(t).typeof||"number"===this.typeOfData(t).typeof||"boolean"===this.typeOfData(t).typeof)&&(i=""),t=Js.getDataSource(t,Js.addSorting(this.sortOrder,i))}return t}getIndexByValue(t){let i;const s=this.getItems();for(let r=0;r<s.length;r++)if(!f(t)&&s[r].getAttribute("data-value")===t.toString()){i=r;break}return i}dispatchEvent(t,i){const s=document.createEvent("HTMLEvents");s.initEvent(i,!1,!0),t.dispatchEvent(s)}setFields(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):!this.fields.value&&!this.fields.text&&this.updateFields("text","text")}resetList(t,i,s){this.list&&(("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(t instanceof Array?t.length>0:!f(t))&&this.selectData&&this.selectData.length>0&&(t=this.selectData),t="combobox"===this.getModuleName()&&this.selectData&&t instanceof Array&&t.length<this.selectData.length?this.selectData:t,this.setListData(t,i,s))}updateSelectElementData(t){t&&f(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)}updateSelection(){}renderList(){this.render()}updateDataSource(t){this.resetList(this.dataSource)}setUpdateInitial(t,i){this.isDataFetched=!1;const s={};for(let r=0;t.length>r;r++)i[t[r]]&&"fields"===t[r]?(this.setFields(),s[t[r]]=i[t[r]]):i[t[r]]&&(s[t[r]]=i[t[r]]);Object.keys(s).length>0&&(-1===Object.keys(s).indexOf("dataSource")&&(s.dataSource=this.dataSource),this.updateDataSource(s))}onPropertyChanged(t,i){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],t),this.setUpdateInitial(["sortOrder","itemTemplate"],t);for(const s of Object.keys(t))switch(s){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){const r=this.ulElement.querySelector("."+pt_group);this.fixedHeaderElement.innerHTML=r.innerHTML}break;case"locale":this.list&&!f(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0),this.setZIndex()}}render(t){this.list=this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}}),this.list.classList.add(pt_root),this.setFields(),this.rippleFun=uc(this.list,{duration:300,selector:"."+pt_li});const s=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!f(s))&&!this.isGroupChecking&&k.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),W([this.element],pt_root),this.element.style.display="none";const r=this.createElement("div");this.element.parentElement.insertBefore(r,this.element),r.appendChild(this.element),r.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),t||this.initialize()}getModuleName(){return"dropdownbase"}getItems(){return this.ulElement.querySelectorAll("."+pt_li)}addItem(t,i){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&f(i)){let h=[].slice.call(this.listData);h.push(t),h=this.getSortedDataSource(h),this.fields.groupBy&&(h=Js.groupDataSource(h,this.fields.properties,this.sortOrder)),i=h.indexOf(t)}const s=this.getItems().length,r=this.list.querySelector(".e-active");let o;t=t instanceof Array?t:[t],o=f(i)||i<0||i>s-1?s:i;const a=this.fields;t&&a.groupBy&&(t=Js.groupDataSource(t,a.properties));const l=[];for(let h=0;h<t.length;h++){const c=t[h],m=c.isHeader,b=this.createElement("li",{className:m?pt_group:pt_li,id:"option-add-"+h}),v=c instanceof Object?U(a.text,c):c;if(m&&(b.innerText=v),this.itemTemplate&&!m){const D=ji(this.templateCompiler(this.itemTemplate)?X(this.itemTemplate,document).innerHTML.trim():this.itemTemplate)(c,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,b);D&&mi(D,b)}else m||b.appendChild(document.createTextNode(v));b.setAttribute("data-value",c instanceof Object?U(a.value,c):c),b.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:b}),l.push(b),this.listData.push(c),"None"===this.sortOrder&&f(i)&&0===o&&(o=null),this.updateActionCompleteData(b,c,o),this.trigger("beforeItemRender",{element:b,item:c})}if(0===s&&f(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove("e-nodata"),this.list.appendChild(this.ulElement),this.liCollections=l,mi(l,this.ulElement),this.updateAddItemList(this.list,s);else{"listbox"===this.getModuleName()&&0===s&&(this.ulElement.innerHTML="");const h=[];for(let c=0;c<t.length;c++){const m=this.ulElement.querySelectorAll(".e-list-group-item");for(let v=0;v<m.length;v++)h[v]=m[v].innerText;if(h.indexOf(l[c].innerText)>-1&&a.groupBy){for(let v=0;v<m.length;v++)if(h[v]===l[c].innerText){this.ulElement.insertBefore(l[c+1],"None"===this.sortOrder?m[v+1]:this.ulElement.childNodes[i]),c+=1;break}}else this.liCollections[o]?this.liCollections[o].parentNode.insertBefore(l[c],this.liCollections[o]):this.ulElement.appendChild(l[c]);const b=[].slice.call(this.liCollections);b.splice(o,0,l[c]),this.liCollections=b,o+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(r||0===i)&&this.updateSelection()}validationAttribute(t,i){const s=t.getAttribute("name")?t.getAttribute("name"):t.getAttribute("id");i.setAttribute("name",s),t.removeAttribute("name");const r=["required","aria-required","form"];for(let o=0;o<r.length;o++){if(!t.getAttribute(r[o]))continue;const a=t.getAttribute(r[o]);i.setAttribute(r[o],a),t.removeAttribute(r[o])}}setZIndex(){}updateActionCompleteData(t,i,s){}updateAddItemList(t,i){}updateDataList(){}getDataByValue(t){if(!f(this.listData)){const i=this.typeOfData(this.listData).typeof;if("string"===i||"number"===i||"boolean"===i){for(const s of this.listData)if(!f(s)&&s===t)return s}else for(const s of this.listData)if(!f(s)&&U(this.fields.value?this.fields.value:"value",s)===t)return s}return null}destroy(){document.body.contains(this.list)&&(k.remove(this.list,"scroll",this.setFloatingHeader),f(this.rippleFun)||this.rippleFun(),te(this.list)),super.destroy()}};return Fr([di({text:null,value:null,iconCss:null,groupBy:null},XK)],n.prototype,"fields",void 0),Fr([_(!1)],n.prototype,"enablePersistence",void 0),Fr([_(null)],n.prototype,"itemTemplate",void 0),Fr([_(null)],n.prototype,"groupTemplate",void 0),Fr([_("No records found")],n.prototype,"noRecordsTemplate",void 0),Fr([_("Request failed")],n.prototype,"actionFailureTemplate",void 0),Fr([_("None")],n.prototype,"sortOrder",void 0),Fr([_(!0)],n.prototype,"enabled",void 0),Fr([_([])],n.prototype,"dataSource",void 0),Fr([_(null)],n.prototype,"query",void 0),Fr([_("StartsWith")],n.prototype,"filterType",void 0),Fr([_(!0)],n.prototype,"ignoreCase",void 0),Fr([_(1e3)],n.prototype,"zIndex",void 0),Fr([_(!1)],n.prototype,"ignoreAccent",void 0),Fr([_()],n.prototype,"locale",void 0),Fr([G()],n.prototype,"actionBegin",void 0),Fr([G()],n.prototype,"actionComplete",void 0),Fr([G()],n.prototype,"actionFailure",void 0),Fr([G()],n.prototype,"select",void 0),Fr([G()],n.prototype,"dataBound",void 0),Fr([G()],n.prototype,"created",void 0),Fr([G()],n.prototype,"destroyed",void 0),n=Fr([as],n),n})();var Co=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const xi={root:"e-dropdownlist",hover:"e-hover",selected:"e-active",rtl:"e-rtl",li:pt_li,disable:"e-disabled",base:pt_root,focus:pt_focus,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},EAe={container:null,buttons:[]};let _r=class extends QK{constructor(e,t){super(e,t),this.isListSearched=!1,this.preventChange=!1,this.isAngular=!1}preRender(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),super.preRender(),this.activeIndex=this.index,this.queryString=""}initializeData(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}}setZIndex(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})}renderList(e){super.render(e),this.unWireListEvents(),this.wireListEvents()}floatLabelChange(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){const e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?Bi(e,["e-label-top"],["e-label-bottom"]):Bi(e,["e-label-bottom"],["e-label-top"])}}resetHandler(e){e.preventDefault(),this.clearAll(e)}resetFocusElement(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!f(this.ulElement)){const e=this.ulElement.querySelector("."+xi.li);e&&e.classList.add(xi.focus)}}clearAll(e,t){(f(t)||!f(t)&&(f(t.dataSource)||!(t.dataSource instanceof ut)&&0===t.dataSource.length))&&(this.isActive=!0,this.resetSelection(t));const i=this.getItemData();this.previousValue!==i.value&&this.onChangeEvent(e)}resetSelection(e){this.list&&(f(e)||!f(e.dataSource)&&(e.dataSource instanceof ut||0!==e.dataSource.length)?(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!f(this.actionCompleteData.ulElement)&&!f(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource))),this.hiddenElement.innerHTML="",this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(te(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()}setHTMLAttributes(){if(Object.keys(this.htmlAttributes).length)for(const e of Object.keys(this.htmlAttributes))if("class"===e){const t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&z([this.inputWrapper.container],t.split(" "))}else if("disabled"===e&&"disabled"===this.htmlAttributes[e])this.enabled=!1,this.setEnable();else if("readonly"!==e||f(this.htmlAttributes[e]))if("style"===e)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[e]);else{const t=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],i=["name","required"];("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&t.push("tabindex"),i.indexOf(e)>-1||0===e.indexOf("data")?this.hiddenElement.setAttribute(e,this.htmlAttributes[e]):t.indexOf(e)>-1?"placeholder"===e?Bt.setPlaceholder(this.htmlAttributes[e],this.inputElement):this.inputElement.setAttribute(e,this.htmlAttributes[e]):this.inputWrapper.container.setAttribute(e,this.htmlAttributes[e])}else this.readonly=!0,this.dataBind();("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&this.inputWrapper.container.removeAttribute("tabindex")}getAriaAttributes(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-live":"polite","aria-labelledby":this.hiddenElement.id}}setEnableRtl(){Bt.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())}setEnable(){Bt.setEnabled(this.enabled,this.inputElement),this.enabled?(W([this.inputWrapper.container],xi.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),z([this.inputWrapper.container],xi.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)}getPersistData(){return this.addOnPersist(["value"])}getLocaleName(){return"drop-down-list"}preventTabIndex(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)}targetElement(){return this.inputWrapper.container}getNgDirective(){return"EJS-DROPDOWNLIST"}getElementByText(e){return this.getElementByValue(this.getValueByText(e))}getElementByValue(e){let t;const i=this.getItems();for(const s of i)if(this.getFormattedValue(s.getAttribute("data-value"))===e){t=s;break}return t}initValue(){this.renderList(),this.dataSource instanceof ut?this.initRemoteRender=!0:this.updateValues()}updateValues(){if(f(this.value))if(this.text&&f(this.value)){const e=this.getElementByText(this.text);if(f(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),Bt.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}onBlurHandler(e){if(!this.enabled)return;const t=e.relatedTarget,i=e.target,s=this.isPreventBlur;this.isPreventBlur=!1,!s||this.isDocumentClick||!this.isPopupOpen||f(i)&&(this.isFilterLayout()||!f(t))?this.isDocumentClick||!f(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(xi.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&t!==this.inputElement&&(document.activeElement!==t||document.activeElement===t&&i.classList.contains(xi.inputFocus))||f(t)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),this.isRequested&&!this.isPopupOpen&&!this.isPreventBlur&&(this.isActive=!1,this.beforePopupOpen=!1)):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()}focusOutAction(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut()}onFocusOut(){!this.enabled||(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&z([this.inputWrapper.clearButton],xi.clearIconHide),this.trigger("blur"))}onFocus(e){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!e,event:e})),this.updateIconState()}resetValueHandler(e){const t=B(this.inputElement,"form");if(t&&e.target===t){const i=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=i}}wireEvent(){k.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),k.add(this.inputWrapper.container,"focus",this.focusIn,this),k.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()}bindCommonEvent(){k.add(this.targetElement(),"blur",this.onBlurHandler,this);const e=B(this.inputElement,"form");e&&k.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new Gn(this.targetElement(),q.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()}bindClearEvent(){this.showClearButton&&k.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)}unBindCommonEvent(){this.targetElement()&&k.remove(this.targetElement(),"blur",this.onBlurHandler);const e=this.inputElement&&B(this.inputElement,"form");e&&k.remove(e,"reset",this.resetValueHandler),q.isDevice||this.keyboardModule.destroy(),this.showClearButton&&k.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)}updateIconState(){this.showClearButton&&(""===this.inputElement.value||this.readonly?z([this.inputWrapper.clearButton],xi.clearIconHide):W([this.inputWrapper.clearButton],xi.clearIconHide))}wireListEvents(){k.add(this.list,"click",this.onMouseClick,this),k.add(this.list,"mouseover",this.onMouseOver,this),k.add(this.list,"mouseout",this.onMouseLeave,this)}onSearch(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))}onServerIncrementalSearch(e){!this.isRequested&&!f(this.list)&&!f(this.list.querySelector("li"))&&this.enabled&&!this.readonly&&this.incrementalSearch(e)}onMouseClick(e){const i=B(e.target,"."+pt_li);!this.isValidLI(i)||(this.setSelection(i,e),q.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100))}onMouseOver(e){const t=B(e.target,"."+pt_li);this.setHover(t)}setHover(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains("e-hover")&&(this.removeHover(),z([e],"e-hover"))}onMouseLeave(){this.removeHover()}removeHover(){if(this.list){const e=this.list.querySelectorAll(".e-hover");e&&e.length&&W(e,"e-hover")}}isValidLI(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")}incrementalSearch(e){if(this.liCollections.length>0){const t=function uAe(n,e,t,i,s){let r;if(iy+=String.fromCharCode(n),setTimeout(()=>{iy=""},1e3),iy=i?iy.toLowerCase():iy,Ej===s&&ZK===iy){for(let o=0;o<yC.length;o++)if(yC[o].classList.contains("e-active")){r=o;break}return r+=1,yC[r]?yC[r]:yC[0]}{const o=e,a=iy.length;let l,h,c=t=t?t+1:0;yC=[];do{c===o.length&&(c=-1),r=-1===c?0:c,h=o[r],l=i?h.innerText.toLowerCase():h.innerText,l.substr(0,a)===iy&&yC.push(o[r]),c++}while(c!==t);return ZK=iy,Ej=s,yC[0]}}(e.charCode,this.liCollections,this.activeIndex,!0,this.element.id);f(t)||(this.setSelection(t,e),this.setScrollPosition())}}hideSpinner(){f(this.spinnerElement)||(Rl(this.spinnerElement),W([this.spinnerElement],xi.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)}showSpinner(){f(this.spinnerElement)&&(this.spinnerElement=q.isDevice&&!f(this.filterInputObj)&&this.filterInputObj.buttons[1]||!f(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],z([this.spinnerElement],xi.disableIcon),vp({target:this.spinnerElement,width:q.isDevice?"16px":"14px"},this.createElement),xa(this.spinnerElement))}keyActionHandler(e){if(!this.enabled)return;const t="pageUp"===e.action||"pageDown"===e.action,i="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;const r="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||t||i)||this.isPopupOpen)&&!this.readonly){const o="tab"===e.action||"close"===e.action;if(void 0===this.list&&!this.isRequested&&!o&&"escape"!==e.action&&(this.searchKeyEvent=e,this.renderList()),f(this.list)||!f(this.liCollections)&&r&&0===this.liCollections.length||this.isRequested)return;switch((o&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!r&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}updateUpDownAction(e){const t=this.list.querySelector("."+xi.focus);if(this.isSelectFocusItem(t))this.setSelection(t,e);else if(!f(this.liCollections)){let i="down"===e.action?this.activeIndex+1:this.activeIndex-1,s=0;"autocomplete"===this.getModuleName()&&(s="down"===e.action&&f(this.activeIndex)?0:this.liCollections.length-1,i=i<0?this.liCollections.length-1:i===this.liCollections.length?0:i);const r=f(this.activeIndex)?this.liCollections[s]:this.liCollections[i];f(r)||this.setSelection(r,e)}e.preventDefault()}updateHomeEndAction(e){if("dropdownlist"===this.getModuleName()){let t=0;if(t="home"===e.action?0:this.getItems().length-1,e.preventDefault(),this.activeIndex===t)return;this.setSelection(this.liCollections[t],e)}}selectCurrentValueOnTab(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}mobileKeyActionHandler(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0===this.list&&!this.isRequested&&(this.searchKeyEvent=e,this.renderList()),f(this.list)||!f(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}}selectCurrentItem(e){if(this.isPopupOpen){const t=this.list.querySelector("."+xi.focus);t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(),this.focusDropDown(e)}else this.showPopup()}isSelectFocusItem(e){return!f(e)}getPageCount(){const e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))}pageUpSelection(e,t){this.setSelection(e>=0?this.liCollections[e+1]:this.liCollections[0],t)}pageDownSelection(e,t){const i=this.getItems();this.setSelection(e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1],t)}unWireEvent(){k.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),k.remove(this.inputWrapper.container,"keypress",this.onSearch),k.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()}unWireListEvents(){k.remove(this.list,"click",this.onMouseClick),k.remove(this.list,"mouseover",this.onMouseOver),k.remove(this.list,"mouseout",this.onMouseLeave)}checkSelector(e){return'[id="'+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'}onDocumentClick(e){const t=e.target;if(!f(this.popupObj)&&B(t,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(e.target))t!==this.inputElement&&(!this.allowFiltering||t!==this.filterInput)&&("combobox"!==this.getModuleName()||this.allowFiltering||!q.isDevice||t!==this.inputWrapper.buttons[0])&&(this.isPreventBlur=(q.isIE||"edge"===q.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(xi.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;const i=this.isRequested;this.isInteracted=!1,this.hidePopup(e),i||(this.onFocusOut(),this.inputWrapper.container.classList.remove(xi.inputFocus))}}activeStateChange(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(xi.inputFocus))}focusDropDown(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)}dropDownClick(e){if(3===e.which||2===e.button||this.targetElement().classList.contains(xi.disable)||this.inputWrapper.clearButton===e.target)return;const t=e.target;if(t!==this.inputElement&&!(this.allowFiltering&&t===this.filterInput)&&"combobox"!==this.getModuleName()&&e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup());const i=this,s=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(()=>{i.cloneElements(),i.isSecondClick=!0},s)}}cloneElements(){if(this.list){let e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}}updateSelectedItem(e,t,i,s){this.removeSelection(),e.classList.add("e-active"),this.removeHover();const r=this.getFormattedValue(e.getAttribute("data-value")),o=this.getDataByValue(r);if(this.initial||i||f(t))this.selectEventCallback(e,t,i,o,r),s&&this.setSelectOptions(e,t);else{const a=this.detachChanges(o);this.isSelected=!0,this.trigger("select",{e:t,item:e,itemData:a,isInteracted:!!t,cancel:!1},h=>{h.cancel?e.classList.remove("e-active"):(this.selectEventCallback(e,t,i,o,r),s&&this.setSelectOptions(e,t))})}}selectEventCallback(e,t,i,s,r){this.previousItemData=f(this.itemData)?null:this.itemData,this.item=e,this.itemData=s;const o=this.list.querySelector("."+pt_focus);o&&W([o],pt_focus),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(r)}activeItem(e){this.isValidLI(e)&&!e.classList.contains("e-active")&&(this.removeSelection(),e.classList.add("e-active"),this.removeHover(),e.setAttribute("aria-selected","true"))}setValue(e){const t=this.getItemData();Bt.setValue(null===t.value?null:t.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():!f(this.valueTempElement)&&this.inputElement.previousSibling===this.valueTempElement&&(te(this.valueTempElement),this.inputElement.style.display="block");const i=xi.clearIcon,r=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+i);return this.isFiltering()&&r&&r.style.removeProperty("visibility"),this.previousValue===t.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)}setSelection(e,t){this.isValidLI(e)&&(!e.classList.contains("e-active")||this.isPopupOpen&&this.isSelected&&e.classList.contains("e-active"))?this.updateSelectedItem(e,t,!1,!0):this.setSelectOptions(e,t)}setSelectOptions(e,t){this.list&&this.removeHover(),this.previousSelectedLI=f(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,!this.setValue(t)&&(this.isPopupOpen&&(Rt(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&this.filterInput&&Rt(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!f(e)||this.isPopupOpen&&!f(t)&&("keydown"!==t.type||"keydown"===t.type&&"enter"===t.action))&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.isPopupOpen&&!f(this.selectedLI)&&null!==this.itemData&&(!t||"click"!==t.type)&&this.setScrollPosition(t),"mozilla"!==q.info.name&&(Rt(this.inputElement,{"aria-label":this.inputElement.value}),Rt(this.targetElement(),{"aria-describedby":this.inputElement.id}),this.targetElement().removeAttribute("aria-live")))}dropdownCompiler(e){let t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(i){t=!1}return t}setValueTemplate(){let e;this.isReact&&this.clearTemplate(["valueTemplate"]),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:xi.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.valueTempElement.innerHTML="",e=this.dropdownCompiler(this.valueTemplate)?ji(document.querySelector(this.valueTemplate).innerHTML.trim()):ji(this.valueTemplate);const i=e(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);if(i&&i.length>0)for(let s=0;s<i.length;s++)this.valueTempElement.appendChild(i[s]);this.renderReactTemplates()}removeSelection(){if(this.list){const e=this.list.querySelectorAll(".e-active");e.length&&(W(e,"e-active"),e[0].removeAttribute("aria-selected"))}}getItemData(){const e=this.fields;let i,s,t=null;return t=this.itemData,f(t)||(i=U(e.value,t),s=U(e.text,t)),{value:f(t)||li(i)?t:i,text:f(t)||li(i)?t:s}}onChangeEvent(e){const t=this.getItemData();this.setProperties({index:this.isSelectCustom?null:this.activeIndex,text:t.text,value:t.value},!0),this.detachChangeEvent(e)}detachChanges(e){let t;return t="string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e,t}detachChangeEvent(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=f(this.text)?"":this.text,!this.initial){const t=this.detachChanges(this.itemData);let i;i="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();const s={e,item:this.item,itemData:t,previousItem:this.previousSelectedLI,previousItemData:i,isInteracted:!!e,value:this.value,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",s)}(f(this.value)||""===this.value)&&"Always"!==this.floatLabelType&&W([this.inputWrapper.container],"e-valid-input")}setHiddenValue(){if(f(this.value))this.hiddenElement.innerHTML="";else if(this.hiddenElement.querySelector("option")){const e=this.hiddenElement.querySelector("option");e.textContent=this.text,e.setAttribute("value",this.value.toString())}else this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",this.hiddenElement.querySelector("option").setAttribute("value",this.value.toString())}onFilterUp(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(e),"autocomplete"===this.getModuleName()&&this.hidePopup())),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}}onFilterDown(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}}removeFillSelection(){if(this.isInteracted){const e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}}getQuery(e){let t;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){t=e?e.clone():this.query?this.query.clone():new Ut;const i=""===this.typedString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;t.where((this.dataSource instanceof ut||"string"!==s)&&"number"!==s&&this.fields.text?this.fields.text:"",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t=e?e.clone():this.query?this.query.clone():new Ut;return t}getSelectionPoints(){const e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}}searchLists(e){if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+xi.clearIcon)&&(this.filterInput.parentElement.querySelector("."+xi.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering()){const t={preventDefaultAction:!1,text:this.filterInput.value,updateData:(i,s,r)=>{t.cancel||(this.isCustomFilter=!0,this.filteringAction(i,s,r))},baseEventArgs:e,cancel:!1};this.trigger("filtering",t,i=>{!i.cancel&&!this.isCustomFilter&&!i.preventDefaultAction&&this.filteringAction(this.dataSource,null,this.fields)})}}filter(e,t,i){this.isCustomFilter=!0,this.filteringAction(e,t,i)}filteringAction(e,t,i){f(this.filterInput)||(this.beforePopupOpen=!(!this.isPopupOpen&&"combobox"===this.getModuleName()&&""===this.filterInput.value),""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,t=""===this.filterInput.value.trim()?null:t,this.resetList(e,i,t)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!f(this.actionCompleteData.ulElement)&&!f(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,!f(this.itemData)&&"dropdownlist"===this.getModuleName()&&(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0),this.renderReactTemplates())}setSearchBox(e){if(this.isFiltering()){const t=e.querySelector("."+xi.filterParent)?e.querySelector("."+xi.filterParent):this.createElement("span",{className:xi.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:xi.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);let i=!1;return q.isDevice&&(i=!0),this.filterInputObj=Bt.createInput({element:this.filterInput,buttons:i?[xi.backIcon,xi.filterBarClearIcon]:[xi.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),f(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?z([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&z([this.filterInputObj.container],"e-filled")),mi([this.filterInputObj.container],t),Qr([t],e),Rt(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+xi.clearIcon),!q.isDevice&&this.clearIconElement&&(k.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),this.searchKeyModule=new Gn(this.filterInput,q.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),k.add(this.filterInput,"input",this.onInput,this),k.add(this.filterInput,"keyup",this.onFilterUp,this),k.add(this.filterInput,"keydown",this.onFilterDown,this),k.add(this.filterInput,"blur",this.onBlurHandler,this),k.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return EAe}onInput(e){this.isValidKey=!0,q.isDevice&&"mozilla"===q.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))}pasteHandler(e){setTimeout(()=>{this.typedString=this.filterInput.value,this.searchLists(e)})}onActionFailure(e){super.onActionFailure(e),this.beforePopupOpen&&this.renderPopup()}onActionComplete(e,t,i,s){if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){const r=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(super.onActionComplete(e,t,i),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!f(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!f(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,f(e)||Rt(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1,this.value&&this.dataSource instanceof ut)){const o=f(this.fields.value)?this.fields.text:this.fields.value;t.some(l=>l[o]===this.value)||this.dataSource.executeQuery(this.getQuery(this.query).where(new cs(o,"equal",this.value))).then(l=>{l.result.length>0&&(this.addItem(l.result,t.length),this.updateValues())})}"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||f(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof ut||!f(this.dataSource)&&!f(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(()=>{this.updateActionCompleteDataValues(e,t)},0):this.updateActionCompleteDataValues(e,t)),this.addNewItem(t,r),f(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}}updateActionCompleteDataValues(e,t){this.actionCompleteData={ulElement:e.cloneNode(!0),list:t,isUpdated:!0},f(this.actionData.ulElement)&&f(this.actionData.list)&&(this.actionData=this.actionCompleteData)}addNewItem(e,t){if(!f(this.itemData)&&!f(t)){const i=this.getItemData().value;e.some(r=>("string"==typeof r||"number"==typeof r)&&r===i||U(this.fields.value,r)===i)||this.addItem(this.itemData)}}updateActionCompleteData(e,t,i){"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(()=>{this.actionCompleteDataUpdate(e,t,i)},0):this.actionCompleteDataUpdate(e,t,i))}actionCompleteDataUpdate(e,t,i){null!=i?this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]):this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(t)<0&&this.actionCompleteData.list.push(t)}focusIndexItem(){const e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);const t=this.findListElement(this.list,"li","data-value",e);this.selectedLI=t,this.activeItem(t),this.removeFocus()}updateSelection(){const e=this.list.querySelector(".e-active");e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+pt_li).classList.add(xi.focus))}removeFocus(){const e=this.list.querySelectorAll("."+xi.focus);e&&e.length&&W(e,xi.focus)}renderPopup(){this.popupObj&&document.body.contains(this.popupObj.element)?this.refreshPopup():this.trigger("beforeOpen",{cancel:!1},t=>{if(t.cancel)this.beforePopupOpen=!1;else{const i=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup "+(null!=this.cssClass?this.cssClass:"")}),s=this.setSearchBox(i);if(this.listHeight=st(this.popupHeight),this.headerTemplate&&this.setHeaderTemplate(i),mi([this.list],i),this.footerTemplate&&this.setFooterTemplate(i),document.body.appendChild(i),i.style.visibility="hidden","auto"!==this.popupHeight){if(this.searchBoxHeight=0,f(s.container)||(this.searchBoxHeight=s.container.parentElement.getBoundingClientRect().height,this.listHeight=(parseInt(this.listHeight,10)-this.searchBoxHeight).toString()+"px"),this.headerTemplate){this.header=this.header?this.header:i.querySelector(".e-ddl-header");const b=Math.round(this.header.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(b+this.searchBoxHeight)).toString()+"px"}if(this.footerTemplate){this.footer=this.footer?this.footer:i.querySelector(".e-ddl-footer");const b=Math.round(this.footer.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(b+this.searchBoxHeight)).toString()+"px"}this.list.style.maxHeight=(parseInt(this.listHeight,10)-2).toString()+"px",i.style.maxHeight=st(this.popupHeight)}else i.style.height="auto";let o,r=0;if(!f(this.selectedLI)&&!f(this.activeIndex)&&this.activeIndex>=0?this.setScrollPosition():this.list.scrollTop=0,q.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){r=this.getOffsetValue(i);const b=this.isEmptyList()?this.list:this.liCollections[0];o=-(parseInt(getComputedStyle(b).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))}this.getFocusElement(),this.createPopup(i,r,o),this.checkCollision(i),q.isDevice&&(this.popupObj.element.classList.add(xi.device),("dropdownlist"===this.getModuleName()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&(this.popupObj.collision={X:"fit",Y:"fit"}),this.isFilterLayout()&&(this.popupObj.element.classList.add(xi.mobileFilter),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),Rt(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),z([document.body,this.popupObj.element],xi.popupFullScreen),this.setSearchBoxPosition(),this.backIconElement=s.container.querySelector(".e-back-icon"),this.clearIconElement=s.container.querySelector("."+xi.clearIcon),k.add(this.backIconElement,"click",this.clickOnBackIcon,this),k.add(this.clearIconElement,"click",this.clearText,this))),i.style.visibility="visible",z([i],"e-popup-close");const a=this.popupObj.getScrollableParent(this.inputWrapper.container);for(const b of a)k.add(b,"scroll",this.scrollHandler,this);q.isDevice&&this.isFilterLayout()&&k.add(this.list,"scroll",this.listScroll,this),f(this.list)||(this.unWireListEvents(),this.wireListEvents()),Rt(this.targetElement(),{"aria-expanded":"true"}),z([this.isFiltering()?this.filterInput.parentElement:this.inputWrapper.container],[xi.inputFocus]);const h={name:"FadeIn",duration:100};this.beforePopupOpen=!0,this.trigger("open",{popup:this.popupObj,cancel:!1,animation:h},b=>{b.cancel?(this.beforePopupOpen=!1,this.destroyPopup()):(z([this.inputWrapper.container],[xi.iconAnimation]),this.renderReactTemplates(),this.popupObj.show(new mo(b.animation),1e3===this.zIndex?this.element:null))})}})}checkCollision(e){(!q.isDevice||q.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(Yb(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision())}getOffsetValue(e){const t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),s=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+s)}createPopup(e,t,i){this.popupObj=new fc(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.enableRtl,offsetX:i,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:()=>{this.isDocumentClick||this.focusDropDown(),this.isReact&&this.clearTemplate(["headerTemplate","footerTemplate"]),this.getModuleName(),this.isNotSearchList=!1,this.isDocumentClick=!1,this.destroyPopup(),this.isFiltering()&&this.actionCompleteData.list&&this.actionCompleteData.list[0]&&(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0))},open:()=>{k.add(document,"mousedown",this.onDocumentClick,this),this.isPopupOpen=!0;const s=this.actionCompleteData&&this.actionCompleteData.ulElement&&this.actionCompleteData.ulElement.querySelector("li"),r=this.list.querySelector("ul li");this.isFiltering()&&this.itemTemplate&&this.element.tagName===this.getNgDirective()&&s&&r&&s.textContent!==r.textContent&&"EJS-COMBOBOX"!==this.element.tagName&&this.cloneElements(),this.isFilterLayout()&&(W([this.inputWrapper.container],[xi.inputFocus]),this.isFilterFocus=!0,this.filterInput.focus(),this.inputWrapper.clearButton&&z([this.inputWrapper.clearButton],xi.clearIconHide)),this.activeStateChange()},targetExitViewport:()=>{q.isDevice||this.hidePopup()}})}isEmptyList(){return!f(this.liCollections)&&0===this.liCollections.length}getFocusElement(){}isFilterLayout(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering}scrollHandler(){q.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()}setSearchBoxPosition(){const e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";const t=this.filterInput.parentElement.querySelector("."+xi.clearIcon);te(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)}setPopupPosition(e){let t;const i=e,s=this.list.querySelector("."+xi.focus)||this.selectedLI,r=this.isEmptyList()?this.list:this.liCollections[0],o=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],a=r.getBoundingClientRect().height,l=this.list.offsetHeight/2,h=f(s)?r.offsetTop:s.offsetTop;if(o.offsetTop-l<h&&!f(this.liCollections)&&this.liCollections.length>0&&!f(s)){const b=this.list.offsetHeight/a,v=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(b-(this.liCollections.length-this.activeIndex))*a-i+v,this.list.scrollTop=s.offsetTop}else h>l?(t=l-a/2,this.list.scrollTop=h-l+a/2):t=h;return t=t+a+i-(a-this.inputWrapper.container.offsetHeight)/2,-t}setWidth(){let e=st(this.popupWidth);if(e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"),q.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){const t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e}scrollBottom(e){if(!f(this.selectedLI)){const t=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;let s=this.list.scrollTop+i-t;s=e?s+2*parseInt(getComputedStyle(this.list).paddingTop,10):s;let r=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;r=this.fields.groupBy&&!f(this.fixedHeaderElement)?r-this.fixedHeaderElement.offsetHeight:r,0===this.activeIndex?this.list.scrollTop=0:(i>t||!(r>0&&this.list.offsetHeight>r))&&(this.list.scrollTop=s)}}scrollTop(){if(!f(this.selectedLI)){let e=this.selectedLI.offsetTop-this.list.scrollTop;e=this.fields.groupBy&&!f(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;const t=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:t>0&&this.list.offsetHeight>t||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!f(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}}isEditTextBox(){return!1}isFiltering(){return this.allowFiltering}isPopupButton(){return!0}setScrollPosition(e){if(f(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}}clearText(){this.filterInput.value=this.typedString="",this.searchLists(null)}listScroll(){this.filterInput.blur()}setEleWidth(e){f(e)||("number"==typeof e?this.inputWrapper.container.style.width=st(e):"string"==typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:st(e)))}closePopup(e){if(this.isTyped=!1,!(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen))return;k.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;const t=this.popupObj.getScrollableParent(this.inputWrapper.container);for(const o of t)k.remove(o,"scroll",this.scrollHandler);q.isDevice&&this.isFilterLayout()&&(W([document.body,this.popupObj.element],xi.popupFullScreen),k.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(q.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&k.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(k.remove(this.backIconElement,"click",this.clickOnBackIcon),k.remove(this.clearIconElement,"click",this.clearText)),k.remove(this.filterInput,"input",this.onInput),k.remove(this.filterInput,"keyup",this.onFilterUp),k.remove(this.filterInput,"keydown",this.onFilterDown),k.remove(this.filterInput,"blur",this.onBlurHandler),k.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),Rt(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(xi.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:e||0}},o=>{if(!f(this.popupObj)&&!f(this.popupObj.element.querySelector(".e-fixed-head"))){const a=this.popupObj.element.querySelector(".e-fixed-head");a.parentNode.removeChild(a),this.fixedHeaderElement=null}o.cancel||("autocomplete"===this.getModuleName()&&this.rippleFun(),this.isPopupOpen?this.popupObj.hide(new mo(o.animation)):this.destroyPopup())})}destroyPopup(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),te(this.popupObj.element)}clickOnBackIcon(){this.hidePopup(),this.focusIn()}render(){"INPUT"===this.element.tagName?(this.inputElement=this.element,f(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","textbox"),f(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text")):(this.inputElement=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));let e=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=Bt.createInput({element:this.inputElement,buttons:this.isPopupButton()?[xi.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:xi.hiddenElement}}),Qr([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=st(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");const t=this.element.getAttribute("id")?this.element.getAttribute("id"):Tn("ej2_dropdownlist");if(this.element.id=t,this.hiddenElement.id=t+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),Rt(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){const i=this.element;this.value=i.options[i.selectedIndex].value,this.text=f(this.value)?null:i.options[i.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=i=>{i.stopImmediatePropagation()},this.inputElement.onchange=i=>{i.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),f(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete()}setFooterTemplate(e){let t;this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),z([this.footer],xi.footer)),t=this.dropdownCompiler(this.footerTemplate)?ji(X(this.footerTemplate,document).innerHTML.trim()):ji(this.footerTemplate);const s=t({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(s&&s.length>0)for(let r=0;r<s.length;r++)this.footer.appendChild(s[r]);mi([this.footer],e)}setHeaderTemplate(e){let t;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),z([this.header],xi.header)),t=this.dropdownCompiler(this.headerTemplate)?ji(X(this.headerTemplate,document).innerHTML.trim()):ji(this.headerTemplate);const s=t({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(s&&s.length)for(let o=0;o<s.length;o++)this.header.appendChild(s[o]);const r=e.querySelector("div.e-content");e.insertBefore(this.header,r)}setOldText(e){this.text=e}setOldValue(e){this.value=e}refreshPopup(){!f(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&(!q.isDevice||!this.isFilterLayout())||"autocomplete"===this.getModuleName())&&(W([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())}checkData(e){e.dataSource&&!f(Object.keys(e.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&e.dataSource instanceof ut)&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;const t=-1!==Object.keys(e).indexOf("value")&&f(e.value),i=-1!==Object.keys(e).indexOf("text")&&f(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(t||i)&&(this.itemData=null),this.allowFiltering&&e.dataSource&&!f(Object.keys(e.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&e.query&&!f(Object.keys(e.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)}updateDataSource(e){(""!==this.inputElement.value||!f(e)&&(f(e.dataSource)||!(e.dataSource instanceof ut)&&0===e.dataSource.length))&&this.clearAll(null,e),this.fields.groupBy&&e.fields&&!this.isGroupChecking&&(k.remove(this.list,"scroll",this.setFloatingHeader),k.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!f(e)&&(f(e.dataSource)||!(e.dataSource instanceof ut)&&0===e.dataSource.length))||e.dataSource!==[])&&(this.typedString="",this.resetList(this.dataSource)),!this.isCustomFilter&&!this.isFilterFocus&&document.activeElement!==this.filterInput&&this.checkCustomValue()}checkCustomValue(){this.itemData=this.getDataByValue(this.value);const e=this.getItemData();this.setProperties({text:e.text,value:e.value})}updateInputFields(){"dropdownlist"===this.getModuleName()&&Bt.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}onPropertyChanged(e,t){"dropdownlist"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(const i of Object.keys(e))switch(i){case"query":case"dataSource":break;case"htmlAttributes":this.setHTMLAttributes();break;case"width":this.setEleWidth(e.width);break;case"placeholder":Bt.setPlaceholder(e.placeholder,this.inputElement);break;case"filterBarPlaceholder":this.filterInput&&Bt.setPlaceholder(e.filterBarPlaceholder,this.filterInput);break;case"readonly":"dropdownlist"!==this.getModuleName()&&Bt.setReadonly(e.readonly,this.inputElement),this.setReadOnly();break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===e.text){this.clearAll();break}if(this.list||(this.dataSource instanceof ut&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){const s=this.getElementByText(e.text);if(!this.checkValidLi(s))if(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100)this.setSelectionData(e.text,t.text,"text");else if(e.text&&this.dataSource instanceof ut){const r=this.getItems().length,o=f(this.fields.text)?this.fields.value:this.fields.text;this.typedString="",this.dataSource.executeQuery(this.getQuery(this.query).where(new cs(o,"equal",e.text))).then(a=>{a.result.length>0?(this.addItem(a.result,r),this.updateValues()):this.setOldText(t.text)})}else this.setOldText(t.text);this.updateInputFields()}break;case"value":if(null===e.value){this.clearAll();break}if(this.notify("beforeValueChange",{newProp:e}),this.list||(this.dataSource instanceof ut&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){const s=this.getElementByValue(e.value);if(!this.checkValidLi(s))if(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100)this.setSelectionData(e.value,t.value,"value");else if(e.value&&this.dataSource instanceof ut){const r=this.getItems().length,o=f(this.fields.value)?this.fields.text:this.fields.value;this.typedString="",this.dataSource.executeQuery(this.getQuery(this.query).where(new cs(o,"equal",e.value))).then(a=>{a.result.length>0?(this.addItem(a.result,r),this.updateValues()):this.setOldValue(t.value)})}else this.setOldValue(t.value);this.updateInputFields(),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}break;case"index":if(null===e.index){this.clearAll();break}this.list||(this.dataSource instanceof ut&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender&&this.liCollections&&(this.checkValidLi(this.liCollections[e.index])||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.index,t.index,"index"):this.index=t.index),this.updateInputFields());break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"headerTemplate":this.popupObj&&this.setHeaderTemplate(this.popupObj.element);break;case"valueTemplate":!f(this.itemData)&&null!=this.valueTemplate&&this.setValueTemplate();break;case"allowFiltering":this.allowFiltering&&(this.actionCompleteData={ulElement:this.ulElement,list:this.listData,isUpdated:!0},this.actionData=this.actionCompleteData,this.updateSelectElementData(this.allowFiltering));break;case"floatLabelType":Bt.removeFloating(this.inputWrapper),Bt.addFloating(this.inputElement,e.floatLabelType,this.placeholder,this.createElement);break;case"showClearButton":Bt.setClearButton(e.showClearButton,this.inputElement,this.inputWrapper,null,this.createElement),this.bindClearEvent();break;default:{const s=this.getPropObject(i,e,t);super.onPropertyChanged(s.newProperty,s.oldProperty)}}}checkValidLi(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)}setSelectionData(e,t,i){let s;this.updateListValues=()=>{"text"===i?(s=this.getElementByText(e),this.checkValidLi(s)||this.setOldText(t)):"value"===i?(s=this.getElementByValue(e),this.checkValidLi(s)||this.setOldValue(t)):"index"===i&&(s=this.liCollections[e],this.checkValidLi(s)||(this.index=t))}}setReadOnly(){this.readonly?z([this.inputWrapper.container],["e-readonly"]):W([this.inputWrapper.container],["e-readonly"])}setCssClass(e,t){f(t)||(t=t.replace(/\s+/g," ").trim()),f(e)||(e=e.replace(/\s+/g," ").trim()),Bt.setCssClass(e,[this.inputWrapper.container],t),this.popupObj&&Bt.setCssClass(e,[this.popupObj.element],t)}getModuleName(){return"dropdownlist"}showPopup(){if(this.enabled){if(this.isFiltering()&&this.dataSource instanceof ut&&this.actionData.list!==this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(f(this.list)||!li(this.list)&&(this.list.classList.contains("e-nodata")||this.list.querySelectorAll("."+pt_li).length<=0))&&this.renderList(),this.invokeRenderPopup()}}invokeRenderPopup(){if(q.isDevice&&this.isFilterLayout()){const e=this;window.onpopstate=()=>{e.hidePopup()},history.pushState({},"")}(!f(this.list.children[0])||this.list.classList.contains("e-nodata"))&&this.renderPopup(),Rt(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}renderHightSearch(){}hidePopup(e){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(Bt.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,f(this.index))this.resetSelection();else{const s=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||s,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup();const t=this.getItemData(),i=!f(this.selectedLI);this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||i&&this.inputElement.value!==t.text)&&(this.isSelectCustom=!1,this.clearAll(e))}focusIn(e){if(!this.enabled||this.targetElement().classList.contains(xi.disable))return;let t=!1;this.preventFocus&&q.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.targetElement().focus(),z([this.inputWrapper.container],[xi.inputFocus]),this.onFocus(e)}focusOut(e){!this.enabled||(this.isTyped=!0,this.hidePopup(e),this.targetElement()&&this.targetElement().blur(),W([this.inputWrapper.container],[xi.inputFocus]))}destroy(){if(this.isActive=!1,function fAe(n){Ej===n&&(Ej="",ZK="",iy="",yC=[])}(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){const e=["readonly","aria-disabled","aria-placeholder","placeholder","aria-owns","aria-labelledby","aria-haspopup","aria-expanded","aria-activedescendant","autocomplete","aria-readonly","autocorrect","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"];for(let t=0;t<e.length;t++)this.inputElement.removeAttribute(e[t]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),Bt.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),te(this.inputWrapper.container),super.destroy()}}getItems(){return this.list||(this.dataSource instanceof ut&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?super.getItems():[]}getDataByValue(e){return super.getDataByValue(e)}clear(){this.value=null}};Co([_(null)],_r.prototype,"cssClass",void 0),Co([_("100%")],_r.prototype,"width",void 0),Co([_("300px")],_r.prototype,"popupHeight",void 0),Co([_("100%")],_r.prototype,"popupWidth",void 0),Co([_(null)],_r.prototype,"placeholder",void 0),Co([_(null)],_r.prototype,"filterBarPlaceholder",void 0),Co([_({})],_r.prototype,"htmlAttributes",void 0),Co([_(null)],_r.prototype,"query",void 0),Co([_(null)],_r.prototype,"valueTemplate",void 0),Co([_(null)],_r.prototype,"headerTemplate",void 0),Co([_(null)],_r.prototype,"footerTemplate",void 0),Co([_(!1)],_r.prototype,"allowFiltering",void 0),Co([_(!1)],_r.prototype,"readonly",void 0),Co([_(null)],_r.prototype,"text",void 0),Co([_(null)],_r.prototype,"value",void 0),Co([_(null)],_r.prototype,"index",void 0),Co([_("Never")],_r.prototype,"floatLabelType",void 0),Co([_(!1)],_r.prototype,"showClearButton",void 0),Co([G()],_r.prototype,"filtering",void 0),Co([G()],_r.prototype,"change",void 0),Co([G()],_r.prototype,"beforeOpen",void 0),Co([G()],_r.prototype,"open",void 0),Co([G()],_r.prototype,"close",void 0),Co([G()],_r.prototype,"blur",void 0),Co([G()],_r.prototype,"focus",void 0),_r=Co([as],_r);var Ti=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const _ce="e-ddt-hidden",Ice="e-input-group-icon e-ddt-icon e-icons",Ep="e-show-chip",g_="e-show-clear",JK="e-show-dd-icon",Uh="e-chip-input",qk="e-input-focus",Tce="e-input-group",Dce="e-icon-anim",eY="e-chips",kce="e-chipcontent",tY="e-chips-close",Qn="e-icon-hide",Ij="e-ddt-icon-hide",Rce="e-list-parent",Ace="e-dropdown",Lce="e-disabled",Tj="e-selectall-parent",Dj="e-hide-selectall",Mce="e-all-text",iY="e-frame",yP="e-check",sY="e-checkbox-wrapper",Oce="e-filter-wrap",Pce="e-ddt-icon",Fce="e-ddt-footer",Nce="e-ddt-header",Wk="e-no-data",nY="e-remain",rY="e-overflow",Gk="e-show-text",vP="e-total-count",$k="e-wrap-count";class Vd extends ii{}Ti([_("child")],Vd.prototype,"child",void 0),Ti([_([])],Vd.prototype,"dataSource",void 0),Ti([_("expanded")],Vd.prototype,"expanded",void 0),Ti([_("hasChildren")],Vd.prototype,"hasChildren",void 0),Ti([_("htmlAttributes")],Vd.prototype,"htmlAttributes",void 0),Ti([_("iconCss")],Vd.prototype,"iconCss",void 0),Ti([_("imageUrl")],Vd.prototype,"imageUrl",void 0),Ti([_("parentValue")],Vd.prototype,"parentValue",void 0),Ti([_(null)],Vd.prototype,"query",void 0),Ti([_("selected")],Vd.prototype,"selected",void 0),Ti([_(null)],Vd.prototype,"tableName",void 0),Ti([_("text")],Vd.prototype,"text",void 0),Ti([_("tooltip")],Vd.prototype,"tooltip",void 0),Ti([_("value")],Vd.prototype,"value",void 0);class kj extends ii{}Ti([_(!1)],kj.prototype,"autoCheck",void 0),Ti([_("Auto")],kj.prototype,"expandOn",void 0),Ti([_(!1)],kj.prototype,"loadOnDemand",void 0);let ls=class extends Qs{constructor(e,t){super(e,t),this.filterTimer=null,this.isFilteredData=!1,this.isFilterRestore=!1,this.selectedData=[],this.filterDelayTime=300,this.isClicked=!1}getPersistData(){return this.addOnPersist(["value"])}getLocaleName(){return"drop-down-tree"}preRender(){this.inputFocus=!1,this.isPopupOpen=!1,this.isFirstRender=!0,this.isInitialized=!1,this.currentText=null,this.currentValue=null,this.oldValue=null,this.removeValue=!1,this.selectedText=[],this.treeItems=[],this.dataValue=null,this.isNodeSelected=!1,this.isDynamicChange=!1,this.clearIconWidth=0,this.headerTemplateId=`${this.element.id}HeaderTemplate`,this.footerTemplateId=`${this.element.id}FooterTemplate`,this.actionFailureTemplateId=`${this.element.id}ActionFailureTemplate`,this.noRecordsTemplateId=`${this.element.id}NoRecordsTemplate`,this.customTemplateId=`${this.element.id}CustomTemplate`,this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",ctrlA:"ctrl+A"}}render(){const e=X("#"+this.element.id+"_tree",document);e&&te(X("#"+this.element.id+"_popup",document)||e.parentElement),this.ensureAutoCheck(),"INPUT"===this.element.tagName?(this.inputEle=this.element,f(this.inputEle.getAttribute("role"))&&this.inputEle.setAttribute("role","textbox"),f(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text")):(this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.parentElement.insertBefore(this.inputEle,this.element)),this.inputObj=Bt.createInput({element:this.inputEle,floatLabelType:this.floatLabelType,buttons:this.showDropDownIcon?[Ice]:null,properties:{readonly:!0,placeholder:this.placeholder,enabled:this.enabled,cssClass:this.cssClass,enableRtl:this.enableRtl}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.contains(Tce)||this.inputWrapper.classList.add(Tce),this.showDropDownIcon&&this.inputWrapper.classList.add(JK),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.createHiddenElement(),this.createClearIcon(),this.inputWrapper.classList.add("e-ddt"),this.setElementWidth(this.width),this.updateDataAttribute(),this.setHTMLAttributes(),this.setAttributes(),this.popupDiv=this.createElement("div",{className:"e-popup-content",attrs:{tabindex:"0"}}),this.popupDiv.classList.add(Ace),this.tree=this.createElement("div",{id:this.element.id+"_tree"}),this.popupDiv.appendChild(this.tree),document.body.appendChild(this.popupDiv),this.wireTreeEvents(),z([this.popupDiv],Ij),this.renderTree(),this.isRemoteData=this.fields.dataSource instanceof ut,(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.createChip(),!this.wrapText&&"Custom"!==this.mode&&(this.overFlowWrapper=this.createElement("span",{className:rY+" "+Qn}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement),"Box"!==this.mode&&z([this.overFlowWrapper],Gk))),this.isRemoteData||(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView()),this.wireEvents();const t=X("."+Rce,this.treeObj.element);t&&t.getAttribute("aria-multiselectable")&&t.removeAttribute("aria-multiselectable"),this.oldValue=this.value,this.isInitialized=!0,this.hasTemplate=this.itemTemplate||this.headerTemplate||this.footerTemplate||this.actionFailureTemplate||this.noRecordsTemplate||this.customTemplate,this.renderComplete()}ensureAutoCheck(){this.allowFiltering&&this.treeSettings.autoCheck&&this.setProperties({treeSettings:{autoCheck:!1}},!0)}hideCheckAll(e){const t=f(this.popupEle)?null:this.popupEle.querySelector("."+Tj);f(t)||(e&&!t.classList.contains(Dj)?z([t],Dj):!e&&t.classList.contains(Dj)&&W([t],Dj))}renderFilter(){this.filterContainer=this.createElement("div",{id:this.element.id+"_filter_wrap",className:Oce});const e=this.createElement("input",{id:this.element.id+"_filter",attrs:{autocomplete:"off","aria-label":this.filterBarPlaceholder}});this.filterContainer.appendChild(e),Qr([this.filterContainer],this.popupEle),this.filterObj=new Uo({value:"",showClearButton:!0,placeholder:this.filterBarPlaceholder,input:this.filterChangeHandler.bind(this)}),this.filterObj.appendTo("#"+this.element.id+"_filter")}filterChangeHandler(e){f(e.value)||(window.clearTimeout(this.filterTimer),this.filterTimer=window.setTimeout(()=>{this.filterHandler(e.value,e.event)},this.filterDelayTime))}filterHandler(e,t){this.isFilteredData||(this.treeData=this.treeObj.getTreeData());const i=this.cloneFields(this.fields);this.trigger("filtering",{cancel:!1,preventDefaultAction:!1,event:t,text:e,fields:i},r=>{if(!r.cancel){let a,o=!1;if(this.isFilteredData=!0,""===e?(this.isFilteredData=!1,this.isFilterRestore=!0,a=this.cloneFields(this.fields)):r.preventDefaultAction?a=r.fields:1===this.treeDataType?a=this.selfReferencefilter(e,r.fields):this.fields.dataSource instanceof ut?o=!0:a=this.nestedFilter(e,r.fields),this.hideCheckAll(this.isFilteredData),o)return;this.treeObj.fields=this.getTreeFields(a),this.treeObj.dataBind()}})}nestedFilter(e,t){const i=[];for(let s=0;s<this.treeData.length;s++){const r=this.nestedChildFilter(e,this.treeData[s]);f(r)||i.push(r)}return t.dataSource=i,t}nestedChildFilter(e,t){const i=t[this.fields.child];if(f(i))return this.isMatchedNode(e,t)?t:null;{const s=[];for(let r=0;r<i.length;r++){const o=this.nestedChildFilter(e,i[r]);f(o)||s.push(o)}return 0!==s.length?(t[this.fields.child]=s,t):(t[this.fields.child]=null,this.isMatchedNode(e,t)?t:null)}}selfReferencefilter(e,t){const i=[],s=[];for(let r=0;r<this.treeData.length;r++)this.isMatchedNode(e,this.treeData[r])&&i.push(this.treeData[r]);for(let r=0;r<i.length;r++)if(-1===s.indexOf(i[r])){s.push(i[r]);let o=i[r][this.fields.parentValue];for(;!f(o);){let a=null;for(let l=0;l<this.treeData.length;l++){const h=this.treeData[l][this.fields.value];if(!f(h)&&h===o){a=this.treeData[l];break}}if(f(a)||-1!==s.indexOf(a))break;s.push(a),o=a[this.fields.parentValue]}}return t.dataSource=s,t}isMatchedNode(e,t){let i=t[this.fields.text];return this.ignoreCase&&(i=i.toLowerCase(),e=e.toLowerCase()),this.ignoreAccent&&(i=Ze.ignoreDiacritics(i),e=Ze.ignoreDiacritics(e)),"StartsWith"===this.filterType?i.slice(0,e.length)===e:"EndsWith"===this.filterType?i.slice(-e.length)===e:-1!==i.indexOf(e)}wireEvents(){k.add(this.inputWrapper,"mouseup",this.dropDownClick,this),k.add(this.inputWrapper,"focus",this.focusIn,this),k.add(this.inputWrapper,"blur",this.focusOut,this),k.add(this.inputWrapper,"mousemove",this.mouseIn,this),k.add(this.inputWrapper,"mouseout",this.onMouseLeave,this),k.add(this.overAllClear,"mousedown",this.clearAll,this),k.add(window,"resize",this.windowResize,this);const e=B(this.inputWrapper,"form");e&&k.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new Gn(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}wireTreeEvents(){this.keyboardModule=new Gn(this.tree,{keyAction:this.treeAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}wireCheckAllWrapperEvents(){this.keyboardModule=new Gn(this.checkAllParent,{keyAction:this.checkAllAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}unWireEvents(){k.remove(this.inputWrapper,"mouseup",this.dropDownClick),k.remove(this.inputWrapper,"focus",this.focusIn),k.remove(this.inputWrapper,"blur",this.focusOut),k.remove(this.inputWrapper,"mousemove",this.mouseIn),k.remove(this.inputWrapper,"mouseout",this.onMouseLeave),k.remove(this.overAllClear,"mousedown",this.clearAll),k.remove(window,"resize",this.windowResize);const e=B(this.inputWrapper,"form");e&&k.remove(e,"reset",this.resetValueHandler)}dropDownClick(e){if(this.enabled&&!this.readonly){if(this.isClearButtonClick)return void(this.isClearButtonClick=!1);this.isPopupOpen?this.hidePopup():(this.focusIn(e),this.renderPopup()),this.showOverAllClear()}}mouseIn(){(this.enabled||!this.readonly)&&this.showOverAllClear()}onMouseLeave(){this.inputFocus||(z([this.overAllClear],Qn),W([this.inputWrapper],g_))}getDirective(){return"EJS-DROPDOWNTREE"}focusOut(e){if(!this.enabled||this.readonly||!this.inputFocus||(q.isIE||"edge"===q.info.name)&&e.target===this.inputWrapper)return;const t=e.relatedTarget;t!==this.inputEle&&f(t)&&(e.target!==this.inputWrapper||!this.isPopupOpen)&&this.onFocusOut(e)}onFocusOut(e){if(this.inputFocus=!1,this.isPopupOpen&&this.hidePopup(),this.isClearButtonClick&&(this.isClearButtonClick=!1),this.showClearButton&&(this.clearIconWidth=X(".e-clear-icon",this.inputWrapper).offsetWidth,z([this.overAllClear],Qn),W([this.inputWrapper],g_)),W([this.inputWrapper],[qk]),this.allowMultiSelection||this.showCheckBox){const t=!!this.value&&!!this.value.length;"Delimiter"!==this.mode&&"Custom"!==this.mode&&this.chipWrapper&&"Default"===this.mode&&(z([this.chipWrapper],Qn),W([this.inputWrapper],Ep),W([this.inputEle],Uh)),!this.wrapText&&t&&this.updateView()}this.changeOnBlur&&this.triggerChangeEvent(e),this.removeValue=!1,this.oldValue=this.value,this.trigger("blur")}updateView(){!this.showCheckBox&&!this.allowMultiSelection||"Custom"===this.mode||this.inputFocus||("Box"!==this.mode?z([this.inputWrapper,this.overFlowWrapper],Gk):z([this.inputWrapper],Ep),this.value&&0!==this.value.length&&(this.inputWrapper.contains(this.chipWrapper)&&z([this.chipWrapper],Qn),z([this.inputEle],Uh),this.updateOverFlowView(),this.ensurePlaceHolder()))}triggerChangeEvent(e){this.ddtCompareValues(this.oldValue,this.value)&&!this.isChipDelete||this.removeValue||(this.trigger("change",{e,oldValue:this.oldValue,value:this.value,isInteracted:!!e,element:this.element}),this.oldValue=this.value)}ddtCompareValues(e,t){if(null===e||null===t)return(null===e||0===e.length)&&t===e;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}focusIn(e){!this.enabled||this.readonly||this.inputFocus||(this.showOverAllClear(),this.inputFocus=!0,z([this.inputWrapper],[qk]),(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.inputFocus&&(this.chipWrapper&&this.value&&0!==this.value.length&&(W([this.chipWrapper],Qn),z([this.inputEle],Uh)),z([this.inputWrapper],Ep),this.popupObj&&this.popupObj.refreshPosition()),!this.wrapText&&"Custom"!==this.mode&&(this.inputWrapper.contains(this.overFlowWrapper)&&z([this.overFlowWrapper],Qn),"Delimiter"===this.mode?(W([this.inputWrapper],Ep),W([this.inputEle],Uh)):z([this.inputWrapper],Ep),W([this.inputWrapper],Gk),this.ensurePlaceHolder())),this.trigger("focus",{isInteracted:!!e,event:e}))}treeAction(e){this.trigger("keyPress",{cancel:!1,event:e},i=>{if(i.cancel)e.stopImmediatePropagation();else switch(e.action){case"escape":case"altUp":this.inputWrapper.focus(),e.preventDefault(),this.isPopupOpen&&this.hidePopup();break;case"tab":case"shiftTab":this.isPopupOpen&&this.hidePopup();break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":this.showCheckBox||(this.isValueChange=!0,this.keyEventArgs=e);break;case"space":this.isValueChange=!0,this.keyEventArgs=e;break;case"ctrlA":this.allowMultiSelection&&this.selectAll(!0)}})}keyActionHandler(e){this.trigger("keyPress",{cancel:!1,event:e},i=>{if(!i.cancel)switch(e.action){case"escape":case"altUp":this.isPopupOpen&&this.hidePopup();break;case"shiftTab":case"tab":this.isPopupOpen&&this.hidePopup(),this.inputFocus&&this.onFocusOut();break;case"altDown":this.isPopupOpen||(this.showPopup(),e.preventDefault());break;case"moveDown":this.showSelectAll&&this.showCheckBox&&this.checkAllParent.focus()}})}checkAllAction(e){this.trigger("keyPress",{cancel:!1,event:e},i=>{if(!i.cancel)switch(e.action){case"space":this.clickHandler(e);break;case"moveDown":this.treeObj.element.focus()}})}windowResize(){this.popupObj&&(this.popupObj.setProperties({width:this.setWidth()}),this.popupObj.refreshPosition())}resetValueHandler(e){const t=B(this.inputWrapper,"form");t&&e.target===t&&(this.isDynamicChange=!0,this.setProperties({value:null},!0),this.resetValue(!0),this.isDynamicChange=!1)}getAriaAttributes(){return{"aria-disabled":this.enabled?"false":"true","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-labelledby":this.hiddenElement.id}}updateOverFlowView(){if(this.overFlowWrapper.classList.remove(vP),W([this.overFlowWrapper],Qn),this.value&&this.value.length){let t,i,s,o,a,e="",r=1,l=0;this.overFlowWrapper.innerHTML="";const h={overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"};this.l10n=new jo(this.getLocaleName(),h,this.locale);const c=this.l10n.getConstant("overflowCountTemplate"),m=this.l10n.getConstant("totalCountTemplate"),b=this.createElement("span",{className:nY});this.overFlowWrapper.appendChild(b),b.innerText=c.replace("${count}",this.value.length.toString());const v=b.offsetWidth;if(Yt(b),this.showDropDownIcon&&(l=X("."+Pce,this.inputWrapper).offsetWidth),!f(this.value))if("Box"!==this.mode)for(let w=0;!f(this.value[w]);w++){if(e+=0===w?"":this.delimiterChar+" ",i=this.getOverflowVal(w),e+=i,i=this.overFlowWrapper.innerHTML,this.overFlowWrapper.innerHTML=e,o=this.overFlowWrapper.offsetWidth,t=this.inputWrapper.offsetWidth,o+l+this.clearIconWidth>t){for(void 0!==s&&""!==s&&(i=s,w=r+1),this.overFlowWrapper.innerHTML=i,a=this.value.length-w,o=this.overFlowWrapper.offsetWidth;o+v+l+this.clearIconWidth>=t&&0!==o&&""!==this.overFlowWrapper.innerHTML;){const E=this.overFlowWrapper.innerHTML.split(this.delimiterChar);E.pop(),this.overFlowWrapper.innerHTML=E.join(this.delimiterChar),a++,o=this.overFlowWrapper.offsetWidth}break}o+v+l+this.clearIconWidth<=t?(s=e,r=w):0===w&&(s="",r=-1)}else{z([this.chipWrapper],Qn);const w=this.chipWrapper.cloneNode(!0),E=bt("."+eY,w);for(let D=0;D<E.length;D++){if(i=this.overFlowWrapper.innerHTML,this.overFlowWrapper.appendChild(E[D]),e=this.overFlowWrapper.innerHTML,o=this.overFlowWrapper.offsetWidth,t=this.inputWrapper.offsetWidth,o+l+this.clearIconWidth>t){for(void 0!==s&&""!==s&&(i=s,D=r+1),this.overFlowWrapper.innerHTML=i,a=this.value.length-D,o=this.overFlowWrapper.offsetWidth;o+v+l+this.clearIconWidth>=t&&0!==o&&""!==this.overFlowWrapper.innerHTML;)this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild),a++,o=this.overFlowWrapper.offsetWidth;break}o+v+l+this.clearIconWidth<=t?(s=e,r=D):0===D&&(s="",r=-1)}}a>0&&this.overFlowWrapper.appendChild(this.updateRemainTemplate(b,a,c,m)),"Box"===this.mode&&!this.overFlowWrapper.classList.contains(vP)&&z([b],$k)}else this.overFlowWrapper.innerHTML="",z([this.overFlowWrapper],Qn);this.updateDelimMode()}updateRemainTemplate(e,t,i,s){return this.overFlowWrapper.firstChild&&3===this.overFlowWrapper.firstChild.nodeType&&""===this.overFlowWrapper.firstChild.nodeValue&&this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild),e.innerHTML="",e.innerText=!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?s.replace("${count}",t.toString()):i.replace("${count}",t.toString()),!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?(z([this.overFlowWrapper],vP),W([this.overFlowWrapper],$k)):W([this.overFlowWrapper],vP),e}getOverflowVal(e){const t=this.getSelectedData(this.value[e]);return U(this.treeSettings.loadOnDemand?this.fields.text:"text",t)}updateDelimMode(){"Box"!==this.mode?X("."+nY,this.overFlowWrapper)&&!this.overFlowWrapper.classList.contains(vP)?(z([this.overFlowWrapper],$k),z([this.overFlowWrapper],Gk)):(this.overFlowWrapper.classList.remove($k),W([this.overFlowWrapper],$k)):X("."+nY,this.overFlowWrapper)&&this.overFlowWrapper.classList.remove($k)}createHiddenElement(){this.hiddenElement=this.createElement("select",this.allowMultiSelection||this.showCheckBox?{attrs:{"aria-hidden":"true",class:_ce,tabindex:"-1",multiple:""}}:{attrs:{"aria-hidden":"true",tabindex:"-1",class:_ce}}),Qr([this.hiddenElement],this.inputWrapper),this.validationAttribute()}createClearIcon(){this.overAllClear=this.createElement("span",{className:"e-clear-icon e-icons"}),z([this.overAllClear],Qn),W([this.inputWrapper],g_),this.showClearButton&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])}validationAttribute(){const e=this.inputEle.getAttribute("name")?this.inputEle.getAttribute("name"):this.inputEle.getAttribute("id");this.hiddenElement.setAttribute("name",e),this.inputEle.removeAttribute("name");const t=["required","aria-required","form"];for(let i=0;i<t.length;i++){const s=this.inputEle.getAttribute(t[i]);s&&(this.hiddenElement.setAttribute(t[i],s),this.inputEle.removeAttribute(t[i]))}}createChip(){this.inputWrapper.contains(this.chipWrapper)||(this.chipWrapper=this.createElement("span",{className:"e-chips-wrapper"}),this.chipCollection=this.createElement("span",{className:"e-chips-collection"}),this.chipWrapper.appendChild(this.chipCollection),this.inputWrapper.insertBefore(this.chipWrapper,this.hiddenElement),z([this.inputWrapper],Ep),this.getValidMode()&&null!==this.value&&this.value&&0!==this.value.length?z([this.inputEle],Uh):(null===this.value||this.value&&0===this.value.length)&&z([this.chipWrapper],Qn))}getValidMode(){return!(!this.allowMultiSelection&&!this.showCheckBox||"Box"!==this.mode&&("Default"!==this.mode||!this.inputFocus))}createSelectAllWrapper(){this.checkAllParent=this.createElement("div",{className:Tj,attrs:{tabindex:"0"}}),this.selectAllSpan=this.createElement("span",{className:Mce}),this.selectAllSpan.textContent="";const t=f(B(this.element,".e-bigger"))?"":"e-small";this.checkBoxElement=Vw(this.createElement,!0,{cssClass:t}),this.checkBoxElement.setAttribute("role","checkbox"),this.checkAllParent.appendChild(this.checkBoxElement),this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),k.add(this.checkAllParent,"mouseup",this.clickHandler,this),this.wireCheckAllWrapperEvents()}clickHandler(e){let t;if(t=e.currentTarget&&e.currentTarget.classList.contains(Tj)?e.currentTarget.firstElementChild.lastElementChild:e.target,this.checkWrapper=B(t,"."+sY),!f(this.checkWrapper)){this.isClicked=!0;const i=X("."+iY,this.checkWrapper);this.changeState(this.checkWrapper,i.classList.contains(yP)?"uncheck":"check",e),this.isClicked=!1}e.preventDefault()}changeState(e,t,i){let s;const r=e.getElementsByClassName(iY)[0];"check"!==t||r.classList.contains(yP)?"uncheck"===t&&r.classList.contains(yP)&&(r.classList.remove(yP),s="false",this.isReverseUpdate||(this.treeObj.uncheckAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!1)):(r.classList.add(yP),s="true",this.isReverseUpdate||(this.treeObj.checkAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!0)),this.setMultiSelect(),this.ensurePlaceHolder(),s="check"===t?"true":"false",f(s)||e.setAttribute("aria-checked",s)}setLocale(e){if(this.selectAllSpan)if("Select All"!==this.selectAllText||"Unselect All"!==this.unSelectAllText){const t=e?this.unSelectAllText:this.selectAllText;this.selectAllSpan.textContent="";const i=ji(t),s=e?"unSelectAllText":"selectAllText";for(const r of i({},this,s,null,!this.isStringTemplate))this.selectAllSpan.textContent=r.textContent}else this.selectAllSpan.textContent=e?this.unSelectAllText:this.selectAllText}setAttributes(){this.inputEle.setAttribute("tabindex","-1");const e=this.element.getAttribute("id");this.hiddenElement.id=e+"_hidden",this.inputWrapper.setAttribute("tabindex","0"),Rt(this.inputWrapper,this.getAriaAttributes())}setHTMLAttributes(){if(Object.keys(this.htmlAttributes).length)for(const e of Object.keys(this.htmlAttributes))if("class"===e)this.inputWrapper.classList.add(this.htmlAttributes[e]);else if("disabled"===e&&"disabled"===this.htmlAttributes[e])this.setProperties({enabled:!1},!0),this.setEnable();else if("readonly"!==e||f(this.htmlAttributes[e]))if("style"===e)this.inputWrapper.setAttribute("style",this.htmlAttributes[e]);else{const t=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],i=["name","required"];0===e.indexOf("data")||i.indexOf(e)>-1?this.hiddenElement.setAttribute(e,this.htmlAttributes[e]):t.indexOf(e)>-1?"placeholder"===e?Bt.setPlaceholder(this.htmlAttributes[e],this.inputEle):this.inputEle.setAttribute(e,this.htmlAttributes[e]):this.inputWrapper.setAttribute(e,this.htmlAttributes[e])}else this.setProperties({readonly:!0},!0),this.dataBind()}updateDataAttribute(){const e=this.htmlAttributes,t=["class","style","id","type"],i={};for(let s=0;s<this.element.attributes.length;s++)-1===t.indexOf(this.element.attributes[s].name)&&"readonly"!==this.element.attributes[s].name&&(i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));Ae(i,e,i),this.setProperties({htmlAttributes:i},!0)}showOverAllClear(){!this.enabled||this.readonly||this.overAllClear&&(this.value&&this.value.length&&this.showClearButton?(W([this.overAllClear],Qn),z([this.inputWrapper],g_)):(z([this.overAllClear],Qn),W([this.inputWrapper],g_)))}setTreeValue(){if(null!==this.value&&0!==this.value.length){let e;if(this.showCheckBox||this.allowMultiSelection){for(let t=0;t<this.value.length;t++)e=this.treeObj.getTreeData(this.value[t])[0],f(e)&&this.value.splice(this.value.indexOf(this.value[t]),1);0!==this.value.length&&this.setValidValue()}else e=this.treeObj.getTreeData(this.value[0])[0],f(e)?this.setProperties({value:this.currentValue},!0):(this.setProperties({text:e[this.fields.text]},!0),this.setValidValue())}}setTreeText(){if((null===this.value||this.isInitialized)&&null!==this.text){let e;const t=[];if(this.showCheckBox||this.allowMultiSelection){const i=this.text.split(this.delimiterChar);for(let s=0;s<i.length;s++)e=this.getItems(i[s]),f(e)||t.push(e[this.fields.value].toString());0!==t.length?(this.oldValue=this.value,this.setProperties({value:t},!0),this.setValidValue()):this.setProperties({text:this.currentText},!0)}else e=this.getItems(this.text),f(e)?this.setProperties({text:this.currentText},!0):(this.oldValue=this.value,this.setProperties({value:[e[this.fields.value].toString()]},!0),this.setValidValue())}}setSelectedValue(){null==this.value&&(this.isInitialized||(this.oldValue=this.value,this.treeObj.selectedNodes.length>0&&!this.showCheckBox?(this.setProperties({value:this.treeObj.selectedNodes},!0),this.allowMultiSelection&&this.updateMode()):this.showCheckBox&&this.treeObj.checkedNodes&&this.treeObj.checkedNodes.length>0&&(this.setProperties({value:this.treeObj.checkedNodes},!0),zt("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.updateMode()),this.updateSelectedValues(),this.currentText=this.text,this.currentValue=this.value))}setValidValue(){if(this.showCheckBox||this.allowMultiSelection)this.showCheckBox?(this.value.filter(t=>-1===this.treeObj.checkedNodes.indexOf(t)).length>0||this.treeSettings.autoCheck)&&(this.treeObj.checkedNodes=this.value.slice(),this.treeObj.dataBind(),this.setMultiSelect()):(this.treeObj.selectedNodes=this.value.slice(),this.selectedText=[],this.updateSelectedValues()),this.treeObj.dataBind();else{Bt.setValue(this.text,this.inputEle,this.floatLabelType);const e=this.value[0].toString();this.treeObj.selectedNodes[0]!==e&&zt("selectedNodes",[e],this.treeObj)}this.currentText=this.text,this.currentValue=this.value,this.isInitialized&&this.triggerChangeEvent()}getItems(e){let t;if(1===this.treeDataType)for(let i=0;i<this.treeItems.length;i++){const s=U(this.fields.text,this.treeItems[i]);if(!f(this.treeItems[i])&&!f(s)&&s===e){t=this.treeItems[i];break}}else t=this.getNestedItems(this.treeItems,this.fields,e);return t}getNestedItems(e,t,i){let s;for(let r=0,o=e.length;r<o;r++){const a=U(this.fields.text,e[r]);if(e[r]&&a&&a.toString()===i)return e[r];if("string"!=typeof t.child||f(U(t.child,e[r]))){if(this.fields.dataSource instanceof ut&&!f(U("child",e[r]))&&(s=this.getNestedItems(U("child",e[r]),this.getChildType(t),i),void 0!==s))break}else{const l=U(t.child,e[r]);if(s=this.getNestedItems(l,this.getChildType(t),i),void 0!==s)break}}return s}getChildType(e){return"string"==typeof e.child||f(e.child)?e:e.child}renderTree(){this.treeObj=new ys({fields:this.getTreeFields(this.fields),enableRtl:this.enableRtl,nodeSelected:this.onNodeSelected.bind(this),nodeChecked:this.onNodeChecked.bind(this),nodeChecking:this.beforeCheck.bind(this),actionFailure:this.onActionFailure.bind(this),nodeClicked:this.onNodeClicked.bind(this),dataBound:this.OnDataBound.bind(this),allowMultiSelection:this.allowMultiSelection,showCheckBox:this.showCheckBox,autoCheck:this.treeSettings.autoCheck,sortOrder:this.sortOrder,expandOn:this.treeSettings.expandOn,loadOnDemand:this.treeSettings.loadOnDemand,nodeSelecting:this.onBeforeSelect.bind(this),nodeTemplate:this.itemTemplate}),this.treeObj.root=this.root?this.root:this,this.treeObj.appendTo("#"+this.tree.id)}renderPopup(){this.isFilteredData&&(this.filterObj.value="",this.treeObj.fields=this.getTreeFields(this.fields),this.isFilterRestore=!0,this.isFilteredData=!1,this.hideCheckAll(!1));let e=!1;this.trigger("beforeOpen",{cancel:!1},i=>{if(i.cancel?e=!0:(z([this.inputWrapper],[Dce]),this.isFirstRender?(this.popupEle=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddt e-popup "+(null!=this.cssClass?this.cssClass:"")}),document.body.appendChild(this.popupEle),this.createPopup(this.popupEle)):this.popupEle=this.popupObj.element),this.isFirstRender&&!e&&(Qr([this.popupDiv],this.popupEle),W([this.popupDiv],Ij),this.allowFiltering&&this.renderFilter(),this.showCheckBox&&this.showSelectAll&&!this.popupDiv.classList.contains(Wk)&&(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)),this.headerTemplate&&this.setHeaderTemplate(),this.footerTemplate&&this.setFooterTemplate(),this.isFirstRender=!1,this.hasTemplate&&this.portals&&(this.portals=this.portals.concat(this.treeObj.portals),this.renderReactTemplates())),!e){if(Rt(this.inputWrapper,{"aria-expanded":"true"}),this.popupObj.show(null,1e3===this.zIndex?this.inputEle:null),W([this.popupEle],Ij),this.updatePopupHeight(),this.popupObj.refreshPosition(),!(this.showCheckBox&&this.showSelectAll)&&!this.popupDiv.classList.contains(Wk)&&this.treeItems.length>0&&this.treeObj.element.focus(),this.checkSelectAll&&this.checkBoxElement){const r=B(this.checkBoxElement,"."+sY);this.changeState(r,"check"),this.checkSelectAll=!1}this.allowFiltering&&(W([this.inputWrapper],[qk]),this.filterObj.element.focus()),this.trigger("open",{popup:this.popupObj})}})}updatePopupHeight(){if(this.isFirstRender)return;let e=this.getHeight();if(this.popupEle.style.maxHeight=e,this.allowFiltering){const i=Math.round(this.filterContainer.getBoundingClientRect().height);e=st(parseInt(e,10)-i+"px")}if(this.headerTemplate){const i=Math.round(this.header.getBoundingClientRect().height);e=st(parseInt(e,10)-i+"px")}if(this.showCheckBox&&this.showSelectAll){const i=Math.round(this.checkAllParent.getBoundingClientRect().height);e=st(parseInt(e,10)-i+"px")}if(this.footerTemplate){const i=Math.round(this.footer.getBoundingClientRect().height);e=st(parseInt(e,10)-i+"px")}let t=parseInt(window.getComputedStyle(this.popupEle).borderTopWidth,10);t+=parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth,10),e=st(parseInt(e,10)-t+"px"),this.popupDiv.style.maxHeight=e}createPopup(e){this.isFirstRender&&(this.popupObj=new fc(e,{width:this.setWidth(),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,zIndex:this.zIndex,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},close:()=>{this.isPopupOpen=!1},open:()=>{k.add(document,"mousedown",this.onDocumentClick,this),this.isPopupOpen=!0},targetExitViewport:()=>{q.isDevice||this.hidePopup()}}))}setElementWidth(e){const t=this.inputWrapper;f(e)||("number"==typeof e?t.style.width=st(e):"string"==typeof e&&(t.style.width=e.match(/px|%|em/)?e:st(e)))}setWidth(){let e=st(this.popupWidth);return e.indexOf("%")>-1?e=(this.inputWrapper.offsetWidth*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupWidth&&(e=this.popupWidth.match(/px|em/)?this.popupWidth:e),e}getHeight(){let e=st(this.popupHeight);return e.indexOf("%")>-1?e=(document.documentElement.clientHeight*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupHeight&&(e=this.popupHeight.match(/px|em/)?this.popupHeight:e),e}onDocumentClick(e){const t=e.target,i=B(t,"."+Rce),s=B(t,"."+Oce),r=B(t,"."+Nce),o=B(t,"."+Fce),a=!!t.classList.contains(Ace)||ck(t,".e-ddt .e-popup")||ck(t,".e-ddt .e-treeview");this.isPopupOpen&&(this.inputWrapper.contains(t)||i||s||a||r||o)||(this.allowMultiSelection||this.showCheckBox)&&(this.isPopupOpen&&t.classList.contains(tY)||this.isPopupOpen&&(t.classList.contains(Tj)||t.classList.contains(Mce)||t.classList.contains(iY)))?(this.isDocumentClick=!1,e.preventDefault()):!this.inputWrapper.contains(t)&&this.inputFocus&&this.focusOut(e)}onActionFailure(e){this.trigger("actionFailure",e),this.l10nUpdate(!0),z([this.popupDiv],Wk)}OnDataBound(e){this.treeItems=e.data,this.treeItems.length<=0?(this.l10nUpdate(),z([this.popupDiv],Wk),this.hideCheckAll(!0)):this.popupDiv.classList.contains(Wk)&&this.treeItems.length>=1&&(W([this.popupDiv],Wk),this.hideCheckAll(!1)),this.treeDataType=this.getTreeDataType(this.treeItems,this.fields),this.isFirstRender&&this.isRemoteData&&(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView(),this.treeObj.element.focus()),this.trigger("dataBound",{data:e.data}),this.isFilteredData&&this.treeObj.expandAll(),this.isFilterRestore&&(this.restoreFilterSelection(),this.isFilterRestore=!1)}restoreFilterSelection(){this.showCheckBox?this.treeObj.checkedNodes=this.value?this.value:[]:this.treeObj.selectedNodes=this.value?this.value:[]}setCssClass(e,t){const i=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];!f(t)&&""!==t&&W(i,t.split(" ")),!f(e)&&""!==e&&z(i,e.split(" "))}setEnableRTL(e){e?this.inputWrapper.classList.add("e-rtl"):this.inputWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind()),this.treeObj&&(this.treeObj.enableRtl=e,this.treeObj.dataBind())}setEnable(){Bt.setEnabled(this.enabled,this.inputEle),this.enabled?(W([this.inputWrapper],Lce),this.inputEle.setAttribute("aria-disabled","false"),this.inputWrapper.setAttribute("aria-disabled","false")):(this.isPopupOpen&&this.hidePopup(),z([this.inputWrapper],Lce),this.inputWrapper&&this.inputWrapper.classList.contains(qk)&&W([this.inputWrapper],[qk]),this.inputEle.setAttribute("aria-disabled","true"),this.inputWrapper.setAttribute("aria-disabled","true"))}cloneFields(e){return{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:this.cloneChildField(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}}cloneChildField(e){return"string"==typeof e?e:{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:e.child?this.cloneChildField(e.child):null,hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}}getTreeFields(e){return{dataSource:e.dataSource,id:e.value,text:e.text,parentID:e.parentValue,child:this.getTreeChildren(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,isChecked:e.selected,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}}getTreeChildren(e){if("string"==typeof e)return e;if(!f(e)){const t=e=this.getActualProperties(e);return e.value&&(t.id=e.value),e.parentValue&&(t.parentID=e.parentValue),e.child&&(t.child=this.getTreeChildren(e.child)),e.selected&&this.showCheckBox&&(t.isChecked=e.selected),t}return null}getTreeDataType(e,t){if(this.fields.dataSource instanceof ut){for(let i=0;i<e.length;i++)if("string"==typeof t.child&&f(U(t.child,e[i])))return 1;return 2}for(let i=0,s=e.length;i<s;i++){if("string"==typeof t.child&&!f(U(t.child,e[i])))return 2;if(!f(U(t.parentValue,e[i]))||!f(U(t.hasChildren,e[i])))return 1}return 1}setFields(){this.resetValue(),this.hasTemplate&&this.updateTemplate(),this.treeObj.fields=this.getTreeFields(this.fields),this.treeObj.dataBind()}getEventArgs(e){let s;return this.showCheckBox&&("check"===e.action?s="select":"uncheck"===e.action&&(s="un-select")),{action:this.showCheckBox?s:e.action,isInteracted:!!this.isClicked||e.isInteracted,item:e.node,itemData:this.showCheckBox?e.data[0]:e.nodeData}}onBeforeSelect(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value,null===this.value&&this.setProperties({value:[]},!0))}updateHiddenValue(){this.allowMultiSelection||this.showCheckBox||(this.hiddenElement.innerHTML=this.value&&this.value.length?'<option selected value ="'+this.value[0]+'">'+this.text+"</option>":"")}onNodeSelected(e){if(this.showCheckBox)return;let t;if(e.isInteracted){const s=U("id",e.nodeData).toString();this.allowMultiSelection?this.allowMultiSelection&&this.setMultiSelect():(this.hiddenElement.innerHTML="",this.setProperties({value:[s]},!0),t=this.itemTemplate?U("text",this.treeObj.getNode(s)):U("text",e.nodeData).toString(),Bt.setValue(t,this.inputEle,this.floatLabelType),this.setProperties({text:t},!0),this.currentText=this.text,this.currentValue=this.value,Rt(this.inputWrapper,{"aria-describedby":this.element.id}),Rt(this.inputWrapper,{"aria-activedescendant":s.toString()}),this.updateHiddenValue(),this.showOverAllClear(),this.hidePopup(),this.isNodeSelected=!0)}const i=this.getEventArgs(e);this.trigger("select",i),this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)}onNodeClicked(e){!this.changeOnBlur&&this.isNodeSelected&&(this.triggerChangeEvent(e.event),this.isNodeSelected=!1);const t=e.event.target;(t.classList.contains("e-fullrow")||t.classList.contains("e-list-text"))&&this.showCheckBox&&(this.isClicked=!0,"true"===this.treeObj.getNode(e.node).isChecked?this.treeObj.uncheckAll([e.node]):this.treeObj.checkAll([e.node]),this.isClicked=!1,this.setMultiSelect(),this.ensurePlaceHolder()),!this.changeOnBlur&&(this.allowMultiSelection||this.showCheckBox)&&this.triggerChangeEvent(e.event)}onNodeChecked(e){const t=this.getEventArgs(e);if(this.trigger("select",t),this.isFilteredData&&"uncheck"===e.action){const i=U("id",e.data[0]).toString();this.removeSelectedData(i,!0)}if(!this.isChipDelete&&e.isInteracted&&(this.setMultiSelect(),this.ensurePlaceHolder()),this.showSelectAll&&this.checkBoxElement){const i=this.treeObj.element.querySelectorAll("li"),s=this.treeObj.element.querySelectorAll("li .e-checkbox-wrapper[aria-checked=true]"),r=B(this.checkBoxElement,"."+sY);r&&"uncheck"===e.action?(this.isReverseUpdate=!0,this.changeState(r,"uncheck"),this.isReverseUpdate=!1):r&&"check"===e.action&&s.length===i.length&&(this.isReverseUpdate=!0,this.changeState(r,"check"),this.isReverseUpdate=!1)}}beforeCheck(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value)}updateClearButton(e){if(e?this.inputWrapper.contains(this.overAllClear)?(W([this.overAllClear],Qn),z([this.inputWrapper],g_)):this.inputEle.parentElement.insertBefore(this.overAllClear,this.inputEle.nextSibling):(z([this.overAllClear],Qn),W([this.inputWrapper],g_)),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper){const t=bt("."+tY,this.chipWrapper);for(let i=0;i<t.length;i++)e?W([t[i]],Qn):z([t[i]],Qn)}}updateDropDownIconState(e){const t=X("."+Pce,this.inputWrapper);e?(t?W([t],Qn):Bt.appendSpan(Ice,this.inputWrapper,this.createElement),z([this.inputWrapper],JK)):(z([t],Qn),W([this.inputWrapper],JK))}updateMode(){if("Custom"!==this.mode)if("Delimiter"!==this.mode){this.inputWrapper.contains(this.chipWrapper)||this.createChip();const e=this.getValidMode();this.chipWrapper.classList.contains(Qn)&&e?(W([this.chipWrapper],Qn),z([this.inputWrapper],Ep)):e||(z([this.chipWrapper],Qn),W([this.inputWrapper],Ep));const t=null!==this.value&&0!==this.value.length;e&&t?z([this.inputEle],Uh):W([this.inputEle],Uh)}else this.inputEle.classList.contains(Uh)&&(W([this.inputEle],Uh),this.chipWrapper&&(z([this.chipWrapper],Qn),W([this.inputWrapper],Ep)))}ensurePlaceHolder(){this.value&&0===this.value.length&&(W([this.inputEle],Uh),this.chipWrapper&&z([this.chipWrapper],Qn))}ensureClearIconPosition(e){"Never"!==e&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])}setMultiSelectValue(e){if(this.isFilteredData){const t=f(this.value)?[]:this.value;for(let i=0;i<e.length;i++)(f(this.value)||-1===this.value.indexOf(e[i]))&&t.push(e[i]);this.setProperties({value:t},!0)}else this.setProperties({value:e},!0),e&&0!==e.length&&!this.showCheckBox&&(this.treeObj.selectedNodes=this.value.slice(),this.treeObj.dataBind())}setMultiSelect(){this.showCheckBox&&!this.isDynamicChange?this.setMultiSelectValue(this.treeObj.checkedNodes.slice()):(this.setMultiSelectValue(this.allowMultiSelection?this.showCheckBox?this.treeObj.checkedNodes:this.treeObj.selectedNodes:this.value?this.showCheckBox?this.value:[this.value[0]]:null),this.showCheckBox&&null!==this.value&&(this.treeObj.checkedNodes=this.value,this.treeObj.dataBind())),this.selectedText=[];const e=!!this.allowMultiSelection||!!this.showCheckBox;this.inputWrapper.contains(this.chipWrapper)&&!e&&(W([this.inputEle],Uh),te(this.chipWrapper)),this.getValidMode()&&null!==this.value&&(z([this.inputEle],Uh),this.chipWrapper&&W([this.chipWrapper],Qn)),this.chipWrapper&&"Box"===this.mode&&!(this.value&&this.value.length)&&(z([this.chipWrapper],Qn),W([this.inputEle],Uh)),this.updateSelectedValues()}getSelectedData(e){let t=null;if(this.isFilteredData)for(let i=0;i<this.selectedData.length;i++)if(U(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[i]).toString()===e){t=this.selectedData[i];break}return f(t)&&(t=this.treeSettings.loadOnDemand?this.getNodeData(e):this.treeObj.getNode(e),f(t)||this.selectedData.push(t)),t}getNodeData(e){let t;if(f(e))return t;if(1!==this.treeDataType)return this.getChildNodeData(this.treeItems,this.fields,e);for(let i=0,s=this.treeItems.length;i<s;i++){const r=U(this.fields.value,this.treeItems[i]);if(!f(this.treeItems[i])&&!f(r)&&r.toString()===e)return this.treeItems[i]}return t}getChildNodeData(e,t,i){let s;if(f(e))return s;for(let r=0,o=e.length;r<o;r++){const a=U(t.value,e[r]);if(e[r]&&a&&a.toString()===i)return e[r];if("string"!=typeof t.child||f(U(t.child,e[r]))){if(this.fields.dataSource instanceof ut&&!f(U("child",e[r]))&&(s=this.getChildNodeData(U("child",e[r]),this.getChildMapperFields(t),i),void 0!==s))break}else{const l=U(t.child,e[r]);if(s=this.getChildNodeData(l,this.getChildMapperFields(t),i),void 0!==s)break}}return s}getChildMapperFields(e){return"string"==typeof e.child||f(e.child)?e:e.child}removeSelectedData(e,t){const i=f(this.value)?[]:this.value.slice();i.splice(i.indexOf(e),1),this.setProperties({value:i},t);for(let s=0;s<this.selectedData.length;s++)if(U(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[s]).toString()===e){this.selectedData.splice(s,1);break}}updateSelectedValues(){this.dataValue="";let e,t,s,i="";this.hiddenElement.innerHTML="";let r="";if((!this.isChipDelete||this.treeSettings.autoCheck)&&this.inputWrapper.contains(this.chipWrapper)&&(this.chipCollection.innerHTML=""),this.isFilteredData||(this.selectedData=[]),!f(this.value)){for(let a=0,l=this.value.length;a<l;a++)s=this.getSelectedData(this.value[a]),t=U(this.treeSettings.loadOnDemand?this.fields.text:"text",s),this.selectedText.push(t),e=this.selectedText[this.selectedText.length-1],this.selectedText.length>1?(this.dataValue+=this.delimiterChar+" "+e,i+=","+e):(this.dataValue+=e,i+=e),"Custom"!==this.mode&&"Delimiter"!==this.mode&&(!this.isChipDelete||this.treeSettings.autoCheck)&&(this.allowMultiSelection||this.showCheckBox)&&this.setChipValues(e,this.value[a]),r+='<option selected value ="'+this.value[a]+'">'+this.selectedText[this.selectedText.length-1]+"</option>";this.selectedText.length>=1&&this.setProperties({text:i},!0),this.hiddenElement.innerHTML=r,"Custom"===this.mode&&(this.allowMultiSelection||this.showCheckBox)&&this.setTagValues()}const o=this.getValidMode();"Custom"!==this.mode&&"Box"!==this.mode&&(this.allowMultiSelection||this.showCheckBox)&&!o&&this.chipWrapper&&(z([this.chipWrapper],Qn),W([this.inputWrapper],Ep)),Bt.setValue(this.dataValue,this.inputEle,this.floatLabelType),this.setProperties(""===i?{text:null}:{text:i},!0),this.showClearButton&&this.inputFocus&&this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition(),this.currentText=this.text,this.currentValue=this.value}setChipValues(e,t){this.inputWrapper.contains(this.chipWrapper)||this.createChip();const i=this.createElement("span",{className:eY,attrs:{"data-value":t}}),s=this.createElement("span",{className:kce}),r=this.createElement("span",{className:tY+" e-icons"});s.innerHTML=e,i.appendChild(s),this.chipCollection.appendChild(i),this.showClearButton&&(i.appendChild(r),k.add(r,"mousedown",this.removeChip,this))}setTagValues(){if(null===this.value||null==this.text)return;this.inputWrapper.contains(this.chipWrapper)||this.createChip(),this.inputWrapper.classList.contains(Ep)||z([this.inputWrapper],Ep);const e=this.createElement("span",{className:eY});this.inputEle.classList.contains(Uh)||z([this.inputEle],Uh),this.chipWrapper.classList.contains(Qn)&&W([this.chipWrapper],Qn);const t=this.createElement("span",{className:kce}),s=this.customTemplateId;let a=this.templateComplier(this.customTemplate)({value:this.value,text:this.text},this,"customTemplate",s,this.isStringTemplate,void 0,t);a&&(a=Array.prototype.slice.call(a),mi(a,t)),e.appendChild(t),this.chipCollection.appendChild(e)}setSelectAllWrapper(e){this.isFirstRender||(e&&!this.popupEle.contains(this.checkAllParent)&&this.showCheckBox?(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)):this.popupEle.contains(this.checkAllParent)&&(te(this.checkAllParent),this.checkAllParent=null))}setHeaderTemplate(){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),z([this.header],Nce));let t=this.templateComplier(this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,void 0,this.header);t&&(t=Array.prototype.slice.call(t),mi(t,this.header)),this.popupEle.insertBefore(this.header,this.checkAllParent?this.checkAllParent:this.popupDiv)}templateComplier(e){if(e)try{return document.querySelectorAll(e).length?ji(document.querySelector(e).innerHTML.trim()):ji(e)}catch(t){return ji(e)}return ji(e)}setFooterTemplate(){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),z([this.footer],Fce));let t=this.templateComplier(this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,void 0,this.footer);t&&(t=Array.prototype.slice.call(t),mi(t,this.footer)),mi([this.footer],this.popupEle)}clearAll(e){!this.enabled||this.readonly||(this.resetValue(),this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&(this.popupObj&&this.popupObj.refreshPosition(),this.wrapText||this.updateOverflowWrapper(!0)),e&&(this.isClearButtonClick=!0),this.changeOnBlur||this.triggerChangeEvent(e))}removeChip(e){if(!this.enabled||this.readonly)return;const t=e.target.parentElement,i=t.getAttribute("data-value");this.chipCollection&&t&&Yt(t),this.isChipDelete=!0,this.isClearButtonClick=!0,this.removeSelectedData(i,!0),this.selectedText=[],this.allowMultiSelection&&(this.treeObj.selectedNodes=this.value.slice(),this.updateSelectedValues()),this.showCheckBox&&(this.treeObj.uncheckAll([i]),this.clearCheckAll(),this.setMultiSelect()),this.triggerChangeEvent(e),this.isChipDelete=!1,this.ensurePlaceHolder()}resetValue(e){this.value===[]&&null===this.text||(Bt.setValue(null,this.inputEle,this.floatLabelType),e||(this.oldValue=this.value,this.setProperties({value:[]},!0)),this.dataValue=null,this.setProperties({text:null},!0),this.selectedData=[],zt("selectedNodes",[],this.treeObj),this.hiddenElement.innerHTML="",this.showCheckBox&&(this.treeObj.checkedNodes=[],this.treeObj.dataBind(),this.setMultiSelect(),this.clearCheckAll()),null!==this.oldValue||e?e&&this.triggerChangeEvent():this.removeValue=!0,(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper&&(this.chipCollection.innerHTML="",this.wrapText||this.updateOverflowWrapper(!0),this.ensurePlaceHolder()))}clearCheckAll(){this.showSelectAll&&this.value&&0===this.value.length&&this.setLocale(!1)}selectAllItems(e){if(this.showCheckBox)e?this.treeObj.checkAll():this.treeObj.uncheckAll(),this.checkSelectAll=!0;else if(this.allowMultiSelection)if(e){const t=bt("li",this.treeObj.element);let i;const s=[];for(let r=0;r<t.length;r++)i=t[r].getAttribute("data-uid").toString(),s.push(i);this.treeObj.selectedNodes=s}else this.treeObj.selectedNodes=[];this.updateMode(),this.setMultiSelect(),this.wrapText||(e?this.updateView():this.updateOverflowWrapper(!0))}updateTreeSettings(e){const t=Object.keys(e.treeSettings)[0];if("autoCheck"===t)this.ensureAutoCheck(),this.treeObj.autoCheck=this.treeSettings.autoCheck;else if("loadOnDemand"===t)this.treeObj.loadOnDemand=this.treeSettings.loadOnDemand;else if("expandOn"===t)return this.treeObj.expandOn=this.treeSettings.expandOn,void this.treeObj.dataBind();this.treeObj.dataBind(),this.setMultiSelect(),this.updateValue(this.value)}updateCheckBoxState(e){this.hasTemplate&&this.updateTemplate(),this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.showCheckBox=e,this.treeObj.dataBind(),this.isDynamicChange=!0,this.setSelectAllWrapper(this.showSelectAll),this.showSelectAll&&this.setLocale(),this.showCheckBox&&this.updateMode(),this.setMultiSelect(),this.isDynamicChange=!1}updateTemplate(){this.popupObj&&(this.clearTemplate(),this.portals=[],this.popupObj.destroy(),this.isPopupOpen?(this.hidePopup(),this.isFirstRender=!0,this.renderPopup()):this.isFirstRender=!0)}l10nUpdate(e){if(this.noRecord?this.noRecord.innerHTML="":(this.noRecord=this.createElement("div"),z([this.noRecord],"e-ddt-nodata"),Qr([this.noRecord],this.popupDiv)),"No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){const i=e?this.actionFailureTemplateId:this.noRecordsTemplateId,s=e?"actionFailureTemplate":"noRecordsTemplate";let o=this.templateComplier(e?this.actionFailureTemplate:this.noRecordsTemplate)({},this,s,i,this.isStringTemplate,void 0,this.noRecord);o&&(o=Array.prototype.slice.call(o),mi(o,this.noRecord))}else{const t={noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"};this.l10n=new jo(this.getLocaleName(),t,this.locale),this.noRecord.innerHTML=this.l10n.getConstant(e?"actionFailureTemplate":"noRecordsTemplate")}}updateRecordTemplate(e){this.treeItems&&this.treeItems.length<=0&&(this.l10nUpdate(e),this.hasTemplate&&this.updateTemplate())}updateOverflowWrapper(e){e?this.inputWrapper.contains(this.overFlowWrapper)&&e&&(this.overFlowWrapper.innerHTML=""):this.inputWrapper.contains(this.overFlowWrapper)||(this.overFlowWrapper=this.createElement("span",{className:rY+" "+Qn}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement))}updateMultiSelection(e){this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.allowMultiSelection=e,this.treeObj.dataBind(),this.updateOption(),this.allowMultiSelection&&this.updateMode(),this.setMultiSelect()}updateAllowFiltering(e){this.isFirstRender||(e?this.renderFilter():this.destroyFilter()),this.ensureAutoCheck()}updateFilterPlaceHolder(){this.filterObj&&(this.filterObj.placeholder=this.filterBarPlaceholder,this.filterObj.element.setAttribute("aria-label",this.filterBarPlaceholder))}updateValue(e){this.isDynamicChange=!0,f(e)||0===e.length?this.resetValue(!0):(this.setTreeValue(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue(),this.isDynamicChange=!1}updateText(e){f(e)?this.resetValue():(this.setTreeText(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue()}updateModelMode(){if(this.allowMultiSelection||this.showCheckBox){if(!this.wrapText){const t=X("."+rY,this.inputWrapper);t&&(t.innerHTML="")}this.updateMode(),this.setMultiSelect(),!this.wrapText&&this.value&&0!==this.value.length&&(this.updateOverFlowView(),z([this.inputEle],Uh),"Box"===this.mode?W([this.overFlowWrapper,this.inputWrapper],Gk):z([this.overFlowWrapper,this.inputWrapper],Gk))}}updateOption(){this.hiddenElement.hasAttribute("multiple")||!this.allowMultiSelection&&!this.showCheckBox?this.hiddenElement.hasAttribute("multiple")&&!this.allowMultiSelection&&!this.showCheckBox&&this.hiddenElement.removeAttribute("multiple"):this.hiddenElement.setAttribute("multiple","")}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"width":this.setElementWidth(e.width),this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"placeholder":Bt.setPlaceholder(e.placeholder,this.inputEle);break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRTL(this.enableRtl);break;case"fields":this.setFields();break;case"readonly":Bt.setReadonly(e.readonly,this.inputEle);break;case"enabled":this.setEnable();break;case"floatLabelType":Bt.removeFloating(this.inputObj),Bt.addFloating(this.inputEle,e.floatLabelType,this.placeholder,this.createElement),this.ensureClearIconPosition(e.floatLabelType);break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"allowFiltering":this.updateAllowFiltering(e.allowFiltering);break;case"filterBarPlaceholder":this.updateFilterPlaceHolder();break;case"value":this.oldValue=t.value,this.updateValue(e.value);break;case"text":this.updateText(e.text);break;case"allowMultiSelection":this.updateMultiSelection(e.allowMultiSelection);break;case"mode":if(!this.showCheckBox&&!this.allowMultiSelection)return;"Custom"===this.mode?(this.overFlowWrapper&&te(this.overFlowWrapper),this.chipWrapper&&te(this.chipWrapper),this.setTagValues()):("Custom"===t.mode&&this.updateOverflowWrapper(this.wrapText),this.updateModelMode());break;case"delimiterChar":if("Box"===this.mode)return;(this.showCheckBox||this.allowMultiSelection)&&this.setMultiSelect();break;case"selectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale();break;case"unSelectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale(!1);break;case"showSelectAll":this.showCheckBox&&(this.setSelectAllWrapper(e.showSelectAll),this.updatePopupHeight());break;case"showCheckBox":this.updateCheckBoxState(e.showCheckBox),this.wrapText||this.updateOverflowWrapper(!0),this.updatePopupHeight(),this.updateOption();break;case"treeSettings":this.updateTreeSettings(e);break;case"customTemplate":if("Custom"!==this.mode)return;this.chipCollection.innerHTML="",this.setTagValues();break;case"sortOrder":this.hasTemplate&&this.updateTemplate(),this.treeObj.sortOrder=e.sortOrder,this.treeObj.dataBind(),this.updateValue(this.value);break;case"showDropDownIcon":this.updateDropDownIconState(e.showDropDownIcon);break;case"popupWidth":this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"popupHeight":this.popupObj&&this.updatePopupHeight();break;case"zIndex":this.popupObj&&(this.popupObj.zIndex=e.zIndex,this.popupObj.dataBind());break;case"headerTemplate":case"footerTemplate":this.updateTemplate();break;case"itemTemplate":this.updateTemplate(),this.treeObj.nodeTemplate=e.itemTemplate,this.treeObj.dataBind();break;case"noRecordsTemplate":this.updateRecordTemplate();break;case"actionFailureTemplate":this.updateRecordTemplate(!0);break;case"htmlAttributes":this.setHTMLAttributes();break;case"wrapText":this.updateOverflowWrapper(this.wrapText),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText?(z([this.overFlowWrapper],Qn),this.chipWrapper&&"Box"===this.mode?W([this.chipWrapper],Qn):(W([this.inputWrapper],Ep),W([this.inputEle],Uh)),this.ensurePlaceHolder()):this.updateView()}}clear(){this.clearAll(),this.inputFocus?this.onFocusOut():(this.changeOnBlur&&this.triggerChangeEvent(),this.removeValue=!1)}destroy(){this.clearTemplate(),this.unWireEvents(),this.setCssClass(null,this.cssClass),this.setProperties({value:[]},!0),this.setProperties({text:null},!0),this.treeObj.destroy(),this.destroyFilter(),this.popupObj&&(this.popupObj.destroy(),te(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),Bt.setValue(null,this.inputEle,this.floatLabelType),te(this.inputWrapper),te(this.popupDiv),this.element.classList.remove("e-input"),(this.showCheckBox||this.allowMultiSelection)&&this.element.classList.remove(Uh),super.destroy()}destroyFilter(){this.filterObj&&(this.filterObj.destroy(),te(this.filterObj.element),te(this.filterContainer),this.filterObj=null)}ensureVisible(e){this.treeObj.ensureVisible(e)}getData(e){return this.treeObj.getTreeData(e)}hidePopup(){const e={popup:this.popupObj};this.inputWrapper.classList.remove(Dce),this.popupEle&&z([this.popupEle],Ij),Rt(this.inputWrapper,{"aria-expanded":"false"}),this.popupObj&&this.isPopupOpen&&(this.popupObj.hide(),this.inputFocus&&(this.inputWrapper.focus(),this.allowFiltering&&z([this.inputWrapper],[qk])),this.trigger("close",e))}selectAll(e){this.selectAllItems(e)}showPopup(){!this.enabled||this.readonly||this.isPopupOpen||(this.renderPopup(),this.focusIn())}getModuleName(){return"dropdowntree"}};Ti([_("The Request Failed")],ls.prototype,"actionFailureTemplate",void 0),Ti([_(!1)],ls.prototype,"allowFiltering",void 0),Ti([_(!1)],ls.prototype,"allowMultiSelection",void 0),Ti([_(!0)],ls.prototype,"changeOnBlur",void 0),Ti([_("")],ls.prototype,"cssClass",void 0),Ti([_("${value.length} item(s) selected")],ls.prototype,"customTemplate",void 0),Ti([_(",")],ls.prototype,"delimiterChar",void 0),Ti([_(!0)],ls.prototype,"enabled",void 0),Ti([di({},Vd)],ls.prototype,"fields",void 0),Ti([_(null)],ls.prototype,"filterBarPlaceholder",void 0),Ti([_("StartsWith")],ls.prototype,"filterType",void 0),Ti([_("Never")],ls.prototype,"floatLabelType",void 0),Ti([_(null)],ls.prototype,"footerTemplate",void 0),Ti([_(!1)],ls.prototype,"ignoreAccent",void 0),Ti([_(!0)],ls.prototype,"ignoreCase",void 0),Ti([_(null)],ls.prototype,"headerTemplate",void 0),Ti([_({})],ls.prototype,"htmlAttributes",void 0),Ti([_(null)],ls.prototype,"itemTemplate",void 0),Ti([_("Default")],ls.prototype,"mode",void 0),Ti([_("No Records Found")],ls.prototype,"noRecordsTemplate",void 0),Ti([_(null)],ls.prototype,"placeholder",void 0),Ti([_("300px")],ls.prototype,"popupHeight",void 0),Ti([_("100%")],ls.prototype,"popupWidth",void 0),Ti([_(!1)],ls.prototype,"readonly",void 0),Ti([_(!1)],ls.prototype,"showSelectAll",void 0),Ti([_("Select All")],ls.prototype,"selectAllText",void 0),Ti([_(!1)],ls.prototype,"showCheckBox",void 0),Ti([_(!0)],ls.prototype,"showClearButton",void 0),Ti([_(!0)],ls.prototype,"showDropDownIcon",void 0),Ti([_("None")],ls.prototype,"sortOrder",void 0),Ti([_(null)],ls.prototype,"text",void 0),Ti([di({},kj)],ls.prototype,"treeSettings",void 0),Ti([_("Unselect All")],ls.prototype,"unSelectAllText",void 0),Ti([_(null)],ls.prototype,"value",void 0),Ti([_("100%")],ls.prototype,"width",void 0),Ti([_(1e3)],ls.prototype,"zIndex",void 0),Ti([_(!1)],ls.prototype,"wrapText",void 0),Ti([G()],ls.prototype,"actionFailure",void 0),Ti([G()],ls.prototype,"beforeOpen",void 0),Ti([G()],ls.prototype,"change",void 0),Ti([G()],ls.prototype,"close",void 0),Ti([G()],ls.prototype,"blur",void 0),Ti([G()],ls.prototype,"created",void 0),Ti([G()],ls.prototype,"dataBound",void 0),Ti([G()],ls.prototype,"destroyed",void 0),Ti([G()],ls.prototype,"filtering",void 0),Ti([G()],ls.prototype,"focus",void 0),Ti([G()],ls.prototype,"keyPress",void 0),Ti([G()],ls.prototype,"open",void 0),Ti([G()],ls.prototype,"select",void 0),ls=Ti([as],ls);var ha=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Bce="e-atc-spinner-icon";xi.root="e-combobox";const VAe={container:null,buttons:[]};let wo=class extends _r{constructor(e,t){super(e,t)}preRender(){super.preRender()}getLocaleName(){return"combo-box"}wireEvent(){"combobox"===this.getModuleName()&&(k.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),k.add(this.inputWrapper.container,"blur",this.onBlurHandler,this)),f(this.inputWrapper.buttons[0])||k.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),k.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(k.add(this.inputElement,"input",this.onInput,this),k.add(this.inputElement,"keyup",this.onFilterUp,this),k.add(this.inputElement,"keydown",this.onFilterDown,this),k.add(this.inputElement,"paste",this.pasteHandler,this)),this.bindCommonEvent()}preventBlur(e){(!this.allowFiltering&&document.activeElement!==this.inputElement&&!document.activeElement.classList.contains(xi.input)&&q.isDevice||!q.isDevice)&&e.preventDefault()}onBlurHandler(e){const t=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;!f(this.listData)&&!f(t)&&t!==this.text&&this.customValue(e),super.onBlurHandler(e)}targetElement(){return this.inputElement}setOldText(e){Bt.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()}setOldValue(e){this.valueMuteChange(this.allowCustom?this.value:null),this.removeSelection(),this.setHiddenValue()}valueMuteChange(e){const t=f(e)?null:e.toString();Bt.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e,text:e,index:null},!0),this.activeIndex=this.index;const i=this.fields,s={};s[i.text]=f(e)?null:e.toString(),s[i.value]=f(e)?null:e.toString(),this.itemData=s,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)}updateValues(){if(f(this.value))if(this.text&&f(this.value)){const e=this.getElementByText(this.text);e?this.setSelection(e,null):(Bt.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else{const e=this.getElementByValue(this.value);e?this.setSelection(e,null):this.valueMuteChange(this.allowCustom?this.value:null)}this.setHiddenValue(),Bt.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}updateIconState(){this.showClearButton&&(this.inputElement&&""!==this.inputElement.value&&!this.readonly?W([this.inputWrapper.clearButton],xi.clearIconHide):z([this.inputWrapper.clearButton],xi.clearIconHide))}getAriaAttributes(){return{"aria-owns":this.element.id+"_options",role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-hasPopup":"true","aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}}searchLists(e){this.isTyped=!0,this.isFiltering()?(super.searchLists(e),this.ulElement&&""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+xi.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+xi.li)),this.incrementalSearch(e))}getNgDirective(){return"EJS-COMBOBOX"}setSearchBox(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:VAe}onActionComplete(e,t,i,s){super.onActionComplete(e,t,i),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&setTimeout(()=>{this.inlineSearch()})}getFocusElement(){const e=this.isSelectCustom?{text:""}:this.getItemData(),t=this.list.querySelector("."+xi.selected);if(e.text===this.inputElement.value&&!f(t))return t;if((q.isDevice&&!this.isDropDownClick||!q.isDevice)&&!f(this.liCollections)&&this.liCollections.length>0){const o=m_(this.inputElement.value,this.liCollections,this.filterType,!0).item;if(f(o))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{const a=this.getIndexByValue(o.getAttribute("data-value"))-1,l=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);isNaN(l)||"autocomplete"===this.getModuleName()||(this.removeFocus(),this.list.scrollTop=a*l+(this.fields.groupBy?this.liCollections[0].offsetHeight:0),z([o],xi.focus))}return o}return null}setValue(e){return e&&"keydown"===e.type&&"enter"===e.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&e&&"keydown"===e.type&&"enter"!==e.action?(this.preventAutoFill=!1,this.inlineSearch(e),!1):super.setValue(e)}checkCustomValue(){this.itemData=this.getDataByValue(this.value);const e=this.getItemData();this.allowCustom&&f(e.value)&&f(e.text)||this.setProperties({value:e.value,text:e.text},!this.allowCustom)}showSpinner(){f(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||Bt.appendSpan("e-input-group-icon "+Bce,this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,z([this.spinnerElement],xi.disableIcon),vp({target:this.spinnerElement,width:q.isDevice?"16px":"14px"},this.createElement),xa(this.spinnerElement))}hideSpinner(){f(this.spinnerElement)||(Rl(this.spinnerElement),W([this.spinnerElement],xi.disableIcon),this.spinnerElement.classList.contains(Bce)?te(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)}setAutoFill(e,t){if(t||this.setHoverList(e),this.autofill&&!this.preventAutoFill){const i=this.getTextByValue(e.getAttribute("data-value")).toString(),s=this.getFormattedValue(e.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===s?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value")))),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i,t)}}isAndroidAutoFill(e){if(q.isAndroid){const t=this.getSelectionPoints(),i=this.prevSelectPoints.end,s=t.end,r=this.prevSelectPoints.start,o=t.start;return 0!==i&&(i===e.length&&r===e.length||r>o&&i>s||i===s&&r===o)}return!1}clearAll(e,t){(f(t)||!f(t)&&f(t.dataSource))&&super.clearAll(e),this.isFiltering()&&!f(e)&&e.target===this.inputWrapper.clearButton&&this.searchLists(e)}isSelectFocusItem(e){return!f(e)}inlineSearch(e){const t=e&&("down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action||"pageUp"===e.action||"pageDown"===e.action),i=t?this.liCollections[this.activeIndex]:this.getFocusElement();if(f(i))if(""===this.inputElement.value){this.activeIndex=null,this.list.scrollTop=0;const s=this.list.querySelector("."+xi.li);this.setHoverList(s)}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length>0&&!this.isCustomFilter&&this.removeFocus();else{if(!t){const s=this.getFormattedValue(i.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(s),this.activeIndex=f(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(i,t)}}incrementalSearch(e){this.showPopup(),f(this.listData)||(this.inlineSearch(e),e.preventDefault())}setAutoFillSelection(e,t=!1){const i=this.getSelectionPoints(),s=this.inputElement.value.substr(0,i.start);if(s&&s.toLowerCase()===e.substr(0,i.start).toLowerCase()){const r=s+e.substr(s.length,e.length);Bt.setValue(r,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(i.start,this.inputElement.value.length)}else t&&(Bt.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length))}getValueByText(e){return super.getValueByText(e,!0,this.ignoreAccent)}unWireEvent(){"combobox"===this.getModuleName()&&(k.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),k.remove(this.inputWrapper.container,"blur",this.onBlurHandler)),f(this.inputWrapper.buttons[0])||k.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),this.inputElement&&(k.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(k.remove(this.inputElement,"input",this.onInput),k.remove(this.inputElement,"keyup",this.onFilterUp),k.remove(this.inputElement,"keydown",this.onFilterDown),k.remove(this.inputElement,"paste",this.pasteHandler))),this.unBindCommonEvent()}setSelection(e,t){super.setSelection(e,t),!f(e)&&!this.autofill&&!this.isDropDownClick&&this.removeFocus()}selectCurrentItem(e){let t;this.isPopupOpen&&(t=this.list.querySelector(this.isSelected?"."+xi.selected:"."+xi.focus),t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),"enter"===e.action&&""===this.inputElement.value.trim()?this.clearAll(e):this.isTyped&&!this.isSelected&&f(t)&&this.customValue(e),this.hidePopup()}setHoverList(e){this.removeSelection(),this.isValidLI(e)&&!e.classList.contains(xi.selected)&&(this.removeFocus(),e.classList.add(xi.focus))}targetFocus(e){q.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(e)}dropDownClick(e){e.preventDefault(),q.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),super.dropDownClick(e)}customValue(e){const t=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){const i=this.value;if(f(t)){const s=""===this.inputElement.value?null:this.inputElement.value,r={text:s,item:{}};this.initial?this.updateCustomValueCallback(s,r,i):this.trigger("customValueSpecifier",r,o=>{this.updateCustomValueCallback(s,o,i,e)})}else this.isSelectCustom=!1,this.setProperties({value:t}),i!==this.value&&this.onChangeEvent(e)}else this.allowCustom&&(this.isSelectCustom=!0);else{const i=this.previousValue,s=this.value;this.setProperties({value:t}),f(this.value)&&Bt.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&i===this.value&&s!==this.value&&this.onChangeEvent(null)}}updateCustomValueCallback(e,t,i,s){const r=this.fields,o=t.item;let a={};o&&U(r.text,o)&&U(r.value,o)?a=o:(zt(r.text,e,a),zt(r.value,e,a)),this.itemData=a;const l={text:U(r.text,this.itemData),value:U(r.value,this.itemData),index:null};this.setProperties(l,!0),this.setSelection(null,null),this.isSelectCustom=!0,i!==this.value&&this.onChangeEvent(s)}onPropertyChanged(e,t){"combobox"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(const i of Object.keys(e))switch(i){case"readonly":Bt.setReadonly(this.readonly,this.inputElement),this.readonly?(k.remove(this.inputElement,"input",this.onInput),k.remove(this.inputElement,"keyup",this.onFilterUp),k.remove(this.inputElement,"keydown",this.onFilterDown)):(k.add(this.inputElement,"input",this.onInput,this),k.add(this.inputElement,"keyup",this.onFilterUp,this),k.add(this.inputElement,"keydown",this.onFilterDown,this)),this.setReadOnly();break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&f(this.list)&&super.renderList();break;case"allowCustom":break;default:{const s=this.getPropObject(i,e,t);super.onPropertyChanged(s.newProperty,s.oldProperty),this.isFiltering()&&"dataSource"===i&&f(this.list)&&this.itemTemplate&&"combobox"===this.getModuleName()&&super.renderList();break}}}render(){super.render(),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&f(this.list)&&super.renderList(),this.renderComplete()}getModuleName(){return"combobox"}addItem(e,t){super.addItem(e,t)}filter(e,t,i){super.filter(e,t,i)}showPopup(){super.showPopup()}hidePopup(e){const t=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;if(!f(this.listData)){const i=this.isEscapeKey;this.isEscapeKey&&(Bt.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();const s=this.isSelectCustom?{text:""}:this.getItemData(),r=this.list.querySelector("."+xi.selected);if(this.inputElement&&s.text===this.inputElement.value&&!f(r))return this.isSelected&&(this.onChangeEvent(e),this.isSelectCustom=!1),void super.hidePopup(e);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){const o=m_(this.inputElement.value,this.liCollections,"Equal",!0);this.selectedLI=o.item,f(o.index)&&(o.index=m_(this.inputElement.value,this.liCollections,"StartsWith",!0).index),this.activeIndex=o.index,f(this.selectedLI)?i&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}!this.isEscapeKey&&this.isTyped&&!this.isInteracted&&this.customValue(e)}f(this.listData)&&this.allowCustom&&!f(t)&&t!==this.value&&this.customValue(),super.hidePopup(e)}focusIn(){!this.enabled||(q.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),super.focusIn())}clear(){this.value=null}focusOut(e){super.focusOut(e)}getItems(){return super.getItems()}getDataByValue(e){return super.getDataByValue(e)}renderHightSearch(){}};ha([_(!1)],wo.prototype,"autofill",void 0),ha([_(!0)],wo.prototype,"allowCustom",void 0),ha([_({})],wo.prototype,"htmlAttributes",void 0),ha([_(!1)],wo.prototype,"allowFiltering",void 0),ha([_(null)],wo.prototype,"query",void 0),ha([_(null)],wo.prototype,"index",void 0),ha([_(!0)],wo.prototype,"showClearButton",void 0),ha([_(!1)],wo.prototype,"enableRtl",void 0),ha([G()],wo.prototype,"customValueSpecifier",void 0),ha([G()],wo.prototype,"filtering",void 0),ha([_(null)],wo.prototype,"valueTemplate",void 0),ha([_("Never")],wo.prototype,"floatLabelType",void 0),ha([_(null)],wo.prototype,"filterBarPlaceholder",void 0),ha([_(null)],wo.prototype,"cssClass",void 0),ha([_(null)],wo.prototype,"headerTemplate",void 0),ha([_(null)],wo.prototype,"footerTemplate",void 0),ha([_(null)],wo.prototype,"placeholder",void 0),ha([_("100%")],wo.prototype,"width",void 0),ha([_("300px")],wo.prototype,"popupHeight",void 0),ha([_("100%")],wo.prototype,"popupWidth",void 0),ha([_(!1)],wo.prototype,"readonly",void 0),ha([_(null)],wo.prototype,"text",void 0),ha([_(null)],wo.prototype,"value",void 0),wo=ha([as],wo);var _c=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};xi.root="e-autocomplete",xi.icon="e-input-group-icon e-ddl-icon e-search-icon";let qh=class extends wo{constructor(e,t){super(e,t),this.isFiltered=!1,this.searchList=!1}preRender(){super.preRender()}getLocaleName(){return"auto-complete"}getNgDirective(){return"EJS-AUTOCOMPLETE"}getQuery(e){const t=e?e.clone():this.query?this.query.clone():new Ut,i=""!==this.queryString||f(this.value)?this.filterType:"equal",s=""!==this.queryString||f(this.value)?this.queryString:this.value;if(this.isFiltered)return t;if(null!==this.queryString&&""!==this.queryString){const r=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof ut||"string"!==r)&&"number"!==r){const o=f(this.fields.value)?"":this.fields.value;t.where(o,i,s,this.ignoreCase,this.ignoreAccent)}else t.where("",i,s,this.ignoreCase,this.ignoreAccent)}if(!f(this.suggestionCount)){if(20!==this.suggestionCount)for(let r=0;r<t.queries.length;r++)"onTake"===t.queries[r].fn&&t.queries.splice(r,1);t.take(this.suggestionCount)}return t}searchLists(e){if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,f(this.list)&&super.renderList(!0),this.queryString=this.filterInput.value,"mousedown"!==e.type&&(40===e.keyCode||38===e.keyCode))return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields);this.isSelected=!1,this.activeIndex=null;const t={preventDefaultAction:!1,text:this.filterInput.value,updateData:(i,s,r)=>{t.cancel||(this.isFiltered=!0,this.filterAction(i,s,r))},cancel:!1};this.trigger("filtering",t,i=>{!i.cancel&&!this.isFiltered&&!i.preventDefaultAction&&(this.searchList=!0,this.filterAction(this.dataSource,null,this.fields))})}filter(e,t,i){this.isFiltered=!0,this.filterAction(e,t,i)}filterAction(e,t,i){this.beforePopupOpen=!0,""!==this.queryString&&this.queryString.length>=this.minLength?this.resetList(e,i,t):(this.hidePopup(),this.beforePopupOpen=!1),this.renderReactTemplates()}clearAll(e,t){(f(t)||!f(t)&&f(t.dataSource))&&super.clearAll(e),this.beforePopupOpen&&this.hidePopup()}onActionComplete(e,t,i,s){this.fixedHeaderElement=null,super.onActionComplete(e,t,i);const r=this.list.querySelector("."+xi.li);f(r)||W([r],xi.focus),this.postBackAction()}postBackAction(){if(this.autofill&&!f(this.liCollections[0])&&this.searchList){const t=m_(this.inputElement.value,[this.liCollections[0]],"StartsWith",this.ignoreCase);this.searchList=!1,f(t.item)||super.setAutoFill(this.liCollections[0],!0)}}setSelection(e,t){if(this.isValidLI(e))if(!f(t)&&"keydown"===t.type&&"enter"!==t.action&&"tab"!==t.action&&this.isValidLI(e)){const i=this.getFormattedValue(e.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(i),this.setHoverList(e),this.selectedLI=e,this.setScrollPosition(t),this.autofill&&this.isPopupOpen&&(this.preventAutoFill=!1,super.setAutoFill(e,t&&"down"===t.action||"up"===t.action||"home"===t.action||"end"===t.action||"pageUp"===t.action||"pageDown"===t.action)),Rt(this.inputElement,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}else super.setSelection(e,t)}listOption(e,t){const i=super.listOption(e,t);if(f(i.itemCreated))i.itemCreated=s=>{this.highlight&&(this.element.tagName===this.getNgDirective()&&this.itemTemplate?setTimeout(()=>{_j(s.item,this.queryString,this.ignoreCase,this.filterType)},0):_j(s.item,this.queryString,this.ignoreCase,this.filterType))};else{const s=i.itemCreated;i.itemCreated=r=>{this.highlight&&_j(r.item,this.queryString,this.ignoreCase,this.filterType),s.apply(this,[r])}}return i}isFiltering(){return!0}renderPopup(){this.list.scrollTop=0,super.renderPopup()}isEditTextBox(){return""!==this.inputElement.value.trim()}isPopupButton(){return this.showPopupButton}isSelectFocusItem(e){return!1}showPopup(){if(this.enabled){if(this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.preventAutoFill=!0,f(this.list)?this.renderList():this.resetList(this.dataSource,this.fields)}}hidePopup(){super.hidePopup(),this.activeIndex=-1}onPropertyChanged(e,t){"autocomplete"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e);for(const i of Object.keys(e))switch(i){case"showPopupButton":if(this.showPopupButton){const s=Bt.appendSpan(xi.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=s,this.inputWrapper&&this.inputWrapper.buttons&&this.inputWrapper.buttons[0]&&k.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else te(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null;break;default:{const s=this.getPropObject(i,e,t);super.onPropertyChanged(s.newProperty,s.oldProperty);break}}}renderHightSearch(){if(this.highlight)for(let e=0;e<this.liCollections.length;e++)this.ulElement.querySelector(".e-active")||(mAe(this.liCollections[e]),_j(this.liCollections[e],this.queryString,this.ignoreCase,this.filterType))}getModuleName(){return"autocomplete"}render(){super.render()}};_c([di({value:null,iconCss:null,groupBy:null},XK)],qh.prototype,"fields",void 0),_c([_(!0)],qh.prototype,"ignoreCase",void 0),_c([_(!1)],qh.prototype,"showPopupButton",void 0),_c([_(!1)],qh.prototype,"highlight",void 0),_c([_(20)],qh.prototype,"suggestionCount",void 0),_c([_({})],qh.prototype,"htmlAttributes",void 0),_c([_(null)],qh.prototype,"query",void 0),_c([_(1)],qh.prototype,"minLength",void 0),_c([_("Contains")],qh.prototype,"filterType",void 0),_c([G()],qh.prototype,"filtering",void 0),_c([_(null)],qh.prototype,"index",void 0),_c([_("Never")],qh.prototype,"floatLabelType",void 0),_c([_(null)],qh.prototype,"valueTemplate",void 0),_c([_(null)],qh.prototype,"filterBarPlaceholder",void 0),_c([_(!1)],qh.prototype,"allowFiltering",void 0),_c([_(null)],qh.prototype,"text",void 0),qh=_c([as],qh);const oY="e-float-line",CP="e-float-text",Kk="e-label-top",b_="e-label-bottom";function Hce(n,e,t,i,s,r,o){const a=Be("span",{className:oY}),l=Be("label",{className:CP});!f(t.id)&&""!==t.id&&(l.id="label_"+t.id.replace(/ /g,"_"),Rt(t,{"aria-labelledby":l.id})),!f(i.placeholder)&&""!==i.placeholder&&(l.innerText=aY(i.placeholder),i.removeAttribute("placeholder")),l.innerText=aY(o),e.appendChild(a),e.appendChild(l),n.classList.add("e-float-input"),function zAe(n,e){n&&n.length>0?(z([e],Kk),W([e],b_)):(W([e],Kk),z([e],b_))}(s,l),"Always"===r&&(l.classList.contains(b_)&&W([l],b_),z([l],Kk))}function Vce(n,e,t){e.placeholder=n&&n.length?"":t}function aY(n){let e="";if(!f(n)&&""!==n){const t=document.createElement("span");t.innerHTML='<input  placeholder="'+n+'"/>',e=t.children[0].placeholder}return e}var Ui=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const y_="e-input-focus",zce="e-disabled",eo="e-hide-listitem",Yk="e-chips",Rj="e-chips-close",Zk="e-chip-selected",jce="e-delimiter",Aj="e-zero-size",Uce="e-chips-close e-close-hooker",qce="e-delim-values",lY="e-close-icon-hide",Gce="e-ddl-disable-icon",$ce="e-ms-spinner-icon",Kce="e-input-group-icon e-ddl-icon",Yce="e-icon-anim",Lj="e-delim-total",Zce="e-search-custom-width",Mj="e-input-filter";let Vi=class extends QK{constructor(e,t){super(e,t),this.clearIconWidth=0,this.isValidKey=!1,this.selectAllEventData=[],this.selectAllEventEle=[],this.scrollFocusStatus=!1,this.keyDownStatus=!1}enableRTL(e){e?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())}requiredModules(){const e=[];if("CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=t}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e}updateHTMLAttribute(){if(Object.keys(this.htmlAttributes).length)for(const e of Object.keys(this.htmlAttributes))switch(e){case"class":{const t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&(z([this.overAllWrapper],t.split(" ")),z([this.popupWrapper],t.split(" ")));break}case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(e,this.htmlAttributes[e]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:{const i=["name","required","aria-required","form"],s=["title","role","style","class"];["id"].indexOf(e)>-1?this.element.setAttribute(e,this.htmlAttributes[e]):0===e.indexOf("data")||i.indexOf(e)>-1?this.hiddenElement.setAttribute(e,this.htmlAttributes[e]):s.indexOf(e)>-1?this.overAllWrapper.setAttribute(e,this.htmlAttributes[e]):this.inputElement.setAttribute(e,this.htmlAttributes[e]);break}}}updateReadonly(e){e||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")}updateClearButton(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove(lY)):(this.overAllClear.style.display="none",this.componentWrapper.classList.add(lY))}updateCssClass(){if(!f(this.cssClass)&&""!==this.cssClass){let e=this.cssClass;e=this.cssClass.replace(/\s+/g," ").trim(),""!==e&&(z([this.overAllWrapper],e.split(" ")),z([this.popupWrapper],e.split(" ")))}}updateOldPropCssClass(e){!f(e)&&""!==e&&""!==(e=e.replace(/\s+/g," ").trim())&&(W([this.overAllWrapper],e.split(" ")),W([this.popupWrapper],e.split(" ")))}onPopupShown(){if(q.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){const i=this;window.onpopstate=()=>{i.hidePopup(),i.inputElement.focus()},history.pushState({},"")}this.trigger("open",{popup:this.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}},i=>{i.cancel||(this.focusAtFirstListItem(),document.body.appendChild(this.popupObj.element),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!f(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),("CheckBox"===this.mode||this.showDropDownIcon)&&z([this.overAllWrapper],[Yce]),this.refreshPopup(),this.renderReactTemplates(),this.popupObj.show(i.animation,1e3===this.zIndex?this.element:null),Rt(this.inputElement,{"aria-expanded":"true"}),this.isFirstClick&&this.loadTemplate())})}updateListItems(e,t){for(let i=0;i<e.length;i++)this.findGroupStart(e[i]),this.findGroupStart(t[i]);this.deselectHeader()}loadTemplate(){this.refreshListItems(null),"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})}setScrollPosition(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!f(this.value)&&this.value.length>0){const e=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",this.value[this.value.length-1]);f(e)||this.scrollBottom(e)}}focusAtFirstListItem(){if(this.ulElement&&this.ulElement.querySelector("li."+pt_li)){let e;if("CheckBox"===this.mode)return void this.removeFocus();e=this.ulElement.querySelector("li."+pt_li+":not(."+eo+")"),null!==e&&(this.removeFocus(),this.addListFocus(e))}}focusAtLastListItem(e){let t;e?t=m_(e,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?m_(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):t=null,t&&null!==t.item&&(this.addListFocus(t.item),this.scrollBottom(t.item,t.index))}getAriaAttributes(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-multiselectable":"true","aria-activedescendant":"null","aria-haspopup":"true","aria-expanded":"false"}}updateListARIA(){f(this.ulElement)||Rt(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"});const e=!!this.inputElement.disabled;Rt(this.inputElement,this.getAriaAttributes()),e&&Rt(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")}ensureAriaDisabled(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){const t=this.htmlAttributes;Ae(t,{"aria-disabled":e},t),this.setProperties({htmlAttributes:t},!0)}}removelastSelection(e){const t=this.chipCollectionWrapper.querySelectorAll("span."+Yk),i=t[t.length-1].getAttribute("data-value");f(this.value)||(this.tempValues=this.value.slice());let s=this.getFormattedValue(i);this.allowCustomValue&&("false"!==i&&!1===s||!f(s)&&"NaN"===s.toString())&&(s=i),this.removeValue(s,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()}onActionFailure(e){super.onActionFailure(e),this.renderPopup(),this.onPopupShown()}targetElement(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value}getForQuery(e){let t;const i=f(this.fields.value)?this.fields.text:this.fields.value;for(let s=0;s<e.length;s++)t=0===s?new cs(i,"equal",e[s]):t.or(i,"equal",e[s]);return this.getQuery(this.query).where(t)}onActionComplete(e,t,i,s){super.onActionComplete(e,t,i),this.updateSelectElementData(this.allowFiltering);const r=this;if(!f(this.value)&&!this.allowCustomValue)for(let o=0;o<this.value.length;o++)this.findListElement(this.allowFiltering&&!f(this.mainList)?this.mainList:e,"li","data-value",r.value[o])||(this.value.splice(o,1),o-=1);this.updateActionList(e,t,i),this.dataSource instanceof ut&&"CheckBox"===this.mode&&this.allowFiltering&&this.removeFocus()}updateActionList(e,t,i,s){"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?(f(this.mainData)||0===this.mainData.length)&&(this.mainData=t):(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=t,this.mainListCollection=this.liCollections),(this.remoteCustomValue||t.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&""!==this.inputElement.value?this.checkForCustomValue(this.tempQuery,this.fields):(this.value&&this.value.length&&("CheckBox"!==this.mode&&""!==this.inputElement.value.trim()||"CheckBox"===this.mode||(8===this.keyCode||46===this.keyCode)&&this.allowFiltering&&this.allowCustomValue&&this.dataSource instanceof ut&&""===this.inputElement.value)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),f(this.setInitialValue)||this.setInitialValue(),f(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(!f(this.text)&&(f(this.value)||0===this.value.length)&&this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown()))}refreshSelection(){let e,t;const i=this.hideSelectedItem?eo:"e-active";if(!f(this.value))for(let s=0;!f(this.value[s]);s++)if(e=this.value[s],t=this.findListElement(this.list,"li","data-value",e),t){if(z([t],i),this.hideSelectedItem&&t.previousSibling&&t.previousElementSibling.classList.contains(pt_group)&&(!t.nextElementSibling||t.nextElementSibling.classList.contains(pt_group))&&z([t.previousElementSibling],i),this.hideSelectedItem&&this.fields.groupBy&&!t.previousElementSibling.classList.contains(eo)&&this.hideGroupItem(e),this.hideSelectedItem&&t.classList.contains(pt_focus)){W([t],pt_focus);const r=t.parentElement.querySelectorAll("."+pt_li+":not(."+eo+")");r.length>0?z([r[0]],pt_focus):this.list&&this.list.querySelectorAll("."+pt_li).length>0||(this.l10nUpdate(),z([this.list],"e-nodata"))}if(t.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&t.classList.contains("e-active")){const r=t.firstElementChild.getAttribute("aria-checked");(f(r)||"false"===r)&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:t,e:null})}}this.checkSelectAll(),this.checkMaxSelection()}hideGroupItem(e){let t,i;const s=this.hideSelectedItem?eo:"e-active";i=t=this.findListElement(this.ulElement,"li","data-value",e);let r=0,o=0,a=!0,l=!0;do{t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains(eo)&&t.previousElementSibling.classList.contains(pt_li)&&(a=!1),!a||!t||t.previousElementSibling&&t.previousElementSibling.classList.contains(pt_group)?r=10:t=t.previousElementSibling,i&&i.nextElementSibling&&!i.nextElementSibling.classList.contains(eo)&&i.nextElementSibling.classList.contains(pt_li)&&(l=!1),!l||!i||i.nextElementSibling&&i.nextElementSibling.classList.contains(pt_group)?o=10:i=i.nextElementSibling}while(r<10||o<10);a&&l&&!t.previousElementSibling.classList.contains(eo)?z([t.previousElementSibling],s):a&&l&&t.previousElementSibling.classList.contains(eo)&&W([t.previousElementSibling],s)}getValidLi(){const e=this.ulElement.querySelector("li."+pt_li+":not(."+eo+")");return f(e)?this.liCollections[0]:e}checkSelectAll(){const e=this.list.querySelectorAll("li.e-list-group-item.e-active").length,t=this.list.querySelectorAll("li.e-list-item"),i=this.list.querySelectorAll("li."+pt_li).length;let s=this.list.querySelectorAll("li.e-active").length;if(this.enableGroupCheckBox&&!f(this.fields.groupBy)&&(s-=e),i!==s&&s!==this.maximumSelectionLength||"CheckBox"!==this.mode||!this.showSelectAll?i!==s&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}):this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(let r=0;r<t.length;r++)this.findGroupStart(t[r]);this.deselectHeader()}}openClick(e){this.openOnClick||"CheckBox"===this.mode?!this.openOnClick&&"CheckBox"===this.mode&&!this.isPopupOpen()&&this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup()}keyUp(e){"CheckBox"!==this.mode||this.openOnClick||f(String.fromCharCode(e.keyCode).match(/\w/))||(this.isValidKey=!0),this.isValidKey=this.isPopupOpen()&&8===e.keyCode||this.isValidKey,this.isValidKey=(!e.ctrlKey||86!==e.keyCode)&&this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),this.search(e))}filter(e,t,i){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,t,i)}getQuery(e){const t=e?e.clone():this.query?this.query.clone():new Ut;if(this.filterAction){if(null!==this.targetElement()){const i=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof ut||"string"!==i)&&"number"!==i){const s=this.fields;t.where(f(s.text)?"":s.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}else t.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return t}return e||(this.query?this.query:new Ut)}dataUpdater(e,t,i){if(this.isDataFetched=!1,""===this.targetElement().trim()){const s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.backCommand&&(this.remoteCustomValue=!1,this.allowCustomValue&&0===s.querySelectorAll("li").length&&this.mainData.length>0&&(this.mainData=[]),this.onActionComplete(s,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))}else this.resetList(e,i,t),this.allowCustomValue&&(e instanceof ut?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,i));this.refreshPopup(),"CheckBox"===this.mode&&this.removeFocus()}checkForCustomValue(e,t){const i=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&i){const s=this.inputElement.value,r=t||this.fields,o=!f(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData;if("string"!=typeof o&&"number"!=typeof o&&"boolean"!=typeof o){const a={};zt(r.text,s,a),"number"==typeof U(this.fields.value?this.fields.value:"value",o)?zt(r.value,Math.random(),a):zt(r.value,s,a);const l=JSON.parse(JSON.stringify(this.listData));l.splice(0,0,a),this.resetList(l,r,e)}else{const a=[this.inputElement.value];a[0]="number"!=typeof o||isNaN(parseFloat(a[0]))?a[0]:parseFloat(a[0]),a[0]="boolean"==typeof o?"true"===a[0]||"false"!==a[0]&&a[0]:a[0],this.resetList(a,r)}}this.value&&this.value.length&&this.refreshSelection()}getNgDirective(){return"EJS-MULTISELECT"}wrapperClick(e){if(this.setDynValue=!1,this.enabled){if(e.target===this.overAllClear)return void e.preventDefault();if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&-1!==e.target.classList.toString().indexOf(Rj))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&e.target.className===Kce)?this.showPopup():(this.hidePopup(),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(y_)||this.overAllWrapper.classList.add(y_)))}this.targetElement()&&""!==this.targetElement()||e.preventDefault()}}enable(e){e?(this.overAllWrapper.classList.remove(zce),this.inputElement.removeAttribute("disabled"),Rt(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add(zce),this.inputElement.setAttribute("disabled","true"),Rt(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()}onBlurHandler(e,t){let i;if(f(e)||(i=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(i))"CheckBox"!==this.mode?this.inputElement.focus():"Auto"===this.floatLabelType&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&z([this.overAllWrapper],"e-valid-input");else{if("Auto"===this.floatLabelType&&this.overAllWrapper.classList.contains("e-outline")&&"CheckBox"===this.mode&&(f(this.value)||0===this.value.length)&&W([this.overAllWrapper],"e-valid-input"),"CheckBox"===this.mode&&q.isIE&&!f(e)&&!t)return this.inputFocus=!1,void this.overAllWrapper.classList.remove(y_);if(this.scrollFocusStatus)return f(e)||e.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);if(this.inputFocus=!1,this.overAllWrapper.classList.remove(y_),this.addTagOnBlur){const s=this.getValueByText(this.inputElement.value,this.ignoreCase,this.ignoreAccent),r=this.findListElement(this.list,"li","data-value",s),o=this.hideSelectedItem?eo:"e-active";r&&!r.classList.contains(o)&&(this.updateListSelection(r,e),"Delimiter"===this.mode&&this.updateDelimeter(this.delimiterChar))}this.refreshListItems(null),"Box"!==this.mode&&"CheckBox"!==this.mode&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&this.hidePopup(),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,q.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),function qAe(n,e,t,i,s){n.classList.remove("e-input-focus");const r=e.querySelector("."+CP);t&&t.length<=0&&"Auto"===i&&!f(r)&&(r.classList.contains(Kk)&&W([r],Kk),z([r],b_))}(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!f(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize()}}checkPlaceholderSize(){if(this.showDropDownIcon){const e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else f(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)}setPlaceholderSize(e){f(this.value)||0===this.value.length?0!==this.dropIcon.offsetWidth?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":z([this.searchWrapper],Zce):f(this.value)||(this.searchWrapper.removeAttribute("style"),W([this.searchWrapper],Zce))}refreshInputHight(){this.value&&this.value.length||!f(this.text)&&""!==this.text?this.searchWrapper.classList.add(Aj):this.searchWrapper.classList.remove(Aj)}validateValues(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())}updateValueState(e,t,i){if(this.initStatus&&this.validateValues(t||[],i||[])){const o={e,oldValue:i,value:t,isInteracted:!!e,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",o),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}}updateTempValue(){this.tempValues=this.value?this.value.slice():this.value}getPagingCount(){const e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.offsetHeight/parseInt(e,10))}pageUpSelection(e){const t=this.list.querySelectorAll("li."+pt_li+":not(."+eo+"):not(.e-reorder-hide)"),i=e>=0?t[e+1]:t[0];this.addListFocus(i),this.scrollBottom(i,this.getIndexByValue(i.getAttribute("data-value")))}pageDownSelection(e){this.getItems();const i=this.list.querySelectorAll("li."+pt_li+":not(."+eo+"):not(.e-reorder-hide)"),s=e<=i.length?i[e-1]:i[i.length-1];this.addListFocus(s),this.scrollBottom(s,this.getIndexByValue(s.getAttribute("data-value")))}getItems(){return this.list||super.render(),this.ulElement&&this.ulElement.querySelectorAll("."+pt_li).length>0?this.ulElement.querySelectorAll("."+pt_li+":not(."+eo+")"):[]}focusInHandler(e){return!!this.enabled&&(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove(Aj),this.checkPlaceholderSize(),this.focused&&(this.trigger("focus",{isInteracted:!!e,event:e}),this.focused=!1),this.overAllWrapper.classList.contains(y_)||this.overAllWrapper.classList.add(y_),function UAe(n,e){n.classList.add("e-input-focus");const t=e.querySelector("."+CP);f(t)||(z([t],Kk),t.classList.contains(b_)&&W([t],b_))}(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),!0)}showDelimWrapper(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add(jce)}hideDelimWrapper(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove(jce)}expandTextbox(){let e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.size=this.inputElement.value.length>e?this.inputElement.value.length:e}isPopupOpen(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement}refreshPopup(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())}checkTextLength(){return this.targetElement().length<1}popupKeyActions(e){switch(e.keyCode){case 38:this.hidePopup(),"CheckBox"===this.mode&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(),e.preventDefault())}}updateAriaAttribute(){const e=this.list.querySelector("."+pt_focus);if(!f(e))if(this.inputElement.setAttribute("aria-activedescendant",e.id),this.allowFiltering){const t=this.popupWrapper.querySelector("."+Mj);t&&t.setAttribute("aria-activedescendant",e.id)}else"CheckBox"===this.mode&&this.overAllWrapper.setAttribute("aria-activedescendant",e.id)}homeNavigation(e){this.removeFocus();const t=this.ulElement.querySelectorAll("li."+pt_li+":not(."+eo+"):not(.e-reorder-hide)");if(t.length>0){const i=t[e?0:t.length-1];i.classList.add(pt_focus),this.scrollBottom(i)}}onKeyDown(e){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.keyCode=e.keyCode,this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124))){if(e.altKey)return void this.popupKeyActions(e);if(this.isPopupOpen()){const t=this.list.querySelector("."+pt_focus);let i;switch(e.keyCode){case 36:case 35:this.homeNavigation(36===e.keyCode);break;case 33:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageUpSelection(i-this.getPagingCount()),this.updateAriaAttribute()));case 34:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageDownSelection(i+this.getPagingCount()),this.updateAriaAttribute()));case 38:this.arrowUp(e);break;case 40:this.arrowDown(e);break;case 27:return e.preventDefault(),this.hidePopup(),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return e.preventDefault(),"CheckBox"!==this.mode&&this.selectByKey(e),void this.checkPlaceholderSize();case 32:return void this.spaceKeySelection(e);case 9:e.preventDefault(),this.hidePopup(),this.inputElement.focus(),this.overAllWrapper.classList.add(y_)}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return e.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(e),"CheckBox"===this.mode&&this.enableSelectionOrder&&this.checkBackCommand(e),this.expandTextbox(),"CheckBox"===this.mode&&this.showSelectAll||this.refreshPopup()}}arrowDown(e){e.preventDefault(),this.moveByList(1),this.keyAction=!0,(document.activeElement.classList.contains(Mj)||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&k.add(this.list,"keydown",this.onKeyDown,this),this.updateAriaAttribute()}arrowUp(e){e.preventDefault(),this.keyAction=!0;let t=this.list.querySelectorAll("li."+pt_li+":not(."+eo+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy)&&(t=this.list.querySelectorAll("li."+pt_li+",li."+pt_group+":not(."+eo+"):not(.e-reorder-hide)"));const i=this.list.querySelector("li."+pt_focus);Array.prototype.slice.call(t).indexOf(i)<=0&&"CheckBox"===this.mode&&this.allowFiltering&&(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})),this.moveByList(-1),this.updateAriaAttribute()}spaceKeySelection(e){"CheckBox"===this.mode&&(document.activeElement.classList.contains(Mj)||(e.preventDefault(),this.keyAction=!0,this.list.focus()),this.selectByKey(e)),this.checkPlaceholderSize()}checkBackCommand(e){this.backCommand=8!==e.keyCode||""!==this.targetElement()}keyNavigation(e){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e)}else if(8===e.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){e.preventDefault();const t=this.value[this.value.length-1];this.removeValue(t,e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(t)}}selectByKey(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()}escapeAction(){const e=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,e)&&("CheckBox"!==this.mode&&(this.value=e,this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()}scrollBottom(e,t){const i=this.list.offsetHeight,s=e.offsetTop+e.offsetHeight-this.list.scrollTop,r=this.list.scrollTop+s-i;let o=e.offsetTop+e.offsetHeight-this.list.scrollTop;o=this.fields.groupBy&&!f(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o,0===t?this.list.scrollTop=0:s>i?this.list.scrollTop=r:o>0&&this.list.offsetHeight>o||(this.list.scrollTop=r)}scrollTop(e,t){let i=e.offsetTop-this.list.scrollTop;i=this.fields.groupBy&&!li(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;const s=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===t?this.list.scrollTop=0:i<0?this.list.scrollTop=this.list.scrollTop+i:s>0&&this.list.offsetHeight>s||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!li(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}selectListByKey(e){const t=this.list.querySelector("li."+pt_focus);let s,i=this.value&&this.value.length?this.value.length:0;null!==t&&(t.classList.contains("e-active")&&(i-=1),this.isValidLI(t)&&i<this.maximumSelectionLength?(this.updateListSelection(t,e),this.addListFocus(t),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!f(this.fields.groupBy)&&(s=t.firstElementChild.lastElementChild,this.findGroupStart(s),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(t.textContent),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()):!this.isValidLI(t)&&i<this.maximumSelectionLength&&(s=t.firstElementChild.lastElementChild,s.classList.contains("e-check")?this.selectAllItem(!1,e,t):this.selectAllItem(!0,e,t)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup()),this.refreshPlaceHolder()}refreshListItems(e){if((this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData){const t=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(t,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}}removeSelectedChip(e){const t=this.chipCollectionWrapper.querySelector("span."+Zk);let i;null!==t&&(f(this.value)||(this.tempValues=this.value.slice()),i=t.nextElementSibling,null!==i&&(this.removeChipSelection(),this.addChipSelection(i,e)),this.removeValue(t.getAttribute("data-value"),e),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup(),this.checkPlaceholderSize()}moveByTop(e){const t=this.list.querySelectorAll("li."+pt_li);let i;t.length>1&&(this.removeFocus(),i=e?0:t.length-1,this.addListFocus(t[i]),this.scrollBottom(t[i],i)),this.updateAriaAttribute()}moveByList(e){if(this.list){let t=this.list.querySelectorAll("li."+pt_li+":not(."+eo+"):not(.e-reorder-hide)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!f(this.fields.groupBy)&&(t=this.list.querySelectorAll("li."+pt_li+",li."+pt_group+":not(."+eo+"):not(.e-reorder-hide)"));const i=this.list.querySelector("li."+pt_focus);let s=-1;if(t.length){for(let r=0;r<t.length;r++)if(t[r]===i){s=r;break}e>0?s<t.length-1&&(this.removeFocus(),this.addListFocus(t[++s]),this.updateCheck(t[s]),this.scrollBottom(t[s],s)):s>0&&(this.removeFocus(),this.addListFocus(t[--s]),this.updateCheck(t[s]),this.scrollTop(t[s],s))}}}updateCheck(e){"CheckBox"===this.mode&&this.enableGroupCheckBox&&!f(this.fields.groupBy)&&(e.firstElementChild.lastElementChild.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active"))}moveBy(e,t){let i;const s=this.chipCollectionWrapper.querySelectorAll("span."+Yk),r=this.chipCollectionWrapper.querySelector("span."+Zk);null===r?e<0&&this.addChipSelection(s[s.length-1],t):e<0?(i=r.previousElementSibling,null!==i&&(this.removeChipSelection(),this.addChipSelection(i,t))):(i=r.nextElementSibling,this.removeChipSelection(),null!==i&&this.addChipSelection(i,t))}chipClick(e){if(this.enabled){const t=B(e.target,"."+Yk);this.removeChipSelection(),this.addChipSelection(t,e)}}removeChipSelection(){this.chipCollectionWrapper&&this.removeChipFocus()}addChipSelection(e,t){z([e],Zk),this.trigger("chipSelection",t)}onChipRemove(e){if(3!==e.which&&2!==e.button&&this.enabled&&!this.readonly){const i=e.target.parentElement.getAttribute("data-value");let s=this.getFormattedValue(i);if(this.allowCustomValue&&("false"!==i&&!1===s||!f(s)&&"NaN"===s.toString())&&(s=i),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(),this.inputFocus||this.inputElement.focus(),this.removeValue(s,e),f(this.findListElement(this.list,"li","data-value",s))&&this.mainList&&this.listData){const r=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(r,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}}makeTextBoxEmpty(){this.inputElement.value="",this.refreshPlaceHolder()}refreshPlaceHolder(){this.placeholder&&"Never"===this.floatLabelType?this.inputElement.placeholder=this.value&&this.value.length||!f(this.text)&&""!==this.text?"":aY(this.placeholder):this.setFloatLabelType(),this.expandTextbox()}removeAllItems(e,t,i,s,r){const o=this.value.indexOf(e),a=this.value.slice(0);a.splice(o,1),this.setProperties({value:[].concat([],a)},!0),s.setAttribute("aria-selected","false"),W([s],this.hideSelectedItem?eo:"e-active"),this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:s,e:this,index:o}),this.invokeCheckboxSelection(s,t,i),this.updateMainList(!0,e,r),this.updateChipStatus()}invokeCheckboxSelection(e,t,i){this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:t}),Rt(this.inputElement,{"aria-activedescendant":e.id}),this.value&&this.value.length!==this.mainData.length&&"CheckBox"===this.mode&&this.showSelectAll&&!this.isSelectAll&&!i&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"})}removeValue(e,t,i,s){let r=this.value.indexOf(this.getFormattedValue(e));-1===r&&this.allowCustomValue&&!f(e)&&(r=this.value.indexOf(e.toString()));const o=t&&t.target;s=!!(s||o&&o.classList.contains("e-close-hooker"))||null;const a=this.hideSelectedItem?eo:"e-active";if(-1!==r){const l=this.findListElement(this.list,"li","data-value",e),h=this.getDataByValue(e);this.trigger("removing",{e:t,item:l,itemData:h,isInteracted:!!t,cancel:!1},m=>{if(m.cancel)this.removeIndex++;else{const b=this.value.slice(0);if(b.splice(r,1),this.setProperties({value:[].concat([],b)},!0),null!==l){const D=this.findListElement(this.mainList,"li","data-value",e);l.setAttribute("aria-selected","false"),W([l],a),D&&(D.setAttribute("aria-selected","false"),W([l,D],a)),this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:l,e:this,index:r}),this.invokeCheckboxSelection(l,t,s)}this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.hideSelectedItem&&this.fixedHeaderElement&&this.fields.groupBy&&"CheckBox"!==this.mode&&this.isPopupOpen()&&super.scrollStop(),this.updateMainList(!0,e),this.removeChip(e),this.updateChipStatus(),(this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength&&W(this.list.querySelectorAll("li."+pt_li+":not(.e-active)"),"e-disable"),this.trigger("removed",m);const w=t&&t.currentTarget,E=!(!w||!w.classList.contains("e-selectall-parent"))||null;!this.changeOnBlur&&!s&&t&&i&&!E&&this.updateValueState(t,this.value,this.tempValues),i&&(this.selectAllEventData.push(h),this.selectAllEventEle.push(l)),1===i&&(this.changeOnBlur||this.updateValueState(t,this.value,this.tempValues),this.trigger("selectedAll",{event:t,items:this.selectAllEventEle,itemData:this.selectAllEventData,isInteracted:!!t,isChecked:!1}),this.selectAllEventData=[],this.selectAllEventEle=[]),s&&(1===i||null===i)&&this.clearAllCallback(t,s)}})}}updateMainList(e,t,i){if(this.allowFiltering||"CheckBox"===this.mode){const s=i||this.findListElement(this.mainList,"li","data-value",t);s&&(e?(s.setAttribute("aria-selected","false"),W([s],this.hideSelectedItem?eo:"e-active"),"CheckBox"===this.mode&&(s.firstElementChild.setAttribute("aria-checked","false"),W([s.firstElementChild.lastElementChild],"e-check"))):(s.setAttribute("aria-selected","true"),z([s],this.hideSelectedItem?eo:"e-active"),"CheckBox"===this.mode&&(s.firstElementChild.setAttribute("aria-checked","true"),z([s.firstElementChild.lastElementChild],"e-check"))))}}removeChip(e){if(this.chipCollectionWrapper){const t=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);t&&Yt(t)}}setWidth(e){f(e)||("number"==typeof e?this.overAllWrapper.style.width=st(e):"string"==typeof e&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:st(e)))}updateChipStatus(){this.value&&this.value.length?(f(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),("Delimiter"===this.mode||"CheckBox"===this.mode)&&this.showDelimWrapper(),this.showOverAllClear()):(f(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),f(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())}addValue(e,t,i){this.value||(this.value=[]),this.value.indexOf(e)<0&&this.setProperties({value:[].concat([],this.value,[e])},!0);const s=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),s&&(this.addListFocus(s),this.addListSelection(s)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(t,e,i),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()}checkMaxSelection(){(this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength&&z(this.list.querySelectorAll("li."+pt_li+":not(.e-active)"),"e-disable")}dispatchSelect(e,t,i,s,r){const o=this.listData;if(this.initStatus&&!s){const a=this.getDataByValue(e);this.trigger("select",{e:t,item:i,itemData:a,isInteracted:!!t,cancel:!1},h=>{h.cancel||(r&&(this.selectAllEventData.push(a),this.selectAllEventEle.push(i)),1===r&&(this.trigger("selectedAll",{event:t,items:this.selectAllEventEle,itemData:this.selectAllEventData,isInteracted:!!t,isChecked:!0}),this.selectAllEventData=[]),this.allowCustomValue&&this.isServerRendered&&this.listData!==o&&(this.listData=o),this.updateListSelectEventCallback(e,i,t),this.hideSelectedItem&&this.fixedHeaderElement&&this.fields.groupBy&&"CheckBox"!==this.mode&&super.scrollStop())})}}addChip(e,t,i){this.chipCollectionWrapper&&this.getChip(e,t,i)}removeChipFocus(){const e=this.chipCollectionWrapper.querySelectorAll("span."+Yk),t=this.chipCollectionWrapper.querySelectorAll("span."+Rj.split(" ")[0]);if(W(e,Zk),q.isDevice)for(let i=0;i<t.length;i++)t[i].style.display="none"}onMobileChipInteraction(e){const t=B(e.target,"."+Yk),i=t.querySelector("span."+Rj.split(" ")[0]);this.enabled&&!this.readonly&&(t.classList.contains(Zk)||(this.removeChipFocus(),i.style.display="",t.classList.add(Zk)),this.refreshPopup(),e.preventDefault())}multiCompiler(e){let t=!1;if(e)try{t=!!bt(e,document).length}catch(i){t=!1}return t}getChip(e,t,i){let s={text:t,value:t};const r=this.createElement("span",{className:Yk,attrs:{"data-value":t,title:e}});let o;const a=this.createElement("span",{className:"e-chipcontent"}),l=this.createElement("span",{className:Rj});if(this.mainData&&(s=this.getDataByValue(t)),this.valueTemplate&&!f(s)){o=this.multiCompiler(this.valueTemplate)?ji(X(this.valueTemplate,document).innerHTML.trim()):ji(this.valueTemplate);let m=o(s,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,a);if(m&&m.length>0)for(let b=0;b<m.length;b++)a.appendChild(m[b]);this.renderReactTemplates()}else this.enableHtmlSanitizer?a.innerText=e:a.innerHTML=e;r.appendChild(a);const h={isInteracted:!!i,itemData:s,e:i,setClass:c=>{z([r],c)},cancel:!1};this.isPreventChange=this.isAngular&&this.preventChange,this.trigger("tagging",h,c=>{c.cancel||(q.isDevice?(r.classList.add("e-mob-chip"),mi([l],r),l.style.display="none",k.add(r,"click",this.onMobileChipInteraction,this)):(k.add(r,"mousedown",this.chipClick,this),this.showClearButton&&r.appendChild(l)),k.add(l,"mousedown",this.onChipRemove,this),this.chipCollectionWrapper.appendChild(r),!this.changeOnBlur&&i&&this.updateValueState(i,this.value,this.tempValues))})}calcPopupWidth(){let e=st(this.popupWidth);return e.indexOf("%")>-1&&(e=(this.componentWrapper.offsetWidth*parseFloat(e)/100).toString()+"px"),e}mouseIn(){this.enabled&&!this.readonly&&this.showOverAllClear()}mouseOut(){this.inputFocus||(this.overAllClear.style.display="none")}listOption(e,t){const i=!f(t.iconCss),s=f(t.properties)?t:t.properties;return this.listCurrentOptions=null!==t.text||null!==t.value?{fields:s,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},Ae(this.listCurrentOptions,this.listCurrentOptions,t,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:e,fieldProperty:s}),this.listCurrentOptions}renderPopup(){if(this.list||super.render(),!this.popupObj){document.body.appendChild(this.popupWrapper);const e=this.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===this.mode&&!this.allowFiltering&&e&&this.filterParent&&(e.remove(),this.filterParent=null);let t=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),t-=this.header.offsetHeight),mi([this.list],this.popupWrapper),this.footerTemplate&&(this.setFooterTemplate(),t-=this.footer.offsetHeight),"CheckBox"===this.mode&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),t-=this.selectAllHeight):"CheckBox"!==this.mode||this.showSelectAll||this.headerTemplate||this.footerTemplate?"CheckBox"===this.mode&&!this.showSelectAll&&(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),t=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(t-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(t-=this.footer.offsetHeight)):(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),t=parseInt(this.popupHeight,10)),"CheckBox"===this.mode){const i={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,popupElement:this.popupWrapper};this.allowFiltering&&(this.notify("searchBox",i),t-=this.searchBoxHeight),z([this.popupWrapper],"e-checkbox")}"auto"!==this.popupHeight?(this.list.style.maxHeight=st(t),this.popupWrapper.style.maxHeight=st(this.popupHeight)):this.list.style.maxHeight=st(this.popupHeight),this.popupObj=new fc(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:()=>{if(this.popupObj.element.parentElement){this.popupObj.unwireScrollEvents();const i=this.popupWrapper.querySelector("."+Mj);"CheckBox"===this.mode&&i&&document.activeElement===i&&i.blur(),te(this.popupObj.element)}},open:()=>{if(this.popupObj.resolveCollision(),!this.isFirstClick){const i=this.list.querySelector("ul");i&&("CheckBox"!==this.mode&&(this.allowFiltering||this.allowCustomValue)&&""!==this.targetElement().trim()||(this.mainList=i.cloneNode?i.cloneNode(!0):i)),this.isFirstClick=!0}this.popupObj.wireScrollEvents(),"CheckBox"!==this.mode&&(this.allowFiltering||this.allowCustomValue)&&""!==this.targetElement().trim()||this.loadTemplate(),this.setScrollPosition(),this.allowFiltering&&this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})},targetExitViewport:()=>{q.isDevice||this.hidePopup()}}),"CheckBox"===this.mode&&q.isDevice&&this.allowFiltering&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.popupObj.close(),this.popupWrapper.style.visibility=""}}setHeaderTemplate(){let e;this.header&&this.header.remove(),this.header=this.createElement("div"),z([this.header],"e-ddl-header"),e=this.multiCompiler(this.headerTemplate)?ji(X(this.headerTemplate,document).innerHTML.trim()):ji(this.headerTemplate);let i=e({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(i&&i.length>0)for(let s=0;s<i.length;s++)this.header.appendChild(i[s]);"CheckBox"===this.mode&&this.showSelectAll?Qr([this.header],this.popupWrapper):mi([this.header],this.popupWrapper),k.add(this.header,"mousedown",this.onListMouseDown,this)}setFooterTemplate(){let e;this.footer&&this.footer.remove(),this.footer=this.createElement("div"),z([this.footer],"e-ddl-footer"),e=this.multiCompiler(this.footerTemplate)?ji(X(this.footerTemplate,document).innerHTML.trim()):ji(this.footerTemplate);let i=e({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(i&&i.length>0)for(let s=0;s<i.length;s++)this.footer.appendChild(i[s]);mi([this.footer],this.popupWrapper),k.add(this.footer,"mousedown",this.onListMouseDown,this)}clearAll(e){if(this.enabled&&!this.readonly){let t;if(this.value&&this.value.length>0){const i=this.list&&this.list.querySelectorAll("li.e-list-item");if(i&&i.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,t=this.value[this.removeIndex];this.removeIndex<this.value.length;t=this.value[this.removeIndex])this.removeValue(t,e,null,!0)}else this.clearAllCallback(e)}}clearAllCallback(e,t){const i=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&"CheckBox"!==this.mode||this.allowCustomValue)){const s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),"Box"!==this.mode&&(!this.inputFocus||"CheckBox"===this.mode)&&this.updateDelimView(),""!==this.inputElement.value&&(this.makeTextBoxEmpty(),this.search(null)),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,i),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&t&&(f(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues)),!this.changeOnBlur&&t&&(f(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!f(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()}windowResize(){this.refreshPopup(),(!this.inputFocus||"CheckBox"===this.mode)&&this.viewWrapper&&this.viewWrapper.parentElement&&this.updateDelimView()}resetValueHandler(e){const t=B(this.inputElement,"form");if(t&&e.target===t){const i=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=i}}wireEvent(){k.add(this.componentWrapper,"mousedown",this.wrapperClick,this),k.add(window,"resize",this.windowResize,this),k.add(this.inputElement,"focus",this.focusInHandler,this),k.add(this.inputElement,"keydown",this.onKeyDown,this),k.add(this.inputElement,"keyup",this.keyUp,this),"CheckBox"!==this.mode&&k.add(this.inputElement,"input",this.onInput,this),k.add(this.inputElement,"blur",this.onBlurHandler,this),k.add(this.componentWrapper,"mouseover",this.mouseIn,this);const e=B(this.inputElement,"form");e&&k.add(e,"reset",this.resetValueHandler,this),k.add(this.componentWrapper,"mouseout",this.mouseOut,this),k.add(this.overAllClear,"mouseup",this.clearAll,this),k.add(this.inputElement,"paste",this.pasteHandler,this)}onInput(e){this.isValidKey=!!this.keyDownStatus,this.keyDownStatus=!1,q.isDevice&&"mozilla"===q.info.name&&this.search(e)}pasteHandler(e){setTimeout(()=>{this.expandTextbox(),this.search(e)})}search(e){if(f(e)||(this.keyCode=e.keyCode),!this.isPopupOpen()&&this.openOnClick&&this.showPopup(),this.openClick(e),!this.checkTextLength()||this.allowFiltering||f(e)||8===e.keyCode){const t=this.targetElement();if(this.allowFiltering){const i={preventDefaultAction:!1,text:this.targetElement(),updateData:(s,r,o)=>{i.cancel||(this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(s,r,o))},event:e,cancel:!1};this.trigger("filtering",i,s=>{s.cancel||!this.isFiltered&&!s.preventDefaultAction&&(this.filterAction=!0,this.dataUpdater(this.dataSource,null,this.fields))})}else if(this.allowCustomValue){let i=new Ut;i=""!==t?i.where(this.fields.text,"startswith",t,this.ignoreCase,this.ignoreAccent):i,this.dataUpdater(this.mainData,i,this.fields)}else{const i=this.list.querySelectorAll("li."+pt_li+":not(.e-hide-listitem)"),s=m_(this.targetElement(),i,"StartsWith",this.ignoreCase);s&&null!==s.item?(this.addListFocus(s.item),this.list.scrollTop=s.item.offsetHeight*s.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}else this.focusAtFirstListItem()}preRender(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.initializeData(),this.updateDataAttribute(this.htmlAttributes),super.preRender()}getLocaleName(){return"multi-select"}initializeData(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0}updateData(e,t){let i="";const s="Delimiter"===this.mode||"CheckBox"===this.mode,r=[];let o;const a=this.listData;if(this.listData=this.mainData,this.hiddenElement.innerHTML="",!f(this.value))for(let c=0;!f(this.value[c]);c++){const m=this.findListElement(f(this.mainList)?this.ulElement:this.mainList,"li","data-value",this.value[c]);f(m)&&!this.allowCustomValue?(this.value.splice(c,1),c-=1):(o=this.listData?this.getTextByValue(this.value[c]):this.value[c],i+=o+e+" ",r.push(o)),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[c]+'">'+c+"</option>"}this.setProperties({text:r.toString()},!0),s&&(this.updateWrapperText(this.delimiterWrapper,i),this.delimiterWrapper.setAttribute("id",Tn("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.delimiterWrapper.id));const l=t&&t.target,h=!(!l||!l.classList.contains("e-close-hooker"))||null;(!this.changeOnBlur&&t&&!h||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(t,this.value,this.tempValues)),this.listData=a,this.addValidInputClass()}initialTextUpdate(){if(f(this.text))this.setProperties({value:null},!0);else{const e=this.text.split(this.delimiterChar),t=[];for(let i=0;e.length>i;i++){const s=this.getValueByText(e[i]);f(s)?this.allowCustomValue&&t.push(e[i]):t.push(s)}t&&t.length&&this.setProperties({value:t},!0)}}renderList(e){!e&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&0===this.list.querySelector(".e-ul").childElementCount)&&(e=!0),super.render(e),this.unwireListEvents(),this.wireListEvents()}initialValueUpdate(){if(this.list){let e,t,i;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!f(this.value))for(let s=0;!f(this.value[s]);s++)if(i=this.value[s],t=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",i),e=this.getTextByValue(i),t&&"true"!==t.getAttribute("aria-selected")||t&&"true"===t.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))this.addChip(e,i),this.addListSelection(t);else if(i&&this.allowCustomValue){const r=this.listData.length,o={};zt(this.fields.text,i,o),zt(this.fields.value,i,o);const a=this.popupWrapper.querySelector(".e-nodata");this.addItem(o,r),t=t||this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",i),this.popupWrapper.contains(a)&&(this.list.setAttribute("style",a.getAttribute("style")),this.popupWrapper.replaceChild(this.list,a),this.wireListEvents()),this.addChip(e,i),this.addListSelection(t)}"CheckBox"===this.mode?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),"CheckBox"===this.mode&&this.showSelectAll&&(f(this.value)||!this.value.length)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),"Box"===this.mode||"Default"===this.mode&&this.inputFocus?this.chipCollectionWrapper.style.display="":("Delimiter"===this.mode||"CheckBox"===this.mode)&&this.showDelimWrapper()}}updateActionCompleteData(e,t){this.value&&this.value.indexOf(e.getAttribute("data-value"))>-1&&(this.mainList=this.ulElement,this.hideSelectedItem&&z([e],eo))}updateAddItemList(e,t){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector(".e-nodata")&&e?(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),Yt(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup()):this.allowCustomValue&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"))}updateDataList(){if(this.mainList&&this.ulElement){const t=this.ulElement.childElementCount>0&&this.ulElement.children[0].childElementCount>0&&this.mainList.children[0].childElementCount<this.ulElement.children[0].childElementCount,i=this.itemTemplate&&this.ulElement.childElementCount>0&&!(this.ulElement.childElementCount<this.mainList.childElementCount)&&(this.ulElement.children[0].childElementCount>0||this.fields.groupBy&&this.ulElement.children[1]&&this.ulElement.children[1].childElementCount>0);(this.mainList.childElementCount<this.ulElement.childElementCount||t||i)&&(this.mainList=this.ulElement)}}isValidLI(e){return e&&!e.classList.contains("e-disabled")&&!e.classList.contains(pt_group)&&e.classList.contains(pt_li)}updateListSelection(e,t,i){const s=e.getAttribute("data-value");let r=this.getFormattedValue(s);this.allowCustomValue&&("false"!==s&&!1===r||!f(r)&&"NaN"===r.toString())&&(r=s),this.removeHover(),this.value&&-1!==this.value.indexOf(r)?this.removeValue(r,t,i):this.dispatchSelect(r,t,e,"true"===e.getAttribute("aria-selected"),i)}updateListSelectEventCallback(e,t,i){const s=this.getTextByValue(e);if(!this.allowCustomValue&&!this.allowFiltering||this.findListElement(this.mainList,"li","data-value",e))this.remoteCustomValue=!1,this.addValue(e,s,i);else{const r=t.cloneNode(!0),o=this.fields.value?this.fields.value:"value";this.allowCustomValue&&this.mainData.length&&"number"==typeof U(o,this.mainData[0])&&(e=isNaN(parseFloat(e.toString()))?e:parseFloat(e.toString()));const a=this.getDataByValue(e);this.trigger("customValueSelection",{newData:a,cancel:!1},h=>{h.cancel||(mi([r],this.mainList),this.mainData.push(a),this.remoteCustomValue=!1,this.addValue(e,s,i))})}}removeListSelection(){const e=this.hideSelectedItem?eo:"e-active",t=this.list.querySelectorAll("."+e);let i=t.length;if(t&&t.length)for(W(t,e);i>0;)t[i-1].setAttribute("aria-selected","false"),i--;if(!f(this.mainList)){const s=this.mainList.querySelectorAll("."+e);let r=s.length;if(s&&s.length)for(W(s,e);r>0;)s[r-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(t&&t.length>r-1&&(t[r-1].firstElementChild.setAttribute("aria-checked","false"),W([t[r-1].firstElementChild.lastElementChild],"e-check")),s[r-1].firstElementChild.setAttribute("aria-checked","false"),W([s[r-1].firstElementChild.lastElementChild],"e-check")),r--}}removeHover(){const e=this.list.querySelectorAll(".e-hover");e&&e.length&&W(e,"e-hover")}removeFocus(){if(this.list&&this.mainList){const e=this.list.querySelectorAll("."+pt_focus),t=this.mainList.querySelectorAll("."+pt_focus);e&&e.length&&(W(e,pt_focus),W(t,pt_focus))}}addListHover(e){(this.enabled&&this.isValidLI(e)||null!==e&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy))&&(this.removeHover(),z([e],"e-hover"))}addListFocus(e){this.enabled&&this.isValidLI(e)?(this.removeFocus(),z([e],pt_focus)):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy)&&z([e],pt_focus)}addListSelection(e,t){const i=this.hideSelectedItem?eo:"e-active";if(this.isValidLI(e)&&!e.classList.contains("e-hover")){if(z([e],i),this.updateMainList(!1,e.getAttribute("data-value"),t),e.setAttribute("aria-selected","true"),"CheckBox"===this.mode){const s=e.firstElementChild.getAttribute("aria-checked");("false"===s||f(s))&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this}),this.chipCollectionWrapper&&this.removeChipSelection(),Rt(this.inputElement,{"aria-activedescendant":e.id})}}updateDelimeter(e,t){this.updateData(e,t)}onMouseClick(e){this.keyCode=null,this.scrollFocusStatus=!1;let t=e.target;const i=B(t,"."+pt_li);if(B(t,"."+pt_group)&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)t=t.classList.contains("e-list-group-item")?t.firstElementChild.lastElementChild:e.target,t.classList.contains("e-check")?(this.selectAllItem(!1,e),t.classList.remove("e-check"),t.classList.remove("e-stop"),B(t,".e-list-group-item").classList.remove("e-active"),t.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),t.classList.remove("e-stop"),t.classList.add("e-check"),B(t,".e-list-group-item").classList.add("e-active"),t.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(i)){let r=this.value&&this.value.length?this.value.length:0;i.classList.contains("e-active")&&(r-=1),r<this.maximumSelectionLength&&(this.updateListSelection(i,e),this.checkPlaceholderSize(),this.addListFocus(i),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?"CheckBox"!==this.mode&&(this.focusAtLastListItem(i.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.value&&this.value.length>50?setTimeout(()=>{this.updateDelimeter(this.delimiterChar,e)},0):this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup():e.preventDefault(),this.makeTextBoxEmpty(),this.findGroupStart(t),"CheckBox"!==this.mode&&this.refreshListItems(f(i)?null:i.textContent)}else e.preventDefault();this.refreshPlaceHolder(),this.deselectHeader()}}findGroupStart(e){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy)){let r;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),r=this.findGroupAttrtibutes(e,0,0,0,0),r=this.findGroupAttrtibutes(e,r[0],r[1],r[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),null!=(e=e.previousElementSibling)););this.updateCheckBox(e,r[0],r[1],r[2])}}findGroupAttrtibutes(e,t,i,s,r){for(;!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?t++:e.classList.contains("e-list-item")&&i++,s++,null!=(e=r?e.nextElementSibling:e.previousElementSibling)););return[t,i,s]}updateCheckBox(e,t,i,s){if(null===e)return;const r=e.getElementsByClassName("e-frame")[0];s===t?(r.classList.remove("e-stop"),r.classList.add("e-check"),B(r,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):s===i?(r.classList.remove("e-check"),r.classList.remove("e-stop"),B(r,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===t-1?(r.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),B(r,".e-list-group-item").classList.add("e-active"),r.classList.add("e-check")):(r.classList.remove("e-check"),r.classList.add("e-stop"),B(r,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}deselectHeader(){const e=this.value&&this.value.length?this.value.length:0,t=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&W(t,"e-disable"),e===this.maximumSelectionLength&&z(t,"e-disable")}onMouseOver(e){let t=B(e.target,"."+pt_li);null===t&&"CheckBox"===this.mode&&!f(this.fields.groupBy)&&this.enableGroupCheckBox&&(t=B(e.target,"."+pt_group)),this.addListHover(t)}onMouseLeave(){this.removeHover()}onListMouseDown(e){e.preventDefault(),this.scrollFocusStatus=!0}onDocumentClick(e){if("CheckBox"!==this.mode){const t=e.target;this.scrollFocusStatus=!!(!f(this.popupObj)&&B(t,'[id="'+this.popupObj.element.id+'"]')||this.overAllWrapper.contains(e.target))&&(q.isIE||"edge"===q.info.name)&&document.activeElement===this.inputElement}}wireListEvents(){f(this.list)||(k.add(document,"mousedown",this.onDocumentClick,this),k.add(this.list,"mousedown",this.onListMouseDown,this),k.add(this.list,"mouseup",this.onMouseClick,this),k.add(this.list,"mouseover",this.onMouseOver,this),k.add(this.list,"mouseout",this.onMouseLeave,this))}unwireListEvents(){k.remove(document,"mousedown",this.onDocumentClick),this.list&&(k.remove(this.list,"mousedown",this.onListMouseDown),k.remove(this.list,"mouseup",this.onMouseClick),k.remove(this.list,"mouseover",this.onMouseOver),k.remove(this.list,"mouseout",this.onMouseLeave))}hideOverAllClear(){(!this.value||!this.value.length||""===this.inputElement.value)&&(this.overAllClear.style.display="none")}showOverAllClear(){this.overAllClear.style.display=(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?"":"none"}focusIn(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()}focusOut(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()}showSpinner(){if(f(this.spinnerElement)){const e=this.filterParent&&this.filterParent.querySelector(".e-clear-icon.e-icons");"none"!==this.overAllClear.style.display||e?this.spinnerElement=e||this.overAllClear:(this.spinnerElement=this.createElement("span",{className:Uce+" "+$ce}),this.componentWrapper.appendChild(this.spinnerElement)),vp({target:this.spinnerElement,width:q.isDevice?"16px":"14px"},this.createElement),z([this.spinnerElement],Gce),xa(this.spinnerElement)}}hideSpinner(){f(this.spinnerElement)||(Rl(this.spinnerElement),W([this.spinnerElement],Gce),this.spinnerElement.classList.contains($ce)?te(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)}updateWrapperText(e,t){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=t:e.innerText=hr.sanitize(t)}updateDelimView(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove(Lj),this.value&&this.value.length){let t,i,r,o,l,e="",s=1,a=0;this.updateWrapperText(this.viewWrapper,e);const h={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"};let c=new jo(this.getLocaleName(),h,this.locale);""===c.getConstant("actionFailureTemplate")&&(c=new jo("dropdowns",h,this.locale)),""===c.getConstant("noRecordsTemplate")&&(c=new jo("dropdowns",h,this.locale));const m=c.getConstant("overflowCountTemplate"),b=c.getConstant("totalCountTemplate"),v=this.createElement("span",{className:"e-remain"}),w=m.replace("${count}",this.value.length.toString());v.innerText=w,this.viewWrapper.appendChild(v),this.renderReactTemplates();const E=v.offsetWidth;if(Yt(v),this.showDropDownIcon&&(a=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!f(this.value))for(let D=0;!f(this.value[D]);D++){if(e+=0===D?"":this.delimiterChar+" ",t=this.getOverflowVal(D),e+=t,t=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e),r=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10),l=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),r+a+this.clearIconWidth>l){for(void 0!==i&&""!==i&&(t=i,D=s+1),this.updateWrapperText(this.viewWrapper,t),o=this.value.length-D,r=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);r+E+a+this.clearIconWidth>l&&0!==r&&""!==this.viewWrapper.innerHTML;)this.viewWrapper.innerHTML=[].join(this.delimiterChar),o=this.value.length,r=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);break}r+E+a+this.clearIconWidth<=l?(i=e,s=D):0===D&&(i="",s=-1)}if(o>0){const D=l-a-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(v,this.viewWrapper,o,m,b,D)),this.updateRemainWidth(this.viewWrapper,D),this.updateRemainingText(v,a,o,m,b)}}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"}checkClearIconWidth(){this.showClearButton&&(this.clearIconWidth=this.overAllClear.offsetWidth)}updateRemainWidth(e,t){e.classList.contains(Lj)&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")}updateRemainTemplate(e,t,i,s,r,o){t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild),e.innerHTML="";const a=s.replace("${count}",i.toString()),l=r.replace("${count}",i.toString());return e.innerText=t.firstChild&&3===t.firstChild.nodeType?a:l,t.firstChild&&3===t.firstChild.nodeType?t.classList.remove(Lj):(t.classList.add(Lj),this.updateRemainWidth(t,o)),e}updateRemainingText(e,t,i,s,r){const o=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10);let a=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(a+t>=o&&0!==a&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;a+t>o&&0!==a&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){const h=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);h.pop(),this.viewWrapper.firstChild.nodeValue=h.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),i++,a=this.viewWrapper.offsetWidth}this.updateRemainTemplate(e,this.viewWrapper,i,s,r,o-t)}}getOverflowVal(e){let t;if(this.mainData&&this.mainData.length)if("CheckBox"===this.mode){const i=this.listData;this.listData=this.mainData,t=this.getTextByValue(this.value[e]),this.listData=i}else t=this.getTextByValue(this.value[e]);else t=this.value[e];return t}unWireEvent(){k.remove(this.componentWrapper,"mousedown",this.wrapperClick),k.remove(window,"resize",this.windowResize),k.remove(this.inputElement,"focus",this.focusInHandler),k.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&k.remove(this.inputElement,"input",this.onInput),k.remove(this.inputElement,"keyup",this.keyUp);const e=B(this.inputElement,"form");e&&k.remove(e,"reset",this.resetValueHandler),k.remove(this.inputElement,"blur",this.onBlurHandler),k.remove(this.componentWrapper,"mouseover",this.mouseIn),k.remove(this.componentWrapper,"mouseout",this.mouseOut),k.remove(this.overAllClear,"mousedown",this.clearAll),k.remove(this.inputElement,"paste",this.pasteHandler)}selectAllItem(e,t,i){let s;if(s=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)'),this.value&&this.value.length&&t&&t.target&&B(t.target,".e-close-hooker")&&this.allowFiltering&&(s=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy)){let r=t?this.groupTemplate?B(t.target,".e-list-group-item"):t.target:null;if(r=t&&32===t.keyCode?i:r,r=r&&r.classList.contains("e-frame")?r.parentElement.parentElement:r,r&&r.classList.contains("e-list-group-item")){let o=r.nextElementSibling;if(f(o))return;for(;o.classList.contains("e-list-item");){if(e){if(!o.firstElementChild.lastElementChild.classList.contains("e-check")){let a=this.value&&this.value.length?this.value.length:0;o.classList.contains("e-active")&&(a-=1),a<this.maximumSelectionLength&&this.updateListSelection(o,t)}}else o.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(o,t);if(o=o.nextElementSibling,null==o)break}if(r.classList.contains("e-list-group-item")){const a=this.list.getElementsByClassName("e-item-focus")[0];a&&a.classList.remove("e-item-focus"),e?r.classList.add("e-active"):r.classList.remove("e-active"),r.classList.add("e-item-focus")}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&t&&this.updateValueState(t,this.value,this.tempValues)}else this.updateValue(t,s,e)}else this.updateValue(t,s,e)}updateValue(e,t,i){const s=t.length,r={event:e,items:i?t:[],itemData:i?this.listData:[],isInteracted:!!e,isChecked:i,preventSelectEvent:!1};if(this.trigger("beforeSelectAll",r),t&&t.length){let o=0,a=0;if(a=this.enableGroupCheckBox?i?this.maximumSelectionLength-(this.value?this.value.length:0):t.length:i?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength,r.preventSelectEvent){for(let h=0;h<t.length&&h<a;h++){this.removeHover();const c=t[h].getAttribute("data-value"),m=this.getFormattedValue(c),b=this.mainList?this.mainList.querySelectorAll(i?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')[h]:null;i?(this.value=this.value?this.value:[],this.value.indexOf(m)<0&&this.setProperties({value:[].concat([],this.value,[m])},!0),this.removeFocus(),this.addListSelection(t[h],b),this.updateChipStatus(),this.checkMaxSelection()):this.removeAllItems(m,e,!1,t[h],b),this.enableGroupCheckBox&&this.findGroupStart(t[h])}!i&&(this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength&&W(this.list.querySelectorAll("li."+pt_li+":not(.e-active)"),"e-disable"),this.trigger("selectedAll",{event:e,items:i?t:[],itemData:i?this.listData:[],isInteracted:!!e,isChecked:i})}else{for(;o<s&&o<=50&&o<a;)this.updateListSelection(t[o],e,s-o),this.enableGroupCheckBox&&this.findGroupStart(t[o]),o++;s>50&&setTimeout(()=>{for(;o<s&&o<a;)this.updateListSelection(t[o],e,s-o),this.enableGroupCheckBox&&this.findGroupStart(t[o]),o++;this.updatedataValueItems(e),this.changeOnBlur||(this.updateValueState(e,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement()},0)}}this.updatedataValueItems(e),this.checkPlaceholderSize(),s<=50&&!r.preventSelectEvent&&(this.changeOnBlur||(this.updateValueState(e,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement())}updateHiddenElement(){let e="",t="",i="";const s=[];"CheckBox"===this.mode&&(this.value.map((r,o)=>{e+='<option selected value ="'+r+'">'+o+"</option>",i=this.listData?this.getTextByValue(r):r,t+=i+this.delimiterChar+" ",s.push(i)}),this.hiddenElement.innerHTML=e,this.updateWrapperText(this.delimiterWrapper,t),this.delimiterWrapper.setAttribute("id",Tn("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.delimiterWrapper.id),this.setProperties({text:s.toString()},!0),this.refreshInputHight(),this.refreshPlaceHolder())}updatedataValueItems(e){this.deselectHeader(),this.textboxValueUpdate(e)}textboxValueUpdate(e){const t=e&&e.target&&(B(e.target,".e-selectall-parent")||B(e.target,".e-close-hooker"));"Box"===this.mode||this.isPopupOpen()||"CheckBox"===this.mode&&(this.isSelectAll||t)?this.searchWrapper.classList.remove(Aj):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),t||this.isSelectAll||this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()}setZIndex(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})}updateDataSource(e){f(this.list)?this.renderPopup():this.resetList(this.dataSource),this.value&&this.value.length&&(this.setProperties({value:this.value}),this.refreshSelection())}onLoadSelect(){this.setDynValue=!0,this.renderPopup()}selectAllItems(e,t){f(this.list)?(this.selectAllAction=()=>{"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:e?"check":"uncheck"}),this.selectAllItem(e,t),this.selectAllAction=null},super.render()):(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{value:e?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"}),this.selectAllItem(e,t))}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(e,t){(e.dataSource&&!f(Object.keys(e.dataSource))||e.query&&!f(Object.keys(e.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),"multiselect"===this.getModuleName()&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],e));for(const i of Object.keys(e))switch(i){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&(f(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,t.value,"value"),this.addValidInputClass(),!this.closePopupOnSelect&&this.isPopupOpen()&&this.refreshPopup(),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"width":this.setWidth(e.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:e.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(e.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(t.cssClass),this.updateCssClass();break;case"enableRtl":this.enableRTL(e.enableRtl),super.onPropertyChanged(e,t);break;case"readonly":this.updateReadonly(e.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(e.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass();break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":if(this.popupObj){const s=parseInt(this.popupHeight,10);"auto"!==this.popupHeight?(this.list.style.maxHeight=st(s),this.popupWrapper.style.maxHeight=st(this.popupHeight)):this.list.style.maxHeight=st(this.popupHeight)}break;case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;default:{const s=this.getPropObject(i,e,t);super.onPropertyChanged(s.newProperty,s.oldProperty)}}}reInitializePoup(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()}presentItemValue(e){const t=[];for(let i=0;i<this.value.length;i++)this.findListElement(this.allowFiltering&&!f(this.mainList)?this.mainList:e,"li","data-value",this.value[i])||t.push(this.value[i]);return t}addNonPresentItems(e,t,i,s){this.dataSource.executeQuery(this.getForQuery(e)).then(r=>{this.addItem(r.result,i.length),this.updateActionList(t,i,s)})}updateVal(e,t,i){if(this.list)if(!(this.dataSource instanceof ut)||this.listData&&this.mainList&&this.mainData){let s=[];if(!f(this.value)&&!this.allowCustomValue&&(s=this.presentItemValue(this.ulElement)),"value"===i&&s.length>0&&this.dataSource instanceof ut&&!f(this.value)&&null!=this.listData)this.mainData=null,this.setDynValue=!0,this.addNonPresentItems(s,this.ulElement,this.listData);else{if("text"===i&&(this.initialTextUpdate(),e=this.value),(f(this.value)||0===this.value.length)&&(this.tempValues=t),this.allowCustomValue&&("Default"===this.mode||"Box"===this.mode)&&this.isReact&&this.inputFocus&&this.isPopupOpen()&&this.mainData!==this.listData){const r=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(r,this.mainData)}this.initialValueUpdate(),"Box"!==this.mode&&!this.inputFocus&&this.updateDelimView(),this.inputFocus||this.refreshInputHight(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,e,t),this.checkPlaceholderSize()}}else this.onLoadSelect();else this.onLoadSelect();this.changeOnBlur||this.updateValueState(null,e,t)}addItem(e,t){super.addItem(e,t)}hidePopup(){this.isPopupOpen()&&this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:100}},s=>{s.cancel||(this.fields.groupBy&&"CheckBox"!==this.mode&&this.fixedHeaderElement&&(Yt(this.fixedHeaderElement),this.fixedHeaderElement=null),this.beforePopupOpen=!1,this.overAllWrapper.classList.remove(Yce),this.popupObj.hide(new mo(s.animation)),Rt(this.inputElement,{"aria-expanded":"false"}),this.allowFiltering&&this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"clear"}),this.popupObj.hide(),W([document.body,this.popupObj.element],"e-popup-full-page"),k.remove(this.list,"keydown",this.onKeyDown))})}showPopup(){this.enabled&&this.trigger("beforeOpen",{cancel:!1},t=>{if(!t.cancel){if(!this.ulElement)return this.beforePopupOpen=!0,super.render(),void("CheckBox"===this.mode&&q.isDevice&&this.allowFiltering&&this.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}));"CheckBox"===this.mode&&q.isDevice&&this.allowFiltering&&this.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode});const i=this.ulElement.querySelectorAll("li.e-list-item").length,s=this.ulElement.querySelectorAll("li."+pt_li+"."+eo).length;if(i>0&&i===s&&s===this.mainData.length)return void(this.beforePopupOpen=!1);this.onPopupShown()}})}selectAll(e){this.isSelectAll=!0,this.selectAllItems(e)}getModuleName(){return"multiselect"}clear(){this.selectAll(!1),this.value&&this.value.length?setTimeout(()=>{this.setProperties({value:null},!0)},0):this.setProperties({value:null},!0)}render(){this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view "+qce,styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:Uce,styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group e-control-wrapper"}),"CheckBox"===this.mode&&z([this.overAllWrapper],"e-checkbox"),q.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:qce,styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection",styles:"display:none"}),"Default"===this.mode?this.chipCollectionWrapper.setAttribute("id",Tn("chip_default")):"Box"===this.mode&&this.chipCollectionWrapper.setAttribute("id",Tn("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!q.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add(lY),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0"}}),("Default"===this.mode||"Box"===this.mode)&&(this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.chipCollectionWrapper.id)),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?Hce(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";const e=this.element.getAttribute("id")?this.element.getAttribute("id"):Tn("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.checkInitialValue(),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete()}checkInitialValue(){const e=this.dataSource instanceof Array?this.dataSource.length>0:!f(this.dataSource);if((!this.value||!this.value.length)&&f(this.text)&&!e&&"SELECT"===this.element.tagName&&this.element.options.length>0){const t=this.element.options,i=[];let s="";for(let r=0,o=t.length;r<o;r++){const a=t[r];f(a.getAttribute("selected"))||(a.getAttribute("value")?i.push(a.getAttribute("value")):s+=a.text+this.delimiterChar)}i.length>0?this.setProperties({value:i},!0):""!==s&&this.setProperties({text:s},!0),(i.length>0||""!==s)&&(this.refreshInputHight(),this.refreshPlaceHolder())}(this.value&&this.value.length||!f(this.text))&&(this.list||super.render()),!f(this.text)&&(f(this.value)||0===this.value.length)&&this.initialTextUpdate(),this.value&&this.value.length?(this.dataSource instanceof ut?this.setInitialValue=()=>{this.initStatus=!1,this.initialValueUpdate(),this.initialUpdate(),this.setInitialValue=null,this.initStatus=!0}:(this.initialValueUpdate(),this.initialUpdate()),this.updateTempValue()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus(),f(this.text)||this.element.setAttribute("data-initial-value",this.text)}checkAutoFocus(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()}setFloatLabelType(){(function jAe(n,e,t,i,s,r,o){const a=e.querySelector("."+CP),l=e.querySelector("."+oY);let h;f(a)?(h=null!==o?o:"",Vce(s,i,h)):(h=a.innerText,te(t.querySelector("."+CP)),Vce(s,i,h),f(l)||te(t.querySelector("."+oY))),n.classList.remove("e-float-input")})(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,0,this.placeholder),"Never"!==this.floatLabelType&&Hce(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)}addValidInputClass(){!f(this.value)&&this.value.length||"Always"===this.floatLabelType?z([this.overAllWrapper],"e-valid-input"):W([this.overAllWrapper],"e-valid-input")}dropDownIcon(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:Kce}),this.componentWrapper.appendChild(this.dropIcon),z([this.componentWrapper],["e-down-icon"])):f(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),W([this.componentWrapper],["e-down-icon"]))}initialUpdate(){"Box"!==this.mode&&!(this.setDynValue&&"Default"===this.mode&&this.inputFocus)&&this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()}destroy(){this.isReact&&this.clearTemplate(),this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,this.filterParent=null,this.ulElement=null,this.mainListCollection=null,super.destroy();const e=["readonly","aria-disabled","aria-placeholder","placeholder"];let t=e.length;for(;t>0;)this.inputElement.removeAttribute(e[t-1]),t--;this.element.removeAttribute("data-initial-value"),this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()||this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),Yt(this.overAllWrapper))}};Ui([di({text:null,value:null,iconCss:null,groupBy:null},XK)],Vi.prototype,"fields",void 0),Ui([_(!1)],Vi.prototype,"enablePersistence",void 0),Ui([_(null)],Vi.prototype,"groupTemplate",void 0),Ui([_("No records found")],Vi.prototype,"noRecordsTemplate",void 0),Ui([_("Request failed")],Vi.prototype,"actionFailureTemplate",void 0),Ui([_("None")],Vi.prototype,"sortOrder",void 0),Ui([_(!0)],Vi.prototype,"enabled",void 0),Ui([_(!1)],Vi.prototype,"enableHtmlSanitizer",void 0),Ui([_([])],Vi.prototype,"dataSource",void 0),Ui([_(null)],Vi.prototype,"query",void 0),Ui([_("StartsWith")],Vi.prototype,"filterType",void 0),Ui([_(1e3)],Vi.prototype,"zIndex",void 0),Ui([_(!1)],Vi.prototype,"ignoreAccent",void 0),Ui([_()],Vi.prototype,"locale",void 0),Ui([_(!1)],Vi.prototype,"enableGroupCheckBox",void 0),Ui([_(null)],Vi.prototype,"cssClass",void 0),Ui([_("100%")],Vi.prototype,"width",void 0),Ui([_("300px")],Vi.prototype,"popupHeight",void 0),Ui([_("100%")],Vi.prototype,"popupWidth",void 0),Ui([_(null)],Vi.prototype,"placeholder",void 0),Ui([_(null)],Vi.prototype,"filterBarPlaceholder",void 0),Ui([_({})],Vi.prototype,"htmlAttributes",void 0),Ui([_(null)],Vi.prototype,"valueTemplate",void 0),Ui([_(null)],Vi.prototype,"headerTemplate",void 0),Ui([_(null)],Vi.prototype,"footerTemplate",void 0),Ui([_(null)],Vi.prototype,"itemTemplate",void 0),Ui([_(null)],Vi.prototype,"allowFiltering",void 0),Ui([_(!0)],Vi.prototype,"changeOnBlur",void 0),Ui([_(!1)],Vi.prototype,"allowCustomValue",void 0),Ui([_(!0)],Vi.prototype,"showClearButton",void 0),Ui([_(1e3)],Vi.prototype,"maximumSelectionLength",void 0),Ui([_(!1)],Vi.prototype,"readonly",void 0),Ui([_(null)],Vi.prototype,"text",void 0),Ui([_(null)],Vi.prototype,"value",void 0),Ui([_(!0)],Vi.prototype,"hideSelectedItem",void 0),Ui([_(!0)],Vi.prototype,"closePopupOnSelect",void 0),Ui([_("Default")],Vi.prototype,"mode",void 0),Ui([_(",")],Vi.prototype,"delimiterChar",void 0),Ui([_(!0)],Vi.prototype,"ignoreCase",void 0),Ui([_(!1)],Vi.prototype,"showDropDownIcon",void 0),Ui([_("Never")],Vi.prototype,"floatLabelType",void 0),Ui([_(!1)],Vi.prototype,"showSelectAll",void 0),Ui([_("Select All")],Vi.prototype,"selectAllText",void 0),Ui([_("Unselect All")],Vi.prototype,"unSelectAllText",void 0),Ui([_(!0)],Vi.prototype,"enableSelectionOrder",void 0),Ui([_(!0)],Vi.prototype,"openOnClick",void 0),Ui([_(!1)],Vi.prototype,"addTagOnBlur",void 0),Ui([G()],Vi.prototype,"change",void 0),Ui([G()],Vi.prototype,"removing",void 0),Ui([G()],Vi.prototype,"removed",void 0),Ui([G()],Vi.prototype,"beforeSelectAll",void 0),Ui([G()],Vi.prototype,"selectedAll",void 0),Ui([G()],Vi.prototype,"beforeOpen",void 0),Ui([G()],Vi.prototype,"open",void 0),Ui([G()],Vi.prototype,"close",void 0),Ui([G()],Vi.prototype,"blur",void 0),Ui([G()],Vi.prototype,"focus",void 0),Ui([G()],Vi.prototype,"chipSelection",void 0),Ui([G()],Vi.prototype,"filtering",void 0),Ui([G()],Vi.prototype,"tagging",void 0),Ui([G()],Vi.prototype,"customValueSelection",void 0),Vi=Ui([as],Vi);var Pj,pr=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class SP extends ii{}pr([_("Multiple")],SP.prototype,"mode",void 0),pr([_(!1)],SP.prototype,"showCheckbox",void 0),pr([_(!1)],SP.prototype,"showSelectAll",void 0),pr([_("Left")],SP.prototype,"checkboxPosition",void 0);class cY extends ii{}pr([_([])],cY.prototype,"items",void 0),pr([_("Right")],cY.prototype,"position",void 0);let So=Pj=class extends QK{constructor(e,t){super(e,t),this.isValidKey=!1,this.isDataSourceUpdate=!1,this.keyDownStatus=!1}addItem(e,t){super.addItem(e,t)}render(){this.inputString="",this.initLoad=!0,this.isCustomFiltering=!1,this.initialSelectedOptions=this.value,super.render(),this.renderComplete()}initWrapper(){const e=this.createElement("select",{className:"e-hidden-select",attrs:{multiple:""}});this.list.classList.add("e-listbox-wrapper"),this.itemTemplate&&this.list.classList.add("e-list-template"),this.list.classList.add("e-wrapper"),this.list.classList.add("e-lib"),"EJS-LISTBOX"===this.element.tagName?(this.element.setAttribute("tabindex","0"),this.initLoad&&this.element.appendChild(this.list)):(this.initLoad&&this.element.parentElement.insertBefore(this.list,this.element),this.list.insertBefore(this.element,this.list.firstChild),this.element.style.display="none"),this.list.insertBefore(e,this.list.firstChild),this.list.getElementsByClassName("e-list-item")[0]&&this.list.getElementsByClassName("e-list-item")[0].classList.remove(pt_focus),this.itemTemplate&&this.renderReactTemplates(),W([this.list],["e-content",pt_root]),this.validationAttribute(this.element,e),this.list.setAttribute("role","listbox"),Rt(this.list,{role:"listbox","aria-multiselectable":"Multiple"===this.selectionSettings.mode?"true":"false"}),this.updateSelectionSettings()}updateSelectionSettings(){if(this.selectionSettings.showCheckbox&&this.selectionSettings.showSelectAll&&this.liCollections.length){const e=new jo(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=e.getConstant("selectAllText"),this.unSelectAllText=e.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{})}}initDraggable(){this.ulElement&&(this.ulElement.id=this.element.id+"_parent"),this.allowDragAndDrop&&new gp(this.ulElement,{scope:this.scope,itemClass:"e-list-item",dragStart:this.triggerDragStart.bind(this),drag:this.triggerDrag.bind(this),beforeDrop:this.beforeDragEnd.bind(this),drop:this.dragEnd.bind(this),placeHolder:()=>this.createElement("span",{className:"e-placeholder"}),helper:e=>{const t=this.list.cloneNode(),i=e.sender.cloneNode(!0);t.appendChild(i);const s=this.getItems()[0];return t.style.width=s.offsetWidth+"px",t.style.height=s.offsetHeight+"px",(this.value&&this.value.length)>1&&this.isSelected(i)&&i.appendChild(this.createElement("span",{className:"e-list-badge",innerHTML:this.value.length+""})),t.style.zIndex=zw(this.element)+"",t}})}updateActionCompleteData(e,t){this.jsonData.push(t)}initToolbar(){const e=this.toolbarSettings.position,t=this.element.getAttribute("data-value");if(this.toolbarSettings.items.length){const s=this.createElement("div",{className:"e-listbox-tool",attrs:{role:"toolbar"}}),r=this.createElement("div",{className:"e-listboxtool-wrapper e-lib e-"+e.toLowerCase()});this.list.parentElement.insertBefore(r,this.list),r.appendChild("Right"===e?this.list:s),r.appendChild("Right"===e?s:this.list),this.createButtons(s),this.element.id||(this.element.id=Tn("e-"+this.getModuleName())),this.scope?document.querySelector(this.scope).setAttribute("data-value",this.element.id):this.updateToolBarState()}const i=this.element.getAttribute("data-value");t&&i&&t!==i?(this.tBListBox=Fh(document.getElementById(t),this.getModuleName()),this.tBListBox.updateToolBarState()):i&&(this.tBListBox=Fh(document.getElementById(i),this.getModuleName()),this.tBListBox.updateToolBarState())}createButtons(e){let t,i,s;const r=new jo(this.getModuleName(),{moveUp:"Move Up",moveDown:"Move Down",moveTo:"Move To",moveFrom:"Move From",moveAllTo:"Move All To",moveAllFrom:"Move All From"},this.locale);this.toolbarSettings.items.forEach(o=>{s=r.getConstant(o),i=this.createElement("button",{attrs:{type:"button","data-value":o,title:s,"aria-label":s}}),e.appendChild(i),t=new Sa({iconCss:"e-icons e-"+o.toLowerCase()},i),t.createElement=this.createElement})}validationAttribute(e,t){super.validationAttribute(e,t),t.required=e.required,e.required=!1}setHeight(){(this.toolbarSettings.items.length?this.list.parentElement:this.list).style.height=st(this.height),this.allowFiltering&&this.height.toString().indexOf("%")<0?z([this.list],"e-filter-list"):W([this.list],"e-filter-list")}setCssClass(){this.cssClass&&z([this.toolbarSettings.items.length?this.list.parentElement:this.list],this.cssClass.split(" ")),this.enableRtl&&z([this.list],"e-rtl")}setEnable(){const e=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.enabled?W([e],Ki.disabled):z([e],Ki.disabled)}showSpinner(){this.spinner||(this.spinner=this.createElement("div",{className:"e-listbox-wrapper"})),this.spinner.style.height=st(this.height),this.element.parentElement.insertBefore(this.spinner,this.element.nextSibling),vp({target:this.spinner},this.createElement),xa(this.spinner)}hideSpinner(){this.spinner.querySelector(".e-spinner-pane")&&Rl(this.spinner),this.spinner.parentElement&&te(this.spinner)}onInput(){this.isDataSourceUpdate=!1,this.isValidKey=!!this.keyDownStatus,this.keyDownStatus=!1,this.refreshClearIcon()}clearText(){this.filterInput.value="",this.refreshClearIcon();const e=document.createEvent("KeyboardEvent");this.isValidKey=!0,this.KeyUp(e)}refreshClearIcon(){this.filterInput.parentElement.querySelector("."+Xk.clearIcon)&&(this.filterInput.parentElement.querySelector("."+Xk.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible")}onActionComplete(e,t,i){let s;if(this.allowFiltering&&this.list.getElementsByClassName("e-filter-parent")[0]&&(s=this.list.getElementsByClassName("e-filter-parent")[0].cloneNode(!0)),0===t.length){const r=e.childNodes[0];r&&e.removeChild(r)}if(super.onActionComplete(e,t,i),this.allowFiltering&&!f(s)&&(this.list.insertBefore(s,this.list.firstElementChild),this.filterParent=this.list.getElementsByClassName("e-filter-parent")[0],this.filterWireEvents(s)),this.initWrapper(),this.setSelection(),this.initDraggable(),this.mainList=this.ulElement,this.initLoad)this.jsonData=[],Ae(this.jsonData,t,[]),this.initToolbarAndStyles(),this.wireEvents(),this.showCheckbox&&this.setCheckboxPosition(),this.allowFiltering&&this.setFiltering();else if(this.isDataSourceUpdate&&(this.jsonData=[],Ae(this.jsonData,t,[]),this.isDataSourceUpdate=!1),this.allowFiltering){const r=this.list.getElementsByClassName("e-input-filter")[0],o=this.filterInput.value.length;r.selectionStart=o,r.selectionEnd=o,r.focus()}if(this.toolbarSettings.items.length&&this.scope&&this.scope.indexOf("#")>-1&&!f(i)){const r=this.scope.replace("#","");Fh(document.getElementById(r),this.getModuleName()).initToolbar()}this.initLoad=!1}initToolbarAndStyles(){this.initToolbar(),this.setCssClass(),this.setEnable(),this.setHeight()}triggerDragStart(e){let t;e=Ae(this.getDragArgs(e),{dragSelected:!0}),q.isIos&&(this.list.style.overflow="hidden"),this.trigger("dragStart",e,i=>{this.allowDragAll=i.dragSelected,this.allowDragAll||(t=this.ulElement.getElementsByClassName("e-list-badge")[0],t&&te(t))})}triggerDrag(e){let t,i;const r=e.event;let o;if(e.target&&(e.target.classList.contains("e-listbox-wrapper")||e.target.classList.contains("e-list-item")||e.target.classList.contains("e-filter-parent")||e.target.classList.contains("e-input-group"))&&(o=e.target.classList.contains("e-list-item")||e.target.classList.contains("e-filter-parent")||e.target.classList.contains("e-input-group")?e.target.closest(".e-listbox-wrapper"):e.target,t=this.allowFiltering?o.querySelector(".e-list-parent"):o,i=t.getBoundingClientRect(),i.y+t.offsetHeight-(r.pageY+36)<1?t.scrollTop=t.scrollTop+10:r.pageY-36-i.y<1&&(t.scrollTop=t.scrollTop-10)),null===e.target)return;this.trigger("drag",this.getDragArgs(e));const a=this.getComponent(e.target);if(a&&0===a.listData.length){const l=a.ulElement.childNodes[0];l&&a.ulElement.removeChild(l)}}beforeDragEnd(e){const t=this.getFormattedValue(e.droppedElement.getAttribute("data-value"));e.items=this.value.indexOf(t)>-1?this.getDataByValues(this.value):this.getDataByValues([t]),this.trigger("beforeDrop",e)}dragEnd(e){let t,i,s,r,o,a;const l=this.getFormattedValue(e.droppedElement.getAttribute("data-value")),h=this.getComponent(e.droppedElement),c=this.getDragArgs({target:e.droppedElement},!0),m={previousData:this.dataSource},b={previousData:h.dataSource};let v=Ae({},c,{target:e.target,source:{previousData:this.dataSource},previousIndex:e.previousIndex,currentIndex:e.currentIndex});if(h!==this){const w=Ae(m,{currentData:this.listData});v=Ae(v,{source:w,destination:b})}if(q.isIos&&(this.list.style.overflow=""),h===this){const w=this.ulElement;t=[].slice.call(this.listData),i=[].slice.call(this.liCollections),s=[].slice.call(this.jsonData),a=[].slice.call(this.sortedData);const E=e.currentIndex;let D=e.currentIndex=this.getCurIdx(this,e.currentIndex);const L=t.indexOf(this.getDataByValue(l)),N=s.indexOf(this.getDataByValue(l)),V=a.indexOf(this.getDataByValue(l));t.splice(D,0,t.splice(L,1)[0]),a.splice(E,0,a.splice(V,1)[0]),s.splice(D,0,s.splice(N,1)[0]),i.splice(D,0,i.splice(L,1)[0]),this.allowDragAll&&(o=this.value&&Array.prototype.indexOf.call(this.value,l)>-1?this.value:[l],o.forEach($=>{if($!==l){const ie=t.indexOf(this.getDataByValue($)),Q=s.indexOf(this.getDataByValue($)),le=a.indexOf(this.getDataByValue($));ie>D&&D++,s.splice(D,0,s.splice(Q,1)[0]),t.splice(D,0,t.splice(ie,1)[0]),a.splice(E,0,a.splice(le,1)[0]),i.splice(D,0,i.splice(ie,1)[0]),w.insertBefore(this.getItems()[this.getIndexByValue($)],w.getElementsByClassName("e-placeholder")[0])}})),this.listData=t,this.jsonData=s,this.sortedData=a,this.liCollections=i}else{let w;const E=[].slice.call(this.liCollections);let D=e.currentIndex=this.getCurIdx(h,e.currentIndex);const L=h.ulElement;t=[].slice.call(h.listData),i=[].slice.call(h.liCollections),s=[].slice.call(h.jsonData),a=[].slice.call(h.sortedData),o=this.value&&Array.prototype.indexOf.call(this.value,l)>-1&&this.allowDragAll?this.value:[l];const N=[].slice.call(this.listData),V=[].slice.call(this.sortedData);if(o.forEach(($,ie)=>{r=this.getDataByValue($);const Q=this.listData.indexOf(r),le=this.jsonData.indexOf(r),ke=this.sortedData.indexOf(r);N.splice(Q,1),this.jsonData.splice(le,1),V.splice(ke,1),this.listData=N,this.sortedData=V;const Ye=$===l?e.currentIndex:D;if(t.splice(Ye,0,r),s.splice(Ye,0,r),a.splice(Ye,0,r),i.splice(Ye,0,E.splice(Q,1)[0]),$)w=this.getItems()[this.getIndexByValue($)];else{const Nt=this.getItems();for(let Le=0;Le<Nt.length;Le++)if(null===Nt[Le].getAttribute("data-value")&&Nt[Le].classList.contains("e-list-item")){w=Nt[Le];break}}w||(w=e.helper),this.removeSelected(this,$===l?[e.droppedElement]:[w]),L.insertBefore(w,L.getElementsByClassName("e-placeholder")[0]),D++}),this.fields.groupBy){const $=this.renderItems(this.listData,this.fields);this.updateListItems($,this.ulElement),this.setSelection()}if("None"!==h.sortOrder||this.selectionSettings.showCheckbox!==h.selectionSettings.showCheckbox||h.fields.groupBy||h.itemTemplate||this.itemTemplate){const $=Fh(L,"sortable"),ie=h.renderItems(t,h.fields);h.updateListItems(ie,L),this.setSelection(),$.placeHolderElement&&L.appendChild($.placeHolderElement),L.appendChild(e.helper),h.setSelection()}this.liCollections=E,h.liCollections=i,h.jsonData=Ae([],[],s,!1),h.listData=Ae([],[],t,!1),h.sortedData=Ae([],[],a,!1),0===this.listData.length&&this.l10nUpdate()}if(this===h){const w=Ae(m,{currentData:t});v=Ae(v,{source:w})}else{const w=Ae(b,{currentData:t});v=Ae(v,{destination:w})}this.trigger("drop",v)}updateListItems(e,t){for(t.innerHTML="";0<e.childNodes.length;)t.appendChild(e.childNodes[0])}removeSelected(e,t){e.selectionSettings.showCheckbox?t.forEach(i=>{i.getElementsByClassName("e-frame")[0].classList.remove("e-check")}):W(t,Ki.selected)}getCurIdx(e,t){return e.fields.groupBy&&(t-=[].slice.call(e.ulElement.children).slice(0,t).filter(i=>i.classList.contains(Ki.group)).length),t}getComponent(e){let t;const i="EJS-LISTBOX"===this.element.tagName?B(e,".e-listbox"):B(e,".e-listbox-wrapper")&&B(e,".e-listbox-wrapper").querySelector(".e-listbox");return i&&(t=Fh(i,this.getModuleName())),t}listOption(e,t){return this.listCurrentOptions=super.listOption(e,t),this.listCurrentOptions=Ae({},this.listCurrentOptions,{itemCreated:this.triggerBeforeItemRender.bind(this)},!0),this.notify("listoption",{module:"CheckBoxSelection"}),this.listCurrentOptions}triggerBeforeItemRender(e){e.item.setAttribute("tabindex","-1"),this.trigger("beforeItemRender",{element:e.item,item:e.curData})}requiredModules(){const e=[];return this.selectionSettings.showCheckbox&&e.push({member:"CheckBoxSelection",args:[this]}),e}enableItems(e,t=!0,i){let s;e.forEach(r=>{s=this.findListElement(this.list,"li","data-value",i?r:this.getValueByText(r)),s&&(t?(W([s],Ki.disabled),s.removeAttribute("aria-disabled")):(z([s],Ki.disabled),s.setAttribute("aria-disabled","true")))})}selectItems(e,t=!0,i){this.setSelection(e,t,!i),this.updateSelectedOptions()}selectAll(e=!0){this.selectAllItems(e)}addItems(e,t){super.addItem(e,t)}removeItems(e,t){this.removeItem(e,t)}removeItem(e,t){const i=[],s=this.list.querySelectorAll("."+pt_li);if(e){e=e instanceof Array?e:[e];const r=this.fields;let o,a;const l=[];let h;Ae(l,[],this.listData);const c=[],m=[];for(let b=0;b<e.length;b++){o=e[b]instanceof Object?U(r.value,e[b]):e[b].toString();for(let v=0,w=l.length;v<w;v++)if(a=l[v]instanceof Object?U(r.value,l[v]):l[v].toString(),a===o){h=this.getIndexByValue(o);const E=h===v?h:v;i.push(s[E]),c.push(E),m.push(E)}}for(let b=c.length-1;b>=0;b--)this.listData.splice(c[b],1);for(let b=c.length-1;b>=0;b--)this.jsonData.splice(c[b],1);for(let b=m.length-1;b>=0;b--)this.updateLiCollection(m[b])}else i.push(s[t=t||0]),this.listData.splice(t,1),this.jsonData.splice(t,1),this.updateLiCollection(t);for(let r=0;r<i.length;r++)this.ulElement.removeChild(i[r]);0===this.listData.length&&this.l10nUpdate(),this.value=null,this.updateToolBarState()}getDataByValues(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.getDataByValue(e[i]));return t}moveUp(e){const t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!0,!1,t)}moveDown(e){const t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!1,!1,t)}moveTo(e,t,i){const s=e?this.getElemByValue(e):this.getSelectedItems(),r=i?Fh(i,Pj):this.getScopedListBox();this.moveData(this,r,!1,s,t)}moveAllTo(e,t){if(this.listData.length>0){const i=e?Fh(e,Pj):this.getScopedListBox();this.moveAllData(this,i,!1,t)}}getDataList(){return this.jsonData}getSortedList(){let e,t;if(e=t=this.sortedData,this.fields.groupBy){e=[];for(let i=0;i<t.length;i++)t[i].isHeader||e.push(t[i])}return e}getElemByValue(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.ulElement.querySelector('[data-value ="'+e[i]+'"]'));return t}updateLiCollection(e){const t=[].slice.call(this.liCollections);t.splice(e,1),this.liCollections=t}selectAllItems(e,t){if([].slice.call(this.getItems()).forEach(i=>{if(!i.classList.contains(Ki.disabled))if(this.selectionSettings.showCheckbox){const s=i.getElementsByClassName("e-check")[0];(!s&&e||s&&!e)&&(this.notify("updatelist",{li:i,module:"listbox"}),this.maximumSelectionLength>=this.list.querySelectorAll(".e-list-item span.e-check").length&&this.checkMaxSelection())}else e?i.classList.add(Ki.selected):i.classList.remove(Ki.selected)}),this.updateSelectedOptions(),this.allowFiltering&&this.selectionSettings.showCheckbox){const i=this.list.getElementsByTagName("li");let s=0;if(e)for(s=0;s<i.length;s++){const r=this.getFormattedValue(i[s].getAttribute("data-value"));this.value.some(o=>o===r)||this.value.push(this.getFormattedValue(i[s].getAttribute("data-value")))}else for(s=0;s<i.length;s++){const r=this.getFormattedValue(i[s].getAttribute("data-value"));this.value=this.value.filter(o=>o!==r)}document.querySelectorAll("ul").length<2&&this.updateMainList()}this.triggerChange(this.getSelectedItems(),t)}updateMainList(){const e=this.mainList.querySelectorAll(".e-list-item"),t=this.ulElement.querySelectorAll(".e-list-item"),i=e.length,s=t.length;if(this.selectionSettings.showCheckbox||document.querySelectorAll("ul").length>1||i!==s){let r=0,o=0,a=0;for(;r<i;){if(this.value)for(;o<this.value.length;o++)e[r].getAttribute("data-value")===this.value[o]&&a++;!a&&this.selectionSettings.showCheckbox&&e[r].getElementsByClassName("e-frame")[0].classList.remove("e-check"),document.querySelectorAll("ul").length>1&&a&&i!==s?(this.mainList.removeChild(this.mainList.getElementsByTagName("li")[r]),r=0):r++,a=0,o=0}}}wireEvents(){const e=B(this.element,"form"),t="EJS-LISTBOX"===this.element.tagName?this.element:this.list;k.add(this.list,"click",this.clickHandler,this),k.add(t,"keydown",this.keyDownHandler,this),k.add(t,"focusout",this.focusOutHandler,this),this.wireToolbarEvent(),this.selectionSettings.showCheckbox&&k.remove(document,"mousedown",this.checkBoxSelectionModule.onDocumentClick),(this.fields.groupBy||this.element.querySelector("select>optgroup"))&&k.remove(this.list,"scroll",this.setFloatingHeader),e&&k.add(e,"reset",this.formResetHandler,this)}wireToolbarEvent(){this.toolbarSettings.items.length&&k.add(this.getToolElem(),"click",this.toolbarClickHandler,this)}unwireEvents(){const e=B(this.element,"form"),t="EJS-LISTBOX"===this.element.tagName?this.element:this.list;k.remove(this.list,"click",this.clickHandler),k.remove(t,"keydown",this.keyDownHandler),k.remove(t,"focusout",this.focusOutHandler),this.allowFiltering&&this.clearFilterIconElem&&k.remove(this.clearFilterIconElem,"click",this.clearText),this.toolbarSettings.items.length&&k.remove(this.getToolElem(),"click",this.toolbarClickHandler),e&&k.remove(e,"reset",this.formResetHandler)}clickHandler(e){this.selectHandler(e)}checkSelectAll(){let e=0;const t=this.list.querySelectorAll("li."+pt_li);for(let s=0;s<t.length;s++)t[s].classList.contains("e-disabled")||e++;const i=this.getSelectedItems().length;this.showSelectAll&&e&&this.notify("checkSelectAll",{module:"CheckBoxSelection",value:e===i?"check":0===i?"uncheck":"indeterminate"})}getQuery(e){let t=e?e.clone():this.query?this.query.clone():new Ut;if(this.allowFiltering){const i=""===this.inputString?"contains":this.filterType;let s=this.typeOfData(this.dataSource).typeof;null===s&&(s=this.typeOfData(this.jsonData).typeof),t.where((this.dataSource instanceof ut||"string"!==s)&&"number"!==s&&this.fields.text?this.fields.text:"",i,this.inputString,this.ignoreCase,this.ignoreAccent)}else t=e||(this.query?this.query:new Ut);return t}setFiltering(){let e;if(this.initLoad||f(this.filterParent))return this.filterParent=this.createElement("span",{className:Xk.filterParent}),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:Xk.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element),e=Bt.createInput({element:this.filterInput,buttons:[Xk.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),mi([e.container],this.filterParent),Qr([this.filterParent],this.list),Rt(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.height.toString().indexOf("%")<0&&z([this.list],"e-filter-list"),this.inputString=this.filterInput.value,this.filterWireEvents(),e}filterWireEvents(e){e&&(this.filterInput=e.querySelector(".e-input-filter")),this.clearFilterIconElem=this.filterInput.parentElement.querySelector("."+Xk.clearIcon),this.clearFilterIconElem&&(k.add(this.clearFilterIconElem,"click",this.clearText,this),e||(this.clearFilterIconElem.style.visibility="hidden")),k.add(this.filterInput,"input",this.onInput,this),k.add(this.filterInput,"keyup",this.KeyUp,this),k.add(this.filterInput,"keydown",this.onKeyDown,this)}selectHandler(e,t){let s,i=!0;const r=B(e.target,".e-list-item");let o=[r];if(r&&r.parentElement){if(s=[].slice.call(r.parentElement.children).indexOf(r),this.selectionSettings.showCheckbox?i=!r.getElementsByClassName("e-frame")[0].classList.contains("e-check"):(e.ctrlKey||q.isDevice)&&this.isSelected(r)?(r.classList.remove(Ki.selected),r.removeAttribute("aria-selected"),i=!1):"Multiple"===this.selectionSettings.mode&&(e.ctrlKey||q.isDevice)||(this.getSelectedItems().forEach(a=>{a.removeAttribute("aria-selected")}),W(this.getSelectedItems(),Ki.selected)),e.shiftKey&&!this.selectionSettings.showCheckbox&&"Single"!==this.selectionSettings.mode?o=[].slice.call(r.parentElement.children).slice(Math.min(s,this.prevSelIdx),Math.max(s,this.prevSelIdx)+1).filter(a=>a.classList.contains("e-list-item")):this.prevSelIdx=[].slice.call(r.parentElement.children).indexOf(r),i?(this.selectionSettings.showCheckbox||z(o,Ki.selected),o.forEach(a=>{a.setAttribute("aria-selected","true")}),this.list.setAttribute("aria-activedescendant",r.id)):o.forEach(a=>{a.setAttribute("aria-selected","false")}),!t&&(this.maximumSelectionLength>(this.value&&this.value.length)||!i)&&(this.maximumSelectionLength>=(this.value&&this.value.length)||!i)&&!(this.maximumSelectionLength<(this.value&&this.value.length))&&this.notify("updatelist",{li:r,e,module:"listbox"}),this.allowFiltering&&!t){const a=this.getFormattedValue(r.getAttribute("data-value"));if(i){const l=[];Ae(l,this.value),l.push(a),this.value=l}else this.value=this.value.filter(l=>l!==a);document.querySelectorAll("ul").length<2&&this.updateMainList()}this.updateSelectedOptions(),this.triggerChange(this.getSelectedItems(),e),this.checkMaxSelection()}}triggerChange(e,t){this.trigger("change",{elements:e,items:this.getDataByElements(e),value:this.value,event:t})}getDataByElems(e){const t=[];for(let i=0,s=e.length;i<s;i++)t.push(this.getDataByValue(this.getFormattedValue(e[i].getAttribute("data-value"))));return t}getDataByElements(e){const t=[];let i,s=0;if(!f(this.listData)){const r=this.typeOfData(this.listData).typeof;if("string"===r||"number"===r||"boolean"===r)for(const o of this.listData){for(let a=s,l=e.length;a<l;a++)if(i=this.getFormattedValue(e[a].getAttribute("data-value")),!f(o)&&o===i){s=a,t.push(o);break}if(e.length===t.length)break}else for(const o of this.listData){for(let a=s,l=e.length;a<l;a++)if(i=this.getFormattedValue(e[a].getAttribute("data-value")),!f(o)&&U(this.fields.value?this.fields.value:"value",o)===i){s=a,t.push(o);break}if(e.length===t.length)break}return t}return null}checkMaxSelection(){const e=this.list.querySelectorAll(".e-list-item span.e-check").length;if(this.selectionSettings.showCheckbox){let t=0;const i=this.list.getElementsByClassName("e-list-item");for(;t<i.length;t++)i[t].querySelector(".e-frame.e-check")||(e===this.maximumSelectionLength?i[t].classList.add("e-disable"):i[t].classList.contains("e-disable")&&i[t].classList.remove("e-disable"))}}toolbarClickHandler(e){const t=B(e.target,"button");if(t){if(this.toolbarAction=t.getAttribute("data-value"),t.disabled)return;switch(this.toolbarAction){case"moveUp":this.moveUpDown(!0);break;case"moveDown":this.moveUpDown();break;case"moveTo":this.moveItemTo();break;case"moveFrom":this.moveItemFrom();break;case"moveAllTo":this.moveAllItemTo();break;case"moveAllFrom":this.moveAllItemFrom();break;default:this.trigger("actionBegin",{cancel:!1,items:this.getDataByElems(this.getSelectedItems()),eventName:this.toolbarAction})}}}moveUpDown(e,t,i){let s=this.getSelectedItems();if(i&&(s=i),(e&&this.isSelected(this.ulElement.firstElementChild)||!e&&this.isSelected(this.ulElement.lastElementChild))&&!i)return;const r=this.getDataByElems(s),o={cancel:!1,items:r,eventName:this.toolbarAction};this.trigger("actionBegin",o),!o.cancel&&((e?s:s.reverse()).forEach(a=>{const l=Array.prototype.indexOf.call(this.ulElement.querySelectorAll(".e-list-item"),a),h=Array.prototype.indexOf.call(this.ulElement.children,a);Wz(this.ulElement,this.ulElement,[h],e?h-1:h+2),this.changeData(h,e?h-1:h+1,e?l-1:l+1,a)}),this.trigger("actionComplete",{items:r,eventName:this.toolbarAction}),s[0].focus(),!t&&this.toolbarSettings.items.length&&this.getToolElem().querySelector("[data-value="+(e?"moveUp":"moveDown")+"]").focus(),this.updateToolBarState())}moveItemTo(){this.moveData(this,this.getScopedListBox())}moveItemFrom(){this.moveData(this.getScopedListBox(),this)}moveData(e,t,i,s,r){const o=[],a=[],l=[],h=[],c=[].slice.call(e.listData),m=[].slice.call(t.listData),b=[].slice.call(e.sortedData);let v=[].slice.call(t.sortedData);const w=[].slice.call(e.liCollections),E=[],D=[].slice.call(t.liCollections),L=[],N=[];let V=e.getSelectedItems();s&&(V=s);const $="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy||t.itemTemplate||e.itemTemplate;if(e.value=[],V.length){this.removeSelected(e,V),V.forEach(ke=>{o.push(Array.prototype.indexOf.call(e.ulElement.children,ke)),E.push(Array.prototype.indexOf.call(e.ulElement.querySelectorAll(".e-list-item"),ke)),a.push(Array.prototype.indexOf.call(e.listData,e.getDataByElems([ke])[0])),h.push(Array.prototype.indexOf.call(e.sortedData,e.getDataByElems([ke])[0])),l.push(Array.prototype.indexOf.call(e.jsonData,e.getDataByElems([ke])[0]))}),"None"!==this.sortOrder?h.forEach(ke=>{L.push(e.sortedData[ke])}):l.forEach(ke=>{L.push(e.jsonData[ke])});const ie={cancel:!1,items:L,eventName:this.toolbarAction};if(e.trigger("actionBegin",ie),ie.cancel)return;const Q=[];if(E.sort((ke,Ye)=>ke-Ye).reverse().forEach(ke=>{Q.push(w.splice(ke,1)[0])}),e.liCollections=w,r){const ke=D.splice(0,r);t.liCollections=ke.concat(Q.reverse()).concat(D)}else t.liCollections=D.concat(Q.reverse());if(0===t.listData.length){const ke=t.ulElement.childNodes[0];ke&&t.ulElement.removeChild(ke)}if(a.sort((ke,Ye)=>Ye-ke).forEach(ke=>{c.splice(ke,1)}),h.sort((ke,Ye)=>Ye-ke).forEach(ke=>{b.splice(ke,1)}),l.slice().reverse().forEach(ke=>{N.push(e.jsonData.splice(ke,1)[0])}),$)if(e.fields.groupBy){const ke=e.renderItems(c,e.fields);e.updateListItems(ke,e.ulElement)}else V.forEach(ke=>{te(ke)});else Wz(e.ulElement,t.ulElement,o,r),e.trigger("actionComplete",{items:L,eventName:this.toolbarAction});t.mainList.childElementCount!==t.jsonData.length&&(t.mainList=t.ulElement),e.updateMainList();const le=[].slice.call(t.jsonData);v=[].slice.call(t.sortedData),this.selectNextList(V,E,a,e),i&&this.list.focus(),e.listData=c,e.sortedData=b,r=r||m.length;for(let ke=L.length-1;ke>=0;ke--)m.splice(r,0,L[ke]),le.splice(r,0,L[ke]),v.splice(r,0,L[ke]);if(t.listData=m,t.jsonData=le,t.sortedData=v,$){const ke=t.renderItems(m,t.fields);t.updateListItems(ke,t.ulElement),t.setSelection(),e.trigger("actionComplete",{items:L,eventName:this.toolbarAction})}e.updateSelectedOptions(),0===e.listData.length&&e.l10nUpdate()}1===e.value.length&&e.getSelectedItems().length&&(e.value[0]=e.getFormattedValue(e.getSelectedItems()[0].getAttribute("data-value")))}selectNextList(e,t,i,s){const r=s.ulElement.querySelectorAll(".e-list-item").length;let o,a,l=-1;1===e.length&&r&&!s.selectionSettings.showCheckbox&&(a=r<=t[0]?r-1:t[0],o=s.ulElement.querySelectorAll(".e-list-item")[a],l=s.getValidIndex(o,a,r===i[0]?38:40),l>-1&&s.ulElement.querySelectorAll(".e-list-item")[l].classList.add(Ki.selected))}moveAllItemTo(){this.moveAllData(this,this.getScopedListBox())}moveAllItemFrom(){this.moveAllData(this.getScopedListBox(),this)}moveAllData(e,t,i,s){let r=[].slice.call(t.listData);const o=[].slice.call(t.jsonData),a="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy||t.itemTemplate||e.itemTemplate;this.removeSelected(e,e.getSelectedItems());const l=[].slice.call(e.jsonData),h={cancel:!1,items:l,eventName:this.toolbarAction};if(e.trigger("actionBegin",h),h.cancel)return;if(0===t.listData.length){const b=t.ulElement.childNodes[0];b&&t.ulElement.removeChild(b)}if(a){const b=e.ulElement.childNodes[0];b&&e.ulElement.removeChild(b)}Wz(e.ulElement,t.ulElement,Array.apply(null,{length:e.ulElement.childElementCount}).map(Number.call,Number),s),this.trigger("actionComplete",{items:l,eventName:this.toolbarAction}),i&&this.list.focus(),s=s||r.length;for(let b=0;b<e.listData.length;b++)r.splice(s+b,0,e.listData[b]);for(let b=0;b<e.jsonData.length;b++)o.splice(s+b,0,e.jsonData[b]);const c=[].slice.call(e.liCollections),m=[].slice.call(t.liCollections);if(e.liCollections=[],s){const b=m.splice(0,s);t.liCollections=b.concat(c).concat(m)}else t.liCollections=m.concat(c);if(e.value=[],r=r.filter(b=>!0!==b.isHeader),t.listData=r,t.jsonData=o,e.listData=e.sortedData=e.jsonData=[],a){const b=t.renderItems(r,t.fields);t.updateListItems(b,t.ulElement),this.trigger("actionComplete",{items:l,eventName:this.toolbarAction})}else t.sortedData=r;e.updateSelectedOptions(),0===e.listData.length&&e.l10nUpdate()}changeData(e,t,i,s){const r=[].slice.call(this.listData),o=[].slice.call(this.jsonData),a=[].slice.call(this.sortedData),l=Array.prototype.indexOf.call(this.jsonData,this.getDataByElems([s])[0]),h=Array.prototype.indexOf.call(this.sortedData,this.getDataByElems([s])[0]),c=[].slice.call(this.liCollections);r.splice(t,0,r.splice(e,1)[0]),o.splice(i,0,o.splice(l,1)[0]),a.splice(t,0,a.splice(h,1)[0]),c.splice(t,0,c.splice(e,1)[0]),this.listData=r,this.jsonData=o,this.liCollections=c,this.sortedData=a}getSelectedItems(){let e=[];return this.selectionSettings.showCheckbox?[].slice.call(this.ulElement.getElementsByClassName("e-check")).forEach(t=>{e.push(B(t,".e-list-item"))}):e=[].slice.call(this.ulElement.getElementsByClassName(Ki.selected)),e}getScopedListBox(){let e;return this.scope&&[].slice.call(document.querySelectorAll(this.scope)).forEach(t=>{Fh(t,this.getModuleName())&&(e=Fh(t,this.getModuleName()))}),e}getGrabbedItems(){return Array.prototype.slice.call(this.element.querySelectorAll(".e-grabbed"))}getDragArgs(e,t){let i=this.getGrabbedItems();return i.length?t&&i.push(e.target):i=[e.target],{elements:i,items:this.getDataByElems(i)}}onKeyDown(e){this.keyDownHandler(e),e.stopPropagation()}keyDownHandler(e){if([32,35,36,37,38,39,40,65].indexOf(e.keyCode)>-1&&!this.allowFiltering){if(e.target&&e.target.className.indexOf("e-edit-template")>-1)return;if(e.preventDefault(),32===e.keyCode&&this.ulElement.children.length)this.selectHandler({target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey});else if(65===e.keyCode&&e.ctrlKey)this.selectAll();else if((38===e.keyCode||40===e.keyCode)&&e.ctrlKey&&e.shiftKey)this.moveUpDown(38===e.keyCode,!0);else if(!this.toolbarSettings.items.length&&!this.tBListBox||39!==e.keyCode&&37!==e.keyCode||!e.ctrlKey)37!==e.keyCode&&39!==e.keyCode&&"KeyA"!==e.code&&this.upDownKeyHandler(e);else{const t=this.tBListBox||this.getScopedListBox();39===e.keyCode?e.shiftKey?this.moveAllData(this,t,!0):this.moveData(this,t,!0):e.shiftKey?this.moveAllData(t,this,!0):this.moveData(t,this,!0)}}else this.allowFiltering&&(40===e.keyCode||38===e.keyCode)&&this.upDownKeyHandler(e)}upDownKeyHandler(e){const t=this.ulElement;let s=40===e.keyCode||36===e.keyCode?0:t.childElementCount-1;const r=t.getElementsByClassName("e-focused")[0]||t.getElementsByClassName(Ki.selected)[0];if(r){if(35!==e.keyCode&&36!==e.keyCode&&(s=Array.prototype.indexOf.call(t.children,r),40===e.keyCode?s++:s--,s<0||s>t.childElementCount-1))return;W([r],"e-focused")}const o=t.children[s];if(o){if(s=this.getValidIndex(o,s,e.keyCode),-1===s)return void z([r],"e-focused");if(t.children[s].focus(),t.children[s].classList.add("e-focused"),(!e.ctrlKey||!this.selectionSettings.showCheckbox&&e.shiftKey&&(36===e.keyCode||35===e.keyCode))&&this.selectHandler({target:t.children[s],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},!0),this.selectionSettings.showCheckbox&&e.ctrlKey&&e.shiftKey&&(36===e.keyCode||35===e.keyCode)){const a=Array.prototype.indexOf.call(t.children,r),h="Home"===e.code?a:t.children.length-1;for(let c="Home"===e.code?0:a;c<=h;c++)this.notify("updatelist",{li:t.children[c],e:{target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},module:"listbox"})}}}KeyUp(e){if(f(String.fromCharCode(e.keyCode).match(/\w/))||(this.isValidKey=!0),this.isValidKey=8===e.keyCode||46===e.keyCode||this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.allowFiltering)){const s={preventDefaultAction:!1,text:this.targetElement(),updateData:(r,o,a)=>{s.cancel||(this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(r,o,a))},event:e,cancel:!1};this.trigger("filtering",s,r=>{this.isDataFetched=!1,!(r.cancel||""!==this.filterInput.value&&this.isFiltered)&&(!r.cancel&&!this.isCustomFiltering&&!r.preventDefaultAction&&(this.inputString=this.filterInput.value,this.filteringAction(this.jsonData,new Ut,this.fields)),!this.isFiltered&&!this.isCustomFiltering&&!r.preventDefaultAction&&this.dataUpdater(this.jsonData,new Ut,this.fields))})}}filter(e,t,i){this.isCustomFiltering=!0,this.filteringAction(e,t,i)}filteringAction(e,t,i){this.resetList(e,i,t)}targetElement(){return this.targetInputElement=this.list.getElementsByClassName("e-input-filter")[0],this.targetInputElement.value}dataUpdater(e,t,i){if(this.isDataFetched=!1,""===this.targetElement().trim()){const r=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.remoteCustomValue=!1,this.onActionComplete(r,this.jsonData),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.selectionSettings.showCheckbox,e:this})}else this.resetList(e,i,t)}focusOutHandler(){const e=this.list.getElementsByClassName("e-focused")[0];e&&e.classList.remove("e-focused"),this.allowFiltering&&this.refreshClearIcon()}getValidIndex(e,t,i){const s=this.ulElement;return(e.classList.contains("e-disabled")||e.classList.contains(Ki.group))&&(40===i||36===i?t++:t--),t<0||t===s.childElementCount?-1:(((e=s.querySelectorAll(".e-list-item")[t]).classList.contains("e-disabled")||e.classList.contains(Ki.group))&&(t=this.getValidIndex(e,t,i)),t)}updateSelectedOptions(){const e=[],t=[];if(Ae(t,this.value),this.getSelectedItems().forEach(i=>{i.classList.contains("e-grabbed")||e.push(this.getFormattedValue(i.getAttribute("data-value")))}),this.mainList.childElementCount===this.ulElement.childElementCount)if(this.allowFiltering&&this.selectionSettings.showCheckbox){for(let i=0;i<e.length;i++)t.indexOf(e[i])>-1||t.push(e[i]);this.setProperties({value:t},!0)}else this.setProperties({value:e},!0);this.updateSelectTag(),this.updateToolBarState(),this.tBListBox&&this.tBListBox.updateToolBarState()}clearSelection(e=this.value){if(this.selectionSettings.showCheckbox){let t;this.getSelectedItems().forEach(i=>{t=this.getFormattedValue(i.getAttribute("data-value")),e.indexOf(t)<0&&(i.getElementsByClassName("e-check")[0].classList.remove("e-check"),i.getElementsByClassName("e-checkbox-wrapper")[0].removeAttribute("aria-checked"),i.removeAttribute("aria-selected"))})}}setSelection(e=this.value,t=!0,i=!1){let s,r;e&&e.forEach(o=>{let a;a=i?this.getValueByText(o):o,s=this.list.querySelector('[data-value="'+a+'"]'),s&&(r=this.selectionSettings.showCheckbox?s.getElementsByClassName("e-frame")[0].classList.contains("e-check"):s.classList.contains("e-selected"),(!t&&r||t&&!r&&s)&&(this.selectionSettings.showCheckbox?this.notify("updatelist",{li:s,module:"listbox"}):t?(s.classList.add(Ki.selected),s.setAttribute("aria-selected","true")):(s.classList.remove(Ki.selected),s.removeAttribute("aria-selected"))))}),this.updateSelectTag()}updateSelectTag(){const e=this.getSelectTag();let t="";if(e.innerHTML="",this.value){for(let i=0,s=this.value.length;i<s;i++)t+='<option selected value="'+this.value[i]+'"></option>';e.innerHTML+=t}this.checkSelectAll()}checkDisabledState(e){return 0===e.ulElement.querySelectorAll("."+Ki.li).length}updateToolBarState(){if(this.toolbarSettings.items.length){const e=this.getScopedListBox(),t=this.list.parentElement.getElementsByClassName("e-listbox-tool")[0];this.toolbarSettings.items.forEach(i=>{const s=t.querySelector('[data-value="'+i+'"]');switch(i){case"moveAllTo":s.disabled=this.checkDisabledState(this);break;case"moveAllFrom":s.disabled=this.checkDisabledState(e);break;case"moveFrom":s.disabled=!(e.value&&e.value.length);break;case"moveUp":s.disabled=!(this.value&&this.value.length&&!this.isSelected(this.ulElement.children[0]));break;case"moveDown":s.disabled=!(this.value&&this.value.length&&!this.isSelected(this.ulElement.children[this.ulElement.childElementCount-1]));break;default:s.disabled=!(this.value&&this.value.length)}})}}setCheckboxPosition(){const e=this.list;!this.initLoad&&"Left"===this.selectionSettings.checkboxPosition&&e.classList.remove("e-right"),"Right"===this.selectionSettings.checkboxPosition&&e.classList.add("e-right")}showCheckbox(e){let t=0;const i=this.list.lastElementChild.querySelectorAll("li"),s=this.list.lastElementChild.getElementsByClassName("e-list-item").length;if(e){if(this.ulElement=this.renderItems(this.listData,this.fields),this.mainList=this.ulElement,this.list.removeChild(this.list.getElementsByTagName("ul")[0]),this.list.appendChild(this.ulElement),this.selectionSettings.showSelectAll&&!this.list.getElementsByClassName("e-selectall-parent")[0]){const r=new jo(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=r.getConstant("selectAllText"),this.unSelectAllText=r.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{}),this.checkSelectAll()}}else{for(this.list.getElementsByClassName("e-selectall-parent")[0]&&this.list.removeChild(this.list.getElementsByClassName("e-selectall-parent")[0]);t<s;t++)i[t].classList.contains("e-list-item")&&i[t].removeChild(i[t].getElementsByClassName("e-checkbox-wrapper")[0]),i[t].hasAttribute("aria-selected")&&i[t].removeAttribute("aria-selected");this.mainList=this.ulElement}this.value=[]}isSelected(e){return!f(e)&&(e.classList.contains(Ki.selected)||null!==e.querySelector(".e-check"))}getSelectTag(){return this.list.getElementsByClassName("e-hidden-select")[0]}getToolElem(){return this.list.parentElement.getElementsByClassName("e-listbox-tool")[0]}formResetHandler(){this.value=this.initialSelectedOptions}getModuleName(){return"listbox"}getPersistData(){return this.addOnPersist(["value"])}getLocaleName(){return"listbox"}destroy(){this.unwireEvents(),"EJS-LISTBOX"===this.element.tagName?this.element.innerHTML="":(this.element.style.display="inline-block",this.toolbarSettings.items.length&&(this.list.parentElement.parentElement.insertBefore(this.list,this.list.parentElement),te(this.list.nextElementSibling)),this.list.parentElement.insertBefore(this.element,this.list)),super.destroy(),this.itemTemplate&&this.clearTemplate()}onPropertyChanged(e,t){const i=this.toolbarSettings.items.length?this.list.parentElement:this.list;super.onPropertyChanged(e,t),this.setUpdateInitial(["fields","query","dataSource"],e);for(const s of Object.keys(e))switch(s){case"cssClass":t.cssClass&&W([i],t.cssClass.split(" ")),e.cssClass&&z([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.list.classList.add("e-rtl"):this.list.classList.remove("e-rtl");break;case"value":W(this.list.querySelectorAll("."+Ki.selected),Ki.selected),this.clearSelection(this.value),this.setSelection();break;case"height":this.setHeight();break;case"enabled":this.setEnable();break;case"allowDragAndDrop":e.allowDragAndDrop?this.initDraggable():Fh(this.ulElement,"sortable").destroy();break;case"allowFiltering":this.allowFiltering?this.setFiltering():(this.list.removeChild(this.list.getElementsByClassName("e-filter-parent")[0]),this.filterParent=null,W([this.list],"e-filter-list"));break;case"filterBarPlaceholder":this.allowFiltering&&this.filterInput&&Bt.setPlaceholder(e.filterBarPlaceholder,this.filterInput);break;case"scope":this.allowDragAndDrop&&(Fh(this.ulElement,"sortable").scope=e.scope),this.toolbarSettings.items.length&&(t.scope&&(Fh(document.querySelector(t.scope),this.getModuleName()).tBListBox=null),e.scope&&(Fh(document.querySelector(e.scope),this.getModuleName()).tBListBox=this));break;case"toolbarSettings":{let r;const o=e.toolbarSettings.position,a=this.getToolElem();o&&(W([i],["e-right","e-left"]),i.classList.add("e-"+o.toLowerCase()),"Left"===o?i.insertBefore(a,this.list):i.appendChild(a)),e.toolbarSettings.items&&(t.toolbarSettings&&t.toolbarSettings.items.length&&(r=this.list.parentElement,r.parentElement.insertBefore(this.list,r),te(r)),this.initToolbarAndStyles(),this.wireToolbarEvent());break}case"selectionSettings":{const r=e.selectionSettings.showSelectAll,o=e.selectionSettings.showCheckbox;if(!f(r)){if(this.showSelectAll=r,this.showSelectAll){const a=new jo(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.checkBoxSelectionModule.checkAllParent=null,this.showSelectAll=!0,this.selectAllText=a.getConstant("selectAllText"),this.unSelectAllText=a.getConstant("selectAllText"),this.popupWrapper=this.list}this.notify("selectAll",{}),this.checkSelectAll()}f(o)||this.showCheckbox(o),this.selectionSettings.showCheckbox&&this.setCheckboxPosition();break}case"dataSource":this.isDataSourceUpdate=!0,this.jsonData=[].slice.call(this.dataSource)}}};pr([_("")],So.prototype,"cssClass",void 0),pr([_([])],So.prototype,"value",void 0),pr([_("")],So.prototype,"height",void 0),pr([_(!1)],So.prototype,"allowDragAndDrop",void 0),pr([_(1e3)],So.prototype,"maximumSelectionLength",void 0),pr([_(!1)],So.prototype,"allowFiltering",void 0),pr([_("")],So.prototype,"scope",void 0),pr([_(!0)],So.prototype,"ignoreCase",void 0),pr([_(null)],So.prototype,"filterBarPlaceholder",void 0),pr([G()],So.prototype,"beforeItemRender",void 0),pr([G()],So.prototype,"filtering",void 0),pr([G()],So.prototype,"select",void 0),pr([G()],So.prototype,"change",void 0),pr([G()],So.prototype,"beforeDrop",void 0),pr([G()],So.prototype,"dragStart",void 0),pr([G()],So.prototype,"drag",void 0),pr([G()],So.prototype,"drop",void 0),pr([G()],So.prototype,"dataBound",void 0),pr([_(null)],So.prototype,"groupTemplate",void 0),pr([_("Request failed")],So.prototype,"actionFailureTemplate",void 0),pr([_(1e3)],So.prototype,"zIndex",void 0),pr([_(!1)],So.prototype,"ignoreAccent",void 0),pr([di({},cY)],So.prototype,"toolbarSettings",void 0),pr([di({},SP)],So.prototype,"selectionSettings",void 0),So=Pj=pr([as],So);const Xk={backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",clearIcon:"e-clear-icon"};function ALe(n){return"[object String]"===Object.prototype.toString.call(n)?"$s"+n:"$o"+n.toString()}new Int16Array(286),new Uint8Array(286),new Int16Array(30),new Uint8Array(30);class xo{constructor(e){this.table={},this.nElements=0,this.toStr=e||ALe}getValue(e){const t=this.table["$"+this.toStr(e)];if(void 0!==t)return t.value}setValue(e,t){let i;const s="$"+this.toStr(e);return this.nElements++,i=void 0,void(this.table[s]={key:e,value:t})}remove(e){const t="$"+this.toStr(e),i=this.table[t];return delete this.table[t],this.nElements--,i.value}keys(){const e=[];let t=Object.keys(this.table);for(let i=0;i<t.length;i++)e.push(this.table[t[i]].key);return e}values(){const e=[];let t=Object.keys(this.table);for(let i=0;i<t.length;i++)e.push(this.table[t[i]].value);return e}containsKey(e){let t=!0;return t=void 0===this.getValue(e),!t}clear(){this.table={},this.nElements=0}size(){return this.nElements}}let mt=(()=>{class n{constructor(){this.forTest="test",this.forTest=n.obj}}return n.obj="obj",n.endObj="endobj",n.r="R",n.whiteSpace=" ",n.slash="/",n.newLine="\r\n",n.stream="stream",n.endStream="endstream",n.xref="xref",n.f="f",n.n="n",n.trailer="trailer",n.startxref="startxref",n.eof="%%EOF",n.header="%PDF-1.5",n.beginText="BT",n.endText="ET",n.beginPath="m",n.appendLineSegment="l",n.stroke="S",n.fill="f",n.fillEvenOdd="f*",n.fillStroke="B",n.fillStrokeEvenOdd="B*",n.appendbeziercurve="c",n.appendRectangle="re",n.saveState="q",n.restoreState="Q",n.paintXObject="Do",n.modifyCtm="cm",n.modifyTM="Tm",n.setLineWidth="w",n.setLineCapStyle="J",n.setLineJoinStyle="j",n.setDashPattern="d",n.setFlatnessTolerance="i",n.closePath="h",n.closeStrokePath="s",n.closeFillStrokePath="b",n.setCharacterSpace="Tc",n.setWordSpace="Tw",n.setHorizontalScaling="Tz",n.setTextLeading="TL",n.setFont="Tf",n.setRenderingMode="Tr",n.setTextRise="Ts",n.setTextScaling="Tz",n.setCoords="Td",n.goToNextLine="T*",n.setText="Tj",n.setTextWithFormatting="TJ",n.setTextOnNewLine="'",n.selectcolorspaceforstroking="CS",n.selectcolorspacefornonstroking="cs",n.setrbgcolorforstroking="RG",n.setrbgcolorfornonstroking="rg",n.setcmykcolorforstroking="K",n.setcmykcolorfornonstroking="k",n.setgraycolorforstroking="G",n.setgraycolorfornonstroking="g",n.clipPath="W",n.clipPathEvenOdd="W*",n.endPath="n",n.setGraphicsState="gs",n.comment="%",n.evenOdd="*",n.setMiterLimit="M",n.setColorAndPattern="scn",n.setColorAndPatternStroking="SCN",n})();class gi{constructor(e){this.position5=-1,this.value=e}get intValue(){return this.value}set intValue(e){this.value=e}get isInteger(){return this.integer}set isInteger(e){this.integer=e}get status(){return this.status5}set status(e){this.status5=e}get isSaving(){return this.isSaving5}set isSaving(e){this.isSaving5=e}get objectCollectionIndex(){return this.index5}set objectCollectionIndex(e){this.index5=e}get position(){return this.position5}set position(e){this.position5=e}get clonedObject(){return null}save(e){e.write(this.intValue.toString())}clone(e){return new gi(this.value)}static floatToString(e){let t=e.toFixed(2);return"0.00"===t&&(t=".00"),t}static min(e,t,i){let s=Math.min(e,t);return Math.min(i,s)}}class kn{constructor(e){if(this.startMark="[",this.endMark="]",this.position9=-1,this.clonedObject9=null,this.isFont=!1,void 0===e)this.internalElements=[];else if(void 0===e||e instanceof kn){let t=e;this.internalElements=[];for(let i=0;i<t.elements.length;i++)this.internalElements.push(t.elements[i])}else{let t=e;for(let i=0;i<t.length;i++){let s=new gi(t[i]);this.add(s)}}}items(e){return this.internalElements[e]}get count(){return this.internalElements.length}get status(){return this.status9}set status(e){this.status9=e}get isSaving(){return this.isSaving9}set isSaving(e){this.isSaving9=e}get clonedObject(){return this.clonedObject9}get position(){return this.position9}set position(e){this.position9=e}get objectCollectionIndex(){return this.index9}set objectCollectionIndex(e){this.index9=e}get CrossTable(){return this.pdfCrossTable}get elements(){return this.internalElements}add(e){void 0===this.internalElements&&(this.internalElements=[]),this.internalElements.push(e),this.markedChange()}markedChange(){this.bChanged=!0}contains(e){for(let i=0;i<this.internalElements.length;i++){let s=this.internalElements[i],r=e;if(null!=s&&void 0!==s&&null!=r&&void 0!==r&&s.value===r.value)return!0}return!1}getItems(e){return this.internalElements[e]}save(e){e.write(this.startMark);for(let t=0,i=this.count;t<i;t++)this.getItems(t).save(e),t+1!==i&&e.write(mt.whiteSpace);e.write(this.endMark)}clone(e){this.clonedObject9=null;let t=new kn;for(let i=0;i<this.internalElements.length;i++)t.add(this.internalElements[i].clone(e));return t.pdfCrossTable=e,this.clonedObject9=t,t}static fromRectangle(e){return new kn([e.x,e.y,e.width,e.height])}insert(e,t){if(e<this.internalElements.length&&e>0){let i=[];for(let s=0;s<e;s++)i.push(this.internalElements[s]);i.push(t);for(let s=e;s<this.internalElements.length;s++)i.push(this.internalElements[s]);this.internalElements=i}else this.internalElements.push(t);this.markChanged()}indexOf(e){return this.internalElements.indexOf(e)}remove(e){let t=this.internalElements.indexOf(e);this.internalElements[t]=null,this.markChanged()}removeAt(e){if(this.internalElements.length>e){let t=[];for(let i=0;i<e;i++)t.push(this.internalElements[i]);for(let i=e+1;i<this.internalElements.length;i++)t.push(this.internalElements[i]);this.internalElements=t}this.markChanged()}clear(){this.internalElements=[],this.markChanged()}markChanged(){this.bChanged=!0}}var TP;!function(n){let e;var i;let t;(i=e=n.ForceEncoding||(n.ForceEncoding={}))[i.None=0]="None",i[i.Ascii=1]="Ascii",i[i.Unicode=2]="Unicode",function(i){i[i.StringValue=0]="StringValue",i[i.ByteBuffer=1]="ByteBuffer"}(t||(t={}))}(TP||(TP={}));var _p=(()=>(function(n){n[n.Top=0]="Top",n[n.Middle=1]="Middle",n[n.Bottom=2]="Bottom"}(_p||(_p={})),_p))(),Ys=(()=>(function(n){n[n.Rgb=0]="Rgb",n[n.Cmyk=1]="Cmyk",n[n.GrayScale=2]="GrayScale",n[n.Indexed=3]="Indexed"}(Ys||(Ys={})),Ys))();class me{constructor(e,t,i,s){void 0===e?void 0!==t&&void 0!==i&&void 0!==s?this.assignRGB(t,i,s):this.filled=!1:e instanceof me?(this.redColor=e.r,this.greenColor=e.g,this.blueColor=e.b,this.grayColor=e.gray,this.alpha=e.alpha,this.filled=0!==this.alpha):"number"==typeof e&&void 0===t&&void 0===i&&void 0===s?(e<0&&(e=0),e>1&&(e=1),this.redColor=e*me.maxColourChannelValue,this.greenColor=e*me.maxColourChannelValue,this.blueColor=e*me.maxColourChannelValue,this.cyanColor=e,this.magentaColor=e,this.yellowColor=e,this.blackColor=e,this.grayColor=e,this.alpha=me.maxColourChannelValue,this.filled=!0):void 0===s?this.assignRGB(e,t,i):this.assignRGB(t,i,s,e)}assignRGB(e,t,i,s){void 0===e||void 0===t||void 0===i?this.filled=!1:(this.cyanColor=0,this.magentaColor=0,this.yellowColor=0,this.blackColor=0,this.grayColor=0,this.redColor=e,this.greenColor=t,this.blueColor=i,this.alpha=void 0===s?me.maxColourChannelValue:s,this.filled=!0,this.assignCMYK(e,t,i))}assignCMYK(e,t,i){let s=e/me.maxColourChannelValue,r=t/me.maxColourChannelValue,o=i/me.maxColourChannelValue,a=gi.min(1-s,1-r,1-o),l=1===a?0:(1-s-a)/(1-a),h=1===a?0:(1-r-a)/(1-a),c=1===a?0:(1-o-a)/(1-a);this.blackColor=a,this.cyanColor=l,this.magentaColor=h,this.yellowColor=c}get r(){return this.redColor}set r(e){this.redColor=e,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0}get red(){return this.r/me.maxColourChannelValue}get b(){return this.blueColor}set b(e){this.blueColor=e,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0}get blue(){return this.b/me.maxColourChannelValue}get c(){return this.cyanColor}set c(e){this.cyanColor=e<0?0:e>1?1:e,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0}get k(){return this.blackColor}set k(e){this.blackColor=e<0?0:e>1?1:e,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0}get m(){return this.magentaColor}set m(e){this.magentaColor=e<0?0:e>1?1:e,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0}get y(){return this.yellowColor}set y(e){this.yellowColor=e<0?0:e>1?1:e,this.assignRGB(this.cyanColor,this.magentaColor,this.yellowColor,this.blackColor),this.filled=!0}get g(){return this.greenColor}set g(e){this.greenColor=e,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0}get green(){return this.g/me.maxColourChannelValue}get gray(){return(this.redColor+this.greenColor+this.blueColor)/(3*me.maxColourChannelValue)}set gray(e){this.grayColor=e<0?0:e>1?1:e,this.r=this.grayColor*me.maxColourChannelValue,this.g=this.grayColor*me.maxColourChannelValue,this.b=this.grayColor*me.maxColourChannelValue,this.assignCMYK(this.redColor,this.greenColor,this.blueColor),this.filled=!0}get isEmpty(){return!this.filled}get a(){return this.alpha}set a(e){this.alpha=e<0?0:e,this.filled=!0}toString(e,t){if(this.isEmpty)return"";let i="";switch(e){case Ys.Rgb:i=this.rgbToString(t);break;case Ys.GrayScale:i=this.grayScaleToString(t);break;case Ys.Cmyk:i=this.cmykToString(t)}return i}grayScaleToString(e){let t=this.gray,i="",s=null;return s=e?me.grayStringsSroke.containsKey(t)?me.grayStringsSroke.getValue(t):null:me.grayStringsFill.containsKey(t)?me.grayStringsFill.getValue(t):null,null==s?e&&(i=t.toString()+" G",me.grayStringsSroke.setValue(t,i)):i=s.toString(),i+mt.newLine}rgbToString(e){let t=this.r,i=this.g,s=this.b,r=(t<<16)+(i<<8)+s;e&&(r+=1<<24);let o="",a=null;if(me.rgbStrings.containsKey(r)&&(a=me.rgbStrings.getValue(r)),null==a){let l=t/me.maxColourChannelValue,h=i/me.maxColourChannelValue,c=s/me.maxColourChannelValue;o=e?l.toString()+" "+h.toString()+" "+c.toString()+" RG":l.toString()+" "+h.toString()+" "+c.toString()+" rg",me.rgbStrings.setValue(r,o)}else o=a.toString();return o+mt.newLine}cmykToString(e){let i=this.m,s=this.y,r=this.b,o="";return o=this.c.toString()+" "+i.toString()+" "+s.toString()+" "+r.toString()+" K",o+mt.newLine}toArray(e){let t=new kn;return e===Ys.Rgb&&(t.add(new gi(this.red)),t.add(new gi(this.green)),t.add(new gi(this.blue))),t}}me.rgbStrings=new xo,me.grayStringsSroke=new xo,me.grayStringsFill=new xo,me.maxColourChannelValue=255;class St{constructor(e,t){void 0===e?(this.x=0,this.y=0):(this.x=null!==e?e:0,this.y=null!==t?t:0)}}class Ct{constructor(e,t){void 0===t?(this.height=0,this.width=0):(this.height=null!==t?t:0,this.width=null!==e?e:0)}}class Mt{constructor(e,t,i,s){if(typeof e==typeof e&&void 0===e)this.x=0,this.y=0,this.height=0,this.width=0;else if(e instanceof St&&t instanceof Ct&&void 0===i){let r=e;this.x=r.x,this.y=r.y;let o=t;this.height=o.height,this.width=o.width}else{let o=t,a=i,l=s;this.x=e,this.y=o,this.height=l,this.width=a}}}var Es=(()=>(function(n){n[n.Regular=0]="Regular",n[n.Bold=1]="Bold",n[n.Italic=2]="Italic",n[n.Underline=4]="Underline",n[n.Strikeout=8]="Strikeout"}(Es||(Es={})),Es))(),Cg=(()=>(function(n){n[n.None=0]="None",n[n.Word=1]="Word",n[n.WordOnly=2]="WordOnly",n[n.Character=3]="Character"}(Cg||(Cg={})),Cg))(),CC=(()=>(function(n){n[n.None=0]="None",n[n.SuperScript=1]="SuperScript",n[n.SubScript=2]="SubScript"}(CC||(CC={})),CC))();class Mu{constructor(e,t){this.scalingFactor=100,this.wordWrapType=Cg.Word,this.internalLineLimit=!0,this.wordWrapType=Cg.Word,void 0!==e&&"string"!=typeof e&&(this.textAlignment=e),void 0!==t&&(this.verticalAlignment=t)}get alignment(){return this.textAlignment}set alignment(e){this.textAlignment=e}get textDirection(){return this.direction}set textDirection(e){this.direction=e}get lineAlignment(){return void 0===this.verticalAlignment||null==this.verticalAlignment?_p.Top:this.verticalAlignment}set lineAlignment(e){this.verticalAlignment=e}get rightToLeft(){return void 0!==this.isRightToLeft&&null!=this.isRightToLeft&&this.isRightToLeft}set rightToLeft(e){this.isRightToLeft=e}get characterSpacing(){return void 0===this.internalCharacterSpacing||null==this.internalCharacterSpacing?0:this.internalCharacterSpacing}set characterSpacing(e){this.internalCharacterSpacing=e}get wordSpacing(){return void 0===this.internalWordSpacing||null==this.internalWordSpacing?0:this.internalWordSpacing}set wordSpacing(e){this.internalWordSpacing=e}get lineSpacing(){return void 0===this.leading||null==this.leading?0:this.leading}set lineSpacing(e){this.leading=e}get clipPath(){return void 0!==this.clip&&null!=this.clip&&this.clip}set clipPath(e){this.clip=e}get subSuperScript(){return void 0===this.pdfSubSuperScript||null==this.pdfSubSuperScript?CC.None:this.pdfSubSuperScript}set subSuperScript(e){this.pdfSubSuperScript=e}get paragraphIndent(){return void 0===this.internalParagraphIndent||null==this.internalParagraphIndent?0:this.internalParagraphIndent}set paragraphIndent(e){this.internalParagraphIndent=e,this.firstLineIndent=e}get lineLimit(){return this.internalLineLimit}set lineLimit(e){this.internalLineLimit=e}get measureTrailingSpaces(){return void 0!==this.trailingSpaces&&null!=this.trailingSpaces&&this.trailingSpaces}set measureTrailingSpaces(e){this.trailingSpaces=e}get noClip(){return void 0!==this.isNoClip&&null!=this.isNoClip&&this.isNoClip}set noClip(e){this.isNoClip=e}get wordWrap(){return this.wordWrapType}set wordWrap(e){this.wordWrapType=e}get horizontalScalingFactor(){return this.scalingFactor}set horizontalScalingFactor(e){if(e<=0)throw new Error("ArgumentOutOfRangeException:The scaling factor cant be less of equal to zero, ScalingFactor");this.scalingFactor=e}get firstLineIndent(){return void 0===this.initialLineIndent||null==this.initialLineIndent?0:this.initialLineIndent}set firstLineIndent(e){this.initialLineIndent=e}clone(){return this}}class Nl{constructor(e){if(this.currentPosition=0,null==e)throw new Error("ArgumentNullException:text");this.text=e}get length(){return this.text.length}get end(){return this.currentPosition===this.text.length}get position(){return this.currentPosition}set position(e){this.currentPosition=e}static getCharsCount(e,t){if("string"==typeof t){if(null==e)throw new Error("ArgumentNullException:wholeText");let i=0,s=0;for(;s=e.indexOf(t,s),-1!==s;)i++,s++;return i}{if(null==e)throw new Error("ArgumentNullException:text");if(null==t)throw new Error("ArgumentNullException:symbols");let i=0;for(let s=0,r=e.length;s<r;s++)this.contains(t,e[s])&&i++;return i}}readLine(){let e=this.currentPosition;for(;e<this.length;){let t=this.text[e];switch(t){case"\r":case"\n":{let i=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e+1,"\r"===t&&this.currentPosition<this.length&&"\n"===this.text[this.currentPosition]&&this.currentPosition++,i}}e++}if(e>this.currentPosition){let t=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e,t}return null}peekLine(){let e=this.currentPosition,t=this.readLine();return this.currentPosition=e,t}readWord(){let e=this.currentPosition;for(;e<this.length;){let t=this.text[e];switch(t){case"\r":case"\n":let i=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e+1,"\r"===t&&this.currentPosition<this.length&&"\n"===this.text[this.currentPosition]&&this.currentPosition++,i;case" ":case"\t":{e===this.currentPosition&&e++;let s=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e,s}}e++}if(e>this.currentPosition){let t=this.text.substr(this.currentPosition,e-this.currentPosition);return this.currentPosition=e,t}return null}peekWord(){let e=this.currentPosition,t=this.readWord();return this.currentPosition=e,t}read(e){if(void 0===e){let t="0";return this.end||(t=this.text[this.currentPosition],this.currentPosition++),t}{let t=0,i="";for(;!this.end&&t<e;)i+=this.read(),t++;return i}}peek(){let e="0";return this.end||(e=this.text[this.currentPosition]),e}close(){this.text=null}readToEnd(){let e;return e=0===this.currentPosition?this.text:this.text.substr(this.currentPosition,this.length-this.currentPosition),this.currentPosition=this.length,e}static contains(e,t){let i=!1;for(let s=0;s<e.length;s++)if(e[s]===t){i=!0;break}return i}}Nl.whiteSpace=" ",Nl.tab="\t",Nl.spaces=[Nl.whiteSpace,Nl.tab],Nl.whiteSpacePattern="^[ \t]+$";class wC{constructor(){this.isOverloadWithPosition=!1}layout(e,t,i,s,r,o,a){if(s instanceof Mt){this.initialize(e,t,i,s,r),this.isOverloadWithPosition=o,this.clientSize=a;let l=this.doLayout();return this.clear(),l}{this.initialize(e,t,i,s),this.isOverloadWithPosition=r,this.clientSize=o;let l=this.doLayout();return this.clear(),l}}initialize(e,t,i,s,r){if("number"==typeof r){if(null==e)throw new Error("ArgumentNullException:text");if(null==t)throw new Error("ArgumentNullException:font");this.text=e,this.font=t,this.format=i,this.size=new Ct(s.width,s.height),this.rectangle=s,this.pageHeight=r,this.reader=new Nl(e)}else this.initialize(e,t,i,new Mt(new St(0,0),s),0)}clear(){this.font=null,this.format=null,this.reader.close(),this.reader=null,this.text=null}doLayout(){let e=new mY,t=new mY,i=[],s=this.reader.peekLine(),r=this.getLineIndent(!0);for(;null!=s;){if(t=this.layoutLine(s,r),null!==t||void 0!==t){let o=0,a=this.copyToResult(e,t,i,o);if(o=a.numInserted,!a.success){this.reader.read(o);break}}this.reader.readLine(),s=this.reader.peekLine(),r=this.getLineIndent(!1)}return this.finalizeResult(e,i),e}getLineIndent(e){let t=0;return null!=this.format&&(t=e?this.format.firstLineIndent:this.format.paragraphIndent,t=this.size.width>0?Math.min(this.size.width,t):t),t}getLineHeight(){let e=this.font.height;return null!=this.format&&0!==this.format.lineSpacing&&(e=this.format.lineSpacing+this.font.height),e}getLineWidth(e){return this.font.getLineWidth(e,this.format)}layoutLine(e,t){let i=new mY;i.layoutLineHeight=this.getLineHeight();let s=[],r=this.size.width,o=this.getLineWidth(e)+t,a=Tp.FirstParagraphLine,l=!0;if(r<=0||Math.round(o)<=Math.round(r))this.addToLineResult(i,s,e,o,Tp.NewLineBreak|a);else{let h="",c="";o=t;let m=t,b=new Nl(e),v=b.peekWord();for(v.length!==b.length&&" "===v&&(c+=v,h+=v,b.position+=1,v=b.peekWord());null!=v;){c+=v;let w=this.getLineWidth(c.toString())+m;if(" "===c.toString()&&(c="",w=0),w>r){if(this.getWrapType()===Cg.None)break;if(c.length===v.length){if(this.getWrapType()===Cg.WordOnly){i.textRemainder=e.substring(b.position);break}if(1===c.length){h+=v;break}l=!1,c="",v=b.peek().toString();continue}if(this.getLineWidth(v.toString())>r?this.format.wordWrap=Cg.Character:null!=this.format&&(this.format.wordWrap=Cg.Word),this.getWrapType()===Cg.Character&&l)l=!1,c="",c+=h.toString(),v=b.peek().toString();else{let E=h.toString();" "!==E&&this.addToLineResult(i,s,E,o,Tp.LayoutBreak|a),this.isOverloadWithPosition&&(r=this.clientSize.width),c="",h="",o=0,m=0,w=0,a=Tp.None,v=l?v:b.peekWord(),l=!0}}else h+=v,o=w,l?(b.readWord(),v=b.peekWord()):(b.read(),v=b.peek().toString())}if(h.length>0){let w=h.toString();this.addToLineResult(i,s,w,o,Tp.NewLineBreak|Tp.LastParagraphLine)}b.close()}i.layoutLines=[];for(let h=0;h<s.length;h++)i.layoutLines.push(s[h]);return s=[],i}addToLineResult(e,t,i,s,r){let o=new jLe;o.text=i,o.width=s,o.lineType=r,t.push(o);let a=e.actualSize;a.height+=this.getLineHeight(),a.width=Math.max(a.width,s),e.size=a}copyToResult(e,t,i,s){let r=!0,o=null!=this.format&&!this.format.lineLimit,a=e.actualSize.height,l=this.size.height;if(this.pageHeight>0&&l+this.rectangle.y>this.pageHeight&&(l=this.rectangle.y-this.pageHeight,l=Math.max(l,-l)),s=0,null!=t.lines)for(let h=0,c=t.lines.length;h<c;h++){let m=a+t.lineHeight;if(!(m<=l||l<=0||o)){r=!1;break}{let b=t.lines[h];s+=b.text.length,b=this.trimLine(b,0===i.length),i.push(b);let v=e.actualSize;v.width=Math.max(v.width,b.width),e.size=v,a=m}}if(a!=e.size.height){let h=e.actualSize;h.height=a,e.size=h}return{success:r,numInserted:s}}finalizeResult(e,t){e.layoutLines=[];for(let i=0;i<t.length;i++)e.layoutLines.push(t[i]);e.layoutLineHeight=this.getLineHeight(),this.reader.end||(e.textRemainder=this.reader.readToEnd()),t=[]}trimLine(e,t){let i=e.text,s=e.width;return i=i.trim(),i.length!==e.text.length&&(s=this.getLineWidth(i),(e.lineType&Tp.FirstParagraphLine)>0&&(s+=this.getLineIndent(t))),e.text=i,e.width=s,e}getWrapType(){return null!=this.format?this.format.wordWrap:Cg.Word}}class mY{get remainder(){return this.textRemainder}get actualSize(){return void 0===this.size&&(this.size=new Ct(0,0)),this.size}get lines(){return this.layoutLines}get lineHeight(){return this.layoutLineHeight}get empty(){return null==this.layoutLines||0===this.layoutLines.length}get lineCount(){return this.empty?0:this.layoutLines.length}}class jLe{get lineType(){return this.type}set lineType(e){this.type=e}get text(){return this.content}set text(e){this.content=e}get width(){return this.lineWidth}set width(e){this.lineWidth=e}}var Tp=(()=>(function(n){n[n.None=0]="None",n[n.NewLineBreak=1]="NewLineBreak",n[n.LayoutBreak=2]="LayoutBreak",n[n.FirstParagraphLine=4]="FirstParagraphLine",n[n.LastParagraphLine=8]="LastParagraphLine"}(Tp||(Tp={})),Tp))();class Ud{constructor(e,t){this.fontStyle=Es.Regular,"number"==typeof e&&void 0===t?this.fontSize=e:(this.fontSize=e,this.setStyle(t))}get name(){return this.metrics.name}get size(){return this.fontSize}get height(){return this.metrics.getHeight(null)}get style(){return this.fontStyle}set style(e){this.fontStyle=e}get bold(){return(this.style&Es.Bold)>0}get italic(){return(this.style&Es.Italic)>0}get strikeout(){return(this.style&Es.Strikeout)>0}get underline(){return(this.style&Es.Underline)>0}get metrics(){return this.fontMetrics}set metrics(e){this.fontMetrics=e}get element(){return this.pdfFontInternals}measureString(e,t,i,s,r){if("string"==typeof e&&void 0===t)return this.measureString(e,null);if("string"==typeof e&&(t instanceof Mu||null==t)&&void 0===i&&void 0===s)return this.measureString(e,t,0,0);if("string"==typeof e&&(t instanceof Mu||null==t)&&"number"==typeof i&&"number"==typeof s)return this.measureString(e,0,t,i,s);if("string"==typeof e&&"number"==typeof t&&(i instanceof Mu||null==i)&&"number"==typeof s&&"number"==typeof r){let o=new Ct(t,0);return this.measureString(e,o,i,s,r)}{if(null==e)throw Error('ArgumentNullException("text")');let o=t,a=i,h=(new wC).layout(e,this,a,o,!1,new Ct(0,0));return s=e.length,r=h.empty?0:h.lines.length,h.actualSize}}equalsTo(e){return this.equalsToFont(e)}getInternals(){return this.pdfFontInternals}setInternals(e){if(null==e)throw new Error("ArgumentNullException:internals");this.pdfFontInternals=e}setStyle(e){this.fontStyle=e}applyFormatSettings(e,t,i){let s=i;return null!=t&&i>0&&(0!==t.characterSpacing&&(s+=(e.length-1)*t.characterSpacing),0!==t.wordSpacing)&&(s+=Nl.getCharsCount(e,Nl.spaces)*t.wordSpacing),s}}Ud.charSizeMultiplier=.001,Ud.syncObject=new Object;class yr{constructor(){}}yr.letter=new Ct(612,792),yr.note=new Ct(540,720),yr.legal=new Ct(612,1008),yr.a0=new Ct(2380,3368),yr.a1=new Ct(1684,2380),yr.a2=new Ct(1190,1684),yr.a3=new Ct(842,1190),yr.a4=new Ct(595,842),yr.a5=new Ct(421,595),yr.a6=new Ct(297,421),yr.a7=new Ct(210,297),yr.a8=new Ct(148,210),yr.a9=new Ct(105,148),yr.a10=new Ct(74,105),yr.b0=new Ct(2836,4008),yr.b1=new Ct(2004,2836),yr.b2=new Ct(1418,2004),yr.b3=new Ct(1002,1418),yr.b4=new Ct(709,1002),yr.b5=new Ct(501,709),yr.archE=new Ct(2592,3456),yr.archD=new Ct(1728,2592),yr.archC=new Ct(1296,1728),yr.archB=new Ct(864,1296),yr.archA=new Ct(648,864),yr.flsa=new Ct(612,936),yr.halfLetter=new Ct(396,612),yr.letter11x17=new Ct(792,1224),yr.ledger=new Ct(1224,792);Math;new xo;class __{constructor(e){this.intl=new mp,f(e)||(this.intl.culture=e)}getFormatFunction(e){return e.type?this.intl.getDateFormat(e):this.intl.getNumberFormat(e)}getParserFunction(e){return e.type?this.intl.getDateParser(e):this.intl.getNumberParser(e)}fromView(e,t,i){return"date"!==i&&"datetime"!==i&&"number"!==i||f(t)?e:t(e)}toView(e,t){let i=e;return!f(t)&&!f(e)&&(i=t(e)),i}setCulture(e){f(e)||function OTe(n){gO=n,jE.notify("notifyExternalChange",{locale:gO})}(e)}}class $d{constructor(e,t){this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=()=>this.editTemplateFn,this.getFilterTemplate=()=>this.filterTemplateFn,Ph(this,e),this.parent=t,"none"===this.type?this.type=null:this.type&&(this.type="string"==typeof this.type?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),f(this.uid)&&(this.uid=qf("grid-column"));const i=new __;if(e.format&&(e.format.skeleton||e.format.format&&"string"==typeof e.format.format)&&(this.setFormatter(i.getFormatFunction(Ae({},e.format))),this.setParser(i.getParserFunction(e.format))),this.toJSON=()=>{const s={},r=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],o=Object.keys(this);for(let a=0;a<o.length;a++)if("columns"===o[a]){s[o[a]]=[];for(let l=0;l<this[o[a]].length;l++)s[o[a]].push(this[o[a]][l].toJSON())}else r.indexOf(o[a])<0&&(s[o[a]]=this[o[a]]);return s},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(s=>s.allowResizing))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=Wh(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=Wh(this.headerTemplate)),!f(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=Wh(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=Wh(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=Wh(this.filterTemplate)),this.isForeignColumn()&&(f(this.editType)||"dropdownedit"===this.editType||"defaultedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=Ae({dataSource:this.dataSource,query:new Ut,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){let s=this.sortComparer;this.sortComparer=(r,o,a,l)=>{if("string"==typeof s&&(s=kr(s,window)),"Descending"===this.sortDirection){const h=r;r=o,o=h;const c=a;a=l,l=c}return s(r,o,a,l)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=(s,r)=>(s=kr(this.foreignKeyValue,gS(this,{},s)[0]),r=kr(this.foreignKeyValue,gS(this,{},r)[0]),"Descending"===this.sortDirection?Ze.fnDescending(s,r):Ze.fnAscending(s,r)))}getSortDirection(){return this.sortDirection}setSortDirection(e){this.sortDirection=e}getFreezeTableName(){return this.freezeTable}setProperties(e){const t=Object.keys(e);for(let i=0;i<t.length;i++)this[t[i]]=e[t[i]],this.parent&&this.parent.isReact&&("template"===t[i]?this.parent.refreshReactColumnTemplateByUid(this.uid):"headerTemplate"===t[i]&&(this.headerTemplateFn=Wh(e[t[i]]),this.parent.refreshReactHeaderTemplateByUid(this.uid)))}isForeignColumn(){return!(!this.dataSource||!this.foreignKeyValue)}getFormatter(){return this.formatFn}setFormatter(e){this.formatFn=e}getParser(){return this.parserFn}setParser(e){this.parserFn=e}getColumnTemplate(){return this.templateFn}getHeaderTemplate(){return this.headerTemplateFn}getFilterItemTemplate(){return this.fltrTemplateFn}getDomSetter(){return this.disableHtmlEncode?"textContent":"innerHTML"}}const Qde="rowDataBound",_Y="queryCellInfo",Jde="headerCellInfo",un="actionBegin",Oi="actionComplete",Dc="dataBound",IY="rowSelecting",l1="rowSelected",eue="rowDeselecting",Yj="rowDeselected",zP="cellSelecting",Zj="cellSelected",tue="cellDeselecting",iue="cellDeselected",TY="columnSelecting",DY="columnSelected",sue="beforePrint",nue="printComplete",rue="beforeOpenAdaptiveDialog",aue="filterchoicerequest",Sg="initial-load",Bl="initial-end",Dp="data-ready",Kn="content-ready",Rn="ui-update",zf="on-empty",Hl="inbound-model-changed",da="model-changed",Jj="colgroup-refresh",Go="header-refreshed",uue="searching-complete",uS="group-aggregates",DC="refresh-footer-rendered",u1="beforecellfocused",e3="cellfocused",Nr="key-pressed",Vl="click",Qi="destroy",kp="column-visible-changed",jP="column-width-changed",p1="column-position-changed",MY="rows-added",t3="rows-removed",UP="datasource-modified",m1="auto-col",g1="tooltip-destroy",WP="update-data",wue="add-delete-Action",Rp="freezerender",n3="getForeignKeyData",b1="generateQuery",_ue="showEmptyGrid",Iue="foreignKeyData",$P="dataStateChange",Tue="dataSourceChanged",Due="beforeFragAppend",KP="frozenHeight",VY="textWrapRefresh",zY="recordAdded",r3="cancel-Begin",UY="hierarchyprint",YP="partial-refresh",WY="columns-prepared",y1="cbox-filter-complete",ZP="filter-Prevent",Mue="detail-indentcell-info",h3="infinite-scroll-handler",c3="infinite-edit-handler",sZ="group-collapse",QP="refreshResizeHandlers",rZ="before-refresh-on-data-change",d3="filter-dialog-close",lZ="refresh-cutsom-filter-ok-button",p3="enter-key-handler",gZ="refresh-infinite-persist-selection";var Pt=(()=>(function(n){n[n.Data=0]="Data",n[n.Header=1]="Header",n[n.Summary=2]="Summary",n[n.GroupSummary=3]="GroupSummary",n[n.CaptionSummary=4]="CaptionSummary",n[n.Filter=5]="Filter",n[n.Indent=6]="Indent",n[n.GroupCaption=7]="GroupCaption",n[n.GroupCaptionEmpty=8]="GroupCaptionEmpty",n[n.Expand=9]="Expand",n[n.HeaderIndent=10]="HeaderIndent",n[n.StackedHeader=11]="StackedHeader",n[n.DetailHeader=12]="DetailHeader",n[n.DetailExpand=13]="DetailExpand",n[n.CommandColumn=14]="CommandColumn",n[n.DetailFooterIntent=15]="DetailFooterIntent",n[n.RowDragIcon=16]="RowDragIcon",n[n.RowDragHIcon=17]="RowDragHIcon"}(Pt||(Pt={})),Pt))(),Br=(()=>(function(n){n[n.Header=0]="Header",n[n.Content=1]="Content",n[n.Summary=2]="Summary"}(Br||(Br={})),Br))(),Zs=(()=>(function(n){n[n.isEdit=0]="isEdit",n[n.isAdd=1]="isAdd",n[n.isSort=2]="isSort",n[n.isFilter=3]="isFilter"}(Zs||(Zs={})),Zs))();class yZ{constructor(e,t){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=e,this.serviceLocator=t,this.initDataManager(),!this.parent.isDestroyed&&"foreignKey"!==this.getModuleName()&&(this.parent.on(MY,this.addRows,this),this.parent.on("row-position-changed",this.reorderRows,this),this.parent.on(t3,this.removeRows,this),this.parent.on(UP,this.initDataManager,this),this.parent.on(Qi,this.destroy,this),this.parent.on(WP,this.crudActions,this),this.parent.on(wue,this.getData,this),this.parent.on(m1,this.refreshFilteredCols,this),this.parent.on(WY,this.refreshFilteredCols,this))}reorderRows(e){this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])}getModuleName(){return"data"}initDataManager(){const e=this.parent;this.dataManager=e.dataSource instanceof ut?e.dataSource:f(e.dataSource)?new ut:new ut(e.dataSource),!e.isAngular||e.query instanceof Ut?(this.isQueryInvokedFromData=!0,e.query=e.query instanceof Ut?e.query:new Ut):e.setProperties({query:new Ut},!0)}generateQuery(e){const i=this.parent.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)i.select(this.parent.getColumns().filter(s=>!(!0!==s.isPrimaryKey&&!1===s.visible||void 0===s.field)).map(s=>s.field));else if("Schema"===this.parent.columnQueryMode){const s=[],r=this.parent.columns;for(let o=0;o<r.length;o++)s.push(r[o].field);i.select(s)}return this.filterQuery(i),this.searchQuery(i),this.aggregateQuery(i),this.sortQuery(i),Dr(this.parent)?this.virtualGroupPageQuery(i):this.pageQuery(i,e),this.groupQuery(i),i}aggregateQuery(e){const t=this.parent.aggregates;for(let i=0;i<t.length;i++){const s=t[i];for(let r=0;r<s.columns.length;r++){const o=s.columns[r],a=o.type instanceof Array?o.type:[o.type];for(let l=0;l<a.length;l++)e.aggregate(a[l].toLowerCase(),o.field)}}return e}virtualGroupPageQuery(e){if(e.queries.length)for(let i=0;i<e.queries.length;i++)"onPage"===e.queries[i].fn&&e.queries.splice(i,1);return e}pageQuery(e,t){const i=this.parent,r={query:e,skipPage:!1};if(i.notify("set-virtual-page-query",r),r.skipPage)return e;if((i.allowPaging||i.enableVirtualization||i.enableInfiniteScrolling)&&!0!==t){if(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),e.queries.length)for(let o=0;o<e.queries.length;o++)"onPage"===e.queries[o].fn&&e.queries.splice(o,1);!f(i.infiniteScrollModule)&&i.enableInfiniteScrolling?this.parent.notify("infinite-page-query",e):e.page(i.pageSettings.currentPage,i.allowPaging&&i.pagerModule&&i.pagerModule.pagerObj.isAllPage&&!this.dataManager.dataSource.offline?null:i.pageSettings.pageSize)}return e}groupQuery(e){const t=this.parent;if(t.allowGrouping&&t.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&e.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});const i=t.groupSettings.columns;for(let s=0,r=i.length;s<r;s++){const o=this.getColumnByField(i[s]);o||this.parent.log("initial_action",{moduleName:"group",columnName:i[s]});const l=o.format;o.enableGroupByFormat?e.group(i[s],this.formatGroupColumn.bind(this),l):e.group(i[s],null)}}return e}sortQuery(e){const t=this.parent;if((t.allowSorting||t.allowGrouping)&&t.sortSettings.columns.length){const i=t.sortSettings.columns,s=[];for(let r=i.length-1;r>-1;r--){const o=this.getColumnByField(i[r].field);if(!o)return this.parent.log("initial_action",{moduleName:"sort",columnName:i[r].field}),e;o.setSortDirection(i[r].direction);let a=i[r].direction;o.sortComparer&&(this.parent.log("grid_sort_comparer"),a=this.isRemote()?i[r].direction:o.sortComparer.bind(o)),-1===t.groupSettings.columns.indexOf(i[r].field)?o.isForeignColumn()||o.sortComparer?e.sortByForeignKey(o.field,a,void 0,i[r].direction.toLowerCase()):e.sortBy(o.field,a):s.push({direction:a,field:o.field})}for(let r=0,o=s.length;r<o;r++)if("string"==typeof s[r].direction)e.sortBy(s[r].field,s[r].direction);else{const a=this.getColumnByField(s[r].field);e.sortByForeignKey(s[r].field,s[r].direction,void 0,a.getSortDirection().toLowerCase())}}return e}searchQuery(e,t,i){const s=this.parent.searchSettings;let r=s.fields.length?s.fields:this.getSearchColumnFieldNames(),o=[],a=!1;if(this.parent.searchSettings.key.length){a=this.parent.getForeignKeyColumns().some(h=>r.indexOf(h.field)>-1);const l=i?t.dataSource.adaptor:this.dataManager.adaptor;if(a||l.getModuleName&&"ODataV4Adaptor"===l.getModuleName()){r=i?[t.foreignKeyValue]:r;for(let c=0;c<r.length;c++){const m=i?t:this.getColumnByField(r[c]);m.isForeignColumn()&&!i?o=this.fGeneratePredicate(m,o):o.push(new cs(r[c],s.operator,s.key,s.ignoreCase,s.ignoreAccent))}const h=cs.or(o);h.key=s.key,e.where(h)}else e.search(s.key,r,s.operator,s.ignoreCase,s.ignoreAccent)}return e}filterQuery(e,t,i){const s=this.parent;let r=[];const o=[],a=this.parent.getForeignKeyColumns();let l;if(s.allowFiltering&&s.filterSettings.columns.length){const h=t||s.filterSettings.columns,c={};for(const v of s.getColumns())c[v.field]=v.filter.type?v.filter.type:s.filterSettings.type;const m=[],b=[];for(const v of h){const w=s.getColumnByField(v.field);f(v.type)&&w&&("date"===w.type||"datetime"===w.type)&&(v.type=s.getColumnByField(v.field).type),v.isForeignKey?m.push(v):b.push(v)}if(b.length){for(let w=0,E=b.length;w<E;w++)b[w].uid=b[w].uid||this.parent.grabColumnByFieldFromAllCols(b[w].field).uid;const v=Gh.getPredicate(b);for(const w of Object.keys(v))r.push(v[w])}if(m.length)for(const v of m){v.uid=v.uid||this.parent.grabColumnByFieldFromAllCols(v.field).uid;const w=this.parent.grabColumnByUidFromAllCols(v.uid);if(w||this.parent.log("initial_action",{moduleName:"filter",columnName:v.field}),w.isForeignColumn()&&dF(v.field,a)&&!i)o.push(v),w.columnData.length||(l=!0),r=this.fGeneratePredicate(w,r);else{const E=Gh.getPredicate(h);for(const D of Object.keys(E))r.push(E[D])}}r.length&&!l?e.where(cs.and(r)):this.parent.notify(_ue,{})}return e}fGeneratePredicate(e,t){const i={};return e&&(this.parent.notify(b1,{predicate:i,column:e}),i.predicate.predicates.length&&t.push(i.predicate)),t}getData(e={requestType:""},t){const i=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(e,t,i).promise;{let s;switch(e.requestType){case"delete":if(t=t||this.generateQuery(),1===Object.keys(e.data).length)s=this.dataManager.remove(i,e.data[0],t.fromTable,t);else{const a={addedRecords:[],deletedRecords:[],changedRecords:[]};a.deletedRecords=e.data,s=this.dataManager.saveChanges(a,i,t.fromTable,t.requiresCount())}break;case"save":t=t||this.generateQuery(),e.index=f(e.index)?0:e.index,s=this.dataManager.insert(e.data,t.fromTable,t,e.index)}return e.promise=s,!s||Array.isArray(s)||s.hasOwnProperty("deletedRecords")?this.insert(t,e):s.then(()=>this.insert(t,e))}}insert(e,t){return"save"===t.requestType&&this.parent.notify(zY,t),this.executeQuery(e)}executeQuery(e){if(this.dataManager.ready){const t=new Ru;return this.dataManager.ready.then(()=>{this.dataManager.executeQuery(e).then(s=>{t.resolve(s)})}).catch(s=>{t.reject(s)}),t.promise}return this.dataManager.executeQuery(e)}formatGroupColumn(e,t){const i=this.serviceLocator,s=this.getColumnByField(t),r=e;return s.type||(s.type=r.getDay?r.getHours()>0||r.getMinutes()>0||r.getSeconds()>0||r.getMilliseconds()>0?"datetime":"date":typeof e),f(s.getFormatter())&&mpe(i,s),__.prototype.toView(e,s.getFormatter())}crudActions(e){const t=this.generateQuery();let i=null;const s="promise",r=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());"save"===(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,t,r),e.requestType)&&(i=this.dataManager.update(r,e.data,t.fromTable,t,e.previousData)),e[s]=i||e[s],this.parent.notify("crud-Action",e)}saveChanges(e,t,i,s=this.generateQuery()){if(s.requiresCount(),"result"in this.parent.dataSource){const r=new Ru,o={requestType:"batchsave",changes:e,key:t,query:s,endEdit:r.resolve};return this.setState({isPending:!0,resolver:r.resolve}),this.parent.trigger(Tue,o),r.promise}return this.dataManager.saveChanges(e,t,s.fromTable,s,i)}getKey(e){if(e&&e.length)return e[0]}isRemote(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url}addRows(e){for(let t=e.records.length;t>0;t--)this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[t-1])}removeRows(e){this.dataManager.dataSource.json=this.dataManager.dataSource.json.filter(i=>-1===e.records.indexOf(i))}getColumnByField(e){let t;return this.parent.columnModel.some(i=>(t=i,i.field===e))&&t}destroy(){this.parent.isDestroyed||(this.parent.off(MY,this.addRows),this.parent.off(t3,this.removeRows),this.parent.off(UP,this.initDataManager),this.parent.off(Qi,this.destroy),this.parent.off(WP,this.crudActions),this.parent.off(wue,this.getData),this.parent.off(m1,this.refreshFilteredCols),this.parent.off(WY,this.refreshFilteredCols))}getState(){return this.dataState}setState(e){return this.dataState=e}getForeignKeyDataState(){return this.foreignKeyDataState}setForeignKeyDataState(e){this.foreignKeyDataState=e}getStateEventArgument(e){const t=new sg,i=new ut({url:"",adaptor:new sg}),s=t.processQuery(i,e);return Ae(JSON.parse(s.data),s.pvtData)}eventPromise(e,t,i){const s=e,r=this.getStateEventArgument(t),o=new Ru,a=new Ru;if(void 0!==e.requestType&&!1!==this.dataState.isDataChanged)if(r.action=e,"save"===e.requestType||"delete"===e.requestType){const l=e;l.key=i,l.promise=a.promise,l.state=r,this.setState({isPending:!0,resolver:a.resolve}),s.endEdit=a.resolve,s.cancelEdit=a.reject,this.parent.trigger(Tue,l),a.promise.then(()=>{this.setState({isPending:!0,resolver:o.resolve,group:r.group,aggregates:r.aggregates}),"save"===l.requestType&&this.parent.notify(zY,l),this.parent.trigger($P,r)}).catch(()=>{})}else this.setState({isPending:!0,resolver:o.resolve,group:r.group,aggregates:r.aggregates}),this.parent.trigger($P,r);else this.setState({}),o.resolve(this.parent.dataSource);return o}getSearchColumnFieldNames(){const e=[],t=this.parent.getColumns();for(const i of t)i.allowSearching&&!f(i.field)&&e.push(i.field);return e}refreshFilteredCols(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&function eFe(n,e){for(let t=0;t<e.length;t++)e[t].uid=e[t].isForeignKey?dF(e[t].field,n.getForeignKeyColumns()).uid:n.enableColumnVirtualization?pFe(n,e[t].field).uid:n.getColumnByField(e[t].field).uid}(this.parent,this.parent.filterSettings.columns)}}class Ap{constructor(e,t){Ph(this,e),this.parent=t}clone(){const e=new Ap({});return Ph(e,this),e.cells=this.cells.map(t=>t.clone()),e}setRowValue(e){if(!this.parent)return;const t=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(t,e)}setCellValue(e,t){if(this.parent&&this.data[e].toString()!==t.toString()){const s=this.parent.getPrimaryKeyFieldNames()[0];this.parent.setCellValue(this.data[s],e,t),this.makechanges(s,this.data)}}makechanges(e,t){this.parent&&this.parent.getDataModule().dataManager.update(e,t)}}class nd{constructor(e){this.isSpanned=!1,this.isRowSpanned=!1,Ph(this,e)}clone(){const e=new nd({});return Ph(e,this),e}}class Zue{constructor(e,t){this.serviceLocator=e,this.parent=t}render(e,t,i,s){const o=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(t.cells[i].cellType||Pt.Data);let a=t.cells[i].cellSpan?t.cells[i].cellSpan:e.colSpan+i<=t.cells.length?e.colSpan:t.cells.length-i;const l=e.rowSpan;let c,h=0;if(t.index>0){const b=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[t.index-1].isDataRow?this.parent.getRowsObject()[t.index].cells:this.parent.getRowsObject()[t.index-1].cells,v=t.cells[i],w="uid";c=b.filter(E=>E.column.uid===v.column[w])[0]}const m=c&&c.colSpanRange>1&&c.rowSpanRange>1?c.colSpanRange:a;for(let b=i+1;b<i+m&&b<t.cells.length;b++)!1===t.cells[b].visible?h++:t.cells[b].isSpanned=!0;if(h>0){for(let b=i+a;b<i+a+h&&b<t.cells.length;b++)t.cells[b].isSpanned=!0;i+a+h>=t.cells.length&&(a-=i+a+h-t.cells.length)}return t.cells[i].cellSpan&&(t.data[e.column.field]=t.cells[i].spanText,s=o.render(t.cells[i],t.data,{index:f(t.index)?"":t.index.toString()})),a>1&&Rt(s,{colSpan:a.toString(),"aria-colSpan":a.toString()}),l>1&&(Rt(s,{rowspan:l.toString(),"aria-rowspan":l.toString()}),t.cells[i].isRowSpanned=!0,t.cells[i].rowSpanRange=Number(l),a>1&&(t.cells[i].colSpanRange=Number(a))),t.index>0&&c.rowSpanRange>1&&(t.cells[i].isSpanned=!0,t.cells[i].rowSpanRange=Number(c.rowSpanRange-1),t.cells[i].colSpanRange=c.rowSpanRange>0?c.colSpanRange:1),this.parent.enableColumnVirtualization&&!t.cells[i].cellSpan&&!this.containsKey(e.column.field,e.data[e.column.field])&&this.backupMergeCells(e.column.field,e.data[e.column.field],e.colSpan),s}backupMergeCells(e,t,i){this.setMergeCells(this.generteKey(e,t),i)}generteKey(e,t){return e+"__"+t.toString()}splitKey(e){return e.split("__")}containsKey(e,t){return this.getMergeCells().hasOwnProperty(this.generteKey(e,t))}getMergeCells(){return this.parent.mergeCells}setMergeCells(e,t){this.parent.mergeCells[e]=t}updateVirtualCells(e){const t=this.getMergeCells();for(const i of Object.keys(t)){const s=t[i],r=this.splitKey(i),o=this.getIndexFromAllColumns(r[0]),a=this.parent.getColumnIndexesInView(),l=s-(a[0]-o);if(o<a[0]&&l>1)for(const h of e)if(h.data[r[0]].toString()===r[1].toString()){h.cells[0].cellSpan=l,h.cells[0].spanText=r[1];break}}return e}getIndexFromAllColumns(e){return P_(this.parent.getVisibleColumns(),(i,s)=>{if(i.field===e)return s})[0]}}const Ji="e-rowcell",to="e-gridheader",io="e-gridcontent",k_="e-gridfooter",Hr="e-headercontent",zs="e-movablecontent",js="e-movableheader",jf="e-frozencontent",xg="e-frozenheader",rr="e-content",tn="e-table",ps="e-row",R_="e-gridchkbox",zl="e-editedrow",rd="e-addedrow",Eg="addedRecords",A_="deletedRecords",Zt="Left-Right",an="frozen-right",or="frozen-left",Vr="aria-colindex",Di="aria-rowindex",Je="tbody",Si="colgroup";class od{constructor(e,t,i){this.isSpan=!1,this.cellType=t,this.serviceLocator=e,this.parent=i,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}render(e,t,i,s,r){return this.refreshRow(e,t,i,s,r)}refresh(e,t,i,s,r){i&&(e.data=k3({},e.changes),this.refreshMergeCells(e));const o=this.parent.element.querySelector("[data-uid="+e.uid+"]"),a=this.refreshRow(e,t,s,r,null,i),l=[].slice.call(a.cells);o.innerHTML="";for(const h of l)o.appendChild(h)}refreshRow(e,t,i,s,r,o){const a=f(r)?this.element.cloneNode():r,l={data:e.data},h={data:e.data},c=this.parent.getColumns().filter(D=>"checkbox"===D.type&&D.field)[0];let m=!1;c&&(m=kr(c.field,l.data));const b=this.parent.getSelectedRowIndexes();e.isDataRow&&(e.isSelected=b.indexOf(e.index)>-1||m),e.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0,-1===b.indexOf(e.index)&&b.push(e.index)),this.buildAttributeFromRow(a,e),Rt(a,Ae({},i,{})),_g(a,e.attributes);const v=this.serviceLocator.getService("cellRendererFactory");for(let D=0,L=e.cells.length;D<L;D++){const N=e.cells[D];N.isSelected=e.isSelected,N.isColumnSelected=N.column.isSelected;const V=v.getCellRenderer(e.cells[D].cellType||Pt.Data),$={index:f(e.index)?"":e.index.toString()};e.isExpand&&e.cells[D].cellType===Pt.DetailExpand&&($.class=this.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");let ie=V.render(e.cells[D],e.data,$,e.isExpand,o);if(e.cells[D].cellType!==Pt.Filter){if(e.cells[D].cellType===Pt.Data||e.cells[D].cellType===Pt.CommandColumn){this.parent.trigger(_Y,Ae(h,{cell:ie,column:N.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[D].foreignKeyData,requestType:this.parent.requestTypeAction}));let Q=!1;if(e.index>0&&this.isSpan){const le=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[e.index-1].isDataRow?this.parent.getRowsObject()[e.index].cells:this.parent.getRowsObject()[e.index-1].cells,ke="uid",Ye=le.filter(Nt=>Nt.column.uid===e.cells[D].column[ke])[0];Q=Ye.isRowSpanned?Ye.isRowSpanned:Ye.rowSpanRange>1}(h.colSpan>1||e.cells[D].cellSpan>1||h.rowSpan>1||Q)&&(this.isSpan=!0,ie=new Zue(this.serviceLocator,this.parent).render(h,e,D,ie))}e.cells[D].isSpanned||a.appendChild(ie)}}if(e.isDataRow&&(this.parent.trigger(Qde,Ae(l,{row:a,rowHeight:this.parent.rowHeight})),this.parent.childGrid||this.parent.isRowDragable()||this.parent.detailTemplate)){const D=a.querySelectorAll(".e-rowcell:not(.e-hide)")[0];D&&D.classList.add("e-detailrowvisible")}if(this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?a.style.height=l.rowHeight+"px":this.parent.rowHeight&&(a.querySelector(".e-headercell")||a.querySelector(".e-groupcaption"))&&(a.style.height=this.parent.rowHeight+"px"),e.cssClass&&a.classList.add(e.cssClass),e.lazyLoadCssClass&&a.classList.add(e.lazyLoadCssClass),(!this.parent.enableColumnVirtualization||0===this.parent.frozenColumns)&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(let D=0;D<this.parent.aggregates.length;D++)if(this.parent.aggregates[D].properties.columns[0].footerTemplate){const V=[].slice.call(a.getElementsByClassName("e-summarycell"));V.length&&(z([V[V.length-1]],["e-lastsummarycell"]),z([V[0]],["e-firstsummarycell"]))}return a}refreshMergeCells(e){for(const t of e.cells)t.isSpanned=!1;return e}buildAttributeFromRow(e,t){const i={},r=[];t.isDataRow&&r.push(ps),t.isAltRow&&r.push("e-altrow"),f(t.index)||(i["aria-rowindex"]=t.index),t.rowSpan&&(i.rowSpan=t.rowSpan),t.uid&&(i["data-uid"]=t.uid),t.isSelected&&(i["aria-selected"]=!0),!1===t.visible&&r.push("e-hide"),i.class=r,_g(e,i)}}class Uf{constructor(e){this.parent=e}generateRows(e,t){const i=[];let s=this.parent.enableVirtualization&&t?t.startIndex:0;s=this.parent.enableInfiniteScrolling&&t?this.getInfiniteIndex(t):s;for(let r=0,o=Object.keys(e).length;r<o;r++,s++)i[r]=this.generateRow(e[r],s);return i}ensureColumns(){const e=[];if(this.parent.detailTemplate||this.parent.childGrid){const t={};this.parent.notify(Mue,t),e.push(this.generateCell(t,null,Pt.DetailExpand))}return this.parent.isRowDragable()&&e.push(this.generateCell({},null,Pt.RowDragIcon)),e}generateRow(e,t,i,s,r,o,a){const l={foreignKeyData:{}};l.uid=qf("grid-row"),l.data=e,l.index=t,l.indent=s,l.tIndex=o,l.isDataRow=!0,l.parentGid=r,l.parentUid=a,this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?l.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[t]&&(l.isExpand=this.parent.expandedRows[t].isExpand)),l.cssClass=i,l.isAltRow=!!this.parent.enableAltRow&&t%2!=0,l.isAltRow=!!this.parent.enableAltRow&&t%2!=0,l.isSelected=this.parent.getSelectedRowIndexes().indexOf(t)>-1,this.refreshForeignKeyRow(l);const h=this.ensureColumns(),c=new Ap(l,this.parent);return c.cells="Right"===this.parent.getFrozenMode()?this.generateCells(l).concat(h):h.concat(this.generateCells(l)),c}refreshForeignKeyRow(e){const t=this.parent.getForeignKeyColumns();for(let i=0;i<t.length;i++)zt(t[i].field,gS(t[i],e.data),e.foreignKeyData)}generateCells(e){const t=this.parent.getColumns(),i=[];for(let s=0;s<t.length;s++)i.push(this.generateCell(t[s],e.uid,f(t[s].commands)?void 0:Pt.CommandColumn,null,s,e.foreignKeyData));return i}generateCell(e,t,i,s,r,o){const a={visible:e.visible,isDataCell:!f(e.field||e.template),isTemplate:!f(e.template),rowID:t,column:e,cellType:f(i)?Pt.Data:i,colSpan:s,commands:e.commands,isForeignKey:e.isForeignColumn&&e.isForeignColumn(),foreignKeyData:e.isForeignColumn&&e.isForeignColumn()&&U(e.field,o)};return(a.isDataCell||"checkbox"===a.column.type||a.commands)&&(a.index=r),new nd(a)}refreshRows(e){for(let t=0;t<e.length;t++)this.refreshForeignKeyRow(e[t]),e[t].cells=this.generateCells(e[t]);return e}getInfiniteIndex(e){return"infiniteScroll"===e.requestType||"delete"===e.requestType||"add"===e.action?e.startIndex:0}}class iF{constructor(e){this.parent=e}getData(){const e=[],t=this.parent.aggregates.slice();for(let i=0;i<t.length;i++){const s=t[i].columns.filter(r=>!(r.footerTemplate||r.groupFooterTemplate||r.groupCaptionTemplate)||this.columnSelector(r));s.length&&e.push({columns:s})}return e}columnSelector(e){return void 0!==e.footerTemplate}getColumns(e,t){const i=[];if(this.parent.allowGrouping)for(let s=0;s<this.parent.groupSettings.columns.length;s++)i.push(new $d({}));return(this.parent.detailTemplate||!f(this.parent.childGrid))&&i.push(new $d({})),this.parent.isRowDragable()&&!e&&i.push(new $d({})),i.push(...this.parent.getColumns()),t=t&&!e?t+this.parent.getIndentCount():t,f(e)?i:i.slice(e,t)}generateRows(e,t,i,s,r){if(0===e.length&&(void 0===t||!t.count))return[];const o=this.buildSummaryData(e,t),a=[],l=this.getData();for(let h=0;h<l.length;h++)a.push(this.getGeneratedRow(l[h],o[h],t?t.level:void 0,i,s,t?t.parentUid:void 0,r));return a}getGeneratedRow(e,t,i,s,r,o,a){const l=[];let h=this.getIndentByLevel();const c=!f(this.parent.childGrid),m=s?0:this.parent.getIndentCount();this.parent.isRowDragable()&&!s&&(h=["e-indentcelltop"]);const b=a||this.getColumns(s,r);for(let w=0;w<b.length;w++)l.push(this.getGeneratedCell(b[w],e,w>=m?this.getCellType():w<this.parent.groupSettings.columns.length?Pt.Indent:Pt.DetailFooterIntent,h[w],c));const v=new Ap({data:t,attributes:{class:"e-summaryrow"}});return v.cells=l,v.uid=qf("grid-row"),v.parentUid=o,v.isAggregateRow=!0,v.visible=l.some(w=>w.isDataCell&&w.visible),v}getGeneratedCell(e,t,i,s,r){const o=t.columns.filter(h=>h.columnName===e.field)[0],a={style:{textAlign:e.textAlign},"e-mappinguid":e.uid,index:e.index};s&&(a.class=s),f(s)&&r&&(a.class="e-detailindentcelltop");const l={visible:e.visible,isDataCell:!f(o),isTemplate:o&&!f(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate),column:o||{},attributes:a,cellType:i};return l.column.headerText=e.headerText,new nd(l)}buildSummaryData(e,t){const i=[],s=this.getData();let r={};for(let o=0;o<s.length;o++){r={};const a=s[o].columns;for(let l=0;l<a.length;l++)r=this.setTemplate(a[l],t&&t.aggregates?t:e,r);i.push(r)}return i}getIndentByLevel(){return this.parent.groupSettings.columns.map(()=>"e-indentcelltop")}setTemplate(e,t,i){let s=e.type;const r={},o=e.getFormatter()||(l=>l),a=t;s instanceof Array||(s=[e.type]);for(let l=0;l<s.length;l++){const h=e.field+" - "+s[l].toLowerCase(),c=e.columnName,m="Custom"!==s[l]&&a.aggregates&&h in a.aggregates?a.aggregates[h]:fpe(s[l],a.aggregates?a:t,e,this.parent);i[c]=i[c]||{},i[c][h]=m,i[c][s[l]]=f(m)?" ":o(m),a.field&&(i[c].field=a.field,i[c].key=a.key)}return r.format=e.getFormatter(),e.setTemplate(r),i}getCellType(){return Pt.Summary}}class S1 extends iF{columnSelector(e){return void 0!==e.groupFooterTemplate}getIndentByLevel(e=this.parent.groupSettings.columns.length){return this.parent.groupSettings.columns.map((t,i)=>i<=e-1?"":"e-indentcelltop")}getCellType(){return Pt.GroupSummary}}class sF extends iF{columnSelector(e){return void 0!==e.groupCaptionTemplate}getData(){return[super.getData().reduce((t,i)=>(t.columns=[...t.columns,...i.columns],t),{columns:[]})]}isEmpty(){return 0===(this.getData()[0].columns||[]).length}getCellType(){return Pt.CaptionSummary}}class v3 extends Uf{constructor(e){super(e),this.rows=[],this.index=0,this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.parent=e,this.summaryModelGen=new S1(e),this.captionModelGen=new sF(e)}generateRows(e,t){if(0===this.parent.groupSettings.columns.length)return super.generateRows(e,t);this.isInfiniteScroll="infiniteScroll"===t.requestType,this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?t.startIndex:0;for(let i=0,s=e.length;i<s;i++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,e[i],e.level,i,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows}getGroupedRecords(e,t,i,s,r,o,a){const l=i;if(f(t.items))if(f(t.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(t,e,s,this.rows.length,a));else for(let h=0,c=t.length;h<c;h++)this.getGroupedRecords(e,t[h],t.level,s,e,this.rows.length,a);else{let h;const c=this.generateCaptionRow(t,e,s,r,o,a);if(this.isInfiniteScroll&&(h=this.getPreCaption(e,c.data.key)),h?c.uid=h.uid:this.rows=this.rows.concat(c),t.items&&t.items.length&&this.getGroupedRecords(e+1,t.items,t.items.level,s,e+1,this.rows.length,c.uid),this.parent.aggregates.length&&this.isRenderAggregate(c)){const m=this.rows.length;this.rows.push(...this.summaryModelGen.generateRows(t,{level:l,parentUid:c.uid}));for(let b=m-1;b>=0;b--)if(this.rows[b].isCaptionRow)this.rows[b].aggregatesCount=this.rows.length-m;else if(!this.rows[b].isCaptionRow&&!this.rows[b].isDataRow)break}h&&this.setInfiniteRowVisibility(h)}}isRenderAggregate(e){return this.parent.enableInfiniteScrolling?!!this.renderInfiniteAgg&&(this.getPreCaption(e.indent,e.data.key),this.renderInfiniteAgg=e.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!this.parent.enableInfiniteScrolling}getPreCaption(e,t){const i=[...this.parent.getRowsObject(),...this.rows];let s;this.infiniteChildCount=0;let r=i.length;for(;r--&&(i[r].isCaptionRow&&i[r].indent===e&&i[r].data.key===t&&(s=i[r]),!(i[r].indent===e||i[r].indent<e));)i[r].indent===e+1&&this.infiniteChildCount++;return s}getCaptionRowCells(e,t,i){const s=[];let r=[],o=this.parent.getColumnByField(e);const a=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(o=this.parent.columns.filter(b=>b.field===e)[0]);const l=this.parent.groupSettings.columns.length,h=this.parent;if(!this.parent.enableColumnVirtualization||-1!==a.indexOf(t)){for(let b=0;b<t;b++)s.push(this.generateIndentCell());s.push(this.generateCell({},null,Pt.Expand))}if(t=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+l+(h.detailTemplate||h.childGrid?1:0)-t+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){const b=this.captionModelGen.generateRows(i)[0];Ae(i,b.data);let v=0;b.cells.some((w,E)=>(v=E,w.visible&&w.isDataCell)),r=b.cells.slice(v).filter(w=>w.visible),b.visible&&r[0].column.field===this.parent.getVisibleColumns()[0].field&&(r=r.slice(1)),1===this.parent.getVisibleColumns().length&&(r=[]),t-=r.length}const c=this.parent.enableColumnVirtualization?this.parent.getColumns():[o];let m=!0;for(let b=0;b<c.length;b++){const v=m&&-1!==a.indexOf(t);v&&(m=!1);const w=!this.parent.enableColumnVirtualization||v?Pt.GroupCaption:Pt.GroupCaptionEmpty;t=this.parent.enableColumnVirtualization&&w===Pt.GroupCaption?t+l:t,h.isRowDragable()&&t++,s.push(this.generateCell(o,null,w,t))}return s.push(...r),s}generateCaptionRow(e,t,i,s,r,o){const a={},l="records",h=this.parent.getColumnByField(e.field);a.data=Ae({},e),h&&(a.data.field=e.field),a.isDataRow=!1,a.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),a.parentGid=i,a.childGid=s,a.tIndex=r,a.isCaptionRow=!0,a.parentUid=o,a.gSummary=f(e.items[l])?e.items.length:e.items[l].length,a.uid=qf("grid-row");const c=new Ap(a);return c.indent=t,this.getForeignKeyData(c),c.cells=this.getCaptionRowCells(e.field,t,c.data),c}getForeignKeyData(e){const t=e.data,i=this.parent.getColumnByField(t.field);i&&i.isForeignColumn&&i.isForeignColumn()&&zt("foreignKey",f(t.key)?"":i.valueAccessor(i.foreignKeyValue,gS(i,{},t.key)[0],i),e.data)}generateDataRows(e,t,i,s,r){const o=[],a=this.parent.getColumnIndexesInView();for(let l=0,h=e.length;l<h;l++,s++){o[l]=this.generateRow(e[l],this.index,l?void 0:"e-firstchildrow",t,i,s,r);for(let c=0;c<t;c++)this.parent.enableColumnVirtualization&&-1===a.indexOf(t)||o[l].cells.unshift(this.generateIndentCell());this.index++}return o}generateIndentCell(){return this.generateCell({},null,Pt.Indent)}refreshRows(e){const t=this.parent.getColumnIndexesInView();for(let i=0;i<e.length;i++)if(e[i].isDataRow){e[i].cells=this.generateCells(e[i]);for(let s=0;s<e[i].indent;s++)this.parent.enableColumnVirtualization&&-1===t.indexOf(e[i].indent)||e[i].cells.unshift(this.generateIndentCell())}else{const s=this.generateCaptionRow(e[i].data,e[i].indent);e[i].cells=s.cells}return e}setInfiniteRowVisibility(e){if(!e.isExpand||!1===e.visible)for(const t of this.rows)t.parentUid===e.uid&&(t.visible=!1,t.isCaptionRow&&this.setInfiniteRowVisibility(t))}ensureRowVisibility(){for(let e=0;e<this.rows.length;e++){const t=this.rows[e];if(t.isCaptionRow)for(let i=e+1;i<this.rows.length;i++)t.uid===this.rows[i].parentUid&&(this.rows[i].visible=t.isExpand)}}}class Que{constructor(e,t){this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.viewColIndexes=[],this.drop=i=>{this.parent.notify("columnDrop",{target:i.target,droppedElement:i.droppedElement}),Yt(i.droppedElement)},this.infiniteCache={},this.isRemove=!1,this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.rafCallback=i=>{const s=i;return()=>{if(this.parent.isFrozenGrid()&&this.parent.enableVirtualization){const o=i.tableName;if(this.isLoaded=this.parent.getFrozenMode()===Zt?"frozen-right"===o:"movable"===o,this.parent.enableColumnVirtualization&&"virtualscroll"===i.requestType&&this.isLoaded){const a=[].slice.call(this.parent.getMovableVirtualHeader().getElementsByClassName(ps)),l=[].slice.call(this.parent.getFrozenVirtualHeader().getElementsByClassName(ps));this.isLoaded=a.length===l.length}}if(this.ariaService.setBusy(this.getPanel().querySelector("."+rr),!1),this.parent.isDestroyed)return;let r=this.rows.slice(0);if(this.parent.enableInfiniteScrolling){r=this.parent.getRowsObject();const o=s.prevPage;if(this.parent.infiniteScrollSettings.enableCache&&o){const a=this.parent.infiniteScrollSettings.maxBlocks;r=[];const l=parseInt(this.rowElements[0].getAttribute("aria-rowindex"),10)+1;for(let c=0,m=Math.ceil(l/this.parent.pageSettings.pageSize);c<a;c++,m++)this.infiniteCache[m]&&(r=[...r,...this.infiniteCache[m]])}}if(this.parent.isFrozenGrid()&&(r=i.isFrozen?this.freezeRows:i.renderFrozenRightContent?this.parent.getFrozenRightRowsObject():this.movableRows),this.parent.notify(Kn,{rows:r,args:s}),this.isLoaded&&(this.parent.isManualRefresh=!1,this.parent.trigger(Dc,{},()=>{this.parent.allowTextWrap&&this.parent.notify(Rp,{case:"textwrap"})})),s){const o=(s.requestType||"").toLowerCase()+"-complete";this.parent.notify(o,s),"batchsave"===i.requestType&&(i.cancel=!1,this.parent.trigger(Oi,i))}this.isLoaded&&this.parent.hideSpinner()}},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.enableVirtualization&&!this.parent.groupSettings.enableLazyLoading&&this.parent.on(kp,this.setVisible,this),this.parent.on(Jj,this.colGroupRefresh,this),this.parent.on(Rn,this.enableAfterRender,this),this.parent.on("refresh-infinite-mode-blocks",this.refreshContentRows,this),this.parent.on(u1,this.beforeCellFocused,this),this.parent.on(Qi,this.droppableDestroy,this))}beforeCellFocused(e){this.pressedKey=!e.byKey||"upArrow"!==e.keyArgs.action&&"downArrow"!==e.keyArgs.action?void 0:e.keyArgs.action}renderPanel(){const e=this.parent;let t=this.parent.element.querySelector("."+io);if(t)return this.ariaService.setOptions(this.parent.element.querySelector("."+rr),{busy:!1}),void this.setPanel(t);t=this.parent.createElement("div",{className:io});const i=this.parent.createElement("div",{className:rr});this.ariaService.setOptions(i,{busy:!1}),t.appendChild(i),this.setPanel(t),e.element.appendChild(t)}renderTable(){const e=this.getPanel(),t=e.querySelector(".e-virtualtable"),i=e.querySelector(".e-virtualtrack");this.parent.enableVirtualization&&!f(t)&&!f(i)&&(Yt(t),Yt(i)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector("."+tn)),this.ariaService.setOptions(this.getTable(),{multiselectable:"Multiple"===this.parent.selectionSettings.type}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdrcont")}createContentTable(e){const t=this.getPanel().firstElementChild;this.getTable()&&Yt(this.getTable());const i=t.querySelector("."+tn)?t.querySelector("."+tn):this.parent.createElement("table",{className:tn,attrs:{cellspacing:"0.25px",role:"grid",id:this.parent.element.id+e}});return this.setColGroup(this.parent.getHeaderTable().querySelector(Si).cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(this.parent.createElement(Je,{attrs:{role:"rowgroup"}})),t.appendChild(i),t}refreshContentRows(e={}){const t=this.parent;if(0===t.currentViewData.length)return;const i=this.currentMovableRows||t.currentViewData,s=this.parent.contentModule,r=t.isReact&&!f(t.rowTemplate);let o=r?t.createElement(Je,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=Ae([],i));const a=r?t.createElement(Je,{attrs:{role:"rowgroup"}}):document.createDocumentFragment(),l=t.getColumns();let h,c;const m=t.getFrozenColumns(),b=this.parent.isFrozenGrid();let v;const w=new od(this.serviceLocator,null,this.parent),E=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;t.notify("destroy-child-grid",{}),this.rowElements=[],this.rows=[];const D=this.getPanel().querySelector("."+jf),L=this.getPanel().querySelector("."+zs),N=this.getPanel().querySelector("."+rr);let V,$,ie;Dr(t)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(Le=>e.requestType===Le)&&this.emptyVcRows(),this.parent.enableVirtualization&&this.parent.isFrozenGrid()?(this.parent.enableColumnVirtualization&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis&&(ie=this.parent.contentModule.generateRows(i,e),e.renderMovableContent=!0),ie=this.parent.contentModule.generateRows(i,e)):(ie=this.checkCache(ie,e),!this.isAddRows&&!this.useGroupCache&&(ie=this.generator.generateRows(i,e))),this.setGroupCache(ie,e),this.parent.notify("set-infinite-cache",{isInfiniteScroll:E,modelData:ie,args:e});const Q=ie[0].cells[0].index;b&&($=s.setTbody(ie,e),V=s.getTbody($));const le=this.parent.getFrozenMode()===Zt&&$===an;if("infiniteScroll"!==e.requestType&&this.parent.registeredTemplate&&this.parent.registeredTemplate.template&&!e.isFrozen&&!le){const Le=[];for(let nt=0;nt<this.parent.registeredTemplate.template.length;nt++)for(let We=0;We<this.parent.registeredTemplate.template[nt].rootNodes.length;We++)f(this.parent.registeredTemplate.template[nt].rootNodes[We].parentNode)&&Le.push(this.parent.registeredTemplate.template[nt]);this.parent.destroyTemplate(["template"],Le)}!this.parent.isReact&&!this.parent.isVue||"infiniteScroll"===e.requestType||e.isFrozen||mF(this.parent,[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"]),this.parent.enableColumnVirtualization&&new Zue(this.serviceLocator,this.parent).updateVirtualCells(ie),b||(this.tbody=this.getTable().querySelector(Je));let ke=0,Ye=!0;if(Dr(t)&&t.vcRows.length){const Le="top",nt=f(e.virtualInfo.offsets)?f(e.scrollTop)?0:e.scrollTop[Le]:e.virtualInfo.offsets.top;if(0!==nt){const We=t.vGroupOffsets,xe=t.pageSettings.pageSize/2,Me=Object.keys(We).map(ue=>We[ue]);for(let ue=0;ue<Me.length;ue++)if(nt<Me[ue]){if(f(e.virtualInfo)||"up"!==e.virtualInfo.direction){ke=ue*xe,(this.parent.contentModule.isEndBlock(ue)||this.parent.contentModule.isEndBlock(ue+1))&&(e.virtualInfo.blockIndexes=[ue,ue+1]);break}ke=ue>0?(ue-1)*xe:ue*xe;break}Math.round(nt+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!e.rowObject&&(Ye=!1)}}const Nt=t.frozenRows&&!t.isFrozenGrid()&&this.parent.enableVirtualization&&"reorder"===e.requestType;if(t.frozenRows&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis||Nt){const Le=e.virtualInfo.blockIndexes,nt=e.virtualInfo.page;e.virtualInfo.blockIndexes=[1,2],Nt&&(e.virtualInfo.page=1);const xe=this.vgenerator.generateRows(Nt?this.initialPageRecords:i,e);xe.splice(this.parent.frozenRows);for(let Me=0;Me<this.parent.frozenRows;Me++)xe[Me].cells.splice(0,this.parent.getFrozenColumns()),h=w.render(xe[Me],l),a.appendChild(h);e.virtualInfo.blockIndexes=Le,e.virtualInfo.page=nt,Nt&&1===e.virtualInfo.page&&ie.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(a,ie,w,e,i,l);for(let Le=ke,nt=ie.length;Le<nt;Le++)if(this.rows.push(ie[Le]),!this.parent.groupSettings.enableLazyLoading||this.useGroupCache||!this.parent.groupSettings.columns.length||(this.setRowsInLazyGroup(ie[Le],Le),!f(ie[Le].indent))){if(this.setInfiniteVisibleRows(e,ie[Le],$),Dr(t)&&e.virtualInfo&&e.virtualInfo.blockIndexes&&this.rowElements.length>=e.virtualInfo.blockIndexes.length*this.parent.contentModule.getBlockSize()&&Ye){this.parent.currentViewData.records=this.rows.map(We=>We.data);break}if(t.rowTemplate){const We=t.element.id+"rowTemplate";let xe;if(t.isReact){const ue=t.frozenRows&&Le<t.frozenRows,ae=Ae({index:Le},i[Le]);t.getRowTemplate()(ae,t,"rowTemplate",We,null,null,ue?a:o),t.renderTemplates()}else xe=t.getRowTemplate()(Ae({index:Le},i[Le]),t,"rowTemplate",We,void 0,void 0,void 0,this.parent.root);if(t.isReact||"TBODY"!==xe[0].tagName)t.frozenRows&&Le<t.frozenRows?h=t.isReact?a.lastElementChild:Aa(a,xe):(t.isReact||(h=Aa(o,xe)),v=t.isReact?o.lastElementChild:h.lastElementChild);else{for(let ue=0;ue<xe.length;ue++){const ae="tr"===xe[ue].nodeName.toLowerCase();(ae||xe[ue].querySelectorAll&&xe[ue].querySelectorAll("tr").length)&&(h=ae?xe[ue]:xe[ue].querySelector("tr"))}t.frozenRows&&Le<t.frozenRows?a.appendChild(h):o.appendChild(h)}this.parent.trigger(Qde,{data:ie[Le].data,row:v||h})}else{h=w.render(ie[Le],l);const We=this.ensureFrozenHeaderRender(e);t.frozenRows&&Le<t.frozenRows&&!E&&"virtualscroll"!==e.requestType&&We&&this.ensureVirtualFrozenHeaderRender(e)?a.appendChild(h):o.appendChild(h),ie[Le].isExpand&&t.notify("expandchildgrid",h.cells[t.groupSettings.columns.length])}ie[Le].isDataRow&&this.rowElements.push(h),this.ariaService.setOptions(this.getTable(),{colcount:t.getColumns().length.toString()})}if(b&&s.splitRows($),t.frozenRows&&"virtualscroll"!==e.requestType&&!E&&this.ensureVirtualFrozenHeaderRender(e)||"virtualscroll"===e.requestType&&e.virtualInfo.sentinelInfo&&"X"===e.virtualInfo.sentinelInfo.axis)if(c=b?s.getFrozenHeader($):t.getHeaderTable().querySelector(Je),r){const Le=c.parentElement;Yt(c),Le.appendChild(a)}else c.innerHTML="",c.appendChild(a);!t.enableVirtualization&&t.frozenRows&&0===Q&&N.offsetHeight===Number(t.height)&&(N.style.height=N.offsetHeight-c.offsetHeight+"px"),e.rows=this.rows.slice(0),b&&s.setIsFrozen(e,$),this.index=Q,cpe(()=>{this.parent.notify(Due,e);const Le=this.parent.enableVirtualization&&this.parent.isFrozenGrid();if(!this.parent.enableVirtualization&&!E&&(this.parent.isFrozenGrid()?(Yt(s.getTbody($)),V=this.parent.createElement(Je,{attrs:{role:"rowgroup"}})):(this.tbody.innerHTML="",Yt(this.tbody),this.tbody=this.parent.createElement(Je,{attrs:{role:"rowgroup"}}))),!b||Le||this.parent.enableInfiniteScrolling)if(Le){if(e.renderFrozenRightContent){const nt=t.getContent().querySelector(".e-frozen-right-content").querySelector(Je);this.appendContent(nt,o,e)}else e.renderMovableContent?(this.appendContent(L.querySelector(Je),o,e),e.renderMovableContent=!1):this.appendContent(D.querySelector(Je),o,e);this.parent.getFrozenColumns()||s.renderNextFrozentPart(e,$)}else!f(this.parent.infiniteScrollModule)&&this.parent.enableInfiniteScrolling?(this.isAddRows=!1,this.parent.notify("remove-infinite-rows",{args:e}),this.parent.notify("append-infinite-content",{tbody:V||this.tbody,frag:o,args:e,rows:this.rows,rowElements:this.rowElements,visibleRows:this.visibleRows,tableName:$}),!m&&b&&(t.getFrozenMode()!==Zt&&($===or||$===an)||t.getFrozenMode()===Zt&&($===or||"movable"===$))&&this.refreshContentRows(Ae({},e))):(this.useGroupCache=!1,this.appendContent(this.tbody,o,e));else this.appendContent(V,o,e,$);m&&s.renderNextFrozentPart(e,$),o=null},this.rafCallback(Ae({},e)))}emptyVcRows(){this.parent.vcRows=[],this.parent.vRows=[]}appendContent(e,t,i,s){this.parent.isReact&&!f(this.parent.rowTemplate)?this.getTable().appendChild(t):(e.appendChild(t),this.getTable().appendChild(e))}setRowsInLazyGroup(e,t){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.contentModule.maintainRows(e,t)}setGroupCache(e,t){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify("group-cache",{args:t,data:e})}ensureFrozenHeaderRender(e){return!(this.parent.enableVirtualization&&("reorder"===e.requestType||"refresh"===e.requestType)||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&"delete"===this.parent.infiniteScrollModule.requestType&&1!==this.parent.pageSettings.currentPage)}ensureVirtualFrozenHeaderRender(e){return!(this.parent.enableVirtualization&&"delete"===e.requestType)}checkCache(e,t){if(this.parent.infiniteScrollSettings.enableCache&&"infiniteScroll"===t.requestType){const i=t.isFrozen?1:0,s=this.parent.isFrozenGrid();if(this.isAddRows=!f(this.infiniteCache[this.parent.pageSettings.currentPage]),s&&!f(this.infiniteCache[this.parent.pageSettings.currentPage])&&(this.isAddRows=0!==this.infiniteCache[this.parent.pageSettings.currentPage][i].length),this.isAddRows){const r=s?this.infiniteCache[this.parent.pageSettings.currentPage][i]:this.infiniteCache[this.parent.pageSettings.currentPage];e=1===this.parent.pageSettings.currentPage?r.slice(this.parent.frozenRows):r}return e}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&("paging"===t.requestType||"columnstate"===t.requestType||"reorder"===t.requestType)&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?(this.useGroupCache=!0,this.parent.contentModule.initialGroupRows("reorder"===t.requestType)):null}setInfiniteVisibleRows(e,t,i){const s=this.parent.isFrozenGrid();this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&(s?i===or||"Right"===this.parent.getFrozenMode()&&i===an?this.visibleFrozenRows.push(t):"movable"===i?this.visibleRows.push(t):this.rightFreezeRows.push(t):this.parent.infiniteScrollSettings.enableCache||this.visibleRows.push(t))}getCurrentBlockInfiniteRecords(e){let t=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];const i=this.parent.isFrozenGrid(),s=this.parent.getRows();let r=parseInt(s[this.parent.frozenRows].getAttribute(Di),10);const o=Math.ceil((r+1)/this.parent.pageSettings.pageSize);r=parseInt(s[s.length-1].getAttribute(Di),10);const a=Math.ceil(r/this.parent.pageSettings.pageSize);if(i){const l=e?0:1;for(let h=o;h<=a;h++)t=t.length?t.concat(this.infiniteCache[h][l]):this.infiniteCache[h][l];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1][l].slice(0,this.parent.frozenRows).concat(t))}else{for(let l=o;l<=a;l++)t=t.length?t.concat(this.infiniteCache[l]):this.infiniteCache[l];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(t))}}return t}getReorderedVFRows(e){return this.parent.contentModule.getReorderedFrozenRows(e)}getReorderedRows(e){return this.parent.contentModule.getReorderedFrozenRows(e)}virtualFrozenHdrRefresh(e,t,i,s,r,o){if(this.parent.frozenRows&&this.parent.enableVirtualization&&("reorder"===s.requestType||"refresh"===s.requestType)){let a,l=[];this.parent.isFrozenGrid()?(this.currentMovableRows=r,l=this.getReorderedVFRows(s)):l=this.getReorderedRows(s);for(let h=0;h<l.length;h++)a=i.render(l[h],o),e.appendChild(a);1===s.virtualInfo.page&&t.splice(0,this.parent.frozenRows),s.renderMovableContent&&(this.parent.currentViewData=this.currentMovableRows,this.currentMovableRows=null)}}getInfiniteRows(){let e=[];const t=this.parent.isFrozenGrid();if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache){const i=Object.keys(this.infiniteCache);for(let s=0;s<i.length;s++)e=t?[...e,...this.infiniteCache[i[s]][0]]:[...e,...this.infiniteCache[i[s]]]}else e=t?this.visibleFrozenRows:this.visibleRows;return e}getInfiniteMovableRows(){const e=this.getCurrentBlockInfiniteRecords();return this.parent.enableInfiniteScrolling?e.length?e:this.visibleRows:[]}getPanel(){return this.contentPanel}setPanel(e){this.contentPanel=e}getTable(){return this.contentTable}setTable(e){this.contentTable=e}getRows(){const e=this.getInfiniteRows();return e.length?e:this.parent.getFrozenColumns()?this.freezeRows:this.rows}getMovableRows(){const e=this.getInfiniteMovableRows();return e.length?e:this.movableRows}getRowElements(){return this.parent.getFrozenColumns()?this.freezeRowElements:this.rowElements}getMovableRowElements(){return this.rowElements}setRowElements(e){this.rowElements=e}getColGroup(){return this.colgroup}setColGroup(e){return f(e)||(e.id="content-"+e.id),this.colgroup=e}setVisible(e){const t=this.parent,i=this.parent.isFrozenGrid(),s=t.getFrozenColumns();let o,r=[];if(i){const b=this.freezeRows,v=this.movableRows,w=b.length;let E,D=[];t.getFrozenMode()===Zt&&(D=t.getFrozenRightRowsObject());for(let N,L=0;L<w;L++){E=v[L].cells.length;const V=D.length?D[L].cells.length:0;N=b[L].clone();for(let $=0;$<E;$++)N.cells.push(v[L].cells[$]);for(let $=0;$<V;$++)N.cells.push(D[L].cells[$]);r.push(N)}}else r=this.getRows();r.some(b=>(b.isDataRow&&(o=b),b.isDataRow));let a=!0;!t.groupSettings.columns.length&&o&&(a=!1);let l=t.getDataRows(),m=this.infiniteRowVisibility()||this.rows.filter(b=>!b.isDetailRow);for(let b=0,v=e.length;b<v;b++){const w=e[b];let E=this.parent.getNormalizedColumnIndex(w.uid),D=this.parent.getColumnIndexByUid(w.uid);const L=!0===w.visible?"":"none";if(-1!==E&&o&&E<o.cells.length)if(i)if("movable"!==w.getFreezeTableName())w.getFreezeTableName()===an?(D=E-=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount(),ht(this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(Si).childNodes[E],{display:L}),m=t.getFrozenRightRowsObject(),l=t.getFrozenRightDataRows()):(ht(this.getColGroup().childNodes[E],{display:L}),m=this.infiniteRowVisibility(!0)||this.freezeRows,l=t.getDataRows());else{const N=t.getContent().querySelector("."+zs).querySelector(Si);D=E=E-s-this.parent.getFrozenLeftColumnsCount(),ht(N.childNodes[E],{display:L}),l=t.getMovableDataRows(),m=this.infiniteRowVisibility()||this.movableRows}else ht(this.getColGroup().childNodes[E],{display:L});a||(this.setDisplayNone(l,D,L,m),i&&this.parent.notify(Rp,{case:"refreshHeight",isModeChg:!0})),!this.parent.invokedFromMedia&&w.hideAtMedia&&this.parent.updateMediaColumns(w),this.parent.invokedFromMedia=!1}a?this.refreshContentRows({requestType:"refresh"}):this.parent.getFrozenColumns()?(this.parent.notify(YP,{rows:this.freezeRows,args:{isFrozen:!0,rows:this.freezeRows}}),this.parent.notify(YP,{rows:this.movableRows,args:{isFrozen:!1,rows:this.movableRows}})):this.parent.notify(YP,{rows:m,args:{}})}setDisplayNone(e,t,i,s){(function xpe(n,e,t,i,s,r){const o=Object.keys(n);for(let a=0;a<o.length;a++){const l=n[o[a]].querySelectorAll("td.e-rowcell")[e];if(n[o[a]].querySelectorAll("td.e-rowcell").length&&l)if(ht(n[o[a]].querySelectorAll("td.e-rowcell")[e],{display:t}),n[o[a]].querySelectorAll("td.e-rowcell")[e].classList.contains("e-hide")&&W([n[o[a]].querySelectorAll("td.e-rowcell")[e]],["e-hide"]),r&&s.isRowDragable()){const h=s.getFrozenColumns()?e:e+1;i[o[a]].cells[h].visible=""===t}else i[o[a]].cells[e].visible=""===t}})(e,t,i,s,this.parent,this.parent.isRowDragable()),this.parent.notify("infinite-show-hide",{visible:i,index:t,isFreeze:this.isInfiniteFreeze})}infiniteRowVisibility(e){let t;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=e,t=this.parent.infiniteScrollSettings.enableCache?e?this.getCurrentBlockInfiniteRecords(!0):this.getCurrentBlockInfiniteRecords():e?this.visibleFrozenRows:this.visibleRows),t}colGroupRefresh(){if(this.getColGroup()){let e;e=this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()?this.parent.getMovableVirtualHeader().querySelector(Si).cloneNode(!0):this.getHeaderColGroup(),this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)}}getHeaderColGroup(){return this.parent.element.querySelector("."+to).querySelector(Si).cloneNode(!0)}initializeContentDrop(){this.droppable=new tg(this.parent.element,{accept:".e-dragclone",drop:this.drop})}droppableDestroy(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()}canSkip(e,t,i){return f(t)||f(e.visible)||t.cells[i].visible===e.visible}getModelGenerator(){return this.generator=this.parent.allowGrouping?new v3(this.parent):new Uf(this.parent)}renderEmpty(e){this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(Je).innerHTML="")}setSelection(e,t,i){this.parent.notify("set-freeze-selection",{uid:e,set:t,clearAll:i});const s=this.parent.isFrozenGrid();if(s&&this.parent.enableVirtualization)return;if(s){const o=this.getMovableRows().filter(a=>i||e===a.uid);for(let a=0;a<o.length;a++)o[a].isSelected=t}const r=this.getRows().filter(o=>i||e===o.uid);for(let o=0;o<r.length;o++){r[o].isSelected=t;const a=r[o].cells;for(let l=0;l<a.length;l++)a[l].isSelected=t}}getRowByIndex(e){return e=this.getInfiniteRowIndex(e),this.parent.getDataRows()[e]}getInfiniteRowIndex(e){if(this.parent.infiniteScrollSettings.enableCache){const t=this.parent.frozenRows,i=t>e?0:t,s=parseInt(this.parent.getRows()[i].getAttribute(Di),10);e=t>e?e:e-s+t}return e}getVirtualRowIndex(e){return e}getMovableRowByIndex(e){return e=this.getInfiniteRowIndex(e),this.parent.getMovableDataRows()[e]}enableAfterRender(e){"group"===e.module&&e.enable&&(this.generator=this.getModelGenerator())}setRowObjects(e){this.rows=e}immutableModeRendering(e={}){const t=this.parent;t.hideSpinner();const i=t.getPrimaryKeyFieldNames()[0],s={},r={},o=[],a={},l=t.getRowsObject().slice(),h=this.getBatchEditedRecords(i,l),c={},m=0!==Object.keys(h).length;if(t.getContent().querySelector(".e-emptyrow")||"reorder"===e.requestType||this.parent.groupSettings.columns.length)this.refreshContentRows(e);else{if(0===t.currentViewData.length)return;const b={},v=t.createElement(Je,{attrs:{role:"rowgroup"}}),w=t.currentViewData,E=[].slice.call(this.getTable().querySelector(Je).children);if(this.prevCurrentView.length){const D=this.prevCurrentView.length,L=w.length;if(D===L)for(let N=0;N<L;N++)"Batch"===this.parent.editSettings.mode&&E[N].classList.contains("e-insertedrow")?(E.splice(N,1),--N):(r[w[N][i]]=s[this.prevCurrentView[N][i]]=N,c[N]=w[N][i],b[l[N].uid]=E[N],a[N]=this.prevCurrentView[N][i]);else{for(let N=0;N<L;N++)r[w[N][i]]=N,c[N]=w[N][i];for(let N=0;N<D;N++)"Batch"===this.parent.editSettings.mode&&E[N].classList.contains("e-insertedrow")?(E.splice(N,1),--N):(b[l[N].uid]=E[N],s[this.prevCurrentView[N][i]]=N,a[N]=this.prevCurrentView[N][i])}}for(let D=0;D<w.length;D++){const L=s[w[D][i]];if(f(L)){const N=new od(this.serviceLocator,null,t),V=this.generator.generateRows([w[D]]);o.push(V[0]);const $=N.render(V[0],t.getColumns());v.appendChild($),this.refreshImmutableContent(D,$,o[D])}else{let N=!1;this.parent.enableDeepCompare&&(N=this.objectEqualityChecker(this.prevCurrentView[L],w[D]));const V=b[l[L].uid];if(o.push(l[L]),this.rowElements[L]&&this.rowElements[L].getAttribute("data-uid")===o[D].uid&&(m&&f(h[c[D]])||!m&&(N||this.prevCurrentView[L]===w[D]))){L!==D&&this.refreshImmutableContent(D,V,o[D]),v.appendChild(V);continue}(m&&!f(h[c[D]])||!this.parent.enableDeepCompare&&w[D]!==this.prevCurrentView[L]||this.parent.enableDeepCompare&&!N)&&l[L].setRowValue(w[D]),v.appendChild(V),this.refreshImmutableContent(D,V,o[D])}}if(this.rows=o,this.rowElements=[].slice.call(v.children),Yt(this.getTable().querySelector(Je)),this.getTable().appendChild(v),this.parent.trigger(Dc,{},()=>{this.parent.allowTextWrap&&this.parent.notify(Rp,{case:"textwrap"})}),e){const D=(e.requestType||"").toLowerCase()+"-complete";this.parent.notify(D,e)}}}objectEqualityChecker(e,t){const i=Object.keys(e);let s=!0;for(let r=0;r<i.length;r++)if(!(e[i[r]]===t[i[r]]||e[i[r]]instanceof Date&&t[i[r]]instanceof Date&&e[i[r]].getTime()===t[i[r]].getTime())){s=!1;break}return s}getBatchEditedRecords(e,t){const i={},s=this.parent.getBatchChanges();let r=[],o=[];Object.keys(s).length&&(r=s.changedRecords,o=s.addedRecords);const a={cancel:!1};this.parent.notify("immutable-batch-cancel",{rows:t,args:a}),o.length&&("Bottom"===this.parent.editSettings.newRowPosition?t.splice(t.length-1,o.length):a.cancel||t.splice(0,o.length));for(let l=0;l<r.length;l++)i[r[l][e]]=l;return i}refreshImmutableContent(e,t,i){i.isAltRow=!!this.parent.enableAltRow&&e%2!=0,i.isAltRow?t.classList.add("e-altrow"):t.classList.remove("e-altrow"),i.index=e,i.edit=void 0,i.isDirty=!1,t.setAttribute(Di,e.toString()),this.updateCellIndex(t,e)}updateCellIndex(e,t){for(let i=0;i<e.cells.length;i++)e.cells[i].setAttribute("index",t.toString())}}class Jue{constructor(e,t){this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=i=>{const s=this.parent,r=this.draggable.currentStateTarget,o=Te(r,"e-headercell");if(!s.allowReordering&&!s.allowGrouping||!f(o)&&o.getElementsByClassName("e-checkselectall").length>0)return!1;const a=this.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),l=r.classList.contains("e-headercell")?r:o;if(!l||!s.allowReordering&&l.classList.contains("e-stackedheadercell"))return!1;const h=l.offsetHeight,c=l.querySelector(".e-headercelldiv")||l.querySelector(".e-stackedheadercelldiv");let m;if(c){if(m=l.querySelector(".e-stackedheadercelldiv")?s.getStackedHeaderColumnByHeaderText(c.innerText.trim(),s.columns):s.getColumnByUid(c.getAttribute("e-mappinguid")),this.column=m,this.column.lockColumn)return!1;a.setAttribute("e-mappinguid",this.column.uid)}if(m&&!f(m.headerTemplate))if(f(m.headerTemplate))a.innerHTML=m.headerTemplate;else{const b=s.getColumnIndexByField(m.field);Aa(a,m.getHeaderTemplate()(Ae({index:b},m),s,"headerTemplate"))}else a.innerHTML=c?m.headerText:l.firstElementChild.innerHTML;return a.style.width=l.offsetWidth+"px",a.style.height=l.offsetHeight+"px",a.style.lineHeight=(h-6).toString()+"px",s.element.appendChild(a),a},this.dragStart=i=>{const s=this.parent;s.element.querySelector(".e-gridpopup").style.display="none",s.notify("columnDragStart",{target:this.draggable.currentStateTarget,column:this.column,event:i.event})},this.drag=i=>{const s=this.parent,r=i.target;if(r){const o=B(r,".e-grid"),a=this.parent.element.querySelector(".e-cloneproperties");if(!(o&&o.getAttribute("id")===s.element.getAttribute("id")||(Bi(a,["e-notallowedcur"],["e-defaultcur"]),s.allowReordering&&(s.element.querySelector(".e-reorderuparrow").style.display="none",s.element.querySelector(".e-reorderdownarrow").style.display="none"),s.groupSettings.allowReordering)))return;s.notify("columnDrag",{target:i.target,column:this.column,event:i.event})}},this.dragStop=i=>{const s=this.parent;let r;s.element.querySelector(".e-gridpopup").style.display="none",(!Te(i.target,"e-headercell")&&!Te(i.target,"e-groupdroparea")||!s.allowReordering&&Te(i.target,"e-headercell")||!i.helper.getAttribute("e-mappinguid")&&Te(i.target,"e-groupdroparea"))&&(Yt(i.helper),r=!0),s.notify("column-drag-stop",{target:i.target,event:i.event,column:this.column,cancel:r})},this.drop=i=>{const s=this.parent,r=i.droppedElement.getAttribute("e-mappinguid"),o=B(i.target,".e-grid");Yt(i.droppedElement),!(o&&o.getAttribute("id")!==s.element.getAttribute("id")||!s.allowReordering&&!s.allowGrouping)&&s.notify("header-drop",{target:i.target,uid:r,droppedElement:i.droppedElement})},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.getFrozenLeftColumnsCount()&&!this.parent.getFrozenRightColumnsCount()&&this.parent.on(kp,this.setVisible,this),this.parent.on(p1,this.colPosRefresh,this),this.parent.on(Bl,this.renderCustomToolbar,this),"Vertical"===this.parent.rowRenderingMode&&this.parent.on(Rn,this.updateCustomResponsiveToolbar,this))}renderPanel(){let e=this.parent.element.querySelector("."+to);const t=null!=e;e=t?e:this.parent.createElement("div",{className:"e-gridheader"});const i=t?e.querySelector("."+Hr):this.parent.createElement("div",{className:Hr});this.toggleStackClass(e),e.appendChild(i),this.setPanel(e),t||this.parent.element.appendChild(e)}renderTable(){const e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector("."+tn)),!this.parent.getFrozenColumns()&&!this.parent.getFrozenRightColumnsCount()&&!this.parent.getFrozenLeftColumnsCount()&&(this.initializeHeaderDrag(),this.initializeHeaderDrop()),this.parent.notify(Go,{rows:this.rows,args:{isFrozen:this.parent.isFrozenGrid()}})}getPanel(){return this.headerPanel}setPanel(e){this.headerPanel=e}getTable(){return this.headerTable}setTable(e){this.headerTable=e}getColGroup(){return this.colgroup}setColGroup(e){return this.colgroup=e}getRows(){return this.getTable().tHead.rows}createHeaderTable(){const e=this.createTable(),t=this.getPanel().querySelector("."+Hr);return t.appendChild(e),t}createHeader(e=null,t){const i=this.parent,s=i.isFrozenGrid();this.getTable()&&!s&&Yt(this.getTable());const r=this.parent.createElement("table",{className:tn,attrs:{cellspacing:"0.25px",role:"grid"}}),o=t||(i.getFrozenLeftCount()?"frozen-left":"frozen-right"),a=this.createHeaderContent(o),l=a.thead,h=this.parent.createElement(Je,{className:this.parent.frozenRows?"":"e-hide",attrs:{role:"rowgroup"}});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});const c=this.parent.createElement(Si),m=this.parent.createElement("tr",{attrs:{role:"row"}});let b;const v=this.rows=a.rows;for(let w=0,E=v.length;w<E;w++)for(let D=0,L=v[w].cells.length;D<L;D++)b=this.parent.createElement("td"),m.appendChild(b);return(i.allowFiltering||i.allowSorting||i.allowGrouping)&&r.classList.add("e-sortfilter"),this.updateColGroup(c),h.appendChild(m),r.appendChild(this.setColGroup(c)),r.appendChild(l),r.appendChild(h),r.appendChild(this.caption),this.ariaService.setOptions(r,{colcount:i.getColumns().length.toString()}),r}createTable(e=null){return this.createHeader(e)}createHeaderContent(e){const t=this.parent;let i=1;const s=t.getFrozenMode(),r=t.getColumns(),o=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),a=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),l=new od(this.serviceLocator,Pt.Header,t);l.element=a;let c,h=[];this.colDepth=function R3(n){let e=0;for(let t=0;t<n.length;t++){const i=vpe(n[t],0);e<i&&(e=i)}return e+1}(t.columns);for(let v=0,w=this.colDepth;v<w;v++)h[v]=this.generateRow(v),h[v].cells=[];"Right"!==s&&(h=this.ensureColumns(h)),h=this.getHeaderCells(h,e),"Right"===s&&(i=0,h=this.ensureColumns(h));const m=this.parent.getFrozenColumns();if(this.parent.isRowDragable()&&this.parent.isFrozenGrid()&&h[0].cells[i]){const v=h[0].cells[i].column.getFreezeTableName();"movable"===v||s===Zt&&v===an?"Right"===s?h[0].cells.pop():h[0].cells.shift():m||v!==or?"Right"===s&&v===an&&(h[0].cells[h[0].cells.length-1].column.freeze="Right"):h[0].cells[0].column.freeze=v===or?"Left":"Right"}for(let v=0,w=this.colDepth;v<w;v++)c=l.render(h[v],r),this.parent.rowHeight&&c.querySelector(".e-headercell")&&(c.style.height=this.parent.rowHeight+"px"),o.appendChild(c);return{thead:o,rows:h}}updateColGroup(e){let i,t=this.parent.getColumns();const s=this.parent.getColumnIndexesInView();if(this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()&&(t=Ae([],this.parent.getColumns()),t.splice(0,this.parent.getFrozenColumns())),e.id=this.parent.element.id+Si,this.parent.allowGrouping)for(let r=0,o=this.parent.groupSettings.columns.length;r<o;r++)this.parent.enableColumnVirtualization&&-1===s.indexOf(r)||(i=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(i));(this.parent.detailTemplate||this.parent.childGrid)&&(i=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(i)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(i));for(let r=0,o=t.length;r<o;r++)i=this.parent.createElement("col"),!1===t[r].visible&&ht(i,{display:"none"}),e.appendChild(i);return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(i)),e}ensureColumns(e){const t=this.parent,i=this.parent.getColumnIndexesInView();for(let s=0,r=e.length;s<r;s++){if(t.allowGrouping)for(let o=0,a=t.groupSettings.columns.length;o<a;o++)this.parent.enableColumnVirtualization&&-1===i.indexOf(o)||e[s].cells.push(this.generateCell({},Pt.HeaderIndent));if(t.detailTemplate||t.childGrid){const o={};this.parent.notify(Mue,o),e[s].cells.push(this.generateCell(o,Pt.DetailHeader))}t.isRowDragable()&&e[s].cells.push(this.generateCell({},Pt.RowDragHIcon))}return e}getHeaderCells(e,t){const i=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),s=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(let r=0;r<s.length;r++)this.lockColsRendered=!1,e=this.appendCells(s[r],e,0,0===r,!1,r===s.length-1,i,t,!1);for(let r=0,o=s.length;r<o;r++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(s[r],e,0,0===r,!1,r===o-1,i,t,!1);return e}appendCells(e,t,i,s,r,o,a,l,h){const c=o?h?"e-laststackcell":"e-lastcell":"",m=this.parent.isFrozenGrid(),b=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered,v=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered,w=this.parent.getContent().querySelector(".e-movablescrollbar");let E;if(m&&w&&this.parent.enableColumnVirtualization&&(E=w.scrollLeft),e.columns){this.isFirstCol=!1;const D=this.getCellCnt(e,0);if(D){const L=this.getStackedLockColsCount(e,0),N=0===this.parent.lockcolPositionCount||!this.lockColsRendered&&0!==L||this.lockColsRendered&&D-L!=0,V=m&&this.ensureStackedFrozen(e.columns,l,!1);(!m&&N||V)&&t[i].cells.push(new nd({cellType:Pt.StackedHeader,column:e,colSpan:this.getColSpan(D,L,e.columns,l,m),className:s?"":r?"e-firstcell":""}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(let L=0;L<e.columns.length;L++)t=this.appendCells(e.columns[L],t,i+1,s,0===L,L===e.columns.length-1&&o,a,l,!1);if(this.lockColsRendered)for(let L=0,N=e.columns.length;L<N;L++){s=s&&0===L;const V=this.isFirstCol=e.columns[L].visible&&!s,$=L===N-1&&o;t=this.appendCells(e.columns[L],t,i+1,s,V&&!$,$,a,l,!0)}}else(E&&E>0&&this.parent.contentModule.isXaxis()&&0!==this.parent.inViewIndexes[0]&&"movable"===e.getFreezeTableName()||!m&&b||m&&e.getFreezeTableName()===l&&v)&&t[i].cells.push(this.generateCell(e,Pt.Header,this.colDepth-i,(s?"":r?"e-firstcell":"")+c,i,this.parent.getColumnIndexByUid(e.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;return t}ensureStackedFrozen(e,t,i){const s=e.length;for(let r=0;r<s;r++)if(e[r].columns)i=this.ensureStackedFrozen(e[r].columns,t,i);else if(e[r].getFreezeTableName()===t){i=!0;break}return i}getStackedLockColsCount(e,t){if(e.columns)for(let i=0;i<e.columns.length;i++)t=this.getStackedLockColsCount(e.columns[i],t);else e.lockColumn&&t++;return t}getColSpan(e,t,i,s,r){return r?e=this.getFrozenColSpan(i,s,0):this.parent.lockcolPositionCount&&(e=this.lockColsRendered?e-t:t),e}getFrozenColSpan(e,t,i){const s=e.length;for(let r=0;r<s;r++)e[r].columns?i=this.getFrozenColSpan(e[r].columns,t,i):e[r].getFreezeTableName()===t&&e[r].visible&&i++;return i}generateRow(e){return new Ap({})}generateCell(e,t,i,s,r,o){const a={visible:e.visible,isDataCell:!1,isTemplate:!f(e.headerTemplate),rowID:"",column:e,cellType:t,rowSpan:i,className:s,index:r,colIndex:o};return(!a.rowSpan||a.rowSpan<2)&&delete a.rowSpan,new nd(a)}setVisible(e){const t=this.parent;let i,s;const r=t.getFrozenColumns();for(let o=0,a=e.length;o<a;o++){const l=e[o];if(s=t.getNormalizedColumnIndex(l.uid),i=l.visible?"":"none",r){const h=this.parent.isRowDragable()?r+1:r;ht(s<h?this.getColGroup().children[s]:t.getHeaderContent().querySelector("."+js).querySelector(Si).children[s-h],{display:i})}else ht(this.getColGroup().children[s],{display:i})}this.refreshUI()}colPosRefresh(){this.refreshUI()}refreshUI(){const e=this.parent.isFrozenGrid(),t=this.parent.enableColumnVirtualization&&e,i=this.getPanel();this.toggleStackClass(i);let s=this.freezeReorder?this.headerPanel.querySelector("."+js).querySelector("."+tn):this.getTable(),r=this.parent.isFrozenGrid()?this.parent.getFrozenLeftCount()?"frozen-left":"frozen-right":void 0;if(t&&(s=this.parent.contentModule.getVirtualFreezeHeader(),r=this.parent.contentModule.isXaxis()?"movable":r),s){Yt(s),s.removeChild(s.firstChild),s.removeChild(s.childNodes[0]);const o=this.parent.createElement(Si),a=this.createHeaderContent(r);this.rows=a.rows,s.insertBefore(a.thead,s.firstChild),this.updateColGroup(o),s.insertBefore(this.setColGroup(o),s.firstChild),t||this.setTable(s),this.appendContent(s),this.parent.notify(Jj,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),(!e||this.parent.enableColumnVirtualization&&e)&&this.initializeHeaderDrag();const l=[].slice.call(i.querySelectorAll("tr.e-columnheader"));for(const h of l){const c=[].slice.call(h.getElementsByClassName("e-grouptopleftcell"));c.length&&c[c.length-1].classList.add("e-lastgrouptopleftcell")}e||this.parent.notify(Go,{rows:this.rows,args:{isFrozen:e}}),this.parent.enableColumnVirtualization&&Te(s,js)&&this.parent.notify(Go,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&Kd(l,!0)}}toggleStackClass(e){this.parent.columns.some(s=>!f(s.columns))?e.classList.add("e-stackedheader"):e.classList.remove("e-stackedheader")}appendContent(e){this.getPanel().querySelector("."+Hr).appendChild(e)}getCellCnt(e,t){if(e.columns)for(let i=0,s=e.columns.length;i<s;i++)t=this.getCellCnt(e.columns[i],t);else e.visible&&t++;return t}initializeHeaderDrag(){!(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)||(this.draggable=new vn(this.parent.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}))}initializeHeaderDrop(){new tg(this.parent.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})}renderCustomToolbar(){const e=this.parent;if("Vertical"===e.rowRenderingMode&&!e.toolbar&&(e.allowSorting||e.allowFiltering&&"FilterBar"!==e.filterSettings.type)){const t=e.createElement("div",{className:"e-res-toolbar e-toolbar"}),i=e.createElement("div",{className:"e-toolbar-items"}),s=e.createElement("div",{className:"e-toolbar-left"}),r=this.parent.allowFiltering&&this.parent.allowSorting?2:1;for(let o=0;o<r;o++){const a=e.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),l=1===r?this.parent.allowSorting?"sort":"filter":1===o?"sort":"filter",h=e.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),c=e.createElement("span",{className:"e-btn-icon e-res"+l+"-icon e-icons"});h.appendChild(c),new Sa({}).appendTo(h),h.onclick=b=>{b.target.classList.contains("e-ressort-btn")||b.target.classList.contains("e-ressort-icon")?this.parent.showResponsiveCustomSort():this.parent.showResponsiveCustomFilter()},a.appendChild(h),s.appendChild(a)}i.appendChild(s),t.appendChild(i),e.element.insertBefore(t,this.parent.element.querySelector("."+to))}else e.enableAdaptiveUI&&!e.toolbar&&e.getContent().classList.add("e-responsive-header")}updateCustomResponsiveToolbar(e){const t=this.parent.element.querySelector(".e-responsive-toolbar");"toolbar"===e.module&&(t?Yt(t):this.renderCustomToolbar())}}class Bu{constructor(e,t){this.localizer=t.getService("localization"),this.formatter=t.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:Ji,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":"checkbox"}})}getGui(){return""}format(e,t,i){return f(e.format)||("number"===e.type&&isNaN(parseInt(t,10))&&(t=null),t=this.formatter.toView(t,e.getFormatter())),f(t)?"":t.toString()}evaluate(e,t,i,s,r,o){let a;if(t.column.template){const l=this.parent.isReact&&"string"!=typeof t.column.template,h=["index"],c=k3({},i,{[Iue]:r,column:t.column}),m=this.parent.element.id+t.column.uid,b="isStringTemplate";if(l){const v={index:s[h[0]]};t.column.getColumnTemplate()(Ae(v,c),this.parent,"columnTemplate",m,this.parent[b],null,e),this.parent.renderTemplates()}else a=t.column.getColumnTemplate()(Ae({index:s[h[0]]},c),this.parent,"template",m,this.parent[b],void 0,void 0,this.parent.root);return l||Aa(e,a),this.parent.notify("template-result",{template:a}),a=null,e.setAttribute("aria-label",e.innerText+" is template cell column header "+t.column.headerText),!1}return!0}invokeFormatter(e,t,i){return f(e.formatter)||(t=function jPe(n,e){return n.prototype&&e in n.prototype}(e.formatter,"getValue")?(new(0,e.formatter)).getValue(e,i):"function"==typeof e.formatter?e.formatter(e,i):e.formatter.getValue(e,i)),t}render(e,t,i,s,r){return this.refreshCell(e,t,i,r)}refreshTD(e,t,i,s){const r="Batch"===this.parent.editSettings.mode&&e.classList.contains("e-editedbatchcell");if(this.parent.isReact){e.innerHTML="";const o=e.cellIndex,a=e.parentElement;Yt(e);const l=this.refreshCell(t,i,s,r);this.cloneAttributes(l,e),a.cells.length!==o-1?a.insertBefore(l,a.cells[o]):a.appendChild(l)}else{const o=this.refreshCell(t,i,s,r);e.innerHTML="",e.setAttribute("aria-label",o.getAttribute("aria-label"));const a=[].slice.call(o.childNodes);for(const l of a)e.appendChild(l)}}cloneAttributes(e,t){const i=t.attributes;let r,s=i.length;for(;s--;)r=i[s],e.setAttribute(r.name,r.value)}refreshCell(e,t,i,s){const r=this.element.cloneNode(),o=e.column;let a;e.isForeignKey&&(a=e.foreignKeyData[0]||{[o.foreignKeyValue]:o.format?null:""});let l=this.getGui(),h=e.isForeignKey?this.getValue(o.foreignKeyValue,a,o):this.getValue(o.field,t,o);if(("date"===o.type||"datetime"===o.type)&&!f(h)&&(h=new Date(h)),h=this.format(o,h,t),l=h.toString(),"boolean"===o.type&&!o.displayAsCheckBox){const m="true"!==h&&"false"!==h?null:"true"===h?"True":"False";l=m?this.localizer.getConstant(m):l}const c=this.invokeFormatter(o,h,t);if(l=f(o.formatter)?l:f(c)?"":c.toString(),r.setAttribute("aria-label",l+" column header "+e.column.headerText),this.evaluate(r,e,t,i,a,s)&&"checkbox"!==o.type)this.appendHtml(r,l,o.getDomSetter?o.getDomSetter():"innerHTML");else if("checkbox"===o.type){r.classList.add(R_),r.setAttribute("aria-label","checkbox"),h=!!this.parent.selectionSettings.persistSelection&&"true"===h;const m=Vw(this.parent.createElement,!1,{checked:h,label:" "});this.rowChkBox.id="checkbox-"+e.rowID,m.insertBefore(this.rowChkBox.cloneNode(),m.firstChild),r.appendChild(m)}if("Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(r,e,i),"boolean"===o.type&&o.displayAsCheckBox){const m=isNaN(parseInt(h.toString(),10))?"true"===h:parseInt(h.toString(),10)>0,b=Vw(this.parent.createElement,!1,{checked:m,label:" "});r.innerHTML="",b.classList.add("e-checkbox-disabled"),r.appendChild(b),r.setAttribute("aria-label",m+" column header "+e.column.headerText)}return r}appendHtml(e,t,i="innerHTML"){return e[i]=t,e}setAttributes(e,t,i){const s=t.column;this.buildAttributeFromCell(e,t,"checkbox"===s.type),_g(e,i),_g(e,t.attributes),s.customAttributes&&_g(e,s.customAttributes),"Vertical"===this.parent.rowRenderingMode&&_g(e,{"data-cell":s.headerText}),s.textAlign&&(e.style.textAlign=s.textAlign),"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?e.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==s.type&&e.classList.add("e-ellipsistooltip")}buildAttributeFromCell(e,t,i){const s={},o=[];t.colSpan&&(s.colSpan=t.colSpan),t.rowSpan&&(s.rowSpan=t.rowSpan),t.isTemplate&&o.push("e-templatecell"),t.isSelected&&(o.push("e-selectionbackground","e-active"),i&&e.querySelector(".e-frame").classList.add("e-check")),t.isColumnSelected&&o.push("e-columnselection"),t.cellType===Pt.Header?s["aria-colindex"]=t.colIndex:f(t.index)||(s["aria-colindex"]=t.index),t.visible||o.push("e-hide"),s.class=o,_g(e,s)}getValue(e,t,i){return i.valueAccessor(e,t,i)}}class nF{setOptions(e,t){const i=Object.keys(t);for(let s=0;s<i.length;s++)L_(e,M_[i[s]],t[i[s]])}setExpand(e,t){L_(e,M_.expand,t)}setSort(e,t){L_(e,M_.sort,t,"boolean"==typeof t)}setBusy(e,t){L_(e,M_.busy,t),L_(e,M_.invalid,null,!0)}setGrabbed(e,t,i){L_(e,M_.grabbed,t,i)}setDropTarget(e,t){L_(e,M_.dropeffect,"copy",!t)}}function L_(n,e,t,i){i&&n?n.removeAttribute(e):n&&n.setAttribute(e,t)}const M_={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"};class epe extends Bu{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-headercell",attrs:{role:"columnheader",tabindex:"-1"}}),this.ariaService=new nF,this.hTxtEle=this.parent.createElement("span",{className:"e-headertext"}),this.sortEle=this.parent.createElement("div",{className:"e-sortfilterdiv e-icons"}),this.gui=this.parent.createElement("div"),this.chkAllBox=this.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":"checkbox"}})}getGui(){return this.gui.cloneNode()}render(e,t,i){const s=this.element.cloneNode(),r=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,s,r)}refresh(e,t){this.clean(t);const i=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,t,i)}clean(e){e.innerHTML=""}prepareHeader(e,t,i){const s=e.column,r={},o=this.getGui();let a,l;if(Rt(o,{"e-mappinguid":s.uid,class:"e-headercelldiv"}),f(s.headerValueAccessor)||(a=this.getValue(s.headerText,s)),"checkbox"!==s.type){let m=s.headerText;f(a)||(m=a);const b=this.hTxtEle.cloneNode();b[s.getDomSetter()]=m,o.appendChild(b)}else{s.editType="booleanedit";const m=Vw(this.parent.createElement,!1,{checked:!1,label:" "});this.chkAllBox.id="checkbox-"+s.uid,m.insertBefore(this.chkAllBox.cloneNode(),m.firstChild),o.appendChild(m),o.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(t,e),this.appendHtml(t,o),t.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&s.allowFiltering&&!f(s.field)&&(!this.parent.showColumnMenu||!s.showColumnMenu)){Rt(i,{"e-mappinguid":"e-flmenu-"+s.uid}),t.classList.add("e-fltr-icon");const m=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==m.length){const b=this.parent.getForeignKeyColumns();for(let v=0;v<this.parent.columns.length;v++)for(let w=0;w<this.parent.filterSettings.columns.length;w++)if(this.parent.filterSettings.columns[w].field===s.field||b.length&&s.foreignKeyValue===this.parent.filterSettings.columns[w].field){i.classList.add("e-filtered"),m.push(s.field);break}}t.appendChild(i.cloneNode())}e.className&&t.classList.add(e.className),s.customAttributes&&_g(t,s.customAttributes),s.allowSorting&&(r.sort="none"),s.allowGrouping&&(r.grabbed=!1),t=this.extendPrepareHeader(s,t);const h=this.parent,c=h.getColumnIndexByField(s.field);if(!f(s.headerTemplate)){const m=h.element.id+s.uid+"headerTemplate",b="isStringTemplate",v=s;if(this.parent.isReact&&"string"!=typeof s.headerTemplate){const E={index:c};t.firstElementChild.innerHTML="",s.getHeaderTemplate()(Ae(E,v),h,"headerTemplate",m,this.parent[b],null,t.firstElementChild),this.parent.renderTemplates()}else l=s.getHeaderTemplate()(Ae({index:c},v),h,"headerTemplate",m,this.parent[b],void 0,void 0,this.parent.root),t.firstElementChild.innerHTML="",Aa(t.firstElementChild,l)}if(this.ariaService.setOptions(t,r),!f(s.headerTextAlign)||!f(s.textAlign)){const m=s.headerTextAlign||s.textAlign;o.style.textAlign=m,"Right"===m||"Left"===m?t.classList.add("Right"===m?"e-rightalign":"e-leftalign"):"Center"===m&&t.classList.add("e-centeralign")}return"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?t.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==s.type&&t.classList.add("e-ellipsistooltip"),t.setAttribute("aria-rowspan",(f(e.rowSpan)?1:e.rowSpan).toString()),t.setAttribute("aria-colspan","1"),this.parent.trigger(Jde,{cell:e,node:t}),t}getValue(e,t){return t.headerValueAccessor(e,t)}extendPrepareHeader(e,t){if(this.parent.showColumnMenu&&e.showColumnMenu&&!f(e.field)){const i=this.parent.createElement("div",{className:"e-icons e-columnmenu"}),s=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==s.length)for(let r=0;r<this.parent.columns.length;r++)for(let o=0;o<this.parent.filterSettings.columns.length;o++)if(this.parent.filterSettings.columns[o].field===e.field){i.classList.add("e-filtered"),s.push(e.field);break}t.classList.add("e-fltr-icon"),t.appendChild(i)}if(this.parent.allowResizing){const i=this.parent.createElement("div");i.className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",t.appendChild(i)}return t}appendHtml(e,t){return e.appendChild(t),e}}class tpe extends Bu{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{role:"columnheader",tabindex:"-1"}})}render(e,t,i){const s=this.element.cloneNode(),r=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":e.column.uid}}),o=e.column;if(s.appendChild(r),f(o.headerTemplate)?this.appendHtml(r,o.headerText,o.getDomSetter()):Aa(r,o.getHeaderTemplate()(o,this.parent,"headerTemplate")),e.column.toolTip&&s.setAttribute("title",e.column.toolTip),"Clip"===o.clipMode||!o.clipMode&&"Clip"===this.parent.clipMode?s.classList.add("e-gridclip"):("EllipsisWithTooltip"===o.clipMode||!o.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&s.classList.add("e-ellipsistooltip"),f(e.column.textAlign)||(r.style.textAlign=e.column.textAlign),e.column.customAttributes&&_g(s,e.column.customAttributes),s.setAttribute("colspan",e.colSpan.toString()),s.setAttribute("aria-colspan",e.colSpan.toString()),s.setAttribute("aria-rowspan","1"),this.parent.allowResizing){const a=this.parent.createElement("div");a.className=e.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",s.appendChild(a)}return e.className&&s.classList.add(e.className),this.parent.trigger(Jde,{cell:e,node:s}),s}}class wZ extends Bu{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-indentcell"})}render(e,t){const i=this.element.cloneNode();return _g(i,e.attributes),i}}class vPe extends Bu{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:this.parent.element.id+"captioncell",role:"gridcell",tabindex:"-1"}})}render(e,t){const i=this.element.cloneNode(),s=this.parent;let r,o,a;t.headerText=e.column.headerText,e.isForeignKey&&(o=this.format(e.column,e.column.valueAccessor("foreignKey",t,e.column)));const l=e.isForeignKey?o:e.column.enableGroupByFormat?t.key:this.format(e.column,e.column.valueAccessor("key",t,e.column));for(var h=0;h<s.aggregates.length;h++)for(var c=0;c<s.aggregates[h].columns.length;c++)if(s.getVisibleColumns()[0].field==s.aggregates[h].columns[c].field&&s.aggregates[h].columns[c].groupCaptionTemplate){a=s.aggregates[h].columns[c].groupCaptionTemplate.includes("$")?s.aggregates[h].columns[c].groupCaptionTemplate.split("$")[0]+t[s.getVisibleColumns()[0].field][s.aggregates[h].columns[c].type]+s.aggregates[h].columns[c].groupCaptionTemplate.split("}")[1]:s.aggregates[h].columns[c].groupCaptionTemplate;break}if(f(s.groupSettings.captionTemplate))i.innerHTML=s.groupSettings.enableLazyLoading?e.column.headerText+": "+l+(a?"   "+a:""):e.column.headerText+": "+l+" - "+t.count+" "+this.localizer.getConstant(t.count<2?"Item":"Items")+(a?"   "+a:"");else{const m=this.parent.isReact&&"string"!=typeof s.groupSettings.captionTemplate;if(m){const b=s.element.id+"captionTemplate";Wh(s.groupSettings.captionTemplate)(t,this.parent,"captionTemplate",b,null,null,i),this.parent.renderTemplates()}else r=this.parent.isVue?Wh(s.groupSettings.captionTemplate)(t,this.parent):Wh(s.groupSettings.captionTemplate)(t);m||Aa(i,r)}return i.setAttribute("colspan",e.colSpan.toString()),i.setAttribute("aria-label",i.innerHTML+" is groupcaption cell"),i.setAttribute("title",i.innerHTML),i}}class CPe extends Bu{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-groupcaption"})}render(e,t){const i=this.element.cloneNode();return i.innerHTML="&nbsp;",i.setAttribute("colspan",e.colSpan.toString()),i}}class wPe extends wZ{render(e,t,i,s){const r=this.element.cloneNode();return r.className=s?"e-recordplusexpand":"e-recordpluscollapse",r.setAttribute("ej-mappingname",t.field),r.setAttribute("ej-mappingvalue",t.key),r.setAttribute("aria-expanded",s?"true":"false"),r.setAttribute("tabindex","-1"),r.appendChild(this.parent.createElement("div",{className:s?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow"})),r}}class SPe extends Bu{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-grouptopleftcell"})}render(e,t){const i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),i}}class xPe extends Bu{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-detailheadercell"})}render(e,t){const i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),i}}class EPe extends Bu{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",role:"gridcell",tabindex:"-1"}})}render(e,t,i){const s=this.element.cloneNode();return i&&!f(i.class)?(s.className="",s.className=i.class,s.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow"}))):s.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonalright e-icon-grightarrow"})),s}}class _Pe extends Bu{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{role:"gridcell",tabindex:"-1"}})}render(e,t){const i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon"})),e.isSelected&&(i.classList.add("e-selectionbackground"),i.classList.add("e-active")),i}}class IPe extends Bu{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-rowdragheader"})}render(e,t){const i=this.element.cloneNode();return i.appendChild(Be("div",{className:"e-emptycell"})),i}}class TPe{constructor(e,t){this.emptyGrid=!1,this.counter=0,this.parent=e,this.locator=t,this.data=new yZ(e,t),this.l10n=t.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}render(){const e=this.parent;this.headerRenderer=this.renderer.getRenderer(Br.Header),this.contentRenderer=this.renderer.getRenderer(Br.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),e.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),"auto"!==this.parent.height&&this.parent.scrollModule.setPadding(),this.refreshDataManager()}refresh(e={requestType:"refresh"}){const t=this.parent;t.notify(`${e.requestType}-begin`,e),t.trigger(un,e,(i={requestType:"refresh"})=>{if(i.cancel)t.notify(r3,i);else{if("delete"===i.requestType&&t.allowPaging){const s=i.data.length,r=t.pageSettings.totalRecordsCount-s;!(t.getCurrentViewRecords().length-s)&&r&&(t.pageSettings.currentPage-1)*t.pageSettings.pageSize===r&&(t.prevPageMoving=!0,t.setProperties({pageSettings:{totalRecordsCount:r,currentPage:Math.ceil(r/t.pageSettings.pageSize)}},!0),t.pagerModule.pagerObj.totalRecordsCount=r)}"reorder"===i.requestType&&this.parent.dataSource&&"result"in this.parent.dataSource||("paging"===i.requestType||"columnstate"===i.requestType||"reorder"===i.requestType)&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?this.contentRenderer.refreshContentRows(i):this.refreshDataManager(i)}})}resetTemplates(){const e=this.parent,t=e.getColumns();if(e.detailTemplate){const s=e.element.id+"detailTemplate";Gb[s]=[],ig(s)}e.groupSettings.captionTemplate&&ig(e.element.id+"captionTemplate"),e.rowTemplate&&ig(e.element.id+"rowTemplate"),e.toolbarTemplate&&ig(e.element.id+"toolbarTemplate"),e.pageSettings.template&&ig(e.element.id+"_template");for(let s=0;s<t.length;s++)t[s].template&&(Gb[e.element.id+t[s].uid]=[],ig(e.element.id+t[s].uid)),t[s].headerTemplate&&ig(e.element.id+t[s].uid+"headerTemplate"),t[s].filterTemplate&&ig(e.element.id+t[s].uid+"filterTemplate");const i="guid";for(let s=0;s<e.aggregates.length;s++)for(let r=0;r<e.aggregates[s].columns.length;r++)e.aggregates[s].columns[r].footerTemplate&&ig(e.element.id+e.aggregates[s].columns[r][i]+"footerTemplate"),e.aggregates[s].columns[r].groupFooterTemplate&&ig(e.element.id+e.aggregates[s].columns[r][i]+"groupFooterTemplate"),e.aggregates[s].columns[r].groupCaptionTemplate&&ig(e.element.id+e.aggregates[s].columns[r][i]+"groupCaptionTemplate")}refreshComplete(e){this.parent.trigger(Oi,e)}refreshDataManager(e={}){let t;"virtualscroll"!==e.requestType&&!e.isCaptionCollapse&&this.parent.showSpinner(),this.parent.notify("reset-infinite-blocks",e),this.emptyGrid=!1;const i=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector("."+rr),!0),i){const s=new Ru;t=this.getFData(s,e)}if(t=t?t.then(s=>{const r=this.data.generateQuery().requiresCount();if(this.emptyGrid){const o=new Ru;return o.resolve({result:[],count:0}),o.promise}return this.data.getData(e,r)}):this.data.getData(e,this.data.generateQuery().requiresCount()),this.parent.getForeignKeyColumns().length&&(!i||this.parent.searchSettings.key.length)){const s=new Ru;t=t.then(r=>(this.parent.notify(n3,{dataManager:t,result:r,promise:s,action:e}),s.promise))}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(t=t.then(s=>this.validateGroupRecords(s))),t.then(s=>this.dataManagerSuccess(s,e)).catch(s=>this.dataManagerFailure(s,e))}getFData(e,t){return this.parent.notify(n3,{isComplex:!0,promise:e,action:t}),e.promise}isNeedForeignAction(){const e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())}foreignKey(e){return e.some(t=>{let i=!1;return i=this.parent.filterSettings.columns.some(s=>t.uid===s.uid),!(!i&&!this.parent.searchSettings.key.length)})}sendBulkRequest(e){e.requestType="batchsave";const t=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0],e.original),i=this.data.generateQuery().requiresCount();this.data.dataManager.dataSource.offline?this.refreshDataManager({requestType:"batchsave"}):t.then(s=>{this.data.getData(e,i).then(r=>this.dmSuccess(r,e)).catch(r=>this.dmFailure(r,e))}).catch(s=>this.dmFailure(s,e))}dmSuccess(e,t){this.dataManagerSuccess(e,t)}dmFailure(e,t){this.dataManagerFailure(e,t)}renderEmptyRow(){this.emptyRow(!0)}emptyRow(e){const t=this.parent;let i=this.contentRenderer.getTable().querySelector(Je);f(i)||Yt(i),i=this.parent.createElement(Je,{attrs:{role:"rowgroup"}});let s=0;(t.detailTemplate||t.childGrid)&&++s;const r=this.parent.createElement("tr",{className:"e-emptyrow",attrs:{role:"row"}});r.appendChild(this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(t.getVisibleColumns().length+s+t.groupSettings.columns.length).toString()}})),i.appendChild(r),this.contentRenderer.renderEmpty(i),e&&(this.parent.trigger(Dc,{}),this.parent.notify(zf,{rows:[new Ap({isDataRow:!0,cells:[new nd({isDataCell:!0,visible:!0})]})]}))}dynamicColumnChange(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])}updateColumnType(e){const t=this.parent.getColumns();let i;const s="customFormat",r="equalTo",o=e&&e.items?e.items[0]:e,a=this.locator.getService("valueFormatter");for(let l=0,h=t.length;l<h;l++){i=kr(t[l].field||"",o),f(t[l][s])||(t[l].format=t[l][s]),!f(t[l].validationRules)&&!f(t[l].validationRules[r])&&(t[l].validationRules[r][0]=this.parent.element.id+t[l].validationRules[r][0]),t[l].isForeignColumn()&&t[l].columnData&&(i=kr(t[l].foreignKeyValue||"",t[l].columnData[0])),f(i)?t[l].type=t[l].type||null:(this.isColTypeDef=!0,t[l].type||(t[l].type=i.getDay?i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0?"datetime":"date":typeof i));const c=new __;t[l].format&&(t[l].format.skeleton||t[l].format.format&&"string"==typeof t[l].format.format)&&(t[l].setFormatter(c.getFormatFunction(Ae({},t[l].format))),t[l].setParser(c.getParserFunction(t[l].format))),"string"==typeof t[l].format?mpe(this.locator,t[l]):!t[l].format&&"number"===t[l].type&&t[l].setParser(a.getParserFunction({format:"n2"}))}}dataManagerSuccess(e,t){const i=this.parent;this.contentRenderer=this.renderer.getRenderer(Br.Content),this.headerRenderer=this.renderer.getRenderer(Br.Header),e.actionArgs=t;const s=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&("delete"===t.requestType||"save"===t.requestType&&"add"===this.parent.infiniteScrollModule.requestType);i.trigger("beforeDataBound",e,r=>{if(r.cancel)return;r.result=f(r.result)?[]:r.result;const o=Object.keys(r.result).length;if(!this.parent.isDestroyed){if(!(i.getColumns().length||o||i.columns.length&&i.columns[0]instanceof $d))return void i.hideSpinner();if(this.isInfiniteEnd(t)&&!o)return void this.parent.notify(c3,{e:t,result:e.result,count:e.count,agg:e.aggregates});if(this.parent.isEdit=!1,this.parent.notify("edit-reset",{}),this.parent.notify(g1,{}),this.contentRenderer.prevCurrentView=this.parent.currentViewData.slice(),i.currentViewData=r.result,i.notify("refresh-infinite-current-view-data",{args:t,data:r.result}),!o&&r.count&&i.allowPaging&&t&&"delete"!==t.requestType)return this.parent.groupSettings.enableLazyLoading&&("grouping"===t.requestType||"ungrouping"===t.requestType)&&this.parent.notify("grouping-complete",t),i.prevPageMoving=!0,i.pageSettings.totalRecordsCount=r.count,"paging"!==t.requestType&&(i.pageSettings.currentPage=Math.ceil(r.count/i.pageSettings.pageSize)),void i.dataBind();if((!i.getColumns().length&&o||!this.isLayoutRendered)&&!Dr(i)&&this.updatesOnInitialRender(r),!this.isColTypeDef&&i.getCurrentViewRecords()&&this.updateColumnType(this.data.dataManager.dataSource.offline&&i.dataSource&&i.dataSource.length?i.dataSource[0]:i.getCurrentViewRecords()[0]),!this.parent.isInitialLoad&&this.parent.groupSettings.disablePageWiseAggregates&&!this.parent.groupSettings.columns.length&&(r.result=this.parent.dataSource instanceof Array?this.parent.dataSource:this.parent.currentViewData),(this.parent.isReact||this.parent.isVue)&&!f(t)&&"infiniteScroll"!==t.requestType&&!t.isFrozen&&mF(this.parent,["footerTemplate"]),this.parent.notify(Dp,Ae({count:r.count,result:r.result,aggregates:r.aggregates},t)),(i.groupSettings.columns.length||t&&"ungrouping"===t.requestType)&&t&&"filtering"!==t.requestType&&this.headerRenderer.refreshUI(),o)Dr(i)&&(t.scrollTop={top:this.contentRenderer.content.scrollTop}),s?this.parent.notify(c3,{e:t,result:e.result,count:e.count,agg:e.aggregates}):this.parent.enableImmutableMode?this.contentRenderer.immutableModeRendering(t):this.contentRenderer.refreshContentRows(t);else{if(t&&t.isCaptionCollapse)return;if(!i.getColumns().length)return i.element.innerHTML="",void alert(this.l10n.getConstant("EmptyDataSourceError"));if(this.contentRenderer.setRowElements([]),this.contentRenderer.setRowObjects([]),this.ariaService.setBusy(this.parent.getContent().querySelector("."+rr),!1),this.renderEmptyRow(),t){const a=(t.requestType||"").toLowerCase()+"-complete";this.parent.notify(a,t),"batchsave"===t.requestType&&(t.cancel=!1,t.rows=[],t.isFrozen=0!==this.parent.getFrozenColumns()&&!t.isFrozen,this.parent.trigger(Oi,t))}this.parent.hideSpinner()}this.parent.notify("toolbar-refresh",{}),this.setRowCount(this.parent.getCurrentViewRecords().length),this.parent.getDataModule().isQueryInvokedFromData=!1}})}dataManagerFailure(e,t){this.ariaService.setOptions(this.parent.getContent().querySelector("."+rr),{busy:!1,invalid:!0}),this.setRowCount(1),this.parent.trigger("actionFailure",{error:e}),this.parent.hideSpinner(),"save"!==t.requestType&&"delete"!==t.requestType&&"bulk-save"!==t.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.log("actionfailure",{error:e}))}setRowCount(e){this.ariaService.setOptions(this.parent.getHeaderTable(),{rowcount:e?e.toString():"1"})}isInfiniteEnd(e){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&"delete"===e.requestType}updatesOnInitialRender(e){this.isLayoutRendered=!0,this.parent.columns.length<1&&this.buildColumns(e.result[0]),E1(this.parent.columns,null,this.parent),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(m1,{})}iterateComplexColumns(e,t,i){const s=Object.keys(e);for(let r=0;r<s.length;r++)("object"!=typeof e[s[r]]||!e[s[r]]||e[s[r]]instanceof Date?[]:Object.keys(e[s[r]])).length?this.iterateComplexColumns(e[s[r]],t+(s[r]+"."),i):(i[this.counter]=t+s[r],this.counter++)}buildColumns(e){const t=[],i={};this.iterateComplexColumns(e,"",i);const s=Object.keys(i).filter(r=>"BlazId"!==i[r]).map(r=>i[r]);for(let r=0,o=s.length;r<o;r++)t[r]={field:s[r]},this.parent.enableColumnVirtualization&&(t[r].width=f(t[r].width)?200:t[r].width);this.parent.setProperties({columns:t},!0)}instantiateRenderer(){this.renderer.addRenderer(Br.Header,new Jue(this.parent,this.locator)),this.renderer.addRenderer(Br.Content,new Que(this.parent,this.locator));const e=this.locator.getService("cellRendererFactory");e.addCellRenderer(Pt.Header,new epe(this.parent,this.locator)),e.addCellRenderer(Pt.Data,new Bu(this.parent,this.locator)),e.addCellRenderer(Pt.StackedHeader,new tpe(this.parent,this.locator)),e.addCellRenderer(Pt.Indent,new wZ(this.parent,this.locator)),e.addCellRenderer(Pt.GroupCaption,new vPe(this.parent,this.locator)),e.addCellRenderer(Pt.GroupCaptionEmpty,new CPe(this.parent,this.locator)),e.addCellRenderer(Pt.Expand,new wPe(this.parent,this.locator)),e.addCellRenderer(Pt.HeaderIndent,new SPe(this.parent,this.locator)),e.addCellRenderer(Pt.StackedHeader,new tpe(this.parent,this.locator)),e.addCellRenderer(Pt.DetailHeader,new xPe(this.parent,this.locator)),e.addCellRenderer(Pt.RowDragHIcon,new IPe(this.parent,this.locator)),e.addCellRenderer(Pt.DetailExpand,new EPe(this.parent,this.locator)),e.addCellRenderer(Pt.DetailFooterIntent,new wZ(this.parent,this.locator)),e.addCellRenderer(Pt.RowDragIcon,new _Pe(this.parent,this.locator))}addEventListener(){this.parent.isDestroyed||(this.parent.on(Sg,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(da,this.refresh,this),this.parent.on("refresh-complete",this.refreshComplete,this),this.parent.on("bulk-save",this.sendBulkRequest,this),this.parent.on(_ue,()=>{this.emptyGrid=!0},this),this.parent.on(m1,this.dynamicColumnChange,this))}validateGroupRecords(e){const t=e.result.length-1;if(t<0)return Promise.resolve(e);const i=e.result[0],s=e.result[t],r=[],o=v=>{const w=[i,s];for(let E=0;E<w.length;E++)r.push(new cs("field","==",w[E].field).and(this.getPredicate("key","equal",w[E].key)));v.where(cs.or(r))},a=new Ut;o(a);const h=new ut(e.result).executeLocal(a),c=this.data.generateQuery(!0),m=[];if(this.data.isRemote()){const v=[i,s];for(let w=0;w<v.length;w++)m.push(this.getPredicate(v[w].field,"equal",v[w].key));c.where(cs.or(m))}else o(c);const b=new Ru;return this.data.getData({},c).then(v=>{this.updateGroupInfo(h,v.result),b.resolve(e)}).catch(v=>b.reject(v)),b.promise}getPredicate(e,t,i){return i instanceof Date?bS({field:e,operator:t,value:i}):new cs(e,t,i)}updateGroupInfo(e,t){const i=new ut(t),s=e;for(let r=0;r<s.length;r++){const o=i.executeLocal((new Ut).where(new cs("field","==",s[r].field).and(this.getPredicate("key","equal",s[r].key))))[0];s[r].count=o.count;const a=s[r].items,l=o.items;a.GroupGuid&&(s[r].items=this.updateGroupInfo(s[r].items,o.items));const h=this.parent.aggregates;for(let c=0;c<h.length;c++){const m=h[c];for(let b=0;b<m.columns.length;b++){const v=m.columns[b].type instanceof Array?m.columns[b].type:[m.columns[b].type];for(let w=0;w<v.length;w++){const E=m.columns[b].field+" - "+v[w].toLowerCase(),D=a.level?l.records:o.items,L=this.parent;if("Custom"===v[w]){const N=a.level?l:o;let V=m.columns[b].customAggregate;"string"==typeof V&&(V=U(V,window)),s[r].aggregates[E]=V?V.call(L,N,m.columns[b]):""}else s[r].aggregates[E]=Ze.aggregates[v[w].toLowerCase()](D,m.columns[b].field)}}}}return e}}class DPe{constructor(){this.cellRenderMap={}}addCellRenderer(e,t){e="string"==typeof e?e:Oh(Pt,e),f(this.cellRenderMap[e])&&(this.cellRenderMap[e]=t)}getCellRenderer(e){if(e="string"==typeof e?e:Oh(Pt,e),f(this.cellRenderMap[e]))throw`The cellRenderer ${e} is not found`;return this.cellRenderMap[e]}}class ipe{constructor(e,t){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=e,this.serviceLocator=t,this.addEventListener()}addEventListener(){this.evtHandlers=[{event:d3,handler:this.closeCustomDialog},{event:lZ,handler:this.refreshCustomFilterOkBtn},{event:"render-responsive-cmenu",handler:this.renderResponsiveContextMenu},{event:"filter-cmenu-select",handler:this.renderCustomFilterDiv},{event:"custom-filter-close",handler:this.customExFilterClose},{event:"refresh-cutsom-filter-clear-button",handler:this.refreshCustomFilterClearBtn}],$a(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(Oi,this.onActionCompleteFn)}customExFilterClose(){this.isCustomDlgRender=!1}renderCustomFilterDiv(){const e=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),t=e.querySelector(".e-dlg-custom-header"),i=e.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",i.style.display="",t.innerHTML=this.parent.localeObj.getConstant("CustomFilter");const s=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),s.appendChild(this.customExcelFilterParent)}renderResponsiveContextMenu(e){if(this.action===Zs.isFilter){const t=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),i=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),s=i.querySelector(".e-dlg-closeicon-btn"),r=i.querySelector(".e-dlg-custom-header");if(e.isOpen){t.firstChild.style.display="none",t.appendChild(e.target),s.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",r.innerHTML=e.header;const o=this.parent.createElement("button"),a=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});o.appendChild(a),this.backBtn=new Sa({cssClass:"e-res-back-btn"}),this.backBtn.appendTo(o),r.parentElement.insertBefore(o,r)}else this.backBtn&&!this.isCustomDlgRender&&(t.firstChild.style.display="",Yt(this.backBtn.element),s.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),r.innerHTML=this.getHeaderTitle({action:Zs.isFilter},e.col))}}refreshCustomFilterClearBtn(e){this.filterClearBtn&&(this.isFiltered=e.isFiltered,this.filterClearBtn.element.style.display=e.isFiltered?"":"none")}refreshCustomFilterOkBtn(e){this.saveBtn&&(this.saveBtn.disabled=e.disabled)}renderResponsiveContent(e){const t=this.parent;if(e)return this.filterParent=this.parent.createElement("div",{className:"e-mainfilterdiv e-default-filter",id:e.uid+"-main-filter"}),this.filterParent;{const i=t.getColumns();this.customColumnDiv=t.createElement("div",{className:"columndiv",styles:"width: 100%"});const s=t.createElement("div",{className:"e-ressortbutton-parent"}),r=[],o=this.action===Zs.isSort,a=this.action===Zs.isFilter;if(a)for(let l=0;l<t.filterSettings.columns.length;l++)r.push(t.filterSettings.columns[l].field);for(let l=0;l<i.length;l++){if(!i[l].visible||!i[l].allowSorting&&o||!i[l].allowFiltering&&a)continue;const h=t.createElement("div",{className:"e-responsivecoldiv"});h.setAttribute("data-e-mappingname",i[l].field),h.setAttribute("data-e-mappinguid",i[l].uid);const c=t.createElement("span",{innerHTML:i[l].headerText,className:"e-res-header-text"});if(h.appendChild(c),this.customColumnDiv.appendChild(h),o){const b=this.getSortedFieldsAndDirections("field").indexOf(i[l].field),v=t.createElement("button",{id:t.element.id+i[l].field+"sortbutton"}),w=s.cloneNode();w.appendChild(v),h.appendChild(w),new Sa({cssClass:"e-ressortbutton"}).appendTo(v),v.innerHTML=b>-1?this.parent.sortSettings.columns[b].direction:"None",v.onclick=D=>{this.sortButtonClickHandler(D.target)}}if(a&&r.indexOf(i[l].field)>-1){const m=t.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),b=t.createElement("span",{className:"e-icons e-res-icon e-filterset"});b.setAttribute("colType",i[l].type),m.appendChild(b),h.appendChild(m)}}return k.add(this.customColumnDiv,"click",this.customFilterColumnClickHandler,this),this.customColumnDiv}}getSortedFieldsAndDirections(e){const t=[];for(let i=0;i<this.parent.sortSettings.columns.length;i++)t.push(this.parent.sortSettings.columns[i][e]);return t}sortButtonClickHandler(e){if(e){const i=Te(e,"e-responsivecoldiv").getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(e));const s=e.textContent,r="None"===s?"Ascending":"Ascending"===s?"Descending":"None";e.innerHTML=r,this.setSortedCols(i,r)}}resetSortButtons(e){const t=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton"));for(let i=0;i<t.length;i++)t[i]!==e&&(t[i].innerHTML="None")}setSortedCols(e,t){const s=this.getCurrentSortedFields().indexOf(e);this.parent.allowMultiSorting&&s>-1&&(this.sortedCols.splice(s,1),this.sortPredicate.splice(s,1)),this.isSortApplied=!0,"None"!==t&&(this.sortedCols.push(e),this.sortPredicate.push({field:e,direction:t}))}getCurrentSortedFields(){const e=[];for(let t=0;t<this.sortedCols.length;t++)e.push(this.sortedCols[t]);return e}customFilterColumnClickHandler(e){if(this.action!==Zs.isFilter)return;const t=this.parent,i=e.target;if("FilterBar"!==t.filterSettings.type)if(i.classList.contains("e-responsivecoldiv")||i.parentElement.classList.contains("e-responsivecoldiv")){let s=i.getAttribute("data-e-mappingname");if(s||(s=i.parentElement.getAttribute("data-e-mappingname")),s){const r=t.getColumnByField(s);this.isRowResponsive=!0,this.showResponsiveDialog(r)}}else if(i.classList.contains("e-filterset")||i.parentElement.classList.contains("e-filtersetdiv")){const s=Te(i,"e-responsivecoldiv");if(s){const r=s.getAttribute("data-e-mappingname"),o=t.getColumnByField(r);("Menu"===o.filter.type||!o.filter.type&&"Menu"===t.filterSettings.type)&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(o),this.removeCustomDlgFilterEle(i)}}}showResponsiveDialog(e){if(this.isCustomDialog&&this.action===Zs.isFilter&&!this.isRowResponsive)this.renderCustomFilterDialog();else{if(this.filteredCol=e,this.renderResponsiveDialog(e),this.parent.enableAdaptiveUI&&e&&(this.parent.filterModule.setFilterModel(e),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(e,void 0))),this.action===Zs.isSort){const t={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(rue,t),t.cancel)return}this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element)}}setTopToChildDialog(e){const t=e.querySelector(".e-dialog");if(t){const i=e.querySelector(".e-dlg-header-content").getBoundingClientRect().height;t.style.top=i+"px"}}renderCustomFilterDialog(e){const t=this.parent;if(this.action===Zs.isFilter&&"FilterBar"===t.filterSettings.type)return;const i=this.parent.createElement("div",{id:t.element.id+"customfilter",className:"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(i),this.customFilterDlg=this.getDialogOptions(e,!0);const s={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(rue,s),!s.cancel&&(this.customFilterDlg.appendTo(i),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}getDialogOptions(e,t,i){const s=new Hs({isModal:!0,showCloseIcon:!0,closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(e),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"}});return s.isStringTemplate=!0,t?(s.header=this.renderResponsiveHeader(e,void 0,!0),s.cssClass="e-customfilter"):(s.header=this.renderResponsiveHeader(e),s.cssClass="Vertical"===this.parent.rowRenderingMode&&this.action===Zs.isFilter?"e-res"+i+" e-row-responsive-filter":"e-res"+i),s}renderResponsiveDialog(e){const t=this.parent;if(this.action===Zs.isFilter&&"FilterBar"===t.filterSettings.type)return;const i=this.action===Zs.isFilter?"filter":"sort",s=this.parent.createElement("div",{id:t.element.id+"responsive"+i,className:"e-res"+i+"div e-responsive-dialog"});this.parent.element.appendChild(s),this.customResponsiveDlg=this.getDialogOptions(e,!1,i),this.customResponsiveDlg.appendTo(s)}dialogCreated(){!function Spe(n){if(n.enableAdaptiveUI){const e=document.getElementsByClassName("e-responsive-dialog");for(let t=0;t<e.length;t++)e[t].classList.add("e-bigger")}}(this.parent)}dialogOpen(){if(this.action===Zs.isSort&&this.parent.allowMultiSorting)for(let e=0;e<this.parent.sortSettings.columns.length;e++)this.sortedCols.push(this.parent.sortSettings.columns[e].field),this.sortPredicate.push({field:this.parent.sortSettings.columns[e].field,direction:this.parent.sortSettings.columns[e].direction})}beforeDialogClose(e){this.isDialogClose=e.element&&!e.element.querySelector(".e-xl-customfilterdiv")&&e.element.classList.contains("e-resfilterdiv"),this.action===Zs.isFilter?e.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):e.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter():this.action===Zs.isSort&&this.closeCustomDialog(),this.parent.off(p3,this.keyHandler)}sortColumn(){if(this.isSortApplied){this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(let e=0;e<this.sortPredicate.length;e++)this.parent.sortColumn(this.sortPredicate[e].field,this.sortPredicate[e].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()}else this.closeCustomDialog()}getHeaderTitle(e,t){const i=this.parent;let s;return this.action===Zs.isEdit?s=i.localeObj.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.action===Zs.isAdd?s=i.localeObj.getConstant("AddFormTitle"):this.action===Zs.isFilter?s=t?t.headerText||t.field:i.localeObj.getConstant("FilterButton"):this.action===Zs.isSort&&(s=i.localeObj.getConstant("Sort")),s}getDialogName(e){let t;return e===Zs.isAdd||e===Zs.isEdit?t="dialogEdit_wrapper_title":e===Zs.isFilter&&(t="responsive_filter_dialog_wrapper"),t}getButtonText(e){let t;return e===Zs.isAdd||e===Zs.isEdit?t="Save":(e===Zs.isFilter||this.action===Zs.isSort)&&(t="OKButton"),t}renderResponsiveHeader(e,t,i){const s=this.parent;s.on(p3,this.keyHandler,this);const r=s.element.id+this.getDialogName(this.action),o=s.createElement("div",{className:"e-res-custom-element"}),a=s.createElement("div",{className:"e-dlg-custom-header",id:r});a.innerHTML=this.getHeaderTitle(t,e),o.appendChild(a);const l=s.createElement("button");i||(this.saveBtn=new Sa({cssClass:"e-primary e-flat e-res-apply-btn"}),l.innerHTML=s.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(l),l.onclick=m=>{this.dialogHdrBtnClickHandler()});const h=this.action===Zs.isSort,c=this.action===Zs.isFilter;if(c||h){const m=h?"sort":"filter",b=s.createElement("button");if(this.filterClearBtn=new Sa({cssClass:"e-primary e-flat e-res-"+m+"-clear-btn"}),c){const v=s.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});b.appendChild(v)}else b.innerHTML=s.localeObj.getConstant("Clear");o.appendChild(b),this.filterClearBtn.appendTo(b),b.onclick=v=>{Te(v.target,"e-customfilter")?(this.parent.filterModule.clearFiltering(),this.removeCustomDlgFilterEle()):c?this.filterClear():(this.resetSortButtons(),this.sortedCols=[],this.sortPredicate=[],this.isSortApplied=!0)},o.appendChild(b)}return i||o.appendChild(l),o}filterClear(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()}dialogHdrBtnClickHandler(){this.action===Zs.isEdit||this.action===Zs.isAdd?this.parent.endEdit():this.action===Zs.isFilter?this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}):this.action===Zs.isSort&&this.sortColumn()}closeCustomDialog(){this.isCustomDlgRender?Yt(this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv")):(this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog())}destroyCustomFilterDialog(){if(!this.customResponsiveDlg)return;const e=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&e&&(this.customResponsiveDlg.destroy(),Yt(e)),this.closeCustomFilter(),this.action===Zs.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}closeCustomFilter(){if(!this.isDialogClose&&this.customFilterDlg){const e=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&e&&(this.customFilterDlg.destroy(),Yt(e))}this.isCustomDialog=!1,this.isDialogClose=!1}removeCustomDlgFilterEle(e){if(e)e.parentElement.classList.contains("e-filtersetdiv")?Yt(e.parentElement):Yt(e);else{const t=this.customColumnDiv.children;for(let i=0;i<t.length;i++)(e=t[i].querySelector(".e-filtersetdiv"))&&(Yt(e),i--)}}keyHandler(e){13===e.keyCode&&(this.action===Zs.isFilter&&e.target.classList.contains("e-searchinput")||this.action===Zs.isEdit||this.action===Zs.isAdd)&&this.dialogHdrBtnClickHandler()}editComplate(e){("save"===e.requestType||"cancel"===e.requestType)&&this.parent.off(p3,this.keyHandler)}removeEventListener(){this.customColumnDiv&&k.remove(this.customColumnDiv,"click",this.customFilterColumnClickHandler),$a(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(Oi,this.onActionCompleteFn)}}class kPe{constructor(){this.services={}}register(e,t){f(this.services[e])&&(this.services[e]=t)}getService(e){if(f(this.services[e]))throw`The service ${e} is not registered`;return this.services[e]}registerAdaptiveService(e,t,i){t?(e.responsiveDialogRenderer=new ipe(e.parent,e.serviceLocator),e.responsiveDialogRenderer.action=i):e.responsiveDialogRenderer&&(e.responsiveDialogRenderer.removeEventListener(),e.responsiveDialogRenderer=void 0)}}class RPe{constructor(){this.rendererMap={}}addRenderer(e,t){const i=Oh(Br,e);f(this.rendererMap[i])&&(this.rendererMap[i]=t)}getRenderer(e){const t=Oh(Br,e);if(f(this.rendererMap[t]))throw`The renderer ${t} is not found`;return this.rendererMap[t]}}class SZ{constructor(e){this.parent=e}setWidthToColumns(){let e=0;const t=this.parent.getColumnIndexesInView();let i=!0,s=0;if(this.parent.allowGrouping)for(let o=this.parent.groupSettings.columns.length;e<o;e++)this.parent.enableColumnVirtualization&&-1===t.indexOf(e)?i=!1:this.setColumnWidth(new $d({width:"30px"}),e);(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new $d({width:"30px"}),e),e++),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(this.setColumnWidth(new $d({width:"30px"}),e),e++);const r=this.parent.getColumns();for(let o=0;o<r.length;o++)this.setColumnWidth(r[o],i&&this.parent.enableColumnVirtualization?void 0:o+e);this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&this.setColumnWidth(new $d({width:"30px"}),r.length),s=this.getTableWidth(this.parent.getColumns()),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(s)}setMinwidthBycalculation(e){let t=0;const i=this.parent.getColumns().filter(s=>f(s.width)||"auto"===s.width);if(i.length){t=f(this.parent.width)||"auto"===this.parent.width||"string"!=typeof this.parent.width||-1!==this.parent.width.indexOf("%")?this.parent.element.getBoundingClientRect().width-e:("string"==typeof this.parent.width?parseInt(this.parent.width,10):this.parent.width)-e;let s=0;for(const r of i)s+=f(r.minWidth)?0:"string"==typeof r.minWidth?parseInt(r.minWidth,10):r.minWidth;for(let r=0;r<i.length;r++){0===e&&this.parent.allowResizing&&this.isWidthUndefined()&&r!==i.length-1&&this.setUndefinedColumnWidth(i);const o=this.parent.getColumnIndexByField(i[r].field)+this.parent.getIndentCount();0!==e&&t<s?this.setWidth(i[r].minWidth,o):0!==e&&t>s&&this.setWidth("",o,!0)}}}setUndefinedColumnWidth(e){for(let t=0;t<e.length;t++)t!==e.length-1&&(e[t].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[t].field)))}setColumnWidth(e,t,i){if(this.parent.getColumns().length<1)return;const s=f(t)?this.parent.getNormalizedColumnIndex(e.uid):t,r=this.getWidth(e),o=this.getTableWidth(this.parent.getColumns());null!==r&&(this.setWidth(r,s),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(o),(this.parent.allowResizing&&"resize"===i||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify(jP,{index:s,width:r,column:e,module:i}))}setWidth(e,t,i){this.parent.groupSettings.columns.length>t&&PZ(this.parent)&&(e=(30/this.parent.element.offsetWidth*100).toFixed(1)+"%");const s=this.parent.getHeaderTable(),r=this.parent.getContentTable(),o=st(e);let a,l=this.parent.getFrozenColumns();const h=this.parent.isRowDragable();l=l&&h?l+1:l;const c=this.parent.getHeaderContent().querySelector("."+js),m=this.parent.getContent().querySelector("."+zs),b=this.parent.getFrozenLeftColumnsCount(),v=this.parent.getFrozenRightColumnsCount(),w=this.parent.getMovableColumnsCount(),E=0!==b||0!==v;if(l&&t>=l){if(!c||!c.querySelector(Si))return;a=c.querySelector(Si).children[t-l]}else if(this.parent.enableColumnVirtualization&&l&&this.parent.contentModule.isXaxis()&&c.scrollLeft>0){const L=c.querySelector(Si);a=L.children[L.children.length-1-t]}else if(E){let L;if(b&&!v)L=(t=h?t-1:t)<b?s:c;else if(!b&&v)L=t>=w?s:c;else if(b&&v){t=h?t-1:t;const N=this.parent.getFrozenRightHeader();L=t<b?s:t<b+w?c:N}if(a=this.getColumnLevelFrozenColgroup(t,b,w,L),!a)return}else a=s.querySelector(Si).children[t];let D;if(a&&!i?a.style.width=o:a&&i&&(a.style.width=""),l&&t>=l)D=this.parent.getContent().querySelector("."+zs).querySelector(Si).children[t-l];else if(this.parent.enableColumnVirtualization&&l&&this.parent.contentModule.isXaxis()&&m.scrollLeft>0){const L=this.parent.getContent().querySelector("."+zs).querySelector(Si);D=L.children[L.children.length-1-t]}else if(E){let L;if(b&&!v&&(L=t<b?r:m),!b&&v&&(L=t>=w?r:m),b&&v){const N=this.parent.getContent().querySelector(".e-frozen-right-content");L=t<b?r:t<b+w?m:N}D=this.getColumnLevelFrozenColgroup(t,b,w,L)}else D=r.querySelector(Si).children[t];if(D&&!i?D.style.width=o:D&&i&&(D.style.width=""),!this.parent.enableColumnVirtualization){const L=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),N=[];for(let V=0;V<L.length;V++)if(Te(L[V],"e-grid").id===this.parent.element.id)for(let $=0;$<L[V].querySelector("colgroup").children.length;$++)N.push(L[V].querySelector("colgroup").children[$]);L.length&&N.length&&(N[t].style.width=o)}this.parent.isFrozenGrid()&&this.refreshFrozenScrollbar()}getColumnLevelFrozenColgroup(e,t,i,s){if(!s||!s.querySelector(Si))return null;const r=this.parent.getColumns(),o=this.parent.isRowDragable(),a=this.parent.getFrozenMode();let l;const h=[].slice.call(s.querySelector(Si).children);return l="Right"===a&&o&&e===i+this.parent.getFrozenRightColumnsCount()?h[h.length-1]:o&&-1===e?h[0]:"Left"===r[e].freeze?h[o?e+1:e]:"Right"===r[e].freeze?h[e-(t+i)]:h[e-t],l}refreshFrozenScrollbar(){const e={cancel:!1};if(this.parent.notify("prevent-frozen-scroll-refresh",e),e.cancel)return;const t=N_(),i=this.parent.element.querySelector(".e-frozenscrollbar"),s=this.parent.element.querySelector(".e-movablescrollbar"),r=this.parent.getContent().querySelector("."+jf),o=this.parent.getContent().querySelector("."+zs);let a=r.firstElementChild.getBoundingClientRect().width,l=o.firstElementChild.getBoundingClientRect().width;if("Right"===this.parent.getFrozenMode()&&(a+=t),i.style.width=a+"px",this.parent.getFrozenMode()===Zt){const h=this.parent.element.querySelector(".e-frozen-right-scrollbar");let c=this.parent.getContent().querySelector(".e-frozen-right-content").firstElementChild.getBoundingClientRect().width;"auto"!==this.parent.height&&(c+=t),h.style.width=c+"px"}else{if(this.parent.enableColumnVirtualization){const h=this.parent.getMovableVirtualContent().querySelector(".e-virtualtrack");h&&(l=h.scrollWidth)}"Right"!==this.parent.getFrozenMode()&&"auto"!==this.parent.height&&(l+=t)}s.firstElementChild.style.width=l+"px"}getSiblingsHeight(e){return this.getHeightFromDirection(e,"previous")+this.getHeightFromDirection(e,"next")}getHeightFromDirection(e,t){let i=e[t+"ElementSibling"],s=0;const r=[to,k_,"e-groupdroparea","e-gridpager","e-toolbar"];for(;i;)r.some(o=>i.classList.contains(o))&&(s+=i.offsetHeight),i=i[t+"ElementSibling"];return s}isWidthUndefined(){const e=this.parent.getColumns().filter(t=>f(t.width)&&f(t.minWidth)).length;return this.parent.getColumns().length===e}getWidth(e){if(f(e.width)&&this.parent.allowResizing&&f(e.minWidth)&&!this.isWidthUndefined()&&(e.width=200),this.parent.isFrozenGrid()&&f(e.width)&&(e.getFreezeTableName()===or||e.getFreezeTableName()===an)&&(e.width=200),!e.width)return null;const t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width}getTableWidth(e){let t=0;for(const i of e){let s=this.getWidth(i);"auto"===i.width&&(s=0),!1!==i.visible&&null!==s&&(t+=parseInt(s.toString(),10))}return t}calcMovableOrFreezeColWidth(e){const t=this.parent.getColumns().slice(),i=this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenColumns(),s=this.parent.getMovableColumnsCount(),r=this.parent.getFrozenRightColumnsCount();return"movable"===e?(r&&t.splice(i+s,t.length),i&&t.splice(0,i)):"freeze-left"===e?t.splice(i,t.length):"freeze-right"===e&&t.splice(0,i+s),st(this.getTableWidth(t))}setWidthToFrozenRightTable(){let e=this.calcMovableOrFreezeColWidth("freeze-right");e=this.isAutoResize()?"100%":e;const t=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector("."+tn),i=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector("."+tn);t.style.width=e,i.style.width=e}setWidthToFrozenLeftTable(){let e=this.calcMovableOrFreezeColWidth("freeze-left");e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e}setWidthToMovableTable(){let e="";const t=this.parent.getColumns().filter(s=>f(s.width)).length>=1,i=this.parent.getColumns().filter(s=>"auto"===s.width).length>=1;"number"!=typeof this.parent.width||t||i?!t&&!i&&(e=this.calcMovableOrFreezeColWidth("movable")):e=st(this.parent.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5),e=this.isAutoResize()?"100%":e,this.parent.getHeaderContent().querySelector("."+js).firstElementChild&&(this.parent.getHeaderContent().querySelector("."+js).firstElementChild.style.width=e),this.parent.getContent().querySelector("."+zs).firstElementChild.style.width=e}setWidthToFrozenEditTable(){let e=this.calcMovableOrFreezeColWidth("freeze");e=this.isAutoResize()?"100%":e,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=e}setWidthToMovableEditTable(){let e=this.calcMovableOrFreezeColWidth("movable");e=this.isAutoResize()?"100%":e,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=e}setWidthToTable(){let e=st(this.getTableWidth(this.parent.getColumns()));this.parent.isFrozenGrid()?((this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount())&&this.setWidthToFrozenLeftTable(),this.setWidthToMovableTable(),this.parent.getFrozenRightColumnsCount()&&this.setWidthToFrozenRightTable()):((this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new $d({width:"30px"})),e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e);const t=this.parent.element.querySelector(".e-table.e-inline-edit");t&&this.parent.getFrozenColumns()?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):t&&(t.style.width=e)}isAutoResize(){return this.parent.allowResizing&&"Auto"===this.parent.resizeSettings.mode}}class APe{constructor(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.parent=e,this.rowModelGen=new Uf(this.parent),this.addEventListener()}focusCheck(e){const t=e.target;this.focusByClick=!0,this.skipFocus=t.classList.contains("e-grid")}onFocus(e){if(this.parent.isDestroyed||q.isDevice||this.parent.enableVirtualization)return;this.setActive(!this.parent.enableHeaderFocus&&0===this.parent.frozenRows,this.parent.isFrozenGrid()),!this.parent.enableHeaderFocus&&!this.parent.getCurrentViewRecords().length&&("Batch"!==this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&!this.parent.editModule.getBatchChanges()[Eg].length)&&this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new Ap({isDataRow:!0})]}),this.getContent().selector,!1);const t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(t[0],t[1]),this.skipFocus&&(this.focus(e),this.skipFocus=!1)}passiveFocus(e){this.parent.isDestroyed||e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,z([this.currentInfo.element],["e-focused","e-focus"]))}onBlur(e){(this.parent.isEdit||e&&(!e.relatedTarget||B(e.relatedTarget,".e-grid")))&&(!f(e.relatedTarget)||0!==parseInt(e.target.getAttribute("aria-colindex"),10)||0!==parseInt(e.target.getAttribute("index"),10))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.parent.element.tabIndex=0)}onClick(e,t){if(Te(e.target,"e-filterbarcell")&&(Te(e.target,"e-multiselect")||e.target.classList.contains("e-input-group-icon")))return;let i=!f(B(e.target,"."+io));const s=!f(B(e.target,"."+to));i=i&&s?!i:i;let r=!f(B(e.target,"."+jf))||!f(B(e.target,"."+xg)),o=!1;if(this.parent.getFrozenMode()===Zt&&(o=!f(B(e.target,".e-frozen-right-content"))||!f(B(e.target,".e-frozen-right-header")),r=r&&!o),!i&&f(B(e.target,"."+to))||e.target.classList.contains(rr)||!f(B(e.target,".e-unboundcell")))return;if(this.setActive(i,r,o),!i&&f(B(e.target,"."+to)))return void this.clearOutline();const a={cancel:!1,byKey:!1,byClick:!f(e.target),clickArgs:e};if(this.parent.notify(u1,a),!a.cancel&&!B(e.target,".e-inline-edit")&&(this.setActive(i,r,o),this.getContent())){if(!1===this.getContent().onClick(e,t))return;this.focus()}}onKeyPress(e){if(this.parent.allowPaging){if(this.parent.pagerModule.pagerObj.checkPagerHasFocus())return void this.parent.pagerModule.pagerObj.changePagerFocus(e);if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&(38===e.keyCode||e.shiftKey&&9===e.keyCode))return e.preventDefault(),void this.getFocusedElement().focus();if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&9===e.keyCode)return e.preventDefault(),void this.parent.pagerModule.pagerObj.setPagerFocus();if(this.parent.pagerModule.pagerObj.checkFirstPagerFocus()){const o=this.getContent().matrix.rows,a=this.getContent().matrix.columns;this.getContent().matrix.current=[o,a]}}if(this.skipOn(e))return;this.activeKey=e.action;const t={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify(u1,t),t.cancel)return;const i=this.getContent().matrix.current;this.currentInfo.outline=!0;const s=this.getContent().jump(e.action,i);if(this.swap=s,s.swap&&(this.setActive(!s.toHeader,s.toFrozen,s.toFrozenRight),this.getContent().matrix.current=this.getContent().getNextCurrent(i,s,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent()),!1===(!this.content.lastIdxCell&&this.getContent().onKeyPress(e)))return this.clearIndicator(),"shiftTab"===e.action&&i.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),void(this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(e)&&i.toString()!==[0,0].toString()&&(e.preventDefault(),40===e.keyCode?this.parent.pagerModule.pagerObj.setPagerContainerFocus():9===e.keyCode&&this.parent.pagerModule.pagerObj.setPagerFocus()));e.preventDefault(),this.focus(e)}allowToPaging(e){return!("Batch"===this.parent.editSettings.mode&&this.parent.editSettings.allowAdding&&40!==e.keyCode)}skipOn(e){const t=e.target;if(!t)return!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(e.action)>-1)return this.clearIndicator(),!0;const i=B(t,"th")&&!B(t,"th").tabIndex;e.target.classList.contains("e-filterbaroperator")&&(13===e.keyCode||27===e.keyCode)&&B(e.target,".e-filterbarcell").querySelector("input").focus(),i&&null!==B(document.activeElement,".e-filterbarcell")&&this.removeFocus();let s=null!==B(document.activeElement,".e-filterbarcell");if(this.parent.enableHeaderFocus&&s){const r=this.active.matrix,o=r.current;s=r.matrix[o[0]].lastIndexOf(1)!==o[1]}return"delete"===e.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit||["insert","f2"].indexOf(e.action)>-1)||s||null!==B(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)>-1||null===B(t,"."+io)&&null===B(t,"."+to)||"space"===e.action&&!t.classList.contains(R_)&&null===B(t,"."+R_)&&null===B(t,".e-headerchkcelldiv")||null!==B(t,".e-filter-popup")}focusVirtualElement(e){if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){const t={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify("get-virtual-data",t);const i=this.actions.some(r=>r===this.activeKey),s=!!this.parent.contentModule&&this.parent.contentModule.selectedRowIndex>-1;t.isAdd||Object.keys(t.virtualData).length||i||t.isCancel||s?(this.parent.notify("reset-virtual-focus",{isCancel:!1}),t.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,i&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",e)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1}getFocusedElement(){return this.currentInfo.elementToFocus}getContent(){return this.active||this.content}setActive(e,t,i){this.active=e?t?this.fContent:i?this.frContent:this.content:t?this.fHeader:i?this.frHeader:this.header}setFocusedElement(e,t){this.currentInfo.elementToFocus=e,setTimeout(()=>{f(this.currentInfo.elementToFocus)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling?this.focusVirtualElement(t):this.currentInfo.elementToFocus.focus())},0)}focus(e){this.parent.notify("virtaul-cell-focus",e),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)}removeFocus(e){!this.currentInfo.element||(W([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1)}addOutline(){const e=this.getContent().getFocusInfo();e.element&&(z([e.element],["e-focused"]),z([e.elementToFocus],["e-focus"]))}focusHeader(){this.setActive(!1,this.parent.isFrozenGrid()),this.resetFocus()}focusContent(){this.setActive(!0,this.parent.isFrozenGrid()),this.resetFocus()}resetFocus(){const e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.focus()}addFocus(e,t){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&!f(t),this.isInfiniteScroll&&(this.currentInfo.outline=!0),!e.element)return;const i=e.elementToFocus.classList.contains("e-focus");if(i)return;this.currentInfo.outline&&z([e.element],["e-focused"]),z([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,i||this.setFocusedElement(e.elementToFocus,t),this.parent.notify(e3,{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!f(t),byClick:f(t),keyArgs:t,isJump:this.swap.swap,container:this.getContent().getInfo(t),outline:!f(t),swapInfo:this.swap});const[s,r]=this.getContent().matrix.current;this.prevIndexes={rowIndex:s,cellIndex:r},this.focusedColumnUid=this.parent.getColumnByIndex(r).uid,this.focusByClick=!1}refreshMatrix(e){return t=>{e&&t.args&&t.args.isFrozen&&!this.fContent?this.fContent=new MPe(this.parent):e&&!this.frContent&&t.args&&t.args.renderFrozenRightContent?this.frContent=new PPe(this.parent):e&&!this.content&&(this.content=new C3(this.parent)),!e&&t.args&&t.args.isFrozen&&!this.fHeader?this.fHeader=new OPe(this.parent):!e&&t.args&&t.args.renderFrozenRightContent&&!this.frHeader?this.frHeader=new FPe(this.parent):!e&&!this.header&&(this.header=new xZ(this.parent));const i=e?t.args&&t.args.isFrozen?this.fContent:t.args&&t.args.renderFrozenRightContent?this.frContent:this.content:t.args&&t.args.isFrozen?this.fHeader:t.args&&t.args.renderFrozenRightContent?this.frHeader:this.header;let s=e?t.rows.slice(this.parent.frozenRows):t.rows;const r=e?t.rows.slice(0,this.parent.frozenRows):t.rows;this.parent.isCollapseStateEnabled()&&e&&(s=s.filter(l=>!1!==l.visible));const o=!f(this.parent.rowTemplate),a=i.matrix.generate(r,i.selector,o);if("batchAdd"===t.name&&this.parent.isFrozenGrid()){const h=this.parent.getMovableRowsObject().map(m=>m.clone()),c=s.map(m=>m.clone());if(this.fContent.matrix.generate(c,this.fContent.selector,o),this.content.matrix.generate(h,this.content.selector,o),this.parent.getFrozenMode()===Zt){const b=this.parent.getFrozenRightRowsObject().map(v=>v.clone());this.frContent.matrix.generate(b,this.frContent.selector,o)}}else i.matrix.generate(s,i.selector,o);if(i.generateRows(r,{matrix:a,handlerInstance:t.args&&t.args.isFrozen?this.fHeader:t.args&&t.args.renderFrozenRightContent?this.frHeader:this.header}),!q.isDevice&&t&&t.args&&(!this.focusByClick&&"paging"===t.args.requestType&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&(this.skipFocus=!1,this.parent.element.focus()),"grouping"===t.args.requestType&&(this.skipFocus=!0)),t&&t.args&&"virtualscroll"===t.args.requestType)if(this.currentInfo.uid){let l;if(t.rows.some((c,m)=>(l=m,c.uid===this.currentInfo.uid))){this.content.matrix.current[0]=l,this.content.matrix.current[1]=this.parent.getColumnIndexByUid(this.focusedColumnUid)||0;const c=this.getContent().getFocusInfo().elementToFocus;if(c){const m=c.getBoundingClientRect(),b=this.parent.element.getBoundingClientRect();m.top>=0&&m.left>=0&&m.right<=Math.min(b.right,window.innerWidth||document.documentElement.clientWidth)&&m.bottom<=Math.min(b.bottom,window.innerHeight||document.documentElement.clientHeight)&&(this.isVirtualScroll=!0,this.focus())}}}else if(t.args.focusElement&&t.args.focusElement.classList.contains("e-filtertext")){const l=this.parent.element.querySelector("#"+t.args.focusElement.id);l&&l.focus()}}}addEventListener(){this.parent.isDestroyed||(k.add(this.parent.element,"mousedown",this.focusCheck,this),k.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=e=>this.passiveFocus(e),!0),k.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:Nr,handler:this.onKeyPress},{event:Vl,handler:this.onClick},{event:Kn,handler:this.refMatrix},{event:YP,handler:this.refMatrix},{event:"refresh-Expand-and-Collapse",handler:this.refMatrix},{event:Go,handler:this.refreshMatrix()},{event:"close-edit",handler:this.restoreFocus},{event:"restore-Focus",handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:"batchAdd",handler:this.refMatrix},{event:"batchCancel",handler:this.refMatrix},{event:"batchDelete",handler:this.refMatrix},{event:"detailDataBound",handler:this.refMatrix},{event:zf,handler:this.refMatrix},{event:e3,handler:this.internalCellFocus}],$a(this.parent,this.evtHandlers,!0,this))}filterfocus(){"FilterBar"!==this.parent.filterSettings.type&&this.restoreFocus()}removeEventListener(){this.parent.isDestroyed||(k.remove(this.parent.element,"mousedown",this.focusCheck),k.remove(this.parent.element,"focus",this.onFocus),k.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),$a(this.parent,this.evtHandlers,!1))}destroy(){this.removeEventListener()}restoreFocus(){this.addFocus(this.getContent().getFocusInfo())}restoreFocusWithAction(e){if(!this.parent.enableInfiniteScrolling){const t=this.getContent().matrix,i=t.current;switch(e.requestType){case"grouping":case"ungrouping":i[1]=!i.length||this.parent.groupSettings.showGroupedColumn||f(t.matrix[i[0]])?"grouping"===e.requestType?i[1]+1:i[1]-1:t.matrix[i[0]].indexOf(1)}this.getContent().matrix.current=i,this.addFocus(this.getContent().getFocusInfo())}}clearOutline(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()}clearIndicator(){!this.currentInfo.element||!this.currentInfo.elementToFocus||W([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])}getPrevIndexes(){const e=this.forget;return this.forget=!1,e||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes}forgetPrevious(){this.forget=!0}setActiveByKey(e,t){if(!this.parent.isFrozenGrid()&&0===this.parent.frozenRows)return;let i;const s={home:()=>({toHeader:!i.isContent,toFrozen:!0}),end:()=>({toHeader:!i.isContent,toFrozen:!1}),ctrlHome:()=>({toHeader:!0,toFrozen:this.parent.isFrozenGrid()}),ctrlEnd:()=>({toHeader:!1,toFrozen:!1})};if(!(e in s))return;i=t.getInfo();const r=s[e]();this.setActive(!r.toHeader,r.toFrozen),this.getContent().matrix.current=t.matrix.current}internalCellFocus(e){if(!(e.byKey&&e.container.isContent&&"enter"===e.keyArgs.action&&(e.parent.classList.contains("e-detailcell")||e.parent.classList.contains("e-unboundcell")||e.parent.classList.contains("e-templatecell"))))return;this.clearIndicator();const t=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(t),this.currentInfo.skipAction=!0}}class LPe{constructor(){this.matrix=[],this.current=[]}set(e,t,i){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.columns)),this.matrix[e]=this.matrix[e]||[],this.matrix[e][t]=i?1:0}get(e,t,i,s,r){const o=t;if(e+i[0]<0)return[e,t];e=Math.max(0,Math.min(e+i[0],this.rows));let a=!0;if(f(this.matrix[e]))return null;if(t=Math.max(0,Math.min(t+i[1],this.matrix[e].length-1)),o+i[1]>this.matrix[e].length-1&&r(e,t,s))return[e,o];const l=this.first(this.matrix[e],t,i,!0,s),h=U(`${e}.${t=null===l?o:l}`,this.matrix);if(e===this.rows&&("downArrow"===s||"enter"===s)&&(i[0]=-1),null===l){for(let c=0;c<this.rows;c++)if(this.matrix[c].some(m=>1===m)){a=!1;break}if(a)return[e=this.current[0],t]}return this.inValid(h)||!r(e,t,s)?this.get(e,o,i,s,r):[e,t]}first(e,t,i,s,r){return(t<0||t===e.length)&&this.inValid(e[t])&&"upArrow"!==r&&"downArrow"!==r||!e.some(o=>1===o)?null:this.inValid(e[t])?this.first(e,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(r)?s?0:++t:t+i[1],i,!1,r):t}select(e,t){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.matrix[e].length-1)),this.current=[e,t]}generate(e,t,i){this.rows=e.length-1,this.matrix=[];for(let s=0;s<e.length;s++){const r=e[s].cells.filter(o=>!0!==o.isSpanned);this.columns=Math.max(r.length-1,0|this.columns);for(let o=0;o<r.length;o++)this.set(s,o,!1!==e[s].visible&&t(e[s],r[o],i))}return this.matrix}inValid(e){return 0===e||void 0===e}}class C3{constructor(e){this.matrix=new LPe,this.lastIdxCell=!1,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=t=>({home:[this.matrix.current[0],-1,0,1],end:[this.matrix.current[0],this.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[this.matrix.rows,this.matrix.columns+1,0,-1]}[t]||null)}getTable(){return this.parent.isFrozenGrid()?this.parent.getContent().querySelector(".e-movablecontent .e-table"):this.parent.getContentTable()}onKeyPress(e){let i=this.getCurrentFromAction(e.action,this.keyActions[e.action],e.action in this.keyActions,e);if(i){if((["tab","shiftTab"].indexOf(e.action)>-1&&this.matrix.current||[]).toString()===i.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&("Batch"===this.parent.editSettings.mode&&this.parent.editSettings.allowAdding&&40===e.keyCode||40===e.keyCode)){if(i.toString()===[this.matrix.rows,this.matrix.columns].toString()||i.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===i.toString())return!1;i=this.editNextRow(i[0],i[1],e.action)}this.matrix.select(i[0],i[1])}}editNextRow(e,t,i){const s=this.parent,r=s.editSettings.allowNextRowEdit&&(s.isEdit||s.isLastCellPrimaryKey),o=s.getColumnIndexByField(s.getVisibleColumns()[0].field),a=this.getTable().rows[e].cells[t];return"tab"===i&&r&&(e++,t=o+(this.getTable().rows[e].getElementsByClassName("e-indentcell").length+this.getTable().rows[e].getElementsByClassName("e-detailrowcollapse").length)),"shiftTab"===i&&r&&(e--,t=s.getColumnIndexByField(s.getVisibleColumns()[s.getVisibleColumns().length-1].field)),a.classList.contains(Ji)||a.classList.contains("e-headercell")||a.classList.contains("e-groupcaption")?[e,t]:this.editNextRow(e,t,i)}getCurrentFromAction(e,t=[0,0],i,s){if(!i&&!this.indexesByKey(e)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(s))return this.matrix.current;const[r,o,a,l]=this.indexesByKey(e)||[...this.matrix.current,...t];return this.matrix.get(r,o,[a,l],e,this.validator())}onClick(e,t){let i=e.target;if(this.target=i,i=i.classList.contains(Ji)?i:B(i,"td"),i=i||B(e.target,"td.e-detailrowcollapse")||B(e.target,"td.e-detailrowexpand"),i=B(e.target,"td.e-detailcell")&&f(B(B(e.target,".e-grid"),"td.e-detailcell"))?null:i,i=i&&B(i,"table").classList.contains(tn)?i:null,!i)return!1;const[s,r]=[i.parentElement.rowIndex,i.cellIndex],[o,a]=this.matrix.current,l=U(`${s}.${r}`,this.matrix.matrix);if(this.matrix.inValid(l)||!t&&o===s&&a===r||!Te(e.target,Ji)&&!Te(e.target,"e-groupcaption"))return!1;this.matrix.select(s,r)}getFocusInfo(){const e={},[t=0,i=0]=this.matrix.current;return this.matrix.current=[t,i],e.element=f(this.getTable().rows[t])?null:this.getTable().rows[t].cells[i],e.element&&(e.elementToFocus=e.element.classList.contains("e-unboundcell")||e.element.classList.contains("e-detailcell")?e.element:this.getFocusable(e.element),e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid")),e}getFocusable(e){let t='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';const i=!f(B(e,".e-templatecell"));this.parent.isEdit&&(t='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');const s=[].slice.call(e.querySelectorAll(t));return s.length?i&&s.length>1?this.target:s[0]:e}selector(e,t,i){const s=[Pt.Expand,Pt.GroupCaption,Pt.CaptionSummary,Pt.GroupSummary];return(e.isDataRow&&t.visible&&(t.isDataCell||t.isTemplate)||e.isDataRow&&t.cellType===Pt.DetailExpand&&f(t.visible)||!e.isDataRow&&s.indexOf(t.cellType)>-1||t.column&&t.visible&&"checkbox"===t.column.type||t.cellType===Pt.CommandColumn||e.isDataRow&&i)&&!("delete"===e.edit&&e.isDirty)}nextRowFocusValidate(e){const t=e;for(let i=e,s=this.matrix.rows;i<=s;i++){if(-1!==this.matrix.matrix[e].indexOf(1))return e;e+=1}return this.lastIdxCell=!0,t}previousRowFocusValidate(e){const t=e;for(let i=e,s=0;i>=s;i--){if(-1!==this.matrix.matrix[e].indexOf(1))return e;if((e-=1)<0)return this.lastIdxCell=!0,t}return t}jump(e,t){let i=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftTab"===e)&&0===t[1];const s=("rightArrow"===e||"tab"===e)&&t[1]===this.matrix.columns,r=this.parent.getFrozenMode()===Zt&&s;"Right"===this.parent.getFrozenMode()&&(i=s),this.lastIdxCell=!1;const o=0!==this.parent.frozenRows&&"shiftEnter"===e;"tab"===e&&!this.parent.isEdit&&t[1]===this.matrix.matrix[t[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==t[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1,i=this.parent.isFrozenGrid()),"shiftTab"===e&&!this.parent.isEdit&&0!==t[0]&&this.matrix.matrix[t[0]].indexOf(1)===t[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[t[0]].length);let a=!1;const l=document.activeElement.parentElement;return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&l.classList.contains(ps)&&(a=parseInt(l.getAttribute(Di),10)>0),{swap:!a&&(("upArrow"===e||o)&&0===t[0]||i||r),toHeader:("upArrow"===e||o)&&0===t[0],toFrozen:i,toFrozenRight:r}}getNextCurrent(e=[],t,i,s){const r=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Zt?(("leftArrow"===s||"shiftTab"===s)&&(r[0]=e[0],r[1]=i.matrix.columns+1),this.parent.getFrozenMode()===Zt&&("rightArrow"===s||"tab"===s)&&(r[0]=e[0],r[1]=-1)):("rightArrow"===s||"tab"===s)&&(r[0]=e[0],r[1]=-1),("downArrow"===s||"enter"===s)&&(r[0]=-1,r[1]=e[1]),r}generateRows(e,t){const{matrix:i,handlerInstance:s}=t,r=s.matrix.matrix.length,o=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?r+1:r;s.matrix.matrix=s.matrix.matrix.slice(0,o),s.matrix.rows=o,s.matrix.matrix.push(...i),s.matrix.rows+=i.length}getInfo(e){const t=this.getFocusInfo(),[i,s]=this.matrix.current,r=t.element.classList.contains(Ji),o=r||e&&"enter"!==e.action&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),[a,l]=[Math.min(parseInt(t.element.parentElement.getAttribute(Di),10),i),Math.min(parseInt(t.element.getAttribute(Vr),10),s)];return{isContent:!0,isDataCell:r,indexes:[a,l],isSelectable:o}}validator(){const e=this.getTable();return(t,i,s)=>{if(!f(e.rows[t])){let r;i=e.querySelector(".e-emptyrow")?0:i,r=e.rows[t].cells[0].classList.contains("e-editcell")?e.rows[t].cells[0].querySelectorAll("td")[i]:e.rows[t].cells[i];const o=0!==r.getBoundingClientRect().width;if("enter"===s||"shiftEnter"===s)return o&&r.classList.contains(Ji);if(("shiftUp"===s||"shiftDown"===s)&&r.classList.contains(Ji))return o;if("shiftUp"!==s&&"shiftDown"!==s)return o}return!1}}shouldFocusChange(e){const[t=-1,i=-1]=this.matrix.current;if(t<0||i<0)return!0;const s=U(`${t}.cells.${i}`,this.getTable().rows);return!s||"enter"!==e.action&&"shiftEnter"!==e.action||s.classList.contains(Ji)&&!s.classList.contains("e-unboundcell")&&(!s.classList.contains("e-templatecell")||s.classList.contains("e-editedbatchcell"))&&!s.classList.contains("e-detailcell")}getGridSeletion(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection}}class xZ extends C3{constructor(e){super(e)}getTable(){return this.parent.isFrozenGrid()?this.parent.getHeaderContent().querySelector(".e-movableheader .e-table"):this.parent.getHeaderTable()}onClick(e){let t=e.target;if(this.target=t,t=t.classList.contains("e-headercell")?t:B(t,"th"),!t&&0!==this.parent.frozenRows&&(t=e.target.classList.contains(Ji)?e.target:B(e.target,"td")),e.target.classList.contains("e-columnheader")||e.target.querySelector(".e-stackedheadercell"))return!1;if(!t)return;const[i,s]=[t.parentElement.rowIndex,t.cellIndex],r=U(`${i}.${s}`,this.matrix.matrix);if(this.matrix.inValid(r))return!1;this.matrix.select(t.parentElement.rowIndex,t.cellIndex)}getFocusInfo(){const e={},[t=0,i=0]=this.matrix.current;return e.element=this.getTable().rows[t].cells[i],f(e.element)||(e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell")),e}selector(e,t){return t.visible&&(void 0!==t.column.field||t.isTemplate||!f(t.column.template))||"checkbox"===t.column.type||t.cellType===Pt.StackedHeader}jump(e,t){let i=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];const s=("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns,r=this.parent.getFrozenMode()===Zt&&s;"Right"===this.parent.getFrozenMode()&&(i=s);const o=0!==this.parent.frozenRows&&"enter"===e;let a,l,h=i||r;const c=this.parent.focusModule.fHeader&&this.parent.focusModule.fHeader.matrix.matrix,m=c&&!f(c[t[0]]);return this.parent.enableHeaderFocus&&"tab"===e&&(l=this.matrix.matrix.length-1===t[0],a=t[1]===this.matrix.matrix[t[0]].lastIndexOf(1),a&&(this.matrix.current[0]=l?0:this.matrix.current[0]+1,this.matrix.current[1]=-1),this.parent.isFrozenGrid()&&l&&a&&(i=!0,h=!1)),{swap:("downArrow"===e||o)&&t[0]===this.matrix.matrix.length-1||m&&(i||r)||"tab"===e&&l&&a,toHeader:h,toFrozen:i,toFrozenRight:r}}getNextCurrent(e=[],t,i,s){const r=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Zt?(("leftArrow"===s||"shiftLeft"===s&&this.getGridSeletion()||"shiftTab"===s)&&(r[0]=e[0],r[1]=i.matrix.columns+1),this.parent.getFrozenMode()===Zt&&("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(r[0]=e[0],r[1]=-1)):("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(r[0]=e[0],r[1]=-1),("upArrow"===s||"shiftEnter"===s)&&(r[0]=this.matrix.matrix.length,r[1]=e[1]),r}generateRows(e){const t=this.matrix.matrix.length;if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type){this.matrix.rows=++this.matrix.rows;const i=e[0].cells;for(let s=0;s<i.length;s++)this.matrix.set(t,s,i[s].visible&&!1!==i[s].column.allowFiltering)}}getInfo(e){return Ae(super.getInfo(e),{isContent:!1,isHeader:!0})}validator(){return()=>!0}shouldFocusChange(e){const[t,i]=this.matrix.current;if(t<0||i<0)return!0;const s=U(`${t}.cells.${i}`,this.getTable().rows);return!s||"enter"!==e.action&&"altDownArrow"!==e.action||!s.classList.contains("e-headercell")}}class MPe extends C3{getTable(){return this.parent.getContent().querySelector(".e-frozencontent .e-table")}jump(e,t){const s=("upArrow"===e||0!==this.parent.frozenRows&&"shiftEnter"===e)&&0===t[0];return"Right"===this.parent.getFrozenMode()?{swap:s||("shiftTab"===e||"leftArrow"===e)&&0===t[1],toHeader:s,toFrozen:s}:{swap:s||("tab"===e||"rightArrow"===e)&&t[1]===this.matrix.columns,toHeader:s,toFrozen:s}}getNextCurrent(e=[],t,i,s){const r=[];return"Right"===this.parent.getFrozenMode()?("rightArrow"===s||"tab"===s)&&(r[0]=e[0],r[1]=-1):("tab"===s&&this.parent.enableHeaderFocus&&(r[0]=e[0],r[1]=-1),("leftArrow"===s||"shiftTab"===s)&&(r[0]=e[0],r[1]=i.matrix.columns+1)),("downArrow"===s||"enter"===s)&&(r[0]=-1,r[1]=e[1]),r}}class OPe extends xZ{jump(e,t){const i=0!==this.parent.frozenRows&&"enter"===e,s=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,r=s&&!f(s[t[0]]);if("Right"===this.parent.getFrozenMode()){const o=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];return{swap:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1||r&&o,toHeader:o,toFrozen:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1}}return{swap:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1||("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns&&r,toHeader:("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns,toFrozen:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1}}getTable(){return this.parent.getHeaderContent().querySelector(".e-frozenheader .e-table")}getNextCurrent(e=[],t,i,s){const r=[];return"Right"===this.parent.getFrozenMode()?("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(r[0]=e[0],r[1]=-1):("leftArrow"===s||"shiftLeft"===s&&this.getGridSeletion()||"shiftTab"===s)&&(r[0]=e[0],r[1]=i.matrix.columns+1),("upArrow"===s||"shiftEnter"===s)&&(r[0]=this.matrix.matrix.length,r[1]=e[1]),r}}class PPe extends C3{getTable(){return this.parent.getContent().querySelector(".e-frozen-right-content .e-table")}jump(e,t){const s=("upArrow"===e||0!==this.parent.frozenRows&&"shiftEnter"===e)&&0===t[0];return{swap:s||("shiftTab"===e||"leftArrow"===e)&&0===t[1],toHeader:s,toFrozenRight:s}}getNextCurrent(e=[],t,i,s){const r=[];return("rightArrow"===s||"tab"===s)&&(r[0]=e[0],r[1]=-1),("downArrow"===s||"enter"===s)&&(r[0]=-1,r[1]=e[1]),r}}class FPe extends xZ{jump(e,t){const i=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,s=i&&!f(i[t[0]]),r=0!==this.parent.frozenRows&&"enter"===e,o=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];return{swap:("downArrow"===e||r)&&t[0]===this.matrix.matrix.length-1||s&&o,toHeader:o,toFrozenRight:("downArrow"===e||r)&&t[0]===this.matrix.matrix.length-1}}getTable(){return this.parent.getHeaderContent().querySelector(".e-frozen-right-header .e-table")}getNextCurrent(e=[],t,i,s){const r=[];return("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(r[0]=e[0],r[1]=0),("upArrow"===s||"shiftEnter"===s)&&(r[0]=this.matrix.matrix.length,r[1]=e[1]),r}}var O_=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class fS extends ii{}O_([_(12)],fS.prototype,"pageSize",void 0),O_([_(8)],fS.prototype,"pageCount",void 0),O_([_(1)],fS.prototype,"currentPage",void 0),O_([_()],fS.prototype,"totalRecordsCount",void 0),O_([_(!1)],fS.prototype,"enableQueryString",void 0),O_([_(!1)],fS.prototype,"pageSizes",void 0),O_([_(null)],fS.prototype,"template",void 0);var npe=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class EZ extends ii{}npe([_("startsWith")],EZ.prototype,"operator",void 0),npe([_(!1)],EZ.prototype,"ignoreAccent",void 0);class NPe{constructor(e,t,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=e,this.selectionSettings=t,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}initializeSelection(){this.parent.log("selection_key_missing"),this.render()}onActionBegin(e,t){this.parent.trigger(t,this.fDataUpdate(e))}fDataUpdate(e){if(!(this.isMultiSelection||f(e.cellIndex)&&f(e.rowIndex))){const t=this.getRowObj(f(e.rowIndex)?f(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=t.foreignKeyData}return e}onActionComplete(e,t){this.parent.trigger(t,this.fDataUpdate(e)),this.isMultiSelection=!1}getModuleName(){return"selection"}destroy(){const e=this.parent.element;!e||!e.querySelector("."+to)&&!e.querySelector("."+io)||(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),this.unWireEvents(),k.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),k.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))}isEditing(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection}getSelectedMovableRow(e){const t=this.parent;return t.isFrozenGrid()&&this.parent.getContent().querySelector("."+zs)?t.getMovableRowByIndex(e):null}getSelectedFrozenRightRow(e){const t=this.parent;return t.isFrozenGrid()&&t.getFrozenMode()===Zt&&t.getFrozenRightContent()?t.getFrozenRightRowByIndex(e):null}getCurrentBatchRecordChanges(){const e=this.parent;if("Batch"===e.editSettings.mode&&e.editModule){let t=oF(this.parent.getCurrentViewRecords());t="Bottom"===e.editSettings.newRowPosition?t.concat(this.parent.editModule.getBatchChanges()[Eg]):this.parent.editModule.getBatchChanges()[Eg].concat(t);const i=this.parent.editModule.getBatchChanges()[A_],s=this.parent.getPrimaryKeyFieldNames()[0];for(let r=0;r<i.length;r++)for(let o=0;o<t.length;o++)if(i[r][s]===t[o][s]){t.splice(o,1);break}return t}return e.getCurrentViewRecords()}selectRow(e,t){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)return void this.addRowsToSelection([e]);const i=this.parent,s=i.getRowByIndex(e),r=this.getSelectedMovableRow(e),o=this.getSelectedFrozenRightRow(e);let a;if(i.enableVirtualization&&e>-1){const b={selectedIndex:e,isAvailable:!0};this.parent.notify("select-virtual-Row",b);const v=i.isFrozenGrid()?i.contentModule.getRowObjectByIndex(e):null;if(!s||!i.getRowObjectFromUID(s.getAttribute("data-uid"))&&!v)return void(b.isAvailable&&!i.selectionSettings.persistSelection&&this.parent.getSelectedRecords().length>0&&this.clearRowSelection());a=v||i.getRowObjectFromUID(s.getAttribute("data-uid")).data}else a=this.getRowObj(e).data;if(!this.isRowType()||!s||this.isEditing())return;const h=s.hasAttribute("aria-selected");let c;this.activeTarget(),t=t&&!(!this.selectedRowIndexes.length||1!==this.selectedRowIndexes.length)&&(!this.isKeyAction||!this.parent.isCheckBoxSelection)&&e===this.selectedRowIndexes[0],this.isKeyAction=!1;const m="cancel";t?this.rowSelectingCallBack(c,t,e,a,!1,h,m)(c):(c={data:a,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:s,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},c=this.addMovableArgs(c,r,o),this.parent.trigger(IY,this.fDataUpdate(c),this.rowSelectingCallBack(c,t,e,a,!1,h,m)))}rowSelectingCallBack(e,t,i,s,r,o,a){return l=>{f(l)||!0!==l[a]?(this.index=i,this.toggle=t,this.data=s,this.removed=r,o&&this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode?(this.clearSelectedRow(i),this.selectRowCallBack()):!o&&this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&this.selectRowCallBack(),"ResetOnRowClick"===this.selectionSettings.checkboxMode&&this.clearSelection(),(!this.selectionSettings.persistSelection||"ResetOnRowClick"===this.selectionSettings.checkboxMode||!this.parent.isCheckBoxSelection&&this.selectionSettings.persistSelection)&&(this.selectRowCheck=!0,this.clearRow())):this.disableInteracted()}}selectRowCallBack(){const e=this.parent;let t;const i=this.index,s=this.toggle,r=this.data,o=this.removed,a=e.getRowByIndex(i),l=this.getSelectedMovableRow(i),h=this.getSelectedFrozenRightRow(i);!s&&!o&&(this.selectedRowIndexes.indexOf(i)<=-1&&(this.updateRowSelection(a,i),this.selectMovableRow(l,h,i)),this.selectRowIndex(i)),s||(t={data:r,rowIndex:i,row:a,previousRow:e.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked},t=this.addMovableArgs(t,l,h),this.onActionComplete(t,l1)),this.isInteracted=!1,this.updateRowProps(i)}selectMovableRow(e,t,i){this.parent.isFrozenGrid()&&(this.updateRowSelection(e,i),this.parent.getFrozenMode()===Zt&&t&&this.updateRowSelection(t,i))}addMovableArgs(e,t,i){if(this.parent.isFrozenGrid()){const s={mRow:t,previousMovRow:this.parent.getMovableRows()[this.prevRowIndex]},r="frozenRightRow",o="previousFrozenRightRow";this.parent.getFrozenMode()===Zt&&i&&(s[r]=i,s[o]=this.parent.getFrozenRightDataRows()[this.prevRowIndex]),e=Object.assign({},e,s)}return e}selectRowsByRange(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.selectRowIndex(t)}selectedDataUpdate(e,t,i,s){for(let r=0,o=s.length;r<o;r++){const a=this.parent.getDataRows()[s[r]],l=this.getRowObj(a);l&&(e.push(l.data),i.push(a),t.push(l.foreignKeyData))}}selectRows(e){const t=this.parent,i=this.isSingleSel()?e[e.length-1]:e[0];this.isMultiSelection=!0;const s=[],r=[],o=this.getSelectedMovableRow(i),a=this.getSelectedFrozenRightRow(i),h=[];if(!this.isRowType()||this.isEditing())return;this.selectedDataUpdate(h,r,s,e),this.activeTarget();let c={cancel:!1,rowIndexes:e,row:s,rowIndex:i,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:h,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:r};c=this.addMovableArgs(c,o,a),this.parent.trigger(IY,this.fDataUpdate(c),m=>{if(!f(m)&&!0===m.cancel)return void this.disableInteracted();this.clearRow(),this.selectRowIndex(e.slice(-1)[0]);const b=v=>{if(this.updateRowSelection(t.getRowByIndex(v),v),t.isFrozenGrid()){const w=this.parent.getFrozenMode()===Zt?t.getFrozenRightRowByIndex(v):void 0;this.selectMovableRow(t.getMovableRowByIndex(v),w,v)}this.updateRowProps(i)};if(this.isSingleSel())b(i);else for(const v of e)b(v);m={rowIndexes:e,row:s,rowIndex:i,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,data:this.getSelectedRecords(),isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:r},m=this.addMovableArgs(m,o,a),this.isRowSelected&&this.onActionComplete(m,l1),this.isInteracted=!1})}addRowsToSelection(e){const t=this.parent,s=this.target;this.isMultiSelection=!0;const r=[],o=[],a=[],l=t.getSelectedRowIndexes().concat(e),h=this.isSingleSel()?t.getRowByIndex(e[e.length-1]):t.getRowByIndex(e[0]),c=this.isSingleSel()?this.getSelectedMovableRow(e[e.length-1]):this.getSelectedMovableRow(e[0]),m=this.isSingleSel()?this.getSelectedFrozenRightRow(e[e.length-1]):this.getSelectedFrozenRightRow(e[0]);if((!this.isRowType()||this.isEditing())&&!this.selectionSettings.checkboxOnly)return;let b;const v=this.parent.getColumns().filter(w=>"checkbox"===w.type);this.isMultiCtrlRequest&&!v.length&&this.selectedDataUpdate(a,o,r,l);for(const w of e){const E=this.getRowObj(w),D=this.selectedRowIndexes.indexOf(w)>-1;if(this.selectRowIndex(w),D&&(v.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(eue,[w],[E.data],[h],[E.foreignKeyData],s),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(w),1),this.selectedRecords.splice(this.selectedRecords.indexOf(h),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),h.removeAttribute("aria-selected"),this.addRemoveClassesForRow(h,!1,null,"e-selectionbackground","e-active"),c&&(this.selectedRecords.splice(this.selectedRecords.indexOf(c),1),c.removeAttribute("aria-selected"),this.addRemoveClassesForRow(c,!1,null,"e-selectionbackground","e-active")),m&&(this.selectedRecords.splice(this.selectedRecords.indexOf(m),1),m.removeAttribute("aria-selected"),this.addRemoveClassesForRow(m,!1,null,"e-selectionbackground","e-active")),this.rowDeselect(Yj,[w],[E.data],[h],[E.foreignKeyData],s,[c],void 0,[m]),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1}else{if(this.activeTarget(),b={cancel:!1,data:a.length?a:E.data,rowIndex:w,row:r.length?r:h,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:o.length?o:E.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},b=this.addMovableArgs(b,c,m),this.parent.trigger(IY,this.fDataUpdate(b)),!f(b)&&!0===b.cancel)return void this.disableInteracted();this.isSingleSel()&&this.clearRow(),this.updateRowSelection(h,w),this.selectMovableRow(c,m,w)}if(D||(b={data:a.length?a:E.data,rowIndex:w,row:r.length?r:h,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:o.length?o:E.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},b=this.addMovableArgs(b,c,m),this.onActionComplete(b,l1)),this.isInteracted=!1,this.updateRowProps(w),this.isSingleSel())break}}getCollectionFromIndexes(e,t){const i=[];let{i:s,max:r}=e<=t?{i:e,max:t}:{i:t,max:e};for(;s<=r;s++)i.push(s);return e>t&&i.reverse(),i}clearRow(){this.clearRowCheck=!0,this.clearRowSelection()}clearRowCallBack(){this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))}clearSelectedRow(e){if(this.toggle){const t=this.parent.getRowByIndex(e);this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(t,!1),this.updateCheckBoxes(t),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}}updateRowProps(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0}updatePersistCollection(e,t){if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!f(e)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();const i=this.getRowObj(e),s=i.data?i.data[this.primaryKey]:null;if(null===s)return;i.isSelected=t,t?(this.selectedRowState[s]=t,this.persistSelectedData.some(r=>r[this.primaryKey]===s)||this.persistSelectedData.push(i.data)):this.updatePersistDelete(s)}}updatePersistDelete(e){let t;delete this.selectedRowState[e],this.persistSelectedData.some((s,r)=>(t=r,s[this.primaryKey]===e))&&this.persistSelectedData.splice(t,1)}updateCheckBoxes(e,t,i){if(!f(e)){const s=e.querySelector(".e-checkselect");f(s)||(cF(s.nextElementSibling,t),B_(s,t),(f(this.checkedTarget)||!f(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(i))}}updateRowSelection(e,t){if(!e)return;this.selectedRowIndexes.push(t);const i=this.selectedRowIndexes.length;if(this.parent.isFrozenGrid()&&i>1&&this.selectedRowIndexes[i-2]===this.selectedRowIndexes[i-1]&&this.selectedRowIndexes.pop(),this.selectedRecords.push(e),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus){let s=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&2===this.mouseButton&&(s=this.parent.contextMenuModule.cell),!s)return;this.focus.onClick({target:s},!0)}}clearSelection(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=oF(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!f(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){const e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1}}clearRowSelection(){if(this.isRowSelected){const e=this.parent,t=this.parent.getDataRows(),i=[],s=[],r=[],o=[],a=[],l=[],h=this.target;for(let c=0,m=this.selectedRowIndexes.length;c<m;c++){const b="Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[c]]:this.parent.getDataRows()[this.selectedRowIndexes[c]],v=this.getRowObj(b);if(v&&(i.push(v.data),s.push(b),a.push(this.selectedRowIndexes[c]),l.push(v.foreignKeyData)),e.isFrozenGrid()){const w=e.getMovableRows();if(w&&w.length&&r.push(w[this.selectedRowIndexes[c]]),e.getFrozenMode()===Zt){const E=e.getFrozenRightRows();E&&E.length&&o.push(E[this.selectedRowIndexes[c]])}}}this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(eue,a,i,s,l,h,r,()=>{if(this.isCancelDeSelect&&(this.isRowClicked||this.checkSelectAllClicked||this.isInteracted&&!this.parent.isPersistSelection)){if(this.parent.isPersistSelection)if("Intermediate"===this.getCheckAllStatus(this.parent.element.querySelector(".e-checkselectall")))for(let m=0;m<this.selectedRecords.length;m++)this.updatePersistCollection(this.selectedRecords[m],!0);else this.parent.checkAllRows="Check",this.updatePersistSelectedData(!0);return void(this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1)))}const c=[].slice.call(t.filter(m=>m.hasAttribute("aria-selected")));for(let m=0;m<c.length;m++)this.disableUI||(c[m].removeAttribute("aria-selected"),this.addRemoveClassesForRow(c[m],!1,!0,"e-selectionbackground","e-active")),this.isPrevRowSelection||this.updatePersistCollection(c[m],!1),this.updateCheckBoxes(c[m]);for(let m=0,b=this.selectedRowIndexes.length;m<b;m++){const v=this.getSelectedMovableRow(this.selectedRowIndexes[m]);v&&(this.disableUI||(v.removeAttribute("aria-selected"),this.addRemoveClassesForRow(v,!1,!0,"e-selectionbackground","e-active")),this.updateCheckBoxes(v),this.isPrevRowSelection||this.updatePersistCollection(v,!1));const w=this.getSelectedFrozenRightRow(this.selectedRowIndexes[m]);w&&(this.disableUI||(w.removeAttribute("aria-selected"),this.addRemoveClassesForRow(w,!1,!0,"e-selectionbackground","e-active")),this.updateCheckBoxes(w),this.isPrevRowSelection||this.updatePersistCollection(w,!1))}this.selectedRowIndexes=[],this.selectedRecords=[],this.isRowSelected=!1,this.selectRowIndex(-1),this.isPrevRowSelection=!1,this.rowDeselect(Yj,a,i,s,l,h,r,void 0,o),this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},o)}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))}rowDeselect(e,t,i,s,r,o,a,l,h){if(this.selectionSettings.persistSelection&&(this.isRowClicked||this.checkSelectAllClicked)||!this.selectionSettings.persistSelection){const c="cancel",m=1===t.length&&1===this.deSelectedData.length,b={rowIndex:t[0],data:this.selectionSettings.persistSelection&&"Uncheck"===this.parent.checkAllRows&&!m&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode?this.deSelectedData:i,foreignKeyData:r,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};"rowDeselected"===e&&delete b.cancel;const v="row",w="target",E="rowIndex",D="rowIndexes",L="data",N="foreignKeyData";b[v]=s,b[w]=this.actualTarget,this.actualTarget&&!f(B(this.actualTarget,"thead"))||t.length>1?(b[E]=t[0],b[D]=t):1===t.length&&(b[L]=b[L][0],b[v]=b[v][0],b[N]=b[N][0],this.isAddRowsToSelection&&(b[D]=t)),this.parent.trigger(e,this.parent.isFrozenGrid()?Object.assign({},b,{mRow:a,frozenRightRow:h}):b,$=>{this.isCancelDeSelect=$[c],(!this.isCancelDeSelect||!this.isRowClicked&&!this.isInteracted&&!this.checkSelectAllClicked)&&(this.updatePersistCollection(s[0],!1),this.updateCheckBoxes(s[0],void 0,t[0]),a&&this.updateCheckBoxes(a[0],void 0,t[0]),h&&this.updateCheckBoxes(h[0],void 0,t[0])),void 0!==l&&l()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==l&&l()}getRowObj(e=this.currentIndex){return f(e)?{}:("number"==typeof e&&(e=this.parent.getRowByIndex(e)),e&&this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{})}getSelectedMovableCell(e){const t=this.parent,i=t.getColumnByIndex(e.cellIndex);return t.isFrozenGrid()&&"movable"===i.getFreezeTableName()?t.getMovableCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex)):null}selectCell(e,t){if(!this.isCellType())return;const i=this.parent;let r,s=this.getSelectedMovableCell(e);s||(s=i.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex))),this.currentIndex=e.rowIndex;const o=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isCellType()||!s||this.isEditing())return;const a=s.classList.contains("e-cellselectionbackground");(t=t&&!li(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&a)?this.successCallBack(r,t,e,s,o)(r):(r={data:o,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1},r.currentCell=s,r.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(zP,this.fDataUpdate(r),this.successCallBack(r,t,e,s,o)),this.cellselected=!0)}successCallBack(e,t,i,s,r){return o=>{const l="currentCell";if((f(o)||!0!==o.cancel)&&(t||(o[l]=o[l]?o[l]:s),this.clearCell(),t||this.updateCellSelection(s,i.rowIndex,i.cellIndex),!t)){const h={data:r,cellIndex:i,currentCell:s,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};h.previousRowCellIndex=this.prevECIdxs,this.updateCellProps(i,i),this.onActionComplete(h,Zj)}}}getCellIndex(e,t){return this.parent.getFrozenColumns()&&t>=this.parent.getFrozenColumns()?this.parent.getMovableCellFromIndex(e,t):this.parent.getCellFromIndex(e,t)}selectCellsByRange(e,t){if(!this.isCellType())return;const i=this.parent;let s=this.getSelectedMovableCell(e);const r=i.getFrozenColumns();let o,a;s||(s=i.getCellFromIndex(e.rowIndex,e.cellIndex));const l=e,h=t=t||e;let c;this.currentIndex=e.rowIndex;const b=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isSingleSel()||!this.isCellType()||this.isEditing())return;const v={data:b,cellIndex:e,currentCell:s,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};v.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(zP,this.fDataUpdate(v),E=>{if(!f(E)&&!0===E.cancel)return;if(this.clearCell(),e.rowIndex>t.rowIndex){const N=e;e=t,t=N}for(let N=e.rowIndex;N<=t.rowIndex;N++){this.selectionSettings.cellSelectionMode.indexOf("Box")<0?(o=N===e.rowIndex?e.cellIndex:0,a=N===t.rowIndex?t.cellIndex:this.getLastColIndex(N)):(o=e.cellIndex,a=t.cellIndex),c=[];for(let V=o<a?o:a,$=o>a?o:a;V<=$;V++)s=r?V<r?i.getCellFromIndex(N,V):i.getMovableCellFromIndex(N,V):i.getCellFromIndex(N,V),s&&(c.push(V),this.updateCellSelection(s),this.addAttribute(s));this.selectedRowCellIndexes.push({rowIndex:N,cellIndexes:c})}const D={data:b,cellIndex:h,currentCell:i.getCellFromIndex(h.rowIndex,h.cellIndex),selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};D.previousRowCellIndex=this.prevECIdxs,this.isDragged||(this.onActionComplete(D,Zj),this.cellselected=!0),this.updateCellProps(l,h)})}selectCells(e){if(!this.isCellType())return;const t=this.parent;let i=this.getSelectedMovableCell(e[0]);const s=t.getFrozenColumns();i||(i=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0])),this.currentIndex=e[0].rowIndex;const r=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isSingleSel()||!this.isCellType()||this.isEditing())return;const o={data:r,cellIndex:e[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};o.previousRowCellIndex=this.prevECIdxs,this.onActionBegin(o,zP);for(let c=0,m=e.length;c<m;c++)for(let b=0,v=e[c].cellIndexes.length;b<v;b++)i=s?e[c].cellIndexes[b]<s?t.getCellFromIndex(e[c].rowIndex,e[c].cellIndexes[b]):t.getMovableCellFromIndex(e[c].rowIndex,e[c].cellIndexes[b]):t.getCellFromIndex(e[c].rowIndex,e[c].cellIndexes[b]),i&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:e[c].rowIndex,cellIndex:e[c].cellIndexes[b]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]});const l={data:r,cellIndex:e[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};l.previousRowCellIndex=this.prevECIdxs,this.onActionComplete(l,Zj)}addCellsToSelection(e){if(!this.isCellType())return;const t=this.parent;let i,s;this.currentIndex=e[0].rowIndex;const o=this.getCurrentBatchRecordChanges()[this.currentIndex],a=t.getFrozenLeftCount(),l=t.getMovableColumnsCount();if(this.isSingleSel()||!this.isCellType()||this.isEditing())return;this.hideAutoFill();const h=t.getColumnByIndex(e[0].cellIndex);let c;(function yS(n,e,t,i,s){(t[0].length||i)&&(s?e(or,t[0],s[0]):e(or,t[0])),n.isFrozenGrid()&&(t[1].length||i)&&(s?e("movable",t[1],s[1]):e("movable",t[1])),(n.getFrozenMode()===Zt||"Right"===n.getFrozenMode())&&(t[2].length||i)&&(s?e(an,t[2],s[2]):e(an,t[2]))})(this.parent,(b,v)=>{c=v[e[0].rowIndex]},[h.getFreezeTableName()&&h.getFreezeTableName()!==or?[]:t.getRowsObject(),"movable"===h.getFreezeTableName()?t.getMovableRowsObject():[],h.getFreezeTableName()===an?t.getFrozenRightRowsObject():[]]),t.groupSettings.columns.length>0&&(c=t.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));const m=[];for(const b of e){for(let L=0,N=this.selectedRowCellIndexes.length;L<N;L++)if(this.selectedRowCellIndexes[L].rowIndex===b.rowIndex){s=L;break}i=this.getSelectedMovableCell(b),i||(i=t.getCellFromIndex(b.rowIndex,this.getColIndex(b.rowIndex,b.cellIndex)));const v="movable"===h.getFreezeTableName()?b.cellIndex-a:h.getFreezeTableName()===an?b.cellIndex-(a+l):b.cellIndex;m.push(t.groupSettings.columns.length>0?c.cells[v+t.groupSettings.columns.length].foreignKeyData:c.cells[v].foreignKeyData);const w={cancel:!1,data:o,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?t.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},E="previousRowCellIndex";w[E]=this.prevECIdxs;let D=s>-1;if(D){const L=this.selectedRowCellIndexes[s].cellIndexes;L.indexOf(b.cellIndex)>-1?(this.cellDeselect(tue,[{rowIndex:b.rowIndex,cellIndexes:[b.cellIndex]}],o,[i],m),L.splice(L.indexOf(b.cellIndex),1),0===L.length&&this.selectedRowCellIndexes.splice(s,1),i.classList.remove("e-cellselectionbackground"),i.removeAttribute("aria-selected"),this.cellDeselect(iue,[{rowIndex:b.rowIndex,cellIndexes:[b.cellIndex]}],o,[i],m)):(D=!1,this.onActionBegin(w,zP),this.addRowCellIndex({rowIndex:b.rowIndex,cellIndex:b.cellIndex}),this.updateCellSelection(i),this.addAttribute(i))}else{if(this.onActionBegin(w,zP),!f(w)&&!0===w.cancel)return;this.updateCellSelection(i,b.rowIndex,b.cellIndex)}if(!D){const L={data:o,cellIndex:e[0],currentCell:i,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};L[E]=this.prevECIdxs,this.onActionComplete(L,Zj),this.cellselected=!0}this.updateCellProps(b,b)}}getColIndex(e,t){const i=this.parent.isFrozenGrid(),s=this.parent.getColumnByIndex(t),r=Cpe(this.parent,s,e);if(r)for(let o=0;o<r.length;o++)if(parseInt(r[o].getAttribute(Vr),10)===t)return i&&("movable"===s.getFreezeTableName()?o+=this.parent.getFrozenLeftCount():s.getFreezeTableName()===an&&(o+=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount())),o;return-1}getLastColIndex(e){const t=this.parent.getFrozenColumns()?this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute(Vr),10)}clearCell(){this.clearCellSelection()}cellDeselect(e,t,i,s,r){s[0]&&s[0].classList.contains(R_)&&this.updateCheckBoxes(B(s[0],"tr"));const a={cells:s,data:i,cellIndexes:t,foreignKeyData:r,cancel:!1};this.parent.trigger(e,a),this.isPreventCellSelect=a.cancel}updateCellSelection(e,t,i){f(t)||this.addRowCellIndex({rowIndex:t,cellIndex:i}),e.classList.add("e-cellselectionbackground"),e.classList.contains(R_)&&this.updateCheckBoxes(B(e,"tr"),!0),this.addAttribute(e)}addAttribute(e){this.target=e,f(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))}updateCellProps(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0}addRowCellIndex(e){let t,i;for(let s=0,r=this.selectedRowCellIndexes.length;s<r;s++)if(this.selectedRowCellIndexes[s].rowIndex===e.rowIndex){t=!0,i=s;break}t?this.selectedRowCellIndexes[i].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[i].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})}clearCellSelection(){if(this.isCellSelected){const e=this.parent,t=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,s=[],r=[],o=[],a=this.getCurrentBatchRecordChanges(),l=e.isFrozenGrid();this.hideAutoFill();for(let h=0,c=i.length;h<c;h++){s.push(a[i[h].rowIndex]);const m=this.getRowObj(i[h].rowIndex);for(let b=0,v=i[h].cellIndexes.length;b<v;b++)if(l){const w=e.getColumnByIndex(i[h].cellIndexes[b]);r.push(NZ(this.parent,w,i[h].rowIndex,i[h].cellIndexes[b]))}else m.cells&&o.push(m.cells[i[h].cellIndexes[b]].foreignKeyData),r.push(e.getCellFromIndex(i[h].rowIndex,i[h].cellIndexes[b]))}if(this.cellDeselect(tue,i,s,r,o),!0===this.isPreventCellSelect)return;for(let h=0,c=t.length;h<c;h++)t[h].classList.remove("e-cellselectionbackground"),t[h].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(iue,i,s,r,o)}}getSelectedCellsElement(){const e=this.parent;let i,t=e.getDataRows();e.isFrozenGrid()&&(i=e.getMovableDataRows(),t=e.addMovableRows(t,i),e.getFrozenMode()===Zt&&(t=e.addMovableRows(t,e.getFrozenRightDataRows())));let s=[];for(let r=0,o=t.length;r<o;r++)s=s.concat([].slice.call(t[r].getElementsByClassName("e-cellselectionbackground")));return s}mouseMoveHandler(e){e.preventDefault();const t=this.parent.element.getBoundingClientRect();let i=this.x,s=this.y;const r=mS(e);let l,o=r.x-t.left,a=r.y-t.top,h=B(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(h||(h=B(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),i>o&&(l=o,o=i,i=l),s>a&&(l=a,a=s,s=l),this.element.style.left=i+"px",this.element.style.top=s+"px",this.element.style.width=o-i+"px",this.element.style.height=a-s+"px"),h&&!e.ctrlKey&&!e.shiftKey){const c=parseInt(h.getAttribute(Di),10);if(this.isCellDrag){const m=Te(e.target,Ji);m&&(this.startAFCell=this.startCell,this.endAFCell=Te(e.target,Ji),this.selectLikeExcel(e,c,parseInt(m.getAttribute(Vr),10)))}else this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,c),this.isRowDragSelected=!0}}selectLikeExcel(e,t,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:i}),this.drawBorders())}drawBorders(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders()):this.showHideBorders("none")}isLastCell(e){const t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]===e}isLastRow(e){const t=[].slice.call(B(e,Je).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[t.length-1]}isFirstRow(e){const t=[].slice.call(B(e,Je).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]}isFirstCell(e){return[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===e}setBorders(e,t,i){const s=[].slice.call(e.getElementsByClassName("e-cellselectionbackground")).filter(r=>""===r.style.display);if(s.length){const r=this.parent.isFrozenGrid(),o=s[0],a=s[s.length-1],l=o.getBoundingClientRect(),h=a.getBoundingClientRect(),c=o.offsetParent.getBoundingClientRect(),m=!this.isLastRow(a)||"1"!==i&&"2"!==i&&"5"!==i?0:2,b=this.parent.frozenRows&&("1"===i||"2"===i)&&this.isFirstRow(o)?1.5:0,v=r&&("2"===i||"4"===i)&&this.isFirstCell(o)?1:0,w=("Right"!==this.parent.getFrozenMode()||"1"!==i&&"3"!==i)&&(this.parent.getFrozenMode()!==Zt||"5"!==i&&"6"!==i)||!this.isFirstCell(o)?0:1;this.parent.enableRtl?(t.style.right=c.right-l.right-v+"px",t.style.width=l.right-h.left+v+1+"px"):(t.style.left=l.left-c.left-v-w+"px",t.style.width=h.right-l.left+v-w+1+"px"),t.style.top=l.top-c.top-b+"px",t.style.height=h.top-l.top>0?h.top-c.top+h.height+1-(l.top-c.top)-m+b+"px":h.height+b-m+1+"px",this.selectDirection+=i}else t.style.display="none"}positionBorders(){this.updateStartEndCells(),this.startCell&&this.bdrElement&&this.selectedRowCellIndexes.length&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.contentModule.getMovableContent(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===Zt&&this.setBorders(this.parent.contentModule.getFrozenRightContent(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.headerModule.getMovableHeader(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===Zt&&this.setBorders(this.parent.headerModule.getFrozenRightHeader(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))}applyBothFrozenBorders(e){const t=this.parent.enableRtl;switch(e.length){case 6:this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right;break;case 4:e.includes("1")&&e.includes("2")&&e.includes("3")&&e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom),e.includes("2")&&e.includes("4")&&e.includes("5")&&e.includes("6")&&(this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom);break;case 2:e.includes("1")&&(this.mcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),e.includes("2")&&(this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),e.includes("3")&&(this.mhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),e.includes("5")&&(this.mcBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),e.includes("6")&&(this.mhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border)}}applyBorders(e){const t=this.parent.enableRtl;if(this.parent.getFrozenMode()===Zt)this.applyBothFrozenBorders(e);else switch(e.length){case 4:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 2:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border))}}createBorders(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild(Be("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.contentModule.getMovableContent().appendChild(Be("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===Zt&&(this.frcBdrElement=this.parent.contentModule.getFrozenRightContent().appendChild(Be("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(Be("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.headerModule.getMovableHeader().appendChild(Be("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===Zt&&(this.frhBdrElement=this.parent.headerModule.getFrozenRightHeader().appendChild(Be("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))}showHideBorders(e){this.bdrElement&&(this.bdrElement.style.display=e,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.display=e,this.parent.getFrozenMode()===Zt&&(this.frcBdrElement.style.display=e)),this.parent.frozenRows&&(this.fhBdrElement.style.display=e),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement.style.display=e,this.parent.getFrozenMode()===Zt&&(this.frhBdrElement.style.display=e)))}drawAFBorders(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()}positionAFBorders(){if(!this.startCell||!this.bdrAFLeft)return;const e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),i=t.top-e.top>0?1:0,s=t.top-e.top>=0&&(Te(this.startAFCell,zs)||Te(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,r=(Te(this.startAFCell,zs)||Te(this.startAFCell,js))&&this.isFirstCell(this.startAFCell)?1:0,o=this.isLastRow(this.endAFCell)&&(Te(this.endAFCell,zs)||Te(this.endAFCell,"e-frozencontent"))?2:0,a=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect();let m=this.startAFCell.offsetParent.parentElement.scrollTop-this.startAFCell.offsetTop,b=this.startAFCell.offsetParent.parentElement.scrollLeft-this.startAFCell.offsetLeft;const v=this.parent.element.clientHeight,w=this.parent.element.clientWidth;m=m>0?Math.floor(m)-1:0,b=b>0?b:0;const E=e.left-l.left;if(this.parent.enableRtl){const D=Te(this.startAFCell,zs)||Te(this.startAFCell,js)?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;this.bdrAFLeft.style.right=l.right-t.right-2+t.width+"px",this.bdrAFLeft.style.width=w<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",this.bdrAFRight.style.right=l.right-e.right-r+D-1+"px",this.bdrAFTop.style.left=t.left-l.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-r+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=E-r+b-1+"px",this.bdrAFRight.style.left=t.left-l.left-2+t.width+"px",this.bdrAFRight.style.width=w<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=E+b-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-r+1+"px",w<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){const D=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-w;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-D+"px"}if(this.bdrAFLeft.style.top=e.top-l.top-s+m+"px",this.bdrAFLeft.style.height=t.top-e.top>0?t.top-a.top+t.height+1-(e.top-a.top)+s-o-m+"px":t.height+s-o-m+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=v<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,v<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){const D=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-v;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-D+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}createAFBorders(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild(Be("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild(Be("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild(Be("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild(Be("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))}showAFBorders(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")}hideAFBorders(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")}updateValue(e,t,i){const s=this.createBeforeAutoFill(e,t,i);if(!s.cancel){const r=this.parent.getColumnByIndex(t);this.parent.editModule&&i&&this.parent.editModule.updateCell(e,r.field,"number"===r.type?parseFloat(s.value):s.value)}}createBeforeAutoFill(e,t,i){const r={column:this.parent.getColumnByIndex(t),value:i.innerText};return this.parent.trigger("beforeAutoFill",r),r}getAutoFillCells(e,t){const i=".e-cellselectionbackground";let s=[].slice.call(this.parent.getDataRows()[e].querySelectorAll(i));return this.parent.isFrozenGrid()&&(s=s.concat([].slice.call(this.parent.getMovableDataRows()[e].querySelectorAll(i))),this.parent.getFrozenMode()===Zt&&(s=s.concat([].slice.call(this.parent.getFrozenRightDataRows()[e].querySelectorAll(i))))),s}selectLikeAutoFill(e,t){const i=parseInt(Te(this.startAFCell,ps).getAttribute(Di),10),s=parseInt(this.startAFCell.getAttribute(Vr),10);let r=parseInt(Te(this.endAFCell,ps).getAttribute(Di),10),o=parseInt(this.endAFCell.getAttribute(Vr),10);const a=this.selectedRowCellIndexes.length-1,l=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!Te(e.target,Ji):this.startAFCell=this.parent.getCellFromIndex(i,s),this.endAFCell=this.parent.getCellFromIndex(i+a,s+l),this.drawAFBorders();break;case this.autoFillRLselection&&s+l<o&&o-s-l+1>r-i-a&&o-s-l+1>i-r:if(this.endAFCell=this.parent.getCellFromIndex(i+a,o),r=parseInt(Te(this.endAFCell,ps).getAttribute(Di),10),o=parseInt(this.endAFCell.getAttribute(Vr),10),t){const h=parseInt(this.endCell.getAttribute(Vr),10);for(let c=i;c<=r;c++){const m=this.getAutoFillCells(c,s);let b=0;for(let v=h+1;v<=o;v++)b>l&&(b=0),this.updateValue(c,v,m[b]),b++}this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:r,cellIndex:o})}else this.drawAFBorders();break;case this.autoFillRLselection&&s>o&&s-o+1>r-i-a&&s-o+1>i-r:if(this.startAFCell=this.parent.getCellFromIndex(i,o),this.endAFCell=this.endCell,t){for(let h=i;h<=i+a;h++){const c=this.getAutoFillCells(h,s);c.reverse();let m=0;for(let b=this.startCellIndex-1;b>=o;b--)m>l&&(m=0),this.updateValue(h,b,c[m]),m++}this.selectCellsByRange({rowIndex:i,cellIndex:o},{rowIndex:i+a,cellIndex:this.startCellIndex+l})}else this.drawAFBorders();break;case i>r:if(this.startAFCell=this.parent.getCellFromIndex(r,s),this.endAFCell=this.endCell,t){const h=parseInt(this.endCell.parentElement.getAttribute(Di),10);let c=h;for(let m=i-1;m>=r;m--){c===this.startIndex-1&&(c=h);const b=this.getAutoFillCells(c,s);let v=0;c--;for(let w=this.startCellIndex;w<=this.startCellIndex+l;w++)this.updateValue(m,w,b[v]),v++}this.selectCellsByRange({rowIndex:r,cellIndex:s+l},{rowIndex:i+a,cellIndex:s})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(r,s+l),t){const h=parseInt(this.endCell.parentElement.getAttribute(Di),10);let c=this.startIndex;for(let m=h+1;m<=r;m++){c===h+1&&(c=this.startIndex);const b=this.getAutoFillCells(c,s);c++;let v=0;for(let w=this.startCellIndex;w<=this.startCellIndex+l;w++)this.updateValue(m,w,b[v]),v++}this.selectCellsByRange({rowIndex:h-a,cellIndex:s},{rowIndex:r,cellIndex:s+l})}else this.drawAFBorders()}}mouseUpHandler(e){if(document.body.classList.remove("e-disableuserselect"),this.element&&Yt(this.element),this.mUPTarget=this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?Te(e.target,Ji):null,this.isDragged&&!this.isAutoFillSel&&"Cell"===this.selectionSettings.mode&&e.target.classList.contains(Ji)){const t=e.target,i=parseInt(t.parentElement.getAttribute(Di),10),s=parseInt(t.getAttribute(Vr),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:i,cellIndex:s})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){const t=Te(e.target,Ji);this.endAFCell=t||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.isAutoFillSel=!1}k.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&k.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),k.remove(document,"mouseup",this.mouseUpHandler)}hideAutoFill(){this.autofill&&(this.autofill.style.display="none")}updateAutoFillPosition(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){const e=parseInt(this.target.getAttribute(Vr),10),t=parseInt(this.target.getAttribute("index"),10),s=this.getAutoFillCells(this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,e).filter(c=>""===c.style.display),r=this.parent.getColumnByIndex(e),o="movable"===r.getFreezeTableName(),a=t<this.parent.frozenRows,l=this.parent.getFrozenMode()===Zt&&r.getFreezeTableName()===an;X("#"+this.parent.element.id+"_autofill",Te(this.target,tn))||(X("#"+this.parent.element.id+"_autofill",this.parent.element)&&X("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=Be("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",a?o?this.parent.headerModule.getMovableHeader().appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):o?this.parent.contentModule.getMovableContent().appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),l&&(a?this.parent.getFrozenRightHeader().appendChild(this.autofill):this.parent.getFrozenRightContent().appendChild(this.autofill)));const h=s[s.length-1];if(h&&h.offsetParent){const c=h.getBoundingClientRect(),m=h.offsetParent.getBoundingClientRect(),b=this.isLastCell(h)?4:0,v=this.isLastRow(h)?3:0;this.parent.enableRtl?this.autofill.style.right=m.right-c.right+c.width-4-b+"px":this.autofill.style.left=c.left-m.left+c.width-4-b+"px",this.autofill.style.top=c.top-m.top+c.height-5-v+"px"}this.autofill.style.display=""}else this.hideAutoFill()}mouseDownHandler(e){this.mouseButton=e.button;const t=e.target,i=this.parent;let s;const r=Te(t,"e-grid");if(!(r&&r.id!==i.element.id||Te(t,Hr)&&!this.parent.frozenRows||Te(t,"e-editedbatchcell")||Te(t,zl))){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),Te(t,Ji)&&!e.shiftKey&&!e.ctrlKey){if(i.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,s=!0;else if(i.allowRowDragAndDrop&&!i.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||B(t,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);s=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),i.getContent().appendChild(this.element)}s&&this.enableDrag(e,!0)}this.updateStartEndCells(),(t.classList.contains("e-autofill")||t.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}}updateStartEndCells(){const e=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(Di),10),this.startCellIndex=parseInt(Te(this.startCell,Ji).getAttribute(Vr),10))}updateStartCellsIndex(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(Di),10),this.startCellIndex=parseInt(Te(this.startCell,Ji).getAttribute(Vr),10))}enableDrag(e,t){const i=this.parent;if(t){const o=B(e.target,"tr");this.startDIndex=parseInt(o.getAttribute(Di),10),this.startDCellIndex=parseInt(Te(e.target,Ji).getAttribute(Vr),10)}document.body.classList.add("e-disableuserselect");const s=i.element.getBoundingClientRect(),r=mS(e);this.x=r.x-s.left,this.y=r.y-s.top,k.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&k.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),k.add(document,"mouseup",this.mouseUpHandler,this)}clearSelAfterRefresh(e){"virtualscroll"!==e.requestType&&!this.parent.isPersistSelection&&(!this.parent.enableInfiniteScrolling||"infiniteScroll"!==e.requestType)&&this.clearSelection()}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:Rn,handler:this.enableAfterRender},{event:Bl,handler:this.initializeSelection},{event:"rowselected",handler:this.onActionComplete},{event:"cellselected",handler:this.onActionComplete},{event:Hl,handler:this.onPropertyChanged},{event:e3,handler:this.onCellFocused},{event:Due,handler:this.clearSelAfterRefresh},{event:p1,handler:this.columnPositionChanged},{event:Kn,handler:this.initialEnd},{event:t3,handler:this.rowsRemoved},{event:Go,handler:this.refreshHeader},{event:Qi,handler:this.destroy}],$a(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(un,this.actionBeginFunction),this.parent.addEventListener(Oi,this.actionCompleteFunction),this.addEventListener_checkbox())}removeEventListener(){this.parent.isDestroyed||($a(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(un,this.actionBeginFunction),this.parent.removeEventListener(Oi,this.actionCompleteFunction),this.removeEventListener_checkbox())}wireEvents(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS"),this.isMacOS?(k.add(this.parent.element,"keydown",this.keyDownHandler,this),k.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||k.add(this.parent.element,"keydown",this.keyDownHandler,this)}unWireEvents(){this.isMacOS?(k.remove(this.parent.element,"keydown",this.keyDownHandler),k.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||k.remove(this.parent.element,"keydown",this.keyDownHandler)}columnPositionChanged(){this.parent.isPersistSelection||this.clearSelection()}refreshHeader(){this.setCheckAllState()}rowsRemoved(e){for(let t=0;t<e.records.length;t++)delete this.selectedRowState[e.records[t][this.primaryKey]],--this.totalRecordsCount;this.setCheckAllState()}beforeFragAppend(e){"virtualscroll"!==e.requestType&&!this.parent.isPersistSelection&&this.clearSelection()}getCheckAllBox(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")}enableAfterRender(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.initPerisistSelection())}render(e){k.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),k.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)}onPropertyChanged(e){if(e.module!==this.getModuleName())return;const t=this.parent;!f(e.properties.type)&&"Single"===this.selectionSettings.type&&(this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()),(!f(e.properties.mode)||!f(e.properties.cellSelectionMode))&&(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection(),this.parent.getColumns().filter(s=>"checkbox"===s.type).length&&(t.isCheckBoxSelection="ResetOnRowClick"!==this.selectionSettings.checkboxMode),this.drawBorders()}hidePopUp(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")}initialEnd(e){const t=this.parent.isFrozenGrid(),i=this.parent.getFrozenMode()===Zt;(!t||t&&!i&&!e.args.isFrozen||i&&e.args.renderFrozenRightContent)&&!this.selectedRowIndexes.length&&(this.parent.off(Kn,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))}checkBoxSelectionChanged(){const e=this.parent;e.off(Kn,this.checkBoxSelectionChanged);const t=e.getColumns().filter(i=>"checkbox"===i.type);t.length>0&&(e.isCheckBoxSelection=!0,this.chkField=t[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,f(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),!e.isCheckBoxSelection&&!this.isPersisted&&(this.chkField=null,this.initPerisistSelection())}initPerisistSelection(){const e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})}ensureCheckboxFieldSelection(){const e=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!e.isPersistSelection)){const t=this.parent.getDataModule(),i=(new Ut).where(this.chkField,"equal",!0);i.params||(i.params=this.parent.query.params);const s=t.getData({},i),r=this;this.parent.showSpinner(),s.then(o=>{r.dataSuccess(o.result),r.refreshPersistSelection(),r.parent.hideSpinner()})}}dataSuccess(e){for(let t=0;t<e.length;t++)f(this.selectedRowState[e[t][this.primaryKey]])&&e[t][this.chkField]&&(this.selectedRowState[e[t][this.primaryKey]]=e[t][this.chkField]);this.persistSelectedData=e}setRowSelection(e){if(!this.parent.getDataModule().isRemote())if(e)if(this.parent.groupSettings.columns.length)for(const t of this.getData().records)this.selectedRowState[t[this.primaryKey]]=!0;else for(const t of this.getData())this.selectedRowState[t[this.primaryKey]]=!0;else this.selectedRowState={}}getData(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))}refreshPersistSelection(){let e=this.parent.getRows();if(this.parent.isCheckBoxSelection&&this.parent.isFrozenGrid()&&(this.parent.getMovableContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getMovableRows()),this.parent.getFrozenMode()===Zt&&this.parent.getFrozenRightContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getFrozenRightRows())),this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),null!==e&&e.length>0&&(this.parent.isPersistSelection||this.chkField)){const t=[];for(let i=0;i<e.length;i++){const s=this.getRowObj(e[i]),r=s&&s.data?s.data[this.primaryKey]:null;if(null===r)return;let o;const a=e[i].querySelector(".e-checkselect");this.selectedRowState[r]||"Check"===this.parent.checkAllRows&&this.selectedRowState[r]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(r)<0||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(r)>0||"Intermediate"===this.parent.checkAllRows&&!f(this.chkField)&&s.data[this.chkField]?(t.push(parseInt(e[i].getAttribute(Di),10)),o=!0):(o=!1,this.checkedTarget!==a&&this.parent.isCheckBoxSelection&&a&&cF(a.nextElementSibling,o)),this.updatePersistCollection(e[i],o)}this.isSingleSel()&&t.length>0?this.selectRow(t[0],!0):this.selectRows(t)}this.parent.isCheckBoxSelection&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()}actionBegin(e){if("save"===e.requestType&&this.parent.isPersistSelection){const t=this.parent.element.querySelector(".e-edit-checkselect");if(!f(t)){let i=B(t,"."+zl);if(i){"Dialog"===this.parent.editSettings.mode&&(i=this.parent.element.querySelector(".e-dlgeditrow"));const s=this.getRowObj(i);if(!s)return;this.selectedRowState[s.data[this.primaryKey]]=s.isSelected=t.checked}else this.isCheckedOnAdd=t.checked}}}actionComplete(e){if("save"===e.requestType&&this.parent.isPersistSelection){if("add"===e.action&&this.isCheckedOnAdd){const t=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[t.data[this.primaryKey]]=t.isSelected=this.isCheckedOnAdd}this.refreshPersistSelection()}if("delete"===e.requestType&&this.parent.isPersistSelection){const i=e.data.slice();for(let s=0;s<i.length;s++)f(i[s][this.primaryKey])||this.updatePersistDelete(i[s][this.primaryKey]);this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}"paging"===e.requestType&&(this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0)}onDataBound(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&(this.selectedRecords.length&&(this.isPrevRowSelection=!0),this.refreshPersistSelection()),this.parent.enableVirtualization&&this.setCheckAllState(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){const e=this.parent.getRowsObject(),t=[];for(let i=0;i<e.length;i++)e[i].isSelected&&t.push(i);t.length&&this.selectRows(t),this.initialRowSelection=!0}}updatePersistSelectedData(e){if(this.parent.isPersistSelection){const t=this.parent.getRows();for(let i=0;i<t.length;i++)this.updatePersistCollection(t[i],e);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice())}}checkSelectAllAction(e){const t=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),this.selectRowsByRange(t.getVirtualRowIndex(0),t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!f(i)){const s=i.querySelector(".e-edit-checkselect");f(s)||cF(s.nextElementSibling,e)}}checkSelectAll(e){const t=this.getCheckAllStatus(e);let i="Check"===t;this.isHeaderCheckboxClicked=!0,"Intermediate"===t&&(i=this.getCurrentBatchRecordChanges().some(s=>s[this.primaryKey]in this.selectedRowState)),this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!i),this.target=null,this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState(),this.triggerChkChangeEvent(e,!i)}getCheckAllStatus(e){const t=e?e.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList;let i;return i=t.contains("e-check")?"Check":t.contains("e-uncheck")?"Uncheck":t.contains("e-stop")?"Intermediate":"None",i}checkSelect(e){const t=B(this.checkedTarget,"."+Ji),i=this.parent;this.isMultiCtrlRequest=!0;let s=0;if(this.isHeaderCheckboxClicked=!1,Dr(i)){const r=t.parentElement.getAttribute("data-uid");s=i.getRows().map(o=>o.getAttribute("data-uid")).indexOf(r)}else s=parseInt(t.parentElement.getAttribute(Di),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(rd).length>0&&"Top"===this.parent.editSettings.newRowPosition&&++s,this.rowCellSelectionHandler(s,parseInt(t.getAttribute(Vr),10)),this.moveIntoUncheckCollection(B(t,"."+ps)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))}moveIntoUncheckCollection(e){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){const t=this.getRowObj(e),i=t&&t.data?t.data[this.primaryKey]:null;if(!i)return;this.chkAllCollec.indexOf(i)<0?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1)}}triggerChkChangeEvent(e,t){this.parent.trigger("checkBoxChange",{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)}updateSelectedRowIndex(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.getDataModule().isRemote())if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];const t=this.getData().length;for(let i=0;i<t;i++)this.selectedRowIndexes.push(i)}else if("Uncheck"===this.parent.checkAllRows)this.selectedRowIndexes=[];else{const t=this.parent.getRowByIndex(e);if(e&&t&&"false"===t.getAttribute("aria-selected")){const i=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(i,1)}}}isAllSelected(){const e=this.getData();for(let t=0;t<e.length;t++)if(!this.selectedRowState[e[t][this.primaryKey]])return!1;return!0}setCheckAllState(e,t){if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){let i=!0,s=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||(s=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!this.parent.getDataModule().isRemote()&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(i=this.isAllSelected());const r=this.getCheckAllBox();if(r){const o=r.nextElementSibling;W([o],["e-check","e-stop","e-uncheck"]),B_(r,!1),r.indeterminate=!1,i&&s===this.totalRecordsCount&&this.totalRecordsCount||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!this.parent.getDataModule().isRemote()&&this.getData().length&&s===this.getData().length?(z([o],["e-check"]),B_(r,!0),t&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):!this.selectedRowIndexes.length||0===s&&0===this.getCurrentBatchRecordChanges().length?(z([o],["e-uncheck"]),t&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck",0===s&&0===this.getCurrentBatchRecordChanges().length?z([o.parentElement],["e-checkbox-disabled"]):W([o.parentElement],["e-checkbox-disabled"])):(z([o],["e-stop"]),this.parent.checkAllRows="Intermediate",r.indeterminate=!0),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!this.parent.getDataModule().isRemote()&&this.updateSelectedRowIndex(e)}}}keyDownHandler(e){(("chrome"===q.info.name||"safari"===q.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===q.info.name&&17===e.keyCode||"mozilla"===q.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!0),32===e.keyCode&&e.preventDefault()}keyUpHandler(e){(("chrome"===q.info.name||"safari"===q.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===q.info.name&&17===e.keyCode||"mozilla"===q.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!1)}clickHandler(e){let t=e.target;this.actualTarget=t,this.selectionSettings.persistSelection&&(this.deSelectedData=oF(this.persistSelectedData)),(Te(t,ps)||Te(t,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&t.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=e.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.popUpClickHandler(e);let s,i=!1;this.preventFocus=!0;const r=Te(t,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(r&&r.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&Te(t,ps)),r&&r.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(s=r.querySelector('input[type="checkbox"]'),i=!0),this.drawBorders(),this.updateAutoFillPosition(),t=Te(t,Ji),(t&&t.parentElement.classList.contains(ps)&&!this.parent.selectionSettings.checkboxOnly||i)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=t,f(s)){const o=this.parent;let a=0;if(Dr(o)){const l=t.parentElement.getAttribute("data-uid");a=o.getRows().map(h=>h.getAttribute("data-uid")).indexOf(l)}else a=parseInt(t.parentElement.getAttribute(Di),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(rd).length>0&&++a,(!this.mUPTarget||!this.mUPTarget.isEqualNode(t))&&this.rowCellSelectionHandler(a,parseInt(t.getAttribute(Vr),10)),this.parent.hoverFrozenRows(e),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(B(t,"."+ps)),this.setCheckAllState())}else this.checkedTarget=s,s.classList.contains("e-checkselectall")?this.checkSelectAll(s):this.checkSelect(s);!this.parent.isCheckBoxSelection&&q.isDevice&&!this.isSingleSel()&&this.showPopup(e)}else if(e.target.classList.contains("e-headercell")&&!e.target.classList.contains("e-stackedheadercell")){const o=e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");this.headerSelectionHandler(this.parent.getColumnIndexByUid(o))}this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,f(B(e.target,".e-unboundcell"))&&(this.preventFocus=!1)}popUpClickHandler(e){const t=e.target;B(t,".e-headercell")||e.target.classList.contains(Ji)||B(t,".e-gridpopup")?t.classList.contains("e-rowselect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"}showPopup(e){this.selectionSettings.enableSimpleMultiRowSelection||function ppe(n,e,t){const i=n.querySelector("span"),s=n.parentElement.getBoundingClientRect(),r=e.target.getBoundingClientRect();i.className=t,n.style.display="";const o=(f(e.clientY)?e.changedTouches[0].clientY:e.clientY)>n.offsetHeight+10;n.style.top=r.top-s.top+(o?-(n.offsetHeight+10):n.offsetHeight+10)+"px",n.style.left=function WPe(n,e,t,i){const s=n.offsetWidth/2,r=mS(e).x;return r-t.left<s?t.left-i:t.right-r<s?t.right-i-2*s:r-i-s}(n,e,r,s.left)+"px",o?(n.querySelector(".e-downtail").style.display="",n.querySelector(".e-uptail").style.display="none"):(n.querySelector(".e-downtail").style.display="none",n.querySelector(".e-uptail").style.display="")}(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>(this.parent.getFrozenColumns()?2:1)||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))}rowCellSelectionHandler(e,t){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?(this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders()):this.isMultiShiftRequest?(this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!B(this.target,"."+Ji).classList.contains(R_)?this.selectRowsByRange(li(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange(li(this.prevCIdxs)?{rowIndex:e,cellIndex:t}:this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.updateAutoFillPosition(),this.drawBorders()):(this.addRowsToSelection([e]),this.addCellsToSelection([{rowIndex:e,cellIndex:t}]),this.showHideBorders("none")),this.isDragged=!1}onCellFocused(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey)if("upArrow"===e.keyArgs.action)e.isJump=this.parent.allowFiltering?"INPUT"===e.element.tagName:"TH"===e.element.tagName;else if("downArrow"===e.keyArgs.action){const l=Number(e.element.parentElement.getAttribute(Di));e.isJump=0===l}else"ctrlHome"===e.keyArgs.action&&(e.isJump=!0);const t=this.parent.isFrozenGrid()?(e.container.isHeader&&"TD"!==e.element.tagName&&e.isJump&&!this.selectionSettings.allowColumnSelection||(e.container.isContent||"TD"===e.element.tagName)&&!(e.container.isSelectable||"TD"===e.element.tagName))&&!(e.byKey&&"space"===e.keyArgs.action):(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&"space"===e.keyArgs.action)&&!(e.element.classList.contains("e-detailrowexpand")||e.element.classList.contains("e-detailrowcollapse")),i=e.container.isHeader&&"TD"!==e.element.tagName&&!B(e.element,"."+Ji)&&!(e.byKey&&"space"===e.keyArgs.action);if(!e.byKey||t)return void(t&&!this.parent.isCheckBoxSelection&&this.clearSelection());let[s,r]=e.container.isContent?e.container.indexes:e.indexes;const o=this.focus.getPrevIndexes();if(this.parent.frozenRows)if(e.container.isHeader&&("TD"===e.element.tagName||B(e.element,"."+Ji))){const l=this.parent.getHeaderTable().querySelector("thead").childElementCount;s-=l,o.rowIndex=f(o.rowIndex)?null:o.rowIndex-l}else s+=this.parent.frozenRows,o.rowIndex=0!==o.rowIndex&&f(o.rowIndex)?null:o.rowIndex+this.parent.frozenRows;if(this.parent.isFrozenGrid()){const l=Number(e.element.getAttribute(Vr)),h=this.parent.getSelectedRowCellIndexes();h.length&&0===o.cellIndex&&(o.cellIndex=h[h.length-1].cellIndexes[0]),o.cellIndex=f(o.cellIndex)?null:o.cellIndex===r?l:l-1,r=l}if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(s=parseInt(e.element.parentElement.getAttribute("aria-rowindex"),10)),(i||-1===["ctrlPlusA","escape"].indexOf(e.keyArgs.action)&&"space"!==e.keyArgs.action&&s===o.rowIndex&&r===o.cellIndex)&&!this.selectionSettings.allowColumnSelection)return;this.preventFocus=!0;const a=this.getKeyColIndex(e);switch(this.needColumnSelection&&(r=a),e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.isKeyAction=!0,this.applyDownUpKey(s,r);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(s,r);break;case"shiftDown":case"shiftUp":this.shiftDownKey(s,r);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(s,r);break;case"home":case"end":r="end"===e.keyArgs.action?this.getLastColIndex(s):0,this.applyHomeEndKey(s,r);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(s,r);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(s)}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.updateAutoFillPosition()}getKeyColIndex(e){let t,i=null;const s=e.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&Te(e.element,"e-columnheader"))if(this.needColumnSelection=!!e.container.isHeader,s){if("rightArrow"===e.keyArgs.action||"leftArrow"===e.keyArgs.action)return i;t=s.getAttribute("e-mappinguid");const r=this.getstackedColumns(this.parent.getColumnByUid(t).columns),o=this.parent.getColumnIndexByUid(r[r.length-1].uid),a=this.parent.getColumnIndexByUid(r[0].uid);i=this.prevColIndex>=o?a:o}else i=this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return i}ctrlPlusA(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})}applySpaceSelection(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))}applyDownUpKey(e,t){const i=this.parent;this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&!this.selectionSettings.persistSelection&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&(this.selectRow(e,!0),this.applyUpDown(i.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(t)}applyUpDown(e){if(e<0)return;this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);const t=parseInt(this.target.getAttribute(Vr),10),i=this.parent.getFrozenColumns();if(i)this.target=t>=i?this.contentRenderer.getMovableRowByIndex(e).getElementsByClassName(Ji)[t-i]:this.contentRenderer.getRowByIndex(e).getElementsByClassName(Ji)[t];else{const s=this.contentRenderer.getRowByIndex(e);s&&(this.target=s.getElementsByClassName(Ji)[t])}this.addAttribute(this.target)}applyRightLeftKey(e,t){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(t):this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))}applyHomeEndKey(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))}shiftDownKey(e,t){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(li(this.prevRowIndex)?this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1}applyShiftLeftRightKey(e,t){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,t):this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1}getstackedColumns(e){const t=[];for(let i=0,s=e.length;i<s;i++)e[i].columns?this.getstackedColumns(e[i].columns):t.push(e[i]);return t}applyCtrlHomeEndKey(e,t){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)}addRemoveClassesForRow(e,t,i,...s){if(e){const r=[].slice.call(e.getElementsByClassName(Ji)),o=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),a=e.querySelector(".e-rowdragdrop");o&&r.push(o),a&&r.push(a),Op(r,t,...s)}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,i)}isRowType(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode}isCellType(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode}isSingleSel(){return"Single"===this.selectionSettings.type}getRenderer(){return f(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(Br.Content)),this.contentRenderer}getSelectedRecords(){let e=[];return e=this.selectionSettings.persistSelection?this.persistSelectedData:this.parent.getRowsObject().filter(t=>t.isSelected).map(t=>t.data),e}selectColumn(e){const t=this.parent;if(f(t.getColumns()[e]))return;const i=t.getColumnByIndex(e),s=t.getColumnHeaderByUid(i.uid),r=s.classList.contains("e-columnselection");if(!t.selectionSettings.allowColumnSelection)return;const o=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(e)>-1;if(this.clearColDependency(),!r||!this.selectionSettings.enableToggle||o){const a={columnIndex:e,headerCell:s,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(a,TY),a.cancel)return void this.disableInteracted();(!t.selectionSettings.enableToggle||e!==this.prevColIndex||!r||o)&&this.updateColSelection(s,e),this.onActionComplete({columnIndex:e,headerCell:s,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex},DY)}this.updateColProps(e)}selectColumnsByRange(e,t){const i=this.parent;if(f(i.getColumns()[e]))return;const s=[];if("Single"===i.selectionSettings.type||f(t))s[0]=e;else{const r=e<t;for(let o=e;r?o<=t:o>=t;r?o++:o--)s.push(o)}this.selectColumns(s)}selectColumns(e){const t=this.parent;let i=this.getselectedCols();if("Single"===t.selectionSettings.type&&(e=[e[0]]),!t.selectionSettings.allowColumnSelection)return;this.clearColDependency();const s={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(s,TY),s.cancel)return void this.disableInteracted();for(let o=0,a=e.length;o<a;o++)this.updateColSelection(t.getColumnHeaderByUid(t.getColumnByIndex(e[o]).uid),e[o]);i=this.getselectedCols();const r={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(r,DY),this.updateColProps(e[0])}selectColumnWithExisting(e){const t=this.parent;if(f(t.getColumns()[e]))return;const i=t.getColumnHeaderByUid(t.getColumnByIndex(e).uid);let s=this.getselectedCols();if("Single"===t.selectionSettings.type&&this.clearColDependency(),t.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(e)>-1)this.clearColumnSelection(e);else{const r={columnIndex:e,headerCell:s,columnIndexes:this.selectedColumnsIndexes,column:t.getColumnByIndex(e),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(r,TY),r.cancel)return void this.disableInteracted();this.updateColSelection(i,e),s=this.getselectedCols();const o={columnIndex:e,headerCell:s,column:t.getColumnByIndex(e),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,DY)}this.updateColProps(e)}}clearColumnSelection(e){if(this.isColumnSelected){const t=this.parent;if(!f(e)&&-1===this.selectedColumnsIndexes.indexOf(e))return;const i=f(e)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:e,s=t.getColumnByIndex(i);let r;const o=t.getColumnByIndex(i);r=s.getFreezeTableName()===an?t.getFrozenRightColumnHeaderByIndex(i):"movable"===s.getFreezeTableName()?t.getMovableColumnHeaderByIndex(i):t.getColumnHeaderByUid(o.uid);const a={columnIndex:i,headerCell:r,columnIndexes:this.selectedColumnsIndexes,column:o,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted};if(this.columnDeselect(a,"columnDeselecting"))return void this.disableInteracted();const h=f(e)?[].slice.call(t.getHeaderContent().getElementsByClassName("e-columnselection")):[r],c=this.getSelectedColumnCells(e);for(let m=0,b=h.length;m<b;m++)Op([h[m]],!1,"e-columnselection");for(let m=0,b=c.length;m<b;m++)Op([c[m]],!1,"e-columnselection");f(e)?(this.columnDeselect(a,"columnDeselected"),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(m=>m.isSelected=!1)):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(e),1),this.parent.getColumns()[e].isSelected=!1)}}getselectedCols(){const e=this.parent;let t;if(this.selectedColumnsIndexes.length>1){t=[];for(let i=0;i<this.selectedColumnsIndexes.length;i++)t.push(e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[i]).uid))}else t=e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return t}getSelectedColumnCells(e){const t=this.parent,i=!f(this.parent.rowTemplate);let r,o,s=i?t.getRows():t.getDataRows();t.isFrozenGrid()&&t.getContent().querySelector("."+zs)&&(r=i?t.getMovableRows():t.getMovableDataRows(),s=t.addMovableRows(s,r),t.getFrozenMode()===Zt&&(o=i?t.getFrozenRightRows():t.getFrozenRightDataRows(),s=t.addMovableRows(s,o)));let a=[];const l=f(e)?".e-columnselection":'[aria-colindex="'+e+'"]';for(let h=0,c=s.length;h<c;h++)a=a.concat([].slice.call(s[h].querySelectorAll(l)));return a}columnDeselect(e,t){return"columnDeselected"===t&&delete e.cancel,this.onActionComplete(e,t),e.cancel}updateColProps(e){this.prevColIndex=e,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0}clearColDependency(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]}updateColSelection(e,t){if(f(this.parent.getColumns()[t]))return;const i=this.parent.getFrozenLeftCount(),s=this.parent.getMovableColumnsCount(),r=this.parent.getColumnByIndex(t),o=!f(this.parent.rowTemplate);let a;this.selectedColumnsIndexes.push(t),this.parent.getColumns()[t].isSelected=!0,r.getFreezeTableName()===an?(t-=i+s,a=o?this.parent.getFrozenRightRows():this.parent.getFrozenRightDataRows()):"movable"===r.getFreezeTableName()?(t-=i,a=o?this.parent.getMovableRows():this.parent.getMovableDataRows()):(t+=this.parent.getIndentCount(),a=o?this.parent.getRows():this.parent.getDataRows()),Op([e],!0,"e-columnselection");for(let l=0,h=a.length;l<h;l++)a[l].classList.contains(ps)&&(!a[l].classList.contains(zl)&&!a[l].classList.contains(rd)||"Normal"!==this.parent.editSettings.mode||f(a[l].querySelector("tr").childNodes[t])?f(a[l].childNodes[t])||Op([a[l].childNodes[t]],!0,"e-columnselection"):Op([a[l].querySelector("tr").childNodes[t]],!0,"e-columnselection"))}headerSelectionHandler(e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(e):this.isMultiShiftRequest?this.selectColumnsByRange(li(this.prevColIndex)?e:this.prevColIndex,e):this.selectColumnWithExisting(e)}addEventListener_checkbox(){this.parent.on(Dp,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(Dc,this.onDataBoundFunction),this.parent.on(gZ,this.onDataBoundFunction),this.parent.on(Kn,this.checkBoxSelectionChanged,this),this.parent.on(rZ,this.initPerisistSelection,this),this.parent.on(zf,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(Oi,this.actionCompleteFunc),this.parent.on(Vl,this.clickHandler,this),this.resizeEndFn=()=>{this.updateAutoFillPosition(),this.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener("resizeStop",this.resizeEndFn)}removeEventListener_checkbox(){this.parent.off(Dp,this.dataReady),this.parent.removeEventListener(Dc,this.onDataBoundFunction),this.parent.removeEventListener(Oi,this.actionCompleteFunc),this.parent.off(gZ,this.onDataBoundFunction),this.parent.off(zf,this.setCheckAllForEmptyGrid),this.parent.off(Vl,this.clickHandler),this.parent.off(rZ,this.initPerisistSelection)}setCheckAllForEmptyGrid(){const e=this.getCheckAllBox();e&&(this.parent.isCheckBoxSelection=!0,W([e.nextElementSibling],["e-check","e-stop","e-uncheck"]))}dataReady(e){this.isHeaderCheckboxClicked=!1,"virtualscroll"!==e.requestType&&!this.parent.isPersistSelection&&(!this.parent.enableInfiniteScrolling||"infiniteScroll"!==e.requestType)&&(this.disableUI=!this.parent.enableImmutableMode,this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)}actionCompleteHandler(e){"save"===e.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()}selectRowIndex(e){this.parent.isSelectedRowIndexUpdating=!0,this.parent.selectedRowIndex=e}disableInteracted(){this.isInteracted=!1}activeTarget(){this.actualTarget=this.isInteracted?this.actualTarget:null}}class BPe{constructor(e){this.parent=e,this.addEventListener()}search(e){const t=this.parent;e=f(e)?"":e,function Ig(n){const e=X("#"+n.element.id+"EditConfirm",n.element);return"Batch"===n.editSettings.mode&&bt(".e-updatedtd",n.element).length&&n.editSettings.showConfirmDialog&&(!e||e.classList.contains("e-popup-close"))}(t)?t.notify("prevent-batch",{instance:this,handler:this.search,arg1:e}):e!==t.searchSettings.key?(t.searchSettings.key=e.toString(),t.dataBind()):this.refreshSearch&&t.refresh()}addEventListener(){this.parent.isDestroyed||(this.parent.on(Hl,this.onPropertyChanged,this),this.parent.on(uue,this.onSearchComplete,this),this.parent.on(Qi,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(Oi,this.actionCompleteFunc),this.parent.on(r3,this.cancelBeginEvent,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(Hl,this.onPropertyChanged),this.parent.off(uue,this.onSearchComplete),this.parent.off(Qi,this.destroy),this.parent.removeEventListener(Oi,this.actionCompleteFunc),this.parent.off(r3,this.cancelBeginEvent))}destroy(){this.removeEventListener()}onPropertyChanged(e){e.module===this.getModuleName()&&(f(e.properties.key)?this.parent.notify(da,{requestType:"searching",type:un}):this.parent.notify(da,{requestType:"searching",type:un,searchString:this.parent.searchSettings.key}))}onSearchComplete(e){this.parent.trigger(Oi,Ae(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:Oi}))}onActionComplete(e){this.refreshSearch="searching"!==e.requestType}cancelBeginEvent(e){"searching"===e.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)}getModuleName(){return"search"}}class HPe{constructor(e){this.parent=e}show(e,t){const i=this.getToggleFields(e),s=this.getColumns(i,t);this.parent.notify(g1,{module:"edit"});for(let r=0;r<s.length;r++)s[r].visible=!0;this.setVisible(s)}hide(e,t){const i=this.getToggleFields(e),s=this.getColumns(i,t);this.parent.notify(g1,{module:"edit"});for(let r=0;r<s.length;r++)s[r].visible=!1;this.setVisible(s)}getToggleFields(e){let t=[];return t="string"==typeof e?[e]:e,t}getColumns(e,t){return P_(e,s=>P_(this.parent.columnModel,r=>{if(r[t]===s)return r})[0])}setVisible(e,t=[]){const i={requestType:"columnstate",cancel:!1,columns:t=t.length>0?t:e};this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&this.parent.groupModule.groupSettings.columns.length>0&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(un,i,r=>{const o=this.parent.getColumns();if(e=f(e)?o:e,r.cancel)return this.parent.notify("reset-columns",{showHideArgs:r}),void(e.length>0&&(e[0].visible=!0));Dr(this.parent)&&this.parent.contentModule.emptyVcRows(),this.parent.allowSelection&&this.parent.getSelectedRecords().length&&!this.parent.selectionSettings.persistSelection&&this.parent.clearSelection(),this.parent.enableColumnVirtualization?e.filter(h=>o.some(c=>h.field===c.field)).length&&this.parent.notify(kp,e):this.parent.notify(kp,e),this.parent.trigger(Oi,{requestType:"columnstate",columns:t}),"All"!==this.parent.columnQueryMode&&this.parent.refresh()})}}class rF{constructor(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new SZ(e),this.addEventListener()}getModuleName(){return"scroll"}setWidth(e){this.parent.element.style.width=st(this.parent.width),e&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&this.parent.toolbarModule.toolbar.refreshOverflow()}setHeight(){let e=0;const t=this.parent.getContent().querySelector("."+rr);let i=this.parent.height;if(this.parent.isFrozenGrid()&&"auto"!==this.parent.height&&this.parent.height.toString().indexOf("%")<0&&(i=parseInt(i,10)-rF.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&"auto"!==this.parent.height){const s=this.parent.getHeaderContent().querySelector(Je);e=s?s.offsetHeight:0,s&&e&&(e-=s.getElementsByClassName(rd).length*this.parent.getRowHeight()),t.style.height=st(i-e)}else t.style.height=st(i);this.ensureOverflow(t),this.parent.isFrozenGrid()&&this.refresh()}setPadding(){const e=this.parent.getHeaderContent(),t=rF.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties(),s="Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Zt?"0.5px":"1px";e.querySelector("."+Hr).style[i.border]=t>0?s:"0px",e.style[i.padding]=t>0?t+"px":"0px"}removePadding(e){const t=this.getCssProperties(e),i=this.parent.getHeaderContent().querySelector("."+Hr);i.style[t.border]="",i.parentElement.style[t.padding]="";const s=this.parent.getFooterContent();s&&s.classList.contains("e-footerpadding")&&s.classList.remove("e-footerpadding")}refresh(){if("100%"!==this.parent.height)return;const e=this.parent.getContent();this.parent.element.style.height="100%";const t=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+t+"px)",this.parent.isFrozenGrid()&&(e.firstElementChild.style.height="calc(100% - "+N_()+"px)")}getThreshold(){return"mozilla"===q.info.name?.5:1}addEventListener(){this.parent.isDestroyed||(this.parent.on(zf,this.wireEvents,this),this.parent.on(Kn,this.wireEvents,this),this.parent.on(Rn,this.onPropertyChanged,this),this.parent.on(VY,this.wireEvents,this),this.parent.on(Go,this.setScrollLeft,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(zf,this.wireEvents),this.parent.off(Kn,this.wireEvents),this.parent.off(Rn,this.onPropertyChanged),this.parent.off(VY,this.wireEvents),this.parent.off(Go,this.setScrollLeft))}setScrollLeft(){this.parent.isFrozenGrid()?this.parent.headerModule.getMovableHeader().scrollLeft=this.previousValues.left:this.parent.getHeaderContent().querySelector("."+Hr).scrollLeft=this.previousValues.left}onFrozenContentScroll(){return e=>{null===this.content.querySelector(Je)||this.parent.isPreventScrollEvent||(!f(this.parent.infiniteScrollModule)&&this.parent.enableInfiniteScrolling&&this.parent.notify(h3,e),this.previousValues.top=e.target.scrollTop)}}onContentScroll(e){const t=e,i=t.classList.contains(Hr);return s=>{if(null===this.content.querySelector(Je)||this.parent.isPreventScrollEvent)return;const r=s.target,o=r.scrollLeft;if(!f(this.parent.infiniteScrollModule)&&this.parent.enableInfiniteScrolling&&this.parent.notify(h3,{target:s.target,isLeft:this.previousValues.left!==o}),this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading){const l=this.previousValues.top<this.parent.getContent().firstElementChild.scrollTop;this.parent.notify("lazy-load-scroll-handler",{scrollDown:l})}this.parent.notify("virtual-scroll-edit",{});const a=r.classList.contains("e-summarycontent");this.previousValues.left!==o?(this.parent.notify("close-filter-dialog",s),t.scrollLeft=o,a&&(this.header.scrollLeft=o),this.previousValues.left=o,this.parent.notify("scroll",{left:o})):this.previousValues.top=i?r.scrollTop:this.previousValues.top}}onCustomScrollbarScroll(e,t){const i=e,s=t;return r=>{if(null===this.content.querySelector(Je))return;const a=r.target.scrollLeft;this.previousValues.left!==a&&(i.scrollLeft=a,s.scrollLeft=a,this.previousValues.left=a,this.parent.notify("scroll",{left:a}))}}onTouchScroll(e){const t=e;return i=>{if("mouse"===i.pointerType)return;const s=this.parent.isFrozenGrid(),r=this.getPointXY(i),o=t.scrollLeft+(this.pageXY.x-r.x),a=s?this.parent.getHeaderContent().querySelector("."+js):this.parent.getHeaderContent().querySelector("."+Hr),l=s?this.parent.getContent().querySelector("."+zs):this.parent.getContent().querySelector("."+rr);this.previousValues.left===o||o<0||a.scrollWidth-a.clientWidth<o||(i.preventDefault(),a.scrollLeft=o,l.scrollLeft=o,s&&(this.parent.getContent().querySelector(".e-movablescrollbar").scrollLeft=o),this.pageXY.x=r.x,this.previousValues.left=o)}}setPageXY(){return e=>{"mouse"!==e.pointerType&&(this.pageXY=this.getPointXY(e))}}getPointXY(e){const t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t}getScrollbleParent(e){if(null===e)return null;const t=f(e.tagName)?e.scrollingElement:e,i=document.defaultView.getComputedStyle(t,null).overflowY;return t.scrollHeight>t.clientHeight&&"hidden"!==i&&"visible"!==i||"HTML"===e.tagName||"BODY"===e.tagName?e:this.getScrollbleParent(e.parentNode)}addStickyListener(e){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),e?this.parentElement&&k.add("HTML"===this.parentElement.tagName||"BODY"===this.parentElement.tagName?document:this.parentElement,"scroll",this.makeStickyHeader,this):k.remove(this.parentElement,"scroll",this.makeStickyHeader)}wireEvents(){if(this.oneTimeReady){const r=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector("."+rr),this.header=this.parent.getHeaderContent().querySelector("."+Hr);const o=this.content.querySelector("."+zs),a=this.header.querySelector("."+js),l=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&(k.add(r?a:this.header,"touchstart pointerdown",this.setPageXY(),this),k.add(r?a:this.header,"touchmove pointermove",this.onTouchScroll(r?o:this.content),this)),this.parent.isFrozenGrid()?(k.add(l,"scroll",this.onCustomScrollbarScroll(o,a),this),k.add(o,"scroll",this.onCustomScrollbarScroll(l,a),this),k.add(a,"scroll",this.onCustomScrollbarScroll(l,o),this),k.add(this.content,"scroll",this.onFrozenContentScroll(),this),k.add(a,"touchstart pointerdown",this.setPageXY(),this),k.add(a,"touchmove pointermove",this.onTouchScroll(o),this),k.add(o,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(q.userAgent.toLowerCase())&&q.isDevice||k.add(o,"touchmove pointermove",this.onTouchScroll(a),this)):(k.add(this.content,"scroll",this.onContentScroll(this.header),this),k.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.aggregates.length&&k.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}const e=this.parent.getContentTable();let t,i,s;cpe(()=>{t=this.header.scrollLeft,i=e.scrollHeight,s=this.parent.getContent().clientHeight},()=>{const r={cancel:!1};this.parent.notify("check-scroll-reset",r),!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&(i<s&&(z(e.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.isFrozenGrid()&&(z(this.parent.getContent().querySelector("."+zs).querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.getFrozenRightColumnsCount()&&z(this.parent.getContent().querySelector(".e-frozen-right-content").querySelectorAll("tr:last-child td"),"e-lastrowcell"))),r.cancel||((this.parent.frozenRows>0||this.parent.isFrozenGrid())&&this.header.querySelector("."+js)?this.header.querySelector("."+js).scrollLeft=this.previousValues.left:this.header.scrollLeft=this.previousValues.left,this.content.scrollLeft=this.previousValues.left,this.content.scrollTop=this.previousValues.top)),this.parent.enableColumnVirtualization||(this.content.scrollLeft=t),this.parent.isFrozenGrid()&&this.header.querySelector("."+js)&&(this.header.querySelector("."+js).scrollLeft=this.content.querySelector("."+zs).scrollLeft)}),this.parent.isPreventScrollEvent=!1}getCssProperties(e){const t={},i=f(e)?this.parent.enableRtl:e;return t.border=i?"borderLeftWidth":"borderRightWidth",t.padding=i?"paddingLeft":"paddingRight",t}ensureOverflow(e){e.style.overflowY="auto"===this.parent.height?"auto":"scroll"}onPropertyChanged(e){e.module===this.getModuleName()&&(this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight(),this.setWidth(!f(e.properties.width)))}makeStickyHeader(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){const e=this.parent.getContent().getClientRects()[0];if(e){const t=this.parent.getHeaderContent(),i=this.parent.element.querySelector(".e-toolbar"),s=this.parent.element.querySelector(".e-groupdroparea"),r=t.offsetHeight+(i?i.offsetHeight:0)+(s?s.offsetHeight:0),o=this.parentElement.getClientRects()[0].top,l=e.left;if(e.top-(o<0?0:o)<r&&e.bottom>0){t.classList.add("e-sticky");let h=0;s&&this.parent.groupSettings.showDropArea&&(this.setSticky(s,h,e.width,l,!0),h+=s.getClientRects()[0].height),i&&(this.setSticky(i,h,e.width,l,!0),h+=i.getClientRects()[0].height),this.setSticky(t,h,e.width,l,!0)}else if(t.classList.contains("e-sticky")){this.setSticky(t,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),s&&this.setSticky(s,null,null,null,!1);const h=this.parent.element.querySelector(".e-ccdlg");h&&h.classList.remove("e-sticky")}this.parent.notify("sticky-scroll-complete",{})}}}setSticky(e,t,i,s,r){r?(e.style.width=i+"px",e.classList.add("e-sticky")):e.classList.remove("e-sticky"),e.style.top=null!=t?t+"px":"",e.style.left=null!==s?parseInt(e.style.left,10)!==s?s+"px":e.style.left:""}destroy(){const e=this.parent.element;if(!e||!e.querySelector("."+to)&&!e.querySelector("."+io))return;this.removeEventListener();const t=this.parent.getContent().querySelector("."+rr);k.remove(t,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),W([this.parent.getHeaderContent().querySelector("."+Hr)],Hr),W([t],rr),t.style.height="",this.parent.element.style.width=""}static getScrollBarWidth(){return N_()}}var RC=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class AC extends ii{constructor(){super(...arguments),this.templateFn={}}setFormatter(e){this.formatFn=e}getFormatter(){return this.formatFn}setTemplate(e={}){void 0!==this.footerTemplate&&(this.templateFn[Oh(Pt,Pt.Summary)]={fn:ji(this.footerTemplate,e),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[Oh(Pt,Pt.GroupSummary)]={fn:ji(this.groupFooterTemplate,e),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[Oh(Pt,Pt.CaptionSummary)]={fn:ji(this.groupCaptionTemplate,e),property:"groupCaptionTemplate"})}getTemplate(e){return this.templateFn[Oh(Pt,e)]}setPropertiesSilent(e){this.setProperties(e,!0)}}RC([_()],AC.prototype,"type",void 0),RC([_()],AC.prototype,"field",void 0),RC([_()],AC.prototype,"columnName",void 0),RC([_()],AC.prototype,"format",void 0),RC([_()],AC.prototype,"footerTemplate",void 0),RC([_()],AC.prototype,"groupFooterTemplate",void 0),RC([_()],AC.prototype,"groupCaptionTemplate",void 0),RC([_()],AC.prototype,"customAggregate",void 0);class rpe extends ii{}RC([rh([],AC)],rpe.prototype,"columns",void 0);class VPe{constructor(e){this.copyContent="",this.isSelect=!1,this.parent=e,this.addEventListener()}addEventListener(){this.parent.isDestroyed||(this.parent.on(Kn,this.initialEnd,this),this.parent.on(Nr,this.keyDownHandler,this),this.parent.on(Vl,this.clickHandler,this),k.add(this.parent.element,"keydown",this.pasteHandler,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(Nr,this.keyDownHandler),this.parent.off(Kn,this.initialEnd),this.parent.off(Vl,this.clickHandler),k.remove(this.parent.element,"keydown",this.pasteHandler))}clickHandler(e){let t=e.target;t=Te(t,"e-rowcell")}pasteHandler(e){const t=this.parent,i=/(Mac)/i.test(navigator.platform);if(67===e.keyCode&&i&&e.metaKey&&!t.isEdit&&this.copy(),86===e.keyCode&&(e.ctrlKey||i&&e.metaKey)&&!t.isEdit){if(!B(document.activeElement,"."+Ji)||!t.editSettings.allowEditing||"Batch"!==t.editSettings.mode||"Cell"!==t.selectionSettings.mode||"Flow"===t.selectionSettings.cellSelectionMode)return;this.activeElement=document.activeElement,this.clipBoardTextArea.value="";const r=window.scrollX,o=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(()=>{this.activeElement.focus(),window.scrollTo(r,o),this.paste(this.clipBoardTextArea.value,this.parent.getSelectedRowCellIndexes()[0].rowIndex,this.parent.getSelectedRowCellIndexes()[0].cellIndexes[0])},10)}}paste(e,t,i){const s=this.parent;let a,l,h,r=i,o=t;if(!s.editSettings.allowEditing||"Batch"!==s.editSettings.mode||"Cell"!==s.selectionSettings.mode||"Flow"===s.selectionSettings.cellSelectionMode)return;const c=e.split("\n");let m;const b=s.getDataRows();let v,w;const E=this.parent.isFrozenGrid();E&&(v=s.getMovableDataRows(),s.getFrozenRightColumnsCount()&&(w=s.getFrozenRightDataRows()));for(let L=0;L<c.length;L++){if(m=c[L].split("\t"),r=i,L===c.length-1&&""===c[L]||li(s.getRowByIndex(o))){r++;break}for(let N=0;N<m.length;N++){if(h=s.getCellFromIndex(o,r),E){const $=v[o];h=!!b[o].querySelector('[aria-colindex="'+r+'"]')||$.querySelector('[aria-colindex="'+r+'"]'),w&&!h&&(h=w[o].querySelector('[aria-colindex="'+r+'"]'))}if(!h){r++;break}if(a=s.getColumnByIndex(r),l=a.getParser()?a.getParser()(m[N]):m[N],a.allowEditing&&!a.isPrimaryKey&&!a.template){const V={column:a,data:l,rowIndex:o};this.parent.trigger("beforePaste",V),o=V.rowIndex,V.cancel||s.editModule&&("number"===a.type?this.parent.editModule.updateCell(o,a.field,parseFloat(V.data)):s.editModule.updateCell(o,a.field,V.data))}r++}o++}s.selectionModule.selectCellsByRange({rowIndex:t,cellIndex:i},{rowIndex:o-1,cellIndex:r-1});const D=this.parent.getCellFromIndex(o-1,r-1);D&&Bi(D,["e-focus","e-focused"],[])}initialEnd(){this.parent.off(Kn,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard"}}),this.parent.element.appendChild(this.clipBoardTextArea)}keyDownHandler(e){"ctrlPlusC"===e.action?this.copy():"ctrlShiftPlusH"===e.action&&this.copy(!0)}setCopyData(e){if(""===window.getSelection().toString()){const t=this.parent.isFrozenGrid();let i,s;this.clipBoardTextArea.value=this.copyContent="";const r=this.parent.getRows();if(t&&(i=this.parent.getMovableDataRows(),this.parent.getFrozenMode()===Zt&&(s=this.parent.getFrozenRightRows())),"Cell"!==this.parent.selectionSettings.mode){const a=this.parent.getSelectedRowIndexes().sort((l,h)=>l-h);if(e){const l=[];for(let h=0;h<this.parent.getVisibleColumns().length;h++)l[h]=this.parent.getVisibleColumns()[h].headerText;this.getCopyData(l,!1,"\t",e),this.copyContent+="\n"}for(let l=0;l<a.length;l++){l>0&&(this.copyContent+="\n");const h=[].slice.call(r[a[l]].querySelectorAll(".e-rowcell:not(.e-hide)"));t&&(h.push(...[].slice.call(i[a[l]].querySelectorAll(".e-rowcell:not(.e-hide)"))),s&&h.push(...[].slice.call(s[a[l]].querySelectorAll(".e-rowcell:not(.e-hide)")))),this.getCopyData(h,!1,"\t",e)}}else{const a=this.checkBoxSelection();if(a.status){if(e){const l=[];for(let h=0;h<a.colIndexes.length;h++)l.push(this.parent.getColumnHeaderByIndex(a.colIndexes[h]));this.getCopyData(l,!1,"\t",e),this.copyContent+="\n"}for(let l=0;l<a.rowIndexes.length;l++){l>0&&(this.copyContent+="\n");const h=[].slice.call(r[a.rowIndexes[l]].getElementsByClassName("e-cellselectionbackground"));t&&(h.push(...[].slice.call(i[a.rowIndexes[l]].getElementsByClassName("e-cellselectionbackground"))),s&&h.push(...[].slice.call(s[a.rowIndexes[l]].getElementsByClassName("e-cellselectionbackground")))),this.getCopyData(h,!1,"\t",e)}}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,"\n",e)}const o={data:this.copyContent,cancel:!1};if(this.parent.trigger("beforeCopy",o),o.cancel)return;this.clipBoardTextArea.value=this.copyContent=o.data,q.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}}getCopyData(e,t,i,s){const r="string"!=typeof e[0];for(let o=0;o<e.length;o++){if(s&&t){const a=parseInt(e[o].getAttribute(Vr),10);this.copyContent+=this.parent.getColumns()[a].headerText+"\n"}r?e[o].classList.contains("e-hide")||(this.copyContent+=e[o].innerText):this.copyContent+=e[o],o<e.length-1&&(this.copyContent+=i)}}copy(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)}getModuleName(){return"clipboard"}destroy(){this.removeEventListener(),this.clipBoardTextArea&&Yt(this.clipBoardTextArea)}checkBoxSelection(){const e=this.parent;let t={status:!1};if("Cell"===e.selectionSettings.mode){const i=e.getSelectedRowCellIndexes();let s;const r=[];let o;for(o=0;o<i.length&&(i[o].cellIndexes.length&&r.push(i[o].rowIndex),!i[o].cellIndexes.length||(s||(s=JSON.stringify(i[o].cellIndexes.sort())),s===JSON.stringify(i[o].cellIndexes.sort())));o++);r.sort((a,l)=>a-l),o===i.length&&r[r.length-1]-r[0]==r.length-1&&(t={status:!0,rowIndexes:r,colIndexes:i[0].cellIndexes})}return t}}var _Z,Ce=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class w3 extends ii{}Ce([_()],w3.prototype,"field",void 0),Ce([_()],w3.prototype,"direction",void 0),Ce([_(!1)],w3.prototype,"isFromGroup",void 0);class IZ extends ii{}Ce([rh([],w3)],IZ.prototype,"columns",void 0),Ce([_(!0)],IZ.prototype,"allowUnsort",void 0);class Lp extends ii{}Ce([_()],Lp.prototype,"field",void 0),Ce([_()],Lp.prototype,"operator",void 0),Ce([_()],Lp.prototype,"value",void 0),Ce([_()],Lp.prototype,"matchCase",void 0),Ce([_(!1)],Lp.prototype,"ignoreAccent",void 0),Ce([_()],Lp.prototype,"predicate",void 0),Ce([_({})],Lp.prototype,"actualFilterValue",void 0),Ce([_({})],Lp.prototype,"actualOperator",void 0),Ce([_()],Lp.prototype,"type",void 0),Ce([_()],Lp.prototype,"ejpredicate",void 0),Ce([_()],Lp.prototype,"uid",void 0),Ce([_()],Lp.prototype,"isForeignKey",void 0);class S3 extends ii{}Ce([_(!1)],S3.prototype,"enableCache",void 0),Ce([_(3)],S3.prototype,"maxBlocks",void 0),Ce([_(3)],S3.prototype,"initialBlocks",void 0);class oy extends ii{}Ce([rh([],Lp)],oy.prototype,"columns",void 0),Ce([_("FilterBar")],oy.prototype,"type",void 0),Ce([_()],oy.prototype,"mode",void 0),Ce([_(!0)],oy.prototype,"showFilterBarStatus",void 0),Ce([_(1500)],oy.prototype,"immediateModeDelay",void 0),Ce([_()],oy.prototype,"operators",void 0),Ce([_(!1)],oy.prototype,"ignoreAccent",void 0),Ce([_(!1)],oy.prototype,"enableCaseSensitivity",void 0),Ce([_(!1)],oy.prototype,"showFilterBarOperator",void 0);class ay extends ii{}Ce([_("Row")],ay.prototype,"mode",void 0),Ce([_("Flow")],ay.prototype,"cellSelectionMode",void 0),Ce([_("Single")],ay.prototype,"type",void 0),Ce([_(!1)],ay.prototype,"checkboxOnly",void 0),Ce([_(!1)],ay.prototype,"persistSelection",void 0),Ce([_("Default")],ay.prototype,"checkboxMode",void 0),Ce([_(!1)],ay.prototype,"enableSimpleMultiRowSelection",void 0),Ce([_(!0)],ay.prototype,"enableToggle",void 0),Ce([_(!1)],ay.prototype,"allowColumnSelection",void 0);class x1 extends ii{}Ce([_([])],x1.prototype,"fields",void 0),Ce([_("")],x1.prototype,"key",void 0),Ce([_("contains")],x1.prototype,"operator",void 0),Ce([_(!0)],x1.prototype,"ignoreCase",void 0),Ce([_(!1)],x1.prototype,"ignoreAccent",void 0);class ope extends ii{}Ce([_()],ope.prototype,"targetID",void 0);class ape extends ii{}Ce([_("Both")],ape.prototype,"wrapMode",void 0);class lpe extends ii{}Ce([_("Normal")],lpe.prototype,"mode",void 0);class ly extends ii{}Ce([_(!0)],ly.prototype,"showDropArea",void 0),Ce([_(!1)],ly.prototype,"allowReordering",void 0),Ce([_(!1)],ly.prototype,"showToggleButton",void 0),Ce([_(!1)],ly.prototype,"showGroupedColumn",void 0),Ce([_(!0)],ly.prototype,"showUngroupButton",void 0),Ce([_(!1)],ly.prototype,"disablePageWiseAggregates",void 0),Ce([_([])],ly.prototype,"columns",void 0),Ce([_()],ly.prototype,"captionTemplate",void 0),Ce([_(!1)],ly.prototype,"enableLazyLoading",void 0);class Hu extends ii{}Ce([_(!1)],Hu.prototype,"allowAdding",void 0),Ce([_(!1)],Hu.prototype,"allowEditing",void 0),Ce([_(!1)],Hu.prototype,"allowDeleting",void 0),Ce([_("Normal")],Hu.prototype,"mode",void 0),Ce([_(!0)],Hu.prototype,"allowEditOnDblClick",void 0),Ce([_(!0)],Hu.prototype,"showConfirmDialog",void 0),Ce([_(!1)],Hu.prototype,"showDeleteConfirmDialog",void 0),Ce([_("")],Hu.prototype,"template",void 0),Ce([_("")],Hu.prototype,"headerTemplate",void 0),Ce([_("")],Hu.prototype,"footerTemplate",void 0),Ce([_("Top")],Hu.prototype,"newRowPosition",void 0),Ce([_({})],Hu.prototype,"dialog",void 0),Ce([_(!1)],Hu.prototype,"allowNextRowEdit",void 0);let Ke=_Z=class extends Qs{constructor(e,t){super(e,t),this.isPreventScrollEvent=!1,this.inViewIndexes=[],this.keyA=!1,this.frozenRightCount=0,this.frozenLeftCount=0,this.tablesCount=1,this.movableCount=0,this.visibleFrozenLeft=0,this.visibleFrozenRight=0,this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.media={},this.isFreezeRefresh=!1,this.tableIndex=0,this.componentRefresh=Qs.prototype.refresh,this.isVirtualAdaptive=!1,this.vRows=[],this.vcRows=[],this.vGroupOffsets={},this.rowUid=0,this.currentViewData=[],this.isManualRefresh=!1,this.isAutoFitColumns=!1,this.enableDeepCompare=!1,this.lockcolPositionCount=0,this.prevPageMoving=!1,this.pageTemplateChange=!1,this.isAutoGen=!1,this.mediaBindInstance={},this.commandDelIndex=void 0,this.asyncTimeOut=50,this.isExportGrid=!1,this.enableLogger=!0,this.needsID=!0,_Z.Inject(NPe),zt("mergePersistData",this.mergePersistGridData,this)}getPersistData(){const e=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],t={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]};for(let o=0;o<e.length;o++){const a=this[e[o]];for(const l of t[e[o]])delete a[l]}const i=this.pageSettings.template,s=Object.assign({template:void 0},this.pageSettings);this.setProperties({pageSettings:s},!0),this.isAngular&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!f(this.pagerTemplate);const r=this.addOnPersist(e);return s.template=i,this.setProperties({pageSettings:s},!0),r}requiredModules(){this.setFrozenCount(),this.enableInfiniteAggrgate();const e=[];return this.isDestroyed||(this.allowFiltering&&e.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&e.push({member:"ExcelExport",args:[this,this.serviceLocator]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),this.allowSorting&&e.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&e.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&e.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),e.push({member:"resize",args:[this]}),this.allowReordering&&e.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&e.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&e.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&e.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&e.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&e.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&e.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&e.push({member:"freeze",args:[this,this.serviceLocator]}),this.isCommandColumn(this.columns)&&e.push({member:"commandColumn",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&e.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(e)),e}extendRequiredModules(e){this.enableInfiniteScrolling&&e.push({member:"infiniteScroll",args:[this,this.serviceLocator]}),this.groupSettings.enableLazyLoading&&e.push({member:"lazyLoadGroup",args:[this,this.serviceLocator]}),this.contextMenuItems&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&e.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&e.push({member:"columnChooser",args:[this,this.serviceLocator]}),this.isForeignKeyEnabled(this.columns)&&e.push({member:"foreignKey",args:[this,this.serviceLocator]}),this.enableLogger&&e.push({member:"logger",args:[this]})}preRender(){this.serviceLocator=new kPe,this.initProperties(),this.initializeServices()}initProperties(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=Qs.prototype.refresh,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",FilterMenuDialogARIA:"Filter menu dialog",ExcelFilterDialogARIA:"Excel filter dialog",DialogEditARIA:"Edit dialog",ColumnChooserDialogARIA:"Column chooser dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}}render(){this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{datarole:"grid"}),vp({target:this.element},this.createElement),this.renderModule=new TPe(this,this.serviceLocator),this.searchModule=new BPe(this),this.scrollModule=new rF(this),this.notify(Sg,{}),(!0===this.getDataModule().dataManager.dataSource.offline||void 0===this.getDataModule().dataManager.dataSource.url)&&(this.isVirtualAdaptive=!0),this.trigger("load"),E1(this.columns,this.enableColumnVirtualization,this),this.enablePersistence&&this.notify(WY,{}),this.getMediaColumns(),E3(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.showSpinner(),this.notify(Bl,{}),this.refreshing&&this.trigger("created")}showSpinner(){this.isExportGrid||xa(this.element)}hideSpinner(){this.isExportGrid||Rl(this.element)}updateStackedFilter(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")}getMediaColumns(){if(!this.enableColumnVirtualization){const e=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!f(e))for(let t=0;t<e.length;t++)!f(e[t].hideAtMedia)&&(f(e[t].visible)||e[t].visible)&&this.pushMediaColumn(e[t],t)}}pushMediaColumn(e,t){this.mediaCol.push(e),this.media[e.uid]=window.matchMedia(e.hideAtMedia),this.mediaQueryUpdate(t,this.media[e.uid]),this.mediaBindInstance[t]=this.mediaQueryUpdate.bind(this,t),this.media[e.uid].addListener(this.mediaBindInstance[t])}updateMediaColumns(e){if(!this.enableColumnVirtualization){const t=this.getColumnIndexByUid(e.uid);for(let i=0;i<this.mediaCol.length;i++)if(e.uid===this.mediaCol[i].uid)return void this.mediaCol.splice(i,1);this.pushMediaColumn(e,t)}}mediaQueryUpdate(e,t){const i=this.getColumns()[e];this.mediaCol.some(s=>s.uid===i.uid)&&(i.visible=t.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,i.visible?this.showHider.show(i.headerText,"headerText"):this.showHider.hide(i.headerText,"headerText")))}refreshMediaCol(){this.isInitialLoad=!0;const e=this.element.querySelector("."+k_);this.aggregates.length&&this.element.scrollHeight>this.height&&e&&z([e],["e-footerpadding"]),this.getColumns().filter(i=>"checkbox"===i.type).length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode&&(this.isCheckBoxSelection=!1),"Vertical"===this.rowRenderingMode&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),W([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh()}removeMediaListener(){for(let e=0;e<this.mediaCol.length;e++)this.media[this.mediaCol[e].uid].removeListener(this.mediaBindInstance[this.mediaCol[e].index])}eventInitializer(){}destroy(){const e=this.element;if(!e)return;const t=!(!e.querySelector("."+to)||!e.querySelector("."+io));t&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(Qi,{}),this.destroyDependentModules(),(this.isReact||this.isVue)&&this.destroyTemplate(["template"]),t&&super.destroy(),this.toolTipObj.destroy();const i=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"];for(let s=0;s<i.length;s++)this[i[s]]&&(this[i[s]]=null);this.element.innerHTML="",Bi(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"]),this.isFreezeRefresh=!1}destroyDependentModules(){const e=this.element;!e||!e.querySelector("."+to)&&!e.querySelector("."+io)||(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())}getModuleName(){return"grid"}enableBoxSelection(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):this.element.classList.remove("e-afenabled")}onPropertyChanged(e,t){let o,i=!1,s=!1,r=!1;if(this.isDestroyed)return;this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();const l=Object.keys(e);l.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),s=!0);for(const h of l)switch(h){case"allowPaging":this.notify(Rn,{module:"pager",enable:this.allowPaging}),i=!0;break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(Hl,{module:"pager",properties:e.pageSettings});break}this.notify(Hl,{module:"pager",properties:e.pageSettings}),(f(e.pageSettings.currentPage)&&f(e.pageSettings.pageSize)&&f(e.pageSettings.totalRecordsCount)||!f(t.pageSettings)&&e.pageSettings.currentPage!==t.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(i=!0);break;case"allowSorting":this.notify(Rn,{module:"sort",enable:this.allowSorting}),i=!0,o=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(Rn,{module:"filter",enable:this.allowFiltering}),i=!0,"FilterBar"!==this.filterSettings.type&&this.refreshHeader();break;case"height":case"width":this.notify(Rn,{module:"scroll",properties:{width:e.width,height:e.height}});break;case"allowReordering":this.headerModule.refreshUI(),o=!0;break;case"allowRowDragAndDrop":this.notify(Rn,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(Rn,{module:"selection",enable:this.allowSelection});break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=Wh(this.rowTemplate),i=!0;break;case"detailTemplate":this.detailTemplateFn=Wh(this.detailTemplate),i=!0;break;case"allowGrouping":this.notify(Rn,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),i=!0,o=!0;break;case"enableInfiniteScrolling":case"childGrid":i=!0;break;case"toolbar":this.notify(Rn,{module:"toolbar"});break;case"groupSettings":this.notify(Hl,{module:"group",properties:e.groupSettings,oldProperties:t.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(i=!0),this.notify(Rn,{module:"aggregate",properties:e});break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"currencyCode":case"locale":this.log("frozen_rows_columns"),r=!0,s=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(i=!0),this.getDataModule().isQueryInvokedFromData=!1;break;default:this.extendedPropertyChange(h,e,s)}o&&this.updateDefaultCursor(),s?r||this.getFrozenColumns()||this.frozenRows?this.freezeRefresh():this.refresh():i&&(this.notify(da,{requestType:"refresh"}),i=!1,this.maintainSelection(e.selectedRowIndex))}extendedPropertyChange(e,t,i){switch(e){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=t.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!t.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=t.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=t.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=t.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify("rtl-updated",{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?z([this.element],"e-grid-min-height"):W([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(Rn,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(Rn,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(Rn,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(Rn,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(Hl,{module:"filter",properties:t.filterSettings});break;case"searchSettings":this.notify(Hl,{module:"search",properties:t.searchSettings});break;case"sortSettings":this.notify(Hl,{module:"sort"});break;case"selectionSettings":this.notify(Hl,{module:"selection",properties:t.selectionSettings});break;case"editSettings":this.notify(Hl,{module:"edit",properties:t.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(Rp,{case:"textwrap",isModeChg:"textWrapSettings"===e});break;case"dataSource":const s=this.getDataModule().getState();if(Object.getPrototypeOf(t).deepWatch){const o=this.getPrimaryKeyFieldNames()[0];for(let a=0,l=Object.keys(t.dataSource);a<l.length;a++)this.setRowData(U(o,this.dataSource[l[a]]),this.dataSource[l[a]])}else if(s.isPending){let o=f(this.dataSource)?[]:this.dataSource.result;const a=s.group||[];for(let l=0;l<a.length;l++)o=Ze.group(o,a[l],s.aggregates||[]);this.dataSource={result:o,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),s.resolver(this.dataSource)}else this.getDataModule().setState({isDataChanged:!1}),this.notify(UP,{}),i||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(rZ,{}));this.scrollRefresh();break;case"enableHover":(t.enableHover?z:W)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(t.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify("set-fullscreen-dialog",{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify("row-mode-change",{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(t.enableStickyHeader)}}maintainSelection(e){if(-1!==e){const t=()=>{this.selectRow(e),this.off(Kn,t)};this.on(Kn,t,this)}}setProperties(e,t){super.setProperties(e,t),e.filterSettings&&this.filterModule&&t&&this.filterModule.refreshFilter()}setTablesCount(){const e=this.getFrozenColumns(),t=this.getFrozenLeftColumnsCount(),i=this.getFrozenRightColumnsCount();!e||t||i?!e&&(t||i)&&(t&&!i||i&&!t?this.tablesCount=2:t&&i&&(this.tablesCount=3)):this.tablesCount=2}getTablesCount(){return this.tablesCount}updateDefaultCursor(){let e=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)"));const t=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),i=this.getColumns();if(this.enableColumnVirtualization&&this.getFrozenColumns()){const s=this.contentModule.getHeaderCells();e=s.length?s:e}for(let s=0;s<e.length;s++){const r=e[s];(this.allowGrouping||this.allowReordering||this.allowSorting)&&r.classList.add(i[s].allowReordering&&i[s].allowSorting&&i[s].allowGrouping?"e-mousepointer":"e-defaultcursor")}for(let s=0;s<t.length;s++)this.allowReordering&&t[s].classList.add("e-mousepointer")}updateColumnModel(e){for(let t=0,i=e.length;t<i;t++)e[t].columns?this.updateColumnModel(e[t].columns):this.columnModel.push(e[t]);this.updateColumnLevelFrozen(),this.updateFrozenColumns(),this.updateLockableColumns()}updateColumnLevelFrozen(){const e=this.columnModel,t=[],i=[],s=[];if(this.frozenLeftCount||this.frozenRightCount){for(let r=0,o=e.length;r<o;r++){const a=e[r];"Left"===a.freeze?(a.freezeTable=or,t.push(a)):"Right"===a.freeze?(a.freezeTable=an,i.push(a)):(a.freezeTable="movable",s.push(a))}this.columnModel=t.concat(s).concat(i)}}updateFrozenColumns(){if(this.frozenLeftCount||this.frozenRightCount)return;const e=this.columnModel,t=this.frozenColumns,i=this.getFrozenColumns();let s=0;for(let r=0,o=e.length;r<o;r++){const a=e[r];t&&(a.freezeTable=r<t?or:"movable"),a.isFrozen&&r>=t?(a.freezeTable=or,e.splice(this.frozenColumns+s,0,e.splice(r,1)[0]),s++):i&&!t&&(a.freezeTable="movable")}}getFrozenLeftCount(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()}isFrozenGrid(){return 0!==this.getFrozenColumns()||0!==this.getFrozenLeftColumnsCount()||0!==this.getFrozenRightColumnsCount()}getFrozenMode(){return this.frozenName}updateLockableColumns(){const e=this.columnModel;let t=0,i=0;const s=this.getFrozenColumns();for(let r=0;r<e.length;r++)e[r].lockColumn&&(r<s?(e.splice(t,0,e.splice(r,1)[0]),t++):(e.splice(s+i,0,e.splice(r,1)[0]),i++))}checkLockColumns(e){for(let t=0;t<e.length;t++)e[t].columns?this.checkLockColumns(e[t].columns):e[t].lockColumn&&this.lockcolPositionCount++}getColumns(e){const t=this.inViewIndexes.map(r=>r-this.groupSettings.columns.length).filter(r=>r>-1),i=t.length;(!this.enableColumnVirtualization||f(this.columnModel)||0===this.columnModel.length||e)&&(this.columnModel=[],this.updateColumnModel(this.columns));let s=0===i?this.columnModel:this.columnModel.slice(t[0],t[i-1]+1);return this.contentModule&&this.enableColumnVirtualization&&this.isFrozenGrid()&&t.length&&t[0]>0&&(s=this.contentModule.ensureFrozenCols(s)),s}getStackedHeaderColumnByHeaderText(e,t){for(let i=0;i<t.length;i++){const s=t[i];if(s.field===e||s.headerText===e){this.stackedColumn=s;break}s.columns&&this.getStackedHeaderColumnByHeaderText(e,s.columns)}return this.stackedColumn}getColumnIndexesInView(){return this.inViewIndexes}getQuery(){return this.query}getLocaleConstants(){return this.defaultLocale}setColumnIndexesInView(e){this.inViewIndexes=e}getVisibleColumns(){return this.getCurrentVisibleColumns()}getHeaderContent(){return this.headerModule.getPanel()}setGridHeaderContent(e){this.headerModule.setPanel(e)}getContentTable(){return this.contentModule.getTable()}setGridContentTable(e){this.contentModule.setTable(e)}getContent(){return this.contentModule.getPanel()}setGridContent(e){this.contentModule.setPanel(e)}getHeaderTable(){return this.headerModule.getTable()}setGridHeaderTable(e){this.headerModule.setTable(e)}getFooterContent(){return this.footerElement=this.element.getElementsByClassName(k_)[0],this.footerElement}getFooterContentTable(){return this.footerElement=this.element.getElementsByClassName(k_)[0],this.footerElement.firstChild.firstChild}getPager(){return this.gridPager}setGridPager(e){this.gridPager=e}getRowByIndex(e){return this.contentModule.getRowByIndex(e)}getMovableRowByIndex(e){return this.contentModule.getMovableRowByIndex(e)}getFrozenRowByIndex(e){return this.getFrozenDataRows()[e]}getRows(){return this.contentModule.getRowElements()}getFrozenRightRowByIndex(e){return this.contentModule.getFrozenRightRowByIndex(e)}getRowInfo(e){const t=e;let i={target:e};if(!f(e)&&f(Te(t,"e-detailrowcollapse")&&f(Te(t,"e-recordplusexpand")))){const s=B(t,"."+Ji);if(!s){const o=B(t,"."+ps);if(!f(o)&&!o.classList.contains("e-addedrow")){const a=this.getRowObjectFromUID(o.getAttribute("data-uid")),l=parseInt(o.getAttribute(Di),10);i={row:o,rowData:a.data,rowIndex:l}}return i}const r=parseInt(s.getAttribute(Vr),10);if(!f(s)&&!isNaN(r)){const o=B(s,"."+ps),a=parseInt(o.getAttribute(Di),10),l=this.getFrozenColumns(),h=this.columnModel[r].getFreezeTableName();let c=this.contentModule.getRows(),m=r+this.getIndentCount();this.isFrozenGrid()&&(h===or?c=this.contentModule.getRows():"movable"===h?(m=r-l-this.frozenLeftCount,c=this.contentModule.getMovableRows()):h===an&&(m=r-(this.frozenLeftCount+this.movableCount),c=this.contentModule.getFrozenRightRows()));const b=c.filter(E=>E.uid===o.getAttribute("data-uid"));let w,v={};Object.keys(b).length&&(v=b[0].data,w=b[0].cells[m].column),i={cell:s,cellIndex:r,row:o,rowIndex:a,rowData:v,column:w,target:e}}}return i}getMovableRows(){return this.contentModule.getMovableRowElements()}getFrozenRightRows(){return this.contentModule.getFrozenRightRowElements()}getDataRows(){return this.getAllDataRows()}getAllDataRows(e){if(f(this.getContentTable().querySelector(Je)))return[];const t=this.isFrozenGrid()?this.getFrozenLeftContentTbody():this.getContentTable().querySelector(Je);let i=[].slice.call(t.children);if(this.frozenRows){const r=this.isFrozenGrid()?this.getHeaderContent().querySelector("."+xg).querySelector(Je):this.getHeaderTable().querySelector(Je),o=[].slice.call(r.children);i=this.addMovableRows(o,i)}return this.generateDataRows(i,e)}addMovableRows(e,t){for(let i=0,s=t.length;i<s;i++)e.push(t[i]);return e}generateDataRows(e,t){const i=[];for(let s=0,r=e.length;s<r;s++)e[s].classList.contains(ps)&&(!e[s].classList.contains("e-hiddenrow")||t)&&(this.isCollapseStateEnabled()?i[parseInt(e[s].getAttribute("aria-rowindex"),10)]=e[s]:i.push(e[s]));return i}getMovableDataRows(){return this.getAllMovableDataRows()}getAllMovableDataRows(e){if(!this.isFrozenGrid())return[];let t=[].slice.call(this.getContent().querySelector("."+zs).querySelector(Je).children);if(this.frozenRows){const s=[].slice.call(this.getHeaderContent().querySelector("."+js).querySelector(Je).children);t=this.addMovableRows(s,t)}return this.generateDataRows(t,e)}getFrozenDataRows(){return this.getAllFrozenDataRows()}getAllFrozenDataRows(e){let t=[].slice.call(this.getContent().querySelector("."+jf).querySelector(Je).children);if(this.frozenRows){const s=[].slice.call(this.getHeaderContent().querySelector("."+xg).querySelector(Je).children);t=this.addMovableRows(s,t)}return this.generateDataRows(t,e)}getFrozenRightDataRows(){return this.getAllFrozenRightDataRows()}getAllFrozenRightDataRows(e){if("Right"!==this.getFrozenMode()&&"Left-Right"!==this.getFrozenMode())return[];let t=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(Je).children);if(this.frozenRows){const s=[].slice.call(this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(Je).children);t=this.addMovableRows(s,t)}return this.generateDataRows(t,e)}setCellValue(e,t,i){const r="data",o="index",l="Right"===this.getFrozenMode(),h=this.getPrimaryKeyFieldNames()[0],c=new Bu(this,this.serviceLocator);let m=this.getColumnIndexByField(t);const b=this.getColumnByField(t),w=("movable"===b.getFreezeTableName()?this.contentModule.getMovableRows():"frozen-right"===b.getFreezeTableName()?this.getFrozenRightRowsObject():this.contentModule.getRows()).filter(D=>U(h,D.data)===e)[0];if(!f(w?this.element.querySelector("[data-uid="+w.uid+"]"):null)){zt(t,i,w[r]);let D=this.getFrozenLeftColumnsCount()||this.getFrozenColumns();const L=this.getMovableColumnsCount();this.isRowDragable()&&!l&&D++;const N=D+L,V=this.getCellFromIndex(w[o],m);if(!f(V)){const $="movable"===b.getFreezeTableName()?D:"frozen-right"===b.getFreezeTableName()?N:0;this.groupSettings.columns.length&&(m+=this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&m++,this.isRowDragable()&&!l&&m++,c.refreshTD(V,w.cells[m-$],w[r],{index:w[o]}),this.aggregates.length>0&&(this.notify(DC,{}),this.groupSettings.columns.length>0&&this.notify(uS,{})),!f(w)&&!f(w.changes)&&(w.changes[t]=i),this.trigger(_Y,{cell:V,column:b,data:w[r]})}}}refreshReactColumnTemplateByUid(e){this.isReact&&this.clearTemplate(["columnTemplate"],void 0,()=>{const s=this.getDataRows(),r=this.getIndentCount(),o=this.getNormalizedColumnIndex(e);for(let a=0;a<s.length;a++){const l=this.getRowObjectFromUID(s[a].getAttribute("data-uid"));if(l&&l.isDataRow&&!f(l.index)){const h=l.cells[o],c=new Bu(this,this.serviceLocator),m=this.getCellFromIndex(a,o-r);c.refreshTD(m,h,l.data,{index:l.index})}}})}refreshReactHeaderTemplateByUid(e){if(this.isReact){const t="cells",i=this.headerModule.rows,s=this.getNormalizedColumnIndex(e);for(let r=0;r<i.length;r++){const o=i[r][t][s];if(o&&o.column.uid===e){const a=new epe(this,this.serviceLocator),l=Te(this.element.querySelectorAll("[e-mappinguid="+e+"]")[0],"e-templatecell");a.refresh(o,l)}}}}setRowData(e,t){let s=this.contentModule.getRows();const r=this.getPrimaryKeyFieldNames()[0],o=new od(this.serviceLocator,null,this);this.groupSettings.columns.length>0&&this.aggregates.length>0&&(s=s.filter(l=>l.isDataRow));const a=s.filter(l=>U(r,l.data)===e)[0];!f(a)&&this.element.querySelectorAll("[data-uid="+a.uid+"]").length&&(a.changes=t,function _3(n,e,t){for(let s=0;s<e.length;s++)zt(e[s].field,gS(e[s],t),n.foreignKeyData);const i=n.cells;for(let s=0;s<i.length;s++)i[s].isForeignKey&&zt("foreignKeyData",U(i[s].column.field,n.foreignKeyData),i[s])}(a,this.getForeignKeyColumns(),a.changes),o.refresh(a,this.getColumns(),!0),this.aggregates.length>0&&(this.notify(DC,{}),this.groupSettings.columns.length>0&&this.notify(uS,{})))}getCellFromIndex(e,t){return NZ(this,this.getColumnByIndex(t),e,t)}getMovableCellFromIndex(e,t){if("Left-Right"===this.frozenName&&t>=this.movableCount)return;const i=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableDataRows()[e]&&this.getMovableDataRows()[e].getElementsByClassName(Ji)[t-i]}getFrozenRightCellFromIndex(e,t){const i=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount(),s=this.getFrozenRightDataRows();return s[e]&&s[e].getElementsByClassName(Ji)[t-i]}getColumnHeaderByIndex(e){return this.getHeaderTable().getElementsByClassName("e-headercell")[e]}getMovableColumnHeaderByIndex(e){const t=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableVirtualHeader().getElementsByClassName("e-headercell")[e-t]}getFrozenRightColumnHeaderByIndex(e){const t=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount();return this.getFrozenRightHeader().getElementsByClassName("e-headercell")[e-t]}getFrozenLeftColumnHeaderByIndex(e){return this.getFrozenVirtualHeader().getElementsByClassName("e-headercell")[e]}getRowObjectFromUID(e,t,i){const s=this.contentModule.getRows();let r=this.rowObject(s,e);return this.isFrozenGrid()&&(!r||t||i)?(r=this.rowObject(this.contentModule.getMovableRows(),e),(!r&&"Left-Right"===this.getFrozenMode()||i)&&(r=this.rowObject(this.contentModule.getFrozenRightRows(),e)),r):(f(r)&&this.enableVirtualization&&this.groupSettings.columns.length>0&&(r=this.rowObject(this.vRows,e)),r)}rowObject(e,t){for(const i of e)if(i.uid===t)return i;return null}getRowsObject(){return this.contentModule.getRows()}getMovableRowsObject(){let e=[];return this.isFrozenGrid()&&(e=this.contentModule.getMovableRows()),e}getFrozenRightRowsObject(){let e=[];return("Right"===this.getFrozenMode()||"Left-Right"===this.getFrozenMode())&&(e=this.contentModule.getFrozenRightRows()),e}getColumnHeaderByField(e){const t=this.getColumnByField(e);return t?this.getColumnHeaderByUid(t.uid):void 0}getColumnHeaderByUid(e){const t=this.getHeaderContent().querySelector("[e-mappinguid="+e+"]");return t?t.parentElement:void 0}getColumnByIndex(e){let t;return this.getColumns().some((i,s)=>(t=i,s===e)),t}getColumnByField(e){return P_(this.getColumns(),t=>{if(t.field===e)return t})[0]}getColumnIndexByField(e){const t=this.getColumns();for(let i=0;i<t.length;i++)if(t[i].field===e)return i;return-1}getColumnByUid(e){return P_([...this.getColumns(),...this.getStackedColumns(this.columns)],t=>{if(t.uid===e)return t})[0]}getStackedColumns(e,t=[]){for(const i of e)i.columns&&(t.push(i),this.getStackedColumns(i.columns,t));return t}getColumnIndexByUid(e){const t=P_(this.getColumns(),(i,s)=>{if(i.uid===e)return s})[0];return f(t)?-1:t}getUidByColumnField(e){return P_(this.getColumns(),t=>{if(t.field===e)return t.uid})[0]}getNormalizedColumnIndex(e){return this.getColumnIndexByUid(e)+this.getIndentCount()}getIndentCount(){let e=0;return this.allowGrouping&&(e+=this.groupSettings.columns.length),this.isDetail()&&e++,this.isRowDragable()&&f(this.rowDropSettings.targetID)&&e++,e}getColumnFieldNames(){const e=[];let t;for(let i=0,s=this.getColumns().length;i<s;i++)t=this.getColumns()[i],t.visible&&e.push(t.field);return e}getRowTemplate(){return this.rowTemplateFn}getDetailTemplate(){return this.detailTemplateFn}getEditTemplate(){return this.editTemplateFn}getEditHeaderTemplate(){return this.editHeaderTemplateFn}getEditFooterTemplate(){return this.editFooterTemplateFn}getPrimaryKeyFieldNames(){const e=[];for(let t=0;t<this.columnModel.length;t++)this.columnModel[t].isPrimaryKey&&e.push(this.columnModel[t].field);return e}refresh(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())}refreshHeader(){this.headerModule.refreshUI()}getSelectedRows(){return this.selectionModule?this.selectionModule.selectedRecords:[]}getSelectedRowIndexes(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]}getSelectedRowCellIndexes(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]}getSelectedRecords(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]}getSelectedColumnsUid(){const e=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(t=>e.push(this.getColumns()[t].uid)),e}getDataModule(){return this.renderModule.data}showColumns(e,t){this.showHider.show(e,t=t||"headerText")}hideColumns(e,t){this.showHider.hide(e,t=t||"headerText")}getFrozenColumns(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)}getFrozenRightColumnsCount(){return this.frozenRightCount}getFrozenLeftColumnsCount(){return this.frozenLeftCount}getMovableColumnsCount(){return this.movableCount}setFrozenCount(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.splitFrozenCount(this.columns),this.frozenColumns&&(this.frozenLeftCount||this.frozenRightCount)&&this.setProperties({frozenColumns:0},!0),this.setTablesCount(),this.frozenName=this.frozenLeftCount&&!this.frozenRightCount?"Left":this.frozenRightCount&&!this.frozenLeftCount?"Right":this.frozenLeftCount&&this.frozenRightCount?"Left-Right":void 0}getVisibleFrozenLeftCount(){return this.visibleFrozenLeft}getVisibleFrozenRightCount(){return this.visibleFrozenRight}getVisibleMovableCount(){return this.visibleMovable}getFrozenRightColumns(){return this.frozenRightColumns}getFrozenLeftColumns(){return this.frozenLeftColumns}getMovableColumns(){return this.movableColumns}splitFrozenCount(e){for(let t=0;t<e.length;t++)e[t].columns?this.splitFrozenCount(e[t].columns):"Right"===e[t].freeze?(!1!==e[t].visible&&this.visibleFrozenRight++,this.frozenRightColumns.push(e[t]),this.frozenRightCount++):"Left"===e[t].freeze?(!1!==e[t].visible&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(e[t]),this.frozenLeftCount++):(!1!==e[t].visible&&this.visibleMovable++,this.movableColumns.push(e[t]),this.movableCount++)}getVisibleFrozenColumns(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)}getFilterUIInfo(){return this.filterModule?this.filterModule.getFilterUIInfo():{}}getVisibleFrozenColumnsCount(){let e=0;const t=this.columnModel;for(let i=0;i<this.frozenColumns;i++)t[i].visible&&e++;if(this.frozenLeftCount||this.frozenRightCount)for(let i=0;i<t.length;i++)t[i].visible&&("Left"===t[i].freeze||"Right"===t[i].freeze)&&e++;return e}getVisibleFrozenCount(e,t){if(!this.frozenLeftCount&&!this.frozenRightCount)for(let i=0,s=e.length;i<s;i++)e[i].columns?t=this.getVisibleFrozenCount(e[i].columns,t):e[i].isFrozen&&e[i].visible&&t++;return t}getFrozenCount(e,t,i){for(let s=0,r=e.length;s<r;s++)e[s].columns?t=this.getFrozenCount(e[s].columns,t,i):(e[s].isFrozen&&i>this.frozenColumns-1&&t++,i++);return t}goToPage(e){this.pagerModule&&this.pagerModule.goToPage(e)}updateExternalMessage(e){this.pagerModule&&this.pagerModule.updateExternalMessage(e)}sortColumn(e,t,i){this.sortModule&&this.sortModule.sortColumn(e,t,i)}clearSorting(){this.sortModule&&this.sortModule.clearSorting()}removeSortColumn(e){this.sortModule&&this.sortModule.removeSortColumn(e)}clearGridActions(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()}filterByColumn(e,t,i,s,r,o,a,l){this.filterModule&&this.filterModule.filterByColumn(e,t,i,s,r,o,a,l)}clearFiltering(e){this.filterModule&&this.filterModule.clearFiltering(e)}removeFilteredColsByField(e,t){this.filterModule&&this.filterModule.removeFilteredColsByField(e,t)}selectRow(e,t){this.selectionModule&&this.selectionModule.selectRow(e,t)}selectRows(e){this.selectionModule&&this.selectionModule.selectRows(e)}clearSelection(){this.selectionModule&&this.selectionModule.clearSelection()}selectCell(e,t){this.selectionModule&&this.selectionModule.selectCell(e,t)}selectCellsByRange(e,t){this.selectionModule.selectCellsByRange(e,t)}search(e){this.searchModule&&this.searchModule.search(e)}print(){this.printModule&&this.printModule.print()}deleteRecord(e,t){this.editModule&&this.editModule.deleteRecord(e,t)}startEdit(){this.editModule&&this.editModule.startEdit()}endEdit(){this.editModule&&this.editModule.endEdit()}closeEdit(){this.editModule&&this.editModule.closeEdit()}addRecord(e,t){this.editModule&&this.editModule.addRecord(e,t)}deleteRow(e){this.editModule&&this.editModule.deleteRow(e)}editCell(e,t){this.editModule&&this.editModule.editCell(e,t)}saveCell(){this.editModule&&this.editModule.saveCell()}updateCell(e,t,i){this.editModule&&this.editModule.updateCell(e,t,i)}updateRow(e,t){this.editModule&&this.editModule.updateRow(e,t)}getBatchChanges(){return this.editModule?this.editModule.getBatchChanges():{}}enableToolbarItems(e,t){this.toolbarModule&&this.toolbarModule.enableItems(e,t)}copy(e){this.clipboardModule&&this.clipboardModule.copy(e)}recalcIndentWidth(){if(!this.getHeaderTable().querySelector(".e-emptycell")||!this.groupSettings.columns.length&&!this.isDetail()&&!this.isRowDragable()||this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")||!this.getContentTable())return;let e=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth;const t=[].slice.call(this.getHeaderTable().querySelector(Si).childNodes),i=[].slice.call(this.getContentTable().querySelector(Si).childNodes),s=e/30;let r="Right"===this.getFrozenMode()?this.frozenRightCount:0;const o=this.element.offsetWidth,a=(l,h)=>{if(PZ(this)){const c=(h/o*100).toFixed(1)+"%";t[l].style.width=c,i[l].style.width=c}else t[l].style.width=h+"px",i[l].style.width=h+"px";this.notify(jP,{index:l,width:h})};for(s>=1&&(e=30/s),e<1&&(e=1),(this.enableColumnVirtualization||this.isAutoGen)&&(e=30);r<this.groupSettings.columns.length;)a(r,e),r++;this.isDetail()&&(a(r,e),r++),this.isRowDragable()&&a(r,e),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}resetIndentWidth(){if(PZ(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth()),("auto"===this.width||"string"==typeof this.width&&-1!==this.width.indexOf("%"))&&this.getColumns().filter(e=>(!e.width||"auto"===e.width)&&e.minWidth).length>0){const e=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(e)}this.isFrozenGrid()&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&"Content"!==this.textWrapSettings.wrapMode&&this.notify(QP,{})}isRowDragable(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID}reorderColumns(e,t){this.reorderModule&&this.reorderModule.reorderColumns(e,t)}reorderColumnByIndex(e,t){this.reorderModule&&this.reorderModule.reorderColumnByIndex(e,t)}reorderColumnByTargetIndex(e,t){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(e,t)}reorderRows(e,t){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(e,t)}refreshDataSource(e){this.notify("refreshdataSource",e)}disableRowDD(e){const t=this.getHeaderTable(),i=this.getContentTable(),s=t.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),r=this.getRows(),o=e?"none":"";ht(t.querySelector(Si).childNodes[0],{display:o}),ht(i.querySelector(Si).childNodes[0],{display:o});for(let a=0;a<this.getRows().length;a++){const l=r[a].firstElementChild;e?z([l],"e-hide"):W([l],["e-hide"])}for(let a=0;a<t.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;a++){const l=s[a];e?z([l],"e-hide"):W([l],["e-hide"])}}autoFitColumns(e){this.resizeModule&&this.resizeModule.autoFitColumns(e)}createColumnchooser(e,t,i){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(e,t,i)}initializeServices(){this.serviceLocator.register("widthService",this.widthService=new SZ(this)),this.serviceLocator.register("cellRendererFactory",new DPe),this.serviceLocator.register("rendererFactory",new RPe),this.serviceLocator.register("localization",this.localeObj=new jo(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new __(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new HPe(this)),this.serviceLocator.register("ariaService",this.ariaService=new nF),this.serviceLocator.register("focus",this.focusModule=new APe(this))}processModel(){const e=this.groupSettings.columns,t=this.sortSettings.columns;let i,s;if(this.allowGrouping)for(let r=0,o=e.length;r<o;r++){s=0;for(let a=t.length;s<a;s++)if(t[s].field===e[r]){i=!0;break}if(i?this.allowSorting?this.sortedColumns.push(t[s].field):t[s].direction="Ascending":t.push({field:e[r],direction:"Ascending",isFromGroup:!0}),!this.groupSettings.showGroupedColumn){const a=this.enableColumnVirtualization?this.columns.filter(l=>l.field===e[r])[0]:this.getColumnByField(e[r]);a?a.visible=!1:this.log("initial_action",{moduleName:"group",columnName:e[r]})}}if(!e.length)for(let r=0;r<t.length;r++)this.sortedColumns.push(t[r].field);if(this.rowTemplateFn=Wh(this.rowTemplate),this.detailTemplateFn=Wh(this.detailTemplate),this.editTemplateFn=Wh(this.editSettings.template),this.editHeaderTemplateFn=Wh(this.editSettings.headerTemplate),this.editFooterTemplateFn=Wh(this.editSettings.footerTemplate),!f(this.parentDetails)){const r=f(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",r,!0)}this.initForeignColumn()}initForeignColumn(){this.isForeignKeyEnabled(this.getColumns())&&this.notify("initForeignKeyColumn",this.getForeignKeyColumns())}enableVerticalRendering(){"Vertical"===this.rowRenderingMode?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")}gridRender(){this.updateRTL(),"Vertical"===this.rowRenderingMode&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),q.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),Bi(this.element,["e-responsive","e-default"],[]);const e=this.serviceLocator.getService("rendererFactory");this.headerModule=e.getRenderer(Br.Header),this.contentModule=e.getRenderer(Br.Content),this.printModule=new TZ(this,this.scrollModule),this.clipboardModule=new VPe(this),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()}dataReady(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()}updateRTL(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}createGridPopUpElement(){const e=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),t=this.createElement("div",{className:rr,attrs:{tabIndex:"-1"}});mi([t,this.createElement("div",{className:"e-uptail e-tail"})],e),t.appendChild(this.createElement("span")),mi([t,this.createElement("div",{className:"e-downtail e-tail"})],e),this.element.appendChild(e)}updateGridLines(){switch(Bi(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()}updateResizeLines(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")}applyTextWrap(){if(this.allowTextWrap){const e=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":Kd(this.element,!1),Kd(this.getContent(),!1),Kd(e,!0);break;case"Content":Kd(this.getContent(),!0),Kd(this.element,!1),Kd(e,!1);break;default:Kd(this.element,!0),Kd(this.getContent(),!1),Kd(e,!1)}"Content"!==this.textWrapSettings.wrapMode&&this.notify(QP,{})}}removeTextWrap(){Kd(this.element,!1),Kd([].slice.call(this.element.getElementsByClassName("e-columnheader")),!1),Kd(this.getContent(),!1),"Content"!==this.textWrapSettings.wrapMode&&this.notify(QP,{})}createTooltip(){this.toolTipObj=new $n({opensOn:"custom",content:""},this.element)}freezeRefresh(){this.isFreezeRefresh=!0,this.enableVirtualization&&(this.pageSettings.currentPage=1),this.componentRefresh()}getTooltipStatus(e){const t=this.getHeaderTable(),i="e-gridheader",s=this.createTable(t,i,"header"),r=this.createTable(t,i,"content"),o=e.classList.contains("e-headercell")?s:r,a=e.classList.contains("e-headercell")?"th":"tr";o.querySelector(a).className=e.className,o.querySelector(a).innerHTML=e.innerHTML;const l=o.querySelector(a).getBoundingClientRect().width;return document.body.removeChild(s),document.body.removeChild(r),l>e.getBoundingClientRect().width}mouseMoveHandler(e){if(this.isEllipsisTooltip()){const t=Te(e.target,"e-ellipsistooltip");(this.prevElement!==t||"mouseout"===e.type)&&this.toolTipObj.close();const i=e.target.tagName,s=["A","BUTTON","INPUT"];if(t&&"mouseout"!==e.type&&(!q.isDevice||-1===s.indexOf(i))){if(t.getAttribute("aria-describedby"))return;this.getTooltipStatus(t)&&(this.toolTipObj.content=t.getElementsByClassName("e-headertext").length?t.getElementsByClassName("e-headertext")[0].innerText:t.innerText,this.prevElement=t,this.getColumns()[parseInt(t.getAttribute(Vr),10)].disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),this.toolTipObj.open(t))}}this.hoverFrozenRows(e)}hoverFrozenRows(e){if(this.isFrozenGrid()){const t=Te(e.target,ps);if([].slice.call(this.element.getElementsByClassName("e-frozenhover")).length&&"mouseout"===e.type){const i=[].slice.call(this.element.getElementsByClassName("e-frozenhover"));for(let s=0;s<i.length;s++)i[s].classList.remove("e-frozenhover")}else if(t){const i=[].slice.call(this.element.querySelectorAll('tr[aria-rowindex="'+t.getAttribute(Di)+'"]'));i.splice(i.indexOf(t),1);for(let s=0;s<i.length;s++)"true"!==t.getAttribute("aria-selected")&&i[s]?i[s].classList.add("e-frozenhover"):i[s]&&i[s].classList.remove("e-frozenhover")}}}isEllipsisTooltip(){const e=this.getColumns();if("EllipsisWithTooltip"===this.clipMode)return!0;for(let t=0;t<e.length;t++)if("EllipsisWithTooltip"===e[t].clipMode)return!0;return!1}scrollHandler(){this.isEllipsisTooltip()&&this.toolTipObj.close()}createTable(e,t,i){const s=this.createElement("div");s.className=this.element.className,s.style.cssText="display: inline-block;visibility:hidden;position:absolute";const r=this.createElement("div");r.className=t;const o=this.createElement("table",{attrs:{role:"grid"}});o.className=e.className,o.style.cssText="table-layout: auto;width: auto";const a="header"===i?"th":"td",l=this.createElement("tr",{attrs:{role:"row"}}),h=this.createElement(a);return l.appendChild(h),o.appendChild(l),r.appendChild(o),s.appendChild(r),document.body.appendChild(s),s}onKeyPressed(e){("tab"===e.action||"shiftTab"===e.action)&&this.toolTipObj.close()}wireEvents(){k.add(this.element,"click",this.mouseClickHandler,this),k.add(this.element,"touchend",this.mouseClickHandler,this),k.add(this.element,"focusout",this.focusOutHandler,this),k.add(this.element,"dblclick",this.dblClickHandler,this),k.add(this.element,"keydown",this.keyPressHandler,this),k.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new Gn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),k.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),k.add(this.element,"mousemove",this.mouseMoveHandler,this),k.add(this.element,"mouseout",this.mouseMoveHandler,this),k.add(this.getContent(),"touchstart",this.tapEvent,this),k.add(document.body,"keydown",this.keyDownHandler,this)}unwireEvents(){k.remove(this.element,"click",this.mouseClickHandler),k.remove(this.element,"touchend",this.mouseClickHandler),k.remove(this.element,"focusout",this.focusOutHandler),k.remove(this.element,"dblclick",this.dblClickHandler),k.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),k.remove(this.element,"mousemove",this.mouseMoveHandler),k.remove(this.element,"mouseout",this.mouseMoveHandler),k.remove(this.element,"keydown",this.keyPressHandler),k.remove(this.getContent(),"touchstart",this.tapEvent),k.remove(document.body,"keydown",this.keyDownHandler),k.remove(window,"resize",this.resetIndentWidth)}addListener(){this.isDestroyed||(this.on(Dp,this.dataReady,this),this.on(Kn,this.recalcIndentWidth,this),this.on(Go,this.recalcIndentWidth,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(Dc,this.dataBoundFunction),this.on(Nr,this.onKeyPressed,this))}removeListener(){this.isDestroyed||(this.off(Dp,this.dataReady),this.off(Kn,this.recalcIndentWidth),this.off(Go,this.recalcIndentWidth),this.removeEventListener(Dc,this.dataBoundFunction),this.off(Nr,this.onKeyPressed))}getCurrentViewRecords(){return Dr(this)?f(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData}mouseClickHandler(e){if(this.isChildGrid(e)||Te(e.target,"e-gridpopup")&&e.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(e)||(!this.allowRowDragAndDrop&&(Te(e.target,io)||"TD"===e.target.tagName)||!this.allowGrouping&&!this.allowReordering&&Te(e.target,"e-gridheader"))&&e.touches)return;Te(e.target,"e-gridheader")&&this.allowRowDragAndDrop&&!Te(e.target,"e-filterbarcell")&&e.preventDefault();const t=this.getRowInfo(e.target);t.cancel=!1;let s=!1;const r=B(e.target,"tr");if(r&&r.getAttribute("data-uid")){const o=this.getRowObjectFromUID(r.getAttribute("data-uid"));s=!!o&&o.isDataRow}s&&this.trigger("recordClick",t),this.notify(Vl,e)}checkEdit(e){const t=Te(e.target,ps),i="Batch"!==this.editSettings.mode&&this.isEdit&&t&&(t.classList.contains(zl)||t.classList.contains(rd));return!Te(e.target,"e-unboundcelldiv")&&(i||Te(e.target,Ji)&&Te(e.target,Ji).classList.contains("e-editedbatchcell"))}dblClickHandler(e){const t=Te(e.target,"e-grid");if(f(t)||t.id!==this.element.id||B(e.target,".e-unboundcelldiv"))return;let i=!1;const s=B(e.target,"tr");if(s&&s.getAttribute("data-uid")){const o=this.getRowObjectFromUID(s.getAttribute("data-uid"));i=!!o&&o.isDataRow}const r=this.getRowInfo(e.target);r.target=e.target,i&&this.trigger("recordDoubleClick",r),this.notify("dblclick",e)}focusOutHandler(e){if(this.isChildGrid(e))return;Te(e.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");const t=this.element.querySelector(".e-cancel:not(.e-hide)");t&&t.classList.add("e-hide");const i=e.relatedTarget,s=i?i.getAttribute("aria-owns"):null;(!i||!Te(i,"e-grid")&&(!f(s)&&s)!==e.target.getAttribute("aria-owns"))&&!this.keyPress&&this.isEdit&&!q.isDevice&&("Batch"===this.editSettings.mode&&!((Te(i,"e-ddl")||Te(i,"e-ddt"))&&Te(i,"e-input-group"))&&(this.editModule.saveCell(),this.notify("editNextValCell",{})),"Normal"===this.editSettings.mode&&this.editModule.editFormValidate()),this.keyPress=!1}isChildGrid(e){const t=Te(e.target,"e-grid");return!!(t&&t.id!==this.element.id||Te(e.target,"e-unboundcelldiv")&&f(t))}mergePersistGridData(e){const t=this.getLocalData();if(!f(t)&&""!==t||!f(e)){const i=f(e)?JSON.parse(t):e;this.enableVirtualization&&(i.pageSettings.currentPage=1);const s=Object.keys(i);this.isProtectedOnChange=!0;for(const r of s)"object"!=typeof this[r]||f(this[r])?this[r]=i[r]:Array.isArray(this[r])&&"columns"===r?(E3(this[r]),this.mergeColumns(i[r],this[r]),this[r]=i[r]):Ae(this[r],i[r]);this.isProtectedOnChange=!1}}mergeColumns(e,t){const i=e;for(let s=0;s<i.length;s++){const r=t.filter(o=>o.index===i[s].index)[0];f(r)||(r.columns&&r.columns.length?(this.mergeColumns(i[s].columns,r.columns),i[s]=Ae(r,i[s],{},!0)):i[s]=Ae(r,i[s],{},!0))}}isDetail(){return!f(this.detailTemplate)||!f(this.childGrid)}isCommandColumn(e){return e.some(t=>t.columns?this.isCommandColumn(t.columns):!(!t.commands&&!t.commandsTemplate))}isForeignKeyEnabled(e){return e.some(t=>t.columns?this.isForeignKeyEnabled(t.columns):!(!t.dataSource||!t.foreignKeyValue))}keyPressHandler(e){const t=Ae(e,{cancel:!1});this.trigger("keyPressed",t),!0===t.cancel&&e.stopImmediatePropagation()}keyDownHandler(e){e.altKey&&(74===e.keyCode&&(this.keyA?(this.notify(sZ,{target:e.target,collapse:!1}),this.keyA=!1):(this.focusModule.focusHeader(),this.focusModule.addOutline())),87===e.keyCode&&(this.focusModule.focusContent(),this.focusModule.addOutline()),65===e.keyCode&&(this.keyA=!0),72===e.keyCode&&this.keyA&&(this.notify(sZ,{target:e.target,collapse:!0}),this.keyA=!1)),13===e.keyCode&&this.notify(p3,e)}keyActionHandler(e){this.isChildGrid(e)||this.isEdit&&"escape"!==e.action&&"enter"!==e.action&&"shiftEnter"!==e.action&&"tab"!==e.action&&"shiftTab"!==e.action||(this.keyPress=!0,this.allowKeyboard&&("ctrlPlusP"===e.action&&(e.preventDefault(),this.print()),this.notify(Nr,e)))}setInjectedModules(e){this.injectedModules=e}updateColumnObject(){E1(this.columns,this.enableColumnVirtualization,this),E3(this.columns),this.initForeignColumn(),this.notify(m1,{})}getForeignKeyColumns(){return this.getColumns().filter(e=>e.isForeignColumn())}getRowHeight(){return this.rowHeight?this.rowHeight:function KPe(n){if(void 0!==hF)return hF;const e=Be("table",{className:tn,styles:"visibility: hidden",attrs:{role:"grid"}});e.innerHTML='<tr><td class="e-rowcell">A<td></tr>',n.appendChild(e);const t=e.querySelector("td").getBoundingClientRect();return n.removeChild(e),hF=Math.ceil(t.height),hF}(this.element)}refreshColumns(){this.setFrozenCount();const e=this.getContent().querySelector(".e-frozen-left-content"),t=this.getContent().querySelector(".e-frozen-right-content"),i=!this.frozenRightCount&&!this.frozenLeftCount;if(0===this.getFrozenColumns()&&(!e&&this.frozenLeftCount||!t&&this.frozenRightCount||e&&!this.frozenLeftCount||t&&!this.frozenRightCount))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(i&&(1===this.getFrozenColumns()&&!e||0===this.getFrozenColumns()&&e))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(this.isPreventScrollEvent=!0,this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()){const r=this.contentModule.getMovableContent().querySelector("."+tn);Yt(r.querySelector(Si));const o=this.getHeaderContent().querySelector("."+js).querySelector(Si).cloneNode(!0);if(r.insertBefore(o,r.querySelector(Je)),"Left-Right"===this.getFrozenMode()){const a=this.contentModule.getFrozenRightContent().querySelector("."+tn);Yt(a.querySelector(Si));const l=this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(Si).cloneNode(!0);a.insertBefore(l,a.querySelector(Je))}}if(this.isFrozenGrid()){const r=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.headerModule.getMovableHeader().scrollLeft=r,this.contentModule.getMovableContent().scrollLeft=r}}excelExport(e,t,i,s){return this.excelExportModule?this.excelExportModule.Map(this,e,t,i,!1,s):null}csvExport(e,t,i,s){return this.excelExportModule?this.excelExportModule.Map(this,e,t,i,!0,s):null}pdfExport(e,t,i,s){return this.pdfExportModule?this.pdfExportModule.Map(this,e,t,i,s):null}groupColumn(e){this.groupModule&&this.groupModule.groupColumn(e)}groupExpandAll(){this.groupModule&&this.groupModule.expandAll()}groupCollapseAll(){this.groupModule&&this.groupModule.collapseAll()}clearGrouping(){this.groupModule&&this.groupModule.clearGrouping()}ungroupColumn(e){this.groupModule&&this.groupModule.ungroupColumn(e)}openColumnChooser(e,t){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(e,t)}scrollRefresh(){const e=()=>{this.scrollModule.refresh(),this.off(Kn,e)};this.on(Kn,e,this)}detailCollapseAll(){this.detailRowModule&&this.detailRowModule.collapseAll()}detailExpandAll(){this.detailRowModule&&this.detailRowModule.expandAll()}clearCellSelection(){this.selectionModule&&this.selectionModule.clearCellSelection()}clearRowSelection(){this.selectionModule&&this.selectionModule.clearRowSelection()}selectCells(e){this.selectionModule&&this.selectionModule.selectCells(e)}selectRowsByRange(e,t){this.selectionModule&&this.selectionModule.selectRowsByRange(e,t)}isContextMenuOpen(){return this.contextMenuModule&&this.contextMenuModule.isOpen}ensureModuleInjected(e){return this.getInjectedModules().indexOf(e)>=0}destroyTemplate(e,t){this.clearTemplate(e,t)}log(e,t){this.loggerModule&&this.loggerModule.log(e,t)}applyBiggerTheme(e){this.element.classList.contains("e-bigger")&&e.classList.add("e-bigger")}getPreviousRowData(){return this.getRowsObject()[this.getRows().length-1].data}hideScroll(){const e=this.getContent().querySelector("."+rr),t=this.getContent().querySelector(".e-scrollbar");if(e.scrollHeight<=e.clientHeight&&(this.scrollModule.removePadding(),e.style.overflowY="auto"),this.isFrozenGrid()&&t){const i=this.getContent().querySelector(".e-movablescrollbar"),s=this.getContent().querySelector(".e-movablechild");t.style.display="flex",i.offsetWidth>=s.offsetWidth&&(t.style.display="none",this.notify(KP,0))}}getRowIndexByPrimaryKey(e){const t=this.getPrimaryKeyFieldNames()[0];e="object"==typeof e?e[t]:e;const i=this.getRowsObject();for(let s=0;s<i.length;s++){if(i[s].isDetailRow||i[s].isCaptionRow)continue;let r=i[s].data[t];if(t.split(".").length>1&&(r=BZ(t,i[s].data)),r===e)return i[s].index}return-1}grabColumnByFieldFromAllCols(e){let t;this.columnModel=[],this.updateColumnModel(this.columns);const i=this.columnModel;for(let s=0;s<i.length;s++)e===i[s].field&&(t=i[s]);return t}grabColumnByUidFromAllCols(e){let t;this.columnModel=[],this.updateColumnModel(this.columns);const i=this.columnModel;for(let s=0;s<i.length;s++)e===i[s].uid&&(t=i[s]);return t}getFilteredRecords(){if(this.allowFiltering&&this.filterSettings.columns.length){const e=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof ut?this.renderModule.data.getData(this.dataSource,e):this.dataSource instanceof ut?this.dataSource.executeLocal(e):new ut(this.dataSource,e).executeLocal(e)}return[]}getUserAgent(){const e=q.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)}tapEvent(e){this.getUserAgent()&&(Pp.timer?(clearTimeout(Pp.timer),Pp.timer=null,this.dblClickHandler(e),this.notify("double-tap",e)):Pp.timer=setTimeout(()=>{Pp.timer=null},300))}getRowUid(e){return`${e}${this.rowUid++}`}getMovableVirtualContent(){return this.getContent().querySelector("."+zs)}getFrozenVirtualContent(){return this.getContent().querySelector("."+jf)}getMovableVirtualHeader(){return this.getHeaderContent().querySelector("."+js)}getFrozenVirtualHeader(){return this.getHeaderContent().querySelector("."+xg)}getRowElementByUID(e){let t,i=[];if(this.isFrozenGrid()){const s=[].slice.call(this.getFrozenVirtualContent().querySelector(Je).children),r=[].slice.call(this.getMovableVirtualContent().querySelector(Je).children);let o=[];if(3===this.tablesCount&&(o=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(Je).children)),this.frozenRows){if(i=[].slice.call(this.getFrozenVirtualHeader().querySelector(Je).children),i=i.concat([].slice.call(this.getMovableVirtualHeader().querySelector(Je).children)),3===this.tablesCount){const a=this.getHeaderContent().querySelector(".e-frozen-right-header");i=i.concat([].slice.call(a.querySelector(Je).children)).concat(o)}i=i.concat(s).concat(r)}else i=s.concat(r).concat(o)}else{const s=[].slice.call(this.getContent().querySelector(Je).children);this.frozenRows?(i=[].slice.call(this.getHeaderContent().querySelector(Je).children),i=i.concat(s)):i=s}for(const s of i)if(s.getAttribute("data-uid")===e){t=s;break}return t}getHiddenColumns(){const e=[];for(const t of this.columnModel)!1===t.visible&&e.push(t);return e}calculatePageSizeByParentHeight(e){if(this.allowPaging&&(this.allowTextWrap&&"Header"===this.textWrapSettings.wrapMode||!this.allowTextWrap)){let t=0;if(-1!==e.indexOf("%")&&(e=parseInt(e,10)/100*this.element.clientHeight),e>this.getNoncontentHeight()+this.getRowHeight()){let s=0;s=e-this.getNoncontentHeight(),t=s/this.getRowHeight()}if(t>0)return Math.floor(t)}return 0}getNoncontentHeight(){let e=0;if(f(this.getHeaderContent().clientHeight)||(e+=this.getHeaderContent().clientHeight),this.toolbar&&!f(this.element.querySelector(".e-toolbar").clientHeight)&&(e+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!f(this.element.querySelector(".e-gridpager").clientHeight)&&(e+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!f(this.element.querySelector(".e-columnheader").clientHeight)&&(e+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!f(this.element.querySelector(".e-groupdroparea").clientHeight)&&(e+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!f(this.element.querySelector(".e-summaryrow").clientHeight))for(let t=0;t<this.element.getElementsByClassName("e-summaryrow").length;t++)e+=this.element.getElementsByClassName("e-summaryrow")[t].clientHeight;return e}getSummaryValues(e,t){return Ze.aggregates[e.type.toLowerCase()](t,e.field)}serverExcelExport(e){this.isExcel=!0,this.exportGrid(e)}serverPdfExport(e){this.isExcel=!1,this.exportGrid(e)}serverCsvExport(e){this.isExcel=!0,this.exportGrid(e)}exportGrid(e){const i=this.getDataModule().generateQuery(!0),s=(new sg).processQuery(new ut({url:""}),i),r=JSON.parse(s.data),o=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"]));o.filterSettings.columns=r.where,o.searchSettings.fields=r.search&&r.search[0].fields||[],o.sortSettings.columns=r.sorted,o.columns=this.setHeaderText(o.columns,["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"]);const l=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),h=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});h.value=JSON.stringify(o),l.method="POST",l.action=e,l.appendChild(h),document.body.appendChild(l),l.submit(),l.remove()}setHeaderText(e,t){for(let i=0;i<e.length;i++){const s=this.getColumnByUid(e[i].uid);e[i].headerText=s.headerText,f(s.template)||(e[i].template="true"),e[i].format&&(e[i].format=dFe(this.getFormat(e[i].format),e[i].type,this.isExcel)),e[i].columns&&this.setHeaderText(e[i].columns,t);const r=Object.keys(e[i]);for(let o=0;o<r.length;o++)t.indexOf(r[o])<0&&delete e[i][r[o]]}return e}getFormat(e){return"object"==typeof e?f(e.format)?e.skeleton:e.format:e}isCollapseStateEnabled(){return!1===this.isExpanded}updateRowValue(e,t){const i={requestType:"save",data:t};this.showSpinner(),this.notify(WP,i),this.refresh()}setForeignKeyData(){this.dataBind();const e=this.getDataModule().getForeignKeyDataState();e.isPending?(this.getDataModule().setForeignKeyDataState({}),e.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())}resetFilterDlgPosition(e){const t=this.getColumnHeaderByField(e);if(t){const i=t.querySelector(".e-filtermenudiv"),s=this.element.querySelector(".e-filter-popup");if(i&&s){const r=this.element.getBoundingClientRect(),o=i.getBoundingClientRect();s&&(s.style.left=s.offsetWidth+o.right>r.right?(o.right-s.offsetWidth-r.left).toString()+"px":(o.right-r.left).toString()+"px")}}}renderTemplates(){this.notify("reactTemplateRender",this.portals),this.renderReactTemplates()}batchUpdate(e){this.processRowChanges(e)}batchAsyncUpdate(e){this.processBulkRowChanges(e)}processBulkRowChanges(e){if(this.dataToBeUpdated){const t=[Eg,"changedRecords",A_],i=this.getPrimaryKeyFieldNames()[0];for(let s=0;s<t.length;s++)e[t[s]]&&oFe(this,e,t[s],i)}else this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e),setTimeout(()=>{this.processRowChanges(this.dataToBeUpdated),this.dataToBeUpdated=null},this.asyncTimeOut)}processRowChanges(e){const t=this.getPrimaryKeyFieldNames()[0];e=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e);const i=this.getDataModule().saveChanges(e,t,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?i.then(()=>{this.setNewData()}):this.setNewData()}setNewData(){const e=JSON.parse(JSON.stringify(this.getCurrentViewRecords()));this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount()).then(i=>{this.bulkRefresh(i.result,e,i.count)})}deleteRowElement(e){const t=this.getRowElementByUID(e.uid),i=parseInt(t.getAttribute(Di),10);Yt(t),this.getFrozenColumns()&&Yt(this.getMovableRows()[i])}bulkRefresh(e,t,i){const s=this.getRowsObject(),r=this.getPrimaryKeyFieldNames()[0];for(let a=0;a<s.length;a++)e.filter(l=>l[r]===s[a].data[r]).length||(this.deleteRowElement(s[a]),s.splice(a,1),a--);for(let a=0;a<e.length;a++){let l;t.filter(h=>{h[r]===e[a][r]&&(h!==e[a]&&this.setRowData(e[a][r],e[a]),l=!0)}),l||this.renderRowElement(e[a],a)}this.currentViewData=e;const o=[].slice.call(this.getContentTable().getElementsByClassName(ps));(function pF(n,e,t,i){let s=i||0;for(let r=0;r<e.length;r++)if(e[r].isDataRow){e[r].index=s,e[r].isAltRow=!!n.enableAltRow&&s%2!=0,t[r].setAttribute(Di,s.toString()),e[r].isAltRow?t[r].classList.add("e-altrow"):t[r].classList.remove("e-altrow");for(let o=0;o<t[r].cells.length;o++)t[r].cells[o].setAttribute("index",s.toString());s++}e.length||n.renderModule.emptyRow(!0)})(this,this.getRowsObject(),o),function _1(n){if(n.isFrozenGrid()){n.contentModule.rowElements=[].slice.call(n.element.querySelectorAll(".e-movableheader .e-row, .e-movablecontent .e-row"));const e=n.getFrozenMode()===Zt?".e-frozen-left-header .e-row, .e-frozen-left-content .e-row":".e-frozenheader .e-row, .e-frozencontent .e-row";n.contentModule.freezeRowElements=[].slice.call(n.element.querySelectorAll(e)),n.getFrozenMode()===Zt&&(n.contentModule.frozenRightRowElements=[].slice.call(n.element.querySelectorAll(".e-frozen-right-header .e-row, .e-frozen-right-content .e-row")))}else n.contentModule.rowElements=[].slice.call(n.element.querySelectorAll(".e-row:not(.e-addedrow)"))}(this),this.allowPaging&&this.notify(Hl,{module:"pager",properties:{totalRecordsCount:i}})}renderRowElement(e,t){const i=new od(this.serviceLocator,null,this),r=new Uf(this).generateRows([e]),o=i.render(r[0],this.getColumns());let a,l;this.addRowObject(r[0],t);let h=this.getContentTable().querySelector(Je);if(h.querySelector(".e-emptyrow")){const c=h.querySelector(".e-emptyrow");if(c.parentNode.removeChild(c),this.getFrozenColumns()){const m=this.getContent().querySelector("."+zs).querySelector(Je);m.firstElementChild.parentNode.removeChild(m.firstElementChild)}}this.getFrozenColumns()&&(a=function I3(n,e,t){e=e&&t&&t.isRowDragable()?e+1:e;const i=n.cloneNode(!0);for(let s=0;s<e;s++)i.removeChild(i.children[0]);for(let s=e,r=n.childElementCount;s<r;s++)n.removeChild(n.children[n.childElementCount-1]);return i}(o,this.getFrozenColumns(),this),l=this.frozenRows&&t<this.frozenRows?this.getHeaderContent().querySelector("."+js).querySelector(Je):this.getContent().querySelector("."+zs).querySelector(Je),l.appendChild(a),"auto"===this.height&&this.notify(KP,{})),h=this.frozenRows&&t<this.frozenRows?this.getHeaderContent().querySelector(Je):this.getContent().querySelector(Je),h=this.getContent().querySelector(Je),h.appendChild(o)}addRowObject(e,t){const i=this.getFrozenColumns();if(i){const s=this.getMovableRowsObject(),r=e.clone();r.cells=r.cells.slice(i),e.cells=e.cells.slice(0,i),s.splice(t,1,r)}this.getRowsObject().splice(t,1,e)}updateVisibleExpandCollapseRows(){const e=this.getRowsObject();for(let t=0,i=e.length;t<i;t++)e[t].visible=!e[t].isDataRow&&!e[t].isAggregateRow||"none"!==this.getRowElementByUID(e[t].uid).style.display}getHeight(e){return Number.isInteger(e)||-1===e.indexOf("%")?Number.isInteger(e)||"auto"===this.height?this.height:parseInt(e,10):parseInt(e,10)/100*this.element.clientHeight}getFrozenRightContent(){return this.getContent().querySelector(".e-frozen-right-content")}getFrozenRightHeader(){return this.getHeaderContent().querySelector(".e-frozen-right-header")}getMovableHeaderTbody(){return this.getMovableVirtualHeader().querySelector(Je)}getMovableContentTbody(){return this.getMovableVirtualContent().querySelector(Je)}getFrozenHeaderTbody(){return this.getFrozenVirtualHeader().querySelector(Je)}getFrozenLeftContentTbody(){return this.getFrozenVirtualContent().querySelector(Je)}getFrozenRightHeaderTbody(){return this.getFrozenRightHeader().querySelector(Je)}getFrozenRightContentTbody(){let t;return this.getFrozenRightContent()&&(t=this.getFrozenRightContent().querySelector(Je)),t}showResponsiveCustomFilter(e){this.filterModule&&this.filterModule.showCustomFilter(e||"Vertical"===this.rowRenderingMode)}showResponsiveCustomSort(e){this.sortModule&&this.sortModule.showCustomSort(e||"Vertical"===this.rowRenderingMode)}showAdaptiveFilterDialog(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)}showAdaptiveSortDialog(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)}getCurrentVisibleColumns(e){const t=[],i=e?this.getColumns():this.columnModel;for(const s of i)s.visible&&t.push(s);return t}enableInfiniteAggrgate(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)}};Ce([_()],Ke.prototype,"parentDetails",void 0),Ce([_([])],Ke.prototype,"columns",void 0),Ce([_(!0)],Ke.prototype,"enableAltRow",void 0),Ce([_(!0)],Ke.prototype,"enableHover",void 0),Ce([_(!1)],Ke.prototype,"enableAutoFill",void 0),Ce([_(!0)],Ke.prototype,"allowKeyboard",void 0),Ce([_(!1)],Ke.prototype,"enableStickyHeader",void 0),Ce([_(!1)],Ke.prototype,"allowTextWrap",void 0),Ce([di({},ape)],Ke.prototype,"textWrapSettings",void 0),Ce([di({},lpe)],Ke.prototype,"resizeSettings",void 0),Ce([_(!1)],Ke.prototype,"allowPaging",void 0),Ce([di({},fS)],Ke.prototype,"pageSettings",void 0),Ce([_(!1)],Ke.prototype,"enableVirtualization",void 0),Ce([_(!1)],Ke.prototype,"enableColumnVirtualization",void 0),Ce([_(!1)],Ke.prototype,"enableInfiniteScrolling",void 0),Ce([di({},x1)],Ke.prototype,"searchSettings",void 0),Ce([_(!1)],Ke.prototype,"allowSorting",void 0),Ce([_("Ellipsis")],Ke.prototype,"clipMode",void 0),Ce([_(!0)],Ke.prototype,"allowMultiSorting",void 0),Ce([_(!1)],Ke.prototype,"allowExcelExport",void 0),Ce([_(!1)],Ke.prototype,"allowPdfExport",void 0),Ce([di({},IZ)],Ke.prototype,"sortSettings",void 0),Ce([di({},S3)],Ke.prototype,"infiniteScrollSettings",void 0),Ce([_(!0)],Ke.prototype,"allowSelection",void 0),Ce([_(-1)],Ke.prototype,"selectedRowIndex",void 0),Ce([di({},ay)],Ke.prototype,"selectionSettings",void 0),Ce([_(!1)],Ke.prototype,"allowFiltering",void 0),Ce([_("Horizontal")],Ke.prototype,"rowRenderingMode",void 0),Ce([_(!1)],Ke.prototype,"enableAdaptiveUI",void 0),Ce([_(!1)],Ke.prototype,"allowReordering",void 0),Ce([_(!1)],Ke.prototype,"allowResizing",void 0),Ce([_(!1)],Ke.prototype,"allowRowDragAndDrop",void 0),Ce([di({},ope)],Ke.prototype,"rowDropSettings",void 0),Ce([di({},oy)],Ke.prototype,"filterSettings",void 0),Ce([_(!1)],Ke.prototype,"allowGrouping",void 0),Ce([_(!1)],Ke.prototype,"enableImmutableMode",void 0),Ce([_(!1)],Ke.prototype,"showColumnMenu",void 0),Ce([di({},ly)],Ke.prototype,"groupSettings",void 0),Ce([di({},Hu)],Ke.prototype,"editSettings",void 0),Ce([rh([],rpe)],Ke.prototype,"aggregates",void 0),Ce([_(!1)],Ke.prototype,"showColumnChooser",void 0),Ce([di({},EZ)],Ke.prototype,"columnChooserSettings",void 0),Ce([_(!1)],Ke.prototype,"enableHeaderFocus",void 0),Ce([_("auto")],Ke.prototype,"height",void 0),Ce([_("auto")],Ke.prototype,"width",void 0),Ce([_("Default")],Ke.prototype,"gridLines",void 0),Ce([_()],Ke.prototype,"rowTemplate",void 0),Ce([_()],Ke.prototype,"detailTemplate",void 0),Ce([_()],Ke.prototype,"childGrid",void 0),Ce([_()],Ke.prototype,"queryString",void 0),Ce([_("AllPages")],Ke.prototype,"printMode",void 0),Ce([_("Expanded")],Ke.prototype,"hierarchyPrintMode",void 0),Ce([_([])],Ke.prototype,"dataSource",void 0),Ce([_(null)],Ke.prototype,"rowHeight",void 0),Ce([_()],Ke.prototype,"query",void 0),Ce([_("USD")],Ke.prototype,"currencyCode",void 0),Ce([_()],Ke.prototype,"toolbar",void 0),Ce([_()],Ke.prototype,"contextMenuItems",void 0),Ce([_()],Ke.prototype,"columnMenuItems",void 0),Ce([_()],Ke.prototype,"toolbarTemplate",void 0),Ce([_()],Ke.prototype,"pagerTemplate",void 0),Ce([_(0)],Ke.prototype,"frozenRows",void 0),Ce([_(0)],Ke.prototype,"frozenColumns",void 0),Ce([_("All")],Ke.prototype,"columnQueryMode",void 0),Ce([_({})],Ke.prototype,"currentAction",void 0),Ce([_("20.1.52")],Ke.prototype,"ej2StatePersistenceVersion",void 0),Ce([G()],Ke.prototype,"created",void 0),Ce([G()],Ke.prototype,"destroyed",void 0),Ce([G()],Ke.prototype,"load",void 0),Ce([G()],Ke.prototype,"rowDataBound",void 0),Ce([G()],Ke.prototype,"queryCellInfo",void 0),Ce([G()],Ke.prototype,"headerCellInfo",void 0),Ce([G()],Ke.prototype,"actionBegin",void 0),Ce([G()],Ke.prototype,"actionComplete",void 0),Ce([G()],Ke.prototype,"actionFailure",void 0),Ce([G()],Ke.prototype,"dataBound",void 0),Ce([G()],Ke.prototype,"recordDoubleClick",void 0),Ce([G()],Ke.prototype,"recordClick",void 0),Ce([G()],Ke.prototype,"rowSelecting",void 0),Ce([G()],Ke.prototype,"rowSelected",void 0),Ce([G()],Ke.prototype,"rowDeselecting",void 0),Ce([G()],Ke.prototype,"rowDeselected",void 0),Ce([G()],Ke.prototype,"cellSelecting",void 0),Ce([G()],Ke.prototype,"cellSelected",void 0),Ce([G()],Ke.prototype,"cellDeselecting",void 0),Ce([G()],Ke.prototype,"cellDeselected",void 0),Ce([G()],Ke.prototype,"columnSelecting",void 0),Ce([G()],Ke.prototype,"columnSelected",void 0),Ce([G()],Ke.prototype,"columnDeselecting",void 0),Ce([G()],Ke.prototype,"columnDeselected",void 0),Ce([G()],Ke.prototype,"columnDragStart",void 0),Ce([G()],Ke.prototype,"columnDrag",void 0),Ce([G()],Ke.prototype,"columnDrop",void 0),Ce([G()],Ke.prototype,"printComplete",void 0),Ce([G()],Ke.prototype,"beforePrint",void 0),Ce([G()],Ke.prototype,"pdfQueryCellInfo",void 0),Ce([G()],Ke.prototype,"pdfHeaderQueryCellInfo",void 0),Ce([G()],Ke.prototype,"pdfAggregateQueryCellInfo",void 0),Ce([G()],Ke.prototype,"excelAggregateQueryCellInfo",void 0),Ce([G()],Ke.prototype,"exportDetailDataBound",void 0),Ce([G()],Ke.prototype,"excelQueryCellInfo",void 0),Ce([G()],Ke.prototype,"excelHeaderQueryCellInfo",void 0),Ce([G()],Ke.prototype,"beforeExcelExport",void 0),Ce([G()],Ke.prototype,"excelExportComplete",void 0),Ce([G()],Ke.prototype,"beforePdfExport",void 0),Ce([G()],Ke.prototype,"pdfExportComplete",void 0),Ce([G()],Ke.prototype,"rowDragStartHelper",void 0),Ce([G()],Ke.prototype,"detailDataBound",void 0),Ce([G()],Ke.prototype,"rowDragStart",void 0),Ce([G()],Ke.prototype,"rowDrag",void 0),Ce([G()],Ke.prototype,"rowDrop",void 0),Ce([G()],Ke.prototype,"toolbarClick",void 0),Ce([G()],Ke.prototype,"beforeOpenColumnChooser",void 0),Ce([G()],Ke.prototype,"beforeOpenAdaptiveDialog",void 0),Ce([G()],Ke.prototype,"batchAdd",void 0),Ce([G()],Ke.prototype,"batchDelete",void 0),Ce([G()],Ke.prototype,"batchCancel",void 0),Ce([G()],Ke.prototype,"beforeBatchAdd",void 0),Ce([G()],Ke.prototype,"beforeBatchDelete",void 0),Ce([G()],Ke.prototype,"beforeBatchSave",void 0),Ce([G()],Ke.prototype,"beginEdit",void 0),Ce([G()],Ke.prototype,"commandClick",void 0),Ce([G()],Ke.prototype,"cellEdit",void 0),Ce([G()],Ke.prototype,"cellSave",void 0),Ce([G()],Ke.prototype,"cellSaved",void 0),Ce([G()],Ke.prototype,"resizeStart",void 0),Ce([G()],Ke.prototype,"resizing",void 0),Ce([G()],Ke.prototype,"resizeStop",void 0),Ce([G()],Ke.prototype,"keyPressed",void 0),Ce([G()],Ke.prototype,"beforeDataBound",void 0),Ce([G()],Ke.prototype,"contextMenuOpen",void 0),Ce([G()],Ke.prototype,"contextMenuClick",void 0),Ce([G()],Ke.prototype,"columnMenuOpen",void 0),Ce([G()],Ke.prototype,"columnMenuClick",void 0),Ce([G()],Ke.prototype,"checkBoxChange",void 0),Ce([G()],Ke.prototype,"beforeCopy",void 0),Ce([G()],Ke.prototype,"beforePaste",void 0),Ce([G()],Ke.prototype,"beforeAutoFill",void 0),Ce([G()],Ke.prototype,"columnDataStateChange",void 0),Ce([G()],Ke.prototype,"dataStateChange",void 0),Ce([G()],Ke.prototype,"dataSourceChanged",void 0),Ce([G()],Ke.prototype,"exportGroupCaption",void 0),Ce([G()],Ke.prototype,"lazyLoadGroupExpand",void 0),Ce([G()],Ke.prototype,"lazyLoadGroupCollapse",void 0),Ke=_Z=Ce([as],Ke);class TZ{constructor(e,t){this.isAsyncPrint=!1,this.defered=new Ru,this.parent=e,!this.parent.isDestroyed&&(this.parent.on(Kn,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(un,this.actionBeginFunction),this.parent.on(zf,this.onEmpty.bind(this)),this.parent.on(UY,this.hierarchyPrint,this),this.scrollModule=t)}isContentReady(){return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?()=>{this.defered.promise.then(()=>{this.contentReady()}),this.isPrintGrid()&&this.hierarchyPrint()}:this.contentReady}hierarchyPrint(){this.removeColGroup(this.parent);const e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()}print(){this.renderPrintGrid()}onEmpty(){this.isPrintGrid()&&this.contentReady()}actionBegin(){this.isPrintGrid()&&(this.isAsyncPrint=!0)}renderPrintGrid(){const e=this.parent,t=Be("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"});t.classList.remove("e-gridhover"),document.body.appendChild(t);const i=new Ke(D3(e,e.hierarchyPrintMode));for(let o=0;o<i.columns.length;o++)i.columns[o]=Ae({},i.columns[o]),e.isFrozenGrid()&&!e.getFrozenColumns()&&(i.columns[o].freeze=void 0);this.parent.isAngular&&(i.viewContainerRef=this.parent.viewContainerRef),i.load=()=>{},i.query=e.getQuery().clone(),window.printGridObj=i,i.isPrinting=!0;const s=i.getInjectedModules(),r=e.getInjectedModules();(!s||s.length!==r.length)&&i.setInjectedModules(r),e.notify("printGrid-Init",{element:t,printgrid:i}),this.parent.log("exporting_begin",this.getModuleName()),i.registeredTemplate=this.parent.registeredTemplate,i.isVue=this.parent.isVue,i.appendTo(t),i.trigger=e.trigger}contentReady(){if(this.isPrintGrid()){const e=this.parent;if(this.isAsyncPrint)return void this.printGrid();const t={requestType:"print",element:e.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:e.hierarchyPrintMode};if(this.isAsyncPrint||e.trigger(sue,t),t.cancel)return void te(e.element);this.isAsyncPrint||this.printGrid()}}printGrid(){const e=this.parent;if("auto"!==e.height){const s=this.scrollModule.getCssProperties(),r=e.element.querySelector("."+rr),o=e.element.querySelector("."+to);r.style.height="auto",r.style.overflowY="auto",o.style[s.padding]="",o.firstElementChild.style[s.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?this.removeColGroup(e):e.element.querySelector(".e-groupdroparea").style.display="none");for(const s of[].slice.call(e.element.getElementsByClassName(rr)))s.style.overflowX="hidden";const t=[].slice.call(e.element.getElementsByClassName("e-spin-show"));for(const s of[].slice.call(t))Bi(s,["e-spin-hide"],["e-spin-show"]);this.printGridElement(e),e.isPrinting=!1,delete window.printGridObj,e.trigger(nue,{element:e.element}),e.destroy(),this.parent.log("exporting_complete",this.getModuleName())}printGridElement(e){Bi(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&te(e.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=_oe(e.element,this.printWind)}removeColGroup(e){const t=e.groupSettings.columns.length,i=e.element,s="#"+e.element.id;if(!t)return;const r=bt(`${s}captioncell.e-groupcaption`,i),o=r[t-1].getAttribute("colspan");for(let h=0;h<r.length;h++)r[h].setAttribute("colspan",o);const a=bt(`colgroup${s}colgroup`,i),l=bt(".e-content colgroup",i);this.hideColGroup(a,t),this.hideColGroup(l,t)}hideColGroup(e,t){for(let i=0;i<e.length;i++)for(let s=0;s<t;s++)e[i].children[s].style.display="none"}isPrintGrid(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting}destroy(){this.parent.isDestroyed||(this.parent.off(Kn,this.contentReady.bind(this)),this.parent.removeEventListener(un,this.actionBeginFunction),this.parent.off(zf,this.onEmpty.bind(this)),this.parent.off(UY,this.hierarchyPrint))}getModuleName(){return"print"}}function hpe(n,e,t){return f(n)||""===n?"":Ze.getObject(n,e)}function cpe(n,e){requestAnimationFrame(()=>{try{e(null,n())}catch(t){e(t)}})}function P_(n,e){const t=[];for(let i=0,s=n.length;i<s;i++){const r=e(n[i],i);f(r)||t.push(r)}return t}function oF(n){const e=[];for(let t=0;t<n.length;t++)e.push(Ae({},aF(n[t]),{},!0));return e}function Wh(n){if(n)try{return document.querySelectorAll(n).length?ji(document.querySelector(n).innerHTML.trim()):ji(n)}catch(e){return ji(n)}}function _g(n,e){const t={},i=["style","class"];Ae(t,e,{}),"style"in t&&(ht(n,t[i[0]]),delete t[i[0]]),"class"in t&&(z([n],t[i[1]]),delete t[i[1]]),Rt(n,t)}function E3(n,e=0){for(let t=0,i=n.length;t<i;t++)n[t].columns?(n[t].index=f(n[t].index)?e:n[t].index,e++,e=E3(n[t].columns,e)):(n[t].index=f(n[t].index)?e:n[t].index,e++);return e}function E1(n,e,t){for(let i=0,s=n.length;i<s;i++){let r;"string"==typeof n[i]?r=new $d({field:n[i]},t):n[i]instanceof $d&&!n[i].columns?r=n[i]:n[i].columns?(n[i].columns=E1(n[i].columns,null,t),r=new $d(n[i],t)):r=new $d(n[i],t),r.type&&"checkbox"===r.type.toLowerCase()&&(r.allowReordering=!1),r.headerText=f(r.headerText)?r.foreignKeyValue||r.field||"":r.headerText,r.foreignKeyField=r.foreignKeyField||r.field,r.valueAccessor=("string"==typeof r.valueAccessor?U(r.valueAccessor,window):r.valueAccessor)||hpe,r.width=e&&f(r.width)?200:r.width,f(r.visible)&&(r.visible=!0),n[i]=r}return n}function aF(n){return n instanceof ii?U("properties",n):n}function Te(n,e,t){let i=n;for(;i&&!(t?i.id===e:i.classList.contains(e));)i=i.parentElement;return i}function kZ(n){const e=[];for(let t=0,i=n.length;t<i;t++)n[t].hasOwnProperty("properties")?e.push(n[t].properties):e.push(n[t]);return e}function mS(n){const e={};return e.x=f(n.clientX)?n.changedTouches[0].clientX:n.clientX,e.y=f(n.clientY)?n.changedTouches[0].clientY:n.clientY,e}TZ.printGridProp=["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound",sue,nue,"load"];let GPe=0;function qf(n){return n+GPe++}function Aa(n,e){for(let t=0,i=e.length;t<i;t++)n.appendChild(i===e.length?e[t]:e[0]);return n}function fpe(n,e,t,i){if("Custom"===n){let s=t.customAggregate;return"string"==typeof s&&(s=U(s,window)),s?s.call(i,e,t):""}return t.field in e||e instanceof Array?Ze.aggregates[n.toLowerCase()](e,t.field):null}let hF,AZ=null;function N_(){if(null!==AZ)return AZ;const n=document.createElement("div");let e=0;return n.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(n),e=n.offsetWidth-n.clientWidth|0,document.body.removeChild(n),AZ=e}function Kd(n,e){const t="e-wrap";n=n instanceof Array?n:[n];for(let i=0;i<n.length;i++)e?n[i].classList.add(t):n[i].classList.remove(t)}function mpe(n,e){const t=n.getService("valueFormatter");let s;switch(("date"===e.type||"datetime"===e.type)&&(s={type:e.type,skeleton:e.format},"string"==typeof e.format&&"yMd"!==e.format&&(s.format=e.format)),e.type){case"date":case"datetime":e.setFormatter(t.getFormatFunction(s)),e.setParser(t.getParserFunction(s));break;case"number":e.setFormatter(t.getFormatFunction({format:e.format})),e.setParser(t.getParserFunction({format:e.format}))}}function Op(n,e,...t){for(let i=0,s=n.length;i<s;i++)e?(Bi(n[i],[...t],[]),n[i].setAttribute("aria-selected","true")):(Bi(n[i],[],[...t]),n[i].removeAttribute("aria-selected"))}function B_(n,e){n.checked=e}function LZ(n,e,t){const i=Be("div",{className:t});return i.appendChild(e),i.setAttribute("uid",n),i}function cF(n,e){W([n],["e-check","e-stop","e-uncheck"]),n.classList.add(e?"e-check":"e-uncheck")}function gS(n,e,t,i){const s=n.foreignKeyField;let r=f(t)?hpe(n.field,e):t;r=f(r)?"":r;const o=new Ut,a=i||(n.dataSource instanceof ut&&n.dataSource.dataSource.json.length?n.dataSource.dataSource.json:n.columnData);return r.getDay?o.where(bS({field:s,operator:"equal",value:r,matchCase:!1})):o.where(s,"==",r,!1),new ut(a).executeLocal(o)}function dF(n,e){let t;return e.some(i=>(t=i,i.foreignKeyValue===n))&&t}function bS(n,e){let t,i,s;const r=Ae({},aF(n)),o=Ae({},aF(n));if(f(n.value)||""===n.value)return t=new cs(r.field,r.operator,r.value,!1),t;const a=new Date(n.value);if("equal"===n.operator||"notequal"===n.operator){"datetime"===e?(i=new Date(a.setSeconds(a.getSeconds()-1)),s=new Date(a.setSeconds(a.getSeconds()+2)),n.value=new Date(a.setSeconds(s.getSeconds()-1))):(i=new Date(a.setHours(0)-1),s=new Date(a.setHours(24))),r.value=i,o.value=s,"equal"===n.operator?(r.operator="greaterthan",o.operator="lessthan"):"notequal"===n.operator&&(r.operator="lessthanorequal",o.operator="greaterthanorequal");const l=new cs(r.field,r.operator,r.value,!1),h=new cs(o.field,o.operator,o.value,!1);t="equal"===n.operator?l.and(h):l.or(h)}else"date"===e&&("lessthanorequal"===n.operator||"greaterthan"===n.operator)&&(r.value=new Date(a.setHours(24)-1)),"string"==typeof r.value&&(r.value=new Date(r.value)),t=new cs(r.field,r.operator,r.value,!1);return n.setProperties?n.setProperties({ejpredicate:t},!0):n.ejpredicate=t,t}function Dr(n){return n.enableVirtualization&&n.groupSettings.columns.length>0&&n.isVirtualAdaptive}function kr(n="",e){if(n){let t=e;const i=n.split(".");for(let s=0;s<i.length&&!f(t);s++)t=t[i[s]];return t}}function D3(n,e="Expanded"){const t={};if(!n)return t;const i=n.isFrozenGrid()&&!n.getFrozenColumns();for(const s of TZ.printGridProp)t[s]="columns"===s?kZ(i?n.getColumns():n[s]):"allowPaging"===s?"CurrentPage"===n.printMode:aF(n[s]);return t.enableHover=!1,n.childGrid&&"None"!==e&&(t.expandedRows=function QPe(n,e){const t=n.getRowsObject(),i={};for(const s of t)if(s.isExpand&&!s.isDetailRow){const r=n.allowPaging&&"AllPages"===n.printMode?s.index+n.pageSettings.currentPage*n.pageSettings.pageSize-n.pageSettings.pageSize:s.index;i[r]={},i[r].isExpand=!0,i[r].gridModel=D3(s.childGrid,e),i[r].gridModel.query=n.childGrid.query}return i}(n,e)),t}function k3(n,e,t,i){const s=n||{};let r=arguments.length;i&&(r-=1);for(let o=1;o<r;o++){if(!arguments[o])continue;const a=arguments[o],l=Object.keys(Object.getPrototypeOf(a)).length?Object.keys(a).concat(JPe(a)):Object.keys(a);for(let h=0;h<l.length;h++){const c=s[l[h]],m=a[l[h]];let b;i&&(Df(m)||Array.isArray(m))?Df(m)?(b=c||{},s[l[h]]=Ae({},b,m,i)):(b=c||[],s[l[h]]=Ae([],b,m,i)):s[l[h]]=m}}return s}function JPe(n){let e=[];for(;Object.getPrototypeOf(n)&&Object.keys(Object.getPrototypeOf(n)).length;)e=e.concat(Object.keys(Object.getPrototypeOf(n))),n=Object.getPrototypeOf(n);return e}function vpe(n,e){let t=e;const i=[];if(n.columns){e++;for(let s=0;s<n.columns.length;s++)i[s]=vpe(n.columns[s],e);for(let s=0;s<i.length;s++)t<i[s]&&(t=i[s]);e=t}return e}var Pp=(()=>(function(n){n.timer=null}(Pp||(Pp={})),Pp))();function PZ(n){const e=n.getVisibleColumns();let t=0,i=0;for(let s=0;s<e.length;s++)li(e[s].width)?i++:-1!==e[s].width.toString().indexOf("%")&&t++;return("auto"===n.width||"string"==typeof n.width&&-1!==n.width.indexOf("%"))&&!n.groupSettings.showGroupedColumn&&n.groupSettings.columns.length&&t&&!i}function oFe(n,e,t,i){const s=n.dataToBeUpdated[t].concat(e[t]).reduce((r,o)=>(r[o[i]]=void 0===r[o[i]]?o:Object.assign(r[o[i]],o),r),{});n.dataToBeUpdated[t]=Object.keys(s).map(r=>s[r])}function Cpe(n,e,t){return"movable"===e.getFreezeTableName()?[].slice.call(n.getMovableDataRows()[t].getElementsByClassName(Ji)):e.getFreezeTableName()===an?[].slice.call(n.getFrozenRightDataRows()[t].getElementsByClassName(Ji)):[].slice.call(n.getDataRows()[t].getElementsByClassName(Ji))}function NZ(n,e,t,i){const s=n.getFrozenLeftCount(),r=n.getMovableColumnsCount();return i="movable"===e.getFreezeTableName()?i-s:e.getFreezeTableName()===an?i-(s+r):i,Cpe(n,e,t)[i]}function dFe(n,e,t){let i;const s=new mp;if("number"===e)try{i=s.getNumberPattern({format:n,currency:this.currency,useGrouping:!0},!0)}catch(r){i=n}else if("date"===e||"time"===e||"datetime"===e)try{if(i=s.getDatePattern({skeleton:n,type:e},t),f(i))throw"error"}catch(r){try{i=s.getDatePattern({format:n,type:e},t)}catch(o){i=n}}else i=n;if("number"!==e){const o={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};i=i.replace(/G|H|c|'| a|yy|y|EEEE|E/g,a=>o[a])}return i}function BZ(n,e){let t;const i=n.split(".").length,s=n.split(".");let r=e;for(let o=0;o<i;o++)t=r[s[o]],r=t;return t}function $a(n,e,t,i){for(const s of e)t?n.on(s.event,s.handler,i):n.off(s.event,s.handler)}function pFe(n,e){let t;n.columnModel||n.getColumns();for(const i of n.columnModel)if(i.field===e){t=i;break}return t}function mF(n,e){n.destroyTemplate(e),n.isReact&&n.renderTemplates()}class Gh{constructor(e){this.existingPredicate={},this.foreignKeyQuery=new Ut,this.filterState=!0,this.values={},this.renderEmpty=!1,this.isCheckboxFilterTemplate=!1,this.parent=e,this.id=this.parent.element.id,this.valueFormatter=new __(this.parent.locale),this.cBoxTrue=Vw(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=Vw(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&z([this.cBoxTrue,this.cBoxFalse],["e-rtl"])}destroy(){this.closeDialog()}wireEvents(){k.add(this.dlg,"click",this.clickHandler,this),k.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=Jv(this.searchBoxKeyUp,200);const e=this.dialogObj.element.querySelector(".e-searchinput");e&&k.add(e,"keyup",this.searchHandler,this)}unWireEvents(){k.remove(this.dlg,"click",this.clickHandler),k.remove(this.dlg,"keyup",this.keyupHandler);const e=this.dialogObj.element.querySelector(".e-searchinput");e&&k.remove(e,"keyup",this.searchHandler)}foreignKeyFilter(e,t,i){const s={},r=[],o=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(o.where(i)).then(a=>{this.options.column.columnData=a.result,this.parent.notify(b1,{predicate:s,column:this.options.column}),e.ejpredicate=s.predicate.predicates;const l=s.predicate.predicates;for(let h=0;h<l.length;h++)r.push({field:l[h].field,predicate:"or",matchCase:l[h].ignoreCase,ignoreAccent:l[h].ignoreAccent,operator:l[h].operator,value:l[h].value,type:this.options.type});e.filterCollection=r.length?r:t.filter(h=>h.field=this.options.field),this.options.handler(e)})}foreignFilter(e,t){const s=new cs(this.options.column.foreignKeyValue,this.options.isRemote?"string"===this.options.column.type?"contains":"equal":this.options.column.type?"contains":"equal",t,!0,this.options.ignoreAccent);this.foreignKeyFilter(e,[e.filterCollection],s)}searchBoxClick(e){e.target.classList.contains("e-searchclear")&&(this.sInput.value="",this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())}searchBoxKeyUp(e){this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon()}updateSearchIcon(){this.sInput.value.length?Bi(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]):Bi(this.sIcon,["e-search-icon"],["e-chkcancel-icon"])}getLocalizedLabel(e){return this.localeObj.getConstant(e)}updateDataSource(){const e=this.options.dataSource;if(!(e instanceof ut))for(let i=0;i<e.length;i++)if("object"!=typeof e){const s={};s[this.options.field]=e[i],e[i]=s}}updateModel(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.options.dataManager=e.dataManager?e.dataManager:e.dataSource,this.updateDataSource(),this.options.type=e.type,this.options.format=e.format||"",this.options.ignoreAccent=e.ignoreAccent||!1,this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.query=e.query||new Ut,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.options.uid=e.column.uid,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length}getAndSetChkElem(e){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!e.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);const t={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search")}};Bt.createInput(t,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox}showDialog(e){const t={requestType:"filterbeforeopen",columnName:this.options.field,columnType:this.options.type,cancel:!1};t.filterModel=this,this.parent.notify("cbox-filter-begin",t),t.cancel?e.cancel=t.cancel:(this.dialogObj=new Hs({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!f(Te(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this)}),this.dialogObj.isStringTemplate=!0,this.renderResponsiveFilter(e),this.dlg.setAttribute("aria-label",this.getLocalizedLabel("ExcelFilterDialogARIA")),e.isResponsiveFilter?document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv").appendChild(this.dlg):this.parent.element.appendChild(this.dlg),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=e.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.dialogObj.element.querySelector(".e-dlg-content").appendChild(this.sBox),this.wireEvents(),vp({target:this.spinner},this.parent.createElement),xa(this.spinner),this.getAllData())}renderResponsiveFilter(e){e.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")}dialogCreated(e){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":q.isDevice?this.dialogObj.position={X:"center",Y:"center"}:function gpe(n,e){const t=e.element.style.display;e.element.style.display="block";const i=e.width,s=vae(n,e.element);e.element.style.display=t,e.element.style.top=s.top+n.getBoundingClientRect().height-5+"px";const r=s.left-i+n.clientWidth;e.element.style.left=r<1?i+r-16+"px":r+-4+"px"}(this.options.target,this.dialogObj),this.options.column.showColumnMenu&&this.parent.notify("filterDialogCreated",e)}openDialog(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)}closeDialog(){if(this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;const e=this.options.columns.filter(i=>i.getFilterItemTemplate()),t=this.parent.registeredTemplate;e.length&&!f(t)&&t.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&mF(this.parent,["filterItemTemplate"]),this.parent.notify("filter-menu-close",{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),Yt(this.dlg),this.dlg=null,this.parent.notify(d3,{})}}clearFilter(e){const t={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(ZP,t),!t.cancel&&this.options.handler({action:"clear-filter",field:e?e.field:this.options.field})}btnClick(e){if(this.filterState){if("input"===e.target.tagName.toLowerCase()&&e.target.classList.contains("e-searchinput")||13===e.keyCode)this.isCheckboxFilterTemplate||this.fltrBtnHandler();else{const t=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===t?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===t&&this.clearFilter()}this.closeDialog()}else"input"!==e.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify("after-filter-column-menu-close",{})}fltrBtnHandler(){let e=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)"));const t=e;let i="equal";const s=this.dialogObj.element.querySelector(".e-dropdownlist");let r;s&&(this.options.operator=i=s.ej2_instances[0].value),this.isMenuNotEqual="notequal"===this.options.operator,this.options.hideSearchbox||(r=this.searchBox.querySelector(".e-searchinput"));const a={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:i,type:this.options.type,matchCase:this.options.allowCaseSensitive,ignoreAccent:this.options.ignoreAccent},l=this.itemsCnt!==e.length&&this.itemsCnt-e.length<e.length;l&&r&&""===r.value&&(i=this.isMenuNotEqual?"equal":"notequal",e=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),a.predicate=this.isMenuNotEqual?"or":"and",a.operator=i);let h,c,m,b,v=[];if(e.length!==this.itemsCnt||r&&r.value&&""!==r.value){for(let w=0;w<e.length;w++){h=this.values[Te(e[w],"e-ftrchk").getAttribute("uid")],b=Ae({},{value:h},a),h&&!h.toString().length&&(b.operator=l?"notequal":"equal"),""===h||f(h)?v=v.concat(Gh.generateNullValuePredicates(a)):v.push(b);const E={instance:this,handler:this.fltrBtnHandler,arg1:b.field,arg2:b.predicate,arg3:b.operator,arg4:b.matchCase,arg5:b.ignoreAccent,arg6:b.value,cancel:!1};if(this.parent.notify(ZP,E),E.cancel)return}("date"===this.options.type||"datetime"===this.options.type)&&(m=t.length-1,c=this.values[Te(t[m],"e-ftrchk").getAttribute("uid")],f(c)&&l&&v.push({field:a.field,matchCase:a.matchCase,operator:"equal",predicate:"and",value:null})),this.initiateFilter(v)}else this.options.filteredColumns.some(E=>this.options.field===E.field)&&this.clearFilter()}static generateNullValuePredicates(e){const t=[];return"string"===e.type&&t.push({field:e.field,ignoreAccent:e.ignoreAccent,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:""}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:null}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:void 0}),t}initiateFilter(e){const t=e[0];let i;if(!f(t)){i=t.ejpredicate?t.ejpredicate:new cs(t.field,t.operator,t.value,!t.matchCase,t.ignoreAccent);for(let r=1;r<e.length;r++)i=void 0!==e[r].ejpredicate?i[e[r].predicate](e[r].ejpredicate):i[e[r].predicate](e[r].field,e[r].operator,e[r].value,!e[r].matchCase,e[r].ignoreAccent);const s={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:cs.or(i)};this.options.handler(s)}}isForeignColumn(e){return!!e.isForeignColumn&&e.isForeignColumn()}refreshCheckboxes(){const e=this.sInput.value,t=this.options.column,i=this.isForeignColumn(t)?this.foreignKeyQuery.clone():this.options.query.clone(),s=this.options.query.clone(),r=i.queries.filter(D=>D&&"onWhere"===D.fn)[0];i.queries=[],s.queries=[];let o="string"!==this.options.type&&parseFloat(e)?parseFloat(e):e,a=this.options.isRemote?"string"===this.options.type?"contains":"equal":this.options.type?"contains":"equal";const l=!0,h=this.options.ignoreAccent,c=this.isForeignColumn(t)?t.foreignKeyValue:t.field;o=""===o||void 0===o?void 0:o;let m=[];const b={field:c,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:l,ignoreAccent:h};let v;const w=this.options.dataManager.adaptor.getModuleName;if("boolean"===this.options.type&&(void 0!==o&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(o.toLowerCase())?o="true":void 0!==o&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(o.toLowerCase())&&(o="false"),void 0!==o&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(o.toLowerCase())&&w?(w(),o=!0):void 0!==o&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(o.toLowerCase())&&w&&(w(),o=!1),a="equal"),("date"===this.options.type||"datetime"===this.options.type)&&this.options.format){const D=new mp,L="string"==typeof this.options.format?this.options.format:this.options.format.format;o=L&&D.parseDate(e,{format:L})||new Date(e)}this.addDistinct(i),this.parent.trigger(un,{requestType:"filtersearchbegin",filterModel:this,columnName:c,column:t,operator:a,matchCase:l,ignoreAccent:h,filterChoiceCount:null,query:i,value:o},D=>{if(D.operator=D.operator,v=new cs(c,D.operator,o,D.matchCase,D.ignoreAccent),"date"===this.options.type||"datetime"===this.options.type){a="equal";const N={field:c,operator:a,value:o,matchCase:l,ignoreAccent:h};f(o)||(v=bS(N,this.options.type))}if(e&&"string"==typeof e&&this.isBlanks&&this.getLocalizedLabel("Blanks").toLowerCase().indexOf(e.toLowerCase())>=0){m=m.concat(Gh.generateNullValuePredicates(b));const N=Gh.generatePredicate(m);N.predicates.push(v),i.where(N)}else e.length?(v=f(r)?v:v.and(r.e),i.where(v)):f(r)||i.where(r.e);D.filterChoiceCount=f(D.filterChoiceCount)?1e3:D.filterChoiceCount;const L={};xa(this.spinner),this.renderEmpty=!1,this.isForeignColumn(t)&&e.length?("result"in t.dataSource?new ut(t.dataSource.result):t.dataSource).executeQuery(i).then(V=>{const $=this.options.column.columnData;this.options.column.columnData=V.result,this.parent.notify(b1,{predicate:L,column:t}),L.predicate.predicates.length?s.where(L.predicate):this.renderEmpty=!0,this.options.column.columnData=$,s.take(D.filterChoiceCount),this.search(D,s)}):(i.take(D.filterChoiceCount),this.search(D,i))})}search(e,t){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,t):this.processSearch(t)}getPredicateFromCols(e){const t=Gh.getPredicate(e),i=[],s={},r=void 0!==this.parent.getForeignKeyColumns,o=r?this.parent.getForeignKeyColumns():[];for(const a of Object.keys(t)){let l;r&&this.parent.getColumnByField(a).isForeignColumn()&&(l=dF(a,o)),l?(this.parent.notify(b1,{predicate:s,column:l}),s.predicate.predicates.length&&i.push(cs.or(s.predicate.predicates))):i.push(t[a])}return i.length&&cs.and(i)}getQuery(){return this.parent.getQuery?this.parent.getQuery().clone():new Ut}getAllData(){this.customQuery=!1;const e=this.getQuery();e.requiresCount(),this.addDistinct(e);const t={requestType:aue,query:e,filterChoiceCount:null};t.filterModel=this,this.parent.trigger(un,t,s=>{s.filterChoiceCount=f(s.filterChoiceCount)?1e3:s.filterChoiceCount,e.take(s.filterChoiceCount),s.query.distincts.length||(this.customQuery=!0,this.queryGenerate(e)),this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(s,e):this.processDataOperation(e,!0)})}addDistinct(e){let t=Ze.distinct(this.options.filteredColumns,"field");return t.indexOf(this.options.column.field)<=-1&&(t=t.concat(this.options.column.field)),e.distinct(t),e}filterEvent(e,t){const i=function OZ(n,e){const t=function rFe(n){const e=new sg,t=new ut({url:"",adaptor:new sg}),i=e.processQuery(t,n);return JSON.parse(i.data)}(e),i=new Ru;return t.dataSource=i.resolve,t.action=n,{state:t,deffered:i}}(e,t);this.parent.trigger($P,i.state),i.deffered.promise.then(r=>{this.dataSuccess(r)})}processDataOperation(e,t){this.options.dataSource=this.options.dataSource instanceof ut?this.options.dataSource:new ut(this.options.dataSource);const i=[],s=[];if(this.isForeignColumn(this.options.column)&&t){const o="result"in this.options.column.dataSource?new ut(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=e.params,i.push(o.executeQuery(this.foreignKeyQuery)),s.push(a=>this.foreignKeyData=a)}i.push(this.options.dataSource.executeQuery(e)),s.push(this.dataSuccess.bind(this));let r=0;Promise.all(i).then(o=>{for(let a=0;a<o.length;a++)s[r++](o[a].result)})}dataSuccess(e){this.fullData=e;const t={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify("beforeCheckboxRenderer",t),t.executeQuery){const o=new Ut;this.customQuery||this.queryGenerate(o);const a=new ut(t.dataSource).executeLocal(o);this.filteredData=Gh.getDistinct(a,this.options.field,this.options.column,this.foreignKeyData).records||[]}this.processDataSource(null,!0,t.executeQuery?this.filteredData:t.dataSource,t),this.sInput&&this.sInput.focus();const s={requestType:"filterafteropen",columnName:this.options.field,columnType:this.options.type};s.filterModel=this,this.parent.notify(y1,s),this.isCheckboxFilterTemplate&&Rl(this.spinner)}queryGenerate(e){if(this.parent.searchSettings&&this.parent.searchSettings.key.length){const t=this.parent.searchSettings,i=t.fields.length?t.fields:this.options.columns.map(s=>s.field);e.search(t.key,i,t.operator,t.ignoreCase,t.ignoreAccent)}if(this.options.filteredColumns.length){const t=[];for(let s=0;s<this.options.filteredColumns.length;s++){const r=this.options.filteredColumns[s];this.options.uid?(r.uid=r.uid||this.parent.getColumnByField(r.field).uid,r.uid!==this.options.uid&&t.push(this.options.filteredColumns[s])):r.field!==this.options.field&&t.push(this.options.filteredColumns[s])}const i=this.getPredicateFromCols(t);i&&e.where(i)}}processDataSource(e,t,i,s){xa(this.spinner),this.updateResult();const r={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify("beforeCheckboxfilterRenderer",r),this.isCheckboxFilterTemplate=r.isCheckboxFilterTemplate,this.isCheckboxFilterTemplate||this.createFilterItems(i,t,s)}processSearch(e){this.processDataOperation(e)}updateResult(){this.result={};const e=this.getPredicateFromCols(this.options.filteredColumns),t=new Ut;e&&t.where(e),this.parent.notify("before-checkbox-renderer-query",{query:t});const i=new ut(this.fullData).executeLocal(t);for(const s of i)this.result[kr(this.options.field,s)]=!0}clickHandler(e){const t=e.target,i=Te(t,"e-checkbox-wrapper");if(Te(t,"e-searchbox")&&this.searchBoxClick(e),i&&!this.isCheckboxFilterTemplate){const s=i.querySelector(".e-selectall");s?this.updateAllCBoxes(!s.classList.contains("e-check")):function ype(n){const e=n.querySelector(".e-frame"),t=e.previousSibling;e.classList.contains("e-check")?(t.checked=!1,Bi(e,["e-uncheck"],["e-check"])):(t.checked=!0,Bi(e,["e-check"],["e-uncheck"]))}(i.parentElement),this.updateIndeterminatenBtn(),i.querySelector(".e-chk-hidden").focus()}this.setFocus(Te(i,"e-ftrchk"))}keyupHandler(e){this.setFocus(Te(e.target,"e-ftrchk"))}setFocus(e){const t=this.dlg.querySelector(".e-chkfocus");t&&t.classList.remove("e-chkfocus"),e&&e.classList.add("e-chkfocus")}updateAllCBoxes(e){const t=[].slice.call(this.cBox.getElementsByClassName("e-frame"));for(const i of t)cF(i,e),B_(i.previousSibling,e)}dialogOpen(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())}createCheckbox(e,t,i){const s=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);B_(s.querySelector("input"),t);const r=s.querySelector(".e-label"),o=k3({},i,{column:this.options.column,parent:this.parent});return r.innerHTML=!f(e)&&e.toString().length?e:this.getLocalizedLabel("Blanks"),r.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),"boolean"==typeof e&&(r.innerHTML=this.getLocalizedLabel(!0===e?"FilterTrue":"FilterFalse")),z([r],["e-checkboxfiltertext"]),this.options.template&&i[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&(r.innerHTML="",this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate?(this.options.template(o,this.parent,"filterItemTemplate",null,null,null,r),this.parent.renderTemplates()):Aa(r,this.options.template(o,this.parent,"filterItemTemplate"))),s}updateIndeterminatenBtn(){const e=this.cBox.children.length-1;let t=[],i=!1;const s=this.cBox.querySelector(".e-selectall"),r=this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length;let o;this.options.isResponsiveFilter||(o=this.dialogObj.btnObj[0],o.disabled=!1);const a=s.previousSibling;B_(a,!1),a.indeterminate=!1,e===r?(t=["e-check"],B_(a,!0)):r?(t=["e-stop"],a.indeterminate=!0):(t=["e-uncheck"],i=!0,o&&(o.disabled=!0)),o&&(this.filterState=!o.disabled,o.dataBind()),W([s],["e-check","e-stop","e-uncheck"]),z([s],t),this.parent.notify(lZ,{disabled:i})}createFilterItems(e,t,i){const s=this.parent.createElement("div");let r,o=!1;this.options.isResponsiveFilter||(r=this.dialogObj.btnObj[0]);let a=-1,l="ejValue";i.executeQuery||(l=i.field);for(let m=0;m<e.length;m++){const b=U(l,e[m]);(""===b||f(b))&&(a+=1)}if(this.itemsCnt=-1!==a?e.length-a:e.length,e.length&&!this.renderEmpty){const m=this.getLocalizedLabel("SelectAll"),b=this.cBox.querySelector(".e-checkfltrnmdiv");b&&b.classList.remove("e-checkfltrnmdiv");const v=this.createCheckbox(m,!1,{[this.options.field]:m}),w=LZ(qf("cbox"),v,"e-ftrchk");w.querySelector(".e-frame").classList.add("e-selectall"),s.appendChild(w);let E=new cs("field","equal",this.options.field);this.options.foreignKeyValue&&(E=E.or("field","equal",this.options.foreignKeyValue));const D=new ut(this.options.filteredColumns).executeLocal((new Ut).where(E)).length;let L;for(let N=0;N<e.length;N++){const V=qf("cbox");this.values[V]=U(l,e[N]);let $=U(this.options.field,e[N]);this.options.formatFn&&($=this.valueFormatter.toView($,this.options.formatFn));const ie={value:$,column:this.options.column,data:e[N]};if(this.parent.notify("filter-cbox-value",ie),$=ie.value,""===$||f($)){if(L)continue;L=!0}const Q=this.createCheckbox($,this.getCheckedState(D,this.values[V]),U("dataObj",e[N]));s.appendChild(LZ(V,Q,"e-ftrchk"))}this.cBox.innerHTML="",Aa(this.cBox,[].slice.call(s.children)),this.updateIndeterminatenBtn(),r&&(r.disabled=!1),o=!1}else s.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),Aa(this.cBox.children[0],[].slice.call(s.children)),r&&(r.disabled=!0),o=!0;r&&(this.filterState=!r.disabled,r.dataBind());const h={requestType:aue,dataSource:this.renderEmpty?[]:e};h.filterModel=this,this.parent.notify(y1,h),this.parent.notify(lZ,{disabled:o}),Rl(this.spinner)}getCheckedState(e,t){if(!this.isFiltered||!e)return!0;{const i=this.result[t];return"notequal"===this.options.operator?!i:i}}static getDistinct(e,t,i,s){let r=e.length;const o=[];let a;const h={},c=!(!i||!i.isForeignColumn)&&i.isForeignColumn();for(;r--;)if(a=e[r],a=kr(t,a),!(a in h)){const m={};if(m.ejValue=a,h[a]=!0,c){const b=gS(i,{},a,s)[0];zt(Iue,b,e[r]),a=U(i.foreignKeyValue,b)}zt(t,f(a)?null:a,m),zt("dataObj",e[r],m),o.push(m)}return Ze.group(Ze.sort(o,t,Ze.fnAscending),"ejValue")}static getPredicate(e){const t=Ze.distinct(e,"field",!0)||[];let i=[];const s={};for(let r=0;r<t.length;r++)i=new ut(e).executeLocal((new Ut).where("field","equal",t[r].field)),0!==i.length&&(s[t[r].field]=Gh.generatePredicate(i));return s}static generatePredicate(e){const t=e?e.length:0;let i;const r=Gh.updateDateFilter(e[0]);r.ignoreAccent=!f(r.ignoreAccent)&&r.ignoreAccent,i="date"===r.type||"datetime"===r.type?bS(r,r.type):r.ejpredicate?r.ejpredicate:new cs(r.field,r.operator,r.value,!Gh.getCaseValue(r),r.ignoreAccent);for(let o=1;o<t;o++)e[o]=Gh.updateDateFilter(e[o]),t>2&&o>1&&"or"===e[o].predicate?i.predicates.push("date"===e[o].type||"datetime"===e[o].type?bS(e[o],e[o].type):new cs(e[o].field,e[o].operator,e[o].value,!Gh.getCaseValue(e[o]),e[o].ignoreAccent)):i="date"===e[o].type||"datetime"===e[o].type?"and"===e[o].predicate&&"equal"===e[o].operator?i.or(bS(e[o],e[o].type),e[o].type,e[o].ignoreAccent):i[e[o].predicate](bS(e[o],e[o].type),e[o].type,e[o].ignoreAccent):e[o].ejpredicate?i[e[o].predicate](e[o].ejpredicate):i[e[o].predicate](e[o].field,e[o].operator,e[o].value,!Gh.getCaseValue(e[o]),e[o].ignoreAccent);return i||null}static getCaseValue(e){return f(e.matchCase)?!("string"===e.type||f(e.type)&&"string"==typeof e.value):e.matchCase}static updateDateFilter(e){return("date"===e.type||"datetime"===e.type||e.value instanceof Date)&&(e.type=e.type||"date"),e}}class mFe{constructor(e){this.pagerModule=e}render(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()}refresh(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.refreshAriaAttrLabel(),this.updateStyles()}refreshNumericLinks(){let e;const t=this.pagerModule,i=t.element.querySelector(".e-numericcontainer"),s=document.createDocumentFragment();i.innerHTML="";for(let r=1;r<=t.pageCount;r++)e=Be("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{role:"link",tabindex:"-1","aria-label":"Page "+r+" of "+t.totalPages+" Pages",href:"javascript:void(0);",name:"Goto page"+r}}),t.currentPage===r&&(Bi(e,["e-currentitem","e-active"],["e-pager-default"]),e.setAttribute("aria-selected","true")),s.appendChild(e);i.appendChild(s),this.links=[].slice.call(i.childNodes)}wireEvents(){k.add(this.pagerElement,"click",this.clickHandler,this)}unwireEvents(){k.remove(this.pagerModule.element,"click",this.clickHandler)}destroy(){this.unwireEvents()}refreshAriaAttrLabel(){const e=this.pagerModule,i=e.element.querySelector(".e-numericcontainer").querySelectorAll("a");for(let s=0;s<i.length;s++)i[s].hasAttribute("aria-label")&&i[s].hasAttribute("index")&&i[s].setAttribute("aria-label","Page "+i[s].getAttribute("index")+" of "+e.totalPages+" Pages")}renderNumericContainer(){this.element=Be("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild(Be("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)}renderFirstNPrev(e){this.first=Be("div",{className:"e-first e-icons e-icon-first",attrs:{title:this.pagerModule.getLocalizedLabel("firstPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}}),this.prev=Be("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:this.pagerModule.getLocalizedLabel("previousPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}),mi([this.first,this.prev],e)}renderPrevPagerSet(e){const t=Be("div");this.PP=Be("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),role:"link","aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",name:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.PP),e.appendChild(t)}renderNextPagerSet(e){const t=Be("div");this.NP=Be("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),role:"link","aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",name:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.NP),e.appendChild(t)}renderNextNLast(e){this.next=Be("div",{className:"e-next e-icons e-icon-next",attrs:{title:this.pagerModule.getLocalizedLabel("nextPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}}),this.last=Be("div",{className:"e-last e-icons e-icon-last",attrs:{title:this.pagerModule.getLocalizedLabel("lastPageTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}),mi([this.next,this.last],e)}clickHandler(e){const t=this.pagerModule,i=e.target;return t.previousPageNo=t.currentPage,!i.classList.contains("e-disable")&&!f(i.getAttribute("index"))&&(t.currentPage=parseInt(i.getAttribute("index"),10),t.dataBind()),!1}updateLinksHtml(){const e=this.pagerModule;let t,i;e.currentPage=1===e.totalPages?1:e.currentPage,e.currentPage>e.totalPages&&e.totalPages&&(e.currentPage=e.totalPages),t=parseInt((e.currentPage/e.pageCount).toString(),10),e.currentPage%e.pageCount==0&&t>0&&(t-=1);for(let s=0;s<e.pageCount;s++)i=t*e.pageCount+1+s,i<=e.totalPages?(this.links[s].style.display="",this.links[s].setAttribute("index",i.toString()),this.links[s].innerHTML=e.customText?e.customText+i:i.toString(),e.currentPage!==i?this.links[s].classList.add("e-pager-default"):this.links[s].classList.remove("e-pager-default")):(this.links[s].innerHTML=e.customText?e.customText+i:i.toString(),this.links[s].style.display="none"),Bi(this.links[s],[],["e-currentitem","e-active"]),this.links[s].removeAttribute("aria-selected");this.first.setAttribute("index","1"),this.last.setAttribute("index",e.totalPages.toString()),this.prev.setAttribute("index",(e.currentPage-1).toString()),this.next.setAttribute("index",(e.currentPage+1).toString()),this.pagerElement.querySelector(".e-mfirst").setAttribute("index","1"),this.pagerElement.querySelector(".e-mlast").setAttribute("index",e.totalPages.toString()),this.pagerElement.querySelector(".e-mprev").setAttribute("index",(e.currentPage-1).toString()),this.pagerElement.querySelector(".e-mnext").setAttribute("index",(e.currentPage+1).toString()),this.PP.setAttribute("index",(parseInt(this.links[0].getAttribute("index"),10)-e.pageCount).toString()),this.NP.setAttribute("index",(parseInt(this.links[this.links.length-1].getAttribute("index"),10)+1).toString())}updateStyles(){this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length&&(Bi(this.links[(this.pagerModule.currentPage-1)%this.pagerModule.pageCount],["e-currentitem","e-active"],[]),this.links[(this.pagerModule.currentPage-1)%this.pagerModule.pageCount].setAttribute("aria-selected","true"))}updateFirstNPrevStyles(){const e=["e-firstpage","e-pager-default"],t=["e-firstpagedisabled","e-disable"],i=["e-prevpage","e-pager-default"],s=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?(Bi(this.prev,i,s),Bi(this.first,e,t),Bi(this.pagerElement.querySelector(".e-mfirst"),e,t),Bi(this.pagerElement.querySelector(".e-mprev"),i,s)):(Bi(this.prev,s,i),Bi(this.first,t,e),Bi(this.pagerElement.querySelector(".e-mprev"),s,i),Bi(this.pagerElement.querySelector(".e-mfirst"),t,e))}updatePrevPagerSetStyles(){this.pagerModule.currentPage>this.pagerModule.pageCount?Bi(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):Bi(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])}updateNextPagerSetStyles(){const e=this.pagerModule,t=this.links[0].innerHTML.replace(e.customText,"");!t.length||!this.links.length||parseInt(t,10)+e.pageCount>e.totalPages?Bi(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):Bi(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])}updateNextNLastStyles(){const e=["e-lastpage","e-pager-default"],t=["e-lastpagedisabled","e-disable"],i=["e-nextpage","e-pager-default"],s=["e-nextpagedisabled","e-disable"],r=this.pagerModule;r.currentPage===r.totalPages||0===r.totalRecordsCount?(Bi(this.last,t,e),Bi(this.next,s,i),Bi(this.pagerElement.querySelector(".e-mlast"),t,e),Bi(this.pagerElement.querySelector(".e-mnext"),s,i)):(Bi(this.last,e,t),Bi(this.next,i,s),Bi(this.pagerElement.querySelector(".e-mlast"),e,t),Bi(this.pagerElement.querySelector(".e-mnext"),i,s))}}class gFe{constructor(e){this.pagerModule=e}render(){const e=Be("div",{className:"e-parentmsgbar",attrs:{"aria-label":"Pager Information"}});this.pageNoMsgElem=Be("span",{className:"e-pagenomsg",styles:"textalign:right"}),this.pageCountMsgElem=Be("span",{className:"e-pagecountmsg",styles:"textalign:right"}),mi([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()}refresh(){const e=this.pagerModule;this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0,e.totalRecordsCount||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel(e.totalRecordsCount<=1?"totalItemInfo":"totalItemsInfo"),[e.totalRecordsCount||0,e.totalRecordsCount?e.pageSize*(e.currentPage-1)+1:0,e.pageSize*e.currentPage>e.totalRecordsCount?e.totalRecordsCount:e.pageSize*e.currentPage]),this.pageNoMsgElem.parentElement.setAttribute("aria-label",this.pageNoMsgElem.textContent+this.pageCountMsgElem.textContent)}hideMessage(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")}showMessage(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""}destroy(){}format(e,t){let i;for(let s=0;s<t.length;s++)i=new RegExp("\\{"+s+"\\}","gm"),e=e.replace(i,t[s].toString());return e}}var Yd=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let $h=class extends Qs{constructor(e,t,i){super(e,t),this.hasParent=!1,this.pageRefresh="pager-refresh",this.firstPagerFocus=!1,this.parent=i}requiredModules(){const e=[];return this.enableExternalMessage&&e.push({member:"externalMessage",args:[this]}),this.checkpagesizes()&&e.push({member:"pagerdropdown",args:[this]}),e}preRender(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",totalItemInfo:"({0} item)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager",PreviousPagerTooltip:"Go to previous pager",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All"},this.containerModule=new mFe(this),this.pagerMessageModule=new gFe(this)}render(){this.element.setAttribute("data-role","pager"),this.element.setAttribute("aria-label","Pager Container"),this.element.setAttribute("tabindex","-1"),this.hasParent||this.element.setAttribute("tabindex","0"),this.template?this.isReactTemplate()?(this.on(this.pageRefresh,this.pagerTemplate,this),this.notify(this.pageRefresh,{})):this.pagerTemplate():(this.initLocalization(),this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount})),this.wireEvents(),this.addListener()}getPersistData(){return this.addOnPersist(["currentPage","pageSize"])}destroy(){this.isDestroyed||(this.isReactTemplate()&&(this.off(this.pageRefresh,this.pagerTemplate),this.hasParent||this.destroyTemplate(["template"])),this.removeListener(),this.unwireEvents(),super.destroy(),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.isReactTemplate()||(this.element.innerHTML=""))}destroyTemplate(e,t){this.clearTemplate(e,t)}getModuleName(){return"pager"}onPropertyChanged(e,t){if(!this.isDestroyed){e.pageCount!==t.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(const i of Object.keys(e))switch(i){case"currentPage":this.checkGoToPage(e.currentPage,t.currentPage)&&this.currentPageChanged(e,t);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(t.pageSize!==e.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize)),e.pageSize!==t.pageSize?(this.pageSize=e.pageSize,this.currentPageChanged(e,t)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage()}}}wireEvents(){this.hasParent||(k.add(this.element,"keydown",this.keyPressHandler,this),k.add(document.body,"keydown",this.keyDownHandler,this)),k.add(this.element,"focusin",this.onFocusIn,this),k.add(this.element,"focusout",this.onFocusOut,this)}unwireEvents(){this.hasParent||(k.remove(this.element,"keydown",this.keyPressHandler),k.remove(document.body,"keydown",this.keyDownHandler)),k.remove(this.element,"focusin",this.onFocusIn),k.remove(this.element,"focusout",this.onFocusOut)}onFocusIn(e){if(f(this.getFocusedTabindexElement())){const i=e.target,s=this.getDropDownPage();if(this.hasParent||(this.element.tabIndex=-1),i===this.element&&!this.hasParent){const r=this.getFocusablePagerElements(this.element,[]);return void this.addFocus(r[0],!0)}if(i===this.element)return void(this.element.tabIndex=0);i!==s&&!i.classList.contains("e-disable")&&this.addFocus(i,!0)}}onFocusOut(e){const t=this.getFocusedElement(),i=this.getDropDownPage();f(t)||this.removeFocus(t,!0),this.pageSizes&&i&&i.classList.contains("e-input-focus")&&this.removeFocus(i,!0),this.setTabIndexForFocusLastElement(),this.hasParent||(this.element.tabIndex=0),this.hasParent&&(this.element.tabIndex=-1)}keyDownHandler(e){if(e.altKey&&74===e.keyCode){const t=this.getFocusablePagerElements(this.element,[]);t.length>0&&t[0].focus()}}keyPressHandler(e){const t=Ae(e,{cancel:!1});this.notify(Nr,t),!0===t.cancel&&e.stopImmediatePropagation()}addListener(){this.isDestroyed||this.hasParent||this.on(Nr,this.onKeyPress,this)}removeListener(){this.isDestroyed||this.hasParent||this.off(Nr,this.onKeyPress)}onKeyPress(e){this.hasParent||(this.checkPagerHasFocus()?this.changePagerFocus(e):(e.preventDefault(),this.setPagerFocus()))}checkPagerHasFocus(){return!!this.getFocusedTabindexElement()}setPagerContainerFocus(){this.element.focus()}setPagerFocus(){const e=this.getFocusablePagerElements(this.element,[]);e.length>0&&e[0].focus()}setPagerFocusForActiveElement(){const e=this.getActiveElement();e&&e.focus()}setTabIndexForFocusLastElement(){const e=this.getFocusablePagerElements(this.element,[]),t=this.getDropDownPage();this.pageSizes&&t&&!f(t.offsetParent)?t.tabIndex=0:e.length>0&&(e[e.length-1].tabIndex=0)}changePagerFocus(e){e.shiftKey&&9===e.keyCode?this.changeFocusByShiftTab(e):9===e.keyCode?this.changeFocusByTab(e):13===e.keyCode||32===e.keyCode?this.navigateToPageByEnterOrSpace(e):(37===e.keyCode||39===e.keyCode||35===e.keyCode||36===e.keyCode)&&this.navigateToPageByKey(e)}getFocusedTabindexElement(){let e;const t=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])');for(let i=0;i<t.length;i++){const s=t[i];if(s&&(s.classList.contains("e-focused")||s.classList.contains("e-input-focus"))){e=s;break}}return e}changeFocusByTab(e){const t=this.getFocusedTabindexElement(),i=this.getFocusablePagerElements(this.element,[]),s=this.getDropDownPage();if(i.length>0)if(this.pageSizes&&s&&t===i[i.length-1])s.tabIndex=0;else for(let r=0;r<i.length;r++)if(t===i[r]){const o=r+1;o<i.length&&(e.preventDefault(),i[o].focus());break}}changeFocusByShiftTab(e){const t=this.getFocusedTabindexElement(),i=this.getFocusablePagerElements(this.element,[]),s=this.getDropDownPage();if(this.pageSizes&&s&&s.classList.contains("e-input-focus"))s.tabIndex=-1,this.addFocus(i[i.length-1],!0);else if(i.length>0)for(let r=0;r<i.length;r++)if(t===i[r]){const o=r-1;if(o>=0)e.preventDefault(),i[o].focus();else if(this.hasParent){const a=this.parent.getRows(),h=a[a.length-1].lastChild;e.preventDefault(),h.focus(),this.firstPagerFocus=!0}break}}checkFirstPagerFocus(){return!!this.firstPagerFocus&&(this.firstPagerFocus=!1,!0)}navigateToPageByEnterOrSpace(e){const t=this.getFocusedElement();if(t){this.goToPage(parseInt(t.getAttribute("index"),10));const i=this.getActiveElement(),s=this.getClass(t),r=this.getElementByClass(s);"e-first"!==s&&"e-prev"!==s&&"e-next"!==s&&"e-last"!==s&&"e-pp"!==s&&"e-np"!==s||!r||r.classList.contains("e-disable")?this.checkFocusInAdaptiveMode(t)?this.changeFocusInAdaptiveMode(t):i&&i.focus():r.focus()}}navigateToPageByKey(e){const i=this.element.querySelector(37===e.keyCode?".e-prev":39===e.keyCode?".e-next":35===e.keyCode?".e-last":36===e.keyCode?".e-first":""),s=this.getFocusedElement();if(!f(i)&&i.hasAttribute("index")&&!isNaN(parseInt(i.getAttribute("index"),10))){this.goToPage(parseInt(i.getAttribute("index"),10));const r=this.getActiveElement();this.checkFocusInAdaptiveMode(s)?this.changeFocusInAdaptiveMode(s):r&&r.focus()}}checkFocusInAdaptiveMode(e){const t=this.getClass(e);return"e-mfirst"===t||"e-mprev"===t||"e-mnext"===t||"e-mlast"===t}changeFocusInAdaptiveMode(e){const t=this.getClass(e),i=this.getElementByClass(t);i&&i.classList.contains("e-disable")&&("e-mnext"===t||"e-mlast"===t?this.element.querySelector(".e-mprev").focus():this.setPagerFocus())}removeTabindexLastElements(){const e=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])');if(e.length>1)for(let t=1;t<e.length;t++){const i=e[t];i&&(i.tabIndex=-1)}}getActiveElement(){return this.element.querySelector(".e-active")}getDropDownPage(){const e=this.element.querySelector(".e-pagerdropdown");let t;return e&&(t=e.children[0]),t}getFocusedElement(){return this.element.querySelector(".e-focused")}getClass(e){let t;const i=["e-mfirst","e-mprev","e-first","e-prev","e-pp","e-np","e-next","e-last","e-mnext","e-mlast"];for(let s=0;s<i.length;s++)if(e&&e.classList.contains(i[s]))return t=i[s],t;return t}getElementByClass(e){return this.element.querySelector("."+e)}getFocusablePagerElements(e,t){const s=e.children;let r=t;for(let o=0;o<s.length;o++){const a=s[o];if(a.children.length>0&&!a.classList.contains("e-pagesizes"))r=this.getFocusablePagerElements(a,r);else{const l=s[o];l.hasAttribute("tabindex")&&!a.classList.contains("e-disable")&&"none"!==a.style.display&&!f(a.offsetParent)&&r.push(l)}}return r}addFocus(e,t){t&&z([e],["e-focused","e-focus"]),e.tabIndex=0}removeFocus(e,t){t&&W([e],["e-focused","e-focus"]),e.tabIndex=-1}getLocalizedLabel(e){return this.localeObj.getConstant(e)}goToPage(e){this.checkGoToPage(e)&&(this.currentPage=e,this.dataBind())}setPageSize(e){this.pageSize=e,this.dataBind()}checkpagesizes(){return!(!0!==this.pageSizes&&!this.pageSizes.length)}checkGoToPage(e,t){return e!==this.currentPage&&(this.previousPageNo=this.currentPage),f(t)||(this.previousPageNo=t),this.previousPageNo!==e&&e>=1&&e<=this.totalPages}currentPageChanged(e,t){if(this.enableQueryString&&this.updateQueryString(this.currentPage),e.currentPage!==t.currentPage||e.pageSize!==t.pageSize){const i={currentPage:this.currentPage,newProp:e,oldProp:t,cancel:!1};this.trigger("click",i),i.cancel||this.refresh()}}pagerTemplate(){if(this.isReactTemplate()&&this.hasParent)return;let e;this.element.classList.add("e-pagertemplate"),this.compile(this.template);const t={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},i=this.element.parentElement.id+"_template";this.isReactTemplate()&&!this.isVue?(this.getPagerTemplate()(t,this,"template",i,null,null,this.element),this.renderReactTemplates()):(e=this.isVue?this.getPagerTemplate()(t,this,"template"):this.getPagerTemplate()(t),Aa(this.element,e))}updateTotalPages(){this.totalPages=this.isAllPage?1:this.totalRecordsCount%this.pageSize==0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1}getPagerTemplate(){return this.templateFn}compile(e){if(e)try{document.querySelectorAll(e).length&&(this.templateFn=ji(document.querySelector(e).innerHTML.trim()))}catch(t){this.templateFn=ji(e)}}refresh(){if(this.template)this.isReactTemplate()?(this.updateTotalPages(),this.notify(this.pageRefresh,{})):(this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate());else{this.updateRTL();const e=this.getFocusedTabindexElement();this.containerModule.refresh(),this.removeTabindexLastElements(),e&&e.classList.contains("e-disable")&&(this.checkFocusInAdaptiveMode(e)?this.changeFocusInAdaptiveMode(e):this.setPagerFocusForActiveElement()),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.pagerdropdownModule&&this.pagerdropdownModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh(),this.setTabIndexForFocusLastElement()}}updateRTL(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}initLocalization(){this.localeObj=new jo(this.getModuleName(),this.defaultConstants,this.locale)}updateQueryString(e){const t=this.getUpdatedURL(window.location.href,"page",e.toString());window.history.pushState({path:t},"",t)}getUpdatedURL(e,t,i){const s=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");if(e.match(s))return e.replace(s,"$1"+t+"="+i+"$2");{let r="";return-1!==e.indexOf("#")&&(r=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+(-1!==e.indexOf("?")?"&":"?")+t+"="+i+r}}renderFirstPrevDivForDevice(){this.element.appendChild(Be("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild(Be("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))}renderNextLastDivForDevice(){this.element.appendChild(Be("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild(Be("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))}addAriaLabel(){const e=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"];if(!q.isDevice)for(let t=0;t<e.length;t++){const i=this.element.querySelector(e[t]);i.setAttribute("aria-label",i.getAttribute("title"))}}isReactTemplate(){return(this.isReact||this.isVue)&&this.template&&"string"!=typeof this.template}};Yd([_(!1)],$h.prototype,"enableQueryString",void 0),Yd([_(!1)],$h.prototype,"enableExternalMessage",void 0),Yd([_(!0)],$h.prototype,"enablePagerMessage",void 0),Yd([_(12)],$h.prototype,"pageSize",void 0),Yd([_(10)],$h.prototype,"pageCount",void 0),Yd([_(1)],$h.prototype,"currentPage",void 0),Yd([_()],$h.prototype,"totalRecordsCount",void 0),Yd([_()],$h.prototype,"externalMessage",void 0),Yd([_(!1)],$h.prototype,"pageSizes",void 0),Yd([_()],$h.prototype,"template",void 0),Yd([_("")],$h.prototype,"customText",void 0),Yd([G()],$h.prototype,"click",void 0),Yd([G()],$h.prototype,"dropDownChanged",void 0),Yd([G()],$h.prototype,"created",void 0),$h=Yd([as],$h);var H3=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let Zpe=(()=>{class n extends ii{}return H3([_(null)],n.prototype,"downloadUrl",void 0),H3([_(null)],n.prototype,"getImageUrl",void 0),H3([_(null)],n.prototype,"uploadUrl",void 0),H3([_(null)],n.prototype,"url",void 0),n})();var Xpe=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class V3 extends ii{}Xpe([_(["NewFolder","Upload","Cut","Copy","Paste","Delete","Download","Rename","SortBy","Refresh","Selection","View","Details"])],V3.prototype,"items",void 0),Xpe([_(!0)],V3.prototype,"visible",void 0);var z3=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class D1 extends ii{}z3([_(!0)],D1.prototype,"allowSearchOnTyping",void 0),z3([_("contains")],D1.prototype,"filterType",void 0),z3([_(!0)],D1.prototype,"ignoreCase",void 0),z3([_(null)],D1.prototype,"placeholder",void 0);var Qpe=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class j3 extends ii{}Qpe([_(!0)],j3.prototype,"columnResizing",void 0),Qpe([_([{field:"name",headerText:"Name",minWidth:120,template:'<span class="e-fe-text">${name}</span>',customAttributes:{class:"e-fe-grid-name"}},{field:"_fm_modified",headerText:"DateModified",type:"dateTime",format:"MMMM dd, yyyy HH:mm",minWidth:120,width:"190"},{field:"size",headerText:"Size",minWidth:90,width:"110",template:'<span class="e-fe-size">${size}</span>'}])],j3.prototype,"columns",void 0);var U3=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class k1 extends ii{}U3([_(["Open","|","Cut","Copy","|","Delete","Download","Rename","|","Details"])],k1.prototype,"file",void 0),U3([_(["Open","|","Cut","Copy","Paste","|","Delete","Rename","Download","|","Details"])],k1.prototype,"folder",void 0),U3([_(["SortBy","View","Refresh","|","Paste","|","NewFolder","Upload","|","Details","|","SelectAll"])],k1.prototype,"layout",void 0),U3([_(!0)],k1.prototype,"visible",void 0);var q3=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class R1 extends ii{}q3([_("650px")],R1.prototype,"maxWidth",void 0),q3([_("240px")],R1.prototype,"minWidth",void 0),q3([_(!0)],R1.prototype,"visible",void 0),q3([_("None")],R1.prototype,"sortOrder",void 0);var bF=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class j_ extends ii{}bF([_("")],j_.prototype,"allowedExtensions",void 0),bF([_(!0)],j_.prototype,"autoUpload",void 0),bF([_(!1)],j_.prototype,"autoClose",void 0),bF([_(0)],j_.prototype,"minFileSize",void 0),bF([_(3e7)],j_.prototype,"maxFileSize",void 0);var ad=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class ld extends ii{}ad([_("")],ld.prototype,"field",void 0),ad([_("")],ld.prototype,"headerText",void 0),ad([_("")],ld.prototype,"width",void 0),ad([_("")],ld.prototype,"minWidth",void 0),ad([_("")],ld.prototype,"maxWidth",void 0),ad([_("Left")],ld.prototype,"textAlign",void 0),ad([_(null)],ld.prototype,"headerTextAlign",void 0),ad([_(null)],ld.prototype,"type",void 0),ad([_(null)],ld.prototype,"format",void 0),ad([_(null)],ld.prototype,"template",void 0),ad([_(null)],ld.prototype,"headerTemplate",void 0),ad([_(!0)],ld.prototype,"allowSorting",void 0),ad([_(!0)],ld.prototype,"allowResizing",void 0),ad([_(null)],ld.prototype,"customAttributes",void 0),ad([_("")],ld.prototype,"hideAtMedia",void 0),ad([_(null)],ld.prototype,"customFormat",void 0);const W3="_toolbar",yF="_tree",vF="_grid",CF="_largeicons",tfe="_img_dialog",ife="_extn_dialog",sfe="_upload_dialog",nfe="_contextmenu",wF="_content",SF="_breadcrumbbar",G3="_upload",$3="e-fe-cb-select",dy="e-fe-popup",ofe="e-fe-mobile",K3="e-fe-popup e-fe-mobile",A1="e-fe-m-select",UZ="e-fe-m-filter",Y3="e-large-icons",Tg="e-list-item",Z3="e-list-text",L1="e-list-parent",Zd="e-icons e-fe-tick",OC="e-icons e-fe-dot",M1="e-blur",hd="e-active",xF="e-hover",EF="e-focus",_F="e-check",X3="e-checkbox-wrapper",Np="e-empty",IF="e-empty-content",TF="e-empty-inner-content",GZ="e-fe-clone",Q3="e-fe-drop-folder",lfe="e-fe-drop-file",O1="e-fe-folder",J3="e-fe-image",e6="e-large-icon",$Z="e-treeview",cfe="e-menu-item",P1="e-menu-icon",F1="e-content",N1="e-icons e-fe-grid",B1="e-icons e-fe-large",YZ="e-rtl",U_="e-display-none",Efe="e-split-bar",vS="e-fe-value",zr="model-changed",CS="initial-end",Bp="finalize-end",PC="create-end",DF="filter-end",XZ="path-drag",q_="delete-init",FC="delete-end",NC="refresh-end",W_="resize-end",G_="splitter-resize",cd="path-changed",uy="destroy",$_="before-request",QZ="skip-upload",wS="after-request",K_="layout-refresh",H1="actionFailure",V1="search",Y_="open-init",BC="open-end",dd="selection-changed",z1="select-all-init",kF="clear-all-init",t6="clear-path-init",py="layout-change",SS="sort-by-change",Gf="details-init",Z_="menu-item-data",xS="rename-init",Dg="rename-end",RF="hide-paste",ES="selected-data",X_="cut-copy-init",_S="paste-init",kg="paste-end",j1="hide-layout",s6="update-tree-selection",n6="sort-column",U1="path-column",iX="search-change",HC="drop-init",VC="drop-path",AF="update-selection-data",Rg="method-call",$f="write",aX="writeContents",LF="download";function hX(n,e,t){const i=cX(n,e,!1,t);let s=t?"":"/";for(let o=i.length-(t?1:2);o>=0;o--)s+=i[o]+"/";return s}function cX(n,e,t,i){const s=[e];let r=n.parentNode;for(;!f(r);){if(ck(r,"."+Tg)){const o=t?r.getAttribute("data-uid"):i?r.getAttribute("data-id"):X("."+Z3,r).textContent;s.push(o)}if(r=r.parentNode,r.classList.contains($Z))break}return s}function Tfe(n,e){if(e.isSearchCut=!1,e.actionRecords=[],e.activeElements=[],e.notify(X_,{}),0===e.activeElements.length)return!1;Kf(e);const t=e.activeElements;e.targetPath="navigationpane"!==e.activeModule?e.path:q1(e.path);let i=0;if(t&&(o6(e,t[0]),"cut"===n))for(;i<t.length;)r6(t[i]),i++;for(i=0,e.selectedNodes=[],e.enablePaste=!0,e.notify("show-paste",{});i<e.activeRecords.length;)e.actionRecords.push(e.activeRecords[i]),e.selectedNodes.push(U("name",e.activeRecords[i])),i++;if((""!==e.breadcrumbbarModule.searchObj.element.value||e.isFiltered)&&"navigationpane"!==e.activeModule){e.selectedNodes=[],e.isSearchCut=!0;let s=0;for(;s<e.selectedItems.length;)e.selectedNodes.push(e.selectedItems[s]),s++}return!0}function r6(n){n.classList.add(M1)}function Kf(n,e){const t=n.element.querySelectorAll(e?"."+xF:"."+M1);let i=0;for(;i<t.length;)t[i].classList.remove(e?xF:M1),i++}function o6(n,e){e&&(n.activeModule=e.classList.contains("e-row")?"detailsview":B(e,"."+e6)?"largeiconsview":"navigationpane")}function a6(n,e,t){let i;0===e.length&&!n.isFiltered&&n.notify(U1,{args:n}),i="startsWith"===n.searchSettings.filterType?e+"*":"endsWith"===n.searchSettings.filterType?"*"+e:"*"+e+"*",n.searchWord=i,n.itemData=[ud(n)],e.length>0?Wfe(n,t?py:V1,n.path,i,n.showHiddenItems,!n.searchSettings.ignoreCase):n.isFiltered?EX(n,py):n.isSortByClicked?(n.notify(py,{files:n.largeiconsviewModule.items}),n.isSortByClicked=!1):ua(n,t?py:V1,n.path)}function fy(n,e){n.setProperties({view:e},!0),(""!==n.breadcrumbbarModule.searchObj.element.value||n.isFiltered)&&(n.layoutSelectedItems=n.selectedItems);let t="";n.breadcrumbbarModule.searchObj.element.value&&(t=n.breadcrumbbarModule.searchObj.element.value),n.isLayoutChange=!0,a6(n,t,!0)}function Dfe(n,e){let t="";e&&(t=B(e,".e-filemanager.e-control .e-gridcontent")?"detailsview":B(e,"."+Y3)?"largeiconsview":e.classList.contains("e-fullrow")||e.classList.contains("e-icon-expandable")?"navigationpane":B(e,".e-address-list-item")?"breadcrumbbar":""),n.targetModule=t}function IS(n){n.itemData=[ud(n)],BF(n.itemData[0])?ua(n,NC,n.path):$o(n,n.itemData[0],"read")}function ud(n){return U(n.pathId[n.pathId.length-1],n.feParent)}function MF(n){Tfe("copy",n)&&(n.fileAction="copy")}function OF(n){Tfe("cut",n)&&(n.isCut=!0,n.fileAction="move")}function PF(n){if(!U("isFile",n))return O1;let a,o=U("type",n);return o=o.toLowerCase(),-1!==o.indexOf(".")&&(o=o.split(".").join("")),a=-1!==["bmp","dib","jpg","jpeg","jpe","jfif","gif","tif","tiff","png","ico"].indexOf(o)?J3:-1!==["mp3","wav","aac","ogg","wma","aif","fla","m4a"].indexOf(o)?"e-fe-music":-1!==["webm","mkv","flv","vob","ogv","ogg","avi","wmv","mp4","3gp"].indexOf(o)?"e-fe-video":-1!==["css","exe","html","js","msi","pdf","pptx","ppt","rar","zip","txt","docx","doc","xlsx","xls","xml","rtf","php"].indexOf(o)?"e-fe-"+o:"e-fe-unknown e-fe-"+o,a}function uX(n,e){const t=n.ajaxSettings.getImageUrl?n.ajaxSettings.getImageUrl:n.ajaxSettings.url;let i;const s=encodeURIComponent(U("name",e)),r=U("filterPath",e);if(n.hasId){const a=U("id",e);i=t+"?path="+n.path+"&id="+a}else i=f(r)?t+"?path="+n.path+s:t+"?path="+r.replace(/\\/g,"/")+s;i=i+"&time="+(new Date).getTime().toString();const o={fileDetails:[e],imageUrl:i};return n.trigger("beforeImageLoad",o),o.imageUrl}function FF(n,e,t){const i=U(n.hasId?"id":"name",e)+"/",s=U(n.hasId?"filterId":"filterPath",e);return f(s)?t+i:s.replace(/\\/g,"/")+i}function wNe(n,e,t){const i=U(n.pathId[n.pathId.length-1],n.feFiles),s=(new Ut).where(e,"equal",t);return new ut(i).executeLocal(s)[0]}function Kt(n,e){const t=n.localeObj.getConstant(e);return""===t?e:t}function gy(n,e){let t=n.cssClass;return t=f(t)||""===t?e:t+" "+e,t}function Mfe(n){const e=n.substring(n.lastIndexOf("_")+1);let t=e;switch(e){case"date":t="_fm_modified";break;case"ascending":t="Ascending";break;case"descending":t="Descending";break;case"none":t="None"}return t}function NF(n){if(n.isDragDrop=!1,0!==n.selectedNodes.length&&n.enablePaste){const e=""===n.folderPath?n.path:n.folderPath;Pfe(n,n.actionRecords,e,n.path)||("move"===n.fileAction&&n.targetPath!==e||"copy"===n.fileAction?(n.notify(_S,{}),d6(n,n.targetPath,n.selectedNodes,e,n.fileAction,[],n.actionRecords)):(n.enablePaste=!1,n.notify(RF,{}),Kf(n)))}}function Pfe(n,e,t,i){let s=!1;for(let r=0;r<e.length;r++)if(U("isFile",e[r])){const o=n.dragNodes[r];let a=0;o&&(a=o.lastIndexOf("/"));let l="";if(a>0&&(l=i+o.substring(0,a+1)),l===t){jl(n,"Error",{files:null,error:{code:"402",message:Kt(n,"Same-Folder-Error"),fileExists:null}}),s=!0;break}}else{const o=FF(n,e[r],i);if(0===t.indexOf(o)){jl(n,"Error",{files:null,error:{code:"402",message:Kt(n,"Sub-Folder-Error"),fileExists:null}}),s=!0;break}}return s}function q1(n){const e=n.split("/");let t=e[0]+"/";for(let i=1;i<e.length-2;i++)t+=e[i]+"/";return t}function mX(n,e,t){"move"===e&&(n.isDragDrop?n.notify("drag-end",t):(n.enablePaste=!1,n.notify(RF,{}),n.notify("cut-end",t))),0===n.duplicateItems.length&&(n.pasteNodes=[]);for(let s=0;s<t.files.length;s++)n.pasteNodes.push(t.files[s][n.hasId?"id":"name"]),n.isDragDrop&&n.droppedObjects.push(t.files[s]);n.duplicateItems=[],n.duplicateRecords=[],n.isDropEnd=!(!n.isDragDrop||n.isPasteError),!n.isDragDrop||n.path===n.dragPath||n.path===n.dropPath||n.isSearchDrag?(n.isPathDrag=!1,ua(n,kg,n.path)):function gX(n){const e=U("_fm_id",n.dropData);n.expandedId=e,n.itemData=[n.dropData],n.isPathDrag?n.notify(XZ,n.itemData):(n.navigationpaneModule&&function lX(n,e,t){const i=U("name",e),s=n.getAttribute("data-id"),r=f(s)?i:s;t.setProperties({path:hX(n,r,t.hasId)},!0),t.pathId=function yNe(n){const e=cX(n,n.getAttribute("data-uid"),!0),t=[];for(let i=e.length-1;i>=0;i--)t.push(e[i]);return t}(n),t.pathNames=function vNe(n,e){const t=cX(n,e,!1),i=[];for(let s=t.length-1;s>=0;s--)i.push(t[s]);return i}(n,i)}(X('[data-uid="'+e+'"]',n.navigationpaneModule.treeObj.element),n.dropData,n),ua(n,VC,n.dropPath))}(n),n.trigger("success",{action:e,result:t})}function yX(n,e){const t=e;t.cancel=!1,null!=n.treeExpandTimer&&(window.clearTimeout(n.treeExpandTimer),n.treeExpandTimer=null),Nfe(n),n.element.classList.remove("e-fe-drop","e-no-drop"),Kf(n),n.uploadObj.dropArea=X("#"+n.element.id+wF,n.element);const i=X("."+GZ,n.element);i&&te(i),Dfe(n,e.target),n.notify(HC,e),Kf(n,"hover"),t.fileDetails=n.dragData,n.trigger("fileDragStop",t,s=>{!s.cancel&&!f(n.targetModule)&&""!==n.targetModule&&n.dragCount>2&&function _Ne(n){n.isDragDrop=!0,0!==n.dragData.length&&(n.dragPath=n.dragPath.replace(/\\/g,"/"),n.dropPath=n.dropPath.replace(/\\/g,"/"),!Pfe(n,n.dragData,n.dropPath,n.dragPath)&&n.dragPath!==n.dropPath&&(n.itemData=[n.dropData],d6(n,n.dragPath,n.dragNodes,n.dropPath,"move",[],n.dragData),n.notify(_S,{})))}(n),n.dragCount=0})}function Ffe(n){Kf(n);const e=X("."+GZ,n.element);e&&te(e)}function Nfe(n){Bfe(n,Q3),Bfe(n,lfe)}function Bfe(n,e){const t=n.element.querySelectorAll("."+e);for(let i=0;i<t.length;i++)t[i].classList.remove(e)}function CX(n,e){const t=e;t.fileDetails=n.dragData;let i=!1;Dfe(n,e.target),Nfe(n),null!=n.treeExpandTimer&&(window.clearTimeout(n.treeExpandTimer),n.treeExpandTimer=null),Kf(n,"hover");let s=null;"navigationpane"===n.targetModule?(s=B(e.target,"li"),s.classList.add(xF,Q3),i=!0,n.treeExpandTimer=window.setTimeout(()=>{n.notify("dragging",e)},800)):"detailsview"===n.targetModule?(s=B(e.target,"tr"),s&&s.querySelector("."+O1)&&!s.classList.contains(M1)?s.classList.add(Q3):s&&!s.querySelector("."+O1)&&!s.classList.contains(M1)&&s.classList.add(lfe),i=!0):"largeiconsview"===n.targetModule?(s=B(e.target,"li"),s&&s.querySelector("."+O1)&&!s.classList.contains(M1)&&s.classList.add(xF,Q3),i=!0):"breadcrumbbar"===n.targetModule&&(i=!0),n.element.classList.remove("e-fe-drop","e-no-drop"),n.element.classList.add(i?"e-fe-drop":"e-no-drop"),n.dragCount=n.dragCount+1,n.trigger("fileDragging",t)}function TS(n,e){return n.hasId?U("id",e):function Rfe(n,e){let t=U("name",e),i=U("filterPath",e);return(""!==n.breadcrumbbarModule.searchObj.element.value||n.isFiltered)&&!f(i)&&(i=i.replace(/\\/g,"/"),t=i.replace(n.path,"")+t),t}(n,e)}function l6(n,e){n.itemData=[e],n.currentItemText=U("name",e),n.isFile=U("isFile",e),n.filterPath=U("filterPath",e)}function h6(n){pd(n.itemData[0])?jl(n,"Rename"):$o(n,n.itemData[0],$f)}function $o(n,e,t){let i=U("message",U("permission",e));""===i&&(i=Kt(n,"Access-Message").replace("{0}",U("name",e)).replace("{1}",t)),jl(n,"Error",{error:{code:"401",fileExists:null,message:i}})}function c6(n){return BF(n)?"e-fe-locked":"e-fe-locked e-fe-hidden"}function BF(n){const e=U("permission",n);return!(e&&!U("read",e))}function pd(n){const e=U("permission",n);return!e||U("read",e)&&U("write",e)}function wX(n){const e=U("permission",n);return!e||U("read",e)&&U("writeContents",e)}function jfe(n){const e=U("permission",n);return!e||U("read",e)&&U("upload",e)}function HF(n){const e=U("permission",n);return!e||U("read",e)&&U("download",e)}function SX(n){const e=n.itemData[0];wX(e)?jl(n,"NewFolder"):$o(n,e,aX)}function xX(n){const e=n.itemData[0];jfe(e)?document.querySelector("#"+n.element.id+G3).click():$o(n,e,"upload")}function ua(n,e,t){const i=n.itemData;for(let r=0;r<i.length;r++)f(U("hasChild",i[r]))&&zt("hasChild",!1,i[r]);DS(n,{action:"read",path:t,showHiddenItems:n.showHiddenItems,data:i},DNe,e)}function Ufe(n,e){DS(n,{action:"create",path:n.path,name:e,data:n.itemData},RNe,e)}function EX(n,e){const t={action:"filter",path:n.path,showHiddenItems:n.showHiddenItems,data:[ud(n)]},s=n.filterData?Ae(void 0,t,n.filterData):t;DS(n,s,kNe,e,U("action",s))}function VF(n,e,t){let i,s;if(""!==n.breadcrumbbarModule.searchObj.element.value||n.isFiltered){let o=n.filterPath;n.hasId?(i=n.currentItemText,s=t):(o=o.replace(/\\/g,"/"),i=o.replace(e,"")+n.currentItemText,s=o.replace(e,"")+t)}else i=n.currentItemText,s=t;DS(n,{action:"rename",path:e,name:i,newName:s,data:n.itemData},ANe,e)}function d6(n,e,t,i,s,r,o){const a={action:s,path:e,targetData:n.itemData[0],targetPath:i,names:t,renameFiles:r,data:o};n.destinationPath=i,DS(n,a,LNe,e,s,i)}function u6(n,e,t,i){DS(n,{action:i,path:t,names:e,data:n.itemData},MNe,t)}function zF(n,e,t,i){DS(n,{action:i,path:t,names:e,data:n.itemData},ONe,t,i)}function DS(n,e,t,i,s,r){const o={url:n.ajaxSettings.url,type:"POST",mode:!0,dataType:"json",contentType:"application/json",data:JSON.stringify(e),onSuccess:null,onFailure:null,beforeSend:null},a={action:U("action",e),ajaxSettings:o,cancel:!1};n.trigger("beforeSend",a,l=>{l.cancel||(n.notify($_,{}),new qb({url:U("url",l.ajaxSettings),type:U("type",l.ajaxSettings),mode:U("mode",l.ajaxSettings),dataType:U("dataType",l.ajaxSettings),contentType:U("contentType",l.ajaxSettings),data:U("data",l.ajaxSettings),beforeSend:U("beforeSend",l.ajaxSettings),onSuccess:c=>{if(f(c)){const b={error:{fileExists:null,message:Kt(n,"Server-Error")+" "+n.ajaxSettings.url,code:"406"},files:null};return void qfe(n,l,t,b,i,s,r)}"string"==typeof c&&(c=JSON.parse(c)),n.notify(wS,{action:"success"});const m=n.expandedId?n.expandedId:n.pathId[n.pathId.length-1];if(!f(c.cwd)&&"read"===U("action",e)&&(c.cwd.name=1===n.pathId.length&&n.rootAliasName||c.cwd.name,zt("_fm_id",m,c.cwd),zt(m,c.cwd,n.feParent),!f(c.files)||"401"===c.error.code)){if(("finalize-end"===i||"initial-end"===i)&&0===n.pathNames.length){const b=U(n.pathId[0],n.feParent);n.pathNames[0]=U("name",b),n.hasId=!f(U("id",b))}"finalize-end"===i&&function CNe(n){const e=n.hasId?"id":"name";let t=n.hasId?"":"/",i=n.hasId?0:1;for(;i<n.pathId.length;i++){const s=U(n.pathId[i],n.feParent);t+=U(e,s)+"/"}n.setProperties({path:t},!0)}(n)}if(!f(c.files)){!function xNe(n){for(let e=0;e<n.length;e++)zt("_fm_created",new Date(U("dateCreated",n[e])),n[e]),zt("_fm_modified",new Date(U("dateModified",n[e])),n[e])}(c.files);for(let b=0,v=c.files.length;b<v;b++){const w=c.files[b];zt("_fm_iconClass",PF(w),w)}"read"===U("action",e)&&(function SNe(n,e){const t=function Lfe(n){return new ut(n).executeLocal((new Ut).where("isFile","equal",!1,!1))}(n.files);for(let i=0,s=t.length;i<s;i++)zt("_fm_id",e+"_"+i,t[i])}(c,m),zt(m,c.files,n.feFiles))}if(!f(c.details)&&!f(n.rootAliasName)){const b=n.rootAliasName||U("name",c.details);let v=U("location",c.details).replace(new RegExp("/","g"),"\\");("/"===U("path",e)||n.hasId&&1===U("path",e).match(/[/]/g).length)&&0===U("names",e).length?(zt("name",b,c.details),v=b):v=v.replace(v.substring(0,v.indexOf("\\")),b),zt("location",v,c.details)}t(n,c,i,s,r),!f(c.files)&&("path-changed"===i||"finalize-end"===i||"open-end"===i)&&n.notify(iX,c),"function"==typeof U("onSuccess",l.ajaxSettings)&&U("onSuccess",l.ajaxSettings)()},onFailure:()=>{const c={files:null,error:{code:"404",message:Kt(n,"Network-Error")+" "+n.ajaxSettings.url,fileExists:null}};qfe(n,l,t,c,i,s,r)}}).send())})}function qfe(n,e,t,i,s,r,o){n.notify(wS,{action:"failure"}),t(n,i,s,r,o),"function"==typeof U("onFailure",e.ajaxSettings)&&U("onFailure",e.ajaxSettings)()}function DNe(n,e,t){f(e.files)?("401"===e.error.code&&(e.files=[],n.notify(t,e),n.notify(dd,{})),zC(n,e,"read")):(n.notify(t,e),n.notify(dd,{}),n.trigger("success",{action:"read",result:e})),n.isDragDrop&&n.isDropEnd&&(0!==n.droppedObjects.length&&n.trigger("fileDropped",{fileDetails:n.droppedObjects}),n.isDropEnd=n.isDragDrop=!1)}function kNe(n,e,t,i){f(e.files)?zC(n,e,i):(n.notify(t,e),n.trigger("success",{action:i,result:e}))}function RNe(n,e,t){if(f(e.files))if("400"===e.error.code){if(n.dialogObj&&n.dialogObj.visible){const s=X("#newname",n.dialogObj.element),r=Kt(n,"Validation-NewFolder-Exists").replace("{0}",'"'+s.value+'"');s.parentElement.nextElementSibling.innerHTML=r}else jl(n,"Error",{files:null,error:{code:"400",message:Kt(n,"Validation-NewFolder-Exists").replace("{0}",'"'+t+'"'),fileExists:null}});n.trigger("failure",{action:"create",error:e.error})}else n.dialogObj&&n.dialogObj.visible&&n.dialogObj.hide(),zC(n,e,"create");else n.dialogObj&&n.dialogObj.visible&&n.dialogObj.hide(),n.createdItem=e.files[0],n.breadcrumbbarModule.searchObj.value="",n.trigger("success",{action:"create",result:e}),n.itemData=[ud(n)],ua(n,PC,n.path)}function ANe(n,e,t){if(f(e.files))if("400"===e.error.code&&n.dialogObj&&n.dialogObj.visible){const i=X("#rename",n.dialogObj.element);let s=Kt(n,"Validation-Rename-Exists").replace("{0}",'"'+n.currentItemText+'"');s=s.replace("{1}",'"'+i.value+'"'),i.parentElement.nextElementSibling.innerHTML=s,n.trigger("failure",{action:"rename",error:e.error})}else f(n.dialogObj)||n.dialogObj.hide(),zC(n,e,"rename");else f(n.dialogObj)||n.dialogObj.hide(),n.trigger("success",{action:"rename",result:e}),n.renamedItem=e.files[0],"navigationpane"===n.activeModule?(n.pathId.pop(),n.itemData=[U(n.pathId[n.pathId.length-1],n.feParent)],ua(n,"rename-end-parent",q1(n.path))):(n.itemData=[ud(n)],""!==n.breadcrumbbarModule.searchObj.value?Wfe(n,Dg,n.path,n.searchWord,n.showHiddenItems,!n.searchSettings.ignoreCase):n.isFiltered?EX(n,Dg):ua(n,Dg,n.path))}function LNe(n,e,t,i){e.error&&e.error.fileExists?(n.fileLength=0,f(e.files)||(n.isPasteError=!0,mX(n,i,e)),UF(n,"DuplicateItems",e.error.fileExists),"404"===e.error.code&&jl(n,"Error",e)):e.error||f(e.files)?e.error&&!f(e.files)?(n.isPasteError=!0,mX(n,i,e),jl(n,"Error",e)):zC(n,e,i):(n.isPasteError=!1,mX(n,i,e))}function MNe(n,e,t){f(e.files)?zC(n,e,"delete"):(n.setProperties({path:t},!0),n.itemData=[ud(n)],ua(n,FC,n.path),e.error?zC(n,e,"delete"):n.trigger("success",{action:"delete",result:e}))}function ONe(n,e,t,i){f(e.details)?zC(n,e,"details"):(jl(n,i,null,e.details),n.trigger("success",{action:"details",result:e}))}function zC(n,e,t){jl(n,"Error",e),n.trigger("failure",{action:t,error:e.error})}function Wfe(n,e,t,i,s,r){DS(n,{action:"search",path:t,searchString:i,showHiddenItems:s,caseSensitive:r,data:n.itemData},PNe,e)}function PNe(n,e,t){f(e.files)?zC(n,e,"search"):(n.notify(t,e),n.trigger("success",{action:"search",result:e}))}function jF(n,e,t){const i=n.ajaxSettings.downloadUrl?n.ajaxSettings.downloadUrl:n.ajaxSettings.url;n.trigger("beforeDownload",{data:{action:"download",path:e,names:t,data:n.itemData},cancel:!1},o=>{if(!o.cancel){const a=Be("form",{id:n.element.id+"_downloadForm",attrs:{action:i,method:"post",name:"downloadForm",download:""}}),l=Be("input",{id:n.element.id+"_hiddenForm",attrs:{name:"downloadInput",value:JSON.stringify(o.data),type:"hidden"}});a.appendChild(l),n.element.appendChild(a),document.forms.namedItem("downloadForm").submit(),n.element.removeChild(a)}})}function jl(n,e,t,i,s){const r=function qNe(n,e,t,i,s){const r={header:"",content:"",buttons:[],dialogName:""};let o,a,l,h,c,m;switch(r.open=()=>{W1(n,n.dialogObj,r.dialogName)},r.close=()=>{WF(n,n.dialogObj,r.dialogName)},e=i&&!0===i.multipleFiles?"MultipleFileDetails":e){case"NewFolder":r.dialogName="Create Folder",r.header=Kt(n,"Header-NewFolder"),r.content='<input type="text" value="New folder" id="newname"><div class="e-fe-error"></div>',r.buttons=[{buttonModel:{isPrimary:!0,content:Kt(n,"Button-Create")},click:b=>{"keydown"!==b.type&&Xfe(n)}}],r.open=zNe.bind(this,n);break;case"Delete":r.dialogName="Delete",n.selectedItems.length>1?(r.content=("<div>"+Kt(n,"Content-Multiple-Delete")+"</div>").replace("{0}",n.selectedItems.length.toString()),r.header=Kt(n,"Header-Multiple-Delete")):(r.content="<div>"+Kt(n,n.isFile?"Content-Delete":"Content-Folder-Delete")+"</div>",r.header=Kt(n,n.isFile?"Header-Delete":"Header-Folder-Delete")),r.buttons=[{buttonModel:{isPrimary:!0,content:Kt(n,"Button-Yes")},click:b=>{!function GNe(n){n.dialogObj.hide(),n.notify(q_,{})}(n)}},{buttonModel:{content:Kt(n,"Button-No")},click:()=>{n.dialogObj.hide()}}];break;case"Rename":r.dialogName="Rename",r.header=Kt(n,"Header-Rename"),r.content='<input type="text" class="e-input" id="rename"><div class="e-fe-error"></div>',r.buttons=[{buttonModel:{isPrimary:!0,content:Kt(n,"Button-Save")},click:b=>{"keydown"!==b.type&&Qfe(n)}}],r.open=jNe.bind(this,n);break;case"details":r.dialogName="File Details",l=new mp(n.locale),a=l.formatDate(new Date(i.modified),{format:"MMMM dd, yyyy HH:mm:ss"}),o="",f(i.permission)||(o="<tr><td>"+Kt(n,"Permission")+'</td><td class="'+vS+'" >'+function TNe(n){let e="";const t=Object.keys(n);for(let i=0;i<t.length;i++)"message"!==t[i]&&(e+=(0===i?"":", ")+t[i]+": "+U(t[i],n));return e}(i.permission)+"</td></tr>"),r.header=i.name,r.content="<table><tr><td>"+Kt(n,"Type")+'</td><td class="'+vS+'" title="'+(i.isFile?"File":"Folder")+'">'+(i.isFile?"File":"Folder")+"</td></tr><tr><td>"+Kt(n,"Size")+'</td><td><span class="'+vS+'" title ="'+i.size+'">'+i.size+"</span></td></tr><tr><td>"+Kt(n,"Location")+'</td><td class="'+vS+'" title="'+i.location+'">'+i.location+"</td></tr><tr><td>"+Kt(n,"Modified")+'</td><td class="'+vS+'" >'+a+"</td></tr>"+o+"</table>",r.buttons=[{buttonModel:{isPrimary:!0,content:Kt(n,"Button-Ok")},click:b=>{n.dialogObj.hide()}}];break;case"MultipleFileDetails":r.dialogName="File Details",h=i.name.split(",").map(b=>{const v=b.indexOf(".")+1;return 0===v?"Folder":b.substr(v).replace(" ","")}),c=h.every((b,v,w)=>b===w[0])?"Folder"===h[0]?"Folder":h[0].toLocaleUpperCase()+" Type":"Multiple Types",m=i.location,r.header=i.name,r.content="<table><tr><td>"+Kt(n,"Type")+':</td><td class="'+vS+'">'+c+"</td></tr><tr><td>"+Kt(n,"Size")+":</td><td>"+i.size+'<span class="'+vS+'" title ="'+i.size+'"></span></td></tr><tr><td>'+Kt(n,"Location")+':</td><td class="'+vS+'" title="'+m+'">'+m+"</td></tr></table>",r.buttons=[{buttonModel:{isPrimary:!0,content:Kt(n,"Button-Ok")},click:b=>{"keydown"!==b.type&&n.dialogObj.hide()}}];break;case"Error":n.notify(H1,{}),r.dialogName="Error",r.header="401"===t.error.code?'<span class="e-fe-icon e-fe-access-error"></span><div class="e-fe-access-header">'+Kt(n,"Access-Denied")+"</div>":Kt(n,"Error"),r.content='<div class="e-fe-errorcontent">'+t.error.message+"</div>",r.buttons=[{buttonModel:{isPrimary:!0,content:Kt(n,"Button-Ok")},click:b=>{n.dialogObj.hide()}}]}return r}(n,e,t,i);f(n.dialogObj)?(n.dialogObj=new Hs({beforeOpen:Kfe.bind(this,n,r.dialogName),beforeClose:o=>{qF(n,n.dialogObj,o,r.dialogName)},header:r.header,content:r.content,buttons:r.buttons,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!0,allowDragging:!0,isModal:!0,target:n.popupTarget?n.popupTarget:"#"+n.element.id,cssClass:gy(n,n.isMobile?K3:dy),width:"350px",open:r.open,close:r.close,enableRtl:n.enableRtl,enableHtmlSanitizer:n.enableHtmlSanitizer,locale:n.locale}),n.dialogObj.isStringTemplate=!0,n.dialogObj.appendTo("#"+n.element.id+"_dialog")):function WNe(n,e){n.dialogObj.header=e.header,n.dialogObj.content=e.content,n.dialogObj.buttons=e.buttons,n.dialogObj.enableRtl=n.enableRtl,n.dialogObj.open=e.open,n.dialogObj.close=e.close,n.dialogObj.beforeOpen=Kfe.bind(this,n,e.dialogName),n.dialogObj.beforeClose=t=>{qF(n,n.dialogObj,t,e.dialogName)},n.dialogObj.dataBind(),n.dialogObj.show()}(n,r)}function UF(n,e,t,i){const s=function FNe(n,e,t,i){const s={header:"",content:"",buttons:[],dialogName:""};let r,o,a;switch(s.open=()=>{W1(n,n.extDialogObj,s.dialogName)},s.close=()=>{WF(n,n.extDialogObj,s.dialogName)},e){case"Extension":s.header=Kt(n,"Header-Rename-Confirmation"),s.content="<div>"+Kt(n,"Content-Rename-Confirmation")+"</div>",s.buttons=[{buttonModel:{isPrimary:!0,content:Kt(n,"Button-Yes")},click:()=>{n.extDialogObj.hide(),VF(n,i,n.renameText)}},{buttonModel:{content:Kt(n,"Button-No")},click:()=>{n.extDialogObj.hide(),n.dialogObj.hide()}}],s.dialogName="Extension Change";break;case"DuplicateItems":s.dialogName="Duplicate Items",n.replaceItems=t,o=n.replaceItems[n.fileLength],a=o.lastIndexOf("/"),o=-1===a?o:o.substring(a),s.header=Kt(n,"Header-Duplicate"),r="<div>"+Kt(n,"Content-Duplicate")+"</div>",s.content=r.replace("{0}",o),s.close=()=>{n.isDropEnd||0!==n.duplicateItems.length||(n.trigger("fileDropped",{fileDetails:n.droppedObjects}),n.isDropEnd=n.isDragDrop=!1),WF(n,n.extDialogObj,s.dialogName)},s.buttons=[{buttonModel:{isPrimary:!0,content:Kt(n,"Button-Yes")},click:()=>{if(n.duplicateItems.push(n.replaceItems[n.fileLength]),n.duplicateRecords.push(function INe(n,e){let t=null;const i=n.isDragDrop?n.dragData:n.actionRecords;for(let s=0;s<i.length;s++)if(U("name",i[s])===e){t=i[s];break}return t}(n,n.replaceItems[n.fileLength])),n.fileLength++,t[n.fileLength]){let l=n.replaceItems[n.fileLength];const h=l.lastIndexOf("/");l=-1===h?l:l.substring(h),n.extDialogObj.content=r.replace("{0}",l),n.extDialogObj.show()}else n.extDialogObj.hide(),d6(n,n.isDragDrop?n.dragPath:n.targetPath,n.duplicateItems,n.isDragDrop?n.dropPath:""===n.folderPath?n.path:n.folderPath,n.isDragDrop?"move":n.fileAction,n.duplicateItems,n.duplicateRecords)}},{buttonModel:{content:Kt(n,"Button-No")},click:()=>{if(n.fileLength++,t[n.fileLength]){let l=n.replaceItems[n.fileLength];const h=l.lastIndexOf("/");l=-1===h?l:l.substring(h),n.extDialogObj.content=r.replace("{0}",l),n.extDialogObj.show()}else n.extDialogObj.hide(),0!==n.duplicateItems.length&&d6(n,n.isDragDrop?n.dragPath:n.targetPath,n.duplicateItems,n.isDragDrop?n.dropPath:""===n.folderPath?n.path:n.folderPath,n.isDragDrop?"move":n.fileAction,n.duplicateItems,n.duplicateRecords)}}];break;case"UploadRetry":s.dialogName="Retry Upload",s.header=Kt(n,"Header-Retry"),s.content=n.retryFiles[0].name+'<div class="e-fe-retrycontent">'+Kt(n,"Content-Retry")+"</div>",s.open=NNe.bind(this,n),s.close=()=>{n.isRetryOpened=!1,GF(n),WF(n,n.extDialogObj,s.dialogName)},s.buttons=[{buttonModel:{isPrimary:!0,content:Kt(n,"Button-Keep-Both")},click:()=>{Gfe(n,!0)}},{buttonModel:{isPrimary:!0,content:Kt(n,"Button-Replace")},click:()=>{Gfe(n,!1)}},{buttonModel:{isPrimary:!0,content:Kt(n,"Button-Skip")},click:()=>{let l=0;n.isApplySame?(l=n.retryFiles.length,n.retryFiles=[],GF(n)):(l=1,n.retryFiles.splice(0,1),0!==n.retryFiles.length?UF(n,"UploadRetry"):GF(n)),n.notify(QZ,{count:l})}}]}return s}(n,e,t,i);n.isApplySame=!1,f(n.extDialogObj)?(n.extDialogObj=new Hs({beforeOpen:Yfe.bind(this,n,s.dialogName),beforeClose:r=>{qF(n,n.extDialogObj,r,s.dialogName)},content:s.content,header:s.header,closeOnEscape:!0,allowDragging:!0,animationSettings:{effect:"None"},target:n.popupTarget?n.popupTarget:"#"+n.element.id,cssClass:gy(n,n.isMobile?K3:dy),enableRtl:n.enableRtl,showCloseIcon:!0,isModal:!0,width:350,buttons:s.buttons,open:s.open,close:s.close,enableHtmlSanitizer:n.enableHtmlSanitizer,locale:n.locale}),n.extDialogObj.isStringTemplate=!0,n.extDialogObj.appendTo("#"+n.element.id+ife)):(n.extDialogObj.header=s.header,n.extDialogObj.close=s.close,n.extDialogObj.open=s.open,n.extDialogObj.close=s.close,n.extDialogObj.content=s.content,n.extDialogObj.buttons=s.buttons,n.extDialogObj.enableRtl=n.enableRtl,n.extDialogObj.locale=n.locale,n.extDialogObj.beforeOpen=Yfe.bind(this,n,s.dialogName),n.extDialogObj.beforeClose=r=>{qF(n,n.extDialogObj,r,s.dialogName)},n.extDialogObj.dataBind(),n.extDialogObj.show())}function _X(n,e,t,i){n.trigger("beforePopupOpen",{cancel:t.cancel,popupName:i,popupModule:e},r=>{t.cancel=r.cancel})}function qF(n,e,t,i){n.trigger("beforePopupClose",{cancel:t.cancel,popupModule:e,popupName:i},r=>{t.cancel=r.cancel,!t.cancel&&t.isInteracted&&("Rename"===i||"Create Folder"===i)&&n.trigger(H1,{})})}function W1(n,e,t){n.trigger("popupOpen",{popupModule:e,element:e.element,popupName:t})}function WF(n,e,t){n.trigger("popupClose",{popupModule:e,element:e.element,popupName:t})}function Gfe(n,e){n.isApplySame?(e?function BNe(n){for(;0!==n.retryFiles.length;)n.retryArgs.push({action:"keepboth",file:n.retryFiles[0]}),n.uploadObj.retry(n.retryFiles[0]),n.retryFiles.splice(0,1)}(n):function HNe(n){for(;0!==n.retryFiles.length;)n.retryArgs.push({action:"replace",file:n.retryFiles[0]}),n.uploadObj.retry(n.retryFiles[0]),n.retryFiles.splice(0,1)}(n),GF(n)):(n.retryArgs.push({action:e?"keepboth":"replace",file:n.retryFiles[0]}),n.uploadObj.retry(n.retryFiles[0]),n.retryFiles.splice(0,1),0!==n.retryFiles.length?UF(n,"UploadRetry"):GF(n))}function GF(n){let e=!0;n.isRetryOpened?n.isRetryOpened=!1:e=!1;const t=X(".e-dlg-checkbox",n.extDialogObj.element);t&&Yt(t),e?n.extDialogObj.hide():n.retryFiles=[]}function NNe(n,e){n.isRetryOpened=!0;const i=X(".e-dlg-content",U("element",e)),s=n.createElement("div",{className:"e-dlg-checkbox"}),r=n.createElement("input",{id:n.element.id+"_applyall"});s.appendChild(r),i.appendChild(s),new pc({label:Kt(n,"ApplyAll-Label"),change:a=>{n.isApplySame=a.checked}}).appendTo("#"+n.element.id+"_applyall"),W1(n,n.extDialogObj,"Retry Upload")}function zNe(n){const e=X("#newname",n.dialogObj.element);e.parentElement.classList.contains("e-control-wrapper")||$fe(e,Kt(n,"Content-NewFolder")),e.parentElement.nextElementSibling.innerHTML="",e.oninput=()=>{IX(n,e)},e.onkeyup=t=>{13===tme(t)&&Xfe(n)},function VNe(n){const e=X("#newname",n.dialogObj.element);e.focus(),e.value="",e.setSelectionRange(0,e.value.length)}(n),W1(n,n.dialogObj,"Create Folder")}function jNe(n){const e=X("#rename",n.dialogObj.element);e.parentElement.classList.contains("e-control-wrapper")||$fe(e,Kt(n,"Content-Rename")),e.parentElement.nextElementSibling.innerHTML="",e.oninput=()=>{IX(n,e)},e.onkeyup=t=>{13===tme(t)&&Qfe(n)},function UNe(n,e){e.focus();let t="";if(n.isFile&&!n.showFileExtension){const i=n.currentItemText.lastIndexOf(".");t=-1===i?n.currentItemText:n.currentItemText.substring(0,i)}else t=n.currentItemText;e.value=t,n.isFile&&n.showFileExtension&&-1!==e.value.indexOf(".")?e.setSelectionRange(0,e.value.lastIndexOf(".")):e.setSelectionRange(0,e.value.length)}(n,e),W1(n,n.dialogObj,"Rename")}function $fe(n,e){Bt.createInput({element:n,properties:{placeholder:e}})}function Kfe(n,e,t){Zfe(bt(".e-btn",n.dialogObj.element)),_X(n,n.dialogObj,t,e)}function Yfe(n,e,t){Zfe(bt(".e-btn",n.extDialogObj.element)),_X(n,n.extDialogObj,t,e)}function Zfe(n){for(let e=0;e<n.length;e++)n[e].onkeydown=t=>{13===t.keyCode&&t.preventDefault()},n[e].onkeyup=t=>{13===t.keyCode&&n[e].click()}}function Xfe(n){const e=X("#newname",n.dialogObj.element);Jfe(n,e),""===e.parentElement.nextElementSibling.innerHTML&&Ufe(n,e.value)}function Qfe(n){const e=X("#rename",n.dialogObj.element);if(Jfe(n,e),""!==e.parentElement.nextElementSibling.innerHTML)return;let t=e.value;const i=n.currentItemText.lastIndexOf(".");if(n.isFile&&!n.showFileExtension&&(t+=-1===i?"":n.currentItemText.substr(i)),n.renameText=t,n.currentItemText===t)return void n.dialogObj.hide();const s="navigationpane"===n.activeModule?q1(n.path):n.path;if(n.renamedId=U("id",n.itemData[0]),n.isFile){const r=-1===i?"":n.currentItemText.substr(i),o=t.lastIndexOf("."),a=-1===o?"":t.substr(o);n.showFileExtension&&r!==a?UF(n,"Extension",null,s):VF(n,s,t)}else VF(n,s,t)}function IX(n,e){/[/\\|*?"<>:]/.test(e.value)?eme(n,e):e.parentElement.nextElementSibling.innerHTML=""===e.value?Kt(n,"Validation-Empty"):""}function Jfe(n,e){IX(n,e);const t=e.value.length-1;""!==e.value&&(e.value.lastIndexOf(".")===t||e.value.lastIndexOf(" ")===t)&&(n.showFileExtension||-1===n.currentItemText.lastIndexOf("."))&&eme(n,e)}function eme(n,e){const t=Kt(n,"Validation-Invalid").replace("{0}",'"'+e.value+'"');n.enableHtmlSanitizer?e.parentElement.nextElementSibling.textContent=t:e.parentElement.nextElementSibling.innerHTML=t}function tme(n){let e;return e=n.keyCode?n.keyCode:n.which?n.which:n.charCode,e}function $Ne(n){setTimeout(()=>{n.viewerObj&&n.viewerObj.element.focus()}),TX(n),W1(n,n.viewerObj,"Image Preview")}function TX(n){const e=X(".e-dlg-content",n.viewerObj.element),t=X(".e-image-wrap",n.viewerObj.element),i=window.getComputedStyle(e,null),s=i?2*parseFloat(i.paddingRight):36,r=i?2*parseFloat(i.paddingBottom):20;t.style.width=e.offsetWidth-s+"px",t.style.height=e.offsetHeight-r+"px"}class KNe{constructor(e){this.isInteraction=!0,this.uploadOperation=!1,this.count=0,this.isRendered=!0,this.tapCount=0,this.isPasteOperation=!1,this.isInteracted=!0,this.parent=e,this.element=X("#"+this.parent.element.id+CF,this.parent.element),z([this.element],Y3),this.addEventListener(),this.keyConfigs={end:"end",home:"home",tab:"tab",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",ctrlUp:"ctrl+uparrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftLeft:"shift+leftarrow",shiftRight:"shift+rightarrow",shiftUp:"shift+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csLeft:"ctrl+shift+leftarrow",csRight:"ctrl+shift+rightarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",ctrlA:"ctrl+a",enter:"enter",altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",f2:"f2",shiftdel:"shift+delete",back:"backspace",ctrlD:"ctrl+d"}}render(e){if(this.parent.visitedItem=null,this.startItem=null,xa(this.parent.element),"LargeIcons"===this.parent.view){this.resetMultiSelect(),this.element.setAttribute("tabindex","0"),this.listObj&&(this.unWireEvents(),this.removeEventListener()),this.parent.notify(j1,{});const t=X("#"+this.parent.element.id+CF,this.parent.element),i=X("ul",t);if(i&&Yt(i),this.listObj={ariaAttributes:{itemRole:"option",listRole:"listbox",itemText:"",groupItemRole:"group",wrapperRole:""},showIcon:!0,fields:{text:"name",iconCss:"_fm_icon",imageUrl:"_fm_imageUrl",htmlAttributes:"_fm_htmlAttr"},sortOrder:this.parent.sortOrder,itemCreated:this.onItemCreated.bind(this),enableHtmlSanitizer:this.parent.enableHtmlSanitizer},this.items=[],this.items=this.renderList(e),this.items=function my(n,e){if(0===e.length)return e;let t;return t="None"!==n.sortOrder?(new Ut).sortBy(n.sortBy,n.sortOrder.toLowerCase(),!0).group("isFile"):(new Ut).group("isFile"),U("records",new ut(e).executeLocal(t))}(this.parent,this.items),this.listElements=Js.createListFromJson(Be,this.items,this.listObj),this.itemList=Array.prototype.slice.call(bt("."+Tg,this.listElements)),this.element.appendChild(this.listElements),this.preventImgDrag(),this.createDragObj(),t.classList.remove(U_),0===this.itemList.length){const r=this.element.querySelector("."+L1);this.element.removeChild(r),function Afe(n,e,t){let i;const s=X("#"+n.element.id+"_layout",n.element),r=X("#"+n.element.id+SF,s).offsetHeight;if(i=s.offsetHeight-r,"Details"===n.view&&(i-=X(".e-gridheader",s).offsetHeight),f(e.querySelector("."+Np))){const a=Be("div",{className:Np}),l=Be("div",{className:"e-empty-icon e-fe-folder"}),h=Be("div",{className:IF}),c=Be("div",{className:TF});"Details"===n.view?e.querySelector("."+F1).appendChild(a):e.appendChild(a),a.appendChild(l),a.appendChild(h),a.appendChild(c)}e.querySelector("."+Np)&&(f(t.error)?n.isFiltered?(e.querySelector("."+IF).innerHTML=Kt(n,"Filter-Empty"),e.querySelector("."+TF).innerHTML=Kt(n,"Filter-Key")):""!==n.breadcrumbbarModule.searchObj.element.value?(e.querySelector("."+IF).innerHTML=Kt(n,"Search-Empty"),e.querySelector("."+TF).innerHTML=Kt(n,"Search-Key")):(e.querySelector("."+IF).innerHTML=Kt(n,"Folder-Empty"),e.querySelector("."+TF).innerHTML=Kt(n,"File-Upload")):(e.querySelector("."+IF).innerHTML=Kt(n,"Access-Denied"),e.querySelector("."+TF).innerHTML=Kt(n,"Access-Details")));const o=X("."+Np,e);i=(i-o.offsetHeight)/2,o.style.marginTop=i+"px"}(this.parent,this.element,e)}else 0!==this.itemList.length&&this.element.querySelector("."+Np)&&this.element.removeChild(this.element.querySelector("."+Np));!0===this.isPasteOperation&&(this.selectItems(this.parent.pasteNodes),this.isPasteOperation=!1),!0===this.uploadOperation&&(this.selectItems(this.parent.uploadItem),this.parent.setProperties({selectedItems:[]},!0),this.count++,this.count===this.parent.uploadItem.length&&(this.uploadOperation=!1,this.parent.uploadItem=[]));const s=this.element.querySelectorAll("."+hd);0!==s.length&&(this.parent.activeModule="largeiconsview");for(let r=0;r<s.length;r++)s[r].setAttribute("aria-selected","true");this.adjustHeight(),this.element.style.maxHeight="100%",this.getItemCount(),this.addEventListener(),this.wireEvents(),this.isRendered=!0,Rl(this.parent.element),this.parent.selectedItems.length&&this.checkItem()}}preventImgDrag(){let e=0;for(;e<this.itemList.length;)this.itemList[e].querySelector("img")&&(this.itemList[e].ondragstart=()=>!1),e++}createDragObj(){!this.parent.isMobile&&this.listObj&&(this.parent.allowDragAndDrop?(this.dragObj&&this.dragObj.destroy(),this.dragObj=new vn(this.listElements,{enableTailMode:!0,distance:5,enableAutoScroll:!0,dragTarget:"."+e6,helper:this.dragHelper.bind(this),cursorAt:this.parent.dragCursorPosition,dragArea:this.parent.element,dragStop:yX.bind(this,this.parent),drag:CX.bind(this,this.parent),clone:!0,dragStart:e=>{!function vX(n,e,t){const i=e;if(i.cancel=!1,i.fileDetails=n.dragData,n.dragCount=0,n.droppedObjects=[],(!n.allowDragAndDrop||"navigationpane"===n.activeModule&&B(e.element,"li").getAttribute("data-uid")===n.pathId[0])&&(i.cancel=!0),n.isPathDrag="navigationpane"===n.activeModule&&-1!==n.pathId.indexOf(B(e.element,"li").getAttribute("data-uid")),Kf(n),i.cancel)t.intDestroy(e.event),Ffe(n);else if(!i.cancel){let s=0;for(;s<n.activeElements.length;)r6(n.activeElements[s]),s++;n.trigger("fileDragStart",i,r=>{r.cancel?(t.intDestroy(e.event),Ffe(n)):n.uploadObj.dropArea=null})}}(this.parent,e,this.dragObj)}})):this.dragObj&&!this.parent.allowDragAndDrop&&this.dragObj.destroy())}dragHelper(e){const i=B(e.sender.target,".e-list-item");if(!i)return null;i&&!i.classList.contains("e-active")&&this.setFocus(i);const s=this.element.querySelectorAll("."+hd);this.parent.activeElements=[],this.parent.dragData=[];for(let r=0;r<s.length;r++)this.parent.dragData.push(this.getItemObject(s[r])),this.parent.activeElements.push(s[r]);return o6(this.parent,i),this.parent.dragPath=this.parent.path,function bX(n){if(n.isSearchDrag=!1,""!==n.breadcrumbbarModule.searchObj.element.value&&(n.isSearchDrag=!0),"navigationpane"!==n.activeModule){n.dragNodes=[];let r=0;for(;r<n.selectedItems.length;)n.dragNodes.push(n.selectedItems[r]),r++;0===n.selectedItems.length&&n.dragData&&1===n.dragData.length&&n.dragNodes.push(TS(n,n.dragData[0]))}const e=n.createElement("div",{className:"e-fe-icon "+PF(n.dragData[0])}),t=n.createElement("div",{className:"e-fe-name",innerHTML:n.dragData[0].name}),i=n.createElement("div",{className:"e-fe-content"});i.appendChild(e),i.appendChild(t);const s=n.createElement("div",{className:GZ});if(s.appendChild(i),n.dragNodes.length>1){const r=n.createElement("span",{className:"e-fe-count",innerHTML:n.dragNodes.length.toString(10)});s.appendChild(r)}n.virtualDragElement=s,n.element.appendChild(n.virtualDragElement)}(this.parent),this.parent.virtualDragElement}onDropInit(e){if(this.parent.targetModule===this.getModuleName()){const t=B(e.target,".e-list-item"),i=U(this.parent.pathId[this.parent.pathId.length-1],this.parent.feParent);if(t){const s=this.getItemObject(t);this.parent.dropPath=s.isFile?this.parent.path:FF(this.parent,s,this.parent.path),this.parent.dropData=s.isFile?i:s}else this.parent.dropPath=this.parent.path,this.parent.dropData=i}}getModuleName(){return"largeiconsview"}adjustHeight(){const e=X("#"+this.parent.element.id+wF,this.parent.element),t=X("#"+this.parent.element.id+SF,this.parent.element);this.element.style.height=e.offsetHeight-t.offsetHeight+"px"}onItemCreated(e){if(e.item.removeAttribute("aria-level"),!this.parent.showFileExtension&&U("isFile",e.curData)){const i=e.item.querySelector("."+Z3),s=U("name",e.curData),r=U("type",e.curData);i.innerHTML=s.substr(0,s.length-r.length)}this.renderCheckbox(e),this.parent.trigger("fileLoad",{element:e.item,fileDetails:e.curData,module:"LargeIconsView"})}renderCheckbox(e){if(!this.parent.allowMultiSelection)return;const t=Vw(Be,!1,{checked:!1,cssClass:"e-small"});t.setAttribute("role","checkbox"),t.setAttribute("aria-checked","false"),e.item.firstElementChild.insertBefore(t,e.item.firstElementChild.childNodes[0])}onLayoutChange(e){if("LargeIcons"===this.parent.view){if(this.destroy(),this.render(e),"layout-change"===U("name",e)&&"move"===this.parent.fileAction&&this.parent.isCut&&this.parent.selectedNodes&&0!==this.parent.selectedNodes.length){const i=this.getIndexes(this.parent.selectedNodes);let s=0;for(;s<i.length;)r6(this.itemList[i[s]]),s++}0!==this.element.querySelectorAll("."+hd).length&&this.element.focus(),this.checkItem(),this.parent.isLayoutChange=!1}else this.element.setAttribute("tabindex","-1")}checkItem(){const e=this.element.querySelectorAll("."+hd);if(e){let t=0;for(;t<e.length;)this.checkState(e[t],!0),t++}}renderList(e){let t=0;const i=JSON.parse(JSON.stringify(e.files));for(;t<i.length;){const s=PF(i[t]),r=U("name",i[t]),o=TS(this.parent,i[t]);let a=this.parent.selectedItems&&-1!==this.parent.selectedItems.indexOf(o)?e6+" e-active":e6;pd(i[t])||(a+=" "+c6(i[t])),s===J3&&this.parent.showThumbnail&&BF(i[t])?(zt("_fm_imageUrl",uX(this.parent,i[t]),i[t]),zt("_fm_imageAttr",{alt:r},i[t])):zt("_fm_icon",s,i[t]),zt("_fm_htmlAttr",{class:a,title:r},i[t]),t++}return i}onFinalizeEnd(e){this.render(e)}onCreateEnd(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.clearSelect(),this.selectItems([U(this.parent.hasId?"id":"name",this.parent.createdItem)]),this.parent.createdItem=null,this.parent.largeiconsviewModule.element.focus())}onSelectedData(){"largeiconsview"===this.parent.activeModule&&this.updateSelectedData()}onDeleteInit(){"largeiconsview"===this.parent.activeModule&&u6(this.parent,this.parent.selectedItems,this.parent.path,"delete")}onDeleteEnd(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.parent.setProperties({selectedItems:[]},!0),this.clearSelect())}onRefreshEnd(e){"LargeIcons"===this.parent.view&&this.onLayoutChange(e)}onRenameInit(){"largeiconsview"===this.parent.activeModule&&1===this.parent.selectedItems.length&&this.updateRenameData()}onPathChanged(e){this.parent.isCut=!1,""===this.parent.breadcrumbbarModule.searchObj.element.value&&(this.parent.searchedItems=[]),"LargeIcons"===this.parent.view&&(Kf(this.parent),this.parent.setProperties({selectedItems:[]},!0),this.onLayoutChange(e),this.parent.renamedItem&&(this.clearSelect(),this.addSelection(this.parent.renamedItem),this.parent.renamedItem=null))}onOpenInit(e){"largeiconsview"===this.parent.activeModule&&this.doOpenAction(e.target)}onHideLayout(){"LargeIcons"!==this.parent.view&&this.element&&this.element.classList.add(U_)}onSelectAllInit(){if("LargeIcons"===this.parent.view){this.startItem=this.getFirstItem();const e=this.getLastItem();this.doSelection(e,{ctrlKey:!0,shiftKey:!0}),this.isInteraction=!0,this.isInteracted=!0}}onClearAllInit(){"LargeIcons"===this.parent.view&&(this.clearSelection(),this.isInteraction=!0,this.isInteracted=!0)}onBeforeRequest(){this.isRendered=!1}onAfterRequest(){this.isRendered=!0}onSearch(e){"LargeIcons"===this.parent.view&&(this.parent.setProperties({selectedItems:[]},!0),this.parent.notify(dd,{}),this.parent.searchedItems=e.files,this.onLayoutChange(e))}onLayoutRefresh(){"LargeIcons"===this.parent.view&&this.adjustHeight()}onUpdateSelectionData(){"LargeIcons"===this.parent.view&&this.updateSelectedData()}onPathColumn(){"LargeIcons"===this.parent.view&&!f(this.listObj)&&""===this.parent.breadcrumbbarModule.searchObj.element.value&&!this.parent.isFiltered&&"filterPath"===this.parent.sortBy&&(this.parent.sortBy="name",this.parent.notify(SS,{}))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(U1,this.onPathColumn),this.parent.off(Bp,this.onFinalizeEnd),this.parent.off(PC,this.onCreateEnd),this.parent.off(ES,this.onSelectedData),this.parent.off(q_,this.onDeleteInit),this.parent.off(FC,this.onDeleteEnd),this.parent.off(NC,this.onRefreshEnd),this.parent.off(cd,this.onPathChanged),this.parent.off(py,this.onLayoutChange),this.parent.off(V1,this.onSearch),this.parent.off(Y_,this.onOpenInit),this.parent.off(BC,this.onPathChanged),this.parent.off(zr,this.onPropertyChanged),this.parent.off(Rg,this.onMethodCall),this.parent.off(H1,this.onActionFailure),this.parent.off(xS,this.onRenameInit),this.parent.off(Dg,this.onPathChanged),this.parent.off(j1,this.onHideLayout),this.parent.off(z1,this.onSelectAllInit),this.parent.off(kF,this.onClearAllInit),this.parent.off(Z_,this.onMenuItemData),this.parent.off($_,this.onBeforeRequest),this.parent.off(wS,this.onAfterRequest),this.parent.off(G_,this.splitterResizeHandler),this.parent.off(W_,this.resizeHandler),this.parent.off(_S,this.onpasteInit),this.parent.off(kg,this.onpasteEnd),this.parent.off(X_,this.oncutCopyInit),this.parent.off(HC,this.onDropInit),this.parent.off(Gf,this.onDetailsInit),this.parent.off(K_,this.onLayoutRefresh),this.parent.off(VC,this.onDropPath),this.parent.off(AF,this.onUpdateSelectionData),this.parent.off(DF,this.onPathChanged))}addEventListener(){this.parent.on(U1,this.onPathColumn,this),this.parent.on(Bp,this.onFinalizeEnd,this),this.parent.on(PC,this.onCreateEnd,this),this.parent.on(NC,this.onRefreshEnd,this),this.parent.on(ES,this.onSelectedData,this),this.parent.on(cd,this.onPathChanged,this),this.parent.on(q_,this.onDeleteInit,this),this.parent.on(_S,this.onpasteInit,this),this.parent.on(FC,this.onDeleteEnd,this),this.parent.on(py,this.onLayoutChange,this),this.parent.on(V1,this.onSearch,this),this.parent.on(Y_,this.onOpenInit,this),this.parent.on(xS,this.onRenameInit,this),this.parent.on(Dg,this.onPathChanged,this),this.parent.on(BC,this.onPathChanged,this),this.parent.on(zr,this.onPropertyChanged,this),this.parent.on(Rg,this.onMethodCall,this),this.parent.on(H1,this.onActionFailure,this),this.parent.on(j1,this.onHideLayout,this),this.parent.on(z1,this.onSelectAllInit,this),this.parent.on(kF,this.onClearAllInit,this),this.parent.on(Z_,this.onMenuItemData,this),this.parent.on($_,this.onBeforeRequest,this),this.parent.on(wS,this.onAfterRequest,this),this.parent.on(HC,this.onDropInit,this),this.parent.on(Gf,this.onDetailsInit,this),this.parent.on(G_,this.splitterResizeHandler,this),this.parent.on(W_,this.resizeHandler,this),this.parent.on(kg,this.onpasteEnd,this),this.parent.on(X_,this.oncutCopyInit,this),this.parent.on(K_,this.onLayoutRefresh,this),this.parent.on(VC,this.onDropPath,this),this.parent.on(AF,this.onUpdateSelectionData,this),this.parent.on(DF,this.onPathChanged,this)}onActionFailure(){this.isInteraction=!0,this.isInteracted=!0}onMenuItemData(e){if(this.parent.activeModule===this.getModuleName()){const t=B(e.target,"li");this.parent.itemData=[this.getItemObject(t)]}}onDetailsInit(){this.parent.activeModule===this.getModuleName()&&(0!==this.parent.selectedItems.length?this.updateSelectedData():this.parent.itemData=[U(this.parent.pathId[this.parent.pathId.length-1],this.parent.feParent)])}onpasteInit(){this.parent.activeModule===this.getModuleName()&&(this.parent.itemData=""===this.parent.folderPath?[ud(this.parent)]:[this.getItemObject(X(".e-active",this.element))])}oncutCopyInit(){if(this.parent.activeModule===this.getModuleName()){const e=this.element.querySelectorAll("."+hd);this.parent.activeRecords=[],this.parent.activeElements=[];for(let t=0;t<e.length;t++)this.parent.activeElements.push(e[t]),this.parent.activeRecords.push(this.getItemObject(e[t]))}}onpasteEnd(e){"LargeIcons"===this.parent.view&&(this.isPasteOperation=!0,(this.parent.path===this.parent.destinationPath||this.parent.path===function fX(n,e){const t=U(n.hasId?"id":"name",e.cwd)+"/",i=U(n.hasId?"filterId":"filterPath",e.cwd);return f(i)?n.path+t:""===i?n.hasId?t:"/":i.replace(/\\/g,"/")+t}(this.parent,e))&&this.onPathChanged(e))}onDropPath(e){"LargeIcons"===this.parent.view&&(this.isPasteOperation=!0,this.onPathChanged(e))}onPropertyChanged(e){let t;if(e.module===this.getModuleName()||"common"===e.module)for(const i of Object.keys(e.newProp))switch(i){case"allowDragAndDrop":this.createDragObj();break;case"height":this.adjustHeight();break;case"selectedItems":this.isInteraction=!1,this.isInteracted=!1,t=f(this.parent.selectedItems)?[]:this.parent.selectedItems.slice(0),t=this.parent.allowMultiSelection?t:t.slice(t.length-1),this.parent.setProperties({selectedItems:[]},!0),this.onClearAllInit(),t.length&&this.selectItems(t),this.parent.setProperties({selectedItems:this.parent.selectedItems},!0),this.isInteraction=!0,this.isInteracted=!0;break;case"showThumbnail":IS(this.parent);break;case"showFileExtension":case"showHiddenItems":ua(this.parent,cd,this.parent.path);break;case"allowMultiSelection":if("LargeIcons"!==this.parent.view)break;IS(this.parent);break;case"view":fy(this.parent,"LargeIcons")}}destroy(){this.parent.isDestroyed||(this.removeEventListener(),this.listObj&&this.unWireEvents())}wireEvents(){this.wireClickEvent(!0),this.keyboardModule=new Gn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keyup"}),this.keyboardDownModule=new Gn(this.element,{keyAction:this.keydownActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),k.add(this.element,"mouseover",this.onMouseOver,this)}unWireEvents(){this.wireClickEvent(!1),k.remove(this.element,"mouseover",this.onMouseOver),this.keyboardModule.destroy(),this.keyboardDownModule.destroy()}onMouseOver(e){const t=B(e.target,".e-list-item");Kf(this.parent,"hover"),null!==t&&t.classList.add(xF)}wireClickEvent(e){if(e){const t=this;this.clickObj=new Lr(this.element,{tap:i=>{i.originalEvent.preventDefault(),t.parent.isDevice?(t.tapCount=i.tapCount,t.tapEvent=i,setTimeout(()=>{t.tapCount>0&&t.doTapAction(t.tapEvent),t.tapCount=0},350)):2===i.tapCount&&3!==i.originalEvent.which?t.dblClickHandler(i):t.clickHandler(i)},tapHold:i=>{t.parent.isDevice&&(t.multiSelect=!!t.parent.allowMultiSelection,t.parent.allowMultiSelection&&z([t.parent.element],A1),t.clickHandler(i))}})}else this.clickObj&&this.clickObj.destroy()}doTapAction(e){const t=e.originalEvent.target,i=B(t,"."+Tg);this.multiSelect||t.classList.contains(L1)||f(i)?this.clickHandler(e):(this.parent.isFile=!1,this.updateType(i),this.parent.isFile?2===e.tapCount?(this.clickHandler(e),this.dblClickHandler(e)):this.clickHandler(e):this.dblClickHandler(e))}clickHandler(e){const t=e.originalEvent.target;Kf(this.parent,"hover"),this.doSelection(t,e.originalEvent),this.parent.activeModule="largeiconsview"}doSelection(e,t){const i=B(e,"."+Tg),s=e.classList;this.parent.isFile=!1;let r="select";if(3!==t.which||f(i)||!i.classList.contains(hd)){if(f(i))this.clearSelection();else if(this.parent.allowMultiSelection&&i.classList.contains(hd)&&(t.ctrlKey||e.classList.contains(_F))&&(r="unselect"),!0!==this.triggerSelection(r,i).cancel){if((!this.parent.allowMultiSelection||!this.multiSelect&&t&&!t.ctrlKey)&&!s.contains("e-frame")&&(this.updateType(i),this.clearSelect()),this.parent.allowMultiSelection&&t.shiftKey){t&&t.ctrlKey||this.clearSelect(),this.startItem||(this.startItem=i);const a=this.itemList.indexOf(this.startItem),l=this.itemList.indexOf(i);if(a>l)for(let h=a;h>=l;h--)this.addActive(this.itemList[h]);else for(let h=a;h<=l;h++)this.addActive(this.itemList[h]);this.addFocus(this.itemList[l])}else this.startItem=i,this.parent.allowMultiSelection&&i.classList.contains(hd)?this.removeActive(i):this.addActive(i),this.addFocus(i);0===this.parent.selectedItems.length&&this.resetMultiSelect(),this.parent.notify(dd,{}),this.triggerSelect(r,i)}f(i)||this.updateType(i)}else this.updateType(i)}dblClickHandler(e){this.parent.activeModule="largeiconsview",this.doOpenAction(e.originalEvent.target)}clearSelection(){this.clearSelect(),this.resetMultiSelect(),this.parent.notify(dd,{})}resetMultiSelect(){this.multiSelect=!1,W([this.parent.element],A1)}doOpenAction(e){if(f(e))return;const t=B(e,"."+Tg);if(this.parent.isFile=!1,!f(t)){this.updateType(t);const i=this.getItemObject(t);if(!BF(i))return void $o(this.parent,i,"read");this.parent.trigger("fileOpen",{cancel:!1,fileDetails:i,module:"LargeIconsView"},r=>{if(!r.cancel){const o=U("name",i);if(this.parent.isFile){if(PF(i)===J3){const l=uX(this.parent,i);!function ime(n,e,t){const i=Be("div",{className:"e-image-wrap"}),s=Be("img",{className:"e-image",attrs:{src:t,alt:e}});i.appendChild(s),f(n.viewerObj)?(n.viewerObj=new Hs({header:e,content:i,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!0,isModal:!0,width:"350px",height:"350px",target:n.popupTarget?n.popupTarget:"#"+n.element.id,cssClass:gy(n,n.isMobile?K3:dy),locale:n.locale,enableResize:!0,allowDragging:!0,enableHtmlSanitizer:n.enableHtmlSanitizer,position:{X:"center",Y:"center"},enableRtl:n.enableRtl,open:$Ne.bind(this,n),close:()=>{WF(n,n.viewerObj,"Image Preview")},beforeOpen:r=>{_X(n,n.viewerObj,r,"Image Preview")},beforeClose:r=>{qF(n,n.viewerObj,r,"Image Preview")},resizing:TX.bind(this,n),resizeStop:TX.bind(this,n)}),n.viewerObj.isStringTemplate=!0,n.viewerObj.appendTo("#"+n.element.id+tfe)):(n.viewerObj.refresh(),n.viewerObj.header=e,n.viewerObj.content=i,n.viewerObj.enableRtl=n.enableRtl,n.viewerObj.dataBind(),n.viewerObj.show())}(this.parent,o,l)}}else{if(""!==this.parent.breadcrumbbarModule.searchObj.element.value||this.parent.isFiltered)!function Ofe(n,e){n.notify(t6,{selectedNode:n.pathId[n.pathId.length-1]}),n.originalPath=FF(n,e,n.path),ua(n,n.path!==n.originalPath?CS:Bp,n.path)}(this.parent,i);else{const l=U("id",i),h=this.parent.path+(f(l)?o:l)+"/";this.parent.setProperties({path:h},!0),this.parent.pathNames.push(o),this.parent.pathId.push(U("_fm_id",i)),this.parent.itemData=[i],function kfe(n){ua(n,BC,n.path)}(this.parent)}this.parent.isFiltered=!1,this.parent.setProperties({selectedItems:[]},!0)}}})}}updateType(e){const t=X("."+O1,e);this.parent.isFile=!!f(t)}keydownActionHandler(e){if(this.isRendered)switch(e.action){case"end":case"home":case"moveDown":case"moveLeft":case"moveRight":case"moveUp":case"ctrlEnd":case"shiftEnd":case"csEnd":case"ctrlHome":case"shiftHome":case"csHome":case"ctrlDown":case"shiftDown":case"csDown":case"ctrlLeft":case"shiftLeft":case"csLeft":case"ctrlRight":case"shiftRight":case"csRight":case"space":case"ctrlSpace":case"shiftSpace":case"csSpace":case"ctrlA":case"enter":case"altEnter":case"esc":case"del":case"shiftdel":case"ctrlC":case"ctrlV":case"ctrlX":case"f2":case"ctrlD":e.preventDefault()}}keyActionHandler(e){if(!this.isRendered)return;const t=this.getFocusedItem(),i=this.getFirstItem(),s=this.getLastItem();switch(e.action){case"end":this.navigateItem(s);break;case"home":this.navigateItem(i);break;case"tab":f(t)?f(i)||this.addFocus(i):this.addFocus(t);break;case"moveDown":this.navigateDown(t,!0);break;case"moveLeft":this.navigateRight(t,!1);break;case"moveRight":this.navigateRight(t,!0);break;case"moveUp":this.navigateDown(t,!1);break;case"ctrlEnd":case"shiftEnd":case"csEnd":this.csEndKey(s,e);break;case"ctrlHome":case"shiftHome":case"csHome":this.csHomeKey(i,e);break;case"ctrlDown":case"shiftDown":case"csDown":this.csDownKey(t,e);break;case"ctrlLeft":case"shiftLeft":case"csLeft":this.csLeftKey(t,e);break;case"ctrlRight":case"shiftRight":case"csRight":this.csRightKey(t,e);break;case"ctrlUp":case"shiftUp":case"csUp":this.csUpKey(t,e);break;case"space":this.spaceKey(t);break;case"ctrlSpace":case"shiftSpace":case"csSpace":f(t)||this.doSelection(t,e);break;case"ctrlA":this.ctrlAKey(i,s);break;case"enter":this.doOpenAction(this.parent.visitedItem?this.parent.visitedItem:this.getVisitedItem());break;case"altEnter":this.parent.notify(Gf,{}),zF(this.parent,this.parent.selectedItems,this.parent.path,"details");break;case"esc":!function dX(n){n.isCut&&(Kf(n),n.selectedNodes=[],n.actionRecords=[],n.enablePaste=!1,n.notify(RF,{}))}(this.parent);break;case"del":case"shiftdel":this.performDelete();break;case"ctrlC":MF(this.parent);break;case"ctrlV":this.parent.folderPath="",NF(this.parent);break;case"ctrlX":OF(this.parent);break;case"f2":this.performRename();break;case"ctrlD":this.doDownload()}}doDownload(){this.updateSelectedData(),function Hfe(n){const e=n.itemData;for(let t=0;t<e.length;t++)if(!HF(e[t]))return void $o(n,e[t],LF);n.selectedItems.length>0&&jF(n,n.path,n.selectedItems)}(this.parent)}performDelete(){if(this.parent.selectedItems&&this.parent.selectedItems.length>0){this.updateSelectedData();const e=this.parent.itemData;for(let t=0;t<e.length;t++)if(!pd(e[t]))return void $o(this.parent,e[t],$f);jl(this.parent,"Delete")}}performRename(){1===this.parent.selectedItems.length&&(this.updateRenameData(),h6(this.parent))}updateRenameData(){const e=X("."+Tg+"."+hd,this.element),t=this.getItemObject(e);l6(this.parent,t)}getVisitedItem(){const t=this.getIndexes([this.parent.selectedItems[this.parent.selectedItems.length-1]],this.parent.hasId);return this.itemList[t[0]]}getFocusedItem(){return X("."+Tg+"."+EF,this.element)}getActiveItem(){return X("."+Tg+"."+hd,this.element)}getFirstItem(){return this.itemList[0]}getLastItem(){return this.itemList[this.itemList.length-1]}navigateItem(e){this.setFocus(e)}navigateDown(e,t){const i=this.getNextItem(e,t,this.perRow);this.setFocus(i)}navigateRight(e,t){const i=this.getNextItem(e,t);this.setFocus(i)}getNextItem(e,t,i){if(f(e))return this.getFocusedItem()||this.getActiveItem()||this.getFirstItem();let r,s=this.itemList.indexOf(e);do{if(s=t?i?s+i:s+1:i?s-i:s-1,r=this.itemList[s],f(r))return e}while(!Xr(r));return r}setFocus(e){f(e)||!0!==this.triggerSelection("select",e).cancel&&(this.startItem=e,this.clearSelect(),this.addActive(e),this.addFocus(e),this.parent.notify(dd,{}),this.triggerSelect("select",e))}spaceKey(e){!f(e)&&!e.classList.contains(hd)&&!0!==this.triggerSelection("select",e).cancel&&(this.addActive(e),this.parent.notify(dd,{}),this.triggerSelect("select",e))}ctrlAKey(e,t){if(this.parent.allowMultiSelection&&!f(e)){this.startItem=e;const i={ctrlKey:!0,shiftKey:!0},s=this.element.querySelector("."+L1),r=s.scrollTop,o=this.getFocusedItem();this.doSelection(t,i),s.scrollTop=r,f(o)||this.addFocus(o)}}csEndKey(e,t){this.parent.allowMultiSelection?f(e)||("ctrlEnd"===t.action?this.addFocus(e):this.doSelection(e,t)):this.navigateItem(e)}csHomeKey(e,t){this.parent.allowMultiSelection?f(e)||("ctrlHome"===t.action?this.addFocus(e):this.doSelection(e,t)):this.navigateItem(e)}csDownKey(e,t){if(this.parent.allowMultiSelection){const i=this.getNextItem(e,!0,this.perRow);f(i)||("ctrlDown"===t.action?this.addFocus(i):this.doSelection(i,t))}else this.navigateDown(e,!0)}csLeftKey(e,t){if(this.parent.allowMultiSelection){const i=this.getNextItem(e,!1);f(i)||("ctrlLeft"===t.action?this.addFocus(i):this.doSelection(i,t))}else this.navigateRight(e,!1)}csRightKey(e,t){if(this.parent.allowMultiSelection){const i=this.getNextItem(e,!0);f(i)||("ctrlRight"===t.action?this.addFocus(i):this.doSelection(i,t))}else this.navigateRight(e,!0)}csUpKey(e,t){if(this.parent.allowMultiSelection){const i=this.getNextItem(e,!1,this.perRow);f(i)||("ctrlUp"===t.action?this.addFocus(i):this.doSelection(i,t))}else this.navigateDown(e,!1)}addActive(e){f(e)||(e.classList.contains(hd)||(this.parent.selectedItems.push(this.getDataName(e)),this.parent.setProperties({selectedItems:this.parent.selectedItems},!0),z([e],[hd]),e.setAttribute("aria-selected","true"),this.checkState(e,!0)),this.parent.visitedItem=e)}removeActive(e){if(!f(e)){W([e],[hd]),this.parent.allowMultiSelection?e.setAttribute("aria-selected","false"):e.removeAttribute("aria-selected"),this.checkState(e,!1);const t=this.parent.selectedItems.indexOf(this.getDataName(e));t>-1&&(this.parent.selectedItems.splice(t,1),this.parent.setProperties({selectedItems:this.parent.selectedItems},!0)),this.parent.visitedItem=null}}getDataName(e){const t=this.getItemObject(e);return TS(this.parent,t)}addFocus(e){this.element.setAttribute("tabindex","-1");const t=this.getFocusedItem();t&&(t.removeAttribute("tabindex"),W([t],[EF])),z([e],[EF]),e.setAttribute("tabindex","0"),e.focus()}checkState(e,t){if(!this.parent.allowMultiSelection)return;const i=X(".e-frame",e);f(i)||(t?i.classList.contains(_F)||(z([i],_F),B(i,"."+X3).setAttribute("aria-checked","true")):i.classList.contains(_F)&&(W([i],_F),B(i,"."+X3).setAttribute("aria-checked","false")))}clearSelect(){const e=Array.prototype.slice.call(bt("."+hd,this.listElements));let t;if(0!==e.length){if(t=this.triggerSelection("unselect",e[0]),!0!==t.cancel)for(let i=0,s=e.length;i<s;i++)this.removeActive(e[i]);this.triggerSelect("unselect",e[0])}}resizeHandler(){this.getItemCount(),f(this.listObj)||this.adjustHeight()}splitterResizeHandler(){this.getItemCount()}getItemCount(){let e=1;if(this.itemList)for(let t=0,i=this.itemList.length-1;t<i&&this.itemList[t].getBoundingClientRect().top===this.itemList[t+1].getBoundingClientRect().top;t++)e++;this.perRow=e}triggerSelection(e,t){const s={action:e,fileDetails:this.getItemObject(t),isInteracted:this.isInteraction,cancel:!1,target:t};return this.parent.trigger("fileSelection",s),this.isInteraction=!0,s}triggerSelect(e,t){const i=this.getItemObject(t);this.parent.visitedData=i,this.parent.trigger("fileSelect",{action:e,fileDetails:i,isInteracted:this.isInteracted}),this.isInteracted=!0}selectItems(e){const t=this.getIndexes(e,this.parent.hasId);for(let i=0,s=t.length;i<s;i++)this.doSelection(this.itemList[t[i]],{ctrlKey:!0,shiftKey:!1})}getIndexes(e,t){const i=[],s=t?"id":"name";for(let r=0,o=this.items.length;r<o;r++)-1!==e.indexOf(U(s,this.items[r]))&&i.push(r);return i}getItemObject(e){const t=this.itemList.indexOf(e);return this.items[t]}addSelection(e){let t=[];if(this.parent.hasId)t=new ut(this.items).executeLocal((new Ut).where("id","equal",this.parent.renamedId,!1));else{const i=new ut(this.items).executeLocal((new Ut).where("name","equal",U("name",e),!1));i.length>0&&(t=new ut(i).executeLocal((new Ut).where("filterPath","equal",this.parent.filterPath,!1)))}if(t.length>0){const i=this.items.indexOf(t[0]);this.doSelection(this.itemList[i],{ctrlKey:!0,shiftKey:!1})}}updateSelectedData(){const e=[],t=bt("."+Tg+"."+hd,this.element);for(let i=0;i<t.length;i++)e[i]=this.getItemObject(t[i]);this.parent.itemData=e}onMethodCall(e){if("LargeIcons"===this.parent.view)switch(U("action",e)){case"deleteFiles":this.deleteFiles(U("ids",e));break;case"downloadFiles":this.downloadFiles(U("ids",e));break;case"openFile":this.openFile(U("id",e));break;case"renameFile":this.isInteraction=!1,this.isInteracted=!1,this.renameFile(U("id",e),U("newName",e));break;case"createFolder":this.isInteraction=!1,this.isInteracted=!1;break;case"clearSelection":this.isInteraction=!1,this.isInteracted=!1,this.onClearAllInit();break;case"selectAll":this.isInteraction=!1,this.isInteracted=!1,this.onSelectAllInit()}}getItemsIndex(e){const t=[],s=this.parent.hasId?"id":"name";if(this.parent.hasId||""===this.parent.breadcrumbbarModule.searchObj.element.value&&!this.parent.isFiltered)for(let r=0,o=this.items.length;r<o;r++)-1!==e.indexOf(U(s,this.items[r]))&&t.push(r);else for(let r=0,o=this.items.length;r<o;r++){const a=U("filterPath",this.items[r])+U("name",this.items[r]);(-1!==e.indexOf(a)||-1!==e.indexOf(U(s,this.items[r])))&&t.push(r)}return t}deleteFiles(e){if(this.parent.activeModule="largeiconsview",f(e))return void this.performDelete();const t=this.getItemsIndex(e);if(0===t.length)return;const i=[],s=[];for(let r=0;r<t.length;r++)i[r]=this.items[t[r]],s[r]=TS(this.parent,i[r]);!function Vfe(n,e,t){for(let i=0;i<e.length;i++)if(!pd(e[i]))return void $o(n,e[i],$f);n.itemData=e,u6(n,t,n.path,"delete")}(this.parent,i,s)}downloadFiles(e){if(f(e))return void this.doDownload();const t=this.getItemsIndex(e);if(0===t.length)return;const i=[],s=[];for(let r=0;r<t.length;r++)i[r]=this.items[t[r]],s[r]=TS(this.parent,i[r]);!function zfe(n,e,t){for(let i=0;i<e.length;i++)if(!HF(e[i]))return void $o(n,e[i],LF);n.itemData=e,t.length>0&&jF(n,n.path,t)}(this.parent,i,s)}openFile(e){if(f(e))return;const t=this.getItemsIndex([e]);t.length>0&&this.doOpenAction(this.itemList[t[0]])}renameFile(e,t){if(this.parent.activeModule="largeiconsview",f(e))return void this.performRename();const i=this.getItemsIndex([e]);i.length>0&&(l6(this.parent,this.items[i[0]]),f(t)?h6(this.parent):pd(this.parent.itemData[0])?VF(this.parent,this.parent.path,t):$o(this.parent,this.parent.itemData[0],$f))}}class YNe{constructor(e){this.addressPath="",this.addressBarLink="",this.searchTimer=null,this.searchWrapWidth=null,this.parent=e,this.keyConfigs={enter:"enter"},this.render()}onPropertyChanged(e){if(e.module===this.getModuleName()||"common"===e.module)for(const t of Object.keys(e.newProp)){const i=e.newProp.searchSettings;"searchSettings"===t&&(f(i.allowSearchOnTyping)||this.searchEventBind(i.allowSearchOnTyping),this.parent.breadcrumbbarModule.searchObj.value&&""!==this.parent.breadcrumbbarModule.searchObj.value&&(f(i.allowSearchOnTyping)||!f(i.filterType)||!f(i.ignoreCase))&&a6(this.parent,this.parent.breadcrumbbarModule.searchObj.value,!1))}}render(){this.addEventListener()}onPathChange(){const e=this.parent.pathNames,t=this.parent.path.split("/"),i=this.parent.createElement("ul",{className:"e-addressbar-ul"});let s=null;const r=e.length;if(e.length>0){let o="";for(let h=0;h<r;h++){let c=null;s=this.parent.createElement("li",{className:"e-address-list-item"});for(let m=0;m<=h;m++)o=o+t[m]+"/";if(s.setAttribute("data-utext",o),0!==h){const m=Be("span",{className:"e-icons"});s.appendChild(m)}r-h!=1?(c=Be("a",{className:Z3}),s.setAttribute("tabindex","0")):c=Be("span",{className:Z3}),o="",c.innerText=e[h],s.appendChild(c),i.appendChild(s)}const a=this.parent.breadCrumbBarNavigation.querySelector(".e-addressbar-ul");f(a)||(f(this.subMenuObj)||this.subMenuObj.destroy(),Yt(a));const l=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap");l?this.parent.breadCrumbBarNavigation.appendChild(i):this.parent.breadCrumbBarNavigation.insertBefore(i,l),this.updateBreadCrumbBar(i)}}updateBreadCrumbBar(e){const t=e.querySelectorAll("li"),i=this.parent.breadCrumbBarNavigation.querySelector(".e-addressbar-ul"),s=window.getComputedStyle(i,null),r=parseFloat(s.getPropertyValue("padding-right")),o=parseFloat(s.getPropertyValue("padding-left"));let a=i.offsetWidth-r-o;const l=this.parent.createElement("ul",{className:"e-addressbar-ul"});let h=0;const c=[];for(let D=0;D<t.length;D++){const L=t[D].clientWidth;c.push(L),h+=L}f(i)||Yt(i);const m=this.parent.createElement("div");m.setAttribute("class","e-search-wrap");const v=Be("input",{id:this.parent.element.id+"_search",attrs:{autocomplete:"off","aria-label":Kt(this.parent,"Search")}});if(m.appendChild(v),f(this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap .e-input"))){this.parent.breadCrumbBarNavigation.appendChild(m);const D=Be("span",{className:"e-icons e-fe-search"});k.add(D,"click",this.onShowInput,this),v.parentElement.insertBefore(D,v),this.searchObj=new Uo({value:"",showClearButton:!0,placeholder:Kt(this.parent,"Search"),focus:this.onFocus.bind(this),blur:this.onBlur.bind(this)}),this.searchObj.appendTo("#"+this.parent.element.id+"_search"),this.searchEventBind(this.parent.searchSettings.allowSearchOnTyping),k.add(this.searchObj.element.nextElementSibling,"mousedown",this.searchChangeHandler.bind(this),this),k.add(this.searchObj.element,"keyup",this.onKeyUp.bind(this),this)}const E=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap");if(a-=this.searchWrapWidth?this.searchWrapWidth:E.offsetWidth,h>a){let D=t.length;for(;D--;){const L=a-c[D];if(!(L>40)){const N=[];for(let Q=0;Q<=D;Q++){const le=t[Q];N.push({text:le.innerText,utext:le.getAttribute("data-utext")})}const V=this.parent.createElement("li",{className:"e-breadcrumb-menu"}),ie=this.parent.createElement("button",{className:"e-breadcrumb-submenu"});V.appendChild(ie),l.insertBefore(V,l.querySelector("li")),this.subMenuObj=new go({items:N,cssClass:"e-caret-hide e-submenu",iconCss:"e-icons e-fe-breadcrumb",iconPosition:"Top",enableHtmlSanitizer:this.parent.enableHtmlSanitizer,beforeItemRender:this.addSubMenuAttributes.bind(this),select:this.subMenuSelectOperations.bind(this)}),this.subMenuObj.isStringTemplate=!0,this.subMenuObj.appendTo(ie);break}l.insertBefore(t[D],l.querySelector("li")),a=L}this.parent.breadCrumbBarNavigation.insertBefore(l,E)}else this.parent.breadCrumbBarNavigation.insertBefore(e,E)}onFocus(){B(this.searchObj.element,".e-search-wrap").classList.add("e-focus")}onKeyUp(){this.parent.notify(U1,{args:this.parent})}onBlur(){B(this.searchObj.element,".e-search-wrap").classList.remove("e-focus")}subMenuSelectOperations(e){this.addressPathClickHandler({target:e.element})}addSubMenuAttributes(e){e.element.setAttribute("data-utext",U("utext",e.item));const t=this.parent.createElement("a",{className:"e-list-text"});e.element.appendChild(t)}searchEventBind(e){e?(this.searchObj.input=this.searchChangeHandler.bind(this),this.searchObj.change=null):(this.searchObj.change=this.searchChangeHandler.bind(this),this.searchObj.input=null)}searchChangeHandler(e){f(e.value)||(this.parent.isFiltered=!1,this.parent.searchSettings.allowSearchOnTyping?(window.clearTimeout(this.searchTimer),this.searchTimer=window.setTimeout(()=>{a6(this.parent,e.value,!1)},300)):a6(this.parent,e.value,!1))}addressPathClickHandler(e){const t=e.target;if("LI"===t.nodeName||"A"===t.nodeName){const i="LI"===t.nodeName?t.children[0]:t;if(!f(i)){this.parent.isFiltered=!1;const s=this.updatePath(i);this.parent.itemData=[U(this.parent.pathId[this.parent.pathId.length-1],this.parent.feParent)],this.triggerFileOpen(this.parent.itemData[0]),ua(this.parent,cd,s),this.parent.notify(s6,{module:"treeview",selectedNode:this.parent.pathId[this.parent.pathId.length-1]})}}}triggerFileOpen(e){const t={cancel:!1,fileDetails:e,module:"BreadCrumbBar"};delete t.cancel,this.parent.trigger("fileOpen",t)}onShowInput(){if(this.parent.isMobile)if(this.parent.element.classList.contains(UZ))W([this.parent.element],UZ),this.searchWrapWidth=null;else{const e=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap");this.searchWrapWidth=e.offsetWidth,z([this.parent.element],UZ),this.searchObj.element.focus()}}updatePath(e){const i=B(e,"li").getAttribute("data-utext");this.addressBarLink=i;const s=this.addressBarLink.split("/"),r=this.parent.pathId,o=this.parent.pathNames;this.parent.pathId=[],this.parent.pathNames=[];let a="";for(let l=0,h=s.length-1;l<h;l++)this.parent.pathId.push(r[l]),this.parent.pathNames.push(o[l]),a+=s[l]+"/";return this.parent.setProperties({path:a},!0),a}onUpdatePath(){this.onPathChange(),this.removeSearchValue()}onCreateEnd(){this.onPathChange()}onRenameEnd(){this.onPathChange()}onDeleteEnd(){this.onUpdatePath()}removeSearchValue(){this.parent.isFiltered=!1,this.searchObj&&(""!==this.searchObj.value||""!==this.searchObj.element.value)&&(this.searchObj.value="",this.searchObj.element.value="",this.searchObj.dataBind())}onResize(){this.onPathChange()}onPasteEnd(){this.onPathChange()}addEventListener(){this.keyboardModule=new Gn(this.parent.breadCrumbBarNavigation,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.parent.on(zr,this.onPropertyChanged,this),k.add(this.parent.breadCrumbBarNavigation,"click",this.addressPathClickHandler,this),this.parent.on(uy,this.destroy,this),this.parent.on(cd,this.onUpdatePath,this),this.parent.on(Bp,this.onUpdatePath,this),this.parent.on(NC,this.onUpdatePath,this),this.parent.on(BC,this.onUpdatePath,this),this.parent.on(PC,this.onCreateEnd,this),this.parent.on(Dg,this.onRenameEnd,this),this.parent.on(FC,this.onDeleteEnd,this),this.parent.on(G_,this.onResize,this),this.parent.on(kg,this.onPasteEnd,this),this.parent.on(W_,this.onResize,this),this.parent.on(iX,this.onSearchTextChange,this),this.parent.on(HC,this.onDropInit,this),this.parent.on(K_,this.onResize,this),this.parent.on(VC,this.onPathChange,this)}keyActionHandler(e){"enter"===e.action&&this.addressPathClickHandler(e)}removeEventListener(){this.keyboardModule.destroy(),this.parent.off(cd,this.onUpdatePath),this.parent.off(Bp,this.onUpdatePath),this.parent.off(NC,this.onUpdatePath),this.parent.off(BC,this.onUpdatePath),this.parent.off(kg,this.onPasteEnd),this.parent.off(PC,this.onCreateEnd),this.parent.off(Dg,this.onRenameEnd),this.parent.off(FC,this.onDeleteEnd),this.parent.off(G_,this.onResize),this.parent.off(W_,this.onResize),this.parent.off(iX,this.onSearchTextChange),this.parent.off(HC,this.onDropInit),this.parent.off(K_,this.onResize),this.parent.off(VC,this.onPathChange)}onDropInit(e){if(this.parent.targetModule===this.getModuleName()){const t=e.target.closest("li");this.parent.dropPath=this.updatePath(t.children[0]),this.parent.dropData=U(this.parent.pathId[this.parent.pathId.length-1],this.parent.feParent),this.triggerFileOpen(this.parent.dropData),this.parent.notify(s6,{module:"treeview",selectedNode:this.parent.pathId[this.parent.pathId.length-1]})}}getModuleName(){return"breadcrumbbar"}destroy(){this.parent.isDestroyed||(this.removeEventListener(),f(this.subMenuObj)||this.subMenuObj.destroy(),f(this.searchObj)||this.searchObj.destroy())}onSearchTextChange(e){this.searchObj.element.placeholder=null!=this.parent.searchSettings.placeholder?this.parent.searchSettings.placeholder:Kt(this.parent,"Search")+" "+e.cwd.name}}class sme{constructor(e){this.currentItems=[],this.currentElement=null,this.disabledItems=[],this.parent=e,this.render()}render(){this.keyConfigs={downarrow:"downarrow",uparrow:"uparrown"},this.contextMenu=new eS({enableRtl:this.parent.enableRtl,locale:this.parent.locale,target:"#"+this.parent.element.id,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,beforeItemRender:this.onBeforeItemRender.bind(this),select:this.onSelect.bind(this),beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this),cssClass:gy(this.parent,dy)}),this.contextMenu.isStringTemplate=!0,this.contextMenu.appendTo("#"+this.parent.element.id+nfe),this.addEventListener()}onBeforeItemRender(e){if(e.item.id===this.getMenuId("largeiconsview")){const t=Be("span"),i=e.element;i.insertBefore(t,"LargeIcons"===this.parent.view?i.childNodes[1]:i.childNodes[0]),t.setAttribute("class",B1+" "+P1)}if(e.item.id===this.getMenuId("detailsview")){const t=Be("span"),i=e.element;i.insertBefore(t,"Details"===this.parent.view?i.childNodes[1]:i.childNodes[0]),t.setAttribute("class",N1+" "+P1)}}onBeforeClose(){this.menuTarget=null}onBeforeOpen(e){this.disabledItems=[];let i,s,t=!1,r=!1,o=e.event.target;this.menuTarget=this.targetNodeElement=o,this.currentElement=e.element,o.classList.contains("e-spinner-pane")&&(o=this.parent.navigationpaneModule.activeNode.getElementsByClassName("e-fullrow")[0],this.menuTarget=this.targetNodeElement=o),this.targetElement="Details"===this.parent.view?B(o,"tr.e-row"):o;const a=this.getTargetView(o);if(this.updateActiveModule(),o.classList.contains($Z)||B(o,"th")||B(o,"#"+this.parent.element.id+SF)||B(o,"#"+this.parent.element.id+W3))e.cancel=!0;else if("LargeIcons"!==this.parent.view&&this.targetElement&&this.targetElement.classList.contains("e-emptyrow"))this.setLayoutItem(o);else if(B(o,"."+Np))this.setLayoutItem(o);else if(!o.classList.contains(cfe)&&!o.classList.contains(P1)&&!o.classList.contains("e-caret")){if("LargeIcons"!==this.parent.view||f(B(o,"li"))||B(o,"#"+this.parent.element.id+yF))f(B(o,"tr.e-row"))?B(o,"#"+this.parent.element.id+yF)&&(i=B(o,"li").getAttribute("data-uid"),r=!0):(i=this.targetElement.getAttribute("data-uid"),s=this.parent.detailsviewModule.gridObj.getRowObjectFromUID(i).data,f(this.targetElement.getAttribute("aria-selected"))&&this.parent.detailsviewModule.gridObj.selectRows([parseInt(this.targetElement.getAttribute("aria-rowindex"),10)]),t=!0);else{const m={ctrlKey:!0,shiftKey:!0};B(o,"li").classList.contains("e-active")||this.parent.largeiconsviewModule.doSelection(o,m),s=this.parent.visitedData,t=!0}t?!0===U("isFile",s)?this.setFileItem():this.setFolderItem(!1):r?(this.setFolderItem(!0),i===this.parent.pathId[0]&&this.disabledItems.push("Delete","Rename","Cut","Copy")):"TreeView"===a||"GridView"===a||"LargeIcon"===a?this.setLayoutItem(o):e.cancel=!0}const l=X("#"+this.getMenuId("Paste"),this.contextMenu.element);if(!e.cancel&&!this.parent.enablePaste&&l&&!l.classList.contains("e-disabled")&&this.disabledItems.push("Paste"),e.cancel)return void(this.menuTarget=this.currentElement=null);this.contextMenu.dataBind();let h=!1;(o.classList.contains(cfe)||o.classList.contains(P1)||o.classList.contains("e-caret"))&&(h=!0),this.menuItemData=h?this.menuItemData:this.getMenuItemData();const c={fileDetails:[this.menuItemData],element:e.element,target:o,items:h?e.items:this.contextMenu.items,menuModule:this.contextMenu,cancel:!1,menuType:this.menuType,isSubMenu:h};this.currentItems=c.items,this.parent.trigger("menuOpen",c,m=>{h||(this.contextMenu.dataBind(),this.contextMenu.items=m.items,this.contextMenu.dataBind()),this.enableItems(this.disabledItems,!1,!0),e.cancel=m.cancel,m.cancel&&(this.menuTarget=this.targetNodeElement=this.currentElement=null)})}updateActiveModule(){this.parent.activeModule=B(this.menuTarget,"#"+this.parent.element.id+yF)?"navigationpane":B(this.menuTarget,"#"+this.parent.element.id+vF)?"detailsview":B(this.menuTarget,"#"+this.parent.element.id+CF)?"largeiconsview":this.parent.activeModule}getTargetView(e){return e.classList.contains($Z)?"TreeView":e.classList.contains(F1)?"GridView":e.classList.contains("e-list-parent")||e.classList.contains(Y3)?"LargeIcon":""}getItemIndex(e){const t=this.getMenuId(e);for(let i=0;i<this.currentItems.length;i++)if(this.currentItems[i].id===t||this.currentItems[i].id===e)return i;return-1}disableItem(e){0!==e.length&&(this.disabledItems=this.disabledItems.concat(e))}enableItems(e,t,i){for(let s=0;s<e.length;s++)1===this.checkValidItem(e[s])?this.contextMenu.enableItems([this.getMenuId(e[s])],t,i):2===this.checkValidItem(e[s])&&this.contextMenu.enableItems([e[s]],t,i)}setFolderItem(e){this.menuType="folder",this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.folder.map(t=>t.trim())),this.contextMenu.dataBind(),e?this.disabledItems.push("Open"):1!==this.parent.selectedItems.length&&this.disabledItems.push("Rename","Paste")}setFileItem(){this.menuType="file",this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.file.map(e=>e.trim())),this.contextMenu.dataBind(),1!==this.parent.selectedItems.length&&this.disabledItems.push("Rename")}setLayoutItem(e){this.menuType="layout",this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.layout.map(t=>t.trim())),this.contextMenu.dataBind(),(!this.parent.allowMultiSelection||"LargeIcons"===this.parent.view&&0!==B(e,"#"+this.parent.element.id+CF).getElementsByClassName(Np).length||"Details"===this.parent.view&&0!==B(e,"#"+this.parent.element.id+vF).getElementsByClassName(Np).length)&&this.disabledItems.push("SelectAll"),0===this.parent.selectedNodes.length&&this.disabledItems.push("Paste"),this.contextMenu.dataBind()}checkValidItem(e){return f(X("#"+this.getMenuId(e),this.currentElement))?f(X("#"+e,this.currentElement))?-1:2:1}getMenuItemData(){return"layout"===this.menuType?ud(this.parent):(this.parent.notify(Z_,{target:this.menuTarget}),this.parent.itemData[0])}onSelect(e){if(f(e.item)||!e.item.id)return;const t=e.item.id.substr((this.parent.element.id+"_cm_").length);let i;"refresh"===t||"newfolder"===t||"upload"===t?(i=[ud(this.parent)],this.parent.itemData=i):(this.parent.notify(ES,{}),i="navigationpane"===this.parent.activeModule&&"open"===t?[this.menuItemData]:this.parent.itemData),this.parent.trigger("menuClick",{cancel:!1,element:e.element,fileDetails:i,item:e.item},r=>{let o;if(!r.cancel)switch(t){case"cut":OF(this.parent);break;case"copy":MF(this.parent);break;case"paste":this.parent.folderPath="folder"!==this.menuType||"largeiconsview"!==this.parent.activeModule&&"detailsview"!==this.parent.activeModule?"":FF(this.parent,this.menuItemData,this.parent.path),NF(this.parent);break;case"delete":for(let a=0;a<i.length;a++)if(!pd(i[a]))return void $o(this.parent,i[a],$f);jl(this.parent,"Delete");break;case"download":for(let a=0;a<i.length;a++)if(!HF(i[a]))return void $o(this.parent,i[a],LF);"navigationpane"===this.parent.activeModule?this.parent.notify("download-init",{}):this.parent.selectedItems.length>0&&jF(this.parent,this.parent.path,this.parent.selectedItems);break;case"rename":pd(i[0])?(this.parent.notify(xS,{}),jl(this.parent,"Rename")):$o(this.parent,i[0],$f);break;case"selectall":this.parent.notify(z1,{});break;case"refresh":IS(this.parent);break;case"open":this.parent.visitedItem?this.parent.notify(Y_,{target:this.parent.visitedItem}):"navigationpane"===this.parent.activeModule&&this.parent.navigationpaneModule.openFileOnContextMenuClick(B(this.targetNodeElement,"li"));break;case"details":this.parent.notify(Gf,{}),o=this.parent.selectedItems,"navigationpane"===this.parent.activeModule&&(o=[]),zF(this.parent,o,this.parent.path,"details");break;case"newfolder":SX(this.parent);break;case"upload":xX(this.parent);break;case"name":case"size":case"date":case"ascending":case"descending":case"none":!function pX(n,e){let t;n.isSortByClicked=!0,t=-1!==e.item.id.indexOf("ascending")||-1!==e.item.id.indexOf("descending")||-1!==e.item.id.indexOf("none"),t?n.sortOrder=Mfe(e.item.id):n.sortBy=Mfe(e.item.id),n.itemData=[ud(n)],"Details"===n.view&&(n.isMobile?fy(n,"Details"):n.notify(n6,{module:"detailsview"})),"LargeIcons"===n.view&&fy(n,"LargeIcons"),n.notify(SS,{})}(this.parent,e);break;case"largeiconsview":fy(this.parent,"LargeIcons");break;case"detailsview":fy(this.parent,"Details")}})}onPropertyChanged(e){if(e.module===this.getModuleName()||"common"===e.module)for(const t of Object.keys(e.newProp))"cssClass"===t&&(this.contextMenu.cssClass=gy(this.parent,dy))}addEventListener(){this.parent.on(uy,this.destroy,this),this.parent.on(zr,this.onPropertyChanged,this),this.keyboardModule=new Gn(this.contextMenu.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}removeEventListener(){this.parent.off(uy,this.destroy),this.parent.off(zr,this.onPropertyChanged),this.keyboardModule.destroy()}keyActionHandler(e){switch(e.action){case"uparrow":case"downarrow":e.preventDefault()}}getModuleName(){return"contextmenu"}destroy(){this.parent.isDestroyed||(this.removeEventListener(),this.contextMenu.destroy())}getItemData(e){const t=[];for(let i=0;i<e.length;i++){let s;const r=this.getMenuId(e[i]),o=Kt(this.parent,e[i]);switch(e[i]){case"|":s={separator:!0};break;case"Open":s={id:r,text:o,iconCss:"e-icons e-fe-open"};break;case"Upload":s={id:r,text:o,iconCss:"e-icons e-fe-upload"};break;case"Cut":s={id:r,text:o,iconCss:"e-icons e-fe-cut"};break;case"Copy":s={id:r,text:o,iconCss:"e-icons e-fe-copy"};break;case"Paste":s={id:r,text:o,iconCss:"e-icons e-fe-paste"};break;case"Delete":s={id:r,text:o,iconCss:"e-icons e-fe-delete"};break;case"Rename":s={id:r,text:o,iconCss:"e-icons e-fe-rename"};break;case"NewFolder":s={id:r,text:o,iconCss:"e-icons e-fe-newfolder"};break;case"Details":s={id:r,text:o,iconCss:"e-icons e-fe-details"};break;case"SortBy":s={id:r,text:o,iconCss:"e-icons e-fe-sort",items:[{id:this.getMenuId("Name"),text:Kt(this.parent,"Name"),iconCss:"name"===this.parent.sortBy?OC:null},{id:this.getMenuId("Size"),text:Kt(this.parent,"Size"),iconCss:"size"===this.parent.sortBy?OC:null},{id:this.getMenuId("Date"),text:Kt(this.parent,"DateModified"),iconCss:"_fm_modified"===this.parent.sortBy?OC:null},{separator:!0},{id:this.getMenuId("Ascending"),text:Kt(this.parent,"Ascending"),iconCss:"Ascending"===this.parent.sortOrder?Zd:null},{id:this.getMenuId("Descending"),text:Kt(this.parent,"Descending"),iconCss:"Descending"===this.parent.sortOrder?Zd:null},{id:this.getMenuId("None"),text:Kt(this.parent,"None"),iconCss:"None"===this.parent.sortOrder?Zd:null}]};break;case"View":s={id:r,text:o,iconCss:"Details"===this.parent.view?N1:B1,items:[{id:this.getMenuId("largeiconsview"),text:Kt(this.parent,"View-LargeIcons"),iconCss:"Details"===this.parent.view?null:Zd},{id:this.getMenuId("detailsview"),text:Kt(this.parent,"View-Details"),iconCss:"Details"===this.parent.view?Zd:null}]};break;case"Refresh":s={id:r,text:o,iconCss:"e-icons e-fe-refresh"};break;case"SelectAll":s={id:r,text:o,iconCss:"e-icons e-fe-select"};break;case"Download":s={id:r,text:o,iconCss:"e-icons e-fe-download"};break;default:s={id:r,text:o}}t.push(s)}return t}getMenuId(e){return this.parent.element.id+"_cm_"+e.toLowerCase()}}const ZNe={NewFolder:"New folder",Upload:"Upload",Delete:"Delete",Rename:"Rename",Download:"Download",Cut:"Cut",Copy:"Copy",Paste:"Paste",SortBy:"Sort by",Refresh:"Refresh","Item-Selection":"item selected","Items-Selection":"items selected",View:"View",Details:"Details",SelectAll:"Select all",Open:"Open","Tooltip-NewFolder":"New folder","Tooltip-Upload":"Upload","Tooltip-Delete":"Delete","Tooltip-Rename":"Rename","Tooltip-Download":"Download","Tooltip-Cut":"Cut","Tooltip-Copy":"Copy","Tooltip-Paste":"Paste","Tooltip-SortBy":"Sort by","Tooltip-Refresh":"Refresh","Tooltip-Selection":"Clear selection","Tooltip-View":"View","Tooltip-Details":"Details","Tooltip-SelectAll":"Select all",Name:"Name",Size:"Size",DateModified:"Modified",DateCreated:"Date created",Path:"Path",Modified:"Modified",Created:"Created",Location:"Location",Type:"Type",Permission:"Permission",Ascending:"Ascending",Descending:"Descending",None:"None","View-LargeIcons":"Large icons","View-Details":"Details",Search:"Search","Button-Ok":"OK","Button-Cancel":"Cancel","Button-Yes":"Yes","Button-No":"No","Button-Create":"Create","Button-Save":"Save","Header-NewFolder":"Folder","Content-NewFolder":"Enter your folder name","Header-Rename":"Rename","Content-Rename":"Enter your new name","Header-Rename-Confirmation":"Rename Confirmation","Content-Rename-Confirmation":"If you change a file name extension, the file might become unstable. Are you sure you want to change it?","Header-Delete":"Delete File","Content-Delete":"Are you sure you want to delete this file?","Header-Folder-Delete":"Delete Folder","Content-Folder-Delete":"Are you sure you want to delete this folder?","Header-Multiple-Delete":"Delete Multiple Items","Content-Multiple-Delete":"Are you sure you want to delete these {0} items?","Header-Duplicate":"File/Folder exists","Content-Duplicate":"{0} already exists. Do you want to rename and paste?","Header-Upload":"Upload Files",Error:"Error","Validation-Empty":"The file or folder name cannot be empty.","Validation-Invalid":'The file or folder name {0} contains invalid characters. Please use a different name. Valid file or folder names cannot end with a dot or space, and cannot contain any of the following characters: \\/:*?"<>|',"Validation-NewFolder-Exists":"A file or folder with the name {0} already exists.","Validation-Rename-Exists":"Cannot rename {0} to {1}: destination already exists.","Folder-Empty":"This folder is empty","File-Upload":"Drag files here to upload","Search-Empty":"No results found","Search-Key":"Try with different keywords","Filter-Empty":"No results found","Filter-Key":"Try with different filter","Sub-Folder-Error":"The destination folder is the subfolder of the source folder.","Same-Folder-Error":"The destination folder is the same as the source folder.","Access-Denied":"Access Denied","Access-Details":'You don"t have permission to access this folder.',"Header-Retry":"File Already Exists","Content-Retry":"A file with this name already exists in this folder. What would you like to do?","Button-Keep-Both":"Keep both","Button-Replace":"Replace","Button-Skip":"Skip","ApplyAll-Label":"Do this for all current items",KB:"KB","Access-Message":"{0} is not accessible. You need permission to perform the {1} action.","Network-Error":"NetworkError: Failed to send on XMLHTTPRequest: Failed to load","Server-Error":"ServerError: Invalid response from"};var DX,vs=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let hs=DX=class extends Qs{constructor(e,t){super(e,t),this.filterData=null,this.selectedNodes=[],this.duplicateItems=[],this.duplicateRecords=[],this.previousPath=[],this.nextPath=[],this.isLayoutChange=!1,this.layoutSelectedItems=[],this.renamedId=null,this.uploadItem=[],this.deleteRecords=[],this.isFile=!1,this.isCut=!1,this.isSearchCut=!1,this.isSearchDrag=!1,this.isPasteError=!1,this.folderPath="",this.isSameAction=!1,this.isFiltered=!1,this.isSortByClicked=!1,this.enablePaste=!1,this.persistData=!1,this.retryArgs=[],this.isOpened=!1,this.isRetryOpened=!1,this.isPathDrag=!1,this.searchedItems=[],this.retryFiles=[],this.isApplySame=!1,this.dragData=[],this.dragNodes=[],this.dragPath="",this.dropPath="",this.isDragDrop=!1,this.treeExpandTimer=null,this.dragCursorPosition={left:44,top:18},this.isDropEnd=!1,this.dragCount=0,this.droppedObjects=[],this.uploadingCount=0,this.uploadedCount=0,DX.Inject(YNe,KNe,sme)}getModuleName(){return"filemanager"}preRender(){(f(this.element.id)||""===this.element.id)&&this.element.setAttribute("id",Tn("filemanager")),this.ensurePath(),this.feParent=[],this.feFiles=[],ht(this.element,{width:st(this.width),height:st(this.height)}),this.isDevice=q.isDevice,this.isMobile=this.checkMobile(),this.isMobile&&this.setProperties({navigationPaneSettings:{visible:!1}},!0);const e=B(this.element,".e-bigger");this.isBigger=!!e,this.activeModule="LargeIcons"===this.view?"largeiconsview":"detailsview",vp({target:this.element},Be),this.addWrapper(),this.keyConfigs={altN:"alt+n",f5:"f5",ctrlShift1:"ctrl+shift+1",ctrlShift2:"ctrl+shift+2",ctrlU:"ctrl+u"},this.localeObj=new jo(this.getModuleName(),ZNe,this.locale)}getPersistData(){return this.addOnPersist(["view","path","selectedItems"])}requiredModules(){const e=[];return e.push({member:"breadcrumbbar",args:[this]}),e.push({member:"largeiconsview",args:[this]}),this.toolbarSettings.visible&&e.push({member:"toolbar",args:[this]}),this.navigationPaneSettings.visible&&e.push({member:"navigationpane",args:[this]}),this.view&&e.push({member:"detailsview",args:[this]}),this.contextMenuSettings.visible&&!this.isDevice&&e.push({member:"contextmenu",args:[this]}),e}render(){this.initialize();const e=f(this.selectedItems)?[]:this.allowMultiSelection?this.selectedItems:this.selectedItems.slice(this.selectedItems.length-1);this.setProperties({selectedItems:e},!0),this.fileView=this.view,this.setRtl(this.enableRtl),this.addEventListeners(),ua(this,this.path!==this.originalPath?CS:Bp,this.path),this.adjustHeight(),f(this.navigationpaneModule)&&(this.splitterObj.collapse(this.enableRtl?1:0),X("."+Efe,this.element).classList.add(U_)),this.wireEvents(),this.renderComplete()}ensurePath(){let e=this.path;f(e)&&(e="/"),e.lastIndexOf("/")!==e.length-1&&(e+="/"),this.originalPath=e;const t=e.split("/");this.setProperties({path:t[0]+"/"},!0),this.pathNames=[],this.pathId=["fe_tree"],this.itemData=[]}initialize(){this.isMobile&&z([this.element],ofe),this.allowMultiSelection&&z([this.element],$3),this.addCssClass(null,this.cssClass),this.renderFileUpload()}addWrapper(){const e=this.createElement("div",{id:this.element.id+W3});this.element.appendChild(e);const t=this.createElement("div",{id:this.element.id+"_layout",className:"e-layout"});this.element.appendChild(t);const i=this.createElement("div",{id:this.element.id+"_navigation",className:"e-navigation"}),s=this.createElement("div",{id:this.element.id+yF});i.appendChild(s);const r=this.createElement("div",{id:this.element.id+wF,className:"e-layout-content"});this.breadCrumbBarNavigation=this.createElement("div",{id:this.element.id+SF,className:"e-address"}),r.appendChild(this.breadCrumbBarNavigation);const o=this.createElement("div",{id:this.element.id+vF});r.appendChild(o);const a=this.createElement("div",{id:this.element.id+CF,className:Y3,attrs:{role:"group"}});r.appendChild(a);const l=this.createElement("span",{className:"e-fe-overlay"});let h;r.appendChild(l),this.enableRtl?(t.appendChild(r),t.appendChild(i),h=[{size:"75%",min:"270px"},{size:"25%",min:this.navigationPaneSettings.minWidth.toString(),max:this.navigationPaneSettings.maxWidth.toString()}]):(t.appendChild(i),t.appendChild(r),h=[{size:"25%",min:this.navigationPaneSettings.minWidth.toString(),max:this.navigationPaneSettings.maxWidth.toString()},{size:"75%",min:"270px"}]),this.splitterObj=new KRe({paneSettings:h,width:"100%",enableRtl:!1,enableHtmlSanitizer:this.enableHtmlSanitizer,resizing:this.splitterResize.bind(this)}),this.splitterObj.isStringTemplate=!0,this.splitterObj.appendTo(t);const c=this.createElement("div",{id:this.element.id+"_dialog"});this.element.appendChild(c);const m=this.createElement("ul",{id:this.element.id+nfe});this.element.appendChild(m);const b=this.createElement("div",{id:this.element.id+tfe});this.element.appendChild(b);const v=this.createElement("div",{id:this.element.id+ife});this.element.appendChild(v);const w=this.createElement("div",{id:this.element.id+sfe});this.element.appendChild(w)}adjustHeight(){const e=X("#"+this.element.id+W3,this.element);this.splitterObj&&(this.splitterObj.height=(this.element.clientHeight-(e?e.offsetHeight:0)).toString(),this.splitterObj.dataBind())}splitterResize(){this.notify(G_,{})}splitterAdjust(){const e=X("."+Efe,this.element);this.navigationPaneSettings.visible?(this.splitterObj.expand(this.enableRtl?1:0),e.classList.remove(U_)):(this.splitterObj.collapse(this.enableRtl?1:0),e.classList.add(U_))}addCssClass(e,t){!f(e)&&""!==e&&W([this.element],e.split(" ")),!f(t)&&""!==t&&z([this.element],t.split(" "))}showSpinner(){xa(this.element)}hideSpinner(){Rl(this.element)}onContextMenu(e){e.preventDefault()}checkMobile(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(q.userAgent.toLowerCase())&&/mobile/i.test(q.userAgent.toLowerCase())}renderFileUpload(){const t=this.createElement("input",{id:this.element.id+G3,attrs:{name:"uploadFiles",type:"file"}});this.element.appendChild(t),this.uploadDialogObj=new Hs({header:Kt(this,"Header-Upload"),content:t,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!1,isModal:!0,width:"350px",target:this.popupTarget?this.popupTarget:"#"+this.element.id,cssClass:gy(this,this.isMobile?K3:dy),locale:this.locale,allowDragging:!0,position:{X:"center",Y:"center"},enableRtl:this.enableRtl,enableHtmlSanitizer:this.enableHtmlSanitizer,open:this.onOpen.bind(this),close:this.onClose.bind(this),beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this)}),this.uploadDialogObj.appendTo("#"+this.element.id+sfe),this.renderUploadBox()}renderUploadBox(){const e=this.ajaxSettings.uploadUrl?this.ajaxSettings.uploadUrl:this.ajaxSettings.url;this.uploadObj=new Ws({dropArea:X("#"+this.element.id+wF,this.element),asyncSettings:{saveUrl:e,removeUrl:e},locale:this.locale,enableRtl:this.enableRtl,uploading:this.onUploading.bind(this),removing:this.onRemoving.bind(this),canceling:this.onCancel.bind(this),clearing:this.onClearing.bind(this),selected:this.onSelected.bind(this),success:this.onUploadSuccess.bind(this),failure:this.onUploadFailure.bind(this),autoUpload:this.uploadSettings.autoUpload,minFileSize:this.uploadSettings.minFileSize,maxFileSize:this.uploadSettings.maxFileSize,allowedExtensions:this.uploadSettings.allowedExtensions,fileListRendering:this.onFileListRender.bind(this)}),this.uploadObj.appendTo("#"+this.element.id+G3)}onFileListRender(e){this.trigger("uploadListCreate",e)}updateUploader(){this.uploadObj.autoUpload=this.uploadSettings.autoUpload,this.uploadObj.minFileSize=this.uploadSettings.minFileSize,this.uploadObj.maxFileSize=this.uploadSettings.maxFileSize,this.uploadObj.allowedExtensions=this.uploadSettings.allowedExtensions,this.uploadObj.dataBind()}onBeforeOpen(e){this.trigger("beforePopupOpen",{cancel:e.cancel,popupName:"Upload",popupModule:this.uploadDialogObj},i=>{e.cancel=i.cancel})}onBeforeClose(e){this.trigger("beforePopupClose",{cancel:e.cancel,popupName:"Upload",popupModule:this.uploadDialogObj},i=>{e.cancel=i.cancel})}onOpen(){this.isOpened=!0,this.uploadDialogObj.element.focus(),this.trigger("popupOpen",{popupModule:this.uploadDialogObj,popupName:"Upload",element:this.uploadDialogObj.element})}onClose(){this.isOpened=!1,this.uploadObj.clearAll(),this.trigger("popupClose",{popupModule:this.uploadDialogObj,popupName:"Upload",element:this.uploadDialogObj.element})}onUploading(e){let t="save";if(0!==this.retryArgs.length)for(let o=0;o<this.retryArgs.length;o++)e.fileData.name===this.retryArgs[o].file.name&&(t=this.retryArgs[o].action,this.retryArgs.splice(o,1),o=this.retryArgs.length);const i=JSON.stringify(U(this.pathId[this.pathId.length-1],this.feParent));e.customFormData=[{path:this.path},{action:t},{data:i}];const r={url:this.ajaxSettings.uploadUrl?this.ajaxSettings.uploadUrl:this.ajaxSettings.url,type:"POST",mode:!0,dataType:null,contentType:null,data:JSON.stringify(e.customFormData),onSuccess:null,onFailure:null,beforeSend:null};this.uploadEventArgs={action:"Upload",ajaxSettings:r,cancel:!1},this.trigger("beforeSend",this.uploadEventArgs,o=>{e.customFormData=JSON.parse(U("data",o.ajaxSettings)),e.cancel=o.cancel;const a={cancel:!1,httpRequest:e.currentRequest};"function"==typeof U("beforeSend",o.ajaxSettings)&&(U("beforeSend",o.ajaxSettings)(a),U("cancel",a)&&(e.cancel=U("cancel",a)))})}onRemoving(){this.onFileUploadSuccess({count:1}),1===this.uploadObj.getFilesData().length&&this.uploadDialogObj.hide()}onCancel(e){const t=JSON.stringify(U(this.pathId[this.pathId.length-1],this.feParent));e.customFormData=[{path:this.path},{action:"remove"},{data:t}]}onClearing(){this.isOpened&&this.uploadDialogObj.hide()}onSelected(e){if(0===e.filesData.length)return;this.uploadingCount=e.filesData.length,this.uploadedCount=0;const t=ud(this);if(!jfe(t))return e.cancel=!0,void $o(this,t,"upload");this.uploadDialogObj.show()}onFileUploadSuccess(e){this.uploadedCount=this.uploadedCount+e.count,this.uploadSettings.autoClose&&this.uploadingCount===this.uploadedCount&&this.uploadDialogObj.hide()}onUploadSuccess(e){this.trigger("success",{action:"Upload",result:e}),this.itemData=[U(this.pathId[this.pathId.length-1],this.feParent)],ua(this,cd,this.path),this.onFileUploadSuccess({count:1}),"function"==typeof U("onSuccess",this.uploadEventArgs.ajaxSettings)&&U("onSuccess",this.uploadEventArgs.ajaxSettings)()}onUploadFailure(e){const t=U("response",e),i=U("statusText",t);""!==i&&zt("statusText",i,e),this.trigger("failure",{action:"Upload",error:e}),400===U("statusCode",t)&&(this.retryFiles.push(U("file",e)),this.isRetryOpened||UF(this,"UploadRetry")),"function"==typeof U("onFailure",this.uploadEventArgs.ajaxSettings)&&U("onFailure",this.uploadEventArgs.ajaxSettings)()}onInitialEnd(){!function ENe(n,e){const t=e.split("/"),i=n.originalPath.split("/"),s=U(n.pathId[0],n.feParent),r=f(U("id",s))?"name":"id";for(let o=t.length-1,a=i.length-1;o<a;o++){const l=""===i[o+1]?Bp:CS,h=""===i[o]?"/":n.path+i[o]+"/",c=wNe(n,r,i[o]),m=U("_fm_id",c);n.setProperties({path:h},!0),n.pathId.push(m),n.itemData=[c],n.pathNames.push(U("name",c)),ua(n,l,n.path);break}}(this,this.path)}addEventListeners(){this.on($_,this.showSpinner,this),this.on(wS,this.hideSpinner,this),this.on(CS,this.onInitialEnd,this),this.on(Gf,this.onDetailsInit,this),this.on(QZ,this.onFileUploadSuccess,this),k.add(this.element,"contextmenu",this.onContextMenu,this)}removeEventListeners(){this.isDestroyed||(this.off($_,this.showSpinner),this.off(wS,this.hideSpinner),this.off(CS,this.onInitialEnd),this.off(Gf,this.onDetailsInit),this.off(QZ,this.onFileUploadSuccess),k.remove(this.element,"contextmenu",this.onContextMenu))}onDetailsInit(){f(this.activeModule)&&(this.itemData=[U(this.pathId[this.pathId.length-1],this.feParent)])}resizeHandler(){this.adjustHeight(),this.notify(W_,{})}keyActionHandler(e){let t;switch(e.action){case"altN":e.preventDefault(),this.itemData=[ud(this)],wX(this.itemData[0])?jl(this,"NewFolder"):$o(this,this.itemData[0],aX);break;case"f5":e.preventDefault(),IS(this);break;case"ctrlShift1":e.preventDefault(),this.fileView="Details",this.setProperties({view:"Details"},!0),xa(this.element),fy(this,"Details");break;case"ctrlShift2":e.preventDefault(),this.fileView="LargeIcons",this.setProperties({view:"LargeIcons"},!0),xa(this.element),fy(this,"LargeIcons");break;case"ctrlU":e.preventDefault(),t=X("#"+this.element.id+G3,this.element),t.click()}}wireEvents(){k.add(window,"resize",this.resizeHandler,this),this.keyboardModule=new Gn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}unWireEvents(){k.remove(window,"resize",this.resizeHandler),this.keyboardModule.destroy()}setPath(){this.setProperties({selectedItems:[]},!0),this.ensurePath(),this.notify(t6,{selectedNode:this.pathId[0]}),ua(this,this.path!==this.originalPath?CS:Bp,this.path)}onPropertyChanged(e,t){let i;for(const s of Object.keys(e))switch(s){case"ajaxSettings":this.ajaxSettingSetModel(e);break;case"allowDragAndDrop":this.allowDragAndDrop=e.allowDragAndDrop,this.notify(zr,{module:"common",newProp:e,oldProp:t});break;case"allowMultiSelection":this.allowMultiSelection?z([this.element],$3):(this.selectedItems.length>1&&this.setProperties({selectedItems:this.selectedItems.slice(this.selectedItems.length-1)},!0),W([this.element],$3)),this.notify(zr,{module:"common",newProp:e,oldProp:t});break;case"cssClass":this.addCssClass(t.cssClass,e.cssClass),this.notify(zr,{module:"common",newProp:e,oldProp:t});break;case"detailsViewSettings":this.notify(zr,{module:"detailsview",newProp:e,oldProp:t});break;case"enableRtl":this.enableRtl=e.enableRtl,this.refresh();break;case"rootAliasName":this.rootAliasName=e.rootAliasName,this.refresh();break;case"height":i=f(e.height)?e.height:st(e.height),ht(this.element,{height:i}),this.adjustHeight(),this.notify(zr,{module:"common",newProp:e,oldProp:t});break;case"locale":f(e.enableRtl)||this.setProperties({enableRtl:e.enableRtl},!0),this.localeSetModelOption(e);break;case"navigationPaneSettings":this.splitterAdjust(),this.notify(zr,{module:"navigationpane",newProp:e,oldProp:t});break;case"path":this.setPath();break;case"searchSettings":f(e.searchSettings.allowSearchOnTyping)||this.setProperties({searchSettings:{allowSearchOnTyping:e.searchSettings.allowSearchOnTyping}},!0),f(e.searchSettings.ignoreCase)&&this.setProperties({searchSettings:{ignoreCase:e.searchSettings.ignoreCase}},!0),f(e.searchSettings.filterType)&&this.setProperties({searchSettings:{filterType:e.searchSettings.filterType}},!0),this.notify(zr,{module:"breadcrumbbar",newProp:e,oldProp:t});break;case"selectedItems":"Details"===this.view?this.notify(zr,{module:"detailsview",newProp:e,oldProp:t}):"LargeIcons"===this.view&&this.notify(zr,{module:"largeiconsview",newProp:e,oldProp:t});break;case"showFileExtension":case"showHiddenItems":this.notify(zr,{module:"common",newProp:e,oldProp:t});break;case"showThumbnail":this.notify(zr,{module:"largeiconsview",newProp:e,oldProp:t});break;case"toolbarSettings":this.adjustHeight(),this.notify(zr,{module:"toolbar",newProp:e,oldProp:t});break;case"uploadSettings":this.updateUploader();break;case"view":"Details"===e.view?this.notify(zr,{module:"detailsview",newProp:e,oldProp:t}):"LargeIcons"===e.view&&this.notify(zr,{module:"largeiconsview",newProp:e,oldProp:t});break;case"width":ht(this.element,{width:f(e.width)?e.width:st(e.width)}),this.notify(zr,{module:"common",newProp:e,oldProp:t});break;case"sortOrder":IS(this),this.notify(SS,{});break;case"sortBy":IS(this),this.notify(SS,{}),"Details"===this.view&&this.notify(n6,{});break;case"popupTarget":this.uploadDialogObj&&(this.uploadDialogObj.target=e.popupTarget),this.dialogObj&&(this.dialogObj.target=e.popupTarget),this.extDialogObj&&(this.extDialogObj.target=e.popupTarget),this.viewerObj&&(this.viewerObj.target=e.popupTarget)}}ajaxSettingSetModel(e){f(e.ajaxSettings.url)||this.setProperties({ajaxSettings:{url:e.ajaxSettings.url}},!0),f(e.ajaxSettings.uploadUrl)||this.setProperties({ajaxSettings:{uploadUrl:e.ajaxSettings.uploadUrl}},!0),f(e.ajaxSettings.downloadUrl)||this.setProperties({ajaxSettings:{downloadUrl:e.ajaxSettings.downloadUrl}},!0),f(e.ajaxSettings.getImageUrl)||this.setProperties({ajaxSettings:{getImageUrl:e.ajaxSettings.getImageUrl}},!0),this.setProperties({path:"/"},!0),this.setProperties({selectedItems:[]},!0),super.refresh()}localeSetModelOption(e){this.uploadObj.locale=e.locale,super.refresh()}destroy(){this.isDestroyed||(this.refreshing||this.notify(uy,{}),this.uploadObj.destroy(),this.uploadObj=null,this.uploadDialogObj.destroy(),this.uploadDialogObj=null,this.splitterObj.destroy(),this.splitterObj=null,this.dialogObj&&(this.dialogObj.destroy(),this.dialogObj=null),this.viewerObj&&(this.viewerObj.destroy(),this.viewerObj=null),this.extDialogObj&&(this.extDialogObj.destroy(),this.extDialogObj=null),this.element.removeAttribute("style"),this.element.removeAttribute("tabindex"),this.removeEventListeners(),this.unWireEvents(),this.addCssClass(this.cssClass,null),W([this.element],[YZ,ofe,$3]),this.element.innerHTML="",super.destroy())}createFolder(e){this.notify(Rg,{action:"createFolder"});const t=[ud(this)];this.itemData=t,e?/[/\\|*?"<>:]/.test(e)?jl(this,"Error",{files:null,error:{code:"402",message:Kt(this,"Validation-Invalid").replace("{0}",'"'+e+'"'),fileExists:null}}):wX(t[0])?Ufe(this,e):$o(this,t[0],aX):SX(this)}deleteFiles(e){this.notify(Rg,{action:"deleteFiles",ids:e})}disableToolbarItems(e){f(e)||this.toolbarModule.enableItems(e,!1)}downloadFiles(e){this.notify(Rg,{action:"downloadFiles",ids:e})}enableToolbarItems(e){f(e)||this.toolbarModule.enableItems(e,!0)}disableMenuItems(e){!f(e)&&!f(this.contextmenuModule.contextMenu)&&this.contextmenuModule.disableItem(e)}getMenuItemIndex(e){return this.contextmenuModule?this.contextmenuModule.getItemIndex(e):-1}getToolbarItemIndex(e){return this.toolbarModule?this.toolbarModule.getItemIndex(e):-1}filterFiles(e){this.filterData=e||null,this.setProperties({selectedItems:[]},!0),this.notify(dd,{}),this.isFiltered=!0,""!==this.breadcrumbbarModule.searchObj.element.value&&(this.breadcrumbbarModule.searchObj.element.value=""),EX(this,DF)}getSelectedFiles(){return this.notify(AF,{}),this.itemData}openFile(e){this.notify(Rg,{action:"openFile",id:e})}refreshFiles(){IS(this)}refreshLayout(){this.adjustHeight(),this.notify(K_,{})}selectAll(){this.notify(Rg,{action:"selectAll"})}clearSelection(){this.notify(Rg,{action:"clearSelection"})}renameFile(e,t){this.notify(Rg,{action:"renameFile",id:e,newName:t})}uploadFiles(){const e=[ud(this)];this.itemData=e,xX(this)}setRtl(e){e?this.addCssClass(null,YZ):this.addCssClass(YZ,null),this.uploadObj&&(this.uploadDialogObj.enableRtl=e,this.uploadObj.enableRtl=e)}};vs([di({},Zpe)],hs.prototype,"ajaxSettings",void 0),vs([_(!1)],hs.prototype,"allowDragAndDrop",void 0),vs([_(!0)],hs.prototype,"allowMultiSelection",void 0),vs([di({},k1)],hs.prototype,"contextMenuSettings",void 0),vs([_("")],hs.prototype,"cssClass",void 0),vs([di({},j3)],hs.prototype,"detailsViewSettings",void 0),vs([_(!0)],hs.prototype,"enableHtmlSanitizer",void 0),vs([_(!1)],hs.prototype,"enablePersistence",void 0),vs([_("400px")],hs.prototype,"height",void 0),vs([_("LargeIcons")],hs.prototype,"view",void 0),vs([di({},R1)],hs.prototype,"navigationPaneSettings",void 0),vs([_("/")],hs.prototype,"path",void 0),vs([_(null)],hs.prototype,"popupTarget",void 0),vs([di({},D1)],hs.prototype,"searchSettings",void 0),vs([_()],hs.prototype,"selectedItems",void 0),vs([_(!0)],hs.prototype,"showFileExtension",void 0),vs([_(null)],hs.prototype,"rootAliasName",void 0),vs([_(!1)],hs.prototype,"showHiddenItems",void 0),vs([_(!0)],hs.prototype,"showThumbnail",void 0),vs([_("Ascending")],hs.prototype,"sortOrder",void 0),vs([_("name")],hs.prototype,"sortBy",void 0),vs([di({},V3)],hs.prototype,"toolbarSettings",void 0),vs([di({},j_)],hs.prototype,"uploadSettings",void 0),vs([_("100%")],hs.prototype,"width",void 0),vs([G()],hs.prototype,"fileLoad",void 0),vs([G()],hs.prototype,"fileOpen",void 0),vs([G()],hs.prototype,"beforeDownload",void 0),vs([G()],hs.prototype,"beforeImageLoad",void 0),vs([G()],hs.prototype,"beforePopupClose",void 0),vs([G()],hs.prototype,"beforePopupOpen",void 0),vs([G()],hs.prototype,"beforeSend",void 0),vs([G()],hs.prototype,"created",void 0),vs([G()],hs.prototype,"destroyed",void 0),vs([G()],hs.prototype,"fileDragStart",void 0),vs([G()],hs.prototype,"fileDragging",void 0),vs([G()],hs.prototype,"fileDragStop",void 0),vs([G()],hs.prototype,"fileDropped",void 0),vs([G()],hs.prototype,"fileSelection",void 0),vs([G()],hs.prototype,"fileSelect",void 0),vs([G()],hs.prototype,"menuClick",void 0),vs([G()],hs.prototype,"menuOpen",void 0),vs([G()],hs.prototype,"failure",void 0),vs([G()],hs.prototype,"popupClose",void 0),vs([G()],hs.prototype,"popupOpen",void 0),vs([G()],hs.prototype,"success",void 0),vs([G()],hs.prototype,"toolbarClick",void 0),vs([G()],hs.prototype,"toolbarCreate",void 0),vs([G()],hs.prototype,"uploadListCreate",void 0),hs=DX=vs([as],hs);const $F="initial-load",KF="content-changed",cl="initial-end",jC="iframe-click",Cs="destroy",YF="toolbarClick",UC="toolbar-refresh",p6="refresh-begin",by="toolbar-updated",f6="bind-on-end",m6="render-color-picker",kX="html-toolbar-click",AX="destroy-color-picker",Ul="model-changed",yy="keyUp",Xd="keyDown",nme="toolbarRenderComplete",g6="enableFullScreen",b6="disableFullScreen",Q_="dropDownSelect",LX="beforeDropDownItemRender",MX="execCommandCallBack",OX="image-toolbar-action",PX="link-toolbar-action",FX="resize",y6="insertLink",v6="unLink",VX="editLink",zX="openLink",Hp="actionBegin",Ag="actionComplete",XF="updateToolbarItem",QF="insertImage",JF="insertCompleted",jX="insertImgLink",UX="imgAltText",qX="delete",WX="caption",GX="imageSize",G1="sourceCode",eN="updateSource",C6="beforeDropDownOpen",vy="selection-save",Lg="selection-restore",rme="expandPopupClick",Yf="mouseDown",tN="sourceCodeMouseDown",kS="editAreaClick",J_="scroll",sN="colorPickerChanged",nN="tableColorPickerChanged",rN="focusChange",oN="selectAll",w6="selectRange",aN="getSelectedHtml",$1="paste-content",qC="rtl-mode",QX="checkUndoStack",lN="readOnlyMode",eQ="enterHandler",eI="clearDialogObj",K1="imageUploading",tQ="imageUploadSuccess",iQ="imageUploadFailed",ome="afterImageDelete",hN="xhtmlValidation",nQ="beforeImageUpload",rQ="resizeInitialized",S6="renderFileManager",cN="dynamicModule",x6="updateTbItemsStatus",oQ="showLinkDialog",aQ="closeLinkDialog",lQ="showImageDialog",hQ="closeImageDialog",ame="e-richtexteditor",uQ="e-rtl",pQ="e-disabled",lme="rte-iframe-script-sheet",hme="rte-iframe-style-sheet",E6="e-rte-toolbar",cme="e-rte-tb-fixed",fQ="e-rte-tb-float",mQ="e-rte-tb-abs-float",dme="e-rte-tb-expand",dN="e-rte-full-screen",_6="e-rte-quick-toolbar",RS="e-quick-dropdown",bQ="e-rte-inline-dropdown",Zf="e-rte-dropdown-popup",yQ="e-rte-dropdown-icons",Cy="e-rte-dropdown-items",Qd="e-rte-dropdown-btn",tI="e-toolbar-item",vQ="e-toolbar-wrapper",CQ="e-focused",bme="e-imgright",vme="e-imgcenter",wy="e-imgbreak",Sy="e-img-caption",fN="e-caption-inline",xy="e-imginline",I6="e-icons",mN="e-active",iI="e-expand-open",Kh="e-rte-elements",xQ="e-tbar-btn",wme="e-tbar-ios-fixed",EQ="e-rte-list-primary-content",gN="e-rte-color-content",bN="e-rte-readonly",Sme="e-rte-hidden",yN="e-rte-image",R6="e-rte-drag-image",_Q="e-popup-open",Tme="e-rte-table",Rme="e-rte-fixed-tb-expand",Ame="e-rte-toolbar-enabled";var Gs=(()=>(function(n){n[n.Toolbar=0]="Toolbar",n[n.Content=1]="Content",n[n.Popup=2]="Popup",n[n.LinkToolbar=3]="LinkToolbar",n[n.TextToolbar=4]="TextToolbar",n[n.ImageToolbar=5]="ImageToolbar",n[n.InlineToolbar=6]="InlineToolbar",n[n.TableToolbar=7]="TableToolbar"}(Gs||(Gs={})),Gs))(),fd=(()=>(function(n){n.Expand="Expand",n.MultiRow="MultiRow",n.Scrollable="Scrollable"}(fd||(fd={})),fd))(),WC=(()=>(function(n){n.InsertLink="InsertLink",n.InsertImage="InsertImage",n.InsertTable="InsertTable"}(WC||(WC={})),WC))();let IQ=["alignments","formats","fontname","fontsize","fontcolor","backgroundcolor","align","display","tablerows","tablecolumns","tablecell","tablecellhorizontalalign","tablecellverticalalign","styles","numberformatlist","bulletformatlist"],X1={alignments:{id:"Alignments",icon:"e-alignments",tooltip:"Alignments",command:"Alignments",subCommand:"Alignments"},justifyleft:{id:"JustifyLeft",icon:"e-justify-left",tooltip:"JustifyLeft",command:"Alignments",subCommand:"JustifyLeft"},justifycenter:{id:"JustifyCenter",icon:"e-justify-center",tooltip:"JustifyCenter",command:"Alignments",subCommand:"JustifyCenter"},justifyright:{id:"JustifyRight",icon:"e-justify-right",tooltip:"JustifyRight",command:"Alignments",subCommand:"JustifyRight"},justifyfull:{id:"JustifyFull",icon:"e-justify-full",tooltip:"JustifyFull",command:"Alignments",subCommand:"JustifyFull"},fontname:{id:"FontName",icon:"e-font-name",tooltip:"Font Name",command:"Font",subCommand:"FontName"},fontsize:{id:"FontSize",icon:"e-font-size",tooltip:"Font Size",command:"Font",subCommand:"FontSize"},fontcolor:{id:"FontColor",icon:"e-font-color",tooltip:"Font Color",command:"Font",subCommand:"FontColor",value:"#ff0000ff"},backgroundcolor:{id:"BackgroundColor",icon:"e-background-color",tooltip:"Background Color",command:"Font",subCommand:"BackgroundColor",value:"#ffff00ff"},bold:{id:"Bold",icon:"e-bold",tooltip:"Bold",command:"Style",subCommand:"Bold"},italic:{id:"Italic",icon:"e-italic",tooltip:"Italic",command:"Style",subCommand:"Italic"},underline:{id:"Underline",icon:"e-underline",tooltip:"Underline",command:"Style",subCommand:"Underline"},strikethrough:{id:"StrikeThrough",icon:"e-strike-through",tooltip:"StrikeThrough",command:"Style",subCommand:"StrikeThrough"},clearformat:{id:"ClearFormat",icon:"e-clear-format",tooltip:"Clear Format",command:"Clear",subCommand:"ClearFormat"},clearall:{id:"ClearAll",icon:"e-clear-all",tooltip:"Clear All",command:"Clear",subCommand:"ClearAll"},cut:{id:"Cut",icon:"e-cut",tooltip:"Cut",command:"ClipBoard",subCommand:"Cut"},copy:{id:"Copy",icon:"e-copy",tooltip:"Copy",command:"ClipBoard",subCommand:"Copy"},paste:{id:"Paste",icon:"e-paste",tooltip:"Paste",command:"ClipBoard",subCommand:"Paste"},unorderedlist:{id:"UnorderedList",icon:"e-unorder-list",tooltip:"Bulleted List",command:"Lists",subCommand:"UL"},orderedlist:{id:"OrderedList",icon:"e-order-list",tooltip:"Numbered List",command:"Lists",subCommand:"OL"},numberformatlist:{id:"NumberFormatList",icon:"e-order-list",tooltip:"Number Format List",command:"NumberFormatList",subCommand:"NumberFormatList"},bulletformatlist:{id:"BulletFormatList",icon:"e-unorder-list",tooltip:"Bullet Format List",command:"BulletFormatList",subCommand:"BulletFormatList"},indent:{id:"Indent",icon:"e-indent",tooltip:"Increase Indent",command:"Indents",subCommand:"Indent"},outdent:{id:"Outdent",icon:"e-outdent",tooltip:"Decrease Indent",command:"Indents",subCommand:"Outdent"},undo:{id:"Undo",icon:"e-undo",tooltip:"Undo",command:"Actions",subCommand:"Undo"},redo:{id:"Redo",icon:"e-redo",tooltip:"Redo",command:"Actions",subCommand:"Redo"},superscript:{id:"SuperScript",icon:"e-super-script",tooltip:"Superscript",command:"Effects",subCommand:"SuperScript"},subscript:{id:"SubScript",icon:"e-sub-script",tooltip:"Subscript",command:"Effects",subCommand:"SubScript"},createlink:{id:"CreateLink",icon:"e-create-link",tooltip:"Insert Hyperlink",command:"Links",subCommand:"CreateLink"},openlink:{id:"OpenLink",icon:"e-open-link",tooltip:"Open Link",command:"Links",subCommand:"OpenLink"},editlink:{id:"EditLink",icon:"e-edit-link",tooltip:"Edit Link",command:"Links",subCommand:"EditLink"},removelink:{id:"RemoveLink",icon:"e-remove-link",tooltip:"Remove Link",command:"Links",subCommand:"RemoveLink"},image:{id:"Image",icon:"e-image",tooltip:"Insert Image",command:"Images",subCommand:"Image"},filemanager:{id:"FileManager",icon:"e-rte-file-manager",tooltip:"File Manager",command:"Files",subCommand:"File"},createtable:{id:"CreateTable",icon:"e-create-table",tooltip:"Create Table",command:"Table",subCommand:"CreateTable"},removetable:{id:"removeTable",icon:"e-remove-table",tooltip:"Remove Table",command:"removeTable",subCommand:"removeTable"},replace:{id:"Replace",icon:"e-replace",tooltip:"Replace",command:"Images",subCommand:"Replace"},align:{id:"Align",icon:"e-align",tooltip:"Align",command:"Images",subCommand:"Align"},caption:{id:"Caption",icon:"e-caption",tooltip:"Image Caption",command:"Images",subCommand:"Caption"},remove:{id:"Remove",icon:"e-remove",tooltip:"Remove",command:"Images",subCommand:"Remove"},openimagelink:{id:"OpenImageLink",icon:"e-open-link",tooltip:"Open Link",command:"Images",subCommand:"OpenImageLink"},editimagelink:{id:"EditImageLink",icon:"e-edit-link",tooltip:"Edit Link",command:"Images",subCommand:"EditImageLink"},removeimagelink:{id:"RemoveImageLink",icon:"e-remove-link",tooltip:"Remove Link",command:"Images",subCommand:"RemoveImageLink"},insertlink:{id:"InsertLink",icon:"e-insert-link",tooltip:"Insert Link",command:"Images",subCommand:"InsertLink"},display:{id:"Display",icon:"e-display",tooltip:"Display",command:"Images",subCommand:"Display"},alttext:{id:"AltText",icon:"e-alt-text",tooltip:"Alternative Text",command:"Images",subCommand:"AltText"},dimension:{id:"Dimension",icon:"e-img-dimension",tooltip:"Change Size",command:"Images",subCommand:"Dimension"},fullscreen:{id:"Maximize",icon:"e-maximize",tooltip:"Maximize",command:"View",subCommand:"Maximize"},maximize:{id:"Maximize",icon:"e-maximize",tooltip:"Maximize",command:"FullScreen",subCommand:"Maximize"},minimize:{id:"Minimize",icon:"e-minimize",tooltip:"Minimize",command:"FullScreen",subCommand:"Minimize"},lowercase:{id:"LowerCase",icon:"e-lower-case",tooltip:"Lower Case",command:"Casing",subCommand:"LowerCase"},uppercase:{id:"UpperCase",icon:"e-upper-case",tooltip:"Upper Case",command:"Casing",subCommand:"UpperCase"},print:{id:"Print",icon:"e-print",tooltip:"Print",command:"Print",subCommand:"Print"},formats:{id:"Formats",icon:"e-formats",tooltip:"Formats",command:"Formats",subCommand:"Formats"},sourcecode:{id:"SourceCode",icon:"e-source-code",tooltip:"Source Code",command:"SourceCode",subCommand:"SourceCode"},preview:{id:"Preview",icon:"e-preview",tooltip:"Preview",command:"Preview",subCommand:"Preview"},viewside:{id:"ViewSide",icon:"e-view-side",tooltip:"ViewSide",command:"ViewSide",subCommand:"ViewSide"},insertcode:{id:"InsertCode",icon:"e-insert-code",tooltip:"Insert Code",command:"Formats",subCommand:"Pre"},tableheader:{id:"TableHeader",icon:"e-table-header",tooltip:"Table Header",command:"Table",subCommand:"TableHeader"},tableremove:{id:"TableRemove",icon:"e-table-remove",tooltip:"Table Remove",command:"Table",subCommand:"TableRemove"},tablerows:{id:"TableRows",icon:"e-table-rows",tooltip:"Table Rows",command:"Table",subCommand:"TableRows"},tablecolumns:{id:"TableColumns",icon:"e-table-columns",tooltip:"Table Columns",command:"Table",subCommand:"TableColumns"},tablecell:{id:"TableCell",icon:"e-table-cell",tooltip:"Table Cell",command:"Table",subCommand:"TableCell"},tablecellbackground:{id:"TableCellBackground",icon:"e-table-cell-background",tooltip:"Table Cell Background",command:"Table",subCommand:"TableCellBackground"},tablecellhorizontalalign:{id:"TableCellHorizontalAlign",icon:"e-table-cell-horizontalAlign",tooltip:"Table Cell HorizontalAlign",command:"Table",subCommand:"TableCellHorizontalAlign"},tablecellverticalalign:{id:"TableCellVerticalAlign",icon:"e-table-cell-verticalAlign",tooltip:"Table Cell VerticalAlign",command:"Table",subCommand:"TableCellVerticalAlign"},tableeditproperties:{id:"TableEditProperties",icon:"e-table-edit-properties",tooltip:"Table Edit Properties",command:"Table",subCommand:"TableEditProperties"},styles:{id:"Styles",icon:"e-table-styles",tooltip:"Styles",command:"Table",subCommand:"Styles"}},KBe=[{locale:"alignmentsDropDownLeft",value:"JustifyLeft"},{locale:"alignmentsDropDownCenter",value:"JustifyCenter"},{locale:"alignmentsDropDownRight",value:"JustifyRight"},{locale:"alignmentsDropDownJustify",value:"JustifyFull"}],vN=[{iconCss:"e-icons e-justify-left",text:"Align Left",command:"Alignments",subCommand:"JustifyLeft"},{iconCss:"e-icons e-justify-center",text:"Align Center",command:"Alignments",subCommand:"JustifyCenter"},{iconCss:"e-icons e-justify-right",text:"Align Right",command:"Alignments",subCommand:"JustifyRight"},{iconCss:"e-icons e-justify-full",text:"Align Justify",command:"Alignments",subCommand:"JustifyFull"}],YBe=[{iconCss:"e-icons e-justify-left",command:"Images",subCommand:"JustifyLeft"},{iconCss:"e-icons e-justify-center",command:"Images",subCommand:"JustifyCenter"},{iconCss:"e-icons e-justify-right",command:"Images",subCommand:"JustifyRight"}],ZBe=[{locale:"imageDisplayDropDownInline",value:"Inline"},{locale:"imageDisplayDropDownBreak",value:"Break"}],A6=[{text:"Inline",cssClass:"e-inline",command:"Images",subCommand:"Inline"},{text:"Break",cssClass:"e-break",command:"Images",subCommand:"Break"}],XBe=[{iconCss:"e-icons e-cell-merge",text:"Merge cells",command:"Table",subCommand:"Merge"},{iconCss:"e-icons e-cell-horizontal-split",text:"Horizontal split",command:"Table",subCommand:"HorizontalSplit"},{iconCss:"e-icons e-cell-vertical-split",text:"Vertical split",command:"Table",subCommand:"VerticalSplit"}],QBe=[{locale:"tableInsertRowDropDownBefore",value:"InsertRowBefore"},{locale:"tableInsertRowDropDownAfter",value:"InsertRowAfter"},{locale:"tableInsertRowDropDownDelete",value:"DeleteRow"}],L6=[{iconCss:"e-icons e-insert-row-before",text:"Insert row before",command:"Table",subCommand:"InsertRowBefore"},{iconCss:"e-icons e-insert-row-after",text:"Insert row after",command:"Table",subCommand:"InsertRowAfter"},{iconCss:"e-icons e-delete-row",text:"Delete row",command:"Table",subCommand:"DeleteRow"}],JBe=[{locale:"tableInsertColumnDropDownLeft",value:"InsertColumnLeft"},{locale:"tableInsertColumnDropDownRight",value:"InsertColumnRight"},{locale:"tableInsertColumnDropDownDelete",value:"DeleteColumn"}],M6=[{iconCss:"e-icons e-insert-column-left",text:"Insert column left",command:"Table",subCommand:"InsertColumnLeft"},{iconCss:"e-icons e-insert-column-right",text:"Insert column right",command:"Table",subCommand:"InsertColumnRight"},{iconCss:"e-icons e-delete-column",text:"Delete column",command:"Table",subCommand:"DeleteColumn"}],e2e=[{locale:"tableVerticalAlignDropDownTop",value:"AlignTop"},{locale:"tableVerticalAlignDropDownMiddle",value:"AlignMiddle"},{locale:"tableVerticalAlignDropDownBottom",value:"AlignBottom"}],O6=[{iconCss:"e-icons e-align-top",text:"Align Top",command:"Table",subCommand:"AlignTop"},{iconCss:"e-icons e-align-middle",text:"Align Middle",command:"Table",subCommand:"AlignMiddle"},{iconCss:"e-icons e-align-bottom",text:"Align Bottom",command:"Table",subCommand:"AlignBottom"}],t2e=[{locale:"tableStylesDropDownDashedBorder",value:"Dashed"},{locale:"tableStylesDropDownAlternateRows",value:"Alternate"}],P6=[{text:"Dashed Borders",cssClass:"e-dashed-borders",command:"Table",subCommand:"Dashed"},{text:"Alternate Rows",cssClass:"e-alternate-rows",command:"Table",subCommand:"Alternate"}];const F6=[{cssClass:"e-segoe-ui",text:"Segoe UI",command:"Font",subCommand:"FontName",value:"Segoe UI"},{cssClass:"e-arial",text:"Arial",command:"Font",subCommand:"FontName",value:"Arial,Helvetica,sans-serif"},{cssClass:"e-georgia",text:"Georgia",command:"Font",subCommand:"FontName",value:"Georgia,serif"},{cssClass:"e-impact",text:"Impact",command:"Font",subCommand:"FontName",value:"Impact,Charcoal,sans-serif"},{cssClass:"e-tahoma",text:"Tahoma",command:"Font",subCommand:"FontName",value:"Tahoma,Geneva,sans-serif"},{cssClass:"e-times-new-roman",text:"Times New Roman",command:"Font",subCommand:"FontName",value:"Times New Roman,Times,serif"},{cssClass:"e-verdana",text:"Verdana",command:"Font",subCommand:"FontName",value:"Verdana,Geneva,sans-serif"}],N6=[{cssClass:"e-paragraph",text:"Paragraph",command:"Formats",subCommand:"P",value:"P"},{cssClass:"e-code",text:"Code",command:"Formats",subCommand:"Pre",value:"Pre"},{cssClass:"e-quote",text:"Quotation",command:"Formats",subCommand:"BlockQuote",value:"BlockQuote"},{cssClass:"e-h1",text:"Heading 1",command:"Formats",subCommand:"H1",value:"H1"},{cssClass:"e-h2",text:"Heading 2",command:"Formats",subCommand:"H2",value:"H2"},{cssClass:"e-h3",text:"Heading 3",command:"Formats",subCommand:"H3",value:"H3"},{cssClass:"e-h4",text:"Heading 4",command:"Formats",subCommand:"H4",value:"H4"}],B6=[{text:"None",command:"Lists",subCommand:"NumberFormatList",value:"none"},{text:"Number",command:"Lists",subCommand:"NumberFormatList",value:"decimal"},{text:"Lower Greek",command:"Lists",subCommand:"NumberFormatList",value:"lowerGreek"},{text:"Lower Roman",command:"Lists",subCommand:"NumberFormatList",value:"lowerRoman"},{text:"Upper Alpha",command:"Lists",subCommand:"NumberFormatList",value:"upperAlpha"},{text:"Lower Alpha",command:"Lists",subCommand:"NumberFormatList",value:"lowerAlpha"},{text:"Upper Roman",command:"Lists",subCommand:"NumberFormatList",value:"upperRoman"}],H6=[{text:"None",command:"Lists",subCommand:"BulletFormatList",value:"none"},{text:"Disc",command:"Lists",subCommand:"BulletFormatList",value:"disc"},{text:"Circle",command:"Lists",subCommand:"BulletFormatList",value:"circle"},{text:"Square",command:"Lists",subCommand:"BulletFormatList",value:"square"}];function Q1(n,e,t){for(let i=0;e.length>i;i++)if(e[i].value===t.subCommand)return n.localeObj.getConstant(e[i].locale);return t.text}let a2e={alignments:"Alignments",justifyLeft:"Align Left",justifyCenter:"Align Center",justifyRight:"Align Right",justifyFull:"Align Justify",fontName:"Font Name",fontSize:"Font Size",fontColor:"Font Color",backgroundColor:"Background Color",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",clearFormat:"Clear Format",clearAll:"Clear All",cut:"Cut",copy:"Copy",paste:"Paste",unorderedList:"Bulleted List",orderedList:"Numbered List",indent:"Increase Indent",outdent:"Decrease Indent",undo:"Undo",redo:"Redo",superscript:"Superscript",subscript:"Subscript",createLink:"Insert Link",openLink:"Open Link",editLink:"Edit Link",removeLink:"Remove Link",image:"Insert Image",replace:"Replace",align:"Align",caption:"Image Caption",remove:"Remove",insertLink:"Insert Link",display:"Display",altText:"Alternative Text",dimension:"Change Size",fullscreen:"Maximize",maximize:"Maximize",minimize:"Minimize",lowerCase:"Lower Case",upperCase:"Upper Case",print:"Print",formats:"Formats",sourcecode:"Code View",preview:"Preview",viewside:"ViewSide",insertCode:"Insert Code",linkText:"Display Text",linkTooltipLabel:"Title",linkWebUrl:"Web Address",linkTitle:"Enter a title",linkurl:"http://example.com",linkOpenInNewWindow:"Open Link in New Window",linkHeader:"Insert Link",dialogInsert:"Insert",dialogCancel:"Cancel",dialogUpdate:"Update",imageHeader:"Insert Image",imageLinkHeader:"You can also provide a link from the web",mdimageLink:"Please provide a URL for your image",imageUploadMessage:"Drop image here or browse to upload",imageDeviceUploadMessage:"Click here to upload",imageAlternateText:"Alternate Text",alternateHeader:"Alternative Text",browse:"Browse",imageUrl:"http://example.com/image.png",imageCaption:"Caption",imageSizeHeader:"Image Size",imageHeight:"Height",imageWidth:"Width",textPlaceholder:"Enter Text",inserttablebtn:"Insert Table",tabledialogHeader:"Insert Table",tableWidth:"Width",cellpadding:"Cell Padding",cellspacing:"Cell Spacing",columns:"Number of columns",rows:"Number of rows",tableRows:"Table Rows",tableColumns:"Table Columns",tableCellHorizontalAlign:"Table Cell Horizontal Align",tableCellVerticalAlign:"Table Cell Vertical Align",createTable:"Create Table",removeTable:"Remove Table",tableHeader:"Table Header",tableRemove:"Table Remove",tableCellBackground:"Table Cell Background",tableEditProperties:"Table Edit Properties",styles:"Styles",insertColumnLeft:"Insert Column Left",insertColumnRight:"Insert Column Right",deleteColumn:"Delete Column",insertRowBefore:"Insert Row Before",insertRowAfter:"Insert Row After",deleteRow:"Delete Row",tableEditHeader:"Edit Table",TableHeadingText:"Heading",TableColText:"Col",imageInsertLinkHeader:"Insert Link",editImageHeader:"Edit Image",alignmentsDropDownLeft:"Align Left",alignmentsDropDownCenter:"Align Center",alignmentsDropDownRight:"Align Right",alignmentsDropDownJustify:"Align Justify",imageDisplayDropDownInline:"Inline",imageDisplayDropDownBreak:"Break",tableInsertRowDropDownBefore:"Insert row before",tableInsertRowDropDownAfter:"Insert row after",tableInsertRowDropDownDelete:"Delete row",tableInsertColumnDropDownLeft:"Insert column left",tableInsertColumnDropDownRight:"Insert column right",tableInsertColumnDropDownDelete:"Delete column",tableVerticalAlignDropDownTop:"Align Top",tableVerticalAlignDropDownMiddle:"Align Middle",tableVerticalAlignDropDownBottom:"Align Bottom",tableStylesDropDownDashedBorder:"Dashed Borders",tableStylesDropDownAlternateRows:"Alternate Rows",pasteFormat:"Paste Format",pasteFormatContent:"Choose the formatting action",plainText:"Plain Text",cleanFormat:"Clean",keepFormat:"Keep",pasteDialogOk:"OK",pasteDialogCancel:"Cancel",fileManager:"File Manager",fileDialogHeader:"File Browser",formatsDropDownParagraph:"Paragraph",formatsDropDownCode:"Code",formatsDropDownQuotation:"Quotation",formatsDropDownHeading1:"Heading 1",formatsDropDownHeading2:"Heading 2",formatsDropDownHeading3:"Heading 3",formatsDropDownHeading4:"Heading 4",fontNameSegoeUI:"Segoe UI",fontNameArial:"Arial",fontNameGeorgia:"Georgia",fontNameImpact:"Impact",fontNameTahoma:"Tahoma",fontNameTimesNewRoman:"Times New Roman",fontNameVerdana:"Verdana",numberFormatListNumber:"Number",numberFormatListLowerAlpha:"LowerAlpha",numberFormatListUpperAlpha:"UpperAlpha",numberFormatListLowerRoman:"LowerRoman",numberFormatListUpperRoman:"UpperRoman",numberFormatListLowerGreek:"LowerGreek",bulletFormatListDisc:"Disc",bulletFormatListCircle:"Circle",bulletFormatListSquare:"Square",numberFormatListNone:"None",bulletFormatListNone:"None"},l2e={alignments:"alignments",justifyleft:"justifyLeft",justifycenter:"justifyCenter",justifyright:"justifyRight",justifyfull:"justifyFull",fontname:"fontName",fontsize:"fontSize",fontcolor:"fontColor",backgroundcolor:"backgroundColor",bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough",clearformat:"clearFormat",clearall:"clearAll",cut:"cut",copy:"copy",paste:"paste",unorderedlist:"unorderedList",orderedlist:"orderedList",indent:"indent",outdent:"outdent",undo:"undo",redo:"redo",superscript:"superscript",subscript:"subscript",createlink:"createLink",openlink:"openLink",editlink:"editLink",removelink:"removeLink",openimagelink:"openLink",editimagelink:"editLink",removeimagelink:"removeLink",image:"image",replace:"replace",align:"align",caption:"caption",remove:"remove",insertlink:"insertLink",display:"display",alttext:"altText",dimension:"dimension",fullscreen:"fullscreen",maximize:"maximize",minimize:"minimize",lowercase:"lowerCase",uppercase:"upperCase",print:"print",formats:"formats",sourcecode:"sourcecode",preview:"preview",viewside:"viewside",insertcode:"insertCode",tablerows:"tableRows",tablecolumns:"tableColumns",tablecellhorizontalalign:"tableCellHorizontalAlign",tablecellverticalalign:"tableCellVerticalAlign",createtable:"createTable",removetable:"removeTable",tableheader:"tableHeader",tableremove:"tableRemove",tablecellbackground:"tableCellBackground",tableeditproperties:"tableEditProperties",styles:"styles",insertcolumnleft:"insertColumnLeft",insertcolumnright:"insertColumnRight",deletecolumn:"deleteColumn",aligntop:"AlignTop",alignmiddle:"AlignMiddle",alignbottom:"AlignBottom",insertrowbefore:"insertRowBefore",insertrowafter:"insertRowAfter",deleterow:"deleteRow"},h2e=[{locale:"fontNameSegoeUI",value:"Segoe UI"},{locale:"fontNameArial",value:"Arial,Helvetica,sans-serif"},{locale:"fontNameGeorgia",value:"Georgia,serif"},{locale:"fontNameImpact",value:"Impact,Charcoal,sans-serif"},{locale:"fontNameTahoma",value:"Tahoma,Geneva,sans-serif"},{locale:"fontNameTimesNewRoman",value:"Times New Roman,Times,serif"},{locale:"fontNameVerdana",value:"Verdana,Geneva,sans-serif"}],c2e=[{locale:"formatsDropDownParagraph",value:"P"},{locale:"formatsDropDownCode",value:"Pre"},{locale:"formatsDropDownQuotation",value:"BlockQuote"},{locale:"formatsDropDownHeading1",value:"H1"},{locale:"formatsDropDownHeading2",value:"H2"},{locale:"formatsDropDownHeading3",value:"H3"},{locale:"formatsDropDownHeading4",value:"H4"}],d2e=[{locale:"numberFormatListNone",value:"none"},{locale:"numberFormatListNumber",value:"decimal"},{locale:"numberFormatListLowerAlpha",value:"lower-alpha"},{locale:"numberFormatListUpperAlpha",value:"upper-alpha"},{locale:"numberFormatListLowerRoman",value:"lower-roman"},{locale:"numberFormatListUpperRoman",value:"upper-roman"},{locale:"numberFormatListLowerGreek",value:"lower-greek"}],u2e=[{locale:"bulletFormatListNone",value:"none"},{locale:"bulletFormatListDisc",value:"disc"},{locale:"bulletFormatListCircle",value:"circle"},{locale:"bulletFormatListSquare",value:"square"}];const p2e=["Undo","Redo"],f2e=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function TQ(n,e){let t=-1;return e.some((i,s)=>"string"==typeof i&&n===i.toLocaleLowerCase()&&(t=s,!0)),t}function Xf(n,e){let t=!1;return n.classList.contains(e)&&(t=!0),t}function Ey(n,e,t,i){let s,r;for(let o=0;o<n.length;o++){if("value"===t&&n[o].value.toLocaleLowerCase()===e.toLocaleLowerCase()){s=n[o];break}if("text"===t&&n[o].text.toLocaleLowerCase()===e.toLocaleLowerCase()){s=n[o];break}if("subCommand"===t&&n[o].subCommand.toLocaleLowerCase()===e.toLocaleLowerCase()){s=n[o];break}}if(!f(s))switch(i){case"text":r=s.text;break;case"value":r=s.value;break;case"iconCss":r=s.iconCss}return r}function pa(){let n=!1;return q.isDevice&&q.isIos&&(n=!0),n}function DQ(n){return f(n)?"":n}function kQ(n,e){return e.getService("rteLocale").getConstant(l2e[n])}function V6(n){return"object"==typeof n?n:[n]}function z6(n,e){const t=[];for(let i=0;i<n.length;i++)for(let s=0;s<e.length;s++)if("Separator"!==e[s].type){if("OrderedList"===n[i]&&"OL"===e[s].subCommand){t.push(s);break}if("UnorderedList"===n[i]&&"UL"===e[s].subCommand){t.push(s);break}if("InsertCode"===n[i]&&"Pre"===e[s].subCommand){t.push(s);break}if("FileManager"===n[i]&&"File"===e[s].subCommand){t.push(s);break}if("object"==typeof n[i]&&"Custom"===n[i].command){t.push(i);break}if(n[i]===e[s].subCommand){t.push(s);break}}return t}function CN(n,e){let t=0;const i=z6(V6(p2e),n.toolbarObj.items),s=bt("."+tI,n.toolbarObj.element),r=Object.keys(e);for(const o of r){const a=s[i[t]];a&&n.toolbarObj.enableItems(a,e[o]),t++}}function J1(n,e){const t=document.createEvent("HTMLEvents");t.initEvent(e,!1,!0),n.dispatchEvent(t)}function sI(n){const e=Be("template");return e.innerHTML=n,e.content instanceof DocumentFragment?e.content:document.createRange().createContextualFragment(n)}function Mme(n,e){let t=[];for(e=e.firstChild;e;e=e.nextSibling)3===e.nodeType?t.push(e):t=t.concat(Mme(n,e));return t}function RQ(n){const e={},t=Object.keys(n);for(let i=0;i<Object.keys(n).length;i++)e[t[i].toLocaleLowerCase()]=n[t[i]];return e}function j6(n,e){let t;return null!==n&&""!==n?(t=function Ome(n,e){const t=document.createElement("div"),i=document.createElement("div"),s=t.childNodes;if(t.innerHTML=n,t.setAttribute("class","tempDiv"),s.length>0){let r,o,a;for(;t.firstChild;)"BR"!==e.enterKey&&("#text"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf("\n")<0||""!==t.firstChild.textContent.trim())||f2e.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0)?(r?o.appendChild(t.firstChild):(a=Be("DIV"===e.enterKey?"div":"p"),i.appendChild(a),a.appendChild(t.firstChild)),o=a,r=!0):"#text"===t.firstChild.nodeName&&("\n"===t.firstChild.textContent||t.firstChild.textContent.indexOf("\n")>=0&&""===t.firstChild.textContent.trim())?te(t.firstChild):(i.appendChild(t.firstChild),r=!1);const l=i.querySelectorAll("img");for(let h=0;h<l.length;h++)l[h].classList.contains(yN)||l[h].classList.add(yN),l[h].classList.contains(xy)||l[h].classList.contains(wy)||l[h].classList.add(xy)}return i.innerHTML}(e.enableHtmlEncode?_y(n):n,e),e.setProperties({value:t},!0)):t="DIV"===e.enterKey?e.enableHtmlEncode?"&lt;div&gt;&lt;br/&gt;&lt;/div&gt;":"<div><br/></div>":"BR"===e.enterKey?e.enableHtmlEncode?"&lt;br/&gt;":"<br/>":e.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>",t}function AQ(n){let e;return e="DIV"===n.enterKey?n.enableHtmlEncode?"&lt;div&gt;&lt;br/&gt;&lt;/div&gt;":"<div><br/></div>":"BR"===n.enterKey?n.enableHtmlEncode?"&lt;br/&gt;":"<br/>":n.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>",e}function g2e(n){return"<p><br></p>"===n||"&lt;p&gt;&lt;br&gt;&lt;/p&gt;"===n||"<div><br></div>"===n||"&lt;div&gt;&lt;br&gt;&lt;/div&gt;"===n||"<br>"===n||"&lt;br&gt;"===n||""===n}function _y(n){return n.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g,"")}function U6(n){const e=n.split(","),t=e[0].match(/:(.*?);/)[1],i=atob(e[1]);let s=i.length;const r=new Uint8Array(s);for(;s--;)r[s]=i.charCodeAt(s);return new Blob([r],{type:t})}function q6(n,e,t){for(let i=0;e.length>i;i++)if(e[i].value===t.value||e[i].value===t.subCommand)return n.localeObj.getConstant(e[i].locale);return t.text}function Fme(n){F6.forEach((e,t)=>{F6[t].text=q6(n,h2e,F6[t])}),N6.forEach((e,t)=>{N6[t].text=q6(n,c2e,N6[t])}),B6.forEach((e,t)=>{B6[t].text=q6(n,d2e,B6[t])}),H6.forEach((e,t)=>{H6[t].text=q6(n,u2e,H6[t])})}class b2e{constructor(e){this.parent=e,this.wireEvent()}wireEvent(){this.parent.on(Cs,this.unWireEvent,this)}unWireEvent(){this.parent.off(Cs,this.unWireEvent),this.popupOverlay&&k.remove(this.popupOverlay,"click touchmove",this.onPopupOverlay),this.removePopupContainer()}toolbarBeforeCreate(e){"Extended"===this.mode&&(e.enableCollision=!1)}toolbarCreated(){this.parent.notify("toolbarCreated",this)}toolbarClicked(e){!this.parent.enabled||((!this.parent.readonly||f(e.item))&&this.parent.notify(YF,e),this.parent.trigger("toolbarClick",e))}dropDownSelected(e){this.parent.notify(Q_,e),this.onPopupOverlay()}beforeDropDownItemRender(e){this.parent.readonly||!this.parent.enabled||this.parent.notify(LX,e)}dropDownOpen(e){if(e.element.parentElement.getAttribute("id").indexOf("TableCell")>-1&&!f(e.element.parentElement.querySelector(".e-cell-merge"))&&(!f(e.element.parentElement.querySelector(".e-cell-horizontal-split"))||!f(e.element.parentElement.querySelector(".e-cell-vertical-split")))){const t=e.element.querySelectorAll("li");1===this.parent.inputElement.querySelectorAll(".e-cell-select").length?(z([t[0]],"e-disabled"),W([t[1],t[2]],"e-disabled")):this.parent.inputElement.querySelectorAll(".e-cell-select").length>1&&(W([t[0]],"e-disabled"),z([t[1],t[2]],"e-disabled"))}q.isDevice&&!e.element.parentElement.classList.contains(RS)&&this.popupModal(e.element.parentElement),this.parent.notify(vy,e)}dropDownClose(e){this.removePopupContainer(),this.parent.notify(Lg,e)}removePopupContainer(){if(q.isDevice&&!f(this.popupContainer)){const e=this.popupContainer.querySelector(".e-dropdown-popup.e-tbar-btn.e-control");e&&(this.popupContainer.parentNode.insertBefore(e,this.popupContainer.nextSibling),e.style.removeProperty("position"),W([e],"e-popup-modal")),te(this.popupContainer),this.popupContainer=void 0}}renderToolbar(e){this.setPanel(e.target),this.renderPanel(),this.mode=e.overflowMode,e.rteToolbarObj.toolbarObj=new zh({items:e.items,width:"100%",overflowMode:e.overflowMode,beforeCreate:this.toolbarBeforeCreate.bind(this),created:this.toolbarCreated.bind(this),clicked:this.toolbarClicked.bind(this),enablePersistence:e.enablePersistence,enableRtl:e.enableRtl}),e.rteToolbarObj.toolbarObj.isStringTemplate=!0,e.rteToolbarObj.toolbarObj.createElement=this.parent.createElement,e.rteToolbarObj.toolbarObj.appendTo(e.target)}renderDropDownButton(e){let t;e.element.classList.add(Qd),t=e.cssClass+" "+Kh+" "+xQ,this.parent.inlineMode.enable&&q.isDevice&&(t=t+" "+bQ);let i=this;const s=new go({items:e.items,iconCss:e.iconCss,cssClass:t,content:e.content,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,select:this.dropDownSelected.bind(this),beforeOpen:o=>{if(!i.parent.readonly&&i.parent.enabled){for(let a=0;a<o.element.childNodes.length;a++){const l=this.parent.createElement("div");l.innerHTML=s.content.trim(),""!==l.textContent.trim()&&o.element.childNodes[a].textContent.trim()===l.textContent.trim()?o.element.childNodes[a].classList.contains("e-active")||z([o.element.childNodes[a]],"e-active"):W([o.element.childNodes[a]],"e-active")}i.parent.notify(C6,o)}else o.cancel=!0},close:this.dropDownClose.bind(this),open:this.dropDownOpen.bind(this),beforeItemRender:this.beforeDropDownItemRender.bind(this)});return s.isStringTemplate=!0,s.createElement=i.parent.createElement,s.appendTo(e.element),e.element.tabIndex=-1,document.getElementById(s.element.id+"-popup").setAttribute("aria-owns",this.parent.getID()),s}renderListDropDown(e){const t=this;let i=Kh+" "+xQ+(this.parent.inlineMode?" "+bQ:"");i+=" "+("NumberFormatList"===e.itemName?"e-rte-numberformatlist-dropdown":"e-rte-bulletformatlist-dropdown");const s=t.parent.createElement("span",{className:EQ}),r=t.parent.createElement("span",{className:e.cssClass});s.appendChild(r);const o=new go({items:e.items,cssClass:i,content:e.content,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,select:this.dropDownSelected.bind(this),beforeOpen:l=>{if(t.parent.readonly||!t.parent.enabled)return void(l.cancel=!0);const h=l.event?l.event.target:null;t.currentElement=o.element,t.currentDropdown=o,l.event&&"click"===l.event.type&&(h.classList.contains(EQ)||h.parentElement.classList.contains(EQ))?l.cancel=!0:t.parent.notify(C6,l)},close:this.dropDownClose.bind(this),open:this.dropDownOpen.bind(this),beforeItemRender:this.beforeDropDownItemRender.bind(this)});return o.isStringTemplate=!0,o.createElement=t.parent.createElement,o.appendTo(e.element),e.element.tabIndex=-1,document.getElementById(o.element.id+"-popup").setAttribute("aria-owns",this.parent.getID()),1===e.element.childElementCount&&o.element.insertBefore(s,o.element.querySelector(".e-caret")),e.element.tabIndex=-1,o.element.removeAttribute("type"),o}onPopupOverlay(e){f(this.popupOverlay)||(B(this.popupOverlay,".e-popup-container").style.display="none",this.popupOverlay.style.display="none",W([this.popupOverlay],"e-popup-overlay"))}setIsModel(e){B(e,".e-popup-container")?(e.parentElement.style.display="flex",this.popupOverlay=e.nextElementSibling,this.popupOverlay.style.display="block",z([this.popupOverlay],"e-popup-overlay")):(this.popupContainer=this.parent.createElement("div",{className:"e-rte-modal-popup e-popup-container e-center"}),e.parentNode.insertBefore(this.popupContainer,e),this.popupContainer.appendChild(e),this.popupContainer.style.zIndex=e.style.zIndex,this.popupContainer.style.display="flex",e.style.position="relative",z([e],"e-popup-modal"),this.popupOverlay=this.parent.createElement("div",{className:"e-popup-overlay"}),this.popupOverlay.style.zIndex=(parseInt(e.style.zIndex,null)-1).toString(),this.popupOverlay.style.display="block",this.popupContainer.appendChild(this.popupOverlay),k.add(this.popupOverlay,"click touchmove",this.onPopupOverlay,this))}paletteSelection(e,t){const i=e.element.querySelector(".e-control.e-colorpicker"),s=[].slice.call(bt(".e-tile",i.parentElement));W(s,"e-selected");const r=t.querySelector("."+Kh).style.borderBottomColor;s.filter(o=>{o.style.backgroundColor===r&&z([o],"e-selected")})}renderColorPickerDropDown(e,t,i,s){const r=this;let o=Kh+" "+xQ+(this.parent.inlineMode?" "+bQ:"");o+=" "+("backgroundcolor"===t?"e-rte-backgroundcolor-dropdown":"e-rte-fontcolor-dropdown");const a=r.parent.createElement("span",{className:gN}),l=r.parent.createElement("span",{className:e.cssClass});let h,c=f(s)?r.parent.backgroundColor.default:s;l.style.borderBottomColor="backgroundcolor"===t?c:r.parent.fontColor.default,a.appendChild(l);const m=new go({target:i.element.parentElement,cssClass:o,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,beforeOpen:v=>{if(r.parent.readonly||!r.parent.enabled)return void(v.cancel=!0);const w=v.event?v.event.target:null;if(r.currentElement=m.element,r.currentDropdown=m,r.paletteSelection(v,r.currentElement),v.event&&"click"===v.event.type&&(w.classList.contains(gN)||w.parentElement.classList.contains(gN))){v.cancel=!0;const E=w.classList.contains(Kh)?w.style.borderBottomColor:w.querySelector("."+Kh).style.borderBottomColor;r.parent.notify(Lg,{}),h=r.parent.formatter.editorManager.nodeSelection.getRange(r.parent.contentModule.getDocument());const D=h.startContainer.parentNode;("TD"===h.startContainer.nodeName||"TH"===h.startContainer.nodeName||B(h.startContainer.parentNode,"td,th")||r.parent.iframeSettings.enable&&!Xf(D.ownerDocument.querySelector("body"),"e-lib"))&&h.collapsed&&"BackgroundColor"===e.subCommand?r.parent.notify(nN,{item:{command:e.command,subCommand:e.subCommand,value:E}}):r.parent.notify(sN,{item:{command:e.command,subCommand:e.subCommand,value:E}})}else{{const D=za(v.element.querySelector(".e-control.e-colorpicker"),yo);D.showButtons=!v.element.querySelector(".e-color-palette"),D.dataBind()}v.element.onclick=E=>{E.target.classList.contains("e-cancel")&&m.toggle()}}},open:v=>{let w;this.setColorPickerContentWidth(i);const E=v.element.querySelector(".e-control.e-colorpicker");w=v.element.querySelector(".e-color-palette")?E.parentElement.querySelector(".e-palette"):E.parentElement.querySelector("e-handler"),w&&w.focus(),q.isDevice&&this.popupModal(v.element.parentElement),this.pickerRefresh(v)},beforeClose:v=>{const w=v.event?v.event.target:null;if(v.event&&"click"===v.event.type&&(w.classList.contains(gN)||w.parentElement.classList.contains(gN))){const E=w.classList.contains(Kh)?w.style.borderBottomColor:w.querySelector("."+Kh).style.borderBottomColor;return h=r.parent.formatter.editorManager.nodeSelection.getRange(r.parent.contentModule.getDocument()),void(("TD"===h.startContainer.nodeName||"TH"===h.startContainer.nodeName||B(h.startContainer.parentNode,"td,th"))&&h.collapsed?r.parent.notify(nN,{item:{command:e.command,subCommand:e.subCommand,value:E}}):r.parent.notify(sN,{item:{command:e.command,subCommand:e.subCommand,value:E}}))}},close:v=>{r.parent.notify(Lg,{});const w=B(v.element.parentElement,".e-popup-container");if(w&&(w.style.display="none",w.lastElementChild.style.display="none",W([w.lastElementChild],"e-popup-overlay")),q.isDevice&&!f(w)){const E=w.querySelector(".e-dropdown-popup.e-tbar-btn.e-control");E&&(w.parentNode.insertBefore(E,w.nextSibling),E.style.removeProperty("position"),W([E],"e-popup-modal")),te(w),r.popupContainer=void 0}}});return m.isStringTemplate=!0,m.createElement=r.parent.createElement,e.element.setAttribute("role","button"),m.appendTo(e.element),document.getElementById(m.element.id+"-popup").setAttribute("aria-owns",this.parent.getID()),m.element.insertBefore(a,m.element.querySelector(".e-caret")),e.element.tabIndex=-1,m.element.removeAttribute("type"),m.element.onmousedown=()=>{r.parent.notify(vy,{})},m.element.onkeydown=()=>{r.parent.notify(vy,{})},m}pickerRefresh(e){if("Picker"===this.parent.backgroundColor.mode){const t=e.element.parentElement;t.style.width=(t.offsetWidth+5).toString()+"px",za(t,fc).refreshPosition(t),t.style.width=(t.offsetWidth-5).toString()+"px"}}popupModal(e){const t=za(e,fc);t.relateTo=document.body,t.position={X:0,Y:0},t.targetType="container",t.collision={X:"fit",Y:"fit"},t.offsetY=4,t.dataBind(),this.setIsModel(e)}setColorPickerContentWidth(e){const t=e.element.nextSibling;if("0px"===t.style.width){t.style.width="";const i=parseInt(getComputedStyle(t).borderBottomWidth,10);t.style.width=st(t.children[0].offsetWidth+i+i)}}renderColorPicker(e,t){let s,i=this;const r=new yo({enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,inline:!0,value:"#fff",created:()=>{r.setProperties({value:"backgroundcolor"===t?i.parent.backgroundColor.default:i.parent.fontColor.default})},mode:"backgroundcolor"===t?i.parent.backgroundColor.mode:i.parent.fontColor.mode,modeSwitcher:"backgroundcolor"===t?i.parent.backgroundColor.modeSwitcher:i.parent.fontColor.modeSwitcher,beforeTileRender:o=>{o.element.classList.add("e-rte-square-palette"),o.element.classList.add("e-custom-tile"),""===o.value&&o.element.classList.add("e-nocolor-item")},change:o=>{const a=o.currentValue.rgba;o.item={command:e.command,subCommand:e.subCommand,value:a},i.parent.notify(Lg,{}),i.currentElement.querySelector("."+Kh).style.borderBottomColor=a;const l=i.parent.formatter.editorManager.nodeSelection.getRange(i.parent.contentModule.getDocument());("TD"===l.startContainer.nodeName||"TH"===l.startContainer.nodeName||"BODY"===l.startContainer.nodeName||B(l.startContainer.parentNode,"td,th"))&&l.collapsed&&"BackgroundColor"===e.subCommand?i.parent.notify(nN,o):i.parent.notify(sN,o),i.currentDropdown.toggle()},beforeModeSwitch:o=>{s=r.value,""===s&&r.setProperties({value:"Picker"===o.mode?"#008000ff":""},!0),r.showButtons="Palette"!==o.mode}});return r.isStringTemplate=!0,r.columns="backgroundcolor"===t?this.parent.backgroundColor.columns:this.parent.fontColor.columns,r.presetColors="backgroundcolor"===t?this.parent.backgroundColor.colorCode:this.parent.fontColor.colorCode,r.cssClass="backgroundcolor"===t?"e-rte-backgroundcolor-colorpicker":"e-rte-fontcolor-colorpicker",r.createElement=this.parent.createElement,r.appendTo(document.getElementById(e.target)),r}renderPanel(){this.getPanel().classList.add(E6)}getPanel(){return this.toolbarPanel}setPanel(e){this.toolbarPanel=e}}class Nme{constructor(e,t){this.tools={},this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?Ae(this.tools,X1,RQ(this.parent.toolbarSettings.itemConfigs),!0):this.tools=X1}addEventListener(){this.parent.on(qC,this.setRtl,this),this.parent.on(Cs,this.removeEventListener,this)}removeEventListener(){this.parent.off(qC,this.setRtl),this.parent.off(Cs,this.removeEventListener)}setRtl(e){f(this.toolbarObj)||this.toolbarObj.setProperties({enableRtl:e.enableRtl})}getClass(e){let t;switch(e){case"fontsize":t="e-rte-inline-size-template";break;case"fontcolor":case"backgroundcolor":t="e-rte-inline-color-template";break;default:t="e-rte-inline-template"}return t}getTemplateObject(e,t){let i;switch(e){case"fontcolor":case"backgroundcolor":case"numberformatlist":case"bulletformatlist":i="span";break;default:i="button"}return{command:this.tools[e.toLocaleLowerCase()].command,subCommand:this.tools[e.toLocaleLowerCase()].subCommand,template:this.parent.createElement(i,{id:this.parent.getID()+"_"+t+"_"+this.tools[e.toLocaleLowerCase()].id}).outerHTML,cssClass:this.parent.inlineMode.enable?this.getClass(e):"",tooltipText:kQ(e,this.locator)}}getObject(e,t){const i=e.toLowerCase();if(-1!==IQ.indexOf(i))return this.getTemplateObject(i,t);switch(i){case"|":return{type:"Separator"};case"-":return{type:"Separator",cssClass:"e-rte-horizontal-separator"};default:return{id:this.parent.getID()+"_"+t+"_"+this.tools[i.toLocaleLowerCase()].id,prefixIcon:this.tools[i.toLocaleLowerCase()].icon,tooltipText:kQ(i,this.locator),command:this.tools[i.toLocaleLowerCase()].command,subCommand:this.tools[i.toLocaleLowerCase()].subCommand}}}getItems(e,t){if(this.parent.toolbarSettings.items.length<1)return[];const i=[];for(const s of e)if("string"==typeof s)i.push(this.getObject(s,t));else{if(!f(s.click)){const r=s,o=r.click;r.click=()=>{r.undo&&0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),o.call(this),this.parent.formatter.getUndoRedoStack()[this.parent.formatter.getUndoRedoStack().length-1].text.trim()!==this.parent.inputElement.innerHTML.trim()&&r.undo&&this.parent.formatter.saveData()}}i.push(s)}return i}getToolbarOptions(e){return{target:e.target,rteToolbarObj:this,items:this.getItems(e.items,e.container),overflowMode:e.mode,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl}}render(e){this.toolbarRenderer=this.renderFactory.getRenderer(Gs.Toolbar),this.toolbarRenderer.renderToolbar(this.getToolbarOptions(e))}}class Bme{constructor(e,t){this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener()}initializeInstance(){this.toolbarRenderer=this.renderFactory.getRenderer(Gs.Toolbar)}beforeRender(e){const t=e.item;t.cssClass&&z([e.element],t.cssClass),("Alignments"===t.command||"JustifyLeft"===t.subCommand||"JustifyRight"===t.subCommand||"JustifyCenter"===t.subCommand)&&e.element.setAttribute("title",kQ(t.subCommand.toLocaleLowerCase(),this.locator))}dropdownContent(e,t,i){return'<span style="display: inline-flex;width:'+("quick"===t?"auto":e)+'" ><span class="e-rte-dropdown-btn-text">'+i+"</span></span>"}renderDropDowns(e){this.initializeInstance();const t=e.containerType,i=e.container;IQ.forEach(s=>{let r;if(-1!==TQ(s,e.items))switch(s){case"numberformatlist":{if(r=X("#"+this.parent.getID()+"_"+t+"_NumberFormatList",i),f(r)||r.classList.contains(Qd))return;const o=this.parent.numberFormatList.types.slice();o.forEach(a=>{Object.defineProperties(a,{command:{value:"Lists",enumerable:!0},subCommand:{value:"NumberFormatList",enumerable:!0}})}),this.numberFormatListDropDown=this.toolbarRenderer.renderListDropDown({cssClass:"e-order-list "+Kh+" "+I6,itemName:"NumberFormatList",items:o,element:r});break}case"bulletformatlist":{if(r=X("#"+this.parent.getID()+"_"+t+"_BulletFormatList",i),f(r)||r.classList.contains(Qd))return;const o=this.parent.bulletFormatList.types.slice();o.forEach(a=>{Object.defineProperties(a,{command:{value:"Lists",enumerable:!0},subCommand:{value:"BulletFormatList",enumerable:!0}})}),this.bulletFormatListDropDown=this.toolbarRenderer.renderListDropDown({cssClass:"e-unorder-list "+Kh+" "+I6,itemName:"BulletFormatList",items:o,element:r});break}case"formats":{if(r=X("#"+this.parent.getID()+"_"+t+"_Formats",i),f(r)||r.classList.contains(Qd))return;const o=this.parent.format.types.slice();o.forEach(l=>{Object.defineProperties(l,{command:{value:"Formats",enumerable:!0},subCommand:{value:l.value,enumerable:!0}})});const a=f(this.parent.format.default)?o[0].text:this.parent.format.default;this.formatDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"quick"===t?"e-formats e-icons":"",content:this.dropdownContent(this.parent.format.width,t,"quick"===t?"":Ey(o,a,"text","text")),cssClass:Zf+" "+Cy+" e-formats-tbar-btn",itemName:"Formats",items:o,element:r});break}case"fontname":{if(r=X("#"+this.parent.getID()+"_"+t+"_FontName",i),f(r)||r.classList.contains(Qd))return;const o=this.parent.fontFamily.items.slice();o.forEach(l=>{Object.defineProperties(l,{command:{value:"Font",enumerable:!0},subCommand:{value:"FontName",enumerable:!0}})});const a=f(this.parent.fontFamily.default)?o[0].text:this.parent.fontFamily.default;this.fontNameDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"quick"===t?"e-font-name e-icons":"",content:this.dropdownContent(this.parent.fontFamily.width,t,"quick"===t?"":Ey(o,a,"text","text")),cssClass:Zf+" "+Cy+" e-font-name-tbar-btn",itemName:"FontName",items:o,element:r}),f(this.parent.fontFamily.default)||(this.getEditNode().style.fontFamily=this.parent.fontFamily.default);break}case"fontsize":{if(r=X("#"+this.parent.getID()+"_"+t+"_FontSize",i),f(r)||r.classList.contains(Qd))return;const o=this.parent.fontSize.items.slice();o.forEach(l=>{Object.defineProperties(l,{command:{value:"Font",enumerable:!0},subCommand:{value:"FontSize",enumerable:!0}})});const a=f(this.parent.fontSize.default)?o[1].text:this.parent.fontSize.default;this.fontSizeDropDown=this.toolbarRenderer.renderDropDownButton({content:this.dropdownContent(this.parent.fontSize.width,t,DQ(Ey(o,a.replace(/\s/g,""),"value","text"))),cssClass:Zf+" "+Cy+" e-font-size-tbar-btn",itemName:"FontSize",items:o,element:r}),f(this.parent.fontSize.default)||(this.getEditNode().style.fontSize=this.parent.fontSize.default);break}case"alignments":if(r=X("#"+this.parent.getID()+"_"+t+"_Alignments",i),f(r)||r.classList.contains(Qd))return;this.alignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-justify-left e-icons",cssClass:Zf+" "+Cy+" e-alignment-tbar-btn",itemName:"Alignments",items:vN,element:r});break;case"align":this.imageAlignmentDropDown(t,i,r);break;case"display":this.imageDisplayDropDown(t,i,r);break;case"tablerows":this.rowDropDown(t,i,r);break;case"tablecolumns":this.columnDropDown(t,i,r);break;case"tablecell":this.cellDropDown(t,i,r);break;case"tablecellverticalalign":this.verticalAlignDropDown(t,i,r);break;case"styles":this.tableStylesDropDown(t,i,r)}})}getUpdateItems(e,t){const i=e.slice();return i.forEach(s=>{Object.defineProperties(s,{command:{value:"Format"===t?"Formats":"Font",enumerable:!0},subCommand:{value:"Format"===t?s.value:t,enumerable:!0}})}),i}onPropertyChanged(e){const t=e.newProp;let i,s;for(const r of Object.keys(t))switch(r){case"fontFamily":if(this.fontNameDropDown)for(const o of Object.keys(t.fontFamily))switch(o){case"default":case"width":{const a=this.fontNameDropDown.items;i=f(B(this.fontNameDropDown.element,"."+_6))?"toolbar":"quick";const l=f(this.parent.fontFamily.default)?a[0].text:this.parent.fontFamily.default;s=this.dropdownContent(this.parent.fontFamily.width,i,"quick"===i?"":Ey(a,l,"text","text")),this.fontNameDropDown.setProperties({content:s}),f(this.parent.fontFamily.default)?this.getEditNode().style.removeProperty("font-family"):this.getEditNode().style.fontFamily=this.parent.fontFamily.default;break}case"items":this.fontNameDropDown.setProperties({items:this.getUpdateItems(t.fontFamily.items,"FontName")})}break;case"fontSize":if(this.fontSizeDropDown)for(const o of Object.keys(t.fontSize))switch(o){case"default":case"width":{const a=this.fontSizeDropDown.items;i=f(B(this.fontSizeDropDown.element,"."+_6))?"toolbar":"quick";const l=f(this.parent.fontSize.default)?a[1].text:this.parent.fontSize.default;s=this.dropdownContent(this.parent.fontSize.width,i,DQ(Ey(a,l.replace(/\s/g,""),"value","text"))),this.fontSizeDropDown.setProperties({content:s}),f(this.parent.fontSize.default)?this.getEditNode().style.removeProperty("font-size"):this.getEditNode().style.fontSize=this.parent.fontSize.default;break}case"items":this.fontSizeDropDown.setProperties({items:this.getUpdateItems(t.fontSize.items,"FontSize")})}break;case"format":if(this.formatDropDown)for(const o of Object.keys(t.format))switch(o){case"default":case"width":{const a=this.formatDropDown.items;i=f(B(this.formatDropDown.element,"."+_6))?"toolbar":"quick";const l=f(this.parent.format.default)?a[0].text:this.parent.format.default;s=this.dropdownContent(this.parent.format.width,i,"quick"===i?"":Ey(a,l,"text","text")),this.formatDropDown.setProperties({content:s});break}case"types":this.formatDropDown.setProperties({items:this.getUpdateItems(t.format.types,"Format")})}}}getEditNode(){return this.parent.contentModule.getEditPanel()}rowDropDown(e,t,i){!(i=X("#"+this.parent.getID()+"_"+e+"_TableRows",t)).classList.contains(Qd)&&(this.tableRowsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-rows e-icons",cssClass:Zf+" "+Cy+" "+RS,itemName:"TableRows",items:L6,element:i}))}columnDropDown(e,t,i){!(i=X("#"+this.parent.getID()+"_"+e+"_TableColumns",t)).classList.contains(Qd)&&(this.tableColumnsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-columns e-icons",cssClass:Zf+" "+Cy+" "+RS,itemName:"TableColumns",items:M6,element:i}))}cellDropDown(e,t,i){!(i=X("#"+this.parent.getID()+"_"+e+"_TableCell",t)).classList.contains(Qd)&&(this.tableRowsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-cell e-icons",cssClass:Zf+" "+Cy+" "+RS,itemName:"TableCell",items:XBe,element:i}))}verticalAlignDropDown(e,t,i){!(i=X("#"+this.parent.getID()+"_"+e+"_TableCellVerticalAlign",t)).classList.contains(Qd)&&(this.tableCellVerticalAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-cell-ver-align e-icons",cssClass:Zf+" "+Cy+" "+RS,itemName:"TableCellVerticalAlign",items:O6,element:i}))}imageDisplayDropDown(e,t,i){!(i=X("#"+this.parent.getID()+"_"+e+"_Display",t)).classList.contains(Qd)&&(this.displayDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-display e-icons",cssClass:Zf+" "+Cy+" "+RS,itemName:"Display",items:A6,element:i}))}imageAlignmentDropDown(e,t,i){!(i=X("#"+this.parent.getID()+"_"+e+"_Align",t)).classList.contains(Qd)&&(this.imageAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-justify-left e-icons",cssClass:Zf+" "+yQ+" "+RS,itemName:"Align",items:YBe,element:i}))}tableStylesDropDown(e,t,i){!(i=X("#"+this.parent.getID()+"_"+e+"_Styles",t)).classList.contains(Qd)&&(this.imageAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-style e-icons",cssClass:Zf+" "+yQ+" "+RS,itemName:"Styles",items:this.parent.tableSettings.styles,element:i}))}removeDropDownClasses(e){W([e],[Qd,Zf,yQ,Cy])}destroyDropDowns(){this.formatDropDown&&(this.removeDropDownClasses(this.formatDropDown.element),this.formatDropDown.destroy()),this.fontNameDropDown&&(this.removeDropDownClasses(this.fontNameDropDown.element),this.fontNameDropDown.destroy()),this.fontSizeDropDown&&(this.removeDropDownClasses(this.fontSizeDropDown.element),this.fontSizeDropDown.destroy()),this.alignDropDown&&(this.removeDropDownClasses(this.alignDropDown.element),this.alignDropDown.destroy()),this.imageAlignDropDown&&(this.removeDropDownClasses(this.imageAlignDropDown.element),this.imageAlignDropDown.destroy()),this.displayDropDown&&(this.removeDropDownClasses(this.displayDropDown.element),this.displayDropDown.destroy()),this.tableRowsDropDown&&(this.removeDropDownClasses(this.tableRowsDropDown.element),this.tableRowsDropDown.destroy()),this.tableColumnsDropDown&&(this.removeDropDownClasses(this.tableColumnsDropDown.element),this.tableColumnsDropDown.destroy()),this.tableCellVerticalAlignDropDown&&(this.removeDropDownClasses(this.tableCellVerticalAlignDropDown.element),this.tableCellVerticalAlignDropDown.destroy()),this.numberFormatListDropDown&&(this.removeDropDownClasses(this.numberFormatListDropDown.element),this.numberFormatListDropDown.destroy()),this.bulletFormatListDropDown&&(this.removeDropDownClasses(this.bulletFormatListDropDown.element),this.bulletFormatListDropDown.destroy())}setRtl(e){this.formatDropDown&&this.formatDropDown.setProperties({enableRtl:e.enableRtl}),this.fontNameDropDown&&this.fontNameDropDown.setProperties({enableRtl:e.enableRtl}),this.fontSizeDropDown&&this.fontSizeDropDown.setProperties({enableRtl:e.enableRtl}),this.alignDropDown&&this.alignDropDown.setProperties({enableRtl:e.enableRtl}),this.imageAlignDropDown&&this.imageAlignDropDown.setProperties({enableRtl:e.enableRtl}),this.displayDropDown&&this.displayDropDown.setProperties({enableRtl:e.enableRtl}),this.numberFormatListDropDown&&this.numberFormatListDropDown.setProperties({enableRtl:e.enableRtl}),this.bulletFormatListDropDown&&this.bulletFormatListDropDown.setProperties({enableRtl:e.enableRtl})}addEventListener(){this.parent.isDestroyed||(this.parent.on(LX,this.beforeRender,this),this.parent.on(jC,this.onIframeMouseDown,this),this.parent.on(qC,this.setRtl,this),this.parent.on(Cs,this.removeEventListener,this),this.parent.on(Ul,this.onPropertyChanged,this))}onIframeMouseDown(){J1(document,"mousedown")}removeEventListener(){this.parent.isDestroyed||(this.parent.off(jC,this.onIframeMouseDown),this.parent.off(qC,this.setRtl),this.parent.off(LX,this.beforeRender),this.parent.off(Cs,this.removeEventListener),this.parent.off(Ul,this.onPropertyChanged))}}class Hme{constructor(){this.services={}}register(e,t){f(this.services[e])&&(this.services[e]=t)}getService(e){if(f(this.services[e]))throw`The service ${e} is not registered`;return this.services[e]}}class Vme{constructor(){this.rendererMap={}}addRenderer(e,t){const i=Oh(Gs,e);f(this.rendererMap[i])&&(this.rendererMap[i]=t)}getRenderer(e){const t=Oh(Gs,e);if(f(this.rendererMap[t]))throw`The renderer ${t} is not found`;return this.rendererMap[t]}}class y2e{constructor(e){this.parent=e,this.addEventListener(),this.serviceLocator=new Hme,this.serviceLocator.register("rendererFactory",new Vme)}addEventListener(){this.parent.on(YF,this.toolbarClick,this),this.parent.on(Q_,this.dropDownSelect,this),this.parent.on(sN,this.renderSelection,this),this.parent.on(Cs,this.removeEventListener,this)}toolbarClick(e){if(!f(e.item)){if(!f(e.item.controlParent)){let t=e.item.controlParent.activeEle;t&&(t.tabIndex=-1)}("NumberFormatList"===e.item.command||"BulletFormatList"===e.item.command)&&(e.originalEvent.target.classList.contains("e-order-list")||e.originalEvent.target.classList.contains("e-unorder-list"))&&(e.item.command="Lists",e.item.subCommand="NumberFormatList"===e.item.subCommand?"OL":"UL"),"Lists"===e.item.command&&e.originalEvent.target.classList.contains("e-caret")&&(e.originalEvent.target.parentElement.classList.contains("e-rte-bulletformatlist-dropdown")||e.originalEvent.target.parentElement.classList.contains("e-rte-numberformatlist-dropdown"))&&(e.item.command=e.item.subCommand=null),this.parent.notify(kX,e),this.parent.notify("markdown-toolbar-click",e)}}dropDownSelect(e){if(this.parent.notify(Lg,{}),!document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))||!e.item||"Images"!==e.item.command&&"Display"!==e.item.command&&"Table"!==e.item.command){const t=e.item.controlParent&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.tableQTBar&&this.parent.quickToolbarModule.tableQTBar.element.contains(e.item.controlParent.element)?"Table":null;this.parent.formatter.process(this.parent,e,e.originalEvent,"Lists"===e.item.command?{listStyle:e.item.value,listImage:e.item.listImage,type:e.item.subCommand}:t)}this.parent.notify(vy,{})}renderSelection(e){this.parent.notify(Lg,{}),this.parent.formatter.process(this.parent,e,e.originalEvent,null),this.parent.notify(vy,{})}removeEventListener(){this.parent.off(YF,this.toolbarClick),this.parent.off(Q_,this.dropDownSelect),this.parent.off(sN,this.renderSelection),this.parent.off(Cs,this.removeEventListener)}}var wN,W6=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const C2e={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222,"]":221,"[":219,"=":187};let GC=wN=class extends Rf{constructor(e,t){super(t,e),this.keyPressHandler=i=>{const s=i.altKey,r=i.ctrlKey,o=i.shiftKey,a=i.metaKey,l=i.which,h=Object.keys(this.keyConfigs);for(const c of h){const m=this.keyConfigs[c].split(",");for(const b of m){const v=wN.getKeyConfigData(b.trim());s===v.altKey&&(r===v.ctrlKey||a)&&o===v.shiftKey&&l===v.keyCode&&(i.action=c)}}this.keyAction&&this.keyAction(i)},this.bind()}destroy(){this.unwireEvents(),super.destroy()}onPropertyChanged(e,t){}bind(){this.wireEvents()}getModuleName(){return"keyboard"}wireEvents(){this.element.addEventListener(this.eventName,this.keyPressHandler)}unwireEvents(){this.element.removeEventListener(this.eventName,this.keyPressHandler)}static getKeyConfigData(e){if(e in this.configCache)return this.configCache[e];const t=e.toLowerCase().split("+"),i={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return i.keyCode=t[t.length-1].length>1&&Number(t[t.length-1])?Number(t[t.length-1]):wN.getKeyCode(t[t.length-1]),wN.configCache[e]=i,i}static getKeyCode(e){return C2e[e]||e.toUpperCase().charCodeAt(0)}};GC.configCache={},W6([_({})],GC.prototype,"keyConfigs",void 0),W6([_("keyup")],GC.prototype,"eventName",void 0),W6([G()],GC.prototype,"keyAction",void 0),GC=wN=W6([as],GC);class zme{constructor(e,t){this.tools={},this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?Ae(this.tools,X1,RQ(this.parent.toolbarSettings.itemConfigs),!0):this.tools=X1}initializeInstance(){this.toolbarRenderer=this.renderFactory.getRenderer(Gs.Toolbar)}renderColorPickerInput(e){this.initializeInstance();const t=e.containerType,i=e.container;let s,r;IQ.forEach(o=>{if(-1!==TQ(o,e.items))switch(o){case"fontcolor":{s=this.parent.getID()+"_"+t+"_FontColor_Target";const a=this.parent.createElement("input");a.id=s,a.classList.add("e-rte-fontcolor-element"),document.body.appendChild(a),r={cssClass:this.tools[o.toLocaleLowerCase()].icon+" "+Kh+" "+I6,value:this.tools[o.toLocaleLowerCase()].value,command:this.tools[o.toLocaleLowerCase()].command,subCommand:this.tools[o.toLocaleLowerCase()].subCommand,element:X("#"+this.parent.getID()+"_"+t+"_FontColor",i),target:s},this.fontColorPicker=this.toolbarRenderer.renderColorPicker(r,"fontcolor"),this.fontColorDropDown=this.toolbarRenderer.renderColorPickerDropDown(r,"fontcolor",this.fontColorPicker);break}case"backgroundcolor":{s=this.parent.getID()+"_"+t+"_BackgroundColor_Target";const a=this.parent.createElement("input");a.id=s,a.classList.add("e-rte-backgroundcolor-element"),document.body.appendChild(a),r={cssClass:this.tools[o.toLocaleLowerCase()].icon+" "+Kh+" "+I6,value:this.tools[o.toLocaleLowerCase()].value,command:this.tools[o.toLocaleLowerCase()].command,subCommand:this.tools[o.toLocaleLowerCase()].subCommand,element:X("#"+this.parent.getID()+"_"+t+"_BackgroundColor",i),target:s},this.backgroundColorPicker=this.toolbarRenderer.renderColorPicker(r,"backgroundcolor"),this.backgroundColorDropDown=this.toolbarRenderer.renderColorPickerDropDown(r,"backgroundcolor",this.backgroundColorPicker,this.defaultColorPicker);break}}})}destroy(){this.removeEventListener(),this.destroyColorPicker()}destroyColorPicker(){if(this.fontColorPicker&&!this.fontColorPicker.isDestroyed&&this.fontColorPicker.destroy(),this.backgroundColorPicker&&!this.backgroundColorPicker.isDestroyed&&this.backgroundColorPicker.destroy(),this.fontColorDropDown&&!this.fontColorDropDown.isDestroyed){const e=this.fontColorDropDown.element.querySelector(".e-rte-color-content");e&&te(e),this.fontColorDropDown.destroy()}if(this.backgroundColorDropDown&&!this.backgroundColorDropDown.isDestroyed){const e=this.backgroundColorDropDown.element.querySelector(".e-rte-color-content");e&&(this.defaultColorPicker=e.children[0].style.borderBottomColor,te(e)),this.backgroundColorDropDown.destroy()}}setRtl(e){this.fontColorPicker&&(this.fontColorPicker.setProperties({enableRtl:e.enableRtl}),this.fontColorDropDown.setProperties({enableRtl:e.enableRtl})),this.backgroundColorPicker&&(this.backgroundColorPicker.setProperties({enableRtl:e.enableRtl}),this.backgroundColorDropDown.setProperties({enableRtl:e.enableRtl}))}addEventListener(){this.parent.on(nme,this.renderColorPickerInput,this),this.parent.on(qC,this.setRtl,this),this.parent.on(Cs,this.destroy,this),this.parent.on(AX,this.destroyColorPicker,this),this.parent.on(Ul,this.onPropertyChanged,this)}onPropertyChanged(e){const t=e.newProp;let i;for(const s of Object.keys(t))switch(s){case"fontColor":if(this.fontColorPicker)for(const r of Object.keys(t.fontColor))switch(r){case"default":this.fontColorPicker.setProperties({value:t.fontColor.default}),i=this.fontColorDropDown.element,i.querySelector("."+this.tools.fontcolor.icon).style.borderBottomColor=t.fontColor.default;break;case"mode":this.fontColorPicker.setProperties({mode:t.fontColor.mode});break;case"columns":this.fontColorPicker.setProperties({columns:t.fontColor.columns});break;case"colorCode":this.fontColorPicker.setProperties({presetColors:t.fontColor.colorCode});break;case"modeSwitcher":this.fontColorPicker.setProperties({modeSwitcher:t.fontColor.modeSwitcher})}break;case"backgroundColor":if(this.backgroundColorPicker)for(const r of Object.keys(t.backgroundColor))switch(r){case"default":this.backgroundColorPicker.setProperties({value:t.backgroundColor.default}),i=this.backgroundColorDropDown.element,i.querySelector("."+this.tools.backgroundcolor.icon).style.borderBottomColor=t.backgroundColor.default;break;case"mode":this.backgroundColorPicker.setProperties({mode:t.backgroundColor.mode});break;case"columns":this.backgroundColorPicker.setProperties({columns:t.backgroundColor.columns});break;case"colorCode":this.backgroundColorPicker.setProperties({presetColors:t.backgroundColor.colorCode});break;case"modeSwitcher":this.backgroundColorPicker.setProperties({modeSwitcher:t.backgroundColor.modeSwitcher})}}}removeEventListener(){this.parent.off(nme,this.renderColorPickerInput),this.parent.off(Cs,this.destroy),this.parent.off(qC,this.setRtl),this.parent.off(AX,this.destroyColorPicker),this.parent.off(Ul,this.onPropertyChanged)}}const _2e=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function Vu(){let n=!1;return q.isDevice&&q.isIos&&(n=!0),n}function LS(n,e){if("BODY"===n.nodeName&&!f(e)){const t=top.window.document.querySelector(e);f(t)||t.contentWindow.focus()}}class R2e{constructor(e){this.parent=e,this.addEventListener()}addEventListener(){this.parent.on(MX,this.commandCallBack,this),this.parent.on(Cs,this.removeEventListener,this)}commandCallBack(e){"Undo"!==e.requestType&&"Redo"!==e.requestType&&this.parent.formatter.saveData(),this.parent.notify(UC,{args:e}),this.parent.notify("count",{})}removeEventListener(){this.parent.off(MX,this.commandCallBack),this.parent.off(Cs,this.removeEventListener)}}const MQ="keydown",eR="action",G6="format-type",dl="keydown-handler",MS="keyup-handler",SN="keyup",xN="model_changed_plugin",OQ="model_changed",qme="ms_word_cleanup_plugin",$me="actionBegin";const O2e={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",underline:"ctrl+u",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=",indents:"ctrl+]",outdents:"ctrl+[","html-source":"ctrl+shift+h","full-screen":"ctrl+shift+f","decrease-fontsize":"ctrl+shift+<","increase-fontsize":"ctrl+shift+>","justify-center":"ctrl+e","justify-full":"ctrl+j","justify-left":"ctrl+l","justify-right":"ctrl+r","clear-format":"ctrl+shift+r","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o",space:"32",enter:"13",tab:"tab",delete:"46"},ige=["BR","IMG"],NQ="INSERT-IMAGE",sge="INSERT-TABLE",nge="INSERT-LINK",rge="INSERT-ROW",oge="INSERT-COLUMN",age="DELETE-ROW",lge="DELETE-COLUMN",hge="REMOVE-TABLE",cge="TABLE-HEADER",dge="TABLE_VERTICAL_ALIGN",uge="TABLE_MERGE",pge="TABLE_VERTICAL_SPLIT",fge="TABLE_HORIZONTAL_SPLIT",mge="alignment-type",gge="indent-type",nI=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video","body"],Iy=["td","th"],EN=["table","tbody","td","tfoot","th","thead","tr"],bge="selection-type",yge="inserthtml-type",vge="insert-text-type",Cge="clear-type",W2e=["area","base","br","embed","hr","img","input","param","source","track","wbr","iframe","td"];class Jd{constructor(){this.startNodeName=[],this.endNodeName=[]}saveInstance(e,t){return this.range=e.cloneRange(),this.rootNode=this.documentFromRange(e),this.body=t,this.startContainer=this.getNodeArray(e.startContainer,!0),this.endContainer=this.getNodeArray(e.endContainer,!1),this.startOffset=e.startOffset,this.endOffset=e.endOffset,this.html=this.body.innerHTML,this}documentFromRange(e){return 9===e.startContainer.nodeType?e.startContainer:e.startContainer.ownerDocument}getRange(e){const t=this.get(e),i=t&&t.rangeCount>0?t.getRangeAt(t.rangeCount-1):e.createRange();return i.startContainer!==e||i.endContainer!==e||i.startOffset||i.endOffset||(i.setStart(e.body,0),i.collapse(!0)),i}get(e){return e.defaultView.getSelection()}save(e,t){return e=e?e.cloneRange():this.getRange(t),this.saveInstance(e,t.body)}getIndex(e){let t,i=0;if(e=e.previousSibling||"BR"!==e.tagName?e.previousSibling:e)for(let s=e.nodeType;e;null)t=e.nodeType,i++,s=t,e=e.previousSibling;return i}isChildNode(e,t){for(let i=0;i<t.childNodes.length;i++)if(e.indexOf(t.childNodes[i])>-1)return!0;return!1}getNode(e,t,i){return t!==e||3!==e.nodeType&&e.firstChild&&-1===i.indexOf(e.firstChild)&&!this.isChildNode(i,e)?-1===i.indexOf(e.firstChild)&&e.firstChild&&!this.isChildNode(i,e)?e.firstChild:e.nextSibling?e.nextSibling:e.parentNode?e.parentNode:null:null}getNodeCollection(e){let t=e.startContainer.childNodes[e.startOffset]||e.startContainer;const i=e.endContainer.childNodes[e.endOffset>0?e.endOffset-1:e.endOffset]||e.endContainer;if((t===i||"BR"===t.nodeName&&t===e.endContainer.childNodes[e.endOffset])&&0===t.childNodes.length)return[t];if(e.startOffset===e.endOffset&&0!==e.startOffset&&"PRE"===e.startContainer.nodeName)return["BR"===t.nodeName||"#text"===t.nodeName?t:t.childNodes[0]];const s=[];do{-1===s.indexOf(t)&&s.push(t),t=this.getNode(t,i,s)}while(t);return s}getParentNodeCollection(e){return this.getParentNodes(this.getNodeCollection(e),e)}getParentNodes(e,t){e=e.reverse();for(let i=0;i<e.length;i++)-1!==e.indexOf(e[i].parentNode)||3===e[i].nodeType&&t.startContainer!==t.endContainer&&t.startContainer.parentNode!==t.endContainer.parentNode?(e.splice(i,1),i--):3===e[i].nodeType&&(e[i]=e[i].parentNode);return e}getSelectionNodeCollection(e){return this.getSelectionNodes(this.getNodeCollection(e))}getSelectionNodeCollectionBr(e){return this.getSelectionNodesBr(this.getNodeCollection(e))}getSelectionNodes(e){e=e.reverse();const t=new RegExp(String.fromCharCode(8203),"g");for(let i=0;i<e.length;i++)(3!==e[i].nodeType||""===e[i].textContent.trim()||1===e[i].textContent.length&&e[i].textContent.match(t))&&(e.splice(i,1),i--);return e.reverse()}getSelectionNodesBr(e){e=e.reverse();const t=new RegExp(String.fromCharCode(8203),"g");for(let i=0;i<e.length;i++)"BR"!==e[i].nodeName&&(3!==e[i].nodeType||""===e[i].textContent.trim()||1===e[i].textContent.length&&e[i].textContent.match(t))&&(e.splice(i,1),i--);return e.reverse()}getInsertNodeCollection(e){return this.getInsertNodes(this.getNodeCollection(e))}getInsertNodes(e){e=e.reverse();for(let t=0;t<e.length;t++)(0!==e[t].childNodes.length&&3!==e[t].nodeType||3===e[t].nodeType&&""===e[t].textContent)&&(e.splice(t,1),t--);return e.reverse()}getNodeArray(e,t,i){const s=[];for(t?this.startNodeName=[]:this.endNodeName=[];e!==(i||this.rootNode)&&!f(e);null)t?this.startNodeName.push(e.nodeName.toLowerCase()):this.endNodeName.push(e.nodeName.toLowerCase()),s.push(this.getIndex(e)),e=e.parentNode;return s}setRangePoint(e,t,i,s){let r=this.rootNode,o=i.length,a=s;for(;o--;null)r=r&&r.childNodes[i[o]];return r&&a>=0&&"html"!==r.nodeName&&(3===r.nodeType&&"&nbsp;"===r.nodeValue.replace(/\u00a0/g,"&nbsp;")&&(a=r.textContent.length),e[t?"setStart":"setEnd"](r,a)),e}restore(){let e=this.range.cloneRange();return e=this.setRangePoint(e,!0,this.startContainer,this.startOffset),e=this.setRangePoint(e,!1,this.endContainer,this.endOffset),this.selectRange(this.rootNode,e),e}selectRange(e,t){this.setRange(e,t),this.save(t,e)}setRange(e,t){const i=this.get(e);i.removeAllRanges(),i.addRange(t)}setSelectionText(e,t,i,s,r){const o=e.createRange();o.setStart(t,s),o.setEnd(i,r),this.setRange(e,o)}setSelectionContents(e,t){const i=e.createRange();i.selectNode(t),this.setRange(e,i)}setSelectionNode(e,t){const i=e.createRange();i.selectNodeContents(t),this.setRange(e,i)}getSelectedNodes(e){return this.getNodeCollection(this.getRange(e))}Clear(e){this.get(e).removeAllRanges()}insertParentNode(e,t,i){i.surroundContents(t),this.selectRange(e,i)}setCursorPoint(e,t,i){const s=e.createRange(),r=e.defaultView.getSelection();s.setStart(t,i),s.collapse(!0),r.removeAllRanges(),r.addRange(s)}}const pn_startSelection="e-editor-select-start",pn_endSelection="e-editor-select-end";class $6{constructor(e,t){this.parent=e,this.nodeSelection=new Jd,this.currentDocument=t}contents(e){return e&&"IFRAME"!==e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]}isBlockNode(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&nI.indexOf(e.tagName.toLowerCase())>=0}isLink(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&"a"===e.tagName.toLowerCase()}blockParentNode(e){for(;e&&e.parentNode!==this.parent&&(!e.parentNode||!this.hasClass(e.parentNode,"e-node-inner"));null)if(this.isBlockNode(e=e.parentNode))return e;return e}rawAttributes(e){const t={},i=e.attributes;if(i.length>0)for(let s=0;s<i.length;s++){const r=i[s];t[r.nodeName]=r.value}return t}attributes(e){if(!e)return"";let t="";const i=this.rawAttributes(e),s=Object.keys(i).sort();for(let r=0;r<s.length;r++){const o=s[r];let a=i[o];a.indexOf("'")<0&&a.indexOf('"')>=0?t+=" "+o+"='"+a+"'":(a.indexOf('"')>=0&&a.indexOf("'")>=0&&(a=a.replace(/"/g,"&quot;")),t+=" "+o+'="'+a+'"')}return t}clearAttributes(e){for(let t=e.attributes,i=t.length-1;i>=0;i--)e.removeAttribute(t[i].nodeName)}openTagString(e){return"<"+e.tagName.toLowerCase()+this.attributes(e)+">"}closeTagString(e){return"</"+e.tagName.toLowerCase()+">"}createTagString(e,t,i){return"<"+e.toLowerCase()+this.attributes(t)+">"+i+"</"+e.toLowerCase()+">"}isList(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0}isElement(e){return e===this.parent}isEditable(e){return(!e.getAttribute||"true"===e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0}hasClass(e,t){return e&&e.classList&&e.classList.contains(t)}replaceWith(e,t){e.parentNode.insertBefore(this.parseHTMLFragment(t),e),te(e)}parseHTMLFragment(e){let t=Be("template");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)}wrap(e,t){return e.parentNode.insertBefore(t,e),(t=e.previousSibling).appendChild(e),t}insertAfter(e,t){t.parentNode.insertBefore(e,t.nextSibling)}wrapInner(e,t){for(e.appendChild(t),(t=e.querySelector(".e-rte-wrap-inner")).classList.remove("e-rte-wrap-inner"),0===t.classList.length&&t.removeAttribute("class");e.firstChild!==t;)t.appendChild(e.firstChild);return t}unWrap(e){const t=e.parentNode;let i=[];for(;e.firstChild;)i.push(e.firstChild),t.insertBefore(e.firstChild,e);return i=i.length>0?i:[e.parentNode],t.removeChild(e),i}getSelectedNode(e,t){return e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t-1]&&e.childNodes[t-1].nodeType===Node.ELEMENT_NODE&&(e.childNodes[t-1].classList.contains(pn_startSelection)||e.childNodes[t-1].classList.contains(pn_endSelection))?e=e.childNodes[t-1]:e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t]&&(e=e.childNodes[t]),e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),e}nodeFinds(e,t){const i=[];for(let s=0;s<t.length;s++)e.contains(t[s])&&e!==t[s]&&i.push(t[s]);return i}isEditorArea(){let t;for(t=this.getRangePoint(0).commonAncestorContainer;t&&!this.isElement(t);null)t=t.parentNode;return!!this.isElement(t)}getRangePoint(e){const t=this.getSelection();let i=[];if(t&&t.getRangeAt&&t.rangeCount){i=[];for(let s=0;s<t.rangeCount;s++)i.push(t.getRangeAt(s))}else i=[this.currentDocument.createRange()];return void 0!==e?i[e]:i}getSelection(){return this.nodeSelection.get(this.currentDocument)}getPreviousNode(e){for(e=e.previousElementSibling;e&&"\n"===e.textContent;null)e=e.previousElementSibling;return e}encode(e){const t=document.createElement("div");return t.innerText=e,t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")}saveMarker(e,t){let r,o,i=this.parent.querySelector("."+pn_startSelection),s=this.parent.querySelector("."+pn_endSelection);if(""===i.textContent&&f(s)&&"tab"!==t&&(i.innerHTML=1===i.childNodes.length&&"BR"===i.childNodes[0].nodeName?"&#65279;&#65279;<br>":"&#65279;&#65279;"),this.hasClass(i,pn_startSelection)&&i.classList.length>1){const a=this.createTagString("p",i,this.encode(i.textContent));this.replaceWith(i,a),i=this.parent.querySelector("."+pn_startSelection),i.classList.remove(pn_startSelection),r=i.childNodes[0]}else r=this.unWrap(i)[0];if(this.hasClass(s,pn_endSelection)&&s.classList.length>1){const a=this.createTagString("p",s,this.encode(s.textContent));this.replaceWith(s,a),s=this.parent.querySelector("."+pn_endSelection),s.classList.remove(pn_endSelection),o=s.childNodes[0]}else o=s?this.unWrap(s)[0]:r;return e.startContainer=e.getNodeArray(r,!0),e.endContainer=e.getNodeArray(o,!1),e}marker(e,t){return'<span class="'+e+'">'+t+"</span>"}setMarker(e){const t=e.range,i=t.startContainer.childNodes;let r=(i.length>1&&"TABLE"===i[0].nodeName?function T2e(n){let e=n;do{e.childNodes.length>0&&(e=e.childNodes[0])}while(e.childNodes.length>0);return e}(i[t.startOffset+1]):i[t.startOffset>0?t.startOffset-1:t.startOffset])||t.startContainer,o=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer;if(r.nodeType===Node.ELEMENT_NODE&&o.nodeType===Node.ELEMENT_NODE&&(r.contains(o)||o.contains(r))){const a=r.contains(o)?r:o;if(a.nodeType!==Node.TEXT_NODE){const h=[],c=[];for(let m=a;a.contains(m);null)h.indexOf(m)<0&&m.childNodes&&m.childNodes.length?(h.push(m),m=m.childNodes[0]):m.nextSibling?m=m.nextSibling:m.parentNode&&(m=m.parentNode,h.push(m)),c.indexOf(m)<0&&(m.nodeType===Node.TEXT_NODE||Iy.indexOf(m.parentNode.tagName.toLocaleLowerCase())>=0&&("BR"===m.tagName||"IMG"===m.tagName))&&c.push(m);c.length&&(r=r.contains(o)?c[0]:r,o=c[c.length-1])}}r!==o?(r.nodeType!==Node.TEXT_NODE&&("BR"===r.tagName&&Iy.indexOf(r.parentNode.tagName.toLocaleLowerCase())>=0||"IMG"===r.tagName)?(this.replaceWith(r,this.marker(pn_startSelection,this.encode(r.textContent))),t.startContainer.querySelector("."+pn_startSelection).appendChild(r)):this.replaceWith(r,this.marker(pn_startSelection,this.encode(r.textContent))),o.nodeType!==Node.TEXT_NODE&&"BR"===o.tagName&&Iy.indexOf(o.parentNode.tagName.toLocaleLowerCase())>=0?(this.replaceWith(o,this.marker(pn_endSelection,this.encode(o.textContent))),t.endContainer.querySelector("."+pn_endSelection).appendChild(o)):this.ensureSelfClosingTag(o,pn_endSelection,t)):this.ensureSelfClosingTag(r,pn_startSelection,t)}ensureSelfClosingTag(e,t,i){let s=!1;if(3===e.nodeType)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.tagName)this.replaceWith(e,this.marker(t,this.encode(e.textContent))),i.startContainer.querySelector("."+t).appendChild(e);else{if("IMG"===e.tagName){const r=document.createElement("p");e.parentElement.insertBefore(r,e),r.appendChild(e),e=r.children[0]}if("TABLE"===e.tagName)if(s=!0,""===e.textContent){const r=e.querySelectorAll("td");e=f((e=r[r.length-1]).childNodes[0])?e:e.childNodes[0]}else{let r=e.lastChild;for(;3!==r.nodeType&&"#text"!==r.nodeName&&"BR"!==r.nodeName;)r=r.lastChild;e=r}for(let r=0;r<ige.length;r++)e=e.tagName!==ige[r]||s?e:e.parentNode;if(3===e.nodeType&&"#text"===e.nodeName)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.nodeName)this.replaceWith(e,this.marker(pn_endSelection,this.encode(e.textContent))),i.endContainer.querySelector("."+pn_endSelection).appendChild(e);else{const r=this.marker(t,"");mi([this.parseHTMLFragment(r)],e)}}}createTempNode(e){const t=e.textContent;if("BR"===e.tagName){const i="<p></p>";Iy.indexOf(e.parentNode.tagName.toLocaleLowerCase())>=0&&(e=this.wrap(e,this.parseHTMLFragment(i)))}else if(e.nodeType!==Node.TEXT_NODE&&(e.classList.contains(pn_startSelection)||e.classList.contains(pn_endSelection))||t.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length>0||t.length&&t.indexOf("\n")<0){const s=e;e=this.wrap(e,this.parseHTMLFragment("<p></p>")),(s.nodeType!==Node.ELEMENT_NODE||!s.firstChild||"BR"!==s.firstChild.nodeName||!s.classList.contains(pn_startSelection)&&!s.classList.contains(pn_endSelection))&&e.nextElementSibling&&"BR"===e.nextElementSibling.tagName&&e.appendChild(e.nextElementSibling)}return e}getImageTagInSelection(){const e=this.getSelection();return this.isEditorArea()&&e.rangeCount?e.focusNode.querySelectorAll("img"):null}blockNodes(){const e=[],t=this.getSelection();if(this.isEditorArea()&&t.rangeCount){const i=this.getRangePoint();for(let s=0;s<i.length;s++){let r;const o=i[s],a=this.getSelectedNode(o.startContainer,o.startOffset),l=this.getSelectedNode(o.endContainer,o.endOffset);if(this.isBlockNode(a)&&e.indexOf(a)<0&&e.push(a),r=this.blockParentNode(a),r&&e.indexOf(r)<0)if(Iy.indexOf(r.tagName.toLocaleLowerCase())>=0&&("BR"===a.tagName||a.nodeType===Node.TEXT_NODE||a.classList.contains(pn_startSelection)||a.classList.contains(pn_endSelection))){const c=a.previousSibling&&a.previousSibling.nodeType===Node.TEXT_NODE?a.previousSibling:a;e.push(a.nextSibling||a.previousSibling||"BR"!==a.tagName?this.createTempNode(c):c)}else e.push(r);const h=[];for(let c=a;c!==l&&c!==this.parent;null)h.indexOf(c)<0&&c.childNodes&&c.childNodes.length?(h.push(c),c=c.childNodes[0]):c&&8!==c.nodeType&&("BR"===c.tagName||c.nodeType===Node.TEXT_NODE&&""!==c.textContent.trim()||c.nodeType!==Node.TEXT_NODE&&(c.classList.contains(pn_startSelection)||c.classList.contains(pn_endSelection)))&&Iy.indexOf(c.parentNode.tagName.toLocaleLowerCase())>=0?c=this.createTempNode(c):c.nextSibling&&8!==c.nextSibling.nodeType&&("BR"===c.nextSibling.tagName||c.nextSibling.nodeType===Node.TEXT_NODE||c.nextSibling.classList.contains(pn_startSelection)||c.nextSibling.classList.contains(pn_endSelection))&&Iy.indexOf(c.nextSibling.parentNode.tagName.toLocaleLowerCase())>=0?c=this.createTempNode(c.nextSibling):c.nextSibling?c=c.nextSibling:c.parentNode&&(c=c.parentNode,h.push(c)),e.indexOf(c)<0&&c.nodeType===Node.ELEMENT_NODE&&Iy.indexOf(c.parentNode.tagName.toLocaleLowerCase())>=0&&(c.classList.contains(pn_startSelection)||c.classList.contains(pn_endSelection))&&e.push(this.createTempNode(c)),this.isBlockNode(c)&&this.ignoreTableTag(c)&&h.indexOf(c)<0&&e.indexOf(c)<0&&(c!==l||o.endOffset>0)&&e.push(c),"IMG"===c.nodeName&&"true"===c.parentElement.contentEditable&&e.push(c);r=this.blockParentNode(l),r&&this.ignoreTableTag(r)&&e.indexOf(r)<0&&!f(r.previousElementSibling)&&"IMG"!==r.previousElementSibling.tagName&&e.push(r)}}for(let i=e.length-1;i>0;i--)if(this.nodeFinds(e[i],e).length){const r=e[i].querySelectorAll("ul, ol");if("LI"===e[i].tagName&&r.length>0)continue;e.splice(i,1)}return e}ignoreTableTag(e){return!(EN.indexOf(e.tagName.toLocaleLowerCase())>=0)}}class G2e{constructor(e){this.parent=e,this.domNode=this.parent.domNode,this.addEventListener()}addEventListener(){this.parent.observer.on("list-type",this.applyListsHandler,this),this.parent.observer.on(dl,this.keyDownHandler,this),this.parent.observer.on($me,this.spaceKeyAction,this)}testList(e){const t=[/^[\d]+[.]+$/,/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,/^[a-zA-Z][.]+$/],i=f(e)?null:e.innerText.trim().split(".")[0]+".";if(!f(i))for(let s=0;s<t.length;s++)if(t[s].test(i))return!0;return!1}testCurrentList(e){const t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!f(e.startContainer.textContent.slice(0,e.startOffset))){const i=e.startContainer.textContent.replace(/\u200B/g,"").slice(0,e.startOffset).trim();for(let s=0;s<t.length;s++)if(t[s].test(i)&&2===i.length)return!0}return!1}spaceList(e){const t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument);const i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),r=(this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset),i.previousElementSibling),o=i.nextElementSibling,a=f(r)?null:r.innerText.trim().substring(0,1),l=f(o)?null:o.innerText.trim().substring(0,1),h=this.testCurrentList(t),c=this.testList(r),m=this.testList(o);!c&&!m&&"*"!==a&&"*"!==l&&(h?(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault()):("*"===t.startContainer.textContent.replace(/\u200B/g,"").slice(0,t.startOffset).trim()||"-"===t.startContainer.textContent.replace(/\u200B/g,"").slice(0,t.startOffset).trim())&&(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()))}enterList(e){const t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i="LI"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement.closest("LI"),s="LI"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement.closest("LI");if(!f(i)&&!f(s)&&i===s&&"LI"===i.tagName&&""===i.textContent.trim()&&0===i.querySelectorAll("IMG").length){if(i.innerHTML.indexOf("&nbsp;")>=0)return;65279===i.textContent.charCodeAt(0)&&(i.textContent="");const r=i.parentElement;if(f(r.parentElement.closest("UL"))&&f(r.parentElement.closest("OL"))){if(!f(i.nextElementSibling)){const a=this.parent.domNode.blockParentNode(i);this.parent.nodeCutter.GetSpliceNode(t,a)}let o;"DIV"===e.enterAction?(o=Be("div"),o.innerHTML="<br>"):"P"===e.enterAction?(o=Be("p"),o.innerHTML="<br>"):o=Be("br"),this.parent.domNode.insertAfter(o,r),e.event.preventDefault(),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,o,0),te(""===r.textContent?r:i)}}}backspaceList(e){const t=this.parent.nodeSelection.getRange(this.parent.currentDocument);let i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),s=this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset);if(i="BR"===i.nodeName?i.parentElement:i,s="BR"===s.nodeName?s.parentElement:s,i===s&&!f(B(i,"li"))&&(""===i.textContent.trim()&&65279===i.textContent.charCodeAt(0)||1===i.textContent.length&&8203===i.textContent.charCodeAt(0))&&(i.textContent=""),i===s&&"LI"===i.tagName&&0===i.textContent.length&&f(i.previousElementSibling)&&i.removeAttribute("style"),i===s&&""===i.textContent){if("LI"===i.parentElement.tagName&&"LI"===s.parentElement.tagName)te(i);else if(i.closest("ul")||i.closest("ol")){const r=f(i.closest("ul"))?i.closest("ol"):i.closest("ul");if(r.firstElementChild===i&&!f(r.children[1])&&("OL"===r.children[1].tagName||"UL"===r.children[1].tagName))if(r.tagName===r.children[1].tagName){for(;r.children[1].lastChild;)this.parent.domNode.insertAfter(r.children[1].lastChild,r.children[1]);te(r.children[1])}else r.parentElement.insertBefore(r.children[1],r)}}else if(!(f(i.firstChild)||"BR"!==i.firstChild.nodeName||f(i.childNodes[1])||"UL"!==i.childNodes[1].nodeName&&"OL"!==i.childNodes[1].nodeName)){const r=f(i.closest("ul"))?i.closest("ol"):i.closest("ul");if(r.tagName===i.childNodes[1].nodeName){for(;i.childNodes[1].lastChild;)this.parent.domNode.insertAfter(i.children[1].lastChild,i);te(i.childNodes[1])}else r.parentElement.insertBefore(i.children[1],r)}}keyDownHandler(e){if(13===e.event.which&&this.enterList(e),32===e.event.which&&this.spaceList(e),8===e.event.which&&this.backspaceList(e),46===e.event.which&&"delete"===e.event.action){const t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=t.commonAncestorContainer,s=t.startContainer,r=t.endContainer,o=3===s.nodeType?s.parentElement:s,a=3===r.nodeType?r.parentElement:r;("UL"===i.nodeName||"OL"===i.nodeName)&&o!==a&&(!f(B(o,"ul"))||!f(B(o,"ol")))&&(!f(B(a,"ul"))||!f(B(a,"ol")))&&i.lastElementChild===B(a,"li")&&!t.collapsed&&te(i)}if(9===e.event.which){const t=this.parent.nodeSelection.getRange(this.parent.currentDocument);let i;e.event.action&&"indent"===e.event.action||(this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument));const s=t.startOffset,r=t.endOffset,o=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset);if(o===this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset)&&("BR"===o.nodeName||"#text"===o.nodeName)&&Iy.indexOf(o.parentNode.tagName.toLocaleLowerCase())>=0)return;e.event.action&&"indent"===e.event.action||this.domNode.setMarker(this.saveSelection),i=this.domNode.blockNodes();const l=[];let h=!0;for(let c=0;c<i.length;c++)"LI"===i[c].parentNode.tagName?l.push(i[c].parentNode):"LI"===i[c].tagName&&"P"!==i[c].childNodes[0].tagName&&"OL"!==i[c].childNodes[0].tagName&&"UL"!==i[c].childNodes[0].tagName&&l.push(i[c]);l.length>1||l.length&&(0===s&&0===r||e.ignoreDefault)?(e.event.preventDefault(),e.event.stopPropagation(),this.currentAction=this.getAction(l[0]),e.event.shiftKey?(this.revertList(l,e),this.revertClean()):h=this.nestedList(l),h&&(this.cleanNode(),this.parent.editableElement.focus()),e.event.action&&"indent"===e.event.action||(this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore(),e.callBack&&e.callBack({requestType:this.currentAction,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes(),event:e.event}))):e.event.action&&"indent"===e.event.action||(e.event&&e.event.shiftKey&&"Tab"===e.event.key&&(e.event.action="tab"),this.saveSelection=this.domNode.saveMarker(this.saveSelection,e.event.action),this.saveSelection.restore())}else switch(e.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()}}spaceKeyAction(e){32===e.event.which&&this.spaceList(e)}getAction(e){return"OL"===e.parentNode.nodeName?"OL":"UL"}revertClean(){const e=this.parent.editableElement.querySelectorAll("ul, ol");for(let t=0;t<e.length;t++){const i=e[t].querySelectorAll("ul, ol");if(i.length>0)for(let s=0;s<i.length;s++){const r=i[s].previousSibling;r&&"LI"===r.tagName&&r.appendChild(i[s])}}}noPreviousElement(e){let t,i;const s=e.querySelectorAll("ol, ul"),r=e.querySelectorAll("li"),o=this.domNode.contents(r[0])[0];if(r.length>0&&("OL"===o.nodeName||"UL"===o.nodeName)?t=r[0]:i=s[0],t)for(let a=this.domNode.contents(e)[0];a&&!this.domNode.isList(a);null){const l=a.nextSibling;Qr([a],t),ht(e,{"list-style-type":"none"}),ht(t,{"list-style-type":""}),a=l}else if(i){const a=Be("li");Qr([a],i);for(let h=this.domNode.contents(e)[0];h&&!this.domNode.isList(h);null){const c=h.nextSibling;a.appendChild(h),h=c}Qr([i],e.parentNode),te(e);const l=Be("li",{styles:"list-style-type: none;"});Qr([l],i.parentNode),mi([i],l)}else{const a=Be("li",{styles:"list-style-type: none;"});Qr([a],e.parentNode);const l=Be(e.parentNode.tagName);Qr([l],a),mi([e],l)}}nestedList(e){let t=!1;for(let i=0;i<e.length;i++){const s=this.domNode.getPreviousNode(e[i]);if(s){let r,o;t=!0;const a=e[i].querySelectorAll("ol, ul"),l=e[i].querySelectorAll("li"),h=this.domNode.contents(l[0])[0];if(l.length>0&&("OL"===h.nodeName||"UL"===h.nodeName)?o=l[0]:r=a[0],r){const c=Be("li");Qr([c],r);for(let m=this.domNode.contents(e[i])[0];m&&!this.domNode.isList(m);null){const b=m.nextSibling;c.appendChild(m),m=b}mi([r],s),te(e[i])}else if(o){if("LI"===s.tagName){for(let c=this.domNode.contents(e[i])[0];c&&!this.domNode.isList(c);null){const m=c.nextSibling;Qr([c],o),ht(e[i],{"list-style-type":"none"}),ht(o,{"list-style-type":""}),c=m}mi([o.parentNode],s),te(e[i])}}else if("LI"===s.tagName){const c=Be(e[i].parentNode.tagName);mi([c],s),mi([e[i]],c)}else("OL"===s.tagName||"UL"===s.tagName)&&mi([e[i]],s)}else t=!0,this.noPreviousElement(e[i])}return t}applyListsHandler(e){let t=this.parent.nodeSelection.getRange(this.parent.currentDocument);if(t.startContainer===t.endContainer&&t.startContainer===this.parent.editableElement&&t.startOffset===t.endOffset&&0===t.startOffset&&0===this.parent.editableElement.textContent.length&&"TABLE"!=this.parent.editableElement.childNodes[0].nodeName&&"IMG"!=this.parent.editableElement.childNodes[0].nodeName){const s=t.startContainer.childNodes[0];this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,s,s,0,0),t=this.parent.nodeSelection.getRange(this.parent.currentDocument)}this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument),this.currentAction=e.subCommand,this.currentAction=e.subCommand="NumberFormatList"===this.currentAction?"OL":"BulletFormatList"===this.currentAction?"UL":this.currentAction,this.domNode.setMarker(this.saveSelection);let i=this.domNode.blockNodes();if("BR"===e.enterAction){this.setSelectionBRConfig();const s=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),r=this.parent.nodeSelection.getSelectionNodes(s),o=[];0===r.length&&r.push(i[0]);for(let a=0;a<r.length;a++){let h,l=r[a];for(;!this.parent.domNode.isBlockNode(l)&&l!==this.parent.editableElement;)h=l,l=l.parentElement;this.parent.domNode.isBlockNode(l)&&l===this.parent.editableElement&&o.push(h)}for(let a=0;a<o.length;a++)if(!this.parent.domNode.isBlockNode(o[a])){let c,l=o[a],h=l;for(;l===this.parent.editableElement;)h=l,l=l.parentElement;this.parent.domNode.isBlockNode(h.parentElement)&&h.parentElement===this.parent.editableElement?(c=Be("p"),h.parentElement.insertBefore(c,h),c.appendChild(h)):c=h;let m=c.previousSibling;for(;!f(m)&&"BR"!==m.nodeName&&!this.parent.domNode.isBlockNode(m);)c.firstChild.parentElement.insertBefore(m,c.firstChild),m=c.previousSibling;!f(m)&&"BR"===m.nodeName&&te(m);let b=c.nextSibling;for(;!f(b)&&"BR"!==b.nodeName&&!this.parent.domNode.isBlockNode(b);)c.appendChild(b),b=c.nextSibling;!f(b)&&"BR"===b.nodeName&&te(b)}this.setSelectionBRConfig(),i=this.parent.domNode.blockNodes()}for(let s=0;s<i.length;s++)"TABLE"===i[s].tagName&&!t.collapsed&&i.splice(s,1),i.length>0&&"LI"!==i[s].tagName&&"LI"===i[s].parentNode.tagName&&(i[s]=i[s].parentNode);this.applyLists(i,this.currentAction,e.selector,e.item,e),e.callBack&&e.callBack({requestType:this.currentAction,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})}setSelectionBRConfig(){const e=this.parent.editableElement.querySelector("."+pn_startSelection),t=this.parent.editableElement.querySelector("."+pn_endSelection);f(t)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,e,t,0,0)}applyLists(e,t,i,s,r){if(this.isRevert(e,t)&&f(s))this.revertList(e,r),this.removeEmptyListElements();else{this.checkLists(e,t,s);for(let o=0;o<e.length;o++)if(!f(s)&&!f(s.listStyle)&&("listImage"===s.listStyle?ht(e[o],{"list-style-image":s.listImage}):(ht(e[o],{"list-style-image":"none"}),ht(e[o],{"list-style-type":s.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),"true"===e[o].getAttribute("contenteditable")&&1===e[o].childNodes.length&&"TABLE"===e[o].childNodes[0].nodeName){const a=document.createElement(t);a.innerHTML="<li><br/></li>",e[o].appendChild(a)}else if("LI"!==e[o].tagName&&f(s)){const l="<"+t+">",h="</"+t+">",c="li"+("IMG"===e[o].tagName?"":this.domNode.attributes(e[o])),m="p"===e[o].tagName.toLowerCase()?e[o].innerHTML:e[o].outerHTML,b=this.domNode.createTagString(c,null,m);this.domNode.replaceWith(e[o],l+b+h)}else if(!f(s)&&"LI"!==e[o].tagName){const l="<"+t+("IMG"===e[o].tagName?"":this.domNode.attributes(e[o]))+">",h="</"+t+">",c="li",m="p"===e[o].tagName.toLowerCase()?e[o].innerHTML:e[o].outerHTML,b=this.domNode.createTagString(c,null,m);this.domNode.replaceWith(e[o],l+b+h)}}this.cleanNode(),this.parent.editableElement.focus(),Vu()&&LS(this.parent.editableElement,i),this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore()}removeEmptyListElements(){const e=this.parent.editableElement.querySelectorAll("ol, ul");for(let t=0;t<e.length;t++)""===e[t].textContent.trim()&&te(e[t])}isRevert(e,t){let i=!0;for(let s=0;s<e.length;s++){if("LI"!==e[s].tagName)return!1;e[s].parentNode.tagName!==t&&(i=!1)}return i}checkLists(e,t,i){const s=[];for(let r=0;r<e.length;r++){const o=e[r].parentNode;!f(i)&&"LI"===e[r].tagName&&!f(i.listStyle)&&("listImage"===i.listStyle?ht(o,{"list-style-image":i.listImage}):(ht(o,{"list-style-image":"none"}),ht(o,{"list-style-type":i.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),("LI"===e[r].tagName&&o.tagName!==t&&s.indexOf(o)<0||"LI"===e[r].tagName&&o.tagName===t&&s.indexOf(o)<0&&null!==i)&&s.push(o)}for(let r=s.length-1;r>=0;r--){const o=s[r],a="<"+t.toLowerCase()+" "+this.domNode.attributes(o)+">"+o.innerHTML+"</"+t.toLowerCase()+">";this.domNode.replaceWith(s[r],a)}}cleanNode(){const e=this.parent.editableElement.querySelectorAll("ol + ol, ul + ul");for(let t=0;t<e.length;t++){const i=e[t];if(this.domNode.isList(i.previousElementSibling)&&this.domNode.openTagString(i)===this.domNode.openTagString(i.previousElementSibling)){const s=this.domNode.contents(i);for(let r=0;r<s.length;r++)i.previousElementSibling.appendChild(s[r]);i.parentNode.removeChild(i)}}}findUnSelected(e,t){if((e=e.slice().reverse()).length>0){const i=[],s=[];let o=[];const a=[];o=t[t.length-1].childNodes;for(let l=0;l<o.length;l++)if("OL"===o[l].tagName||"UL"===o[l].tagName){const h=o[l].querySelectorAll("li");if(h.length>0)for(let c=0;c<h.length;c++)a.push(h[c])}for(let l=0;l<a.length;l++){let h=0;for(let c=0;c<e.length;c++)a[l].contains(e[c])||(h+=1);h===e.length&&s.push(a[l])}if(s.length>0)for(let l=0;l<s.length;l++)"OL"!==this.domNode.contents(s[l])[0].nodeName&&"UL"!==this.domNode.contents(s[l])[0].nodeName&&i.push(s[l]);i.length>0&&this.nestedList(i)}}revertList(e,t){const i=[];for(let a=e.length-1;a>=0;a--)for(let l=a-1;l>=0;l--)if(e[l].contains(e[a])||e[l]===e[a]){i.push(e[a]),e.splice(a,1);break}this.findUnSelected(i,e);const s=[];for(let a=0;a<e.length;a++){const l=e[a];3===this.domNode.contents(l)[0].nodeType&&0===this.domNode.contents(l)[0].textContent.trim().length&&te(this.domNode.contents(l)[0]);let h=e[a].parentNode,c=l.getAttribute("class");if(0===i.length){const b=e[a].querySelectorAll("ul, ol")[0];if(b&&b.querySelectorAll("li")){const w=Be(b.tagName);mi([w],b.parentNode);const E=Be("li",{styles:"list-style-type: none;"});mi([E],w),mi([b],E)}}if(l.parentNode.insertBefore(this.closeTag(h.tagName),l),"LI"===h.parentNode.tagName)l.parentNode.insertBefore(this.closeTag("LI"),l);else{if(0===l.querySelectorAll(nI.join(", ")).length){const b="<p"+(f(c)?' class="e-rte-wrap-inner"':' class="'+c+' e-rte-wrap-inner"')+this.domNode.attributes(h)+"></p>";"BR"!==t.enterAction&&this.domNode.wrapInner(l,this.domNode.parseHTMLFragment(b))}else if(3===this.domNode.contents(l)[0].nodeType){const m=this.domNode.createTagString("p",h,this.parent.domNode.encode(this.domNode.contents(l)[0].textContent));this.domNode.replaceWith(this.domNode.contents(l)[0],m)}else if(this.domNode.contents(l)[0].classList.contains(pn_startSelection)||this.domNode.contents(l)[0].classList.contains(pn_endSelection)){const m=this.domNode.createTagString("p",h,this.domNode.contents(l)[0].outerHTML);this.domNode.replaceWith(this.domNode.contents(l)[0],m)}else{const m=l.firstChild;c=m.getAttribute("class"),Rt(m,this.domNode.rawAttributes(h)),c&&m.getAttribute("class")&&Rt(m,{class:c+" "+m.getAttribute("class")})}mi([this.openTag("LI")],l),Qr([this.closeTag("LI")],l)}this.domNode.insertAfter(this.openTag(h.tagName),l),"LI"===h.parentNode.tagName&&(h=h.parentNode.parentNode),s.indexOf(h)<0&&s.push(h)}for(let a=0;a<s.length;a++){const l=s[a];let h=l.innerHTML;const m=/<span class="e-rte-list-open-([a-z]*)"><\/span>/g;h=h.replace(/<span class="e-rte-list-close-([a-z]*)"><\/span>/g,"</$1>"),h=h.replace(m,"<$1 "+this.domNode.attributes(l)+">"),this.domNode.replaceWith(l,this.domNode.openTagString(l)+h.trim()+this.domNode.closeTagString(l))}const r=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty");for(let a=0;a<r.length;a++)te(r[a]);const o=this.parent.editableElement.querySelectorAll("li:empty");for(let a=0;a<o.length;a++)te(o[a])}openTag(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-open-'+e.toLowerCase()+'"></span>')}closeTag(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-close-'+e.toLowerCase()+'"></span>')}}class Ka{static WrapBefore(e,t,i){return t.innerText=e.textContent,i?this.AppendBefore(t,e,!0):this.AppendBefore(t,e),e.parentNode&&e.parentNode.removeChild(e),t.childNodes[0]}static Wrap(e,t){return this.AppendBefore(t,e),t.appendChild(e),e}static unwrap(e){const t=e.parentNode,i=[];for(;e.firstChild;null)i.push(t.insertBefore(e.firstChild,e));return t.removeChild(e),i}static AppendBefore(e,t,i){return t.parentNode?t.parentNode.insertBefore(e,i?t.nextSibling:t):t}}class tR{constructor(){this.enterAction="P",this.position=-1,this.nodeSelection=new Jd}GetSpliceNode(e,t){return t=this.SplitNode(e,t,!0),this.SplitNode(e,t,!1)}SplitNode(e,t,i){if(t){const s=e.cloneRange(),r=t.parentNode,o=this.nodeSelection.getIndex(t);s.collapse(i),i?s.setStartBefore(t):s.setEndAfter(t);let a=s.extractContents();if(i){if(t=r.childNodes[o],a=this.spliceEmptyNode(a,!1),a&&a.childNodes.length>0&&(1!==a.childNodes.length||"IMG"===a.childNodes[0].nodeName||!this.isImgElm(a)||""!==a.textContent))if(t)Ka.AppendBefore(a,t);else{r.appendChild(a);const h=document.createElement("div");h.innerHTML="&#65279;&#65279;",r.appendChild(t=h.firstChild)}}else if(t=r.childNodes.length>1?r.childNodes[o]:r.childNodes[0],a=this.spliceEmptyNode(a,!0),a&&a.childNodes.length>0&&(1!==a.childNodes.length||"IMG"===a.childNodes[0].nodeName||!this.isImgElm(a)||""!==a.textContent))if(t)Ka.AppendBefore(a,t,!0);else{r.appendChild(a);const h=document.createElement("div");h.innerHTML="&#65279;&#65279;",r.insertBefore(h.firstChild,r.firstChild),t=r.firstChild}return t}return null}isImgElm(e){let t=!0;if(1===e.childNodes.length&&"IMG"!==e.childNodes[0].nodeName){const i=e.childNodes[0];for(let s=0;!f(i.childNodes)&&s<i.childNodes.length;s++)"IMG"===i.childNodes[s].nodeName&&(t=!1)}else t=!0;return t}spliceEmptyNode(e,t){let i;return i=1===e.childNodes.length&&"#text"===e.childNodes[0].nodeName&&""===e.childNodes[0].textContent||""===e.textContent?-1:e.childNodes.length-1,i>-1&&!t?this.spliceEmptyNode(e.childNodes[i],t):i>-1?this.spliceEmptyNode(e.childNodes[0],t):3!==e.nodeType&&11!==e.nodeType&&"IMG"!==e.nodeName&&e.parentNode.removeChild(e),e}GetCursorStart(e,t,i){let s=(e=i?e:e.reverse())[0];for(let r=0;r<e.length&&(i?e[r]<t:e[r]>=t);r++)s=e[r];return s}GetCursorRange(e,t,i){let s=e.createRange();const r=[];r.push(0);const o=this.TrimLineBreak(i.data);let a=o.indexOf(" ",0);for(;-1!==a;)r.indexOf(a)<0&&r.push(a),new RegExp("\\s").test(o[a-1])&&r.indexOf(a-1)<0&&r.push(a-1),new RegExp("\\s").test(o[a+1])&&r.push(a+1),a=o.indexOf(" ",a+1);if(r.push(o.length),r.indexOf(t.startOffset)>=0||r.indexOf(t.startOffset-1)>=0&&(1!==t.startOffset||1===t.startOffset&&new RegExp("\\s").test(o[0]))||r[r.length-1]-1===t.startOffset)s=t,this.position=1;else{const l=this.GetCursorStart(r,t.startOffset,!0);this.position=t.startOffset-l,s.setStart(t.startContainer,l),s.setEnd(t.startContainer,this.GetCursorStart(r,t.startOffset,!1))}return s}GetCursorNode(e,t,i){return this.GetSpliceNode(this.GetCursorRange(e,t,i),i)}TrimLineBreak(e){return e.replace(/(\r\n\t|\n|\r\t)/gm," ")}}class $2e{constructor(e){this.parent=e,this.addEventListener()}addEventListener(){this.parent.observer.on(G6,this.applyFormats,this),this.parent.observer.on(MS,this.onKeyUp,this),this.parent.observer.on(dl,this.onKeyDown,this)}getParentNode(e){for(;e.parentNode&&e.parentNode!==this.parent.editableElement;null)e=e.parentNode;return e}onKeyUp(e){const t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=t.endContainer,s=i.lastChild;if(13===e.event.which&&t.startContainer===i&&3!==i.nodeType){const r=Be("p");if(r.innerHTML="<br>",!f(s)&&s&&"BR"===s.nodeName&&s.previousSibling&&"TABLE"===s.previousSibling.nodeName)i.replaceChild(r,s),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0);else{const o=this.parent.nodeSelection.getSelectionNodeCollectionBr(t)[0];!f(o)&&"BR"===o.nodeName&&o.previousSibling&&"TABLE"===o.previousSibling.nodeName&&(i.replaceChild(r,o),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0))}}}onKeyDown(e){if(13===e.event.which){let t=this.parent.nodeSelection.getRange(this.parent.currentDocument);const s=0===t.endContainer.textContent.length||"PRE"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement,r=B(0===t.startContainer.textContent.length||"PRE"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement,"pre"),o=B(s,"pre");if(!f(r)&&!f(r.parentElement)&&"LI"===r.parentElement.tagName)return;if((f(r)&&!f(o)||!f(r)&&f(o))&&(e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t),t=this.parent.nodeSelection.getRange(this.parent.currentDocument),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0)),13===e.event.which&&!f(r)&&!f(o)){e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t),t=this.parent.nodeSelection.getRange(this.parent.currentDocument);const l=t.startContainer.childNodes[t.endOffset],h=t.startContainer.childNodes[t.endOffset-1];let c=t.startContainer;if(f(l)||f(h)||!f(l.nextSibling)||"BR"!==l.nodeName||"BR"!==h.nodeName)if(8203===c.textContent.charCodeAt(0)&&1===c.textContent.length||0===c.textContent.length){for(;"PRE"!==c.parentElement.nodeName&&(1===c.textContent.length||0===c.textContent.length);)c=c.parentElement;!f(c.previousSibling)&&"BR"===c.previousSibling.nodeName&&f(c.nextSibling)?this.paraFocus(c.parentElement):this.isNotEndCursor(r,t)}else this.isNotEndCursor(r,t);else this.paraFocus(t.startContainer,e.enterAction)}}}removeCodeContent(e){const t=new RegExp(String.fromCharCode(65279),"g");if(!f(e.endContainer.textContent.match(t))){const i=65279===e.endContainer.textContent.charCodeAt(e.endOffset-1)?e.endOffset-2:e.endOffset;e.endContainer.textContent=e.endContainer.textContent.replace(t,""),""===e.endContainer.textContent?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer.parentElement,0):this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer,i)}}deleteContent(e){(e.startContainer!==e.endContainer||e.startOffset!==e.endOffset)&&e.deleteContents()}paraFocus(e,t){let i;"DIV"===t?(i=Be("div"),i.innerHTML="<br>"):"BR"===t?i=Be("br"):(i=Be("p"),i.innerHTML="<br>"),this.parent.domNode.insertAfter(i,e),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0),te(e.lastChild)}isNotEndCursor(e,t){const i=new tR,s=t.startOffset===e.lastChild.textContent.length&&e.lastChild.textContent===t.startContainer.textContent;if(0===e.textContent.indexOf(t.startContainer.textContent)&&(0===t.startOffset&&0===t.endOffset||"PRE"===t.startContainer.nodeName)){this.insertMarker(e,t);const r=Be("br");e.childNodes[t.endOffset].parentElement.insertBefore(r,e.childNodes[t.endOffset])}else{const r=i.SplitNode(t,e,!0);this.insertMarker(e,t);const o=e.previousElementSibling;"PRE"===o.tagName&&(o.insertAdjacentHTML("beforeend","<br>"+r.innerHTML),te(e))}this.setCursorPosition(s,e)}setCursorPosition(e,t){let i=!1;const s=this.parent.editableElement.querySelector(".tempSpan"),r=s.parentElement;if(""===s.parentNode.textContent?i=!0:this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),e)if(i)r===t?(this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),te(s)):this.focusSelectionParent(s,r);else{const o=Be("br");this.parent.domNode.insertAfter(o,s),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),te(s)}else i?this.focusSelectionParent(s,r):te(s)}focusSelectionParent(e,t){te(e),t.innerHTML="\u200b",this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0)}insertMarker(e,t){const i=Be("span",{className:"tempSpan"});"PRE"===t.startContainer.nodeName?e.childNodes[t.endOffset].parentElement.insertBefore(i,e.childNodes[t.endOffset]):t.startContainer.parentElement.insertBefore(i,t.startContainer)}applyFormats(e){const t=this.parent.nodeSelection.getRange(this.parent.currentDocument);let i=!1;this.parent.editableElement===t.endContainer&&!f(this.parent.editableElement.children[t.endOffset-1])&&"TABLE"===this.parent.editableElement.children[t.endOffset-1].tagName&&!t.collapsed&&(i=!0);let s=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(s);let r=this.parent.domNode.blockNodes();if("BR"===e.enterAction){this.setSelectionBRConfig();const l=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),h=this.parent.nodeSelection.getSelectionNodes(l),c=[];0===h.length&&h.push(r[0]);for(let m=0;m<h.length;m++){let v,b=h[m];for(;!this.parent.domNode.isBlockNode(b)&&b!==this.parent.editableElement;)v=b,b=b.parentElement;this.parent.domNode.isBlockNode(b)&&b===this.parent.editableElement&&c.push(v)}for(let m=0;m<c.length;m++)if(!this.parent.domNode.isBlockNode(c[m])){let w,b=c[m],v=b;for(;b===this.parent.editableElement;)v=b,b=b.parentElement;this.parent.domNode.isBlockNode(v.parentElement)&&v.parentElement===this.parent.editableElement?(w=Be("div"),v.parentElement.insertBefore(w,v),w.appendChild(v)):w=v;let E=w.previousSibling;for(;!f(E)&&"BR"!==E.nodeName&&!this.parent.domNode.isBlockNode(E);)w.firstChild.parentElement.insertBefore(E,w.firstChild),E=w.previousSibling;!f(E)&&"BR"===E.nodeName&&te(E);let D=w.nextSibling;for(;!f(D)&&"BR"!==D.nodeName&&!this.parent.domNode.isBlockNode(D);)w.appendChild(D),D=w.nextSibling;!f(D)&&"BR"===D.nodeName&&te(D)}this.setSelectionBRConfig(),r=this.parent.domNode.blockNodes()}for(let l=0;l<r.length;l++){let h,c;if("blockquote"===e.subCommand.toLowerCase()?(h=this.getParentNode(r[l]),c=this.parent.domNode.isList(h)||"TABLE"===h.tagName?h.outerHTML:h.innerHTML):(h=r[l],c=h.innerHTML),e.subCommand.toLowerCase()===h.tagName.toLowerCase()&&("pre"!==e.subCommand.toLowerCase()||!f(e.exeValue)&&"dropDownSelect"===e.exeValue.name)||f(h.parentNode)||"TABLE"===h.tagName&&"pre"===e.subCommand.toLowerCase())continue;this.cleanFormats(h,e.subCommand);const m="pre"===e.subCommand.toLowerCase()&&"pre"===h.tagName.toLowerCase()?"p":e.subCommand,b=this.parent.domNode.createTagString(m,h,c.replace(/>\s+</g,"><"));"LI"===h.tagName?(h.innerHTML="",h.insertAdjacentHTML("beforeend",b)):this.parent.domNode.replaceWith(h,b)}this.preFormatMerge();let o=this.parent.editableElement.querySelector("."+pn_startSelection),a=this.parent.editableElement.querySelector("."+pn_endSelection);!f(o)&&!f(a)&&(o=o.lastChild,a=a.lastChild),s=this.parent.domNode.saveMarker(s,null),Vu()&&LS(this.parent.editableElement,e.selector),i?this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,o,a,0,a.textContent.length):s.restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})}setSelectionBRConfig(){const e=this.parent.editableElement.querySelector("."+pn_startSelection),t=this.parent.editableElement.querySelector("."+pn_endSelection);f(t)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,e,t,0,0)}preFormatMerge(){const e=this.parent.editableElement.querySelectorAll("PRE");if(!f(e))for(let t=0;t<e.length;t++){const i=e[t].previousElementSibling;!f(i)&&"PRE"===i.tagName&&(i.insertAdjacentHTML("beforeend","<br>"+e[t].innerHTML),te(e[t]))}}cleanFormats(e,t){const i=["display","font-size","margin-top","margin-bottom","margin-left","margin-right","font-weight"];t=t.toLowerCase();for(let s=0;s<i.length&&"p"!==t&&"blockquote"!==t&&"pre"!==t;s++)e.style.removeProperty(i[s])}}let Ty=(()=>{class n{static Insert(t,i,s,r){let o;if("string"==typeof i){const w=document.createElement("div");w.innerHTML=i,o=r?w:w.firstChild}else if(r&&(f(i)||f(i.classList)||!i.classList.contains("pasteContent"))){const w=document.createElement("div");w.appendChild(i),o=w}else o=i;const a=new Jd,l=new tR;let h=a.getRange(t);if(h.startContainer===s&&h.startContainer===h.endContainer&&0===h.startOffset&&h.startOffset===h.endOffset&&0===s.textContent.length&&"P"===s.children[0].tagName&&(a.setSelectionText(t,h.startContainer.children[0],h.startContainer.children[0],0,0),h=a.getRange(t)),"BR"===h.startContainer.nodeName&&0===h.startOffset&&h.startOffset===h.endOffset&&h.startContainer===h.endContainer){const w=Array.prototype.slice.call(h.startContainer.parentElement.children).indexOf(h.startContainer);a.setSelectionText(t,h.startContainer.parentElement,h.startContainer.parentElement,w+1,w+1),h=a.getRange(t)}const c=h.startOffset===h.endOffset&&0===h.startOffset&&h.startContainer===h.endContainer,m=h.collapsed,b=this.getNodeCollection(h,a,o),v="table"===o.nodeName.toLowerCase()?this.closestEle(b[0].parentNode,s):b[0];if(r||!f(o)&&!f(o.classList)&&o.classList.contains("pasteContent"))this.pasteInsertHTML(b,o,h,a,l,t,m,v,s);else if(s!==h.startContainer&&(!m&&(v.nodeType!==Node.ELEMENT_NODE||-1===EN.indexOf(v.tagName.toLocaleLowerCase()))||"table"===o.nodeName.toLowerCase()&&v&&-1===EN.indexOf(v.tagName.toLocaleLowerCase()))){const w=l.GetSpliceNode(h,v),E=w.previousSibling;let D=w.parentNode;if(1===b.length||"table"===o.nodeName.toLowerCase()&&0===w.childElementCount)a.setSelectionContents(t,w),h=a.getRange(t);else{let L=l.GetSpliceNode(h,b[b.length-1].parentElement);L=f(L)?w:L,a.setSelectionText(t,w,L,0,3===L.nodeType?L.textContent.length:L.childNodes.length),h=a.getRange(t)}h.extractContents(),"TABLE"===i.tagName&&this.removeEmptyElements(s);for(let L=0;L<b.length;L++)if(3!==b[L].nodeType&&null!=b[L].parentNode){if("IMG"===b[L].nodeName)continue;b[L].parentNode.removeChild(b[L])}if(E)Ka.AppendBefore(o,E,!0);else{let L=null;for(;D!==s&&D.firstChild&&""===D.textContent.trim();)L=D,D=D.parentNode;null!==L&&(D=L),D.firstChild&&(D!==s||"TABLE"===o.nodeName&&c&&D===h.startContainer&&D===h.endContainer)?""===D.textContent.trim()&&D!==s?(Ka.AppendBefore(o,D,!1),te(D)):Ka.AppendBefore(o,D.firstChild,!1):D.appendChild(o)}"IMG"===o.nodeName?this.imageFocus(o,a,t):a.setSelectionText(t,o,o,0,3!==o.nodeType?o.childNodes.length:o.textContent.length)}else{if(h.deleteContents(),c&&""===h.startContainer.textContent&&"BR"!==h.startContainer.nodeName&&(h.startContainer.innerHTML=""),q.isIE){const w=t.createDocumentFragment();w.appendChild(o),h.insertNode(w)}else if(1===h.startContainer.nodeType&&"hr"===h.startContainer.nodeName.toLowerCase()&&"hr"===h.endContainer.nodeName.toLowerCase()){const w=h.startContainer.nextElementSibling;w&&(w.querySelector("br")&&te(w.querySelector("br")),w.appendChild(o))}else"BR"===h.startContainer.nodeName?h.startContainer.parentElement.insertBefore(o,h.startContainer):h.insertNode(o);3!==o.nodeType&&o.childNodes.length>0?a.setSelectionText(t,o,o,1,1):"IMG"===o.nodeName?this.imageFocus(o,a,t):3!==o.nodeType?a.setSelectionContents(t,o):a.setSelectionText(t,o,o,o.textContent.length,o.textContent.length)}}static pasteInsertHTML(t,i,s,r,o,a,l,h,c){const m=s.startOffset===s.endOffset&&s.startContainer===s.endContainer;if(m&&s.startContainer===c&&""===c.textContent){const $=this.getImmediateBlockNode(t[t.length-1],c);r.setSelectionText(a,$,$,0,0),s=r.getRange(a)}let b,v,w,E;c!==s.startContainer&&(!l&&(h.nodeType!==Node.ELEMENT_NODE||-1===EN.indexOf(h.tagName.toLocaleLowerCase()))||"table"===i.nodeName.toLowerCase()&&h&&-1===EN.indexOf(h.tagName.toLocaleLowerCase()))&&(E=o.GetSpliceNode(s,h),v=f(E.previousSibling)?E.parentNode.previousSibling:E.previousSibling,1===t.length?(r.setSelectionContents(a,E),s=r.getRange(a),w=!0):(b=o.GetSpliceNode(s,t[t.length-1].parentElement),b=f(b)?E:b,r.setSelectionText(a,E,b,0,3===b.nodeType?b.textContent.length:b.childNodes.length),s=r.getRange(a),w=!1));let D=!1;this.removingComments(i);const L=i.childNodes;for(let $=0;$<L.length;$++)if(nI.indexOf(L[$].nodeName.toLocaleLowerCase())>=0){D=!0;break}let N;const V=document.createDocumentFragment();if(D){this.insertTempNode(s,i,t,o,c);let ie,Q,le,$=!0;for(s.deleteContents();i.firstChild;)if("#text"!==i.firstChild.nodeName||""!==i.firstChild.textContent.trim())if("#text"===i.firstChild.nodeName&&$||this.inlineNode.indexOf(i.firstChild.nodeName.toLocaleLowerCase())>=0&&$){if(N=i.firstChild,f(i.previousElementSibling)){const ke=Be("p");i.parentElement.insertBefore(ke,i)}i.previousElementSibling.appendChild(i.firstChild)}else N=i.firstChild,"#text"===i.firstChild.nodeName||this.inlineNode.indexOf(i.firstChild.nodeName.toLocaleLowerCase())>=0?(ie?(le.appendChild(i.firstChild),V.appendChild(le)):(Q=Be("p"),Q.appendChild(i.firstChild),V.appendChild(Q)),le=Q,ie=!0):(V.appendChild(i.firstChild),ie=!1),$=!1;else te(i.firstChild);i.parentNode.replaceChild(V,i)}else if(m){const $=Be("span",{className:"tempSpan"}),ie=B(s.startContainer.parentElement,"a");if(3===s.startContainer.nodeType&&ie&&B(ie,"span")){const Q=this.getImmediateBlockNode(s.startContainer,c);Q.querySelectorAll("br").length>0&&te(Q.querySelector("br")),B(ie,"span").appendChild($)}else s.insertNode($);for(;i.firstChild;)N=i.firstChild,V.appendChild(i.firstChild);$.parentNode.replaceChild(V,$)}else{for(;i.firstChild;)N=i.firstChild,V.appendChild(i.firstChild);w?E.parentNode.replaceChild(V,E):(s.deleteContents(),te(b),f(v)?c.appendChild(V):v.parentNode.appendChild(V))}"#text"===N.nodeName?this.placeCursorEnd(N,i,r,a,c):this.cursorPos(N,i,r,a,c)}static placeCursorEnd(t,i,s,r,o){for(t="BR"===t.nodeName?f(t.previousSibling)?t.parentNode:t.previousSibling:t;!f(t)&&"#text"!==t.nodeName&&"IMG"!==t.nodeName&&"BR"!==t.nodeName&&"HR"!==t.nodeName;)t=t.lastChild;"IMG"===(t=f(t)?i:t).nodeName?this.imageFocus(t,s,r):s.setSelectionText(r,t,t,t.textContent.length,t.textContent.length),this.removeEmptyElements(o)}static getNodeCollection(t,i,s){let r=[];return t.startOffset===t.endOffset&&t.startContainer===t.endContainer&&"BR"!=t.startContainer.nodeName&&("TD"===t.startContainer.nodeName||3!==t.startContainer.nodeType&&s.classList&&s.classList.contains("pasteContent"))?r.push(t.startContainer.childNodes[t.endOffset]):r=i.getInsertNodeCollection(t),r}static insertTempNode(t,i,s,r,o){if(t.startContainer!==o||f(t.startContainer.childNodes[t.endOffset-1])||"TABLE"!==t.startContainer.childNodes[t.endOffset-1].nodeName)if(t.startContainer!==o||f(t.startContainer.childNodes[t.endOffset])||"TABLE"!==t.startContainer.childNodes[t.endOffset].nodeName)if(t.startContainer===t.endContainer&&3!==t.startContainer.nodeType&&"HR"===i.firstChild.nodeName)t.startContainer.classList.contains("e-content")||"BODY"===t.startContainer.nodeName?t.startContainer.appendChild(i):t.startContainer.parentNode.insertBefore(i,t.startContainer);else{let a=this.getImmediateBlockNode(s[s.length-1],o);if((f(a)||f(a.parentElement))&&3!==t.endContainer.nodeType&&(a=t.endContainer,t.setEnd(a,t.endContainer.textContent.length)),"BODY"===a.nodeName&&t.startContainer===t.endContainer&&1===t.startContainer.nodeType&&(a=t.startContainer),a.closest("LI")&&i&&i.firstElementChild&&("OL"===i.firstElementChild.tagName||"UL"===i.firstElementChild.tagName)){let l;for(;i.firstElementChild.lastElementChild&&"LI"===i.firstElementChild.lastElementChild.tagName;)l=i.firstElementChild.lastElementChild,l.style.removeProperty("margin-left"),l.style.removeProperty("margin-top"),l.style.removeProperty("margin-bottom"),i.firstElementChild.insertAdjacentElement("afterend",l)}if("TD"===a.nodeName||"TH"===a.nodeName){const l=Be("span",{className:"tempSpan"});t.insertNode(l),l.parentNode.replaceChild(i,l)}else{const l=new Jd;let c,h=this.getNodeCollection(t,l,i)[this.getNodeCollection(t,l,i).length-1];c="BR"!==h.nodeName&&"HR"!==h.nodeName||f(h.parentElement)||0!==h.parentElement.textContent.trim().length?r.GetSpliceNode(t,a):h,c.parentNode.replaceChild(i,c)}}else t.startContainer.insertBefore(i,t.startContainer.childNodes[t.endOffset]);else f(t.startContainer.childNodes[t.endOffset-1].nextSibling)?t.startContainer.appendChild(i):t.startContainer.insertBefore(i,t.startContainer.childNodes[t.endOffset-1].nextSibling)}static cursorPos(t,i,s,r,o){t.classList.add("lastNode"),o.innerHTML=function I2e(n){const e=document.createElement("div");e.innerHTML=n,e.setAttribute("class","tempDiv");const t=document.createElement("div");if(e.childNodes.length>0){let s,r,o;for(;e.firstChild;)"#text"===e.firstChild.nodeName&&(e.firstChild.textContent.indexOf("\n")<0||""!==e.firstChild.textContent.trim())||_2e.indexOf(e.firstChild.nodeName.toLocaleLowerCase())>=0?(s?r.appendChild(e.firstChild):(o=Be("p"),t.appendChild(o),o.appendChild(e.firstChild)),r=o,s=!0):"#text"===e.firstChild.nodeName&&("\n"===e.firstChild.textContent||e.firstChild.textContent.indexOf("\n")>=0&&""===e.firstChild.textContent.trim())?te(e.firstChild):(t.appendChild(e.firstChild),s=!1);const a=t.querySelectorAll("table");for(let h=0;h<a.length;h++){"0"===a[h].getAttribute("border")&&a[h].removeAttribute("border");const c=a[h].querySelectorAll("td");for(let m=0;m<c.length;m++)"none"===c[m].style.borderLeft&&c[m].style.removeProperty("border-left"),"none"===c[m].style.borderRight&&c[m].style.removeProperty("border-right"),"none"===c[m].style.borderBottom&&c[m].style.removeProperty("border-bottom"),"none"===c[m].style.borderTop&&c[m].style.removeProperty("border-top"),"none"===c[m].style.border&&c[m].style.removeProperty("border");a[h].classList.contains(Tme)||a[h].classList.add(Tme)}const l=t.querySelectorAll("img");for(let h=0;h<l.length;h++)l[h].classList.contains(yN)||l[h].classList.add(yN),l[h].classList.contains(xy)||l[h].classList.contains(wy)||l[h].classList.add(xy)}return t.innerHTML}(o.innerHTML),f(t=o.querySelector(".lastNode"))||(this.placeCursorEnd(t,i,s,r,o),t.classList.remove("lastNode"),0===t.classList.length&&t.removeAttribute("class"))}static imageFocus(t,i,s){const r=document.createTextNode(" ");t.parentNode.insertBefore(r,t.nextSibling),i.setSelectionText(s,t.nextSibling,t.nextSibling,0,0)}static getImmediateBlockNode(t,i){do{t=t.parentNode}while(t&&nI.indexOf(t.nodeName.toLocaleLowerCase())<0);return t}static removingComments(t){let i=t.innerHTML;i=i.replace(/<!--[\s\S]*?-->/g,""),t.innerHTML=i}static findDetachEmptyElem(t){let i;return i=f(t.parentElement)?null:""===t.parentElement.textContent.trim()&&"true"!==t.parentElement.contentEditable?this.findDetachEmptyElem(t.parentElement):t,i}static removeEmptyElements(t){const i=t.querySelectorAll(":empty");for(let s=0;s<i.length;s++)if(W2e.indexOf(i[s].tagName.toLowerCase())<0){const r=this.findDetachEmptyElem(i[s]);f(r)||te(r)}}static closestEle(t,i){let s=t;for(;s&&1===s.nodeType;){if(s.parentNode===i||!f(s.parentNode.tagName)&&-1!==Iy.indexOf(s.parentNode.tagName.toLocaleLowerCase()))return s;s=s.parentNode}return null}}return n.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],n})();class K2e{constructor(e){this.parent=e,this.addEventListener()}addEventListener(){this.parent.observer.on(nge,this.linkCommand,this)}linkCommand(e){switch(e.value.toString().toLocaleLowerCase()){case"createlink":case"editlink":this.createLink(e);break;case"openlink":this.openLink(e);break;case"removelink":this.removeLink(e)}}createLink(e){let t=!f(e.item.selectParent)&&e.item.selectParent.length>0&&B(e.item.selectParent[0],"a");if(t=f(t)?!f(e.item.selectParent)&&e.item.selectParent.length>0?e.item.selectParent[0]:null:t,f(t)||"A"!==t.tagName){const i=new Jd;let s=i.getRange(this.parent.currentDocument);"#text"===s.endContainer.nodeName&&s.startContainer.textContent.length===s.endOffset+1&&" "===s.endContainer.textContent.charAt(s.endOffset)&&"A"===s.endContainer.nextSibling.nodeName&&(i.setSelectionText(this.parent.currentDocument,s.startContainer,s.endContainer,s.startOffset,s.endOffset+1),s=i.getRange(this.parent.currentDocument));const r=!!f(e.item.text)||e.item.text.replace(/ /g,"").localeCompare(s.toString().replace(/\n/g," ").replace(/ /g,""))<0;if(e.event&&"keydown"===e.event.type&&(32===e.event.keyCode||13===e.event.keyCode)||"Paste"===e.item.action||s.collapsed||r){const o=this.createAchorNode(e);if(o.innerText=""===e.item.text?e.item.url:e.item.text,e.item.selection.restore(),Ty.Insert(this.parent.currentDocument,o,this.parent.editableElement),!e.event||"keydown"!==e.event.type||32!==e.event.keyCode&&13!==e.event.keyCode)e.item.selection.setSelectionText(this.parent.currentDocument,o.childNodes[0],o.childNodes[0],"Paste"===e.item.action?o.childNodes[0].textContent.length:0,o.childNodes[0].textContent.length);else{const a=e.item.selection.range.startContainer;a.textContent=this.removeText(a.textContent,e.item.text)}}else this.createLinkNode(e)}else{const i=t;let s="";f(e.item.url)||i.setAttribute("href",e.item.url),f(e.item.title)||i.setAttribute("title",e.item.title),!f(e.item.text)&&""!==e.item.text&&(s=i.innerText,i.innerText=e.item.text),f(e.item.target)?i.removeAttribute("target"):i.setAttribute("target",e.item.target),s===e.item.text?(e.item.selection.setSelectionText(this.parent.currentDocument,i,i,1,1),e.item.selection.restore()):e.item.selection.setSelectionText(this.parent.currentDocument,i.childNodes[0],i.childNodes[0],"Paste"===e.item.action?i.childNodes[0].textContent.length:0,i.childNodes[0].textContent.length)}e.callBack&&e.callBack({requestType:"Links",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}createLinkNode(e){const t=new Jd,i=new tR,s=t.getRange(this.parent.currentDocument),r=this.getSelectionNodes(t.getNodeCollection(s)),o=t.save(s,this.parent.currentDocument),a=[],l=[];let h;const c=[],m=[],b=[];let v;for(let E=0;E<r.length;E++)r[E]=i.GetSpliceNode(s,r[E]),a[E]=r[E];for(let E=0;E<a.length;E++){let D=!0;for(h=a[E];!0===D;){if("A"===h.parentNode.nodeName){const L=h.parentNode;h.parentNode.parentNode.insertBefore(L.firstChild,L),h.parentNode.removeChild(L)}this.isBlockNode(h.parentNode)||0===a.length||0===E||E===a.length-1||3===s.startContainer.nodeType?(l[E]=h,D=!1):h=h.parentNode}}for(let E=0,D=0;E<l.length;E++)if(0===E&&(b[D]=l[E]),l.length>1&&E<l.length-1){if(l[E].parentElement===l[E+1].parentElement&&l[E]===l[E+1])continue;b[D+1]=l[E+1],D++}let w=0;m[w]=this.createAchorNode(e);for(let E=0;E<b.length;E++)if(0===E&&(v=b[E].cloneNode(!0),m[E].appendChild(v)),E<b.length-1)if(b[E].parentNode===b[E+1].parentNode){const D=b[E+1].cloneNode(!0);m[w].appendChild(D)}else w+=1,m[w]=this.createAchorNode(e),v=b[E+1].cloneNode(!0),m[w].appendChild(v);this.parent.nodeSelection.setRange(document,o.range);for(let E=0,D=0,L=0;E<=b.length;E++)0===E&&(b[E].parentNode.insertBefore(m[D],b[E].nextSibling),1===this.parent.domNode.blockNodes().length&&this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument,m[D]),c[L]=b[E],L++),E<b.length-1&&(b[E].parentNode===b[E+1].parentNode?(c[L]=b[E+1],L++):(D+=1,b[E+1].parentNode.insertBefore(m[D],b[E+1]),c[L]=b[E+1],L++));for(let E=0;E<c.length;E++)c[E].parentNode&&c[E].parentNode.removeChild(c[E])}createAchorNode(e){const t=Be("a",{className:"e-rte-anchor",attrs:{href:e.item.url,title:f(e.item.title)||""===e.item.title?e.item.url:e.item.title}});return f(e.item.target)||t.setAttribute("target",e.item.target),t}getSelectionNodes(e){e=e.reverse();for(let t=0;t<e.length;t++)(3!==e[t].nodeType||""===e[t].textContent.trim())&&"IMG"!==e[t].nodeName&&(e.splice(t,1),t--);return e.reverse()}isBlockNode(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&nI.indexOf(e.tagName.toLowerCase())>=0}removeText(e,t){const i=e.split(" ");for(let s=0;s<i.length;s++)i[s]===t&&(i.splice(s,1),s--);return i.join(" ")+" "}openLink(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)}removeLink(e){const t=this.parent.domNode.blockNodes();if(t.length<2){this.parent.domNode.setMarker(e.item.selection);const s=B(e.item.selectParent[0],"a")||e.item.selectParent[0],r=s.parentNode,o=[];for(;s.firstChild;null)o.push(r.insertBefore(s.firstChild,s));r.removeChild(s),o&&1===o.length&&(e.item.selection.startContainer=e.item.selection.getNodeArray(o[o.length-1],!0),e.item.selection.endContainer=e.item.selection.startContainer),e.item.selection=this.parent.domNode.saveMarker(e.item.selection)}else for(let i=0;i<t.length;i++){const s=t[i].querySelectorAll("a");for(let r=0;r<s.length;r++)document.getSelection().containsNode(s[r],!0)&&(s[r].outerHTML=s[r].innerHTML)}e.item.selection.restore(),this.callBack(e)}callBack(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}}class Y2e{constructor(e){this.alignments={JustifyLeft:"left",JustifyCenter:"center",JustifyRight:"right",JustifyFull:"justify"},this.parent=e,this.addEventListener()}addEventListener(){this.parent.observer.on(mge,this.applyAlignment,this),this.parent.observer.on(dl,this.onKeyDown,this)}onKeyDown(e){switch(e.event.action){case"justify-center":this.applyAlignment({subCommand:"JustifyCenter",callBack:e.callBack}),e.event.preventDefault();break;case"justify-full":this.applyAlignment({subCommand:"JustifyFull",callBack:e.callBack}),e.event.preventDefault();break;case"justify-left":this.applyAlignment({subCommand:"JustifyLeft",callBack:e.callBack}),e.event.preventDefault();break;case"justify-right":this.applyAlignment({subCommand:"JustifyRight",callBack:e.callBack}),e.event.preventDefault()}}getTableNode(e){return[B(e.startContainer.nodeType===Node.ELEMENT_NODE?e.startContainer:e.startContainer.parentNode,"td,th")]}applyAlignment(e){const t="Table"===e.value,i=this.parent.nodeSelection.getRange(this.parent.currentDocument);let s=this.parent.nodeSelection.save(i,this.parent.currentDocument);if(t)ht(this.getTableNode(i)[0],{"text-align":this.alignments[e.subCommand]});else{this.parent.domNode.setMarker(s);const r=this.parent.domNode.blockNodes();for(let a=0;a<r.length;a++)ht(r[a],{"text-align":this.alignments[e.subCommand]});const o=this.parent.domNode.getImageTagInSelection();for(let a=0;a<o.length;a++){const l=[];l.push(o[a]),this.parent.imgObj.imageCommand({item:{selectNode:l},subCommand:e.subCommand,value:e.subCommand,callBack:e.callBack,selector:e.selector})}this.parent.editableElement.focus(),s=this.parent.domNode.saveMarker(s),Vu()&&LS(this.parent.editableElement,e.selector),s.restore()}e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:t?this.getTableNode(i):this.parent.domNode.blockNodes()})}}class Z2e{constructor(e){this.indentValue=20,this.parent=e,this.addEventListener()}addEventListener(){this.parent.observer.on(gge,this.applyIndents,this),this.parent.observer.on(dl,this.onKeyDown,this)}onKeyDown(e){switch(e.event.action){case"indents":this.applyIndents({subCommand:"Indent",callBack:e.callBack}),e.event.preventDefault();break;case"outdents":this.applyIndents({subCommand:"Outdent",callBack:e.callBack}),e.event.preventDefault()}}applyIndents(e){const t=this.parent.editableElement,i=t.classList.contains("e-rtl"),s=this.parent.nodeSelection.getRange(this.parent.currentDocument);let r=this.parent.nodeSelection.save(s,this.parent.currentDocument);this.parent.domNode.setMarker(r);const o=this.parent.domNode.blockNodes(),a=o.slice(),l=[];for(let h=0;h<a.length;h++)"LI"!==a[h].tagName&&"LI"===a[h].parentNode.tagName?(o.splice(o.indexOf(a[h]),1),l.push(a[h].parentNode)):"LI"===a[h].tagName&&(o.splice(o.indexOf(a[h]),1),l.push(a[h]));l.length>0&&this.parent.observer.notify(dl,{event:{preventDefault:()=>{},stopPropagation:()=>{},shiftKey:"Indent"!==e.subCommand,which:9,action:"indent"},ignoreDefault:!0});for(let h=0;h<o.length;h++){const c=o[h],m=i?c.style.marginRight:c.style.marginLeft;let b;"Indent"===e.subCommand?(b=""===m?this.indentValue+"px":parseInt(m,null)+this.indentValue+"px",i?c.style.marginRight=b:c.style.marginLeft=b):(b=""===m||"0px"===m?"":parseInt(m,null)-this.indentValue+"px",i?c.style.marginRight=b:c.style.marginLeft=b)}t.focus(),Vu()&&LS(t,e.selector),r=this.parent.domNode.saveMarker(r),r.restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})}}const Dy="e-imgright",ky="e-imgleft",iR="e-imgcenter",BQ="e-imgbreak",Io="e-img-caption",wge="e-caption-inline";class Q2e{constructor(e){this.parent=e,this.addEventListener()}addEventListener(){this.parent.observer.on(NQ,this.imageCommand,this)}imageCommand(e){switch(e.value.toString().toLowerCase()){case"image":case"replace":this.createImage(e);break;case"insertlink":this.insertImageLink(e);break;case"openimagelink":this.openImageLink(e);break;case"editimagelink":this.editImageLink(e);break;case"removeimagelink":this.removeImageLink(e);break;case"remove":this.removeImage(e);break;case"alttext":this.insertAltTextImage(e);break;case"dimension":this.imageDimension(e);break;case"caption":this.imageCaption(e);break;case"justifyleft":this.imageJustifyLeft(e);break;case"justifycenter":this.imageJustifyCenter(e);break;case"justifyright":this.imageJustifyRight(e);break;case"inline":this.imageInline(e);break;case"break":this.imageBreak(e)}}createImage(e){let t=!1;if(e.item.url=f(e.item.url)||"undefined"===e.item.url?e.item.src:e.item.url,f(e.item.selectParent)||"IMG"!==e.item.selectParent[0].tagName){const i=Be("img");this.setStyle(i,e),f(e.item.selection)||e.item.selection.restore(),f(e.selector)||"pasteCleanupModule"!==e.selector?Ty.Insert(this.parent.currentDocument,i,this.parent.editableElement):e.callBack({requestType:"Images",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[i]})}else this.setStyle(e.item.selectParent[0],e),t=!0;if(e.callBack&&(f(e.selector)||!f(e.selector)&&"pasteCleanupModule"!==e.selector)){const i=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],s="Replace"===e.value||t?e.item.selectParent[0]:q.isIE?i.previousSibling:i.previousElementSibling;s.addEventListener("load",()=>{("Replace"!==e.value||!t)&&e.callBack({requestType:"Images",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[s]})})}}setStyle(e,t){f(t.item.url)||e.setAttribute("src",t.item.url),e.setAttribute("class","e-rte-image"+(f(t.item.cssClass)?"":" "+t.item.cssClass)),f(t.item.altText)||e.setAttribute("alt",t.item.altText),!f(t.item.width)&&!f(t.item.width.width)&&e.setAttribute("width",this.calculateStyleValue(t.item.width.width)),!f(t.item.height)&&!f(t.item.height.height)&&e.setAttribute("height",this.calculateStyleValue(t.item.height.height)),!f(t.item.width)&&!f(t.item.width.minWidth)&&(e.style.minWidth=this.calculateStyleValue(t.item.width.minWidth)),!f(t.item.width)&&!f(t.item.width.maxWidth)&&(e.style.maxWidth=this.calculateStyleValue(t.item.width.maxWidth)),!f(t.item.height)&&!f(t.item.height.minHeight)&&(e.style.minHeight=this.calculateStyleValue(t.item.height.minHeight)),!f(t.item.height)&&!f(t.item.height.maxHeight)&&(e.style.maxHeight=this.calculateStyleValue(t.item.height.maxHeight))}calculateStyleValue(e){let t;return t="string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px",t}insertImageLink(e){const t=Be("a",{attrs:{href:e.item.url}});e.item.selectNode[0].parentElement.classList.contains("e-img-wrap")&&(e.item.selection.restore(),t.setAttribute("contenteditable","true")),t.appendChild(e.item.selectNode[0]),f(e.item.target)||t.setAttribute("target",e.item.target),Ty.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.callBack(e)}openImageLink(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)}removeImageLink(e){const t=e.item.selectParent[0];if(t.classList.contains("e-img-caption")){const i=X(".e-img-wrap",t),s=X(".e-img-inner",t),r=s.cloneNode(!0);te(X("a",t)),te(s),i.appendChild(e.item.insertElement),i.appendChild(r)}else te(t),q.isIE&&e.item.selection.restore(),Ty.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement);this.callBack(e)}editImageLink(e){e.item.selectNode[0].parentElement.href=e.item.url,f(e.item.target)?e.item.selectNode[0].parentElement.removeAttribute("target"):e.item.selectNode[0].parentElement.target=e.item.target,this.callBack(e)}removeImage(e){B(e.item.selectNode[0],"a")&&("A"!==e.item.selectNode[0].parentElement.nodeName||f(e.item.selectNode[0].parentElement.innerText))?te(B(e.item.selectNode[0],"a")):f(B(e.item.selectNode[0],"."+Io))?te(e.item.selectNode[0]):te(B(e.item.selectNode[0],"."+Io)),this.callBack(e)}insertAltTextImage(e){e.item.selectNode[0].setAttribute("alt",e.item.altText),this.callBack(e)}imageDimension(e){const t=e.item.selectNode[0];t.style.height="",t.style.width="","auto"!==e.item.width?t.style.width=st(e.item.width):t.removeAttribute("width"),"auto"!==e.item.height?t.style.height=st(e.item.height):t.removeAttribute("height"),this.callBack(e)}imageCaption(e){Ty.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement),this.callBack(e)}imageJustifyLeft(e){const t=e.item.selectNode[0];f(t)||(t.removeAttribute("class"),z([t],"e-rte-image"),f(B(t,"."+Io))||(W([B(t,"."+Io)],Dy),z([B(t,"."+Io)],ky)),"A"===t.parentElement.nodeName?(W([t.parentElement],Dy),z([t.parentElement],ky),z([t],ky)):z([t],ky),this.callBack(e))}imageJustifyCenter(e){const t=e.item.selectNode[0];f(t)||(t.removeAttribute("class"),z([t],"e-rte-image"),f(B(t,"."+Io))||(W([B(t,"."+Io)],ky),W([B(t,"."+Io)],Dy),z([B(t,"."+Io)],iR)),"A"===t.parentElement.nodeName?(W([t.parentElement],ky),W([t.parentElement],Dy),z([t.parentElement],iR),z([t],iR)):z([t],iR),this.callBack(e))}imageJustifyRight(e){const t=e.item.selectNode[0];f(t)||(t.removeAttribute("class"),z([t],"e-rte-image"),f(B(t,"."+Io))||(W([B(t,"."+Io)],ky),z([B(t,"."+Io)],Dy)),"A"===t.parentElement.nodeName?(W([t.parentElement],ky),z([t.parentElement],Dy),z([t],Dy)):z([t],Dy),this.callBack(e))}imageInline(e){const t=e.item.selectNode[0];t.removeAttribute("class"),z([t],"e-rte-image"),z([t],"e-imginline"),f(B(t,"."+Io))||(W([B(t,"."+Io)],BQ),W([B(t,"."+Io)],iR),W([B(t,"."+Io)],ky),W([B(t,"."+Io)],Dy),z([B(t,"."+Io)],wge)),this.callBack(e)}imageBreak(e){const t=e.item.selectNode[0];t.removeAttribute("class"),z([t],BQ),z([t],"e-rte-image"),f(B(t,"."+Io))||(W([B(t,"."+Io)],wge),W([B(t,"."+Io)],iR),W([B(t,"."+Io)],ky),W([B(t,"."+Io)],Dy),z([B(t,"."+Io)],BQ)),this.callBack(e)}callBack(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}}class J2e{constructor(e){this.parent=e,this.addEventListener()}addEventListener(){this.parent.observer.on(sge,this.createTable,this),this.parent.observer.on(rge,this.insertRow,this),this.parent.observer.on(oge,this.insertColumn,this),this.parent.observer.on(age,this.deleteRow,this),this.parent.observer.on(lge,this.deleteColumn,this),this.parent.observer.on(hge,this.removeTable,this),this.parent.observer.on(cge,this.tableHeader,this),this.parent.observer.on(dge,this.tableVerticalAlign,this),this.parent.observer.on(uge,this.cellMerge,this),this.parent.observer.on(fge,this.HorizontalSplit,this),this.parent.observer.on(pge,this.VerticalSplit,this),this.parent.observer.on("TABLE_MOVE",this.tableMove,this)}createTable(e){const t=Be("table",{className:"e-rte-table"}),i=Be("tbody");f(e.item.width.width)||(t.style.width=this.calculateStyleValue(e.item.width.width)),f(e.item.width.minWidth)||(t.style.minWidth=this.calculateStyleValue(e.item.width.minWidth)),f(e.item.width.maxWidth)||(t.style.maxWidth=this.calculateStyleValue(e.item.width.maxWidth));const s=parseInt(e.item.width.width,10)>100?100/e.item.columns:parseInt(e.item.width.width,10)/e.item.columns;for(let r=0;r<e.item.rows;r++){const o=Be("tr");for(let a=0;a<e.item.columns;a++){const l=Be("td");l.appendChild(Be("br")),l.style.width=s+"%",o.appendChild(l)}i.appendChild(o)}if(t.appendChild(i),e.item.selection.restore(),Ty.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.removeEmptyNode(),e.item.selection.setSelectionText(this.parent.currentDocument,t.querySelector("td"),t.querySelector("td"),0,0),null===t.nextElementSibling){let r;"DIV"===e.enterAction?(r=Be("div"),r.appendChild(Be("br"))):"BR"===e.enterAction?r=Be("br"):(r=Be("p"),r.appendChild(Be("br"))),this.insertAfter(r,t)}return t.querySelector("td").classList.add("e-cell-select"),e.callBack&&e.callBack({requestType:"Table",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[t]}),t}calculateStyleValue(e){let t;return t="string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px",t}removeEmptyNode(){const e=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty");for(let s=0;s<e.length;s++)te(e[s]);let t=this.parent.editableElement.querySelectorAll("li *:empty:not(img)");for(let s=0;s<t.length;s++)te(t[s]),t.length===s+1&&(t=this.parent.editableElement.querySelectorAll("li *:empty:not(img)"),s=-1);const i=this.parent.editableElement.querySelectorAll("li:empty");for(let s=0;s<i.length;s++)te(i[s])}insertAfter(e,t){t.parentNode.insertBefore(e,t.nextSibling)}getSelectedCellMinMaxIndex(e){const t=this.curTable.querySelectorAll(".e-cell-select");let i=0,s=e.length,r=0,o=e[0].length,a=0;for(;i<t.length;i++){const l=this.getCorrespondingIndex(t[i],e),h=this.FindIndex(l[0],l[1],e);s=Math.min(l[0],s),r=Math.max(h[0],r),o=Math.min(l[1],o),a=Math.max(h[1],a)}return{startRow:s,endRow:r,startColumn:o,endColumn:a}}insertRow(e){const t="InsertRowBefore"!==e.item.subCommand;let i=e.item.selection.range.startContainer;if("TH"===i.nodeName||"TD"===i.nodeName||(i=B(i.parentElement,"td,th")),"th"!==i.nodeName.toLowerCase()||"InsertRowBefore"!==e.item.subCommand){if(this.curTable=B(this.parent.nodeSelection.range.startContainer.parentElement,"table"),0===this.curTable.querySelectorAll(".e-cell-select").length){const s=this.curTable.rows[this.curTable.rows.length-1],r=s.cloneNode(!0);r.removeAttribute("rowspan"),this.insertAfter(r,s)}else{const s=this.getCorrespondingColumns(),r=this.getSelectedCellMinMaxIndex(s),o=t?r.endRow:r.startRow,a=Be("tr"),l=this.curTable.querySelectorAll("th.e-cell-select").length>0;for(let c=0;c<s[o].length;c++)if(t&&o<s.length-1&&s[o][c]===s[o+1][c]||!t&&0<o&&s[o][c]===s[o-1][c])(0===c||0<c&&s[o][c]!==s[o][c-1])&&s[o][c].setAttribute("rowspan",(parseInt(s[o][c].getAttribute("rowspan"),10)+1).toString());else{const m=Be("td");m.appendChild(Be("br")),a.appendChild(m),m.setAttribute("style",s[l&&t&&s[o+1]?o+1:o][c].getAttribute("style"))}let h;h=l&&t?this.curTable.querySelector("tbody").childNodes[0]:this.curTable.rows[o],"InsertRowBefore"===e.item.subCommand||l?h.parentElement.insertBefore(a,h):this.insertAfter(a,h)}e.item.selection.setSelectionText(this.parent.currentDocument,e.item.selection.range.startContainer,e.item.selection.range.startContainer,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}}insertColumn(e){let t=e.item.selection.range.startContainer;"TH"===t.nodeName||"TD"===t.nodeName||(t=B(t.parentElement,"td,th"));const i=B(t,"tr");let s;const r=B(i,"table").rows,o=Array.prototype.slice.call(i.querySelectorAll(":scope > td, :scope > th")).indexOf(t),a=parseInt(e.item.width,10)/i.querySelectorAll(":scope > td, :scope > th").length,l=parseInt(e.item.width,10)/(i.querySelectorAll(":scope > td, :scope > th").length+1),h=B(i,"table"),c=B(i,"table").querySelectorAll("th,td");for(let m=0;m<c.length;m++)c[m].dataset.oldWidth=c[m].offsetWidth/h.offsetWidth*100+"%";for(let m=0;m<r.length;m++){s=r[m].querySelectorAll(":scope > td, :scope > th")[o];const b=s.cloneNode(!0);b.innerHTML="",b.appendChild(Be("br")),b.removeAttribute("class"),b.removeAttribute("colspan"),b.removeAttribute("rowspan"),"InsertColumnLeft"===e.item.subCommand?s.parentElement.insertBefore(b,s):this.insertAfter(b,s),b.style.width=l.toFixed(4)+"%",delete b.dataset.oldWidth}for(let m=0;m<c.length;m++)c[m].style.width=(Number(c[m].dataset.oldWidth.split("%")[0])*l/a).toFixed(4)+"%",delete c[m].dataset.oldWidth;e.item.selection.setSelectionText(this.parent.currentDocument,t,t,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}deleteColumn(e){let t=e.item.selection.range.startContainer;3===t.nodeType&&(t=B(t.parentElement,"td,th"));const i=B(t,"TH"===t.tagName?"thead":"tbody"),s=i&&Array.prototype.indexOf.call(i.childNodes,t.parentNode);if(this.curTable=B(t,"table"),1===B(t,"tr").querySelectorAll("th,td").length)e.item.selection.restore(),te(B(t.parentElement,"table"));else{let o;const a=this.getCorrespondingColumns(),l=this.getSelectedCellMinMaxIndex(a),h=l.startColumn,c=l.endColumn;for(let m=0;m<a.length;m++){const b=a[m];for(let v=0;v<b.length;v++){const w=b[v],E=this.getCorrespondingIndex(w,a),D=parseInt(w.getAttribute("colspan"),10)||1;E[1]+(D-1)>=h&&E[1]<=c&&(D>1?w.setAttribute("colspan",(D-1).toString()):(te(w),o=v,q.isIE&&(e.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))))}}if(o>-1){const m=i.children[s],b=m&&m.children[o<=m.children.length-1?o:o-1];b&&(e.item.selection.setSelectionText(this.parent.currentDocument,b,b,0,0),b.classList.add("e-cell-select"))}}if(e.callBack){const o=this.parent.nodeSelection.getRange(this.parent.currentDocument).startContainer;if("TD"!==o.nodeName){const a=this.parent.nodeSelection.getRange(this.parent.currentDocument).startOffset,l=o.children[a];l&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,l,0)}e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}}deleteRow(e){let t=e.item.selection.range.startContainer;3===t.nodeType&&(t=B(t.parentElement,"td,th"));const i=Array.prototype.indexOf.call(t.parentNode.childNodes,t);let s;this.curTable=B(t,"table");const r=this.getCorrespondingColumns(),o=this.getSelectedCellMinMaxIndex(r);let a,l;if(1===this.curTable.rows.length)e.item.selection.restore(),te(B(t.parentElement,"table"));else for(a=o.endRow;a>=o.startRow;a--){for(s=this.curTable.rows[a],l=0;l<r[a].length;l++){if((0===l||r[a][l]!==r[a][l-1])&&1<parseInt(r[a][l].getAttribute("rowspan"),10)){const b=parseInt(r[a][l].getAttribute("rowspan"),10)-1;1===b?r[a][l].removeAttribute("rowspan"):r[a][l].setAttribute("rowspan",b.toString())}if(a<r.length-1&&r[a][l]===r[a+1][l]&&(0===a||r[a][l]!==r[a-1][l])){const b=r[a][l];let v;for(v=l;0<v&&r[a][v]===r[a][v-1];v--)0===v?this.curTable.rows[a+1].prepend(b):r[a+1][v-1].insertAdjacentElement("afterend",b)}}const h=s.rowIndex;this.curTable.deleteRow(h);const c=f(this.curTable.rows[h])?this.curTable.querySelectorAll("tbody tr")[h-1]:this.curTable.querySelectorAll("tbody tr")[h],m=c&&c.querySelectorAll("td")[i];m?(e.item.selection.setSelectionText(this.parent.currentDocument,m,m,0,0),m.classList.add("e-cell-select")):(e.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))}e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}removeTable(e){let t=e.item.selection.range.startContainer;t=3===t.nodeType?t.parentNode:t;const i=B(t.parentElement,"table");i&&(e.item.selection.restore(),te(i)),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}tableHeader(e){let t=!1,i=e.item.selection.range.startContainer;i=3===i.nodeType?i.parentNode:i;const s=B(i.parentElement,"table");if([].slice.call(s.childNodes).forEach(r=>{"THEAD"===r.nodeName&&(t=!0)}),s&&!t){const r=s.querySelector("tr").childElementCount;let o=0;for(let h=0;h<r;h++)o+=parseInt(s.querySelector("tr").children[h].getAttribute("colspan"),10)||1;const l=s.createTHead().insertRow(0);for(let h=0;h<o;h++){const c=Be("th");c.appendChild(Be("br")),l.appendChild(c)}}else s.deleteTHead();e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}tableVerticalAlign(e){e.item.tableCell.style.verticalAlign="AlignTop"===e.item.subCommand?"top":"AlignMiddle"===e.item.subCommand?"middle":"bottom",e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}cellMerge(e){f(this.curTable)&&(this.curTable=B(this.parent.nodeSelection.range.startContainer.parentElement,"table"));const t=this.curTable.querySelectorAll(".e-cell-select");if(t.length<2)return;this.mergeCellContent();const i=this.getSelectedMinMaxIndexes(this.getCorrespondingColumns()),s=t[0],r=s.parentElement.querySelectorAll(".e-cell-select");i.startColumn<i.endColumn&&s.setAttribute("colspan",(i.endColumn-i.startColumn+1).toString()),i.startRow<i.endRow&&s.setAttribute("rowspan",(i.endRow-i.startRow+1).toString());let o=0;for(let a=r.length-1;a>=0;a--)o+=parseFloat(r[a].style.width);s.style.width=o+"%";for(let a=1;a<=t.length-1;a++)te(t[a]);for(let a=0;a<this.curTable.rows.length;a++)""===this.curTable.rows[a].innerHTML&&te(this.curTable.rows[a]);this.updateRowSpanStyle(i.startRow,i.endRow,this.getCorrespondingColumns()),this.updateColSpanStyle(i.startColumn,i.endColumn,this.getCorrespondingColumns()),e.item.selection.setSelectionText(this.parent.currentDocument,e.item.selection.range.startContainer,e.item.selection.range.startContainer,0,0),this.parent.nodeSelection.range&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}updateColSpanStyle(e,t,i){let s,r,o,l,a=0,h=0;const c=i;if(e<(t=Math.min(t,c[0].length-1))){for(;r<=t;r++)if(!(e<r&&c[0][r]===c[0][r-1])&&1<(a=Math.min(parseInt(c[0][r].getAttribute("colspan"),10)||1,t-e+1))&&c[0][r]===c[0][r+1])for(h=a-1,s=1;s<c.length;s++){if(c[s][r]!==c[s-1][r])for(o=r;o<r+a;o++)if(1<(l=parseInt(c[s][o].getAttribute("colspan"),10)||1)&&c[s][o]===c[s][o+1])o+=h=Math.min(h,l-1);else if(!(h=Math.max(0,h-1)))break;if(!h)break}h&&this.updateCellAttribute(c,h,"colspan",0,c.length-1,e,t)}}updateRowSpanStyle(e,t,i){let s,r,o,l,a=0,h=0;const c=i;if(e<(t=Math.min(t,c.length-1))){for(s=e;s<=t;s++)if(!(e<s&&c[s][0]===c[s-1][0])&&c[s][0]&&1<(a=Math.min(parseInt(c[s][0].getAttribute("rowspan"),10)||1,t-e+1))&&c[s][0]===c[s+1][0])for(h=a-1,r=1;r<c[0].length;r++)if(c[s][r]!==c[s][r-1]){for(o=s;o<s+a;o++)if(1<(l=parseInt(c[o][r].getAttribute("rowspan"),10)||1)&&c[o][r]===c[o+1][r])o+=h=Math.min(h,l-1);else if(!(h=Math.max(0,h-1)))break;if(!h)break}h&&this.updateCellAttribute(c,h,"rowspan",e,t,0,c[0].length-1)}}updateCellAttribute(e,t,i,s,r,o,a){let l,h,c;for(l=s;l<=r;l++)for(h=o;h<=a;h++)s<l&&e[l][h]===e[l-1][h]||o<h&&e[l][h]===e[l][h-1]||1<(c=parseInt(e[l][h].getAttribute(i),10)||1)&&(1<c-t?e[l][h].setAttribute(i,(c-t).toString()):e[l][h].removeAttribute(i))}mergeCellContent(){const e=this.curTable.querySelectorAll(".e-cell-select");let t="<br>"===e[0].innerHTML?"":e[0].innerHTML;for(let i=1;i<e.length;i++)"<br>"!==e[i].innerHTML&&(t=t?t+"<br>"+e[i].innerHTML:t+e[i].innerHTML);e[0].innerHTML=t}getSelectedMinMaxIndexes(e){const t=this.curTable.querySelectorAll(".e-cell-select");if(0<t.length){let i=e.length,s=0,r=e[0].length,o=0;for(let a=0;a<t.length;a++){const l=this.getCorrespondingIndex(t[a],e),h=this.FindIndex(l[0],l[1],e);i=Math.min(l[0],i),s=Math.max(h[0],s),r=Math.min(l[1],r),o=Math.max(h[1],o)}return{startRow:i,endRow:s,startColumn:r,endColumn:o}}return null}HorizontalSplit(e){if(this.curTable=B(e.item.selection.range.startContainer.parentElement,"table"),this.curTable.querySelectorAll(".e-cell-select").length>1)return;this.activeCell=this.curTable.querySelector(".e-cell-select");const i=this.activeCell.cloneNode(!0);i.removeAttribute("class"),i.innerHTML="</br>";const s=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),r=this.getCorrespondingColumns(),o=this.activeCell.getAttribute("rowspan")?parseInt(this.activeCell.getAttribute("rowspan"),10):1;if(o>1){const a=Math.ceil(o/2);let l,h;for(1<a?this.activeCell.setAttribute("rowspan",a.toString()):this.activeCell.removeAttribute("rowspan"),1<o-a?i.setAttribute("rowspan",(o-a).toString()):i.removeAttribute("rowspan"),l=s[0]+Math.ceil(o/2),h=0===s[1]?s[1]:s[1]-1;0<=h&&(r[l][h]===r[l][h-1]||0<l&&r[l][h]===r[l-1][h]);)h--;-1===h?this.curTable.rows[l].firstChild?this.curTable.rows[l].prepend(i):this.curTable.appendChild(i):r[l][h].insertAdjacentElement("afterend",i)}else{const a=Be("tr");a.appendChild(i);const l=r[s[0]];for(let h=0;h<=l.length-1;h++)l[h]!==l[h-1]&&l[h]!==this.activeCell&&l[h].setAttribute("rowspan",((parseInt(l[h].getAttribute("rowspan"),10)?parseInt(l[h].getAttribute("rowspan"),10):1)+1).toString());this.activeCell.parentNode.insertAdjacentElement("afterend",a)}e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}VerticalSplit(e){if(this.curTable=B(e.item.selection.range.startContainer.parentElement,"table"),this.curTable.querySelectorAll(".e-cell-select").length>1)return;this.activeCell=this.curTable.querySelector(".e-cell-select");const i=this.curTable.rows,s=this.activeCell.cloneNode(!0);s.removeAttribute("class"),s.innerHTML="</br>";let r=parseFloat(this.activeCell.style.width)/2;if("TH"===this.activeCell.tagName&&isNaN(r)){const h=this.curTable.querySelector("tr").childElementCount;let c=0;for(let m=0;m<h;m++)c+=parseInt(this.curTable.querySelector("tr").children[m].getAttribute("colspan"),10)||1;r=parseFloat((this.activeCell.offsetWidth/2/this.curTable.offsetWidth*100).toFixed(1))}const o=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),a=this.getCorrespondingColumns(),l=parseInt(this.activeCell.getAttribute("colspan"),10);if(l>1)1<Math.ceil(l/2)?this.activeCell.setAttribute("colspan",(l/2).toString()):this.activeCell.removeAttribute("colspan"),1<l-l/2?s.setAttribute("colspan",(l-l/2).toString()):s.removeAttribute("colspan");else for(let h=0;h<=i.length-1;h++)if(0===h||a[h][o[1]]!==a[h-1][o[1]]){const c=a[h][o[1]];c!==this.activeCell&&c.setAttribute("colspan",((parseInt(c.getAttribute("colspan"),10)?parseInt(c.getAttribute("colspan"),10):1)+1).toString())}this.activeCell.style.width=r+"%",s.style.width=r+"%",this.activeCell.parentNode.insertBefore(s,this.activeCell.nextSibling),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}getCorrespondingColumns(){const e=[],s=this.curTable.rows;for(let r=0;r<=s.length-1;r++){const o=s[r];let a=0;for(let l=0;l<=o.children.length-1;l++){const h=o.children[l];for(let c=h,m=parseInt(c.getAttribute("colspan"),10)||1,b=parseInt(c.getAttribute("rowspan"),10)||1,v=r;v<r+b;v++)for(let w=a;w<a+m;w++)e[v]||(e[v]=[]),e[v][w]?a++:e[v][w]=h;a+=0}}return e}FindIndex(e,t,i){let s,r;for(s=e+1,r=t+1;s<i.length;){if(i[s][t]!==i[e][t]){s--;break}s++}for(s===i.length&&s--;r<i[e].length;){if(i[e][r]!==i[e][t]){r--;break}r++}return r===i[e].length&&r--,[s,r]}getCorrespondingIndex(e,t){for(let i=0;i<t.length;i++)for(let s=0;s<t[i].length;s++)if(t[i][s]===e)return[i,s];return[]}highlightCells(e,t,i,s,r){let o,a,l,h,c=e,m=t,b=i,v=s,w=new eHe;for(o=c;o<=m;o++){for(((1<(parseInt(r[o][b].getAttribute("rowspan"),10)||1)||1<(parseInt(r[o][b].getAttribute("colspan"),10)||1))&&(h=this.FindIndex((l=this.getCorrespondingIndex(r[o][b],r))[0],l[1],r))||(1<(parseInt(r[o][v].getAttribute("rowspan"),10)||1)||1<(parseInt(r[o][v].getAttribute("colspan"),10)||1))&&(h=this.FindIndex((l=this.getCorrespondingIndex(r[o][v],r))[0],l[1],r)))&&(c=Math.min(l[0],c),m=Math.max(h[0],m),b=Math.min(l[1],b),v=Math.max(h[1],v)),a=b;a<=v;a++)((1<(parseInt(r[c][a].getAttribute("rowspan"),10)||1)||1<(parseInt(r[c][a].getAttribute("colspan"),10)||1))&&(h=this.FindIndex((l=this.getCorrespondingIndex(r[c][a],r))[0],l[1],r))||(1<(parseInt(r[m][a].getAttribute("rowspan"),10)||1)||1<(parseInt(r[m][a].getAttribute("colspan"),10)||1))&&(h=this.FindIndex((l=this.getCorrespondingIndex(r[m][a],r))[0],l[1],r)))&&(c=Math.min(l[0],c),m=Math.max(h[0],m),b=Math.min(l[1],b),v=Math.max(h[1],v));w=c===e&&m===t&&b===i&&v===s?{startRow:e,endRow:t,startColumn:i,endColumn:s}:this.highlightCells(c,m,b,v,r)}return w}tableMove(e){this.activeCell=e.selectNode[0];const t=e.event.target,i=this.activeCell.tagName,s=t.tagName;if(this.curTable=B(t,"table"),this.curTable.querySelectorAll(".e-cell-select").length>1&&this.parent.nodeSelection.Clear(this.parent.currentDocument),"TD"!==t.tagName&&"TH"!==t.tagName&&i!==s)return;const r=Array.prototype.slice.call(this.activeCell.parentElement.parentElement.children).indexOf(this.activeCell.parentElement),o=Array.prototype.slice.call(this.activeCell.parentElement.children).indexOf(this.activeCell),a=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement),l=Array.prototype.slice.call(t.parentElement.children).indexOf(t),h=this.curTable.querySelectorAll(".e-cell-select");for(let w=h.length-1;w>=0;w--)this.activeCell!==h[w]&&h[w].classList.remove("e-cell-select");if(r===a&&o===l)return;const c=this.getCorrespondingColumns(),m=this.getCorrespondingIndex(this.activeCell,c),b=this.getCorrespondingIndex(t,c),v=this.highlightCells(Math.min(m[0],b[0]),Math.max(m[0],b[0]),Math.min(m[1],b[1]),Math.max(m[1],b[1]),c);for(let w=v.startRow;w<=v.endRow;w++)for(let E=v.startColumn;E<=v.endColumn;E++)c[w][E].classList.add("e-cell-select");this.parent.nodeSelection.range&&(this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,this.parent.nodeSelection.range.endContainer,0,0),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,0))}}class eHe{}let Ry=(()=>{class n{getFormattedNode(t,i,s){const r=this.getFormatParent(t,i,s);return null!==r&&r!==s?r:null}getFormatParent(t,i,s){do{t=t.parentNode}while(t&&t!==s&&!this.isFormattedNode(t,i));return t}isFormattedNode(t,i){switch(i){case"bold":return n.isBold(t);case"italic":return n.isItalic(t);case"underline":return n.isUnderline(t);case"strikethrough":return n.isStrikethrough(t);case"superscript":return n.isSuperscript(t);case"subscript":return n.isSubscript(t);case"fontcolor":return this.isFontColor(t);case"fontname":return this.isFontName(t);case"fontsize":return this.isFontSize(t);case"backgroundcolor":return this.isBackgroundColor(t);default:return!1}}static isBold(t){return-1!==["strong","b"].indexOf(t.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(t.nodeName.toLowerCase())||!t.style||"bold"!==t.style.fontWeight)}static isItalic(t){return-1!==["em","i"].indexOf(t.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(t.nodeName.toLowerCase())||!t.style||"italic"!==t.style.fontStyle)}static isUnderline(t){return-1!==["u"].indexOf(t.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(t.nodeName.toLowerCase())||!t.style||"underline"!==t.style.textDecoration)}static isStrikethrough(t){return-1!==["del","strike"].indexOf(t.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(t.nodeName.toLowerCase())||!t.style||"line-through"!==t.style.textDecoration)}static isSuperscript(t){return-1!==["sup"].indexOf(t.nodeName.toLowerCase())}static isSubscript(t){return-1!==["sub"].indexOf(t.nodeName.toLowerCase())}isFontColor(t){const i=t.style&&t.style.color;return-1!==n.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i}isBackgroundColor(t){const i=t.style&&t.style.backgroundColor;return-1!==n.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i}isFontSize(t){const i=t.style&&t.style.fontSize;return-1!==n.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i}isFontName(t){const i=t.style&&t.style.fontFamily;return-1!==n.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i}}return n.inlineTags=["a","abbr","acronym","b","bdo","big","cite","code","dfn","em","i","kbd","label","q","samp","small","span","strong","sub","sup","tt","u","var","del"],n})(),Sge=(()=>{class n{static applyFormat(t,i,s,r,o,a){if(this.enterAction=r,["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase","fontcolor","fontname","fontsize","backgroundcolor"].indexOf(i)>-1){"backgroundcolor"===i&&""===o&&(o="transparent");let h=new Jd;const c=new $6(s,t),m=new tR,b=new Ry;let v=h.getRange(t);const w=h.save(v,t),E=v.collapsed?h.getSelectionNodeCollection(v):h.getSelectionNodeCollectionBr(v);let D=!1,L=!1,N=!1,V=!1;const $=["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(i)>-1;if(v.collapsed){let Q=b.getFormattedNode(v.startContainer,i,s),le=f(Q)?null:null===Q.getAttribute("style")?Q.nodeName:Q.nodeName+"[style='"+Q.getAttribute("style")+"']";if(E.length>0)D=!0,v=m.GetCursorRange(t,v,E[0]);else if(3===v.startContainer.nodeType&&(v.startContainer.parentElement.childElementCount>0&&v.startOffset>0&&"br"!==v.startContainer.parentElement.firstElementChild.tagName.toLowerCase()||!f(Q)&&Q===v.startContainer.parentElement.closest(le)&&0!=v.startContainer.parentElement.closest(le).textContent.replace(new RegExp(String.fromCharCode(8203),"g"),"").trim().length))D=!0,v=m.GetCursorRange(t,v,v.startContainer),E.push(v.startContainer);else{const ke=this.insertCursorNode(t,h,v,b,m,i,o,s);h.endContainer=h.startContainer=h.getNodeArray(ke,!0);const Ye="BR"===ke.nodeName&&ke.parentNode.childNodes;f(Ye)||1!==Ye.length||"BR"!==Ye[0].nodeName||0!==E.length?h.endOffset=h.startOffset=1:(h.setSelectionText(t,v.startContainer,v.endContainer,0,0),V=!0),"BR"===ke.nodeName&&0===ke.parentNode.textContent.length&&(V=!0)}}N=v.collapsed;let ie=!1;for(let Q=0;Q<E.length;Q++){let le=b.getFormattedNode(E[Q],i,s);null===le&&("subscript"===i?(le=b.getFormattedNode(E[Q],"superscript",s),ie=null!==le):"superscript"===i&&(le=b.getFormattedNode(E[Q],"subscript",s),ie=null!==le)),0===Q&&null===le&&(L=!0),E[Q]=null===le||L&&!$?this.insertFormat(t,E,Q,le,N,L,$,v,m,i,o):this.removeFormat(E,Q,le,N,L,$,v,m,i,o,h,s,c),h=this.applySelection(E,h,m,Q,D)}Vu()&&LS(s,a),V||w.restore(),ie&&this.applyFormat(t,i,s,r)}}static insertCursorNode(t,i,s,r,o,a,l,h){const c=i.getNodeCollection(s),m=new $6(h,t),b=c.length>0?c.length>1&&s.startContainer===s.endContainer?this.getCursorFormat(r,c,a,h):r.getFormattedNode(c[0],a,h):null;let v=null;if(b){if(v=c[0],8203===b.firstChild.textContent.charCodeAt(0)&&3===b.firstChild.nodeType){const w=new RegExp(String.fromCharCode(8203),"g");let E,D;if(b.firstChild===v?(v.textContent=b.parentElement&&(m.isBlockNode(b.parentElement)&&b.parentElement.textContent.length<=1?b.parentElement.childElementCount>1:0===b.childElementCount)&&(b.parentElement.textContent.length>1||b.parentElement.firstChild&&1===b.parentElement.firstChild.nodeType)?v.textContent:v.textContent.replace(w,""),E=v):(b.firstChild.textContent=b.firstChild.textContent.replace(w,""),E=b.firstChild),0===E.textContent.length)if(f(E.previousSibling)){if(!f(E.parentElement)&&0===E.parentElement.textContent.length){let L=document.createElement("BR");E.parentElement.appendChild(L),te(E),v=L,i.setCursorPoint(t,v.parentElement,0)}}else v=E.previousSibling,D=E.textContent.length-1,i.setCursorPoint(t,E,D)}["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(a)>-1?("fontcolor"===a?b.style.color=l:"fontname"===a?b.style.fontFamily=l:"fontsize"===a?b.style.fontSize=l:b.style.backgroundColor=l,v=b):Ka.unwrap(b)}else c.length>1&&s.startOffset>0&&c[0].firstElementChild&&"br"===c[0].firstElementChild.tagName.toLowerCase()&&(c[0].innerHTML=""),1===c.length&&0===s.startOffset&&("BR"===c[0].nodeName||"BR"===c[0].nextSibling.nodeName)&&te("#text"===c[0].nodeName?c[0].nextSibling:c[0]),v=this.getInsertNode(t,s,a,l).firstChild;return v}static getCursorFormat(t,i,s,r){let o;for(let a=0;a<i.length;a++)o=i[a].lastElementChild?i[a].lastElementChild:i[a];return t.getFormattedNode(o,s,r)}static removeFormat(t,i,s,r,o,a,l,h,c,m,b,v,w){let L,N,E=null,D="#text"===l.startContainer.nodeName?l.startContainer.textContent.substring(l.startOffset,l.startContainer.textContent.length):l.startContainer.textContent;if(l.startContainer!==l.endContainer||0!==l.startOffset||l.endOffset!==l.startContainer.length){const Q=[];let le=t[i];do{Q.push(b.getIndex(le)),le=le.parentNode}while(le&&le!==s);if("BR"!==t[i].nodeName&&(le=E=r&&s.textContent.length-1===l.startOffset?h.SplitNode(l,s,!0):h.GetSpliceNode(l,s)),r){let ke=E;for(;null!==ke.firstChild&&3!==ke.firstChild.nodeType;null)ke=ke.firstChild;ke.innerHTML="&#8203;",t[i]=ke.firstChild}else{for(;le&&le.childNodes.length>0&&Q.length-1>=0&&le.childNodes.length>Q[Q.length-1];)le=le.childNodes[Q[Q.length-1]],Q.pop();if("BR"!==t[i].nodeName)if(3!==le.nodeType||r&&""===le.nodeValue){const ke=document.createElement("div");ke.innerHTML="&#8203;",3!==le.nodeType?(le.insertBefore(ke.firstChild,le.firstChild),t[i]=le.firstChild):(le.parentNode.insertBefore(ke.firstChild,le),t[i]=le.previousSibling,le.parentNode.removeChild(le))}else t[i]=le}}if("backgroundcolor"===c&&(L=s.style.fontSize),"fontsize"===c){const Q=B(t[i].parentElement,"span[style*=background-color]");f(Q)||(N=Q.style.backgroundColor)}const V=s.getAttribute("style"),$=s.tagName,ie=Ka.unwrap(s);if(ie[0]&&!a){let Q=ie[i]?ie[i]:ie[0];const le=Q;for(;Q&&Q.parentElement&&Q.parentElement!==v;Q=Q)if(Q.parentElement&&Q.parentElement.tagName.toLocaleLowerCase()===s.tagName.toLocaleLowerCase()&&(Q.parentElement.childElementCount>1||l.startOffset>1)){if(le.parentElement&&le.parentElement.tagName.toLocaleLowerCase()===s.tagName.toLocaleLowerCase()&&l.startOffset===l.endOffset&&1!==le.nodeType&&!f(le.textContent)&&le.parentElement.childElementCount>1&&(l.setStart(le,0),l.setEnd(le,le.textContent.length),h.SplitNode(l,le.parentElement,!1)),"span"===Q.parentElement.tagName.toLocaleLowerCase()&&"underline"===s.style.textDecoration&&"underline"!==Q.parentElement.style.textDecoration){Q=Q.parentElement;continue}Ka.unwrap(Q.parentElement),Q=f(Q.parentElement)||w.isBlockNode(Q.parentElement)?Q.parentElement:le}else Q=Q.parentElement}if(ie.length>0&&a){for(let le=0;le<ie.length;le++)(3!==ie[le].nodeType||ie[le].textContent&&ie[le].textContent.trim().length>0)&&(ie[le]=Ka.Wrap(ie[le],this.GetFormatNode(c,m,$,V)),ie[le].textContent===D&&(0===le?l.setStartBefore(ie[le]):le===ie.length-1&&l.setEndAfter(ie[le])));const Q=t[i].parentElement;if(!f(L)&&""!==L&&(Q.style.fontSize=L),!f(N)&&""!==N&&(Q.style.backgroundColor=N),"backgroundcolor"===c&&!f(L)&&""!==L&&Q.parentElement.innerHTML===Q.outerHTML){const le=Q.parentElement;le.parentElement.insertBefore(Q,le),te(le)}if("fontsize"===c||"fontcolor"===c){let le=t[i].parentElement,ke=t[i].parentElement;for(;!f(ke)&&"li"!==ke.tagName.toLowerCase();)ke=ke.parentElement,le=ke;!f(le)&&"li"===le.tagName.toLowerCase()&&le.textContent.trim()===t[i].textContent.trim()&&("fontsize"===c?le.style.fontSize=m:(le.style.color=m,le.style.textDecoration="inherit"))}}return t[i]}static insertFormat(t,i,s,r,o,a,l,h,c,m,b){if(o)if("uppercase"!==m&&"lowercase"!==m){const v=this.getInsertNode(t,h,m,b);i[s]=v.firstChild,c.position=1}else c.position=h.startOffset;else if(null===r&&a||l){if("BR"!==i[s].nodeName&&(i[s]=c.GetSpliceNode(h,i[s]),i[s].textContent=c.TrimLineBreak(i[s].textContent)),"uppercase"===m||"lowercase"===m)i[s].textContent="uppercase"===m?i[s].textContent.toLocaleUpperCase():i[s].textContent.toLocaleLowerCase();else if(!0!==l||""!==b){const v=this.GetFormatNode(m,b);if("fontsize"===m||"fontcolor"===m){let w=i[s].parentElement,E=i[s].parentElement;for(;!f(E)&&"li"!==E.tagName.toLowerCase();)E=E.parentElement,w=E;if(!f(w)&&"li"===w.tagName.toLowerCase()&&w.textContent.trim()===i[s].textContent.trim()&&("fontsize"===m?w.style.fontSize=b:(w.style.color=b,w.style.textDecoration="inherit")),i[s]=this.applyStyles(i,s,v),"fontsize"===m){const D=B(i[s].parentElement,"span[style*=background-color]");f(D)||(i[s].parentElement.style.backgroundColor=D.style.backgroundColor)}}else i[s]=this.applyStyles(i,s,v)}}else i[s]=c.GetSpliceNode(h,i[s]);return i[s]}static applyStyles(t,i,s){return"BR"===t[i].nodeName&&"BR"===this.enterAction||(t[i]=i===t.length-1||"BR"===t[i].nodeName?Ka.Wrap(t[i],s):Ka.WrapBefore(t[i],s,!0),t[i]=this.getChildNode(t[i],s)),t[i]}static getInsertNode(t,i,s,r){const o=this.GetFormatNode(s,r);if(o.innerHTML="&#8203;",q.isIE){const a=t.createDocumentFragment();a.appendChild(o),i.insertNode(a)}else i.insertNode(o);return o}static getChildNode(t,i){return null==t&&(i.innerHTML="&#8203;",t=i.firstChild),t}static applySelection(t,i,s,r,o){return 1!==t.length||o?1===t.length&&o?(i.startContainer=i.getNodeArray(t[r],!0),i.endContainer=i.startContainer,i.startOffset=s.position,i.endOffset=s.position):0===r?(i.startContainer=i.getNodeArray(t[r],!0),i.startOffset=0):r===t.length-1&&(i.endContainer=i.getNodeArray(t[r],!1),i.endOffset=t[r].textContent.length):(i.startContainer=i.getNodeArray(t[r],!0),i.endContainer=i.startContainer,i.startOffset=0,i.endOffset=t[r].textContent.length),i}static GetFormatNode(t,i,s,r){let o;switch(t){case"bold":return document.createElement("strong");case"italic":return document.createElement("em");case"underline":return o=document.createElement("span"),this.updateStyles(o,s,r),o.style.textDecoration="underline",o;case"strikethrough":return o=document.createElement("span"),this.updateStyles(o,s,r),o.style.textDecoration="line-through",o;case"superscript":return document.createElement("sup");case"subscript":return document.createElement("sub");case"fontcolor":return o=document.createElement("span"),this.updateStyles(o,s,r),o.style.color=i,o.style.textDecoration="inherit",o;case"fontname":return o=document.createElement("span"),this.updateStyles(o,s,r),o.style.fontFamily=i,o;case"fontsize":return o=document.createElement("span"),this.updateStyles(o,s,r),o.style.fontSize=i,o;default:return o=document.createElement("span"),this.updateStyles(o,s,r),o.style.backgroundColor=i,o}}static updateStyles(t,i,s){null!==s&&"SPAN"===i&&t.setAttribute("style",s)}}return n.enterAction="P",n})();class tHe{constructor(e){this.parent=e,this.addEventListener()}addEventListener(){this.parent.observer.on(bge,this.applySelection,this),this.parent.observer.on(dl,this.keyDownHandler,this)}keyDownHandler(e){e.event.ctrlKey&&["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase"].indexOf(e.event.action)>-1&&(e.event.preventDefault(),Sge.applyFormat(this.parent.currentDocument,e.event.action,this.parent.editableElement,e.enterAction),this.callBack(e,e.event.action))}applySelection(e){Sge.applyFormat(this.parent.currentDocument,e.subCommand.toLocaleLowerCase(),this.parent.editableElement,e.enterAction,e.value,e.selector),this.callBack(e,e.subCommand)}callBack(e,t){e.callBack&&e.callBack({requestType:t,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}}class iHe{constructor(e){this.parent=e,this.addEventListener()}addEventListener(){this.parent.observer.on(yge,this.applyHtml,this)}applyHtml(e){if(Ty.Insert(this.parent.currentDocument,e.value,this.parent.editableElement,!0),"pasteCleanup"===e.subCommand){const t=this.parent.editableElement.querySelectorAll(".pasteContent_RTE"),i=[].slice.call(t),s=this.parent.editableElement.querySelectorAll(".pasteContent_Img"),r=[].slice.call(s);e.callBack({requestType:e.subCommand,editorMode:"HTML",elements:i,imgElem:r})}else e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}}let sHe=(()=>{class n{static clear(t,i,s,r){this.domNode=new $6(i,t),this.defaultTag="P"===s?this.defaultTag:"div";const o=new Jd,a=new tR;let l=o.getRange(t);const h=l.collapsed,c=o.getInsertNodeCollection(l),m=o.save(l,t);if(!h){let b;if(b="BR"===c[0].nodeName&&B(c[0],"table")?a.GetSpliceNode(l,B(c[0],"table")):a.GetSpliceNode(l,c[c.length>1&&"IMG"===c[0].nodeName?1:0]),1===c.length)o.setSelectionContents(t,b),l=o.getRange(t);else{let D=1,L=c[c.length-D];for(;c.length<=D&&"BR"===c[c.length-D].nodeName;)D++,L=c[c.length-D];const N=a.GetSpliceNode(l,L);o.setSelectionText(t,b,N,0,3===N.nodeType?N.textContent.length:N.childNodes.length),l=o.getRange(t)}let v=o.getNodeCollection(l);const w=v.slice();this.clearInlines(o.getSelectionNodes(w),w,o.getRange(t),a,i),this.reSelection(t,m,v),l=o.getRange(t),v=o.getNodeCollection(l);const E=v.slice();this.clearBlocks(t,E,i,a,o),Vu()&&LS(i,r),this.reSelection(t,m,v)}}static reSelection(t,i,s){const r=i.getInsertNodes(s);i.startContainer=i.getNodeArray(r[0],!0,t),i.startOffset=0,i.endContainer=i.getNodeArray(r[r.length-1],!1,t);const o=r[r.length-1];i.endOffset=3===o.nodeType?o.textContent.length:o.childNodes.length,i.restore()}static clearBlocks(t,i,s,r,o){let a=[];for(let l=0;l<i.length;l++)this.BLOCK_TAGS.indexOf(i[l].nodeName.toLocaleLowerCase())>-1&&-1===a.indexOf(i[l])?a.push(i[l]):this.BLOCK_TAGS.indexOf(i[l].parentNode.nodeName.toLocaleLowerCase())>-1&&-1===a.indexOf(i[l].parentNode)&&s!==i[l].parentNode&&a.push(i[l].parentNode);a=this.spliceParent(a,i)[0],a=this.removeParent(a),this.unWrap(t,a,r,o)}static spliceParent(t,i){for(let s=0;s<t.length;s++){const r=t[s].childNodes.length;for(let o=0;o<r;o++)if(i.indexOf(t[s].childNodes[o])>0&&t[s].childNodes[o].childNodes.length>0&&(i=this.spliceParent([t[s].childNodes[o]],i)[1]),i.indexOf(t[s].childNodes[o])<=-1&&""!==t[s].childNodes[o].textContent.trim()){for(let c=0;c<r;c++)i.indexOf(t[s].childNodes[c])>-1&&i.splice(i.indexOf(t[s].childNodes[c]),1);o=t[s].childNodes.length;const a=t.indexOf(t[s].parentNode),l=i.indexOf(t[s].parentNode);a>-1&&t.splice(a,1),l>-1&&i.splice(l,1);const h=i.indexOf(t[s]);h>-1&&i.splice(h,1),t.splice(s,1),s--}}return[t,i]}static removeChild(t,i){const s=i.childNodes.length;if(s>0)for(let r=0;r<s;r++)t.indexOf(i.childNodes[r])>-1&&(t=this.removeChild(t,i.childNodes[r])).splice(t.indexOf(i.childNodes[r]),1);return t}static removeParent(t){for(let i=0;i<t.length;i++)t.indexOf(t[i].parentNode)>-1&&((t=this.removeChild(t,t[i])).splice(i,1),i--);return t}static unWrap(t,i,s,r){for(let o=0;o<i.length;o++)if(this.NONVALID_TAGS.indexOf(i[o].nodeName.toLowerCase())>-1&&i[o].parentNode&&this.NONVALID_PARENT_TAGS.indexOf(i[o].parentNode.nodeName.toLowerCase())>-1&&(r.setSelectionText(t,i[o],i[o],0,i[o].childNodes.length),Ka.unwrap(s.GetSpliceNode(r.getRange(t),i[o].parentNode))),"p"!==i[o].nodeName.toLocaleLowerCase()){this.NONVALID_PARENT_TAGS.indexOf(i[o].nodeName.toLowerCase())<0&&"p"!==i[o].parentNode.nodeName.toLocaleLowerCase()&&("blockquote"!==i[o].nodeName.toLocaleLowerCase()&&"li"!==i[o].nodeName.toLocaleLowerCase()||!(this.IGNORE_PARENT_TAGS.indexOf(i[o].childNodes[0].nodeName.toLocaleLowerCase())>-1))&&(1!==i[o].childNodes.length||"p"!==i[o].childNodes[0].nodeName.toLocaleLowerCase())&&Ka.Wrap(i[o],t.createElement(this.defaultTag));const a=Ka.unwrap(i[o]);1===a.length&&"p"===a[0].parentNode.nodeName.toLocaleLowerCase()&&(Ka.Wrap(i[o],t.createElement(this.defaultTag)),Ka.unwrap(i[o]));for(let l=0;l<a.length;l++)if(this.NONVALID_TAGS.indexOf(a[l].nodeName.toLowerCase())>-1)this.unWrap(t,[a[l]],s,r);else if(this.BLOCK_TAGS.indexOf(a[l].nodeName.toLocaleLowerCase())>-1&&"p"!==a[l].nodeName.toLocaleLowerCase()){const h=this.removeParent([a[l]]);this.unWrap(t,h,s,r)}else this.BLOCK_TAGS.indexOf(a[l].nodeName.toLocaleLowerCase())>-1&&a[l].parentNode.nodeName.toLocaleLowerCase()===a[l].nodeName.toLocaleLowerCase()?Ka.unwrap(a[l]):this.BLOCK_TAGS.indexOf(a[l].nodeName.toLocaleLowerCase())>-1&&"p"===a[l].nodeName.toLocaleLowerCase()&&(Ka.Wrap(a[l],t.createElement(this.defaultTag)),Ka.unwrap(a[l]))}else Ka.Wrap(i[o],t.createElement(this.defaultTag)),Ka.unwrap(i[o])}static clearInlines(t,i,s,r,o){for(let a=0;a<t.length;a++){let h,l=t[a];for(;!this.domNode.isBlockNode(l)&&l.parentElement&&!l.parentElement.classList.contains("e-img-inner");)h=l,l=l.parentElement;h&&Ry.inlineTags.indexOf(h.nodeName.toLocaleLowerCase())>-1&&(r.GetSpliceNode(s,h),this.removeInlineParent(h))}}static removeInlineParent(t){const i=Ka.unwrap(t);for(let s=0;s<i.length;s++)1===i[s].parentNode.childNodes.length&&!i[s].parentNode.classList.contains("e-img-inner")&&Ry.inlineTags.indexOf(i[s].parentNode.nodeName.toLocaleLowerCase())>-1?this.removeInlineParent(i[s].parentNode):Ry.inlineTags.indexOf(i[s].nodeName.toLocaleLowerCase())>-1&&this.removeInlineParent(i[s])}}return n.BLOCK_TAGS=["address","article","aside","blockquote","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","li","main","nav","noscript","ol","p","pre","section","ul"],n.NONVALID_PARENT_TAGS=["thead","tbody","ul","ol","table","tfoot","tr"],n.IGNORE_PARENT_TAGS=["ul","ol","table"],n.NONVALID_TAGS=["thead","tbody","figcaption","td","tr","th","tfoot","figcaption","li"],n.defaultTag="p",n})();class nHe{constructor(e){this.parent=e,this.addEventListener()}addEventListener(){this.parent.observer.on(Cge,this.applyClear,this),this.parent.observer.on(dl,this.onKeyDown,this)}onKeyDown(e){"clear-format"===e.event.action&&(this.applyClear({subCommand:"ClearFormat",callBack:e.callBack,enterAction:e.enterAction}),e.event.preventDefault())}applyClear(e){"ClearFormat"===e.subCommand&&(sHe.clear(this.parent.currentDocument,this.parent.editableElement,e.enterAction,e.selector),e.callBack&&e.callBack({requestType:e.subCommand,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))}}class rHe{constructor(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=f(t)?30:t.undoRedoSteps,this.undoRedoTimer=f(t)?300:t.undoRedoTimer,this.addEventListener()}addEventListener(){const e=Jv(this.keyUp,this.undoRedoTimer);this.parent.observer.on(MS,e,this),this.parent.observer.on(dl,this.keyDown,this),this.parent.observer.on(eR,this.onAction,this),this.parent.observer.on(xN,this.onPropertyChanged,this)}onPropertyChanged(e){for(const t of Object.keys(e.newProp))switch(t){case"undoRedoSteps":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=e.newProp.undoRedoTimer}}removeEventListener(){this.parent.observer.off(MS,this.keyUp),this.parent.observer.off(dl,this.keyDown),this.parent.observer.off(eR,this.onAction)}onAction(e){"Undo"===e.subCommand?this.undo(e):this.redo(e)}destroy(){this.removeEventListener()}keyDown(e){const t=e.event,i=this;switch(t.action){case"undo":t.preventDefault(),i.undo(e);break;case"redo":t.preventDefault(),i.redo(e)}}keyUp(e){17!==e.event.keyCode&&!e.event.ctrlKey&&this.saveData(e)}saveData(e){let t=(new Jd).getRange(this.parent.currentDocument),i=this.parent.editableElement===t.startContainer.parentElement?t.startContainer.parentElement:t.startContainer;for(let a=i.childNodes.length-1;a>=0;a--)!f(i.childNodes[a])&&"#text"===i.childNodes[a].nodeName&&0===i.childNodes[a].textContent.length&&"IMG"!==i.childNodes[a].nodeName&&"BR"!==i.childNodes[a].nodeName&&i.childNodes[a].nodeName&&te(i.childNodes[a]);t=(new Jd).getRange(this.parent.currentDocument);const s=(new Jd).save(t,this.parent.currentDocument),o={text:this.parent.editableElement.innerHTML,range:s};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),!(this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.collapsed===t.collapsed&&this.undoRedoStack[this.undoRedoStack.length-1].range.startOffset===s.range.startOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.endOffset===s.range.endOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.startContainer===s.range.startContainer&&this.undoRedoStack[this.undoRedoStack.length-1].text.trim()===o.text.trim())&&(this.undoRedoStack.push(o),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())}undo(e){if(this.steps>0){const t=this.undoRedoStack[this.steps-1].range;this.parent.editableElement.innerHTML=this.undoRedoStack[this.steps-1].text,this.parent.editableElement.focus(),Vu()&&LS(this.parent.editableElement,e.selector),t.restore(),this.steps--,e.callBack&&e.callBack({requestType:"Undo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}}redo(e){if(null!=this.undoRedoStack[this.steps+1]){const t=this.undoRedoStack[this.steps+1].range;this.parent.editableElement.innerHTML=this.undoRedoStack[this.steps+1].text,this.parent.editableElement.focus(),Vu()&&LS(this.parent.editableElement,e.selector),t.restore(),this.steps++,e.callBack&&e.callBack({requestType:"Redo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}}getUndoStatus(){const e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e}}class oHe{constructor(e){this.olData=["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman","lower-greek"],this.ulData=["disc","square","circle","disc","square","circle"],this.ignorableNodes=["A","APPLET","B","BLOCKQUOTE","BR","BUTTON","CENTER","CODE","COL","COLGROUP","DD","DEL","DFN","DIR","DIV","DL","DT","EM","FIELDSET","FONT","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HR","I","IMG","IFRAME","INPUT","INS","LABEL","LI","OL","OPTION","P","PARAM","PRE","Q","S","SELECT","SPAN","STRIKE","STRONG","SUB","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TITLE","TR","TT","U","UL"],this.blockNode=["div","p","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.borderStyle=["border-top","border-right","border-bottom","border-left"],this.removableElements=["o:p","style"],this.listContents=[],this.parent=e,this.addEventListener()}addEventListener(){this.parent.observer.on(qme,this.wordCleanup,this)}wordCleanup(e){const t=f(e.allowedStylePropertiesArray)?[]:e.allowedStylePropertiesArray;let i=[],s=e.args.clipboardData.getData("text/HTML");const r=e.args.clipboardData.getData("text/rtf"),o=Be("p");o.setAttribute("id","MSWord-Content"),o.innerHTML=s;const c=/style='mso-width-source:/i;(/class='?Mso|style='[^ ]*\bmso-/i.test(s)||/class="?Mso|style="[^ ]*\bmso-/i.test(s)||/(class="?Mso|class='?Mso|class="?Xl|class='?Xl|class=Xl|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument)/gi.test(s)||c.test(s))&&(this.imageConversion(o,r),s=s.replace(/<img[^>]+>/i,""),this.addListClass(o),i=this.cleanUp(o,i),!f(i[0])&&"UL"!==i[0].parentElement.tagName&&"OL"!==i[0].parentElement.tagName&&this.listConverter(i),this.styleCorrection(o,t),this.removingComments(o),this.removeUnwantedElements(o),this.removeEmptyElements(o),this.breakLineAddition(o),this.removeClassName(o),c.test(s)&&this.addTableBorderClass(o)),e.callBack(o.innerHTML)}addListClass(e){const t=e.querySelectorAll("*");for(let i=0;i<t.length;i++)!f(t[i].getAttribute("style"))&&t[i].getAttribute("style").replace(/ /g,"").replace("\n","").indexOf("mso-list:l")>=0&&-1===t[i].className.toLowerCase().indexOf("msolistparagraph")&&"H"!==t[i].tagName.charAt(0)&&t[i].classList.add("msolistparagraph")}addTableBorderClass(e){const t=e.querySelectorAll("table");let i=!1;for(let s=0;s<t.length;s++){for(let r=0;r<this.borderStyle.length;r++)if(t[s].innerHTML.indexOf(this.borderStyle[r])>=0){i=!0;break}i&&(t[s].classList.add("e-rte-table-border"),i=!1)}}imageConversion(e,t){this.checkVShape(e);let i=e.querySelectorAll("img");for(let l=0;l<i.length;l++)!f(i[l].getAttribute("v:shapes"))&&i[l].getAttribute("v:shapes").indexOf("Picture")<0&&te(i[l]);i=e.querySelectorAll("img");const s=[],r=[],o=[],a=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(i.length>0){for(let h=0;h<i.length;h++)s.push(i[h].getAttribute("src")),o.push(i[h].getAttribute("src").split("/")[i[h].getAttribute("src").split("/").length-1].split(".")[0]);const l=this.hexConversion(t);for(let h=0;h<l.length;h++)r.push(this.convertToBase64(l[h]));for(let h=0;h<i.length;h++)s[h].match(a)?i[h].setAttribute("src",s[h]):i[h].setAttribute("src",r[h]),i[h].setAttribute("id","msWordImg-"+o[h])}}checkVShape(e){const t=e.querySelectorAll("*");for(let i=0;i<t.length;i++)switch(t[i].nodeName){case"V:SHAPETYPE":te(t[i]);break;case"V:SHAPE":if("V:IMAGEDATA"===t[i].firstElementChild.nodeName){const s=t[i].firstElementChild.getAttribute("src"),r=Be("img");r.setAttribute("src",s),t[i].parentElement.insertBefore(r,t[i]),te(t[i])}}}convertToBase64(e){const t=this.conHexStringToBytes(e.hex),i=this.conBytesToBase64(t);return e.type?"data:"+e.type+";base64,"+i:null}conBytesToBase64(e){let t="";const s=e.length;for(let r=0;r<s;r+=3){const o=e.slice(r,r+3),a=o.length,l=[];if(a<3)for(let h=a;h<3;h++)o[h]=0;l[0]=(252&o[0])>>2,l[1]=(3&o[0])<<4|o[1]>>4,l[2]=(15&o[1])<<2|(192&o[2])>>6,l[3]=63&o[2];for(let h=0;h<4;h++)t+=h<=a?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l[h]):"="}return t}conHexStringToBytes(e){const t=[],i=e.length/2;for(let s=0;s<i;s++)t.push(parseInt(e.substr(2*s,2),16));return t}hexConversion(e){const t=/\{\\pict[\s\S]+?\\bliptag\-?\d+(\\blipupi\-?\d+)?(\{\\\*\\blipuid\s?[\da-fA-F]+)?[\s\}]*?/,i=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g"),s=e.match(i);let r;const o=[];if(!f(s))for(let a=0;a<s.length;a++)if(t.test(s[a])){if(-1!==s[a].indexOf("\\pngblip"))r="image/png";else{if(-1===s[a].indexOf("\\jpegblip"))continue;r="image/jpeg"}o.push({hex:r?s[a].replace(t,"").replace(/[^\da-fA-F]/g,""):null,type:r})}return o}removeClassName(e){const t=e.querySelectorAll("*[class]");for(let i=0;i<t.length;i++)t[i].removeAttribute("class")}breakLineAddition(e){const t=e.querySelectorAll("*");for(let i=0;i<t.length;i++)if(0===t[i].children.length&&"&nbsp;"===t[i].innerHTML&&"&nbsp;"===t[i].innerHTML&&!t[i].closest("li")&&!t[i].closest("td")){const s=this.findDetachElem(t[i]),r=Be("br");f(s.parentElement)||(s.parentElement.insertBefore(r,s),te(s))}}findDetachElem(e){let t;return t=!f(e.parentElement)&&""===e.parentElement.textContent.trim()&&"TD"!==e.parentElement.tagName&&f(e.parentElement.querySelector("img"))?this.findDetachElem(e.parentElement):e,t}removeUnwantedElements(e){let t=e.innerHTML;for(let i=0;i<this.removableElements.length;i++){const s=new RegExp("<"+this.removableElements[i]+">","g"),r=new RegExp("</"+this.removableElements[i]+">","g");t=t.replace(s,""),t=t.replace(r,"")}e.innerHTML=t,e.querySelectorAll(":empty")}findDetachEmptyElem(e){let t;return t=f(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"MSWord-Content"!==e.parentElement.getAttribute("id")&&f(e.parentElement.querySelector("img"))?this.findDetachEmptyElem(e.parentElement):e,t}removeEmptyElements(e){const t=e.querySelectorAll(":empty");for(let i=0;i<t.length;i++)if(!f(t[i].closest("td"))&&!f(t[i].closest("td").querySelector(".MsoNormal"))&&(t[i].innerHTML="-"),"IMG"!==t[i].tagName&&"BR"!==t[i].tagName&&"IFRAME"!==t[i].tagName&&"TD"!==t[i].tagName&&"HR"!==t[i].tagName){const s=this.findDetachEmptyElem(t[i]);f(s)||te(s)}}styleCorrection(e,t){const i=e.querySelectorAll("style");if(i.length>0){const s=i[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi),r=f(s)?null:this.findStyleObject(s),o=Object.keys(r);let a=o.map(c=>r[c]);a=this.removeUnwantedStyle(a,t),this.filterStyles(e,t);let l,h=!1;for(let c=0;c<o.length;c++){if(""===o[c].split(".")[0])l=e.getElementsByClassName(o[c].split(".")[1]),h=!0;else{if(1===o[c].split(".").length&&o[c].split(".")[0].indexOf("@")>=0)continue;l=1===o[c].split(".").length&&o[c].split(".")[0].indexOf("@")<0?e.getElementsByTagName(o[c]):e.querySelectorAll(o[c])}for(let m=0;m<l.length;m++){const b=l[m].getAttribute("style");if(f(b)||""===b.trim())a[c]=a[c].replace(/text-indent:-(.*?)(?=;|$)/gm,""),l[m].setAttribute("style",a[c]);else{const v=a[c].split(";");if(!h)for(let E=0;E<v.length;E++)b.indexOf(v[E].split(":")[0])>=0&&(v.splice(E,1),E--);a[c]=v.join(";")+";",l[m].setAttribute("style",b+a[c])}}h=!1}}}filterStyles(e,t){const i=e.querySelectorAll("*[style]");for(let s=0;s<i.length;s++){const r=i[s].getAttribute("style").split(";");let o="";for(let a=0;a<r.length;a++)t.indexOf(r[a].split(":")[0].trim())>=0&&(o+=r[a]+";");i[s].setAttribute("style",o)}}removeUnwantedStyle(e,t){for(let i=0;i<e.length;i++){const s=e[i].split(";");e[i]="";for(let r=0;r<s.length;r++)t.indexOf(s[r].split(":")[0])>=0&&(e[i]+=s[r]+";")}return e}findStyleObject(e){const t={};for(let i=0;i<e.length;i++){const s=e[i];let r=s.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),o=s.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");r=r.replace(/^[\s]|[\s]$/gm,""),o=o.replace(/^[\s]|[\s]$/gm,""),r=r.replace(/\n|\r|\n\r/g,""),o=o.replace(/\n|\r|\n\r/g,"");for(let a=r.split(", "),l=0;l<a.length;l++)t[a[l]]=o}return t}removingComments(e){let t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t}cleanUp(e,t){const i=[];let s;const r=e.querySelectorAll("*");for(let o=0;o<r.length;o++)-1===this.ignorableNodes.indexOf(r[o].nodeName)||3===r[o].nodeType&&""===r[o].textContent.trim()?i.push(r[o]):(r[o].className&&-1!==r[o].className.toLowerCase().indexOf("msolistparagraph")&&1!==r[o].childElementCount&&!f(r[o].getAttribute("style"))&&r[o].getAttribute("style").indexOf("mso-list:")>=0&&(r[o].className.indexOf("MsoListParagraphCxSpFirst")>=0&&t.length>0&&null!==t[t.length-1]&&t.push(null),t.push(r[o])),s&&-1!==this.blockNode.indexOf(r[o].nodeName.toLowerCase())&&!(r[o].className&&-1!==r[o].className.toLowerCase().indexOf("msolistparagraph")&&!f(r[o].getAttribute("style"))&&r[o].getAttribute("style").indexOf("mso-list:")>=0)&&t.push(null),-1!==this.blockNode.indexOf(r[o].nodeName.toLowerCase())&&(s=!!(r[o].className&&-1!==r[o].className.toLowerCase().indexOf("msolistparagraph")&&!f(r[o].getAttribute("style"))&&r[o].getAttribute("style").indexOf("mso-list:")>=0)));return t.length&&null!==t[t.length-1]&&t.push(null),t}listConverter(e){let t;const i=[];let o,s=[],r="",a="";for(let l=0;l<e.length;l++){if(null===e[l]){i.push({content:this.makeConversion(s),node:e[l-1]}),s=[];continue}let h,c;if(e[l].getAttribute("style")&&-1!==e[l].getAttribute("style").indexOf("mso-outline-level")&&e[l].setAttribute("style",e[l].getAttribute("style").replace("mso-outline-level","mso-outline")),r=e[l].getAttribute("style"),t=r&&-1!==r.indexOf("level")?parseInt(r.charAt(r.indexOf("level")+5),null):1,this.listContents=[],this.getListContent(e[l]),!f(this.listContents[0])){h=this.listContents[0].trim().length>1?"ol":"ul",c=this.getlistStyleType(this.listContents[0],h);const m=[];for(let v=1;v<this.listContents.length;v++)m.push(this.listContents[v]);let b;f(e[l].className)||(b=e[l].className),f(e[l].getAttribute("style"))||(e[l].setAttribute("style",e[l].getAttribute("style").replace("text-align:start;","")),""!==e[l].style.textAlign&&(e[l].setAttribute("style","text-align:"+e[l].style.textAlign),a=e[l].getAttribute("style"))),s.push({listType:h,content:m,nestedLevel:t,class:b,listStyle:a,listStyleTypeName:c})}}for(o=e.shift();o;){const l=[];for(let h=0;h<i.length;h++)if(i[h].node===o){for(let c=0;c<i[h].content.childNodes.length;c++)l.push(i[h].content.childNodes[c]);for(let c=0;c<l.length;c++)o.parentElement.insertBefore(l[c],o);break}o.remove(),o=e.shift(),o||(o=e.shift())}}getlistStyleType(e,t){let i;if("ol"===t)switch(e.split(".")[0]){case"A":i="upper-alpha";break;case"a":i="lower-alpha";break;case"I":i="upper-roman";break;case"i":i="lower-roman";break;case"\u03b1":i="lower-greek";break;default:i="decimal"}else switch(e.split(".")[0]){case"o":i="circle";break;case"\xa7":i="square";break;default:i="disc"}return i}makeConversion(e){const t=Be("div");let i,r,a,s=1,o=0;for(let l=0;l<e.length;l++){const h=Be("p");if(h.innerHTML=e[l].content.join(" "),1===e[l].nestedLevel&&0===o&&e[l].content)t.appendChild(i=Be(e[l].listType)),r=Be("li"),r.appendChild(h),i.appendChild(r),i.setAttribute("level",e[l].nestedLevel.toString()),i.style.listStyleType=e[l].listStyleTypeName;else if(e[l].nestedLevel===s)r.parentElement.tagName.toLowerCase()===e[l].listType?(r.parentElement.appendChild(r=Be("li")),r.appendChild(h)):(i=Be(e[l].listType),i.style.listStyleType=e[l].listStyleTypeName,r.parentElement.parentElement.appendChild(i),r=Be("li"),r.appendChild(h),i.appendChild(r),i.setAttribute("level",e[l].nestedLevel.toString()));else if(e[l].nestedLevel>s)if(f(r))t.appendChild(i=Be(e[l].listType)),r=Be("li"),r.appendChild(h),i.appendChild(r),i.setAttribute("level",e[l].nestedLevel.toString()),i.style.listStyleType=e[l].listStyleTypeName;else{for(let m=0;m<e[l].nestedLevel-s;m++)r.appendChild(i=Be(e[l].listType)),r=Be("li"),m!=e[l].nestedLevel-s-1&&e[l].nestedLevel-s>1&&(r.style.listStyleType="none"),i.appendChild(r);r.appendChild(h),i.setAttribute("level",e[l].nestedLevel.toString()),i.style.listStyleType=e[l].listStyleTypeName}else if(1===e[l].nestedLevel)t.lastChild.tagName.toLowerCase()===e[l].listType?i=t.lastChild:(t.appendChild(i=Be(e[l].listType)),i.style.listStyleType=e[l].listStyleTypeName),r=Be("li"),r.appendChild(h),i.appendChild(r),i.setAttribute("level",e[l].nestedLevel.toString());else for(a=r;a.parentElement;)if(a=a.parentElement,a.attributes.getNamedItem("level")){if(parseInt(a.attributes.getNamedItem("level").textContent,null)===e[l].nestedLevel){r=Be("li"),r.appendChild(h),a.appendChild(r);break}if(e[l].nestedLevel>parseInt(a.attributes.getNamedItem("level").textContent,null)){a.appendChild(i=Be(e[l].listType)),r=Be("li"),r.appendChild(h),i.appendChild(r),i.setAttribute("level",e[l].nestedLevel.toString()),i.style.listStyleType=e[l].listStyleTypeName;break}}r.setAttribute("class",e[l].class);const c=r.getAttribute("style");r.setAttribute("style",f(c)?"":c),s=e[l].nestedLevel,o++}return t}getListContent(e){let t="";const i=e.firstElementChild;if(""!==i.textContent.trim()||f(i.firstElementChild)||"IMG"!==i.firstElementChild.nodeName){const s=["b","em"];if(i.childNodes.length>0&&(i.querySelectorAll("b").length>0||i.querySelectorAll("em").length>0))for(let r=0;r<i.childNodes.length;r++){const o=i.childNodes[r].nodeName.toLowerCase();i.childNodes[r].textContent.trim().length>1&&-1!==s.indexOf(o)?(t="<"+o+">"+i.childNodes[r].textContent+"</"+o+">",this.listContents.push(t)):1===i.childNodes[r].textContent.trim().length&&this.listContents.push(i.childNodes[r].textContent.trim())}else t=i.textContent.trim(),this.listContents.push(t)}else t=e.innerHTML.trim(),this.listContents.push(""),this.listContents.push(t);te(i),this.listContents.push(e.innerHTML)}}class aHe{constructor(e){this.parent=e,this.addEventListener()}addEventListener(){this.parent.observer.on(vge,this.insertText,this)}insertText(e){const t=document.createTextNode(e.value);Ty.Insert(this.parent.currentDocument,t,this.parent.editableElement),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}}class lHe{constructor(e){this.currentDocument=e.document,this.editableElement=e.editableElement,this.nodeSelection=new Jd,this.nodeCutter=new tR,this.domNode=new $6(this.editableElement,this.currentDocument),this.observer=new zE(this),this.listObj=new G2e(this),this.formatObj=new $2e(this),this.alignmentObj=new Y2e(this),this.indentsObj=new Z2e(this),this.linkObj=new K2e(this),this.imgObj=new Q2e(this),this.selectionObj=new tHe(this),this.inserthtmlObj=new iHe(this),this.insertTextObj=new aHe(this),this.clearObj=new nHe(this),this.tableObj=new J2e(this),this.undoRedoManager=new rHe(this,e.options),this.msWordPaste=new oHe(this),this.wireEvents()}wireEvents(){this.observer.on(MQ,this.editorKeyDown,this),this.observer.on(SN,this.editorKeyUp,this),this.observer.on(SN,this.editorKeyUp,this),this.observer.on(OQ,this.onPropertyChanged,this),this.observer.on("ms_word_cleanup",this.onWordPaste,this),this.observer.on("onBegin",this.onBegin,this)}onWordPaste(e){this.observer.notify(qme,e)}onPropertyChanged(e){this.observer.notify(xN,e)}editorKeyDown(e){this.observer.notify(dl,e)}editorKeyUp(e){this.observer.notify(MS,e)}onBegin(e){this.observer.notify($me,e)}execCommand(e,t,i,s,r,o,a,l){switch(e.toLowerCase()){case"lists":this.observer.notify("list-type",{subCommand:t,event:i,callBack:s,selector:a,item:o,enterAction:l});break;case"formats":this.observer.notify(G6,{subCommand:t,event:i,callBack:s,selector:a,exeValue:o,enterAction:l});break;case"alignments":this.observer.notify(mge,{subCommand:t,event:i,callBack:s,selector:a,value:o});break;case"indents":this.observer.notify(gge,{subCommand:t,event:i,callBack:s,selector:a});break;case"links":this.observer.notify(nge,{command:e,value:t,item:o,event:i,callBack:s});break;case"files":this.observer.notify(NQ,{command:e,value:"Image",item:o,event:i,callBack:s,selector:a});break;case"images":this.observer.notify(NQ,{command:e,value:t,item:o,event:i,callBack:s,selector:a});break;case"table":switch(t.toString().toLocaleLowerCase()){case"createtable":this.observer.notify(sge,{item:o,event:i,callBack:s,enterAction:l});break;case"insertrowbefore":case"insertrowafter":this.observer.notify(rge,{item:o,event:i,callBack:s});break;case"insertcolumnleft":case"insertcolumnright":this.observer.notify(oge,{item:o,event:i,callBack:s});break;case"deleterow":this.observer.notify(age,{item:o,event:i,callBack:s});break;case"deletecolumn":this.observer.notify(lge,{item:o,event:i,callBack:s});break;case"tableremove":this.observer.notify(hge,{item:o,event:i,callBack:s});break;case"tableheader":this.observer.notify(cge,{item:o,event:i,callBack:s});break;case"aligntop":case"alignmiddle":case"alignbottom":this.observer.notify(dge,{item:o,event:i,callBack:s});break;case"merge":this.observer.notify(uge,{item:o,event:i,callBack:s});break;case"horizontalsplit":this.observer.notify(fge,{item:o,event:i,callBack:s});break;case"verticalsplit":this.observer.notify(pge,{item:o,event:i,callBack:s})}break;case"font":case"style":case"effects":case"casing":this.observer.notify(bge,{subCommand:t,event:i,callBack:s,value:r,selector:a,enterAction:l});break;case"inserthtml":this.observer.notify(yge,{subCommand:t,callBack:s,value:r});break;case"inserttext":this.observer.notify(vge,{subCommand:t,callBack:s,value:r});break;case"clear":this.observer.notify(Cge,{subCommand:t,event:i,callBack:s,selector:a,enterAction:l});break;case"actions":this.observer.notify(eR,{subCommand:t,event:i,callBack:s,selector:a})}}}class hHe extends class Kme{process(e,t,i,s){const r=e.contentModule.getDocument().getSelection(),o=r.rangeCount>0?r.getRangeAt(r.rangeCount-1):null;let a;if("HTML"===e.editorMode&&(a=this.editorManager.nodeSelection.save(o,e.contentModule.getDocument())),f(t)||!t.item.command||"Table"===t.item.command||"Actions"===t.item.command||"Links"===t.item.command||"Images"===t.item.command||"Files"===t.item.command||!o||e.contentModule.getEditPanel().contains(this.getAncestorNode(o.commonAncestorContainer))||e.contentModule.getEditPanel()===o.commonAncestorContainer||e.contentModule.getPanel()===o.commonAncestorContainer){if(f(t)){const l=i.action;"tab"!==l&&"enter"!==l&&"space"!==l&&"escape"!==l&&(t={},"Markdown"===e.editorMode&&"insert-table"===l&&(s={headingText:e.localeObj.getConstant("TableHeadingText"),colText:e.localeObj.getConstant("TableColText")}),Ae(t,t,{originalEvent:i,cancel:!1,requestType:l||i.key+"Key",itemCollection:s},!0),e.trigger(Hp,t,m=>{m.cancel&&("paste"===l||"cut"===l||"copy"===l)&&i.preventDefault()}));const h=!!f(e.tableModule)||!!e.tableModule&&e.tableModule.ensureInsideTableList;(9===i.which&&h||9!==i.which)&&(13===i.which&&"HTML"===e.editorMode&&(s={enterAction:e.enterKey}),this.editorManager.observer.notify("keydown"===i.type?MQ:SN,{event:i,callBack:this.onSuccess.bind(this,e),value:s,enterAction:e.enterKey}))}else!f(t)&&t.item.command&&t.item.subCommand&&(t.item.command!==t.item.subCommand&&"Font"!==t.item.command||("FontName"===t.item.subCommand||"FontSize"===t.item.subCommand)&&"dropDownSelect"===t.name||("BackgroundColor"===t.item.subCommand||"FontColor"===t.item.subCommand)&&"colorPickerChanged"===t.name)&&(Ae(t,t,{requestType:t.item.subCommand,cancel:!1,itemCollection:s,selectType:t.name},!0),e.trigger(Hp,t,l=>{if(!l.cancel){0===this.getUndoRedoStack().length&&"Links"!==l.item.command&&"Images"!==l.item.command&&this.saveData(),e.isBlur=!1,e.contentModule.getEditPanel().focus(),"HTML"===e.editorMode&&a.restore();const h=l.item.subCommand.toLocaleLowerCase();"paste"===h||"cut"===h||"copy"===h?e.clipboardAction(h,i):(this.editorManager.observer.notify(QX,{subCommand:l.item.subCommand}),this.editorManager.execCommand(l.item.command,l.item.subCommand,i,this.onSuccess.bind(this,e),l.item.value,"Pre"===l.item.subCommand&&"dropDownSelect"===l.selectType?{name:l.selectType}:s,"#"+e.getID()+" iframe",e.enterKey))}}));(f(i)||i&&"copy"!==i.action)&&this.enableUndo(e)}}getAncestorNode(e){return 3===e.nodeType?e.parentNode:e}onKeyHandler(e,t){this.editorManager.observer.notify(SN,{event:t,callBack:()=>{e.notify(KF,{}),this.enableUndo(e)}})}onSuccess(e,t){e.notify(KF,{}),t&&(f(t.event)||"copy"!==t.event.action)&&(this.enableUndo(e),e.notify(MX,t)),e.trigger(Ag,t,i=>{if(e.setPlaceHolder(),"Images"===i.requestType||"Links"===i.requestType&&"HTML"===e.editorMode){if("Links"===i.requestType&&i.event&&"keydown"===i.event.type&&32===i.event.keyCode)return;e.notify(JF,{args:i.event,type:i.requestType,isNotify:!0,elements:i.elements})}e.autoResize()})}saveData(e){this.editorManager.undoRedoManager.saveData(e)}getUndoStatus(){return this.editorManager.undoRedoManager.getUndoStatus()}getUndoRedoStack(){return this.editorManager.undoRedoManager.undoRedoStack}enableUndo(e){const t=this.getUndoStatus();!e.inlineMode.enable||q.isDevice&&!pa()?e.toolbarModule&&CN(e.toolbarModule.baseToolbar,t):CN(e.quickToolbarModule.inlineQTBar.quickTBarObj,t)}}{constructor(e){super(),this.initialize(),Ae(this,this,e,!0),this.currentDocument&&this.element&&this.updateFormatter(this.element,this.currentDocument,e.options)}initialize(){this.keyConfig=O2e}updateFormatter(e,t,i){e&&t&&(this.editorManager=new lHe({document:t,editableElement:e,options:i}))}}const HQ={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1};class dHe{constructor(e){this.parent=e,this.toolbarStatus=this.prevToolbarStatus={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},this.addEventListener()}addEventListener(){this.parent.on(UC,this.onRefreshHandler,this),this.parent.on(Cs,this.removeEventListener,this)}removeEventListener(){this.parent.off(UC,this.onRefreshHandler),this.parent.off(Cs,this.removeEventListener)}onRefreshHandler(e){if(this.parent.readonly)return;const t=[],i=[],s=[];this.parent.fontSize.items.forEach(o=>{t.push(o.value)}),this.parent.fontFamily.items.forEach(o=>{i.push(o.value)}),this.parent.format.types.forEach(o=>{s.push(o.value.toLocaleLowerCase())}),this.toolbarStatus=class cHe{static get(e,t,i,s,r,o){let a=JSON.parse(JSON.stringify(HQ));const l=JSON.parse(JSON.stringify(HQ)),h=new Jd,c=o?[o]:h.getNodeCollection(h.getRange(e)),m=c.length;let b=!1;const v=h.getRange(e);for(let w=0;w<c.length;w++){for(;3===c[w].nodeType&&3===v.startContainer.nodeType&&c[w].parentNode&&c[w].parentNode.lastElementChild&&"BR"!==c[w].parentNode.lastElementChild.nodeName&&0===this.getImmediateBlockNode(c[w].parentNode).textContent.replace(/\u200B/g,"").length&&0===v.startContainer.textContent.replace(/\u200B/g,"").length&&0===h.get(e).toString().replace(/\u200B/g,"").length;)c[w]=c[w].parentNode.lastElementChild.firstChild,b=!0;b&&c[w]&&(h.setCursorPoint(e,c[w],c[w].textContent.length),b=!1),("BR"!==c[w].nodeName&&3!==c[w].nodeType||m>1&&3===c[w].nodeType&&""===c[w].textContent.trim())&&(c.splice(w,1),w--)}for(let w=0;w<c.length;w++)a=this.getFormatParent(e,a,c[w],t,i,s,r),(0===w&&a.bold||!a.bold)&&(l.bold=a.bold),(0===w&&a.insertcode||!a.insertcode)&&(l.insertcode=a.insertcode),(0===w&&a.italic||!a.italic)&&(l.italic=a.italic),(0===w&&a.underline||!a.underline)&&(l.underline=a.underline),(0===w&&a.strikethrough||!a.strikethrough)&&(l.strikethrough=a.strikethrough),(0===w&&a.superscript||!a.superscript)&&(l.superscript=a.superscript),(0===w&&a.subscript||!a.subscript)&&(l.subscript=a.subscript),(0===w&&a.fontcolor||!a.fontcolor)&&(l.fontcolor=a.fontcolor),(0===w&&a.fontname||!a.fontname)&&(l.fontname=a.fontname),(0===w&&a.fontsize||!a.fontsize)&&(l.fontsize=a.fontsize),(0===w&&a.backgroundcolor||!a.backgroundcolor)&&(l.backgroundcolor=a.backgroundcolor),(0===w&&a.orderedlist||!a.orderedlist)&&(l.orderedlist=a.orderedlist),(0===w&&a.unorderedlist||!a.unorderedlist)&&(l.unorderedlist=a.unorderedlist),(0===w&&a.alignments||!a.alignments)&&(l.alignments=a.alignments),(0===w&&a.formats||!a.formats)&&(l.formats=a.formats),(0===w&&a.createlink||!a.createlink)&&(l.createlink=a.createlink),(0===w&&a.numberFormatList||!a.numberFormatList)&&(l.numberFormatList=a.numberFormatList),(0===w&&a.bulletFormatList||!a.bulletFormatList)&&(l.bulletFormatList=a.bulletFormatList),a=JSON.parse(JSON.stringify(HQ));return l}static getImmediateBlockNode(e){do{e=e.parentNode}while(e&&nI.indexOf(e.nodeName.toLocaleLowerCase())<0);return e}static getFormatParent(e,t,i,s,r,o,a){if(s.contains(i)||3===i.nodeType&&3!==s.nodeType&&s.contains(i.parentNode))do{t=this.isFormattedNode(e,t,i,r,o,a),i=i.parentNode}while(i&&i!==s);return t}static isFormattedNode(e,t,i,s,r,o){return t.bold||(t.bold=Ry.isBold(i)),t.italic||(t.italic=Ry.isItalic(i)),t.underline||(t.underline=Ry.isUnderline(i)),t.strikethrough||(t.strikethrough=Ry.isStrikethrough(i)),t.superscript||(t.superscript=Ry.isSuperscript(i)),t.subscript||(t.subscript=Ry.isSubscript(i)),t.fontcolor||(t.fontcolor=this.isFontColor(e,i)),t.fontname||(t.fontname=this.isFontName(e,i,o)),t.fontsize||(t.fontsize=this.isFontSize(i,r)),t.backgroundcolor||(t.backgroundcolor=this.isBackgroundColor(i)),t.orderedlist||(t.orderedlist=this.isOrderedList(i)),t.unorderedlist||(t.unorderedlist=this.isUnorderedList(i)),t.alignments||(t.alignments=this.isAlignment(i)),t.formats||(t.formats=this.isFormats(i,s),"pre"===t.formats&&(t.insertcode=!0)),t.createlink||(t.createlink=this.isLink(i)),t.numberFormatList||(t.numberFormatList=this.isNumberFormatList(i)),t.bulletFormatList||(t.bulletFormatList=this.isBulletFormatList(i)),t}static isFontColor(e,t){let i=t.style&&t.style.color;return(null==i||""===i)&&3!==t.nodeType&&(i=this.getComputedStyle(e,t,"color")),null!==i&&""!==i&&void 0!==i?i:null}static isLink(e){return"a"===e.nodeName.toLocaleLowerCase()}static isBackgroundColor(e){const t=e.style&&e.style.backgroundColor;return null!==t&&""!==t&&void 0!==t?t:null}static isFontSize(e,t){const i=e.style&&e.style.fontSize;return null!==i&&""!==i&&void 0!==i&&(null==t||t.indexOf(i)>-1)?i:null}static isFontName(e,t,i){let s=t.style&&t.style.fontFamily;(null==s||""===s)&&3!==t.nodeType&&(s=this.getComputedStyle(e,t,"font-family"));let r=null;return null!==s&&""!==s&&void 0!==s&&(null==i||i.filter((o,a)=>{const l=new RegExp(s,"i");(o.replace(/"/g,"").replace(/ /g,"")===s.replace(/"/g,"").replace(/ /g,"")||o.search(l)>-1)&&(r=a)})&&null!==r)?null!==r?i[r]:s.replace(/"/g,""):null}static isOrderedList(e){return"ol"===e.nodeName.toLocaleLowerCase()}static isUnorderedList(e){return"ul"===e.nodeName.toLocaleLowerCase()}static isAlignment(e){const t=e.style&&e.style.textAlign;return"left"===t?"justifyleft":"center"===t?"justifycenter":"right"===t?"justifyright":"justify"===t?"justifyfull":null}static isFormats(e,t){return null==t&&nI.indexOf(e.nodeName.toLocaleLowerCase())>-1||null!=t&&t.indexOf(e.nodeName.toLocaleLowerCase())>-1?e.nodeName.toLocaleLowerCase():null}static getComputedStyle(e,t,i){return e.defaultView.getComputedStyle(t,null).getPropertyValue(i)}static isNumberFormatList(e){const t=e.style&&e.style.listStyleType;return"lower-alpha"===t?"Lower Alpha":"number"===t?"Number":"upper-alpha"===t?"Upper Alpha":"lower-roman"===t?"Lower Roman":"upper-roman"===t?"Upper Roman":"lower-greek"===t?"Lower Greek":"none"===t?"None":null}static isBulletFormatList(e){const t=e.style&&e.style.listStyleType;return"circle"===t?"Circle":"square"===t?"Square":"none"===t?"None":"disc"===t?"Disc":null}}.get(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel(),s,t,i,e.documentNode);const r=JSON.stringify(this.toolbarStatus);this.parent.notify(by,this.toolbarStatus),JSON.stringify(this.prevToolbarStatus)!==r&&(this.parent.notify(x6,{html:JSON.parse(r),markdown:null}),this.prevToolbarStatus=JSON.parse(r))}}class xge{constructor(e,t){this.parent=e,this.serviceLocator=t}renderPanel(){const e=this.parent,t=this.parent.createElement("div",{className:"e-rte-content",id:this.parent.getID()+"rte-view"}),i=j6(e.value,e);this.editableElement=this.parent.createElement("div",{className:"e-content",id:this.parent.getID()+"_rte-edit-view",attrs:{contenteditable:"true"},innerHTML:i}),t.appendChild(this.editableElement),this.setPanel(t),e.element.appendChild(t)}getPanel(){return this.contentPanel}getEditPanel(){return this.editableElement}getText(){return this.getEditPanel().innerText}setPanel(e){this.contentPanel=e}getDocument(){return this.getEditPanel().ownerDocument}}class pHe extends xge{renderPanel(){const e=this.parent;let s='\n<!DOCTYPE html> \n    <html>\n         <head>\n            <meta charset=\'utf-8\' /> \n            <style>\n                @charset "UTF-8";\n                body {\n                    font-family: "Roboto", sans-serif;\n                    font-size: 14px;\n                }\n                html, body{height: 100%;margin: 0;}\n                body.e-cursor{cursor:default}\n                span.e-selected-node\t{background-color: #939393;color: white;}\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\n                .e-rte-image {border: 0;cursor: pointer;display:\n                    block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;\n                    margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));\n                    position: relativetext-align: center;vertical-align: bottom;}\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;\n                    margin: auto;opacity: .9;text-align: center;width: 100%;}\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\n                .e-imgleft {float: left;margin: 0 5px 0 0;text-align: left;}\n                .e-imgright {float: right;margin: 0 0 0 5px;text-align: right;}\n                .e-imgcenter {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\n                .e-imginline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;\n                    max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\n                .e-imgbreak {border: 0;cursor: pointer;\n                    display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-rte-image.e-img-focus:not(.e-resize) {border: solid 2px #4a90e2;}\n                img.e-img-focus::selection { background: transparent;color: transparent;}\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block;\n                    background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2;\n                    border-radius: 15px; height: 20px; width: 20px; }\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-rte-content .e-content img.e-resize { z-index: 1000; }\n                .e-img-caption .e-img-inner { outline: 0; }\n                .e-img-caption a:focus-visible { outline: none; }\n                .e-img-caption .e-rte-image.e-imgright, .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;\n                    overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\n                p{margin: 0 0 10px;margin-bottom: 10px;}\n                li{margin-bottom: 10px;}\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\n                h4{font-size: 16px;font-weight: 400;line-height: 1.5;margin: 0;}\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;\n                    font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;\n                    white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\n                strong, b{font-weight: 700;}\n                a{text-decoration: none;user-select: auto;}\n                a:hover{text-decoration: underline;};\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\n                ul:last-child{margin-bottom: 0;}\n                table { border-collapse: collapse; empty-cells: show;}\n                table td,table th {border: 1px solid #BDBDBD; height: 20px; vertical-align: middle;}\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\n                table th {background-color: #E0E0E0;}\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \n                table .e-cell-select {border: 1px double #4a90e2;}\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat;\n                    bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\n                .e-row-resize { cursor: row-resize; height: 1px;}\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\n                .e-table-rhelper.e-column-helper { width: 1px; }\n                .e-table-rhelper.e-row-helper {height: 1px;}\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid;\n                    border-top: 6px solid transparent; content: \'\'; display: block; height: 0;\n                    position: absolute; right: 4px; top: 4px; width: 20px; }\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid;\n                    border-top: 6px solid transparent; content: \'\'; display: block;\n                    height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\n                .e-table-rhelper { background-color: #4a90e2;}\n                .e-rtl { direction: rtl; }\n            </style>\n        </head><body spellcheck="false" autocorrect="off" contenteditable="true">'+j6(e.value,e)+"</body></html>";const r=this.parent.createElement("iframe",{id:this.parent.getID()+"_rte-view",className:"e-rte-content",styles:"display:block;",attrs:{srcdoc:s}});this.setPanel(r),e.element.appendChild(r),r.contentDocument.body.id=this.parent.getID()+"_rte-edit-view",r.contentDocument.body.setAttribute("aria-owns",this.parent.getID()),r.contentDocument.open(),s=this.setThemeColor(s,{color:"#333"}),r.contentDocument.write(s),r.contentDocument.close(),e.enableRtl&&this.contentPanel.contentDocument.body.setAttribute("class","e-rtl")}setThemeColor(e,t){const i=getComputedStyle(this.parent.element,".e-richtexteditor").getPropertyValue("color");return e.replace(t.color,i)}getEditPanel(){let e;return e=f(this.contentPanel.contentDocument)?this.parent.inputElement:this.contentPanel.contentDocument.body,e}getDocument(){return this.getEditPanel().ownerDocument}}class fHe{constructor(e){this.parent=e,this.addEventListener()}addEventListener(){this.parent.on(hN,this.enableXhtmlValidation,this),this.parent.on(Cs,this.removeEventListener,this)}removeEventListener(){this.parent.off(hN,this.enableXhtmlValidation),this.parent.off(Cs,this.removeEventListener)}enableXhtmlValidation(){this.parent.enableXhtml&&(this.currentElement=f(this.parent.inputElement)?this.parent.element:this.parent.inputElement,this.clean(this.currentElement),this.AddRootElement(),this.ImageTags(),this.removeTags(),this.RemoveUnsupported(),this.currentElement.innerHTML=this.selfEncloseValidation(this.currentElement.innerHTML,"\n"===this.currentElement.innerText?this.currentElement.innerText.length:this.currentElement.innerText.trim().length),this.parent.setProperties({value:this.currentElement.innerHTML},!0))}selfEncloseValidation(e,t){if(0===t&&e.indexOf("table")<0&&e.indexOf("img")<0){const a=e.split("&nbsp;");a[a.length-1]="&#8203;"+a[a.length-1],e=a.join("")}let i;e=e.replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>").replace(/ /g," ");const s=[];let r=[];const o=[/<img(.*?)>/gi,/<area(.*?)>/gi,/<base(.*?)>/gi,/<col (.*?)>/gi,/<embed(.*?)>/gi,/<input(.*?)>/gi,/<link(.*?)>/gi,/<meta(.*?)>/gi,/<param(.*?)>/gi,/<source(.*?)>/gi,/<track(.*?)>/gi,/<wbr(.*?)>/gi];for(let a=0;a<o.length;a++){for(i=o[a].exec(e);null!==i;)s.push(i[0].toString()),i=o[a].exec(e);r=s.slice(0);for(let l=0;l<s.length;l++)(-1===s[l].indexOf("/")||s[l].lastIndexOf("/")!==s[l].length-2)&&(s[l]=s[l].substr(0,s[l].length-1)+" /"+s[l].substr(s[l].length-1,s[l].length));for(let l=0;l<=s.length-1;l++)e=e.replace(r[l],s[l])}return e}AddRootElement(){if(1===this.currentElement.childNodes.length&&"DIV"!==this.currentElement.firstChild.nodeName||this.currentElement.childNodes.length>1){const e=this.parent.createElement("div");for(;this.currentElement.childNodes.length>0;)e.appendChild(this.currentElement.childNodes[0]);this.currentElement.appendChild(e)}}clean(e){for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes[t];8===i.nodeType||"V:IMAGE"===i.nodeName?(e.removeChild(i),t--):1===i.nodeType&&this.clean(i)}return this.currentElement.innerHTML}ImageTags(){const e=this.currentElement.querySelectorAll("IMG");for(let t=e.length-1;t>=0;t--)e[t].hasAttribute("alt")||e[t].setAttribute("alt","")}removeTags(){const e=[["br","ul"],["br","ol"],["table","span"],["div","span"],["p","span"]];for(let t=0;t<e.length;t++)this.RemoveElementNode(e[t][0],e[t][1])}RemoveElementNode(e,t){const i=this.currentElement.querySelectorAll(t);for(let s=0;s<i.length;s++){const r=i[s].querySelectorAll(e);for(let o=r.length;o>0;o--)te(r[o-1])}}RemoveUnsupported(){const e=this.currentElement.querySelectorAll("u");for(let s=e.length-1;s>=0;s--){const r=this.parent.createElement("span");r.style.textDecoration="underline",r.innerHTML=e[s].innerHTML,e[s].parentNode.insertBefore(r,e[s]),te(e[s])}const t=this.currentElement.querySelectorAll("strong");for(let s=t.length-1;s>=0;s--){const r=this.parent.createElement("b");r.innerHTML=t[s].innerHTML,t[s].parentNode.insertBefore(r,t[s]),te(t[s])}const i=["language","role","target","contenteditable","cellspacing","cellpadding","border","valign","colspan"];for(let s=0;s<=i.length;s++)this.RemoveAttributeByName(i[s])}RemoveAttributeByName(e){if(null!==this.currentElement.firstChild&&3!==this.currentElement.firstChild.nodeType)for(let t=0;t<this.currentElement.childNodes.length;t++){const i=this.currentElement.childNodes[t];if(3!==i.nodeType&&"TABLE"!==i.nodeName&&"TBODY"!==i.nodeName&&"THEAD"!==i.nodeName&&"TH"!==i.nodeName&&"TR"!==i.nodeName&&"TD"!==i.nodeName&&(i.hasAttribute(e)&&i.removeAttribute(e),i.hasChildNodes()))for(let s=0;s<i.childNodes.length;s++){const r=i.childNodes[s];if(3!==r.nodeType&&"TABLE"!==r.nodeName&&"TBODY"!==r.nodeName&&"THEAD"!==r.nodeName&&"TH"!==r.nodeName&&"TR"!==r.nodeName&&"TD"!==r.nodeName&&r.hasAttribute(e)&&r.removeAttribute(e),r.hasChildNodes())for(let o=0;o<r.childNodes.length;o++)3!==r.childNodes[o].nodeType&&"TABLE"!==r.childNodes[o].nodeName&&"TBODY"!==r.childNodes[o].nodeName&&"THEAD"!==r.childNodes[o].nodeName&&"TH"!==r.childNodes[o].nodeName&&"TR"!==r.childNodes[o].nodeName&&"TD"!==r.childNodes[o].nodeName&&r.childNodes[o].hasAttribute(e)&&r.childNodes[o].removeAttribute(e)}}}}class vHe{constructor(e){this.parent=e,this.addEventListener()}showFullScreen(e){!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&!f(this.parent.quickToolbarModule)&&this.parent.quickToolbarModule.hideQuickToolbars(),this.scrollableParent=gk(this.parent.element),this.parent.element.classList.contains(dN)||this.parent.trigger(Hp,{cancel:!1,requestType:"Maximize",targetItem:"Maximize",args:e},i=>{i.cancel||(this.parent.toolbarSettings.enableFloating&&!this.parent.inlineMode.enable&&this.parent.toolbarSettings.enable&&(this.parent.getToolbarElement().style.width="100%",this.parent.getToolbarElement().style.top="0px"),this.parent.element.classList.add(dN),this.toggleParentOverflow(!0),this.parent.setContentHeight(),this.parent.toolbarModule&&(this.parent.getBaseToolbarObject().toolbarObj.items[0].properties||this.parent.getBaseToolbarObject().toolbarObj.removeItems(0),q.isDevice&&this.parent.toolbarModule.removeFixedTBarClass(),this.parent.toolbarModule.updateItem({targetItem:"Maximize",updateItem:"Minimize",baseToolbar:this.parent.getBaseToolbarObject()})),this.parent.trigger(Ag,{requestType:"Maximize",targetItem:"Maximize",args:e}))})}hideFullScreen(e){!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&!f(this.parent.quickToolbarModule)&&this.parent.quickToolbarModule.hideQuickToolbars(),this.parent.element.classList.contains(dN)&&this.parent.trigger(Hp,{cancel:!1,requestType:"Minimize",targetItem:"Minimize",args:e},i=>{if(!i.cancel){this.parent.element.classList.remove(dN);const s=document.querySelectorAll(".e-rte-overflow");for(let r=0;r<s.length;r++)W([s[r]],["e-rte-overflow"]);this.parent.setContentHeight(),this.parent.toolbarModule&&(this.parent.getBaseToolbarObject().toolbarObj.items[0].properties||this.parent.getBaseToolbarObject().toolbarObj.removeItems(0),this.parent.toolbarModule.updateItem({targetItem:"Minimize",updateItem:"Maximize",baseToolbar:this.parent.getBaseToolbarObject()}),q.isDevice&&this.parent.inlineMode.enable&&this.parent.toolbarModule.addFixedTBarClass()),this.parent.trigger(Ag,{requestType:"Minimize",targetItem:"Minimize",args:e})}})}toggleParentOverflow(e){if(!f(this.scrollableParent))for(let t=0;t<this.scrollableParent.length;t++)z("#document"===this.scrollableParent[t].nodeName?[document.querySelector("body")]:[this.scrollableParent[t]],["e-rte-overflow"])}onKeyDown(e){const t=e.args;switch(t.action){case"full-screen":this.showFullScreen(e.args),t.preventDefault();break;case"escape":this.hideFullScreen(e.args),t.preventDefault()}}addEventListener(){this.parent.on(Xd,this.onKeyDown,this),this.parent.on(Cs,this.destroy,this)}removeEventListener(){this.parent.off(Xd,this.onKeyDown),this.parent.off(Cs,this.destroy)}destroy(){this.parent.element.classList.contains(dN)&&this.toggleParentOverflow(!1);const e=document.querySelectorAll(".e-rte-overflow");for(let t=0;t<e.length;t++)W([e[t]],["e-rte-overflow"]);this.removeEventListener()}}function VQ(n,e,t,i){let s;if(s=t?e.contentModule.getDocument().querySelector("body"):e.element,Object.keys(n).length)for(const r of Object.keys(n))"class"===r?s.classList.add(n[r]):"disabled"===r&&"disabled"===n[r]?(e.enabled=!1,e.setEnable()):"readonly"===r&&"readonly"===n[r]?(e.readonly=!0,e.setReadOnly(i)):"style"===r?s.setAttribute("style",n[r]):"tabindex"===r?e.inputElement.setAttribute("tabindex",n[r]):"placeholder"===r?(e.placeholder=n[r],e.setPlaceHolder()):["name","required"].indexOf(r)>-1?e.valueContainer.setAttribute(r,n[r]):s.setAttribute(r,n[r])}class CHe{constructor(e,t){this.parent=e,this.locator=t,this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}render(){this.contentRenderer=this.renderer.getRenderer(Gs.Content),this.contentRenderer.renderPanel()}refresh(e={requestType:"refresh"}){this.parent.notify(`${e.requestType}-begin`,e)}destroy(){this.removeEventListener()}addEventListener(){this.parent.isDestroyed||(this.parent.on(Ul,this.refresh,this),this.parent.on(yy,this.keyUp,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(Ul,this.refresh),this.parent.off(yy,this.keyUp))}keyUp(e){if("HTML"===this.parent.editorMode)switch(e.args.which){case 46:case 8:const t=this.parent.contentModule.getEditPanel().childNodes;if(0===t.length||1===t.length&&0===t[0].childNodes.length&&("BR"===t[0].tagName||("P"===t[0].tagName||"DIV"===t[0].tagName)&&""===t[0].textContent)){const i=this.parent.contentModule.getEditPanel();i.innerHTML="DIV"===this.parent.enterKey?"<div><br/></div>":"BR"===this.parent.enterKey?"<br/>":"<p><br/></p>",this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),i.childNodes[0],0)}}}}class xHe{constructor(e,t){this.parent=e,this.rendererFactory=t.getService("rendererFactory"),this.addEventListener()}addEventListener(){this.parent.on(G1,this.sourceCode,this),this.parent.on(cl,this.onInitialEnd,this),this.parent.on(eN,this.updateSourceCode,this),this.parent.on(Cs,this.destroy,this)}onInitialEnd(){this.parent.formatter.editorManager.observer.on(dl,this.onKeyDown,this)}removeEventListener(){this.unWireEvent(),this.parent.off(G1,this.sourceCode),this.parent.off(eN,this.updateSourceCode),this.parent.off(cl,this.onInitialEnd),this.parent.off(Cs,this.destroy),this.parent.formatter.editorManager.observer.off(dl,this.onKeyDown)}getSourceCode(){return this.parent.createElement("textarea",{className:"e-rte-srctextarea"})}wireEvent(e){this.keyboardModule=new GC(e,{keyAction:this.previewKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}),k.add(this.previewElement,"mousedown",this.mouseDownHandler,this)}unWireEvent(){this.keyboardModule&&this.keyboardModule.destroy(),this.previewElement&&k.remove(this.previewElement,"mousedown",this.mouseDownHandler)}wireBaseKeyDown(){this.parent.keyboardModule=new GC(this.contentModule.getEditPanel(),{keyAction:this.parent.keyDown.bind(this.parent),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"})}unWireBaseKeyDown(){this.parent.keyboardModule.destroy()}mouseDownHandler(e){this.parent.notify(tN,{args:e})}previewKeyDown(e){switch(e.action){case"html-source":this.updateSourceCode(e),e.preventDefault();break;case"toolbar-focus":this.parent.toolbarSettings.enable&&this.parent.toolbarModule.baseToolbar.toolbarObj.element.querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus()}}onKeyDown(e){"html-source"===e.event.action&&(e.event.preventDefault(),this.sourceCode(e),e.callBack({requestType:"SourceCode",editorMode:"HTML",event:e.event}))}sourceCode(e){this.parent.isBlur=!1,this.parent.trigger(Hp,{requestType:"SourceCode",targetItem:"SourceCode",args:e});const t=bt("."+tI,this.parent.element);if(this.contentModule=this.rendererFactory.getRenderer(Gs.Content),this.parent.notify(XF,{targetItem:"SourceCode",updateItem:"Preview",baseToolbar:this.parent.getBaseToolbarObject()}),f(this.previewElement)&&(this.previewElement=this.getSourceCode()),this.parent.updateValueData(),this.parent.iframeSettings.enable){let i;i=f(this.parent.element.querySelector("#"+this.parent.element.id+"_source-view"))?this.parent.createElement("div",{className:"e-source-content",id:this.parent.element.id+"_source-view"}):this.parent.element.querySelector("#"+this.parent.element.id+"_source-view"),i.appendChild(this.previewElement),this.parent.element.appendChild(i),i.style.height=this.contentModule.getPanel().style.height,i.style.marginTop=this.contentModule.getPanel().style.marginTop,this.getPanel().value=this.getTextAreaValue(),this.contentModule.getPanel().style.display="none",i.style.display="block",this.getPanel().style.display="block"}else this.contentModule.getPanel().appendChild(this.previewElement),this.getPanel().value=this.getTextAreaValue(),this.contentModule.getEditPanel().style.display="none",this.previewElement.style.display="block";this.parent.isBlur=!1,this.parent.disableToolbarItem(this.parent.toolbarSettings.items),this.parent.enableToolbarItem("SourceCode"),this.parent.getToolbar()&&W([this.parent.getToolbar()],[iI]),W(t,[mN]),this.parent.setContentHeight("sourceCode",!0),this.wireEvent(this.previewElement),this.unWireBaseKeyDown(),this.previewElement.focus(),this.parent.updateValue(),f(this.parent.placeholder)||this.parent.iframeSettings.enable||(this.parent.element.querySelector(".rte-placeholder.e-rte-placeholder").style.display="none"),this.parent.trigger(Ag,{requestType:"SourceCode",targetItem:"SourceCode",args:e}),this.parent.invokeChangeEvent()}updateSourceCode(e){this.parent.isBlur=!1,this.parent.trigger(Hp,{requestType:"Preview",targetItem:"Preview",args:e});const t=this.getPanel();this.parent.notify(XF,{targetItem:"Preview",updateItem:"SourceCode",baseToolbar:this.parent.getBaseToolbarObject()});const i=this.parent.serializeValue(t.value);let s;s=null===i||""===i?"DIV"===this.parent.enterKey?"<div><br/></div>":"BR"===this.parent.enterKey?"<br/>":"<p><br/></p>":i,this.parent.iframeSettings.enable?(t.parentElement.style.display="none",t.style.display="none",this.contentModule.getPanel().style.display="block",this.contentModule.getEditPanel().innerHTML=s):(t.style.display="none",this.contentModule.getEditPanel().style.display="block",this.contentModule.getEditPanel().innerHTML=s),this.parent.isBlur=!1,this.parent.enableToolbarItem(this.parent.toolbarSettings.items),this.parent.getToolbar()&&W([this.parent.getToolbar()],[iI]),this.parent.setContentHeight("preview",!0),this.unWireEvent(),this.wireBaseKeyDown(),this.contentModule.getEditPanel().focus(),this.parent.updateValue(),f(this.parent.placeholder)||0!==this.contentModule.getEditPanel().innerText.length||(this.parent.element.querySelector(".rte-placeholder.e-rte-placeholder").style.display="block"),this.parent.trigger(Ag,{requestType:"Preview",targetItem:"Preview",args:e}),this.parent.formatter.enableUndo(this.parent),this.parent.invokeChangeEvent()}getTextAreaValue(){return"<p><br></p>"===this.contentModule.getEditPanel().innerHTML||"<div><br></div>"===this.contentModule.getEditPanel().innerHTML||"<br>"===this.contentModule.getEditPanel().innerHTML||1===this.contentModule.getEditPanel().childNodes.length&&"P"===this.contentModule.getEditPanel().childNodes[0].tagName&&7===this.contentModule.getEditPanel().innerHTML.length||"DIV"===this.contentModule.getEditPanel().childNodes[0].tagName&&11===this.contentModule.getEditPanel().innerHTML.length?"":this.parent.value}getPanel(){return this.parent.element&&this.parent.element.querySelector(".e-rte-srctextarea")}getViewPanel(){return this.parent.iframeSettings.enable&&this.getPanel()?this.getPanel().parentElement:this.getPanel()}destroy(){this.removeEventListener()}}class _He{constructor(e){this.parent=e}render(e){let t;return e.beforeOpen=this.beforeOpen.bind(this),e.open=this.open.bind(this),f(e.close)&&(e.close=this.close.bind(this)),e.beforeClose=this.beforeClose.bind(this),t=new Hs(e),t.isStringTemplate=!0,t}beforeOpen(e){this.parent.trigger("beforeDialogOpen",e,this.beforeOpenCallback.bind(this,e))}beforeOpenCallback(e){e.cancel&&this.parent.notify(eI,null)}open(e){this.parent.trigger("dialogOpen",e)}beforeClose(e){this.parent.trigger("beforeDialogClose",e,t=>{t.cancel||t.container.classList.contains("e-popup-close")&&(t.cancel=!0)})}close(e){this.parent.trigger("dialogClose",e)}}const IHe={bold:{command:"Style",subCommand:"Bold",value:"strong"},italic:{command:"Style",subCommand:"Italic",value:"em"},underline:{command:"Style",subCommand:"Underline",value:"span"},strikeThrough:{command:"Style",subCommand:"StrikeThrough",value:"span"},insertCode:{command:"Formats",subCommand:"Pre",value:"pre"},superscript:{command:"Effects",subCommand:"SuperScript",value:"sup"},subscript:{command:"Effects",subCommand:"SubScript",value:"sub"},uppercase:{command:"Casing",subCommand:"UpperCase"},lowercase:{command:"Casing",subCommand:"LowerCase"},fontColor:{command:"font",subCommand:"fontcolor",value:"#ff0000"},fontName:{command:"font",subCommand:"fontname",value:"Segoe UI"},fontSize:{command:"font",subCommand:"fontsize",value:"10pt"},backColor:{command:"font",subCommand:"backgroundcolor",value:"#ffff00"},justifyCenter:{command:"Alignments",subCommand:"JustifyCenter"},justifyFull:{command:"Alignments",subCommand:"JustifyFull"},justifyLeft:{command:"Alignments",subCommand:"JustifyLeft"},justifyRight:{command:"Alignments",subCommand:"JustifyRight"},undo:{command:"Actions",subCommand:"Undo"},redo:{command:"Actions",subCommand:"Redo"},createLink:{command:"Links",subCommand:"createLink"},editLink:{command:"Links",subCommand:"createLink"},createImage:{command:"Images",subCommand:"Images"},formatBlock:{command:"Formats",value:"P"},heading:{command:"Formats",value:"H1"},indent:{command:"Indents",subCommand:"Indent"},outdent:{command:"Indents",subCommand:"Outdent"},insertHTML:{command:"InsertHTML",subCommand:"InsertHTML",value:""},insertText:{command:"InsertText",subCommand:"InsertText",value:""},insertHorizontalRule:{command:"InsertHTML",subCommand:"InsertHTML",value:"<hr/>"},insertImage:{command:"Images",subCommand:"Image"},editImage:{command:"Images",subCommand:"Image"},insertTable:{command:"Table",subCommand:"CreateTable"},insertBrOnReturn:{command:"InsertHTML",subCommand:"InsertHTML",value:"<br/>"},insertOrderedList:{command:"Lists",value:"OL"},insertUnorderedList:{command:"Lists",value:"UL"},insertParagraph:{command:"Formats",value:"P"},removeFormat:{command:"Clear",subCommand:"ClearFormat"}};var vi=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class sR extends ii{}vi([_(!0)],sR.prototype,"enable",void 0),vi([_(!0)],sR.prototype,"enableFloating",void 0),vi([_(fd.Expand)],sR.prototype,"type",void 0),vi([_(["Bold","Italic","Underline","|","Formats","Alignments","OrderedList","UnorderedList","|","CreateLink","Image","|","SourceCode","Undo","Redo"])],sR.prototype,"items",void 0),vi([_({})],sR.prototype,"itemConfigs",void 0);class eu extends ii{}vi([_([".jpeg",".jpg",".png"])],eu.prototype,"allowedTypes",void 0),vi([_("inline")],eu.prototype,"display",void 0),vi([_("Blob")],eu.prototype,"saveFormat",void 0),vi([_("auto")],eu.prototype,"width",void 0),vi([_("auto")],eu.prototype,"height",void 0),vi([_(null)],eu.prototype,"saveUrl",void 0),vi([_(null)],eu.prototype,"path",void 0),vi([_(!0)],eu.prototype,"resize",void 0),vi([_(null)],eu.prototype,"removeUrl",void 0),vi([_(0)],eu.prototype,"minWidth",void 0),vi([_(null)],eu.prototype,"maxWidth",void 0),vi([_(0)],eu.prototype,"minHeight",void 0),vi([_(null)],eu.prototype,"maxHeight",void 0),vi([_(!1)],eu.prototype,"resizeByPercent",void 0);class Yh extends ii{}vi([di({getImageUrl:null,url:null,uploadUrl:null},Zpe)],Yh.prototype,"ajaxSettings",void 0),vi([_(!1)],Yh.prototype,"allowDragAndDrop",void 0),vi([di({visible:!0,file:["Open","|","Cut","Copy","|","Delete","Rename","|","Details"],folder:["Open","|","Cut","Copy","Paste","|","Delete","Rename","|","Details"],layout:["SortBy","View","Refresh","|","Paste","|","NewFolder","Upload","|","Details","|","SelectAll"]},k1)],Yh.prototype,"contextMenuSettings",void 0),vi([_("")],Yh.prototype,"cssClass",void 0),vi([di({},j3)],Yh.prototype,"detailsViewSettings",void 0),vi([_(!1)],Yh.prototype,"enable",void 0),vi([di({maxWidth:"650px",minWidth:"240px",visible:!0},R1)],Yh.prototype,"navigationPaneSettings",void 0),vi([_("/")],Yh.prototype,"path",void 0),vi([_(null)],Yh.prototype,"rootAliasName",void 0),vi([di({},D1)],Yh.prototype,"searchSettings",void 0),vi([_(!0)],Yh.prototype,"showFileExtension",void 0),vi([_(!1)],Yh.prototype,"showHiddenItems",void 0),vi([_(!0)],Yh.prototype,"showThumbnail",void 0),vi([_("Ascending")],Yh.prototype,"sortOrder",void 0),vi([di({visible:!0,items:["NewFolder","Upload","Cut","Copy","Paste","Delete","Download","Rename","SortBy","Refresh","Selection","View","Details"]},V3)],Yh.prototype,"toolbarSettings",void 0),vi([di({autoUpload:!0,minFileSize:0,maxFileSize:3e7,allowedExtensions:"",autoClose:!1},j_)],Yh.prototype,"uploadSettings",void 0),vi([_("LargeIcons")],Yh.prototype,"view",void 0);class nR extends ii{}vi([_("100%")],nR.prototype,"width",void 0),vi([_(P6)],nR.prototype,"styles",void 0),vi([_(!0)],nR.prototype,"resize",void 0),vi([_(0)],nR.prototype,"minWidth",void 0),vi([_(null)],nR.prototype,"maxWidth",void 0);class OS extends ii{}vi([_(!0)],OS.prototype,"enable",void 0),vi([_(!1)],OS.prototype,"showOnRightClick",void 0),vi([_("hide")],OS.prototype,"actionOnScroll",void 0),vi([_(["Open","Edit","UnLink"])],OS.prototype,"link",void 0),vi([_(["Replace","Align","Caption","Remove","-","InsertLink","OpenImageLink","EditImageLink","RemoveImageLink","Display","AltText","Dimension"])],OS.prototype,"image",void 0),vi([_(["Cut","Copy","Paste"])],OS.prototype,"text",void 0),vi([_(["TableHeader","TableRows","TableColumns","BackgroundColor","-","TableRemove","Alignments","TableCellVerticalAlign","Styles"])],OS.prototype,"table",void 0);class rI extends ii{}vi([_(!1)],rI.prototype,"prompt",void 0),vi([_(null)],rI.prototype,"deniedAttrs",void 0),vi([_(["background","background-color","border","border-bottom","border-left","border-radius","border-right","border-style","border-top","border-width","clear","color","cursor","direction","display","float","font","font-family","font-size","font-weight","font-style","height","left","line-height","list-style-type","margin","margin-top","margin-left","margin-right","margin-bottom","max-height","max-width","min-height","min-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","position","right","table-layout","text-align","text-decoration","text-indent","top","vertical-align","visibility","white-space","width"])],rI.prototype,"allowedStyleProps",void 0),vi([_(null)],rI.prototype,"deniedTags",void 0),vi([_(!0)],rI.prototype,"keepFormat",void 0),vi([_(!1)],rI.prototype,"plainText",void 0);class K6 extends ii{}vi([_(null)],K6.prototype,"default",void 0),vi([_("65px")],K6.prototype,"width",void 0),vi([_(F6)],K6.prototype,"items",void 0);class Y6 extends ii{}vi([_(null)],Y6.prototype,"default",void 0),vi([_("35px")],Y6.prototype,"width",void 0),vi([_([{text:"8 pt",value:"8pt"},{text:"10 pt",value:"10pt"},{text:"12 pt",value:"12pt"},{text:"14 pt",value:"14pt"},{text:"18 pt",value:"18pt"},{text:"24 pt",value:"24pt"},{text:"36 pt",value:"36pt"}])],Y6.prototype,"items",void 0);class Z6 extends ii{}vi([_(null)],Z6.prototype,"default",void 0),vi([_("65px")],Z6.prototype,"width",void 0),vi([_(N6)],Z6.prototype,"types",void 0);class rR extends ii{}vi([_("#ff0000")],rR.prototype,"default",void 0),vi([_("Palette")],rR.prototype,"mode",void 0),vi([_(10)],rR.prototype,"columns",void 0),vi([_({Custom:["","#000000","#e7e6e6","#44546a","#4472c4","#ed7d31","#a5a5a5","#ffc000","#70ad47","#ff0000","#f2f2f2","#808080","#cfcdcd","#d5dce4","#d9e2f3","#fbe4d5","#ededed","#fff2cc","#e2efd9","#ffcccc","#d9d9d9","#595959","#aeaaaa","#acb9ca","#b4c6e7","#f7caac","#dbdbdb","#ffe599","#c5e0b3","#ff8080","#bfbfbf","#404040","#747070","#8496b0","#8eaadb","#f4b083","#c9c9c9","#ffd966","#a8d08d","#ff3333","#a6a6a6","#262626","#3b3838","#323e4f","#2f5496","#c45911","#7b7b7b","#bf8f00","#538135","#b30000","#7f7f7f","#0d0d0d","#161616","#212934","#1f3763","#823b0b","#525252","#7f5f00","#375623","#660000"]})],rR.prototype,"colorCode",void 0),vi([_(!1)],rR.prototype,"modeSwitcher",void 0);class oR extends ii{}vi([_("#ffff00")],oR.prototype,"default",void 0),vi([_("Palette")],oR.prototype,"mode",void 0),vi([_(10)],oR.prototype,"columns",void 0),vi([_({Custom:["","#000000","#ffff00","#00ff00","#00ffff","#0000ff","#ff0000","#000080","#800080","#996633","#f2f2f2","#808080","#ffffcc","#b3ffb3","#ccffff","#ccccff","#ffcccc","#ccccff","#ff80ff","#f2e6d9","#d9d9d9","#595959","#ffff80","#80ff80","#b3ffff","#8080ff","#ff8080","#8080ff","#ff00ff","#dfbf9f","#bfbfbf","#404040","#ffff33","#33ff33","#33ffff","#3333ff","#ff3333","#0000b3","#b300b3","#c68c53","#a6a6a6","#262626","#e6e600","#00b300","#009999","#000099","#b30000","#000066","#660066","#86592d","#7f7f7f","#0d0d0d","#999900","#006600","#006666","#000066","#660000","#00004d","#4d004d","#734d26"]})],oR.prototype,"colorCode",void 0),vi([_(!1)],oR.prototype,"modeSwitcher",void 0);class Ege extends ii{}vi([_(B6)],Ege.prototype,"types",void 0);class _ge extends ii{}vi([_(H6)],_ge.prototype,"types",void 0);var _N=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class zQ extends ii{}_N([_([])],zQ.prototype,"styles",void 0),_N([_([])],zQ.prototype,"scripts",void 0);class X6 extends ii{}_N([_(!1)],X6.prototype,"enable",void 0),_N([_(null)],X6.prototype,"attributes",void 0),_N([di({},zQ)],X6.prototype,"resources",void 0);var Ige=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class jQ extends ii{}Ige([_(!1)],jQ.prototype,"enable",void 0),Ige([_(!0)],jQ.prototype,"onSelection",void 0);class THe{constructor(e){this.parent=e,this.addEventListener()}addEventListener(){this.parent.on(eQ,this.enterHandler,this),this.parent.on(Cs,this.destroy,this)}destroy(){this.removeEventListener()}removeEventListener(){this.parent.off(eQ,this.enterHandler),this.parent.off(Cs,this.destroy)}getRangeNode(){this.range=this.parent.getRange(),this.startNode="#text"===this.range.startContainer.nodeName?this.range.startContainer.parentElement:this.range.startContainer,this.endNode="#text"===this.range.endContainer.nodeName?this.range.endContainer.parentElement:this.range.endContainer}enterHandler(e){this.getRangeNode();let t=!0;if(!f(this.startNode.closest("TABLE"))&&!f(this.endNode.closest("TABLE"))){t=!1;let i=this.startNode,s=i;for(;!this.parent.formatter.editorManager.domNode.isBlockNode(i);)s=i,i=i.parentElement;t="TD"!==s.tagName}if(13===e.args.which&&"Enter"===e.args.code&&f(this.startNode.closest("LI"))&&f(this.endNode.closest("LI"))&&t&&f(this.startNode.closest("PRE"))&&f(this.endNode.closest("PRE"))){const i=e.args.shiftKey;this.parent.trigger(Hp,{cancel:!1,name:Hp,requestType:i?"ShiftEnterAction":"EnterAction",originalEvent:e.args},r=>{if(!r.cancel){if(this.range.startOffset!==this.range.endOffset||this.range.startContainer!==this.range.endContainer)if(this.range.deleteContents(),"#text"===this.range.startContainer.nodeName&&0===this.range.startContainer.textContent.length&&this.range.startContainer.parentElement!==this.parent.inputElement)this.range.startContainer.parentElement.innerHTML="BR"===this.parent.enterKey?"&#8203;":"<br>";else if(this.range.startContainer===this.parent.inputElement&&""===this.range.startContainer.innerHTML){this.range.startContainer.innerHTML="<br>";const o=this.range.startContainer.childNodes[this.range.startOffset];this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),o,0)}else if(this.parent.inputElement===this.range.startContainer){const o=this.range.startContainer.childNodes[this.range.startOffset];if("#text"===o.nodeName&&0===o.textContent.length)this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),o,o.previousSibling.textContent.length);else if(this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),o,o.textContent.length>=0?0:1),0===o.previousSibling.textContent.length)te(o.previousSibling);else if(0===o.textContent.length){let a=o.previousSibling.lastChild;for(;"#text"!==a.nodeName;)a=a.lastChild;this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),a,a.textContent.length),te(o)}else if("BR"!==this.parent.enterKey&&0!==o.previousSibling.textContent.length&&0!==o.textContent.length)return void e.args.preventDefault();this.getRangeNode()}if(this.range.startContainer===this.range.endContainer&&this.range.startOffset===this.range.endOffset&&this.range.startContainer===this.parent.inputElement&&(this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),this.range.startContainer.childNodes[this.range.startOffset],0),this.getRangeNode()),"P"===this.parent.enterKey&&!i||"DIV"===this.parent.enterKey&&!i||"P"===this.parent.shiftEnterKey&&i||"DIV"===this.parent.shiftEnterKey&&i){let o;o=t&&this.parent.formatter.editorManager.domNode.isBlockNode(this.startNode)?this.startNode:this.parent.formatter.editorManager.domNode.blockParentNode(this.startNode);let a=!1,l=!1;if(0==this.range.startOffset||0==this.range.endOffset||this.range.startContainer!==this.range.endContainer||!f(o.childNodes[0])&&"IMG"===o.childNodes[0].nodeName)0===this.range.startOffset&&0===this.range.endOffset&&(l=!0);else{let c=this.range.startContainer.textContent.substring(0,this.range.startOffset);160!=c.charCodeAt(this.range.startOffset-1)&&0===c.trim().length&&(l=!0)}if(this.removeBRElement(o),(0===this.range.startOffset&&0===this.range.endOffset||l)&&(f(this.range.startContainer.previousSibling)||"IMG"!==this.range.startContainer.previousSibling.nodeName&&"BR"!==this.range.startContainer.previousSibling.nodeName)){let h,c;"IMG"===this.range.startContainer.nodeName?(c=this.createInsertElement(i),a=!0,h=!1):0!==o.textContent.trim().length?(c=this.parent.formatter.editorManager.nodeCutter.SplitNode(this.range,o,!1).cloneNode(!0),h=!1):(c=this.parent.formatter.editorManager.nodeCutter.SplitNode(this.range,o,!0).cloneNode(!0),h=!0);const m=this.createInsertElement(i);for(;c.firstChild;)m.appendChild(c.firstChild);if(o.parentElement.insertBefore(m,o),!h){let v,b=m;for(;!f(b)&&"#text"!==b.nodeName;)v=b,b=b.lastChild;v.innerHTML="<br>",a||te(o)}this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),m.nextElementSibling,0)}else if(0!==o.textContent.length||!f(o.childNodes[0])&&"IMG"===o.childNodes[0].nodeName){const h=this.parent.formatter.editorManager.nodeCutter.SplitNode(this.range,o,!0);if(!f(h.childNodes[0])&&"#text"===h.childNodes[0].nodeName&&0===h.childNodes[0].textContent.length&&te(h.childNodes[0]),0===h.textContent.trim().length){const c=this.parent.createElement("br");if("A"===this.startNode.nodeName){let m=this.startNode.parentElement;this.startNode.parentElement.insertBefore(c,this.startNode),te(this.startNode),this.startNode=m}else this.startNode.appendChild(c);"\n"===h.childNodes[0].textContent&&te(h.childNodes[0]),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),this.startNode,0)}if(("P"===this.parent.enterKey||"DIV"===this.parent.enterKey)&&!i||("DIV"===this.parent.shiftEnterKey||"P"===this.parent.shiftEnterKey)&&i){const c=this.createInsertElement(i);for(;h.firstChild;)c.appendChild(h.firstChild);this.parent.formatter.editorManager.domNode.insertAfter(c,h),te(h),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),this.parent.formatter.editorManager.domNode.isBlockNode(this.startNode)?c:this.startNode,0)}}else if(f(o.children[0])||"BR"===o.children[0].tagName){const h=this.createInsertElement(i);h.innerHTML="<br>",this.parent.formatter.editorManager.domNode.insertAfter(h,o),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),h,0)}else{const h=this.parent.formatter.editorManager.nodeCutter.SplitNode(this.range,o,!1).cloneNode(!0);this.parent.formatter.editorManager.domNode.insertAfter(h,o),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),h,h.textContent.length>=0?0:1)}e.args.preventDefault()}if("BR"===this.parent.enterKey&&!i||"BR"===this.parent.shiftEnterKey&&i){let o;if(this.parent.formatter.editorManager.domNode.isBlockNode(this.startNode))o=this.startNode;else{let h=this.startNode,c=h;for(;!this.parent.formatter.editorManager.domNode.isBlockNode(h);)c=h,h=h.parentElement;o=h===this.parent.inputElement?c:h}this.removeBRElement(o);let a=o.lastChild;for(;!f(a)&&"#text"!==a.nodeName&&"BR"!==a.nodeName;)a=a.lastChild;const l=this.range.startContainer===a?this.range.startContainer.textContent.length:o.textContent.length;if(o!==this.parent.inputElement&&this.parent.formatter.editorManager.domNode.isBlockNode(o)&&this.range.startOffset===this.range.endOffset&&this.range.startOffset===l){const h=this.parent.createElement("br");if("BR"===a.nodeName&&0===o.textContent.length)this.parent.formatter.editorManager.domNode.insertAfter(h,a);else{const c=this.parent.createElement("br");this.parent.formatter.editorManager.domNode.insertAfter(h,this.range.startContainer),this.parent.formatter.editorManager.domNode.insertAfter(c,this.range.startContainer)}this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),h,0)}else if(f(o)||o===this.parent.inputElement||"BR"===o.nodeName)this.insertBRElement();else if(0===o.textContent.trim().length||1===o.textContent.trim().length&&8203===o.textContent.charCodeAt(0)){const h=this.parent.formatter.editorManager.nodeCutter.SplitNode(this.range,o,!0).cloneNode(!0);this.parent.formatter.editorManager.domNode.insertAfter(h,o);const c=this.parent.createElement("br");h.parentElement.insertBefore(c,h),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),h,0)}else{let h;const c=this.parent.createElement("br");if(0!==this.range.startOffset||0!==this.range.endOffset||f(o.previousSibling)||"BR"!==o.previousSibling.nodeName)this.insertBRElement();else{h=this.parent.formatter.editorManager.nodeCutter.SplitNode(this.range,o,!1).cloneNode(!0),this.parent.formatter.editorManager.domNode.insertAfter(c,o),this.insertFocusContent();let m=c.nextSibling;for(;!f(m)&&"#text"!==m.nodeName;)m=m.lastChild;this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),m,0)}}e.args.preventDefault()}this.parent.trigger(Ag,{requestType:i?"ShiftEnterAction":"EnterAction",args:e.args})}})}}removeBRElement(e){-1!=q.userAgent.indexOf("Firefox")&&this.range.endOffset===e.textContent.length&&(0!==e.textContent.length||e.querySelectorAll("BR").length>1)&&!f(e.lastChild)&&"BR"===e.lastChild.nodeName&&te(e.lastChild)}insertBRElement(){let e=!1;const t=this.parent.createElement("br");if("BR"===this.startNode.nodeName&&"BR"===this.endNode.nodeName&&0===this.range.startOffset&&this.range.startOffset===this.range.endOffset?(this.parent.formatter.editorManager.domNode.insertAfter(t,this.startNode),e=!0):(this.startNode===this.parent.inputElement&&!f(this.range.startContainer.previousSibling)&&"BR"===this.range.startContainer.previousSibling.nodeName&&0===this.range.startContainer.textContent.length&&(e=!0),this.range.insertNode(t)),e||!f(t.nextElementSibling)&&"BR"===t.nextElementSibling.tagName||!f(t.nextSibling)&&t.nextSibling.textContent.length>0)this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),f(t.nextSibling)?t:t.nextSibling,0),e=!1;else{const i=this.parent.createElement("br");this.range.insertNode(i),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),t,0)}}insertFocusContent(){0===this.range.startContainer.textContent.length&&("#text"===this.range.startContainer.nodeName?this.range.startContainer.parentElement.innerHTML="&#8203;":this.range.startContainer.innerHTML="&#8203;")}createInsertElement(e){let t;return"DIV"===this.parent.enterKey&&!e||"DIV"===this.parent.shiftEnterKey&&e?t=this.parent.createElement("div"):("P"===this.parent.enterKey&&!e||"P"===this.parent.shiftEnterKey&&e)&&(t=this.parent.createElement("p")),t}}var Ci=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let ui=class extends Qs{constructor(e,t){super(e,t),this.defaultResetValue=null,this.isResizeInitialized=!1,this.isFocusOut=!1,this.isRTE=!1,this.isBlur=!0,this.needsID=!0}requiredModules(){const e=[];return this.toolbarSettings.enable&&(e.push({member:"toolbar",args:[this,this.serviceLocator]}),e.push({member:"link",args:[this,this.serviceLocator]}),e.push({member:"table",args:[this,this.serviceLocator]}),e.push({member:"image",args:[this,this.serviceLocator]}),this.quickToolbarSettings.enable&&e.push({member:"quickToolbar",args:[this,this.serviceLocator]})),this.showCharCount&&e.push({member:"count",args:[this,this.serviceLocator]}),"Markdown"===this.editorMode&&e.push({member:"markdownEditor",args:[this,this.serviceLocator]}),"HTML"===this.editorMode&&(e.push({member:"htmlEditor",args:[this,this.serviceLocator]}),e.push({member:"pasteCleanup",args:[this,this.serviceLocator]})),this.fileManagerSettings.enable&&e.push({member:"fileManager",args:[this,this.serviceLocator]}),this.enableResize&&e.push({member:"resize",args:[this]}),e}updateEnable(){this.enabled?(W([this.element],pQ),this.element.setAttribute("aria-disabled","false"),f(this.htmlAttributes.tabindex)?this.inputElement.setAttribute("tabindex","0"):this.inputElement.setAttribute("tabindex",this.htmlAttributes.tabindex)):(this.getToolbar()&&(W(this.getToolbar().querySelectorAll("."+mN),mN),W([this.getToolbar()],[fQ,mQ])),z([this.element],pQ),this.element.tabIndex=-1,this.element.setAttribute("aria-disabled","true"),this.inputElement.setAttribute("tabindex","-1"))}setEnable(){this.updateEnable(),this.enabled?this.eventInitializer():this.unWireEvents()}preRender(){this.onBlurHandler=this.blurHandler.bind(this),this.onFocusHandler=this.focusHandler.bind(this),this.onResizeHandler=this.resizeHandler.bind(this),this.clickPoints={clientX:0,clientY:0},this.initialValue=this.value,this.serviceLocator=new Hme,this.initializeServices(),this.setContainer(),this.persistData(),ht(this.element,{width:st(this.width)}),Rt(this.element,{role:"application"})}persistData(){if(this.enablePersistence&&"TEXTAREA"===this.originalElement.tagName){this.element.id=this.originalElement.id+"_wrapper";const e=window.localStorage.getItem(this.getModuleName()+this.element.id);f(e)||""===e||this.setProperties(JSON.parse(e),!0)}}setContainer(){this.originalElement=this.element.cloneNode(!0),(null===this.value||null!==this.valueTemplate)&&this.setValue(),this.element.hasAttribute("tabindex")&&(this.htmlAttributes={tabindex:this.element.getAttribute("tabindex")},this.element.removeAttribute("tabindex")),this.element.innerHTML="";const e=["class","style","id","ejs-for"],t={};for(let i=0;i<this.element.attributes.length;i++)-1===e.indexOf(this.element.attributes[i].name)&&!/^data-val/.test(this.element.attributes[i].name)&&(t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name));if(Ae(t,this.htmlAttributes,t),this.setProperties({htmlAttributes:t},!0),f(this.htmlAttributes.id)||(this.element.id=this.htmlAttributes.id),"TEXTAREA"===this.element.tagName){const i=this.createElement("div",{className:this.element.getAttribute("class")});this.element.innerHTML="",this.element.parentElement.insertBefore(i,this.element),this.valueContainer=this.element,W([this.valueContainer],this.element.getAttribute("class").split(" ")),this.element=i}else this.valueContainer=this.createElement("textarea",{id:this.getID()+"-value"});this.valueContainer.name=this.getID(),z([this.valueContainer],Sme),this.element.appendChild(this.valueContainer)}getPersistData(){return this.addOnPersist(["value"])}focusIn(){this.enabled&&(this.inputElement.focus(),this.focusHandler({}))}focusOut(){this.enabled&&(this.inputElement.blur(),this.blurHandler({}))}selectAll(){this.notify(oN,{})}selectRange(e){this.notify(w6,{range:e})}getSelection(){let e="";return this.notify(aN,{callBack:t=>{e=t}}),e}executeCommand(e,t,i){if(t=this.htmlPurifier(e,t),"HTML"===this.editorMode){const r=this.getRange();this.iframeSettings.enable&&this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument),(this.iframeSettings.enable&&r.startContainer===this.inputElement||!this.inputElement.contains(r.startContainer))&&this.focusIn()}const s=IHe[e];i&&i.undo&&i.undo&&0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),this.formatter.editorManager.execCommand(s.command,s.subCommand?s.subCommand:t||s.value,null,null,t||s.value,t||s.value),i&&i.undo&&(this.formatter.saveData(),this.formatter.enableUndo(this)),this.setPlaceHolder(),this.notify(KF,{})}htmlPurifier(e,t){if("HTML"===this.editorMode)switch(e){case"insertHTML":this.enableHtmlSanitizer&&(t=this.htmlEditorModule.sanitizeHelper("string"==typeof t?t:t.outerHTML));break;case"insertTable":f(t.width)&&(t.width={minWidth:this.tableSettings.minWidth,maxWidth:this.tableSettings.maxWidth,width:this.tableSettings.width});break;case"insertImage":{const i=this.createElement("img",{attrs:{src:t.url}});let s=i.outerHTML;this.enableHtmlSanitizer&&(s=this.htmlEditorModule.sanitizeHelper(i.outerHTML));let r=""!==s&&this.createElement("div",{innerHTML:s}).firstElementChild.getAttribute("src")||null;r=f(r)?"":r,t.url=r,f(t.width)&&(t.width={minWidth:this.insertImageSettings.minWidth,maxWidth:this.insertImageSettings.maxWidth,width:this.insertImageSettings.width}),f(t.height)&&(t.height={minHeight:this.insertImageSettings.minHeight,maxHeight:this.insertImageSettings.maxHeight,height:this.insertImageSettings.height});break}case"createLink":{const i=this.createElement("a",{attrs:{href:t.url}});let s=i.outerHTML;this.enableHtmlSanitizer&&(s=this.htmlEditorModule.sanitizeHelper(i.outerHTML));let r=""!==s&&this.createElement("div",{innerHTML:s}).firstElementChild.getAttribute("href")||null;r=f(r)?"":r,t.url=r;break}}return t}encode(e){const t=this.createElement("div");return t.innerText=e.trim(),t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")}render(){this.value&&!this.valueTemplate&&this.setProperties({value:this.serializeValue(this.value)},!0),this.renderModule=new CHe(this,this.serviceLocator),this.sourceCodeModule=new xHe(this,this.serviceLocator),this.notify($F,{}),this.trigger("load"),this.RTERender(),new R2e(this),this.notify(cl,{}),this.enableXhtml&&this.setProperties({value:this.getXhtml()},!0),this.toolbarSettings.enable&&"Expand"===this.toolbarSettings.type&&!f(this.getToolbar())&&this.toolbarSettings.items.indexOf("Undo")>-1&&this.toolbarSettings.items.indexOf("Redo")>-1&&this.disableToolbarItem(["Undo","Redo"]),this.setContentHeight(),null!==this.value&&(this.valueContainer.defaultValue=this.value),this.enabled?this.eventInitializer():this.unWireEvents(),this.renderComplete()}eventInitializer(){this.wireEvents()}cleanList(e){const t=this.getRange(),i=t.startContainer;let a,r=t.startOffset,o=i===t.endContainer;const l="#text"===t.endContainer.nodeName?t.endContainer.parentElement:t.endContainer;let h=B(l,"LI");if(!f(h)&&l.textContent.length===t.endOffset&&!t.collapsed){h.textContent=h.textContent.trim(),a=h.textContent.length-1;let c=h;for(;"#text"!==c.nodeName;)c=c.lastChild;this.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),o?c:i,c,r,c.textContent.length)}}keyDown(e){if(this.notify(Xd,{member:"keydown",args:e}),this.restrict(e),"HTML"===this.editorMode&&this.cleanList(e),"HTML"===this.editorMode&&(8===e.which&&"Backspace"===e.code||46===e.which&&"Delete"===e.code)){const t=this.getRange();if(B("#text"===t.startContainer.nodeName?t.startContainer.parentElement:t.startContainer,"pre")&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset-1)||46===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset)){const s=new RegExp(String.fromCharCode(8203),"g"),r=8===e.which?t.startOffset-1:t.startOffset;t.startContainer.textContent=t.startContainer.textContent.replace(s,""),this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),t.startContainer,r)}else if("Backspace"===e.code&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(0)&&t.collapsed){const s=t.startContainer.parentElement;let r,o;for(o=0;o<s.childNodes.length;o++)s.childNodes[o]===t.startContainer&&(r=o);let a=!0;const l=[];for(o=r;o>=0;o--)3===s.childNodes[o].nodeType&&8203===s.childNodes[o].textContent.charCodeAt(0)&&a?l.push(o):a=!1;if(l.length>0)for(o=l.length-1;o>0;o--)s.childNodes[l[o]].textContent="";this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),t.startContainer,t.startOffset)}}if(0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),"insert-link"!==e.action&&(e.action&&"paste"!==e.action&&"space"!==e.action||9===e.which||"Backspace"===e.code&&8===e.which))switch(this.formatter.process(this,null,e),e.action){case"toolbar-focus":this.toolbarSettings.enable&&this.toolbarModule.baseToolbar.toolbarObj.element.querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus();break;case"escape":this.contentModule.getEditPanel().focus()}f(this.placeholder)||(f(this.placeHolderWrapper)||1===this.inputElement.textContent.length?this.setPlaceHolder():this.placeHolderWrapper.style.display="none"),this.autoResize()}keyUp(e){this.notify(yy,{member:"keyup",args:e}),"KeyX"===e.code&&88===e.which&&88===e.keyCode&&e.ctrlKey&&(""===this.inputElement.innerHTML||"<br>"===this.inputElement.innerHTML)&&(this.inputElement.innerHTML=j6(AQ(this),this));const t=32===e.which||13===e.which||8===e.which||46===e.which;("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||t||"Markdown"===this.editorMode&&("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||t)&&!this.inlineMode.enable)&&this.formatter.onKeyHandler(this,e),(this.inputElement&&0!==this.inputElement.textContent.length||this.element.querySelectorAll(".e-toolbar-item.e-active").length>0)&&this.notify(UC,{args:e}),f(this.placeholder)||("Enter"!==e.key||13!==e.keyCode)&&("<p><br></p>"===this.inputElement.innerHTML||"<div><br></div>"===this.inputElement.innerHTML||"<br>"===this.inputElement.innerHTML)&&this.setPlaceHolder()}serializeValue(e){return"HTML"===this.editorMode&&!f(e)&&(this.enableHtmlEncode?(e=this.htmlEditorModule.sanitizeHelper(_y(e)),e=this.encode(e)):e=this.htmlEditorModule.sanitizeHelper(e)),e}sanitizeHtml(e){return this.serializeValue(e)}updateValue(e){if(f(e)){const t=this.inputElement.innerHTML;this.setProperties({value:g2e(t)?null:t})}else this.setProperties({value:e})}triggerEditArea(e){if(pa()){const t=e.touches?e.changedTouches[0]:e;this.clickPoints.clientX===t.clientX&&this.clickPoints.clientY===t.clientY&&this.notify(kS,{member:"editAreaClick",args:e})}else this.notify(kS,{member:"editAreaClick",args:e})}notifyMouseUp(e){const t=e.touches?e.changedTouches[0]:e;this.notify("mouseUp",{member:"mouseUp",args:e,touchData:{prevClientX:this.clickPoints.clientX,prevClientY:this.clickPoints.clientY,clientX:t.clientX,clientY:t.clientY}}),this.inputElement&&("HTML"===this.editorMode&&0!==this.inputElement.textContent.length||"Markdown"===this.editorMode&&0!==this.inputElement.value.length)&&this.notify(UC,{args:e}),this.triggerEditArea(e)}mouseUp(e){if(this.quickToolbarSettings.showOnRightClick&&q.isDevice){const t=e.target,i=B(t,"table");if(t&&"A"===t.nodeName||"IMG"===t.nodeName||"TD"===t.nodeName||"TH"===t.nodeName||"TABLE"===t.nodeName||i&&this.contentModule.getEditPanel().contains(i))return}if(this.notifyMouseUp(e),3===e.detail){const t=this.getRange(),i=this.formatter.editorManager.domNode.getSelection();/\s+$/.test(i.toString())&&(!f(t.startContainer.parentElement)&&(!f(t.startContainer.parentElement.nextSibling)&&(3!==t.startContainer.parentElement.nextSibling.nodeType||/\s+$/.test(t.startContainer.parentElement.nextSibling.textContent))||t.startOffset===t.endOffset)||"li"===t.startContainer.parentElement.tagName.toLocaleLowerCase())&&(t.setStart(t.startContainer,t.startOffset),t.setEnd(t.startContainer,t.startContainer.textContent.length))}}ensureModuleInjected(e){return this.getInjectedModules().indexOf(e)>=0}onCopy(){this.contentModule.getDocument().execCommand("copy",!1,null)}onCut(){this.contentModule.getDocument().execCommand("cut",!1,null)}onPaste(e){this.trigger(Hp,{originalEvent:e,cancel:!1,requestType:"Paste"},i=>{const a=this.getText().trim().length-this.getSelection().length+(f(e)||f(e.clipboardData)?0:e.clipboardData.getData("text/plain").length);if("Markdown"===this.editorMode){const l={requestType:"Paste",editorMode:this.editorMode,event:e};return setTimeout(()=>{this.formatter.onSuccess(this,l)},0),void(-1===this.maxLength||a<=this.maxLength||e.preventDefault())}if(!i.cancel&&"true"===this.inputElement.contentEditable&&(-1===this.maxLength||a<=this.maxLength))if(f(this.pasteCleanupModule)){const l={requestType:"Paste",editorMode:this.editorMode,event:e};let h=null,c=!1;e&&!f(e.clipboardData)&&(h=e.clipboardData.getData("text/plain"),c=e.clipboardData.getData("text/html").indexOf("MsoNormal")>0);const m=e&&e.clipboardData&&e.clipboardData.items.length>0?e.clipboardData.items[0].getAsFile():null;null!==h&&this.notify($1,{file:m,args:e,text:h,isWordPaste:c}),setTimeout(()=>{this.formatter.onSuccess(this,l)},0)}else this.notify("pasteClean",{args:e});else e.preventDefault()})}clipboardAction(e,t){switch(e.toLowerCase()){case"cut":this.onCut(),this.formatter.onSuccess(this,{requestType:"Cut",editorMode:this.editorMode,event:t});break;case"copy":this.onCopy(),this.formatter.onSuccess(this,{requestType:"Copy",editorMode:this.editorMode,event:t});break;case"paste":this.onPaste(t)}}destroy(){if(!this.isDestroyed&&this.isRendered){if(null===this.element.offsetParent&&!f(this.toolbarModule))return void this.toolbarModule.destroy();if(this.notify(Cs,{}),this.destroyDependentModules(),f(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),this.unWireEvents(),"TEXTAREA"===this.originalElement.tagName){this.element.parentElement.insertBefore(this.valueContainer,this.element),this.valueContainer.id=this.getID(),this.valueContainer.removeAttribute("name"),te(this.element),""!==this.originalElement.innerHTML.trim()?(this.valueContainer.value=this.originalElement.innerHTML.trim(),this.setProperties({value:f(this.initialValue)?null:this.initialValue},!0)):this.valueContainer.value=this.valueContainer.defaultValue,this.element=this.valueContainer;for(let e=0;e<this.originalElement.classList.length;e++)z([this.element],this.originalElement.classList[e]);W([this.element],Sme)}else""!==this.originalElement.innerHTML.trim()?(this.element.innerHTML=this.originalElement.innerHTML.trim(),this.setProperties({value:f(this.initialValue)?null:this.initialValue},!0)):this.element.innerHTML="";if(this.placeholder&&this.placeHolderWrapper&&(this.placeHolderWrapper=null),!f(this.cssClass)){const e=this.cssClass.split(" ");for(let t=0;t<e.length;t++)""!==e[t].trim()&&W([this.element],e[t])}this.removeHtmlAttributes(),this.removeAttributes(),super.destroy(),this.isRendered=!1,this.enablePersistence&&window.localStorage.removeItem(this.getModuleName()+this.element.id)}}removeHtmlAttributes(){if(this.htmlAttributes){const e=Object.keys(this.htmlAttributes);for(let t=0;t<e.length&&this.element.hasAttribute(e[t]);t++)this.element.removeAttribute(e[t])}}removeAttributes(){this.enabled||W([this.element],pQ),this.enableRtl&&W([this.element],uQ),this.readonly&&W([this.element],bN),""!==this.element.style.width&&""===this.originalElement.style.width&&this.element.style.removeProperty("width"),""!==this.element.style.height&&""===this.originalElement.style.height&&this.element.style.removeProperty("height"),this.element.removeAttribute("aria-disabled"),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex")}destroyDependentModules(){this.renderModule.destroy(),this.formatter.editorManager.undoRedoManager.destroy(),this.sourceCodeModule.destroy()}getContent(){return this.contentModule.getPanel()}getText(){return this.contentModule.getText()}getSelectedHtml(){let e;const t=this.createElement("div"),i=this.contentModule.getDocument().getSelection();if(i.rangeCount>0){e=i.getRangeAt(0);const s=e.cloneContents();t.appendChild(s)}return t.innerHTML}showInlineToolbar(){if(this.inlineMode.enable){const e=this.getRange(),t="#text"===e.endContainer.nodeName?e.endContainer.parentElement:e.endContainer,i=e.getClientRects()[0].left,s=e.getClientRects()[0].top;this.quickToolbarModule.showInlineQTBar(i,s,t)}}hideInlineToolbar(){this.quickToolbarModule.hideInlineQTBar()}getModuleName(){return"richtexteditor"}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"enterKey":case"value":{let s;s="enterKey"===i?null===this.value||"<div><br></div>"===this.value||"<p><br></p>"===this.value||"<br>"===this.value?null:this.value:e[i];const r="HTML"===this.editorMode?j6(s,this):s;(!f(s)&&""!==s||"enterKey"===i)&&(this.value=this.serializeValue(this.enableHtmlEncode?this.encode(_y(r)):r)),this.updatePanelValue(),this.setPlaceHolder(),this.notify(hN,{module:"XhtmlValidation",newProp:e,oldProp:t}),this.enableXhtml&&this.setProperties({value:this.getXhtml()},!0),this.showCharCount&&this.countModule.refresh();break}case"valueTemplate":this.setValue(),this.showCharCount&&this.countModule.refresh();break;case"width":this.setWidth(e[i]),this.toolbarSettings.enable&&!this.inlineMode.enable&&(this.toolbarModule.refreshToolbarOverflow(),this.resizeHandler());break;case"height":this.setHeight(e[i]),this.setContentHeight(),this.autoResize();break;case"readonly":this.setReadOnly(!1);break;case"cssClass":this.element.classList.remove(t[i]),this.setCssClass(e[i]);break;case"enabled":this.setEnable();break;case"enableRtl":this.updateRTL();break;case"placeholder":this.placeholder=e[i],this.setPlaceHolder();break;case"htmlAttributes":VQ(this.htmlAttributes,this,!1,!1);break;case"iframeSettings":{const s=t[i];if(s.resources){const o=this.contentModule.getDocument().querySelector("head");let a;s.resources.scripts&&(a=o.querySelectorAll("."+lme),this.removeSheets(a)),s.resources.styles&&(a=o.querySelectorAll("."+hme),this.removeSheets(a))}this.setIframeSettings();break}case"locale":super.refresh();break;case"inlineMode":this.notify(Ul,{module:"quickToolbar",newProp:e,oldProp:t}),this.setContentHeight();break;case"toolbarSettings":this.notify(Ul,{module:"toolbar",newProp:e,oldProp:t}),this.setContentHeight();break;case"maxLength":this.showCharCount&&this.countModule.refresh();break;case"showCharCount":e[i]&&this.countModule?this.countModule.renderCount():!1===e[i]&&this.countModule&&this.countModule.destroy();break;case"enableHtmlEncode":this.updateValueData(),this.updatePanelValue(),this.setPlaceHolder(),this.showCharCount&&this.countModule.refresh();break;case"undoRedoSteps":case"undoRedoTimer":this.formatter.editorManager.observer.notify(OQ,{newProp:e,oldProp:t});break;case"enableXhtml":this.notify(hN,{module:"XhtmlValidation",newProp:e,oldProp:t});break;case"quickToolbarSettings":e.quickToolbarSettings.showOnRightClick?this.wireContextEvent():this.unWireContextEvent(),this.notify(Ul,{newProp:e,oldProp:t});break;default:this.notify(Ul,{newProp:e,oldProp:t})}}updateValueData(){this.enableHtmlEncode?this.setProperties({value:this.encode(_y(this.inputElement.innerHTML))},!0):this.setProperties({value:/<[a-z][\s\S]*>/i.test(this.inputElement.innerHTML)?this.inputElement.innerHTML:_y(this.inputElement.innerHTML)})}removeSheets(e){let t;for(t=0;t<e.length;t++)te(e[t])}updatePanelValue(){let e=this.value;e=this.enableHtmlEncode&&this.value?_y(e):e;const t=this.element.querySelector(".e-rte-srctextarea");e?(t&&"block"===t.style.display&&(t.value=this.value),this.valueContainer&&(this.valueContainer.value=this.enableHtmlEncode?this.value:e),"HTML"===this.editorMode&&this.inputElement&&this.inputElement.innerHTML.trim()!==e.trim()?this.inputElement.innerHTML=e:"Markdown"===this.editorMode&&this.inputElement&&this.inputElement.value.trim()!==e.trim()&&(this.inputElement.value=e)):(t&&"block"===t.style.display&&(t.value=""),"HTML"===this.editorMode?"DIV"===this.enterKey?this.inputElement.innerHTML="<div><br/></div>":"BR"===this.enterKey?this.inputElement.innerHTML="<br/>":(this.inputElement.innerHTML="<p><br/></p>",""===e&&this.formatter&&this.inputElement&&this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),this.inputElement.firstElementChild,this.inputElement.firstElementChild.childElementCount)):this.inputElement.value="",this.valueContainer&&(this.valueContainer.value="")),this.showCharCount&&this.countModule.refresh()}setHeight(e){this.element.style.height="auto"!==e?st(e):"auto","Expand"===this.toolbarSettings.type&&("string"==typeof this.height&&this.height.indexOf("px")>-1||"number"==typeof this.height)?this.element.classList.add(Rme):this.element.classList.remove(Rme)}setPlaceHolder(){this.inputElement&&this.placeholder&&!0!==this.iframeSettings.enable&&("Markdown"!==this.editorMode?(this.placeHolderWrapper||(this.placeHolderWrapper=this.createElement("span",{className:"rte-placeholder e-rte-placeholder"}),this.inputElement&&this.inputElement.parentElement.insertBefore(this.placeHolderWrapper,this.inputElement),Rt(this.placeHolderWrapper,{style:"font-size: 14px; margin-left: 0px; margin-right: 0px;"})),this.placeHolderWrapper.innerHTML=this.placeholder,this.placeHolderWrapper.style.display=0!==this.inputElement.textContent.length||f(this.inputElement.firstChild)||"BR"!==this.inputElement.firstChild.nodeName&&("P"!==this.inputElement.firstChild.nodeName&&"DIV"!==this.inputElement.firstChild.nodeName||f(this.inputElement.firstChild.firstChild)||"BR"!==this.inputElement.firstChild.firstChild.nodeName)?"none":"block"):this.inputElement.setAttribute("placeholder",this.placeholder))}setWidth(e){"auto"!==e?ht(this.element,{width:st(this.width)}):this.element.style.width="auto"}setCssClass(e){if(!f(e)){const t=e.split(" ");for(let i=0;i<t.length;i++)""!==t[i].trim()&&this.element.classList.add(t[i])}}updateRTL(){this.notify(qC,{enableRtl:this.enableRtl}),this.enableRtl?this.element.classList.add(uQ):this.element.classList.remove(uQ)}updateReadOnly(){this.notify(lN,{editPanel:this.inputElement,mode:this.readonly})}setReadOnly(e){this.updateReadOnly(),e||(this.readonly&&this.enabled?this.unbindEvents():this.enabled&&this.bindEvents())}print(){let e;this.trigger(Hp,{element:this.inputElement,requestType:"print",cancel:!1},i=>{e=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth),"msie"===q.info.name&&e.resizeTo(screen.availWidth,screen.availHeight),e=_oe(this.inputElement,e),i.cancel||this.trigger(Ag,{requestType:"print"})})}refreshUI(){this.renderModule.refresh()}showFullScreen(){this.fullScreenModule.showFullScreen()}enableToolbarItem(e,t){this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(),e,!0,t)}disableToolbarItem(e,t){this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(),e,!1,t)}removeToolbarItem(e){this.toolbarModule.removeTBarItems(e)}getRange(){return this.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument())}initializeServices(){this.serviceLocator.register("rendererFactory",new Vme),this.serviceLocator.register("rteLocale",this.localeObj=new jo(this.getModuleName(),a2e,this.locale)),this.serviceLocator.register("dialogRenderObject",new _He(this))}RTERender(){const e=this.serviceLocator.getService("rendererFactory");this.contentModule=e.getRenderer(Gs.Content),this.fullScreenModule=new vHe(this),this.enterKeyModule=new THe(this),this.renderModule.render(),this.inputElement=this.contentModule.getEditPanel(),this.setHeight(this.height),VQ(this.htmlAttributes,this,!1,!0),this.iframeSettings&&this.setIframeSettings(),this.setCssClass(this.cssClass),this.updateEnable(),this.setPlaceHolder(),this.updateRTL(),this.updateReadOnly(),this.updatePanelValue(),this.enableHtmlEncode&&!f(this.value)&&this.setProperties({value:this.encode(_y(this.value))})}setIframeSettings(){if(this.iframeSettings.resources){const e=this.iframeSettings.resources.styles,t=this.iframeSettings.resources.scripts;this.iframeSettings.resources.scripts.length>0&&this.InjectSheet(!0,t),this.iframeSettings.resources.styles.length>0&&this.InjectSheet(!1,e)}this.iframeSettings.attributes&&VQ(this.iframeSettings.attributes,this,!0,!1)}InjectSheet(e,t){try{if(t&&t.length>0){const s=this.contentModule.getDocument().querySelector("head");for(let r=0;r<t.length;r++)if(e){const o=this.createScriptElement();o.src=t[r],s.appendChild(o)}else{const o=this.createStyleElement();o.href=t[r],s.appendChild(o)}}}catch(i){return}}createScriptElement(){const e=this.createElement("script",{className:lme});return e.type="text/javascript",e}createStyleElement(){const e=this.createElement("link",{className:hme});return e.rel="stylesheet",e}setValue(){if(this.valueTemplate)if(new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i).test(this.valueTemplate))this.setProperties({value:this.valueTemplate});else{const t=ji(this.valueTemplate)("",this,"valueTemplate");for(let i=0;i<t.length;i++)mi([t[i]],this.element);this.setProperties({value:this.element.innerHTML.trim()})}else{const e=!f(this.element.innerHTML)&&this.element.innerHTML.replace(/<(\/?|\!?)(!--!--)>/g,"").trim();""!==e&&this.setProperties("TEXTAREA"===this.element.tagName?{value:_y(e)}:{value:e})}}updateResizeFlag(){this.isResizeInitialized=!0}getInsertImgMaxWidth(){const e=this.insertImageSettings.maxWidth,s=this.contentModule.getEditPanel(),r=window.getComputedStyle(s),o=s.offsetWidth-(14+parseFloat(r.paddingLeft.split("px")[0])+parseFloat(r.paddingRight.split("px")[0])+parseFloat(r.marginLeft.split("px")[0])+parseFloat(r.marginRight.split("px")[0]));return f(e)?o:e}setContentHeight(e,t){let i,r,s=0;const o="string"==typeof this.height&&this.height.indexOf("%")>-1,a=this.sourceCodeModule.getPanel()&&"block"===this.sourceCodeModule.getPanel().parentElement.style.display?this.sourceCodeModule.getPanel().parentElement:this.contentModule.getPanel();let l=this.element.offsetHeight;0===l&&"auto"!==this.height&&!this.getToolbar()&&(l=parseInt(this.height,10),o&&(r=this.height));const h=this.getToolbar()?this.toolbarModule.getToolbarHeight():0,c=this.element.querySelector(".e-resize-handle"),m=this.enableResize?f(c)?0:c.offsetHeight+8:0,b=this.getToolbar()?this.toolbarModule.getExpandTBarPopHeight():0;if(this.toolbarSettings.type===fd.Expand&&t&&"preview"!==e?(i="auto"===this.height&&0===m?"auto":l-(h+b+m)+"px",s=this.toolbarSettings.enableFloating?0:b):i="auto"!==this.height||this.element.classList.contains("e-rte-full-screen")||this.isResizeInitialized?o&&r?r:l-(h+m)+"px":"auto","windowResize"!==e&&(this.iframeSettings.enable?"auto"!==i&&ht(a,{height:i,marginTop:s+"px"}):ht(a,{height:i,marginTop:s+"px"})),this.iframeSettings.enable&&"sourceCode"===e&&ht(X(".e-rte-content",this.element),{height:i,marginTop:s+"px"}),this.toolbarSettings.enableFloating&&this.getToolbar()&&!this.inlineMode.enable){const v=(t?h+b:h)+"px";ht(this.getToolbar().parentElement,{height:v})}0===m&&this.autoResize()}getHtml(){return this.serializeValue(this.contentModule.getEditPanel().innerHTML)}getXhtml(){let e=this.value;return!f(e)&&this.enableXhtml&&(e=this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e)),e}showSourceCode(){this.readonly||this.notify(G1,{})}getCharCount(){const e="Markdown"===this.editorMode?this.inputElement.value.trim():this.inputElement.textContent.trim();let t;return t="Markdown"!==this.editorMode&&-1!==e.indexOf("\u200b")?e.replace(/\u200B/g,"").length:e.length,t}showDialog(e){e===WC.InsertLink?this.notify(oQ,{}):e===WC.InsertImage?this.notify(lQ,{}):e===WC.InsertTable&&this.notify("showTableDialog",{})}closeDialog(e){e===WC.InsertLink?this.notify(aQ,{}):e===WC.InsertImage?this.notify(hQ,{}):e===WC.InsertTable&&this.notify("closeTableDialog",{})}getBaseToolbarObject(){let e;return e=!this.inlineMode.enable||q.isDevice&&!pa()?this.toolbarModule&&this.toolbarModule.getBaseToolbar():this.quickToolbarModule&&this.quickToolbarModule.getInlineBaseToolbar(),e}getToolbar(){return this.toolbarModule?this.toolbarModule.getToolbarElement():null}getToolbarElement(){return this.toolbarModule&&this.toolbarModule.getToolbarElement()}getID(){return"TEXTAREA"===this.originalElement.tagName?this.valueContainer.id:this.element.id}mouseDownHandler(e){const t=e.touches?e.changedTouches[0]:e;z([this.element],[CQ]),this.preventDefaultResize(e),this.notify(Yf,{args:e}),this.clickPoints={clientX:t.clientX,clientY:t.clientY}}preventImgResize(e){"img"===e.target.nodeName.toLocaleLowerCase()&&e.preventDefault()}preventDefaultResize(e){"msie"===q.info.name?this.contentModule.getEditPanel().addEventListener("mscontrolselect",this.preventImgResize):"mozilla"===q.info.name&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!1,"false"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!1,"false"))}defaultResize(e){"msie"===q.info.name?this.contentModule.getEditPanel().removeEventListener("mscontrolselect",this.preventImgResize):"mozilla"===q.info.name&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!0,"true"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!0,"true"))}resizeHandler(){let e=!1;document.body.contains(this.element)?(this.toolbarSettings.enable&&!this.inlineMode.enable&&(this.toolbarModule.refreshToolbarOverflow(),e=this.toolbarModule.baseToolbar.toolbarObj.element.classList.contains(iI)),this.setContentHeight("windowResize",e),this.notify(FX,null)):document.defaultView.removeEventListener("resize",this.onResizeHandler,!0)}scrollHandler(e){this.notify(J_,{args:e})}contentScrollHandler(e){this.notify("contentscroll",{args:e})}focusHandler(e){if(!this.isRTE||this.isFocusOut){this.isRTE=!this.isFocusOut,this.isFocusOut=!1,z([this.element],[CQ]),this.cloneValue="HTML"===this.editorMode?"<p><br></p>"===this.inputElement.innerHTML||"<div><br></div>"===this.inputElement.innerHTML||"<br>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(_y(this.inputElement.innerHTML)):this.inputElement.innerHTML:""===this.inputElement.value?null:this.inputElement.value;const t=document.activeElement;if((t===this.element||t===this.getToolbarElement()||t===this.contentModule.getEditPanel()||this.iframeSettings.enable&&t===this.contentModule.getPanel()&&e.target&&!e.target.classList.contains("e-img-inner")&&e.target&&e.target.parentElement&&!e.target.parentElement.classList.contains("e-img-wrap")||B(t,".e-rte-toolbar")===this.getToolbarElement())&&(this.contentModule.getEditPanel().focus(),!f(this.getToolbarElement()))){this.getToolbarElement().setAttribute("tabindex","-1");const i=this.getToolbarElement().querySelectorAll('[tabindex="0"]');for(let s=0;s<i.length;s++)i[s].setAttribute("tabindex","-1")}this.preventDefaultResize(e),this.trigger("focus",{event:e,isInteracted:0!==Object.keys(e).length}),!f(this.saveInterval)&&this.saveInterval>0&&!this.autoSaveOnIdle&&(this.timeInterval=setInterval(this.updateValueOnIdle.bind(this),this.saveInterval)),k.add(document,"mousedown",this.onDocumentClick,this)}if(!f(this.getToolbarElement())){const t=this.getToolbarElement().querySelectorAll("input,select,button,a,[tabindex]");for(let i=0;i<t.length;i++)!t[i].classList.contains("e-rte-dropdown-btn")&&!t[i].classList.contains("e-insert-table-btn")&&(!t[i].hasAttribute("tabindex")||"-1"!==t[i].getAttribute("tabindex"))&&t[i].setAttribute("tabindex","-1")}}getUpdatedValue(){let e;f(this.tableModule)||this.tableModule.removeResizeElement();const t=this.element.querySelector(".e-rte-srctextarea");return"HTML"===this.editorMode?(e="<p><br></p>"===this.inputElement.innerHTML||"<div><br></div>"===this.inputElement.innerHTML||"<br>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(_y(this.inputElement.innerHTML)):this.inputElement.innerHTML,t&&"block"===t.style.display&&(e=t.value)):e=""===this.inputElement.value?null:this.inputElement.value,e}updateValueOnIdle(){!f(this.tableModule)&&!f(this.inputElement.querySelector(".e-table-box.e-rbox-select"))||(this.setProperties({value:this.getUpdatedValue()},!0),this.valueContainer.value=this.value,this.invokeChangeEvent())}updateIntervalValue(){clearTimeout(this.idleInterval),this.idleInterval=setTimeout(this.updateValueOnIdle.bind(this),0)}updateStatus(e){if(!f(e.html)||!f(e.markdown)){const t=this.formatter.editorManager.undoRedoManager.getUndoStatus();this.trigger("updatedToolbarStatus",{undo:t.undo,redo:t.redo,html:e.html,markdown:e.markdown})}}onDocumentClick(e){const t=e.target,i=B(t,"."+ame);!this.element.contains(e.target)&&document!==e.target&&i!==this.element&&!B(t,'[aria-owns="'+this.getID()+'"]')&&(this.isBlur=!0,this.isRTE=!1),this.notify("docClick",{args:e}),"msie"!==q.info.name&&e.detail>3&&e.preventDefault()}blurHandler(e){let t=e.relatedTarget;if(t){const i=B(t,"."+ame);i&&i===this.element?(this.isBlur=!1,t===this.getToolbarElement()&&t.setAttribute("tabindex","-1")):B(t,'[aria-owns="'+this.getID()+'"]')?this.isBlur=!1:(this.isBlur=!0,t=null)}if(this.isBlur&&f(t)){W([this.element],[CQ]),this.notify(rN,{});const i=this.getUpdatedValue();this.setProperties({value:i}),this.notify(UC,{args:e,documentNode:document}),this.invokeChangeEvent(),this.isFocusOut=!0,this.isBlur=!1,J1(this.valueContainer,"focusout"),this.defaultResize(e),this.trigger("blur",{event:e,isInteracted:0!==Object.keys(e).length}),f(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),k.remove(document,"mousedown",this.onDocumentClick)}else this.isRTE=!0}contentChanged(){this.autoSaveOnIdle&&(f(this.saveInterval)||(clearTimeout(this.timeInterval),this.timeInterval=setTimeout(this.updateIntervalValue.bind(this),this.saveInterval)))}invokeChangeEvent(){let e;e=this.enableXhtml?this.getXhtml():this.value,this.value!==this.cloneValue&&(this.trigger("change",{value:e}),this.cloneValue=this.value)}wireScrollElementsEvents(){this.scrollParentElements=gk(this.element);for(const e of this.scrollParentElements)k.add(e,"scroll",this.scrollHandler,this);this.iframeSettings.enable||k.add(this.contentModule.getPanel(),"scroll",this.contentScrollHandler,this)}wireContextEvent(){this.quickToolbarSettings.showOnRightClick&&(k.add(this.inputElement,"contextmenu",this.contextHandler,this),q.isDevice&&(this.touchModule=new Lr(this.inputElement,{tapHold:this.touchHandler.bind(this),tapHoldThreshold:500})))}unWireContextEvent(){k.remove(this.inputElement,"contextmenu",this.contextHandler),q.isDevice&&this.touchModule&&this.touchModule.destroy()}unWireScrollElementsEvents(){this.scrollParentElements=gk(this.element);for(const e of this.scrollParentElements)k.remove(e,"scroll",this.scrollHandler);this.iframeSettings.enable||k.remove(this.contentModule.getPanel(),"scroll",this.contentScrollHandler)}touchHandler(e){this.notifyMouseUp(e.originalEvent),this.triggerEditArea(e.originalEvent)}contextHandler(e){const t=B(e.target,"a, table, img");(!1===this.inlineMode.onSelection||!f(t)&&this.inputElement.contains(t)&&("IMG"===t.tagName||"TABLE"===t.tagName||"A"===t.tagName))&&e.preventDefault()}resetHandler(){const e=this.valueContainer.defaultValue.trim();this.setProperties({value:""===e?null:e})}autoResize(){if("auto"===this.height){if("Markdown"===this.editorMode)setTimeout(()=>{this.setAutoHeight(this.inputElement)},0);else if(this.iframeSettings.enable){const e=this.element.querySelector("#"+this.getID()+"_rte-view");setTimeout(()=>{this.setAutoHeight(e)},100),this.inputElement.style.overflow="hidden"}}else this.inputElement.style.overflow=null}setAutoHeight(e){f(e)||(e.style.height="",e.style.height=this.inputElement.scrollHeight+"px",e.style.overflow="hidden")}wireEvents(){this.element.addEventListener("focusin",this.onFocusHandler,!0),this.element.addEventListener("focusout",this.onBlurHandler,!0),this.on(KF,this.contentChanged,this),this.on(rQ,this.updateResizeFlag,this),this.on(x6,this.updateStatus,this),(!this.readonly||!this.enabled)&&this.bindEvents()}restrict(e){if(this.maxLength>=0){const t="Markdown"===this.editorMode?this.contentModule.getText():e.currentTarget.textContent,i=[8,16,17,37,38,39,40,46,65];let s;for(let r=0;r<=i.length-1;r++)if(e.which===i[r]){if(e.ctrlKey&&65===e.which)return;if(65!==e.which)return void(s=i[r])}t.length>=this.maxLength&&-1!==this.maxLength&&e.which!==s&&e.preventDefault()}}bindEvents(){this.keyboardModule=new GC(this.inputElement,{keyAction:this.keyDown.bind(this),keyConfigs:Object.assign({},this.formatter.keyConfig,this.keyConfig),eventName:"keydown"});const e=B(this.valueContainer,"form");e&&k.add(e,"reset",this.resetHandler,this),k.add(this.inputElement,"keyup",this.keyUp,this),k.add(this.inputElement,"paste",this.onPaste,this),k.add(this.inputElement,q.touchEndEvent,Jv(this.mouseUp,30),this),k.add(this.inputElement,q.touchStartEvent,this.mouseDownHandler,this),this.wireContextEvent(),this.formatter.editorManager.observer.on(dl,this.editorKeyDown,this),this.element.ownerDocument.defaultView.addEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(k.add(this.inputElement,"focusin",this.focusHandler,this),k.add(this.inputElement,"focusout",this.blurHandler,this),k.add(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler,this),k.add(this.inputElement.ownerDocument,q.touchStartEvent,this.onIframeMouseDown,this)),this.wireScrollElementsEvents()}onIframeMouseDown(e){this.isBlur=!1,this.notify(jC,e)}editorKeyDown(e){switch(e.event.action){case"copy":this.onCopy();break;case"cut":this.onCut()}e.callBack&&("copy"===e.event.action||"cut"===e.event.action||"delete"===e.event.action)&&e.callBack({requestType:e.event.action,editorMode:"HTML",event:e.event})}unWireEvents(){this.element.removeEventListener("focusin",this.onFocusHandler,!0),this.element.removeEventListener("focusout",this.onBlurHandler,!0),this.off(KF,this.contentChanged),this.off(rQ,this.updateResizeFlag),this.off(x6,this.updateStatus),(!this.readonly||!this.enabled)&&this.unbindEvents()}unbindEvents(){this.keyboardModule&&this.keyboardModule.destroy();const e=B(this.valueContainer,"form");e&&k.remove(e,"reset",this.resetHandler),k.remove(this.inputElement,"keyup",this.keyUp),k.remove(this.inputElement,"paste",this.onPaste),k.remove(this.inputElement,q.touchEndEvent,Jv(this.mouseUp,30)),k.remove(this.inputElement,q.touchStartEvent,this.mouseDownHandler),this.unWireContextEvent(),this.formatter&&this.formatter.editorManager.observer.off(dl,this.editorKeyDown),this.element.ownerDocument.defaultView.removeEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(k.remove(this.inputElement,"focusin",this.focusHandler),k.remove(this.inputElement,"focusout",this.blurHandler),k.remove(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler),k.remove(this.inputElement.ownerDocument,q.touchStartEvent,this.onIframeMouseDown)),this.unWireScrollElementsEvents()}};Ci([di({},sR)],ui.prototype,"toolbarSettings",void 0),Ci([di({},OS)],ui.prototype,"quickToolbarSettings",void 0),Ci([di({},rI)],ui.prototype,"pasteCleanupSettings",void 0),Ci([di({},X6)],ui.prototype,"iframeSettings",void 0),Ci([di({},eu)],ui.prototype,"insertImageSettings",void 0),Ci([di({},nR)],ui.prototype,"tableSettings",void 0),Ci([_(0)],ui.prototype,"floatingToolbarOffset",void 0),Ci([di({},jQ)],ui.prototype,"inlineMode",void 0),Ci([di({},Yh)],ui.prototype,"fileManagerSettings",void 0),Ci([_("100%")],ui.prototype,"width",void 0),Ci([_(!1)],ui.prototype,"enablePersistence",void 0),Ci([_(!1)],ui.prototype,"enableResize",void 0),Ci([_({})],ui.prototype,"htmlAttributes",void 0),Ci([_(null)],ui.prototype,"placeholder",void 0),Ci([_(!1)],ui.prototype,"autoSaveOnIdle",void 0),Ci([_(!1)],ui.prototype,"readonly",void 0),Ci([_(!0)],ui.prototype,"enabled",void 0),Ci([_(!0)],ui.prototype,"enableHtmlSanitizer",void 0),Ci([_(!1)],ui.prototype,"enableHtmlEncode",void 0),Ci([_(!1)],ui.prototype,"enableXhtml",void 0),Ci([_("auto")],ui.prototype,"height",void 0),Ci([_(null)],ui.prototype,"cssClass",void 0),Ci([_(null)],ui.prototype,"value",void 0),Ci([_("P")],ui.prototype,"enterKey",void 0),Ci([_("BR")],ui.prototype,"shiftEnterKey",void 0),Ci([_(30)],ui.prototype,"undoRedoSteps",void 0),Ci([_(300)],ui.prototype,"undoRedoTimer",void 0),Ci([_("HTML")],ui.prototype,"editorMode",void 0),Ci([_(null)],ui.prototype,"keyConfig",void 0),Ci([_(!1)],ui.prototype,"showCharCount",void 0),Ci([_(!1)],ui.prototype,"enableTabKey",void 0),Ci([_(!1)],ui.prototype,"enableAutoUrl",void 0),Ci([_(-1)],ui.prototype,"maxLength",void 0),Ci([di({},Z6)],ui.prototype,"format",void 0),Ci([di({},Ege)],ui.prototype,"numberFormatList",void 0),Ci([di({},_ge)],ui.prototype,"bulletFormatList",void 0),Ci([di({},K6)],ui.prototype,"fontFamily",void 0),Ci([di({},Y6)],ui.prototype,"fontSize",void 0),Ci([di({},rR)],ui.prototype,"fontColor",void 0),Ci([di({},oR)],ui.prototype,"backgroundColor",void 0),Ci([_(null)],ui.prototype,"valueTemplate",void 0),Ci([_(1e4)],ui.prototype,"saveInterval",void 0),Ci([G()],ui.prototype,"actionBegin",void 0),Ci([G()],ui.prototype,"actionComplete",void 0),Ci([G()],ui.prototype,"beforeDialogOpen",void 0),Ci([G()],ui.prototype,"dialogOpen",void 0),Ci([G()],ui.prototype,"beforeDialogClose",void 0),Ci([G()],ui.prototype,"dialogClose",void 0),Ci([G()],ui.prototype,"beforeQuickToolbarOpen",void 0),Ci([G()],ui.prototype,"quickToolbarOpen",void 0),Ci([G()],ui.prototype,"quickToolbarClose",void 0),Ci([G()],ui.prototype,"toolbarStatusUpdate",void 0),Ci([G()],ui.prototype,"updatedToolbarStatus",void 0),Ci([G()],ui.prototype,"imageSelected",void 0),Ci([G()],ui.prototype,"beforeImageUpload",void 0),Ci([G()],ui.prototype,"imageUploading",void 0),Ci([G()],ui.prototype,"imageUploadSuccess",void 0),Ci([G()],ui.prototype,"imageUploadFailed",void 0),Ci([G()],ui.prototype,"imageRemoving",void 0),Ci([G()],ui.prototype,"afterImageDelete",void 0),Ci([G()],ui.prototype,"created",void 0),Ci([G()],ui.prototype,"destroyed",void 0),Ci([G()],ui.prototype,"beforeSanitizeHtml",void 0),Ci([G()],ui.prototype,"blur",void 0),Ci([G()],ui.prototype,"toolbarClick",void 0),Ci([G()],ui.prototype,"focus",void 0),Ci([G()],ui.prototype,"change",void 0),Ci([G()],ui.prototype,"resizing",void 0),Ci([G()],ui.prototype,"resizeStart",void 0),Ci([G()],ui.prototype,"resizeStop",void 0),Ci([G()],ui.prototype,"beforePasteCleanup",void 0),Ci([G()],ui.prototype,"afterPasteCleanup",void 0),Ci([G()],ui.prototype,"beforeImageDrop",void 0),Ci([_(null)],ui.prototype,"formatter",void 0),ui=Ci([as],ui);const DHe=["valueTemplate"];var Tge=function(n,e,t,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Dge=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};const kHe=["actionBegin","actionComplete","afterImageDelete","afterPasteCleanup","beforeDialogClose","beforeDialogOpen","beforeImageDrop","beforeImageUpload","beforePasteCleanup","beforeQuickToolbarOpen","beforeSanitizeHtml","blur","change","created","destroyed","dialogClose","dialogOpen","focus","imageRemoving","imageSelected","imageUploadFailed","imageUploadSuccess","imageUploading","quickToolbarClose","quickToolbarOpen","resizeStart","resizeStop","resizing","toolbarClick","toolbarStatusUpdate","updatedToolbarStatus","valueChange"],RHe=["value"];let Ay=UQ=class extends ui{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let r=this.injector.get("RichTextEditorToolbar");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("RichTextEditorLink");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("RichTextEditorImage");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("RichTextEditorCount");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("RichTextEditorQuickToolbar");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("RichTextEditorHtmlEditor");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("RichTextEditorMarkdownEditor");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("RichTextEditorTable");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("RichTextEditorPasteCleanup");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("RichTextEditorResize");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}try{let r=this.injector.get("RichTextEditorFileManager");-1===this.injectedModules.indexOf(r)&&this.injectedModules.push(r)}catch(r){}this.registerEvents(kHe),this.addTwoWay.call(this,RHe),function FDe(n,e,t){for(var i=n.replace(/\[/g,".").replace(/\]/g,"").split("."),s=t||{},r=0;r<i.length;r++){var o=i[r];r+1===i.length?s[o]=void 0===e?{}:e:void 0===s[o]&&(s[o]={}),s=s[o]}}("currentInstance",this,this.viewContainerRef),this.formContext=new cae,this.formCompContext=new hae}registerOnChange(e){}registerOnTouched(e){}writeValue(e){}setDisabledState(e){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var UQ;Ay.\u0275fac=function(e){return new(e||Ay)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.s_b),d.Y36(d.zs3))},Ay.\u0275cmp=d.Xpm({type:Ay,selectors:[["ejs-richtexteditor"]],contentQueries:function(e,t,i){if(1&e&&d.Suo(i,DHe,5),2&e){let s;d.iGM(s=d.CRH())&&(t.valueTemplate=s.first)}},inputs:{autoSaveOnIdle:"autoSaveOnIdle",backgroundColor:"backgroundColor",bulletFormatList:"bulletFormatList",cssClass:"cssClass",editorMode:"editorMode",enableAutoUrl:"enableAutoUrl",enableHtmlEncode:"enableHtmlEncode",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableResize:"enableResize",enableRtl:"enableRtl",enableTabKey:"enableTabKey",enableXhtml:"enableXhtml",enabled:"enabled",enterKey:"enterKey",fileManagerSettings:"fileManagerSettings",floatingToolbarOffset:"floatingToolbarOffset",fontColor:"fontColor",fontFamily:"fontFamily",fontSize:"fontSize",format:"format",formatter:"formatter",height:"height",htmlAttributes:"htmlAttributes",iframeSettings:"iframeSettings",inlineMode:"inlineMode",insertImageSettings:"insertImageSettings",keyConfig:"keyConfig",locale:"locale",maxLength:"maxLength",numberFormatList:"numberFormatList",pasteCleanupSettings:"pasteCleanupSettings",placeholder:"placeholder",quickToolbarSettings:"quickToolbarSettings",readonly:"readonly",saveInterval:"saveInterval",shiftEnterKey:"shiftEnterKey",showCharCount:"showCharCount",tableSettings:"tableSettings",toolbarSettings:"toolbarSettings",undoRedoSteps:"undoRedoSteps",undoRedoTimer:"undoRedoTimer",value:"value",valueTemplate:"valueTemplate",width:"width"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",afterImageDelete:"afterImageDelete",afterPasteCleanup:"afterPasteCleanup",beforeDialogClose:"beforeDialogClose",beforeDialogOpen:"beforeDialogOpen",beforeImageDrop:"beforeImageDrop",beforeImageUpload:"beforeImageUpload",beforePasteCleanup:"beforePasteCleanup",beforeQuickToolbarOpen:"beforeQuickToolbarOpen",beforeSanitizeHtml:"beforeSanitizeHtml",blur:"blur",change:"change",created:"created",destroyed:"destroyed",dialogClose:"dialogClose",dialogOpen:"dialogOpen",focus:"focus",imageRemoving:"imageRemoving",imageSelected:"imageSelected",imageUploadFailed:"imageUploadFailed",imageUploadSuccess:"imageUploadSuccess",imageUploading:"imageUploading",quickToolbarClose:"quickToolbarClose",quickToolbarOpen:"quickToolbarOpen",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",toolbarClick:"toolbarClick",toolbarStatusUpdate:"toolbarStatusUpdate",updatedToolbarStatus:"updatedToolbarStatus",valueChange:"valueChange"},features:[d._Bn([{provide:ku,useExisting:(0,d.Gpc)(()=>UQ),multi:!0}]),d.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),Ay.ctorParameters=()=>[{type:d.SBq},{type:d.Qsj},{type:d.s_b},{type:d.zs3}],Ay.propDecorators={valueTemplate:[{type:d.aQ5,args:["valueTemplate"]}]},Tge([function VDe(n){return function(e,t){var i={set:zDe(t),get:jDe(t,n),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i)}}(),Dge("design:type",Object)],Ay.prototype,"valueTemplate",void 0),Ay=UQ=Tge([function PDe(n){return function(e){!function ODe(n,e){e.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(i){(!n.prototype.hasOwnProperty(i)||t.isFormBase)&&(n.prototype[i]=t.prototype[i])})})}(e,n)}}([hae,cae]),Dge("design:paramtypes",[d.SBq,d.Qsj,d.s_b,d.zs3])],Ay);let qQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Lo]]}),n})();const kge={provide:"RichTextEditorToolbar",useValue:class v2e{constructor(e,t){this.parent=e,this.isToolbar=!1,this.locator=t,this.isTransformChild=!1,this.renderFactory=this.locator.getService("rendererFactory"),function o2e(n){vN.forEach((e,t)=>{vN[t].text=Q1(n,KBe,vN[t])}),A6.forEach((e,t)=>{A6[t].text=Q1(n,ZBe,A6[t])}),L6.forEach((e,t)=>{L6[t].text=Q1(n,QBe,L6[t])}),M6.forEach((e,t)=>{M6[t].text=Q1(n,JBe,M6[t])}),O6.forEach((e,t)=>{O6[t].text=Q1(n,e2e,O6[t])}),P6.forEach((e,t)=>{P6[t].text=Q1(n,t2e,P6[t])})}(this.parent),Fme(this.parent),this.renderFactory.addRenderer(Gs.Toolbar,new b2e(this.parent)),this.toolbarRenderer=this.renderFactory.getRenderer(Gs.Toolbar),this.baseToolbar=new Nme(this.parent,this.locator),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?Ae(this.tools,X1,RQ(this.parent.toolbarSettings.itemConfigs),!0):this.tools=X1}initializeInstance(){this.contentRenderer=this.renderFactory.getRenderer(Gs.Content),this.editableElement=this.contentRenderer.getEditPanel(),this.editPanel=this.contentRenderer.getPanel()}toolbarBindEvent(){this.parent.inlineMode.enable||(this.keyBoardModule=new Gn(this.getToolbarElement(),{keyAction:this.toolBarKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}))}toolBarKeyDown(e){"escape"===e.action&&this.parent.contentModule.getEditPanel().focus()}createToolbarElement(){this.tbElement=this.parent.createElement("div",{id:this.parent.getID()+"_toolbar"}),(q.isDevice||!this.parent.inlineMode.enable||!pa())&&(this.parent.toolbarSettings.enableFloating&&!this.parent.inlineMode.enable?(this.tbWrapper=this.parent.createElement("div",{id:this.parent.getID()+"_toolbar_wrapper",innerHTML:this.tbElement.outerHTML,className:vQ}),this.tbElement=this.tbWrapper.firstElementChild,this.parent.element.insertBefore(this.tbWrapper,this.editPanel)):this.parent.element.insertBefore(this.tbElement,this.editPanel))}getToolbarMode(){let e;switch(this.parent.toolbarSettings.type){case fd.Expand:e="Extended";break;case fd.Scrollable:e="Scrollable";break;default:e="MultiRow"}return pa()&&this.parent.toolbarSettings.type===fd.Expand&&(e=fd.Scrollable),e}checkToolbarResponsive(e){if(!q.isDevice||pa())return!1;let t;return t=this.parent.toolbarSettings.type===fd.Expand?fd.MultiRow:this.parent.toolbarSettings.type,this.baseToolbar.render({container:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items,mode:t,target:e}),this.parent.toolbarSettings.type===fd.Expand&&(z([e],["e-rte-tb-mobile"]),this.parent.inlineMode.enable?this.addFixedTBarClass():z([e],["e-tb-static"])),this.wireEvents(),this.dropDownModule.renderDropDowns({container:e,containerType:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items}),this.parent.notify(m6,{container:this.tbElement,containerType:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items}),!0}checkIsTransformChild(){this.isTransformChild=!1;const e=bt('[style*="transform"]',document);for(let t=0;t<e.length;t++)if(!f(e[t].contains)&&e[t].contains(this.parent.element)){this.isTransformChild=!0;break}}toggleFloatClass(e){let t,r,i=!1,s=!1;const o=this.parent.floatingToolbarOffset;e&&this.parent.iframeSettings.enable&&this.parent.inputElement.ownerDocument===e.target?r=e.target.body:e&&e.target!==document?r=e.target:(i=!0,r=document.body);const a=this.getToolbarHeight()+this.getExpandTBarPopHeight();if(this.isTransformChild){t=0;let l=0;const h=this.parent.element.offsetHeight;if(i){const E=window.getComputedStyle(r);l=parseFloat(E.marginTop.split("px")[0])+parseFloat(E.paddingTop.split("px")[0])}const c=this.parent.element.getBoundingClientRect().top,m=q.isMSPointer&&i?window.pageYOffset:r.parentElement.scrollTop,b=r.getBoundingClientRect(),v=i?b.top+m:b.top,w=!(c-(i?0:v)+h>a+o);c>v+o||c<-h||c<0&&w?(s=!1,W([this.tbElement],[mQ])):c<v+o&&(t=c<0?-c+v:v-c,t=i?t-l:t,z([this.tbElement],[mQ]),s=!0)}else{const l=this.parent.element.getBoundingClientRect();if(window.innerHeight<l.top)return;t=e&&e.target!==document?r.getBoundingClientRect().top:0,l.bottom<o+a+t||l.bottom<0||l.top>o+t?s=!1:(l.top<o||l.top<o+t)&&(s=!0)}s?(z([this.tbElement],[fQ]),ht(this.tbElement,{width:this.parent.element.offsetWidth+"px",top:o+t+"px"})):(W([this.tbElement],[fQ]),ht(this.tbElement,{top:"0px",width:"100%"}))}renderToolbar(){if(this.initializeInstance(),this.createToolbarElement(),this.checkToolbarResponsive(this.tbElement))return;this.parent.inlineMode.enable?this.parent.notify("renderInlineToolbar",{}):(this.baseToolbar.render({container:"toolbar",items:this.parent.toolbarSettings.items,mode:this.getToolbarMode(),target:this.tbElement}),this.parent.inlineMode.enable||(this.parent.toolbarSettings.enableFloating&&(this.checkIsTransformChild(),this.toggleFloatClass()),z([this.parent.element],[Ame]),this.parent.toolbarSettings.type===fd.Expand&&z([this.parent.element],[dme]))),this.wireEvents(),this.parent.inlineMode.enable&&!pa()&&this.addFixedTBarClass(),this.parent.inlineMode.enable||(this.dropDownModule.renderDropDowns({container:this.tbElement,containerType:"toolbar",items:this.parent.toolbarSettings.items}),this.parent.notify(m6,{container:this.tbElement,containerType:"toolbar",items:this.parent.toolbarSettings.items}),this.refreshToolbarOverflow());const e=this.parent.element.querySelector(".e-rte-srctextarea"),t=this.parent.element.querySelector(".e-source-content");(!this.parent.iframeSettings.enable&&!f(e)&&"block"===e.style.display||this.parent.iframeSettings.enable&&!f(t)&&"block"===t.style.display)&&(this.parent.notify(XF,{targetItem:"SourceCode",updateItem:"Preview",baseToolbar:this.parent.getBaseToolbarObject()}),this.parent.disableToolbarItem(this.parent.toolbarSettings.items))}addFixedTBarClass(){z([this.tbElement],[cme])}removeFixedTBarClass(){W([this.tbElement],[cme])}showFixedTBar(){z([this.tbElement],["e-show"]),q.isIos&&z([this.tbElement],[wme])}hideFixedTBar(){this.isToolbar?this.isToolbar=!1:W([this.tbElement],["e-show",wme])}updateItem(e){const t=this.tools[e.updateItem.toLocaleLowerCase()],s=z6(V6(this.tools[e.targetItem.toLocaleLowerCase()].subCommand),e.baseToolbar.toolbarObj.items)[0];if(f(s))this.addTBarItem(e,0);else{const r=this.parent.inlineMode.enable?"_quick_":"_toolbar_";e.baseToolbar.toolbarObj.items[s].id=this.parent.getID()+r+t.id,e.baseToolbar.toolbarObj.items[s].prefixIcon=t.icon,e.baseToolbar.toolbarObj.items[s].tooltipText=t.tooltip,e.baseToolbar.toolbarObj.items[s].subCommand=t.subCommand,e.baseToolbar.toolbarObj.dataBind()}}updateToolbarStatus(e){this.tbElement&&(!this.parent.inlineMode.enable||!pa()&&q.isDevice)&&function Lme(n,e,t){Fme(t);const i=n.dropDownModule,s=n.args,r=Object.keys(n.args);for(const o of r)for(let a=0;a<n.tbItems.length;a++){const l=n.tbItems[a].subCommand,h=l&&l.toLocaleLowerCase();if(l&&h===o||"UL"===l&&"unorderedlist"===o||"OL"===l&&"orderedlist"===o||"pre"===h&&"insertcode"===o)if("boolean"==typeof s[o])!0===s[o]?z([n.tbElements[a]],[mN]):W([n.tbElements[a]],[mN]);else if(("string"==typeof s[o]||null===s[o])&&TQ(o,n.parent.toolbarSettings.items)>-1){const c=s[o]?s[o]:"";let m="";switch(o){case"formats":{if(f(i.formatDropDown)||e||!f(i.formatDropDown)&&i.formatDropDown.isDestroyed)break;const b=n.parent.format.types,v=f(n.parent.format.default)?b[0].text:n.parent.format.default;m=Ey(b,c,"subCommand","text"),i.formatDropDown.content='<span style="display: inline-flex;width:'+n.parent.format.width+'" ><span class="e-rte-dropdown-btn-text">'+(f(m)?v:m)+"</span></span>",i.formatDropDown.dataBind();break}case"alignments":if(f(i.alignDropDown)||!f(i.alignDropDown)&&i.alignDropDown.isDestroyed)break;m=Ey(vN,c,"subCommand","iconCss"),i.alignDropDown.iconCss=f(m)?"e-icons e-justify-left":m,i.alignDropDown.dataBind();break;case"fontname":{if(f(i.fontNameDropDown)||e||!f(i.fontNameDropDown)&&i.fontNameDropDown.isDestroyed)break;const b=n.parent.fontFamily.items;m=Ey(b,c,"value","text");const v=f(n.parent.fontFamily.default)?b[0].text:n.parent.fontFamily.default,w=f(m)?v:m;n.tbElements[a].title=w,i.fontNameDropDown.content='<span style="display: inline-flex;width:'+n.parent.fontFamily.width+'" ><span class="e-rte-dropdown-btn-text">'+w+"</span></span>",i.fontNameDropDown.dataBind();break}case"fontsize":{if(f(i.fontSizeDropDown)||!f(i.fontSizeDropDown)&&i.fontSizeDropDown.isDestroyed)break;const b=n.parent.fontSize.items,v=f(n.parent.fontSize.default)?b[1].text:n.parent.fontSize.default;m=Ey(b,""===c?v.replace(/\s/g,""):c,"value","text"),i.fontSizeDropDown.content='<span style="display: inline-flex;width:'+n.parent.fontSize.width+'" ><span class="e-rte-dropdown-btn-text">'+DQ(m)+"</span></span>",i.fontSizeDropDown.dataBind();break}}}}}({args:e,dropDownModule:this.dropDownModule,parent:this.parent,tbElements:bt("."+tI,this.tbElement),tbItems:this.baseToolbar.toolbarObj.items},!!this.parent.inlineMode.enable,this.parent)}fullScreen(e){this.parent.fullScreenModule.showFullScreen(e)}hideScreen(e){this.parent.fullScreenModule.hideFullScreen(e)}getBaseToolbar(){return this.baseToolbar}addTBarItem(e,t){e.baseToolbar.toolbarObj.addItems([e.baseToolbar.getObject(e.updateItem,"toolbar")],t)}enableTBarItems(e,t,i,s){const r=z6(V6(t),e.toolbarObj.items);this.tbItems=bt("."+tI,e.toolbarObj.element);for(let o=0;o<r.length;o++){const a=this.tbItems[r[o]];a&&e.toolbarObj.enableItems(a,i)}!X(".e-rte-srctextarea",this.parent.element)&&!s&&CN(e,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus())}removeTBarItems(e){f(this.baseToolbar.toolbarObj)&&(this.baseToolbar=this.parent.getBaseToolbarObject());const t=z6(V6(e),this.baseToolbar.toolbarObj.items);this.tbItems=bt("."+tI,this.parent.inlineMode.enable?this.baseToolbar.toolbarObj.element:this.parent.element);for(let i=0;i<t.length;i++)this.baseToolbar.toolbarObj.removeItems(this.tbItems[t[i]])}getExpandTBarPopHeight(){let e=0;if(this.parent.toolbarSettings.type===fd.Expand&&this.tbElement.classList.contains("e-extended-toolbar")){const t=X(".e-toolbar-extended",this.tbElement);t&&this.tbElement.classList.contains("e-expand-open")||t&&t.classList.contains("e-popup-open")?(z([t],["e-visible"]),e+=t.offsetHeight,W([t],["e-visible"])):W([this.tbElement],[iI])}return e}getToolbarHeight(){return this.tbElement.offsetHeight}getToolbarElement(){return X("."+E6,this.parent.element)}refreshToolbarOverflow(){this.baseToolbar.toolbarObj.refreshOverflow()}isToolbarDestroyed(){return this.baseToolbar.toolbarObj&&!this.baseToolbar.toolbarObj.isDestroyed}destroyToolbar(){if(this.isToolbarDestroyed()){this.parent.unWireScrollElementsEvents(),this.unWireEvents(),this.parent.notify(AX,{}),this.dropDownModule.destroyDropDowns(),this.baseToolbar.toolbarObj.destroy(),this.removeEventListener(),W([this.parent.element],[Ame]),W([this.parent.element],[dme]);const e=X("."+vQ,this.parent.element),t=X("."+E6,this.parent.element);f(e)?f(t)||te(t):te(e)}}destroy(){this.isToolbarDestroyed()&&(this.destroyToolbar(),this.keyBoardModule&&this.keyBoardModule.destroy())}scrollHandler(e){this.parent.inlineMode.enable||this.parent.toolbarSettings.enableFloating&&this.getDOMVisibility(this.tbElement)&&this.toggleFloatClass(e.args)}getDOMVisibility(e){return!(!e.offsetParent&&0===e.offsetWidth&&0===e.offsetHeight)}mouseDownHandler(){q.isDevice&&this.parent.inlineMode.enable&&!pa()&&this.showFixedTBar()}focusChangeHandler(){q.isDevice&&this.parent.inlineMode.enable&&!pa()&&(this.isToolbar=!1,this.hideFixedTBar())}dropDownBeforeOpenHandler(){this.isToolbar=!0}tbFocusHandler(e){const t=document.activeElement,i=B(t,".e-rte-toolbar");if(t===this.parent.getToolbarElement()||i===this.parent.getToolbarElement()){const s=this.parent.getToolbarElement().querySelectorAll(".e-expended-nav");for(let r=0;r<s.length;r++)f(this.parent.getToolbarElement().querySelector(".e-insert-table-btn"))?s[r].setAttribute("tabindex","0"):s[r].setAttribute("tabindex","1")}}tbKeydownHandler(e){(e.target.classList.contains("e-dropdown-btn")||e.target.getAttribute("id")===this.parent.getID()+"_toolbar_CreateTable")&&e.target.setAttribute("tabindex","0")}toolbarClickHandler(e){const t=B(e.originalEvent.target,".e-hor-nav");t&&this.parent.toolbarSettings.type===fd.Expand&&!f(t)?t.classList.contains("e-nav-active")?(z([this.tbElement],[iI]),this.parent.setContentHeight("toolbar",!0)):(W([this.tbElement],[iI]),this.parent.setContentHeight("toolbar",!1)):(q.isDevice||this.parent.inlineMode.enable)&&(this.isToolbar=!0),f(t)&&this.parent.toolbarSettings.type===fd.Expand&&W([this.tbElement],[iI])}wireEvents(){this.parent.inlineMode.enable&&pa()||(k.add(this.tbElement,"focusin",this.tbFocusHandler,this),k.add(this.tbElement,"keydown",this.tbKeydownHandler,this))}unWireEvents(){k.remove(this.tbElement,"focusin",this.tbFocusHandler),k.remove(this.tbElement,"keydown",this.tbKeydownHandler)}addEventListener(){this.parent.isDestroyed||(this.dropDownModule=new Bme(this.parent,this.locator),this.toolbarActionModule=new y2e(this.parent),this.parent.on(cl,this.renderToolbar,this),this.parent.on(J_,this.scrollHandler,this),this.parent.on(f6,this.toolbarBindEvent,this),this.parent.on(by,this.updateToolbarStatus,this),this.parent.on(Ul,this.onPropertyChanged,this),this.parent.on(p6,this.onRefresh,this),this.parent.on(Cs,this.destroy,this),this.parent.on(g6,this.fullScreen,this),this.parent.on(b6,this.hideScreen,this),this.parent.on(XF,this.updateItem,this),this.parent.on(C6,this.dropDownBeforeOpenHandler,this),this.parent.on(rme,this.parent.setContentHeight,this.parent),this.parent.on(rN,this.focusChangeHandler,this),this.parent.on(Yf,this.mouseDownHandler,this),this.parent.on(tN,this.mouseDownHandler,this),!this.parent.inlineMode.enable&&!pa()&&this.parent.on(YF,this.toolbarClickHandler,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(cl,this.renderToolbar),this.parent.off(J_,this.scrollHandler),this.parent.off(f6,this.toolbarBindEvent),this.parent.off(by,this.updateToolbarStatus),this.parent.off(Ul,this.onPropertyChanged),this.parent.off(p6,this.onRefresh),this.parent.off(Cs,this.destroy),this.parent.off(g6,this.parent.fullScreenModule.showFullScreen),this.parent.off(b6,this.parent.fullScreenModule.hideFullScreen),this.parent.off(XF,this.updateItem),this.parent.off(C6,this.dropDownBeforeOpenHandler),this.parent.off(rme,this.parent.setContentHeight),this.parent.off(rN,this.focusChangeHandler),this.parent.off(Yf,this.mouseDownHandler),this.parent.off(tN,this.mouseDownHandler),!this.parent.inlineMode.enable&&!pa()&&this.parent.off(YF,this.toolbarClickHandler))}onRefresh(){this.refreshToolbarOverflow(),this.parent.setContentHeight("",!0)}onPropertyChanged(e){if(!f(e.newProp.inlineMode))for(const t of Object.keys(e.newProp.inlineMode))"enable"===t&&this.refreshToolbar();e.module===this.getModuleName()&&this.refreshToolbar()}refreshToolbar(){f(this.baseToolbar.toolbarObj)&&(this.baseToolbar=this.parent.getBaseToolbarObject());const e=X("."+vQ,this.parent.element);(X("."+E6,this.parent.element)||e)&&this.destroyToolbar(),this.parent.toolbarSettings.enable&&(this.addEventListener(),this.renderToolbar(),this.parent.wireScrollElementsEvents(),X(".e-rte-srctextarea",this.parent.element)||CN(this.baseToolbar,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus()),this.parent.notify(cN,{}))}getModuleName(){return"toolbar"}}},Rge={provide:"RichTextEditorLink",useValue:class wHe{constructor(e,t){this.parent=e,this.rteID=e.element.id,this.i10n=t.getService("rteLocale"),this.addEventListener(),this.serviceLocator=t,this.rendererFactory=t.getService("rendererFactory"),this.dialogRenderObj=t.getService("dialogRenderObject")}addEventListener(){this.parent.isDestroyed||(this.parent.on(y6,this.linkDialog,this),this.parent.on(oQ,this.showDialog,this),this.parent.on(aQ,this.closeDialog,this),this.parent.on(Xd,this.onKeyDown,this),this.parent.on(JF,this.showLinkQuickToolbar,this),this.parent.on(eI,this.clearDialogObj,this),this.parent.on(PX,this.onToolbarAction,this),this.parent.on(jC,this.onIframeMouseDown,this),this.parent.on(v6,this.removeLink,this),this.parent.on(VX,this.editLink,this),this.parent.on(zX,this.openLink,this),this.parent.on(kS,this.editAreaClickHandler,this),this.parent.on(Cs,this.destroy,this))}onToolbarAction(e){switch(e.args.item.subCommand){case"OpenLink":this.parent.notify(zX,e);break;case"EditLink":this.parent.notify(VX,e);break;case"RemoveLink":this.parent.notify(v6,e)}}removeEventListener(){this.parent.isDestroyed||(this.parent.off(y6,this.linkDialog),this.parent.off(oQ,this.showDialog),this.parent.off(aQ,this.closeDialog),this.parent.off(Xd,this.onKeyDown),this.parent.off(JF,this.showLinkQuickToolbar),this.parent.off(eI,this.clearDialogObj),this.parent.off(PX,this.onToolbarAction),this.parent.off(v6,this.removeLink),this.parent.off(jC,this.onIframeMouseDown),this.parent.off(VX,this.editLink),this.parent.off(zX,this.openLink),this.parent.off(kS,this.editAreaClickHandler),this.parent.off(Cs,this.destroy))}onIframeMouseDown(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})}showLinkQuickToolbar(e){if(!f(e.args)&&"enter"!==e.args.action&&"space"!==e.args.action){let t,i;if("Links"!==e.type||f(this.parent.quickToolbarModule)||f(this.parent.quickToolbarModule.linkQTBar))return;this.quickToolObj=this.parent.quickToolbarModule;const s=this.parent.element.getBoundingClientRect().top,r=this.parent.element.getBoundingClientRect().left,o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());let a;if([].forEach.call(e.elements,(l,h)=>{0===h&&(a="#text"===l.nodeName?l.parentNode:l)}),e.isNotify){const l=this.parent.toolbarModule.getToolbarElement(),h=a.getBoundingClientRect().top,c=a.getBoundingClientRect().left,m=h-s,b=l?l.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;t=this.parent.iframeSettings.enable?r+c:a.getBoundingClientRect().left,i=window.pageYOffset+(this.parent.iframeSettings.enable?s+b+h:s+m)}else{let l;l=e.args.touches?e.args.changedTouches[0]:l=e.args,t=this.parent.iframeSettings.enable?window.pageXOffset+r+l.clientX:l.pageX,i=this.parent.iframeSettings.enable?window.pageYOffset+s+l.clientY:l.pageY}this.quickToolObj.linkQTBar&&this.quickToolObj.linkQTBar.showPopup(t,i,o.endContainer)}}hideLinkQuickToolbar(){this.quickToolObj&&this.quickToolObj.linkQTBar&&document.body.contains(this.quickToolObj.linkQTBar.element)&&this.quickToolObj.linkQTBar.hidePopup()}editAreaClickHandler(e){if(this.parent.readonly)return void this.hideLinkQuickToolbar();const t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===t.which||i&&1===t.which||!i&&3===t.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.linkQTBar){this.quickToolObj=this.parent.quickToolbarModule;let s=t.target;s=this.getAnchorNode(s),this.contentModule=this.rendererFactory.getRenderer(Gs.Content);const r=this.quickToolObj.linkQTBar.element.classList.contains("e-rte-pop");if("A"===s.nodeName&&s.childNodes.length>0&&"IMG"!==s.childNodes[0].nodeName&&"IMG"!==e.args.target.nodeName&&!f(B(this.parent.getRange().startContainer.parentElement,"A"))&&!f(B(this.parent.getRange().endContainer.parentElement,"A"))){if(r)return;this.showLinkQuickToolbar({args:t,isNotify:!1,type:"Links",elements:[t.target]})}else this.hideLinkQuickToolbar()}}onKeyDown(e){const t=e.args;switch(t.action){case"escape":f(this.dialogObj)||this.dialogObj.close();break;case"insert-link":this.openDialog(!0,e),t.preventDefault()}}openDialog(e,t){if(e||this.parent.contentModule.getEditPanel().focus(),"HTML"===this.parent.editorMode){const i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),o=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i);this.linkDialog({args:t?t.args:{item:{command:"Links",subCommand:"CreateLink"},originalEvent:void 0},selectNode:r,selection:s,selectParent:o})}else{const i=this.parent.contentModule.getEditPanel();this.parent.formatter.editorManager.markdownSelection.save(i.selectionStart,i.selectionEnd),this.linkDialog({args:{item:{command:"Links",subCommand:"Link"},originalEvent:t&&t.args},member:"link",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),module:"Markdown",name:"insertLink"})}}showDialog(){this.openDialog(!1)}closeDialog(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})}clearDialogObj(){this.dialogObj&&(this.dialogObj.destroy(),te(this.dialogObj.element),this.dialogObj=null)}linkDialog(e,t){if(this.dialogObj)return void this.dialogObj.hide({returnValue:!0});if("HTML"===this.parent.editorMode&&e.selectParent.length>0&&!f(e.selectParent[0].classList)&&e.selectParent[0].classList.contains("e-rte-anchor")&&f(t))return void this.editLink(e);const i=this.i10n.getConstant("linkWebUrl"),s=this.i10n.getConstant("linkText"),r=this.i10n.getConstant("linkTooltipLabel"),o=this.i10n.getConstant("linkurl"),a=this.i10n.getConstant("textPlaceholder"),l=this.i10n.getConstant("linkTitle"),h=this.parent.createElement("div",{className:"e-rte-link-dialog",id:this.rteID+"_rtelink"});this.parent.element.appendChild(h);const c=this.parent.createElement("div",{className:"e-rte-linkcontent",id:this.rteID+"_linkContent"}),v=sI('<div class="e-rte-label"><label>'+i+'</label></div><div class="e-rte-field"><input type="text" data-role ="none" spellcheck="false" placeholder="'+o+'" class="e-input e-rte-linkurl"/></div><div class="e-rte-label"><label>'+s+'</label></div><div class="e-rte-field"> <input type="text" data-role ="none" spellcheck="false" class="e-input e-rte-linkText" placeholder="'+a+'"></div><div class="e-rte-label">'+("HTML"===this.parent.editorMode?"<label>"+r+'</label></div><div class="e-rte-field"><input type="text" data-role ="none" spellcheck="false" placeholder = "'+l+'" class="e-input e-rte-linkTitle"></div><div class="e-rte-label"></div><div class="e-rte-field"><input type="checkbox" class="e-rte-linkTarget"  data-role ="none"></div>':""));c.appendChild(v);const w=c.querySelector(".e-rte-linkTarget"),E=c.querySelector(".e-rte-linkurl"),D=c.querySelector(".e-rte-linkText"),L=c.querySelector(".e-rte-linkTitle"),N=this.i10n.getConstant("linkOpenInNewWindow");this.checkBoxObj=new pc({label:N,checked:!0,enableRtl:this.parent.enableRtl}),this.checkBoxObj.isStringTemplate=!0,this.checkBoxObj.createElement=this.parent.createElement,this.checkBoxObj.appendTo(w);const V="HTML"===this.parent.editorMode?e.selection.getRange(this.parent.contentModule.getDocument()).toString():e.text,$=this.i10n.getConstant("dialogInsert"),ie=this.i10n.getConstant("dialogCancel"),Q=e.selection,le={selfLink:this,selection:e.selection,selectParent:e.selectParent,args:e.args},ke={header:this.i10n.getConstant("linkHeader"),content:c,cssClass:Kh,enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:q.isDevice?"290px":"310px",height:"inherit",isModal:q.isDevice,buttons:[{click:this.insertlink.bind(le),buttonModel:{content:$,cssClass:"e-flat e-insertLink",isPrimary:!0}},{click:this.cancelDialog.bind(le),buttonModel:{cssClass:"e-flat",content:ie}}],target:q.isDevice?document.body:this.parent.element,animationSettings:{effect:"None"},close:Ye=>{this.parent.isBlur=!1,Ye&&Ye.event.returnValue&&("HTML"===this.parent.editorMode?Q.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.contentModule.getEditPanel())),this.dialogObj.destroy(),te(this.dialogObj.element),this.dialogRenderObj.close(this.dialogObj),this.dialogObj=null}};this.dialogObj=this.dialogRenderObj.render(ke),this.dialogObj.createElement=this.parent.createElement,this.dialogObj.appendTo(h),h.style.maxHeight="inherit",!f(this.dialogObj)&&(f(t)||(E.value=t.url,D.value=t.text,L.value=t.title,this.checkBoxObj.checked=!!t.target,this.dialogObj.header=t.header,this.dialogObj.element.querySelector(".e-insertLink").textContent=t.btnText),this.checkUrl(!1),("HTML"===this.parent.editorMode&&f(t)&&(!f(V)&&""!==V&&0===e.selection.range.startOffset||e.selection.range.startOffset!==e.selection.range.endOffset)||"Markdown"===e.module)&&(D.value=V),k.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),this.quickToolObj&&(this.hideLinkQuickToolbar(),this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup()))}insertlink(e){const t=this.selfLink.dialogObj.element;let r,i=t.querySelector(".e-rte-linkurl").value,s=t.querySelector(".e-rte-linkText").value;"HTML"===this.selfLink.parent.editorMode&&(r=t.querySelector(".e-rte-linkTitle").value);const o=this.selfLink.checkBoxObj.checked?"_blank":null;if(""===i)return void this.selfLink.checkUrl(!0);this.selfLink.isUrl(i)?this.selfLink.checkUrl(!1):(s=""===s?i:s,i=this.selfLink.parent.enableAutoUrl||i.indexOf("http")>-1?i:"http://"+i);const a=this.selfLink;if("HTML"===a.parent.editorMode&&f(B(this.selection.range.startContainer.parentNode,"[id='"+a.parent.contentModule.getPanel().id+"']"))){a.parent.contentModule.getEditPanel().focus(),q.isIE&&a.parent.iframeSettings.enable&&this.selection.restore();const c=a.parent.formatter.editorManager.nodeSelection.getRange(a.parent.contentModule.getDocument());this.selection=a.parent.formatter.editorManager.nodeSelection.save(c,a.parent.contentModule.getDocument()),this.selectParent=a.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(c)}const l={url:i,text:s,title:r,target:o,selection:this.selection,selectParent:this.selectParent};let h;if(document.body.contains(a.dialogObj.element)&&this.selfLink.dialogObj.hide({returnValue:!1}),Vu()&&a.parent.iframeSettings.enable&&X("iframe",a.parent.element).contentWindow.focus(),"HTML"===a.parent.editorMode&&this.selection.restore(),0===a.parent.formatter.getUndoRedoStack().length&&a.parent.formatter.saveData(),f(this.args)||"KeyK"!==this.args.code)h=this.args;else{const c=this.args;Ae(this.args,{item:{command:"Links",subCommand:"CreateLink"},originalEvent:c},!0),h={item:{command:"Links",subCommand:"CreateLink"},originalEvent:c}}this.selfLink.parent.formatter.process(this.selfLink.parent,h,!f(this.args)&&this.args.originalEvent,l),this.selfLink.parent.contentModule.getEditPanel().focus()}isUrl(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)}checkUrl(e){const i=this.dialogObj.element.querySelector(".e-rte-linkurl");e?(z([i],"e-error"),i.setSelectionRange(0,i.value.length),i.focus()):W([i],"e-error")}removeLink(e){0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,selectParent:e.selectParent,selection:e.selection,subCommand:e.args.item.subCommand}),Vu()&&this.parent.iframeSettings.enable?X("iframe",this.parent.element).contentWindow.focus():this.parent.contentModule.getEditPanel().focus(),this.hideLinkQuickToolbar()}openLink(e){const t=this.getAnchorNode(e.selectParent[0]);(t.classList.contains("e-rte-anchor")||"A"===t.tagName)&&this.parent.formatter.process(this.parent,e.args,e.args,{url:t.href,target:""===t.target?"_self":"_blank",selectNode:e.selectNode,subCommand:e.args.item.subCommand})}getAnchorNode(e){return B(e,"a")||e}editLink(e){const t=this.getAnchorNode(e.selectNode[0]);let i=this.getAnchorNode(e.selectParent[0]);if(i="A"===t.nodeName?t:i,i.classList.contains("e-rte-anchor")||"A"===i.tagName){const s=this.i10n.getConstant("dialogUpdate"),r={url:i.getAttribute("href"),text:i.innerText,title:i.title,target:i.target,header:this.i10n.getConstant("editLink"),btnText:s};this.linkDialog(e,r)}}cancelDialog(e){this.selfLink.parent.isBlur=!1,this.selfLink.dialogObj.hide({returnValue:!0}),Vu()?this.selection.restore():this.selfLink.parent.contentModule.getEditPanel().focus()}onDocumentClick(e){const t=e.target;!f(this.dialogObj)&&(!B(t,"[id='"+this.dialogObj.element.id+"']")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||(this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)||this.parent.inlineMode.enable&&!B(t,"#"+this.dialogObj.element.id))&&!B(t,"#"+this.parent.getID()+"_toolbar_CreateLink")&&!t.querySelector("#"+this.parent.getID()+"_toolbar_CreateLink"))&&(this.dialogObj.hide({returnValue:!0}),k.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),this.parent.isBlur=!0,J1(this.parent.element,"focusout"))}destroy(){this.removeEventListener()}getModuleName(){return"link"}}},Age={provide:"RichTextEditorImage",useValue:class SHe{constructor(e,t){this.isImgUploaded=!1,this.isAllowedTypes=!0,this.pageX=null,this.pageY=null,this.deletedImg=[],this.parent=e,this.rteID=e.element.id,this.i10n=t.getService("rteLocale"),this.rendererFactory=t.getService("rendererFactory"),this.dialogRenderObj=t.getService("dialogRenderObject"),this.addEventListener()}addEventListener(){this.parent.isDestroyed||(this.parent.on(Xd,this.onKeyDown,this),this.parent.on(yy,this.onKeyUp,this),this.parent.on(QF,this.insertImage,this),this.parent.on(lQ,this.showDialog,this),this.parent.on(hQ,this.closeDialog,this),this.parent.on(FX,this.onWindowResize,this),this.parent.on(JF,this.showImageQuickToolbar,this),this.parent.on(eI,this.clearDialogObj,this),this.parent.on(OX,this.onToolbarAction,this),this.parent.on(WX,this.caption,this),this.parent.on(qX,this.deleteImg,this),this.parent.on(jX,this.insertImgLink,this),this.parent.on(UX,this.insertAltText,this),this.parent.on(kS,this.editAreaClickHandler,this),this.parent.on(jC,this.onIframeMouseDown,this),this.parent.on(GX,this.imageSize,this),this.parent.on(Q_,this.alignmentSelect,this),this.parent.on(cl,this.afterRender,this),this.parent.on(cN,this.afterRender,this),this.parent.on($1,this.imagePaste,this),this.parent.on(Cs,this.removeEventListener,this))}removeEventListener(){if(this.parent.isDestroyed)return;this.parent.off(Xd,this.onKeyDown),this.parent.off(yy,this.onKeyUp),this.parent.off(FX,this.onWindowResize),this.parent.off(QF,this.insertImage),this.parent.off(lQ,this.showDialog),this.parent.off(hQ,this.closeDialog),this.parent.off(JF,this.showImageQuickToolbar),this.parent.off(eI,this.clearDialogObj),this.parent.off(WX,this.caption),this.parent.off(OX,this.onToolbarAction),this.parent.off(qX,this.deleteImg),this.parent.off(jX,this.insertImgLink),this.parent.off(UX,this.insertAltText),this.parent.off(kS,this.editAreaClickHandler),this.parent.off(jC,this.onIframeMouseDown),this.parent.off(GX,this.imageSize),this.parent.off(Q_,this.alignmentSelect),this.parent.off(cl,this.afterRender),this.parent.off(cN,this.afterRender),this.parent.off($1,this.imagePaste),this.parent.off(Cs,this.removeEventListener);const e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.removeEventListener("drop",this.dragDrop.bind(this),!0),e.removeEventListener("dragstart",this.dragStart.bind(this),!0),e.removeEventListener("dragenter",this.dragEnter.bind(this),!0),e.removeEventListener("dragover",this.dragOver.bind(this),!0),f(this.contentModule)||(k.remove(this.contentModule.getEditPanel(),q.touchEndEvent,this.imageClick),this.parent.formatter.editorManager.observer.off(QX,this.undoStack),this.parent.insertImageSettings.resize&&(k.remove(this.parent.contentModule.getEditPanel(),q.touchStartEvent,this.resizeStart),k.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),k.remove(this.contentModule.getEditPanel(),"cut",this.onCutHandler)))}onIframeMouseDown(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})}afterRender(){this.contentModule=this.rendererFactory.getRenderer(Gs.Content),k.add(this.contentModule.getEditPanel(),q.touchEndEvent,this.imageClick,this),this.parent.insertImageSettings.resize&&(k.add(this.parent.contentModule.getEditPanel(),q.touchStartEvent,this.resizeStart,this),k.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),k.add(this.contentModule.getEditPanel(),"cut",this.onCutHandler,this));const e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.addEventListener("drop",this.dragDrop.bind(this),!0),e.addEventListener("dragstart",this.dragStart.bind(this),!0),e.addEventListener("dragenter",this.dragOver.bind(this),!0),e.addEventListener("dragover",this.dragOver.bind(this),!0)}undoStack(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(let t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){const i=this.parent.createElement("div"),s=sI(this.parent.formatter.getUndoRedoStack()[t].text);i.appendChild(s);const r=i.querySelectorAll("img");if(i.querySelector(".e-img-resize")&&r.length>0){for(let o=0;o<r.length;o++)r[o].style.outline="";te(i.querySelector(".e-img-resize")),this.parent.formatter.getUndoRedoStack()[t].text=i.innerHTML}}}resizeEnd(e){this.resizeBtnInit(),this.imgEle.parentElement.style.cursor="auto",q.isDevice&&W([e.target.parentElement],"e-mob-span"),this.parent.trigger("resizeStop",{event:e,requestType:"images"}),this.getPointX(e),this.parent.iframeSettings.enable&&(window,this.parent.element.getBoundingClientRect()),this.parent.formatter.editorManager.observer.on(QX,this.undoStack,this),this.parent.formatter.saveData()}resizeStart(e,t){if(this.parent.readonly)return;const i=t||e.target;if(this.prevSelectedImgEle=this.imgEle,"IMG"===i.tagName){this.parent.preventDefaultResize(e);const s=i;this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&te(this.imgResizeDiv),this.imageResize(s)}i.classList.contains("e-rte-imageboxmark")&&(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),e.preventDefault(),e.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.imageQTBar.hidePopup(),i.classList.contains("e-rte-topLeft")&&(this.resizeBtnStat.topLeft=!0),i.classList.contains("e-rte-topRight")&&(this.resizeBtnStat.topRight=!0),i.classList.contains("e-rte-botLeft")&&(this.resizeBtnStat.botLeft=!0),i.classList.contains("e-rte-botRight")&&(this.resizeBtnStat.botRight=!0),q.isDevice&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&!this.imgResizeDiv.classList.contains("e-mob-span")?z([this.imgResizeDiv],"e-mob-span"):this.parent.trigger("resizeStart",{event:e,requestType:"images"},r=>{r.cancel&&this.cancelResizeAction()}),k.add(this.contentModule.getDocument(),q.touchEndEvent,this.resizeEnd,this))}imageClick(e){q.isDevice&&("IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName||"IMG"===e.target.tagName?(this.contentModule.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.contentModule.getEditPanel().setAttribute("contenteditable","true")),"IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName&&e.preventDefault()}onCutHandler(){this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction()}imageResize(e){this.resizeBtnInit(),this.imgEle=e,z([this.imgEle],"e-resize"),this.imgResizeDiv=this.parent.createElement("span",{className:"e-img-resize",id:this.rteID+"_imgResize"}),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-topLeft",styles:"cursor: nwse-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-topRight",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-botLeft",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-botRight",styles:"cursor: nwse-resize"})),q.isDevice&&z([this.imgResizeDiv],"e-mob-rte"),e.style.outline="2px solid #4a90e2",this.imgResizePos(e,this.imgResizeDiv),this.resizeImgDupPos(e),this.contentModule.getEditPanel().appendChild(this.imgResizeDiv),k.add(this.contentModule.getDocument(),q.touchMoveEvent,this.resizing,this)}getPointX(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX}getPointY(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY}imgResizePos(e,t){const i=this.calcPos(e),s=i.top,r=i.left,o=e.width,a=e.height,l=q.isDevice?4*parseInt(e.style.outline.slice(-3),10)+2:2*parseInt(e.style.outline.slice(-3),10)+2,h=q.isDevice?0:2;t.querySelector(".e-rte-botLeft").style.left=r-l+"px",t.querySelector(".e-rte-botLeft").style.top=a-l+s+"px",t.querySelector(".e-rte-botRight").style.left=o-(l-h)+r+"px",t.querySelector(".e-rte-botRight").style.top=a-l+s+"px",t.querySelector(".e-rte-topRight").style.left=o-(l-h)+r+"px",t.querySelector(".e-rte-topRight").style.top=s-l+"px",t.querySelector(".e-rte-topLeft").style.left=r-l+"px",t.querySelector(".e-rte-topLeft").style.top=s-l+"px"}calcPos(e){let s,i={top:0,left:0};const r=e.ownerDocument;let o=(e.offsetParent&&(e.offsetParent.classList.contains("e-img-caption")||["TD","TH","TABLE","A"].indexOf(e.offsetParent.tagName)>-1)?B(e,"#"+this.parent.getID()+"_rte-edit-view"):e.offsetParent)||r.documentElement;for(;o&&(o===r.body||o===r.documentElement)&&"static"===o.style.position;)o=o.parentNode;return o&&o!==e&&1===o.nodeType&&(i=o.getBoundingClientRect()),e.offsetParent&&e.offsetParent.classList.contains("e-img-caption")?(s=e.getBoundingClientRect(),{top:s.top-i.top,left:s.left-i.left}):{top:e.offsetTop,left:e.offsetLeft}}setAspectRatio(e,t,i,s){if(f(e.width))return;const r=""!==e.style.width?e.style.width.match(/^\d+(\.\d*)?%$/g)?parseFloat(e.style.width):parseInt(e.style.width,10):e.width,o=""!==e.style.height?parseInt(e.style.height,10):e.height;if(r>o)if(e.style.minWidth=0===this.parent.insertImageSettings.minWidth?"20px":st(this.parent.insertImageSettings.minWidth),this.parent.insertImageSettings.resizeByPercent){if(0!==parseInt(""+e.getBoundingClientRect().width,10)&&0!==parseInt(""+r,10)){const a=this.pixToPerc(r/o*i,e.previousElementSibling||e.parentElement);e.style.width=Math.min(Math.round(a/e.getBoundingClientRect().width*t*100)/100,100)+"%"}else e.style.width=this.pixToPerc(r/o*i,e.previousElementSibling||e.parentElement)+"%";e.style.height=null,e.removeAttribute("height")}else if(""===e.style.width&&""!==e.style.height)e.style.height=i+"px";else if(""!==e.style.width&&""===e.style.height){let a=r/o*i+r/o<this.parent.inputElement.getBoundingClientRect().right-32?r/o*i+r/o:this.parent.inputElement.getBoundingClientRect().right-32;e.style.width=a.toString()+"px"}else if(""!==e.style.width){let a=r/o*i<this.parent.inputElement.getBoundingClientRect().right-32?r/o*i:this.parent.inputElement.getBoundingClientRect().right-32;e.style.width=a+"px",e.style.height=i+"px"}else e.setAttribute("width",(r/o*i+r/o).toString());else o>r?this.parent.insertImageSettings.resizeByPercent?(e.style.width=0!==parseInt(""+e.getBoundingClientRect().width,10)&&0!==parseInt(""+r,10)?Math.min(Math.round(r/e.getBoundingClientRect().width*t*100)/100,100)+"%":this.pixToPerc(t/o*i,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=t+"px",e.style.height=o/r*t+"px"):e.setAttribute("width",this.resizeBtnStat.botRight?(this.getPointX(s.event)-e.getBoundingClientRect().left).toString():t.toString()):this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):(e.style.width=t+"px",e.style.height=t+"px")}pixToPerc(e,t){return e/parseFloat(getComputedStyle(t).width)*100}imgDupMouseMove(e,t,i){const s={event:i,requestType:"images"};this.parent.trigger("resizing",s,r=>{if(r.cancel)this.cancelResizeAction();else{if(parseInt(this.parent.insertImageSettings.minWidth,10)>=parseInt(e,10)||parseInt(this.parent.getInsertImgMaxWidth(),10)<=parseInt(e,10)&&f(this.imgEle.style.width)||!this.parent.insertImageSettings.resizeByPercent&&(parseInt(this.parent.insertImageSettings.minHeight,10)>=parseInt(t,10)||parseInt(this.parent.insertImageSettings.maxHeight,10)<=parseInt(t,10)))return;this.imgEle.parentElement.style.cursor="pointer",this.setAspectRatio(this.imgEle,parseInt(e,10),parseInt(t,10),s),this.resizeImgDupPos(this.imgEle),this.imgResizePos(this.imgEle,this.imgResizeDiv),this.parent.setContentHeight("",!1)}})}resizing(e){this.imgEle.offsetWidth>=this.parent.getInsertImgMaxWidth()&&(this.imgEle.style.maxHeight=this.imgEle.offsetHeight+"px");const t=this.getPointX(e),i=this.getPointY(e),s=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(t-this.pageX):t-this.pageX,r=this.resizeBtnStat.topLeft||this.resizeBtnStat.topRight?-(i-this.pageY):i-this.pageY,o=parseInt(this.imgDupPos.width,10)+s,a=parseInt(this.imgDupPos.height,10)+r;this.pageX=t,this.pageY=i,(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft)&&this.imgDupMouseMove(o+"px",a+"px",e)}cancelResizeAction(){k.remove(this.contentModule.getDocument(),q.touchMoveEvent,this.resizing),k.remove(this.contentModule.getDocument(),q.touchEndEvent,this.resizeEnd),this.imgEle&&this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&(te(this.imgResizeDiv),this.imgEle.style.outline="",this.imgResizeDiv=null,this.pageX=null,this.pageY=null)}resizeImgDupPos(e){this.imgDupPos={width:""!==e.style.width&&this.parent.insertImageSettings&&!this.parent.insertImageSettings.resizeByPercent?this.imgEle.style.width:e.width+"px",height:""!==e.style.height?this.imgEle.style.height:e.height+"px"}}resizeBtnInit(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}}onToolbarAction(e){switch(Vu()&&this.parent.notify(Lg,{}),e.args.item.subCommand){case"Replace":this.parent.notify(this.parent.fileManagerSettings.enable?S6:QF,e);break;case"Caption":this.parent.notify(WX,e);break;case"InsertLink":this.parent.notify(jX,e);break;case"AltText":this.parent.notify(UX,e);break;case"Remove":this.parent.notify(qX,e);break;case"Dimension":this.parent.notify(GX,e);break;case"OpenImageLink":this.openImgLink(e);break;case"EditImageLink":this.editImgLink(e);break;case"RemoveImageLink":this.removeImgLink(e)}}openImgLink(e){this.parent.formatter.process(this.parent,e.args,e.args,{url:e.selectParent[0].parentNode.href,target:""===e.selectParent[0].parentNode.target?"_self":"_blank",selectNode:e.selectNode,subCommand:e.args.item.subCommand})}editImgLink(e){const t=e.selectParent[0].parentNode,i=this.i10n.getConstant("dialogUpdate");this.insertImgLink(e,{url:t.href,target:t.target,header:"Edit Link",btnText:i})}removeImgLink(e){q.isIE&&this.contentModule.getEditPanel().focus(),e.selection.restore();const t=!(!this.contentModule.getEditPanel().contains(this.captionEle)||!X("a",this.captionEle));this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:e.selectNode[0],selectParent:t?[this.captionEle]:[e.selectNode[0].parentElement],selection:e.selection,subCommand:e.args.item.subCommand}),this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),f(e.selectParent)||W([e.selectParent[0]],"e-img-focus")),t&&X(".e-img-inner",this.captionEle).focus()}onKeyDown(e){const t=e.args;let i,s,r,o,a;if(this.deletedImg=[],"HTML"===this.parent.editorMode&&(i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),a=i.startContainer===i.endContainer&&i.startOffset===i.endOffset),!a&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(t.which)<0){const h=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i);for(let c=0;c<h.length;c++)"IMG"===h[c].nodeName&&this.deletedImg.push(h[c])}if("HTML"===this.parent.editorMode&&(8===t.which&&"Backspace"===t.code||46===t.which&&"Delete"===t.code)){const h=i.startContainer===i.endContainer&&i.startOffset===i.endOffset;8===t.which&&"Backspace"===t.code&&h?this.checkImageBack(i):46===t.which&&"Delete"===t.code&&h&&this.checkImageDel(i)}if(!f(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==t.code&&(i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),o=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),!t.ctrlKey&&t.key&&(1===t.key.length||"enter"===t.action)&&"IMG"===o[0].tagName&&o[0].parentElement)){const h=o[0].parentElement.childNodes[0];this.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),h,h,h.textContent.length,h.textContent.length),W([o[0]],"e-img-focus"),this.quickToolObj.imageQTBar.hidePopup()}switch(t.ctrlKey&&(89===t.keyCode||90===t.keyCode)&&this.undoStack({subCommand:90===t.keyCode?"undo":"redo"}),(8===t.keyCode||46===t.keyCode)&&(r&&"IMG"===r[0].nodeName&&r.length<1&&(t.preventDefault(),this.deleteImg({selectNode:r,selection:s,selectParent:o,args:{item:{command:"Images",subCommand:"Remove"},originalEvent:t}},t.keyCode)),this.parent.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle()),"Backspace"===t.code&&(t.action="backspace"),t.action){case"escape":f(this.dialogObj)||this.dialogObj.close();break;case"backspace":case"delete":for(let h=0;h<this.deletedImg.length;h++)this.imageRemovePost(this.deletedImg[h].src);"Markdown"!==this.parent.editorMode&&(3===i.startContainer.nodeType?"Backspace"===t.code?i.startContainer.previousElementSibling&&0===i.startOffset&&i.startContainer.previousElementSibling.classList.contains(Sy)&&i.startContainer.previousElementSibling.classList.contains(fN)&&te(i.startContainer.previousElementSibling):i.startContainer.nextElementSibling&&i.endContainer.textContent.length===i.endOffset&&i.startContainer.nextElementSibling.classList.contains(Sy)&&i.startContainer.nextElementSibling.classList.contains(fN)&&te(i.startContainer.nextElementSibling):1===i.startContainer.nodeType&&i.startContainer.querySelector("."+Sy+"."+fN)?te(i.startContainer.querySelector("."+Sy+"."+fN)):1===i.startContainer.nodeType&&i.startContainer.querySelector("."+Sy+"."+wy)&&te(i.startContainer.querySelector("."+Sy+"."+wy)));break;case"insert-image":this.openDialog(!0,t,s,r,o),t.preventDefault()}}openDialog(e,t,i,s,r){let o,a,l,h;e||f(this.parent.formatter.editorManager.nodeSelection)?(a=i,l=s,h=r):(o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),a=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.contentModule.getDocument()),l=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(o),h=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)),this.insertImage("HTML"===this.parent.editorMode?{args:{item:{command:"Images",subCommand:"Image"},originalEvent:t},selectNode:l,selection:a,selectParent:h}:{args:{item:{command:"Images",subCommand:"Image"},originalEvent:t},member:"image",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),module:"Markdown",name:"insertImage"})}showDialog(){this.openDialog(!1)}closeDialog(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})}onKeyUp(e){if(!f(this.deletedImg)&&this.deletedImg.length>0)for(let t=0;t<this.deletedImg.length;t++){const i={element:this.deletedImg[t],src:this.deletedImg[t].getAttribute("src")};this.parent.trigger(ome,i)}}checkImageBack(e){"#text"!==e.startContainer.nodeName||0!==e.startOffset||f(e.startContainer.previousSibling)||"IMG"!==e.startContainer.previousSibling.nodeName?"#text"!==e.startContainer.nodeName&&!f(e.startContainer.childNodes[e.startOffset-1])&&"IMG"===e.startContainer.childNodes[e.startOffset-1].nodeName&&this.deletedImg.push(e.startContainer.childNodes[e.startOffset-1]):this.deletedImg.push(e.startContainer.previousSibling)}checkImageDel(e){"#text"!==e.startContainer.nodeName||e.startOffset!==e.startContainer.textContent.length||f(e.startContainer.nextSibling)||"IMG"!==e.startContainer.nextSibling.nodeName?"#text"!==e.startContainer.nodeName&&!f(e.startContainer.childNodes[e.startOffset])&&"IMG"===e.startContainer.childNodes[e.startOffset].nodeName&&this.deletedImg.push(e.startContainer.childNodes[e.startOffset]):this.deletedImg.push(e.startContainer.nextSibling)}alignmentSelect(e){const t=e.item;if(!document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))||"Images"!==t.command)return;const i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());let s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i);s="IMG"===s[0].nodeName?s:[this.imgEle];const r={args:e,selectNode:s};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.subCommand){case"JustifyLeft":this.alignImage(r,"JustifyLeft");break;case"JustifyCenter":this.alignImage(r,"JustifyCenter");break;case"JustifyRight":this.alignImage(r,"JustifyRight");break;case"Inline":this.inline(r);break;case"Break":this.break(r)}this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),W([s[0]],"e-img-focus")),this.cancelResizeAction()}imageWithLinkQTBarItemUpdate(){let e;const t=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item");for(let s=0;s<t.length;s++)t[s].getAttribute("title")===this.i10n.getConstant("openLink")||t[s].getAttribute("title")===this.i10n.getConstant("editLink")||t[s].getAttribute("title")===this.i10n.getConstant("removeLink")?(z([t[s]],"e-link-groups"),t[s].style.display="none"):"Insert Link"===t[s].getAttribute("title")?t[s].style.display="":t[s].classList.contains("e-rte-horizontal-separator")&&(e=t[s],te(t[s]));const i=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item:not(.e-link-groups)");this.quickToolObj.imageQTBar.addQTBarItem(["-"],Math.round(i.length/2))}showImageQuickToolbar(e){if("Images"!==e.type||f(this.parent.quickToolbarModule)||f(this.parent.quickToolbarModule.imageQTBar)||f(e.args))return;this.quickToolObj=this.parent.quickToolbarModule;const t=e.args;let i=e.elements;[].forEach.call(e.elements,(r,o)=>{0===o&&(i=r)}),i&&!B(i,"a")&&this.imageWithLinkQTBarItemUpdate(),"IMG"===i.nodeName&&z([i],["e-img-focus"]);const s=this.parent.iframeSettings.enable?window.pageYOffset+this.parent.element.getBoundingClientRect().top+t.clientY:t.pageY;this.parent.quickToolbarModule.imageQTBar&&(e.isNotify?setTimeout(()=>{this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(),i),this.quickToolObj.imageQTBar.showPopup(t.pageX,s,i)},400):this.quickToolObj.imageQTBar.showPopup(t.pageX,s,i))}hideImageQuickToolbar(){f(this.contentModule.getEditPanel().querySelector(".e-img-focus"))||(W([this.contentModule.getEditPanel().querySelector(".e-img-focus")],"e-img-focus"),this.quickToolObj&&this.quickToolObj.imageQTBar&&document.body.contains(this.quickToolObj.imageQTBar.element)&&this.quickToolObj.imageQTBar.hidePopup())}editAreaClickHandler(e){if(this.parent.readonly)return void this.hideImageQuickToolbar();const t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(2===t.which||i&&1===t.which||!i&&3===t.which)i&&1===t.which&&!f(t.target)&&"IMG"===t.target.tagName&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(),t.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.imageQTBar){this.quickToolObj=this.parent.quickToolbarModule;const s=t.target;this.contentModule=this.rendererFactory.getRenderer(Gs.Content);const r=this.quickToolObj.imageQTBar.element.classList.contains("e-rte-pop");if("IMG"===s.nodeName&&this.parent.quickToolbarModule){if(r)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(),s),Vu()&&this.parent.notify(vy,e),z([s],"e-img-focus");const o=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item");let a;if(B(s,"a")){for(let h=0;h<o.length;h++)o[h].getAttribute("title")===this.i10n.getConstant("openLink")||o[h].getAttribute("title")===this.i10n.getConstant("editLink")||o[h].getAttribute("title")===this.i10n.getConstant("removeLink")?(o[h].style.display="",W([o[h]],"e-link-groups")):"Insert Link"===o[h].getAttribute("title")?o[h].style.display="none":o[h].classList.contains("e-rte-horizontal-separator")&&(a=o[h],te(o[h]));const l=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item:not(.e-link-groups)");this.quickToolObj.imageQTBar.addQTBarItem(["-"],Math.round(l.length/2))}else B(s,"a")||this.imageWithLinkQTBarItemUpdate();this.showImageQuickToolbar({args:t,type:"Images",elements:[t.target]})}else this.hideImageQuickToolbar()}}insertImgLink(e,t){if("IMG"===e.selectNode[0].nodeName&&(this.imagDialog(e),!f(this.dialogObj))){const i=this.parent.createElement("div",{className:"e-img-linkwrap"}),o=sI('<div class="e-rte-field"><input type="text" data-role ="none" class="e-input e-img-link" spellcheck="false" placeholder="'+this.i10n.getConstant("linkurl")+'"/></div><div class="e-rte-label"></div><div class="e-rte-field"><input type="checkbox" class="e-rte-linkTarget"  data-role ="none"></div>');i.appendChild(o);const a=i.querySelector(".e-rte-linkTarget"),l=i.querySelector(".e-img-link"),h=this.i10n.getConstant("linkOpenInNewWindow");this.checkBoxObj=new pc({label:h,checked:!0,enableRtl:this.parent.enableRtl,change:v=>{c=v.checked?"_blank":null}}),this.checkBoxObj.isStringTemplate=!0,this.checkBoxObj.createElement=this.parent.createElement,this.checkBoxObj.appendTo(a);let c=this.checkBoxObj.checked?"_blank":null;const m=this.i10n.getConstant("dialogUpdate"),b={args:e.args,selfImage:this,selection:e.selection,selectNode:e.selectNode,selectParent:e.selectParent,link:l,target:c};this.dialogObj.setProperties({height:"inherit",width:"290px",header:this.parent.localeObj.getConstant("imageInsertLinkHeader"),content:i,position:{X:"center",Y:"center"},buttons:[{click:v=>{this.insertlink(b)},buttonModel:{content:m,cssClass:"e-flat e-update-link",isPrimary:!0}}]}),f(t)||(l.value=t.url,this.checkBoxObj.checked=!!t.target,this.dialogObj.header=t.header),this.dialogObj.element.style.maxHeight="inherit",this.dialogObj.content.querySelector("input").focus()}}insertAltText(e){if("IMG"!==e.selectNode[0].nodeName)return;this.imagDialog(e);const t=this.i10n.getConstant("altText");if(!f(this.dialogObj)){const i=this.parent.createElement("div",{className:"e-img-altwrap"}),s=this.i10n.getConstant("alternateHeader"),r=this.i10n.getConstant("dialogUpdate"),l=sI('<div class="e-rte-field"><input type="text" spellcheck="false" value="'+(null===e.selectNode[0].getAttribute("alt")?"":e.selectNode[0].getAttribute("alt"))+'" class="e-input e-img-alt" placeholder="'+t+'"/></div>');i.appendChild(l);const h=i.querySelector(".e-img-alt"),c={args:e.args,selfImage:this,selection:e.selection,selectNode:e.selectNode,alt:h};this.dialogObj.setProperties({height:"inherit",width:"290px",header:s,content:i,position:{X:"center",Y:"center"},buttons:[{click:m=>{this.insertAlt(c)},buttonModel:{content:r,cssClass:"e-flat e-update-alt",isPrimary:!0}}]}),this.dialogObj.element.style.maxHeight="inherit",this.dialogObj.content.querySelector("input").focus()}}insertAlt(e){f(e.alt)||(e.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,e.args,e.args,{altText:e.alt.value,selectNode:e.selectNode,subCommand:e.args.item.subCommand}),this.dialogObj.hide({returnValue:!1}))}insertlink(e){if("IMG"!==e.selectNode[0].nodeName)return;let t=e.link.value;if(""===t)return z([e.link],"e-error"),e.link.setSelectionRange(0,t.length),void e.link.focus();this.isUrl(t)?W([e.link],"e-error"):t="http://"+t;const i=e.selfImage;if("HTML"===i.parent.editorMode&&e.selection.restore(),0===i.parent.formatter.getUndoRedoStack().length&&i.parent.formatter.saveData(),"A"===e.selectNode[0].parentElement.nodeName)return i.parent.formatter.process(i.parent,e.args,e.args,{url:t,target:i.checkBoxObj.checked?"_blank":null,selectNode:e.selectNode,subCommand:e.args.item.subCommand}),void i.dialogObj.hide({returnValue:!0});i.parent.formatter.process(i.parent,e.args,e.args,{url:t,target:i.checkBoxObj.checked?"_blank":null,selectNode:e.selectNode,subCommand:e.args.item.subCommand,selection:e.selection});const s=B(e.selectNode[0],".e-img-caption");s&&X(".e-img-inner",s).focus(),s&&X(".e-img-inner",s).focus(),i.dialogObj.hide({returnValue:!1})}isUrl(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)}deleteImg(e,t){if("IMG"!==e.selectNode[0].nodeName)return;const i={element:e.selectNode[0],src:e.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:Sy,subCommand:e.args.item.subCommand}),this.imageRemovePost(i.src),this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&this.quickToolObj.imageQTBar.hidePopup(),this.cancelResizeAction(),f(t)&&this.parent.trigger(ome,i)}imageRemovePost(e){const t=this;let i="";if(f(this.parent.insertImageSettings.removeUrl)||""===this.parent.insertImageSettings.removeUrl)return;i=e.indexOf("http://")>-1||e.indexOf("https://")>-1?e:new URL(e,document.baseURI).href,this.removingImgName=i.replace(/^.*[\\\/]/,"");const s=new XMLHttpRequest;s.addEventListener("readystatechange",function(){4==this.readyState&&200==this.status&&t.triggerPost(this.response)}),s.open("GET",i),s.responseType="blob",s.send()}triggerPost(e){const t=this.parent.insertImageSettings.removeUrl;if(f(t)||""===t)return;const i=new File([e],this.removingImgName),s=new qb(t,"POST",!0,null),r=new FormData;r.append("UploadFiles",i),s.send(r)}caption(e){const t=e.selectNode[0];if("IMG"!==t.nodeName)return;e.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.cancelResizeAction(),z([t],"e-rte-image");const i=e.args.item?e.args.item.subCommand:"Caption";if(f(B(t,"."+Sy))){this.captionEle=this.parent.createElement("span",{className:Sy+" e-rte-img-caption",attrs:{contenteditable:"false",draggable:"false",style:"width:"+this.parent.insertImageSettings.width}});const s=this.parent.createElement("span",{className:"e-img-wrap"}),r=this.parent.createElement("span",{className:"e-img-inner",attrs:{contenteditable:"true"}}),o=e.selectNode[0].parentElement;"A"===o.tagName&&o.setAttribute("contenteditable","true"),s.appendChild("A"===o.tagName?o:e.selectNode[0]),s.appendChild(r);const a=this.i10n.getConstant("imageCaption");r.innerHTML=a,this.captionEle.appendChild(s),t.classList.contains(xy)&&z([this.captionEle],fN),t.classList.contains(wy)&&z([this.captionEle],wy),t.classList.contains("e-imgleft")&&z([this.captionEle],"e-imgleft"),t.classList.contains(bme)&&z([this.captionEle],bme),t.classList.contains(vme)&&z([this.captionEle],vme),this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:this.captionEle,selectNode:e.selectNode,subCommand:i}),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),r.childNodes[0],r.childNodes[0],0,r.childNodes[0].textContent.length)}else te(B(t,"."+Sy)),q.isIE&&(this.contentModule.getEditPanel().focus(),e.selection.restore()),this.parent.formatter.process(this.parent,e.args,e.args,"A"===t.parentElement.tagName?{insertElement:t.parentElement,selectNode:e.selectNode,subCommand:i}:{insertElement:t,selectNode:e.selectNode,subCommand:i});this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),W([t],"e-img-focus"))}imageSize(e){if("IMG"===e.selectNode[0].nodeName&&(this.imagDialog(e),!f(this.dialogObj))){const t=this.i10n.getConstant("imageSizeHeader"),i=this.i10n.getConstant("dialogUpdate"),s=this.imgsizeInput(e),r={args:e.args,selfImage:this,selection:e.selection,selectNode:e.selectNode};this.dialogObj.setProperties({height:"inherit",width:"290px",header:t,content:s,position:{X:"center",Y:"center"},buttons:[{click:o=>{this.insertSize(r)},buttonModel:{content:i,cssClass:"e-flat e-update-size",isPrimary:!0}}]}),this.dialogObj.element.style.maxHeight="inherit",this.dialogObj.content.querySelector("input").focus()}}break(e){"IMG"===e.selectNode[0].nodeName&&this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:e.args.item?e.args.item.subCommand:"Break"})}inline(e){"IMG"===e.selectNode[0].nodeName&&this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:e.args.item?e.args.item.subCommand:"Inline"})}alignImage(e,t){this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:e.args.item?e.args.item.subCommand:t})}clearDialogObj(){this.dialogObj&&(this.dialogObj.destroy(),te(this.dialogObj.element),this.dialogObj=null)}imagDialog(e){if(this.dialogObj)return void this.dialogObj.hide({returnValue:!0});const t=this.parent.createElement("div",{className:"e-rte-img-dialog",id:this.rteID+"_image"});this.parent.element.appendChild(t);const i=this.i10n.getConstant("dialogInsert"),s=this.i10n.getConstant("dialogCancel"),r=this.i10n.getConstant("imageHeader"),o=e.selection,l={header:r,cssClass:Kh,enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:q.isDevice?"290px":"340px",height:"inherit",position:{X:"center",Y:q.isDevice?"center":"top"},isModal:q.isDevice,buttons:[{click:this.insertImageUrl.bind({selfImage:this,selection:e.selection,args:e.args,selectParent:e.selectParent}),buttonModel:{content:i,cssClass:"e-flat e-insertImage",isPrimary:!0,disabled:!0}},{click:b=>{this.cancelDialog(b)},buttonModel:{cssClass:"e-flat e-cancel",content:s}}],target:q.isDevice?document.body:this.parent.element,animationSettings:{effect:"None"},close:b=>{this.isImgUploaded&&this.uploadObj.removing(),this.parent.isBlur=!1,b&&b.event.returnValue&&("HTML"===this.parent.editorMode?o.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.contentModule.getEditPanel())),this.dialogObj.destroy(),te(this.dialogObj.element),this.dialogRenderObj.close(b),this.dialogObj=null}},h=this.parent.createElement("div",{className:"e-img-content"});(!f(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode)&&h.appendChild(this.imgUpload(e));const c=this.parent.createElement("div",{className:"e-linkheader"}),m=this.i10n.getConstant("imageLinkHeader");c.innerHTML="HTML"===this.parent.editorMode?m:this.i10n.getConstant("mdimageLink"),h.appendChild(c),h.appendChild(this.imageUrlPopup(e)),e.selectNode&&"IMG"===e.selectNode[0].nodeName&&(l.header=this.parent.localeObj.getConstant("editImageHeader")),l.content=h,this.dialogObj=this.dialogRenderObj.render(l),this.dialogObj.createElement=this.parent.createElement,this.dialogObj.appendTo(t),!f(this.dialogObj)&&(e.selectNode&&"IMG"===e.selectNode[0].nodeName&&"insertImage"===e.name&&(this.dialogObj.element.querySelector(".e-insertImage").textContent=this.parent.localeObj.getConstant("dialogUpdate")),t.style.maxHeight="inherit",this.quickToolObj&&(this.quickToolObj.imageQTBar&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),f(e.selectParent)||W([e.selectParent[0]],"e-img-focus")),this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup()))}cancelDialog(e){this.parent.isBlur=!1,this.dialogObj.hide({returnValue:!0}),this.isImgUploaded&&this.uploadObj.removing()}onDocumentClick(e){const t=e.target;"IMG"===t.nodeName&&(this.imgEle=t),!f(this.dialogObj)&&(!B(t,"[id='"+this.dialogObj.element.id+"']")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!B(t,"#"+this.parent.getID()+"_toolbar_Image")&&!t.querySelector("#"+this.parent.getID()+"_toolbar_Image"))&&(e.offsetX>e.target.clientWidth||e.offsetY>e.target.clientHeight||(this.dialogObj.hide({returnValue:!0}),this.parent.isBlur=!0,J1(this.parent.element,"focusout"))),"IMG"!==e.target.tagName&&this.imgResizeDiv&&!(this.quickToolObj&&this.quickToolObj.imageQTBar&&this.quickToolObj.imageQTBar.element.contains(e.target))&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction(),this.contentModule.getEditPanel().querySelector(".e-img-resize")&&("IMG"!==t.tagName&&this.removeResizeEle(),"IMG"===t.tagName||f(this.imgEle)?!f(this.prevSelectedImgEle)&&this.prevSelectedImgEle!==t&&(this.prevSelectedImgEle.style.outline=""):this.imgEle.style.outline="")}removeResizeEle(){k.remove(this.contentModule.getDocument(),q.touchMoveEvent,this.resizing),k.remove(this.contentModule.getDocument(),q.touchEndEvent,this.resizeEnd),te(this.contentModule.getEditPanel().querySelector(".e-img-resize"))}onWindowResize(){!f(this.contentModule)&&!f(this.contentModule.getEditPanel().querySelector(".e-img-resize"))&&this.cancelResizeAction()}imageUrlPopup(e){const t=this.parent.createElement("div",{className:"imgUrl"}),i=this.i10n.getConstant("imageUrl");return this.inputUrl=this.parent.createElement("input",{className:"e-input e-img-url",attrs:{placeholder:i,spellcheck:"false"}}),this.inputUrl.addEventListener("input",()=>{f(this.inputUrl)||(0===this.inputUrl.value.length?this.dialogObj.getButtons(0).element.disabled=!0:this.dialogObj.getButtons(0).element.removeAttribute("disabled"))}),t.appendChild(this.inputUrl),t}insertImageUrl(e){const t=this.selfImage;t.isImgUploaded=!1;const i=t.inputUrl.value;if(0===t.parent.formatter.getUndoRedoStack().length&&t.parent.formatter.saveData(),f(t.uploadUrl)||""===t.uploadUrl.url){if(""!==i){if("HTML"===t.parent.editorMode&&f(B(this.selection.range.startContainer.parentNode,"[id='"+t.contentModule.getPanel().id+"']"))){t.contentModule.getEditPanel().focus();const a=t.parent.formatter.editorManager.nodeSelection.getRange(t.contentModule.getDocument());this.selection=t.parent.formatter.editorManager.nodeSelection.save(a,t.contentModule.getDocument()),this.selectParent=t.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(a)}const s=/[\w-]+.(jpg|png|jpeg|gif)/g,r=f(i.match(s))||"HTML"!==t.parent.editorMode?"":i.match(s)[0],o={cssClass:"inline"===t.parent.insertImageSettings.display?xy:wy,url:i,selection:this.selection,altText:r,selectParent:this.selectParent,width:{width:t.parent.insertImageSettings.width,minWidth:t.parent.insertImageSettings.minWidth,maxWidth:t.parent.getInsertImgMaxWidth()},height:{height:t.parent.insertImageSettings.height,minHeight:t.parent.insertImageSettings.minHeight,maxHeight:t.parent.insertImageSettings.maxHeight}};t.parent.formatter.process(t.parent,this.args,this.args.originalEvent,o),t.dialogObj.hide({returnValue:!1})}}else t.uploadUrl.cssClass="inline"===t.parent.insertImageSettings.display?xy:wy,t.dialogObj.hide({returnValue:!1}),t.parent.formatter.process(t.parent,this.args,this.args.originalEvent,t.uploadUrl),t.uploadUrl.url="",t.contentModule.getEditPanel().querySelector(".e-img-resize")&&(t.imgEle.style.outline="",t.removeResizeEle())}imgsizeInput(e){const t=e.selectNode[0],i=this.i10n.getConstant("imageHeight"),s=this.i10n.getConstant("imageWidth"),r=this.parent.createElement("div",{className:"e-img-sizewrap"}),o=!f(this.changedWidthValue)||"auto"!==t.style.width.toString()&&""===t.style.width?f(this.changedWidthValue)?parseInt(t.getClientRects()[0].width.toString(),10).toString():this.changedWidthValue:t.style.width,a=!f(this.changedHeightValue)||"auto"!==t.style.height.toString()&&""===t.style.height?f(this.changedHeightValue)?parseInt(t.getClientRects()[0].height.toString(),10).toString():this.changedHeightValue:t.style.height;this.changedWidthValue=null,this.changedHeightValue=null;const h=sI('<div class="e-rte-label"><label>'+s+'</label></div><div class="e-rte-field"><input type="text" id="imgwidth" class="e-img-width" value='+o+' /></div><div class="e-rte-label"><label>'+i+'</label></div><div class="e-rte-field"> <input type="text" id="imgheight" class="e-img-height" value='+a+" /></div>");r.appendChild(h);const c=new Uo({value:st(o),enableRtl:this.parent.enableRtl,input:b=>{this.inputWidthValue=st(this.inputValue(b.value))}});c.createElement=this.parent.createElement,c.appendTo(r.querySelector("#imgwidth"));const m=new Uo({value:st(a),enableRtl:this.parent.enableRtl,input:b=>{this.inputHeightValue=st(this.inputValue(b.value))}});return m.createElement=this.parent.createElement,m.appendTo(r.querySelector("#imgheight")),r}inputValue(e){return"auto"===e||-1!==e.indexOf("%")||-1!==e.indexOf("px")||e.match(/(\d+)/)?e:"auto"}insertSize(e){e.selection.restore();const t=e.selfImage;0===t.parent.formatter.getUndoRedoStack().length&&t.parent.formatter.saveData();const i=t.dialogObj.element;this.changedWidthValue=this.inputWidthValue,this.changedHeightValue=this.inputHeightValue;const s=i.querySelector(".e-img-width").value,r=i.parentElement.querySelector(".e-img-height").value;t.parent.formatter.process(this.parent,e.args,e.args,{width:s,height:r,selectNode:e.selectNode,subCommand:e.args.item.subCommand}),this.imgResizeDiv&&t.imgResizePos(e.selectNode[0],this.imgResizeDiv),t.dialogObj.hide({returnValue:!0})}insertImage(e){if(this.imagDialog(e),!f(this.dialogObj)){this.dialogObj.element.style.maxHeight="inherit";const t=this.dialogObj.element.querySelector(".e-img-content");!f(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode?document.getElementById(this.rteID+"_insertImage").focus():t.querySelector(".e-img-url").focus()}}imgUpload(e){let t,i;const s=this,r=s.parent.iframeSettings.enable;if("HTML"===s.parent.editorMode&&(!r&&f(B(e.selection.range.startContainer.parentNode,"[id='"+this.parent.contentModule.getPanel().id+"']"))||r&&!Xf(e.selection.range.startContainer.parentNode.ownerDocument.querySelector("body"),"e-lib"))){this.contentModule.getEditPanel().focus();const ie=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());t=this.parent.formatter.editorManager.nodeSelection.save(ie,this.parent.contentModule.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(ie)}else t=e.selection,i=e.selectParent;const o=this.parent.createElement("div",{className:"e-img-uploadwrap e-droparea"}),a=this.i10n.getConstant("imageDeviceUploadMessage"),l=this.i10n.getConstant("imageUploadMessage"),h=this.parent.createElement("span",{className:"e-droptext"}),c=this.parent.createElement("span",{className:"e-rte-upload-text",innerHTML:q.isDevice?a:l});h.appendChild(c);const m=this.parent.createElement("button",{className:"e-browsebtn",id:this.rteID+"_insertImage",attrs:{autofocus:"true",type:"button"}});h.appendChild(m),o.appendChild(h);const b=this.i10n.getConstant("browse"),v=new Sa({content:b,enableRtl:this.parent.enableRtl});v.isStringTemplate=!0,v.createElement=this.parent.createElement,v.appendTo(m),k.add(q.isDevice?h:m,"click",this.fileSelect,this);const E=this.parent.createElement("input",{id:this.rteID+"_upload",attrs:{type:"File",name:"UploadFiles"}});let D,L,N,V,$;return o.appendChild(E),this.uploadObj=new Ws({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},dropArea:h,multiple:!1,enableRtl:this.parent.enableRtl,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),selected:ie=>{s.isImgUploaded=!0,N=ie,V=ie.filesData,this.parent.isServerRendered&&(N=JSON.parse(JSON.stringify(ie)),ie.cancel=!0,L=ie.filesData,N.filesData=L),this.parent.trigger("imageSelected",N,Q=>{if(!Q.cancel){if(this.checkExtension(Q.filesData[0]),D=Q.filesData[0].name,"HTML"===this.parent.editorMode&&f(this.parent.insertImageSettings.path)){const le=new FileReader;le.addEventListener("load",ke=>{const Ye="Base64"===this.parent.insertImageSettings.saveFormat?le.result:URL.createObjectURL(U6(le.result));s.uploadUrl={url:Ye,selection:t,altText:D,selectParent:i,width:{width:s.parent.insertImageSettings.width,minWidth:s.parent.insertImageSettings.minWidth,maxWidth:s.parent.getInsertImgMaxWidth()},height:{height:s.parent.insertImageSettings.height,minHeight:s.parent.insertImageSettings.minHeight,maxHeight:s.parent.insertImageSettings.maxHeight}},s.inputUrl.setAttribute("disabled","true"),f(s.parent.insertImageSettings.saveUrl)&&this.isAllowedTypes&&!f(this.dialogObj)&&this.dialogObj.getButtons(0).element.removeAttribute("disabled")}),le.readAsDataURL(Q.filesData[0].rawFile)}this.parent.isServerRendered&&this.uploadObj._internalRenderSelect(Q,L)}})},beforeUpload:ie=>{this.parent.isServerRendered?($=JSON.parse(JSON.stringify(ie)),$.filesData=V,ie.cancel=!0,this.parent.trigger(K1,$,Q=>{Q.cancel||(this.uploadObj.currentRequestHeader=Q.currentRequest?Q.currentRequest:this.uploadObj.currentRequestHeader,this.uploadObj.customFormDatas=Q.customFormData&&Q.customFormData.length>0?Q.customFormData:this.uploadObj.customFormDatas,this.uploadObj.uploadFiles(L,null))})):this.parent.trigger(nQ,ie)},uploading:ie=>{this.parent.isServerRendered||this.parent.trigger(K1,ie)},success:ie=>{this.parent.trigger(tQ,ie,Q=>{f(this.parent.insertImageSettings.path)||(s.uploadUrl={url:this.parent.insertImageSettings.path+Q.file.name,selection:t,altText:D,selectParent:i,width:{width:s.parent.insertImageSettings.width,minWidth:s.parent.insertImageSettings.minWidth,maxWidth:s.parent.getInsertImgMaxWidth()},height:{height:s.parent.insertImageSettings.height,minHeight:s.parent.insertImageSettings.minHeight,maxHeight:s.parent.insertImageSettings.maxHeight}},s.inputUrl.setAttribute("disabled","true")),"upload"===Q.operation&&!f(this.dialogObj)&&this.dialogObj.getButtons(0).element.removeAttribute("disabled")})},failure:ie=>{this.parent.trigger(iQ,ie)},removing:()=>{this.parent.trigger("imageRemoving",e,ie=>{s.isImgUploaded=!1,this.dialogObj.getButtons(0).element.disabled=!0,s.inputUrl.removeAttribute("disabled"),s.uploadUrl&&(s.uploadUrl.url="")})}}),this.uploadObj.isStringTemplate=!0,this.uploadObj.createElement=this.parent.createElement,this.uploadObj.appendTo(E),o}checkExtension(e){this.uploadObj.allowedExtensions&&(-1===this.uploadObj.allowedExtensions.toLocaleLowerCase().indexOf(("."+e.type).toLocaleLowerCase())?(this.dialogObj.getButtons(0).element.setAttribute("disabled","disabled"),this.isAllowedTypes=!1):this.isAllowedTypes=!0)}fileSelect(){return this.dialogObj.element.getElementsByClassName("e-file-select-wrap")[0].querySelector("button").click(),!1}dragStart(e){if("IMG"!==e.target.nodeName)return!0;this.parent.trigger(Hp,e,t=>{t.cancel?e.preventDefault():(e.dataTransfer.effectAllowed="copyMove",e.target.classList.add(R6))})}dragEnter(e){e.dataTransfer.dropEffect="copy",e.preventDefault()}dragOver(e){if(!("edge"===q.info.name&&e.dataTransfer.items[0].type.split("/")[0].indexOf("image")>-1||q.isIE&&"Files"===e.dataTransfer.types[0]))return!0;e.preventDefault()}dragDrop(e){this.parent.trigger("beforeImageDrop",e,t=>{const i=this.parent.inputElement.ownerDocument.querySelector("."+R6),s=i&&"IMG"===i.tagName||t.dataTransfer.files.length>0;!t.cancel&&s?this.parent.trigger(Hp,t,r=>{if(r.cancel)t.preventDefault();else{if(B(t.target,"#"+this.parent.getID()+"_toolbar")||"false"===this.parent.inputElement.contentEditable)return void t.preventDefault();let o;if(this.parent.element.querySelector(".e-img-resize")&&te(this.imgResizeDiv),t.preventDefault(),this.contentModule.getDocument().caretRangeFromPoint?o=this.contentModule.getDocument().caretRangeFromPoint(t.clientX,t.clientY):t.rangeParent?(o=this.contentModule.getDocument().createRange(),o.setStart(t.rangeParent,t.rangeOffset)):o=this.getDropRange(t.clientX,t.clientY),this.parent.notify(w6,{range:o}),this.parent.element.querySelector(".e-droparea"))return;this.insertDragImage(t)}}):s&&t.preventDefault()})}getDropRange(e,t){const i=this.contentModule.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),i);const s=this.contentModule.getDocument().elementFromPoint(e,t),r=s.childNodes.length>0?s.childNodes[0]:s;let o=0;if("<br>"===this.parent.inputElement.firstChild.innerHTML)i.setStart(r,o),i.setEnd(r,o);else{let a;do{o++,i.setStart(r,o),i.setEnd(r,o+1),a=i.getBoundingClientRect()}while(a.left<e&&o<r.length-1)}return i}insertDragImage(e){e.preventDefault();const t=this.parent.element.querySelector(""+_Q);this.parent.notify("drop",{args:e}),t&&t.classList.add("e-hide");const i=this.parent.inputElement.ownerDocument.querySelector("."+R6);if(e.dataTransfer.files.length>0&&null===i){if(e.dataTransfer.files.length>1)return;const s=e.dataTransfer.files,r=s[0].name,o=r.substring(r.lastIndexOf(".")),a=this.parent.insertImageSettings.allowedTypes;for(let l=0;l<a.length;l++)if(o.toLocaleLowerCase()===a[l].toLowerCase())if(this.parent.insertImageSettings.saveUrl)this.onSelect(e);else{const h={args:e,text:"",file:s[0]};e.preventDefault(),this.imagePaste(h)}}else{const s=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());if(i&&"IMG"===i.tagName){i.nextElementSibling&&i.nextElementSibling.classList.contains("e-img-inner")?s.insertNode(i.parentElement.parentElement):s.insertNode(i),i.classList.remove(R6);const r={elements:[i]};i.addEventListener("load",()=>{this.parent.trigger(Ag,r)}),this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.resizeStart(e,i),this.hideImageQuickToolbar()}}}onSelect(e){const t=this,i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),s=this.parent.createElement("ul",{className:"e-upload-files"});this.parent.element.appendChild(s);const r={name:"",size:0,status:"",statusCode:"",type:"",rawFile:e.dataTransfer.files[0],validationMessages:{}},o=this.parent.createElement("IMG");o.style.opacity="0.5",o.classList.add(yN),o.classList.add(xy),o.classList.add("e-resize");const a=r.rawFile,l=new FileReader;l.addEventListener("load",()=>{const c=URL.createObjectURL(U6(l.result));o.src="Blob"===t.parent.insertImageSettings.saveFormat?c:l.result}),a&&l.readAsDataURL(a),i.insertNode(o),this.uploadMethod(e,o);const h={elements:[o]};o.addEventListener("load",()=>{this.parent.trigger(Ag,h)}),te(s)}uploadMethod(e,t){let i=!1;const s=this,r=this.parent.createElement("div");this.parent.element.appendChild(r);const o=this.parent.createElement("input",{id:this.rteID+"_upload",attrs:{type:"File",name:"UploadFiles"}});this.popupObj=new fc(r,{relateTo:t,height:"85px",width:"300px",offsetY:this.parent.iframeSettings.enable?-50:-90,content:o,viewPortElement:this.parent.element,position:{X:"center",Y:"top"},enableRtl:this.parent.enableRtl,zIndex:10001,close:b=>{this.parent.isBlur=!1,this.popupObj.destroy(),te(this.popupObj.element),this.popupObj=null,this.parent.inlineMode.enable||this.parent.toolbarModule.baseToolbar.toolbarObj.disable(!1)}}),this.popupObj.element.style.display="none",z([this.popupObj.element],_Q),z([this.popupObj.element],"e-rte-upload-popup");const l=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());let c,m;setTimeout(()=>{s.refreshPopup(t)},e.dataTransfer.files[0].size>1e6?300:100),this.uploadObj=new Ws({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},cssClass:"e-rte-dialog-upload",dropArea:this.parent.element,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),removing:()=>{this.parent.inputElement.contentEditable="true",i=!1,te(t),this.popupObj.close()},canceling:()=>{this.parent.inputElement.contentEditable="true",i=!1,te(t),this.popupObj.close(),this.quickToolObj.imageQTBar.hidePopup(),setTimeout(()=>{this.uploadObj.destroy()},900)},beforeUpload:b=>{this.parent.isServerRendered?(m=JSON.parse(JSON.stringify(b)),m.filesData=c,i=!0,b.cancel=!0,this.parent.trigger(K1,m,v=>{v.cancel||(this.parent.inlineMode.enable||this.parent.toolbarModule.baseToolbar.toolbarObj.disable(!0),this.uploadObj.currentRequestHeader=v.currentRequest?v.currentRequest:this.uploadObj.currentRequestHeader,this.uploadObj.customFormDatas=v.customFormData&&v.customFormData.length>0?v.customFormData:this.uploadObj.customFormDatas,this.uploadObj.uploadFiles(c,null),this.parent.inputElement.contentEditable="false")})):(this.parent.trigger(nQ,b),this.parent.inlineMode.enable||this.parent.toolbarModule.baseToolbar.toolbarObj.disable(!0))},uploading:b=>{this.parent.isServerRendered||(i=!0,this.parent.trigger(K1,b,v=>{v.cancel?(f(t)||te(t),f(this.popupObj.element)||te(this.popupObj.element)):this.parent.inputElement.contentEditable="false"}))},selected:b=>{i&&(b.cancel=!0),this.parent.isServerRendered&&(c=b.filesData)},failure:b=>{i=!1,this.parent.inputElement.contentEditable="true";const v={args:e,type:"Images",isNotify:void 0,elements:t};setTimeout(()=>{this.uploadFailure(t,v,b)},900)},success:b=>{if("cancel"===b.operation)return;i=!1,this.parent.inputElement.contentEditable="true";const v={args:e,type:"Images",isNotify:void 0,elements:t};setTimeout(()=>{this.uploadSuccess(t,e,v,b)},900)}}),this.uploadObj.appendTo(this.popupObj.element.childNodes[0]),this.popupObj.element.querySelector(".e-rte-dialog-upload .e-file-select-wrap").style.display="none",l.selectNodeContents(t),this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),l)}refreshPopup(e){(this.parent.iframeSettings.enable?this.parent.element.offsetTop+e.offsetTop:e.offsetTop)>this.parent.element.offsetTop+this.parent.element.offsetHeight?(this.popupObj.relateTo=this.parent.inputElement,this.popupObj.offsetY=this.parent.iframeSettings.enable?-30:-65,this.popupObj.element.style.display="block"):this.popupObj&&(this.popupObj.refreshPosition(e),this.popupObj.element.style.display="block")}uploadFailure(e,t,i){te(e),this.popupObj&&this.popupObj.close(),this.parent.trigger(iQ,i),this.uploadObj.destroy()}uploadSuccess(e,t,i,s){e.style.opacity="1",e.classList.add("e-img-focus"),s.element=e,this.parent.trigger(tQ,s,r=>{f(this.parent.insertImageSettings.path)||(e.src=this.parent.insertImageSettings.path+r.file.name,e.setAttribute("alt",r.file.name))}),this.popupObj&&(this.popupObj.close(),this.uploadObj.destroy()),this.showImageQuickToolbar(i),this.resizeStart(t,e)}imagePaste(e){if(0===e.text.length&&!f(e.file)){const t=this,i=new FileReader;e.args.preventDefault(),i.addEventListener("load",s=>{const r={cssClass:"inline"===t.parent.insertImageSettings.display?xy:wy,url:"Base64"!==this.parent.insertImageSettings.saveFormat&&f(e.callBack)?URL.createObjectURL(U6(i.result)):i.result,width:{width:t.parent.insertImageSettings.width,minWidth:t.parent.insertImageSettings.minWidth,maxWidth:t.parent.getInsertImgMaxWidth()},height:{height:t.parent.insertImageSettings.height,minHeight:t.parent.insertImageSettings.minHeight,maxHeight:t.parent.insertImageSettings.maxHeight}};f(e.callBack)?(t.parent.formatter.process(t.parent,{item:{command:"Images",subCommand:"Image"}},e.args,r),this.showPopupToolBar(e,r)):e.callBack(r)}),i.readAsDataURL(e.file)}}showPopupToolBar(e,t){const s=this.parent.inputElement.querySelector('img[src="'+t.url+'"]');this.parent.quickToolbarModule.createQTBar("Image","MultiRow",this.parent.quickToolbarSettings.image,Gs.ImageToolbar);const r={args:e.args,type:"Images",isNotify:void 0,elements:s};s&&setTimeout(()=>{this.showImageQuickToolbar(r),this.resizeStart(e.args,s)},0)}destroy(){this.prevSelectedImgEle=void 0,this.removeEventListener()}getModuleName(){return"image"}}},Lge={provide:"RichTextEditorHtmlEditor",useValue:class mHe{constructor(e,t){this.rangeCollection=[],this.isImageDelete=!1,this.parent=e,this.locator=t,this.renderFactory=this.locator.getService("rendererFactory"),this.xhtmlValidation=new fHe(e),this.addEventListener()}destroy(){this.removeEventListener()}sanitizeHelper(e){return function Pme(n,e){if(e.enableHtmlSanitizer){const t=hr.beforeSanitize();Ae(t,t,{cancel:!1,helper:null}),e.trigger("beforeSanitizeHtml",t),t.cancel&&!f(t.helper)?n=t.helper(n):t.cancel||(n=hr.serializeValue(t,n))}return n}(e,this.parent)}addEventListener(){this.parent.isDestroyed||(this.nodeSelectionObj=new Jd,this.colorPickerModule=new zme(this.parent,this.locator),this.parent.on($F,this.instantiateRenderer,this),this.parent.on(kX,this.onToolbarClick,this),this.parent.on(Xd,this.onKeyDown,this),this.parent.on(yy,this.onKeyUp,this),this.parent.on(m6,this.renderColorPicker,this),this.parent.on(cl,this.render,this),this.parent.on(Ul,this.onPropertyChanged,this),this.parent.on(Cs,this.destroy,this),this.parent.on(oN,this.selectAll,this),this.parent.on(w6,this.selectRange,this),this.parent.on(aN,this.getSelectedHtml,this),this.parent.on(vy,this.onSelectionSave,this),this.parent.on(Lg,this.onSelectionRestore,this),this.parent.on(lN,this.updateReadOnly,this),this.parent.on($1,this.onPaste,this))}updateReadOnly(){this.parent.readonly?(Rt(this.parent.contentModule.getEditPanel(),{contenteditable:"false"}),z([this.parent.element],bN)):(Rt(this.parent.contentModule.getEditPanel(),{contenteditable:"true"}),W([this.parent.element],bN))}onSelectionSave(){const e=this.contentRenderer.getDocument(),t=this.nodeSelectionObj.getRange(e);this.saveSelection=this.nodeSelectionObj.save(t,e)}onSelectionRestore(e){this.parent.isBlur=!1,this.contentRenderer.getEditPanel().focus(),(f(e.items)||e.items)&&this.saveSelection.restore()}onKeyUp(e){let t=e.args;const s=this.parent.getRange(),r=new RegExp(String.fromCharCode(8203),"g");let o;[8,9,13,16,17,18,20,27,37,38,39,40,44,45,46,91,112,113,114,115,116,117,118,119,120,121,122,123].indexOf(t.keyCode)<0&&!t.shiftKey&&!t.ctrlKey&&!t.altKey&&(8203===s.startContainer.textContent.charCodeAt(0)&&(o=s.startOffset-1,s.startContainer.textContent=s.startContainer.textContent.replace(r,""),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),s.startContainer,o)),!f(s.startContainer.previousSibling)&&!f(s.startContainer.previousSibling.parentElement)&&s.startContainer.parentElement===s.startContainer.previousSibling.parentElement&&8203===s.startContainer.previousSibling.textContent.charCodeAt(0)&&s.startContainer.previousSibling.textContent.length<=1&&(s.startContainer.previousSibling.textContent=s.startContainer.previousSibling.textContent.replace(r,"")),8203===s.endContainer.textContent.charCodeAt(s.endOffset)&&(o=s.startOffset,s.endContainer.textContent=s.endContainer.textContent.replace(r,""),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),s.startContainer,o)))}onKeyDown(e){let t;const i=e.args;if("chrome"===q.info.name&&(t=this.parent.getRange(),this.backSpaceCleanup(e,t),this.deleteCleanup(e,t)),9===i.keyCode&&this.parent.enableTabKey&&!f(i.target)&&f(B(i.target,".e-rte-toolbar"))){const s=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),r=this.nodeSelectionObj.getParentNodeCollection(s);if("LI"!==r[0].nodeName&&!B(r[0],"li")&&!B(r[0],"table")||0!==s.startOffset)if(i.preventDefault(),i.shiftKey){if(this.rangeCollection.length>0&&4===this.rangeCollection[this.rangeCollection.length-1].startContainer.textContent.length){const o=this.rangeCollection[this.rangeCollection.length-1].startContainer;this.nodeSelectionObj.setSelectionText(this.contentRenderer.getDocument(),o,o,0,o.textContent.length),Ty.Insert(this.contentRenderer.getDocument(),document.createTextNode("")),this.rangeCollection.pop()}}else Ty.Insert(this.contentRenderer.getDocument(),"&nbsp;&nbsp;&nbsp;&nbsp;"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()))}if(("space"===e.args.action||"enter"===e.args.action||13===e.args.keyCode)&&(this.spaceLink(e.args),"HTML"===this.parent.editorMode&&!this.parent.readonly&&this.parent.notify(eQ,{args:e.args})),"space"===e.args.action){const s=this.parent.getRange(),r=s.startContainer.textContent.slice(0,s.startOffset),o=this.isOrderedList(r),a=this.isUnOrderedList(r);if(o&&!a||a&&!o){const l={callBack:null,event:e.args,name:"keydown-handler"};this.parent.trigger(Hp,{cancel:!1,item:{command:"Lists",subCommand:o?"OL":"UL"},name:"actionBegin",originalEvent:e.args,requestType:o?"OL":"UL"},c=>{c.cancel||(this.parent.formatter.editorManager.observer.notify("onBegin",l),this.parent.trigger(Ag,{editorMode:this.parent.editorMode,elements:this.parent.formatter.editorManager.domNode.blockNodes(),event:e.args,name:Ag,range:this.parent.getRange(),requestType:o?"OL":"UL"}))})}}"chrome"===q.info.name&&(!f(this.rangeElement)&&!f(this.oldRangeElement)||!f(this.deleteRangeElement)&&!f(this.deleteOldRangeElement))&&"TD"!==t.startContainer.parentElement.tagName&&"TH"!==t.startContainer.parentElement.tagName&&(this.rangeElement=null,this.oldRangeElement=null,this.deleteRangeElement=null,this.deleteOldRangeElement=null,this.isImageDelete||i.preventDefault(),i.preventDefault())}isOrderedList(e){const t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!f(e=e.replace(/\u200B/g,"")))for(let i=0;i<t.length;i++)if(t[i].test(e))return!0;return!1}isUnOrderedList(e){const t=[/^[*]$/,/^[-]$/];if(!f(e=e.replace(/\u200B/g,"")))for(let i=0;i<t.length;i++)if(t[i].test(e))return!0;return!1}backSpaceCleanup(e,t){let i=!1;if("Backspace"===e.args.code&&8===e.args.keyCode&&0===t.startOffset&&0===t.endOffset&&0===this.parent.getSelection().length&&t.startContainer.textContent.length>0&&"TD"!==t.startContainer.parentElement.tagName&&"TH"!==t.startContainer.parentElement.tagName){if(this.rangeElement=this.getRootBlockNode(t.startContainer),"OL"===this.rangeElement.tagName||"UL"===this.rangeElement.tagName){const s=this.getRangeLiNode(t.startContainer);s.previousElementSibling&&s.previousElementSibling.childElementCount>0&&(this.oldRangeElement="BR"===s.previousElementSibling.lastElementChild.nodeName?s.previousElementSibling:s.previousElementSibling.lastElementChild,f(s.lastElementChild)||"BR"===s.lastElementChild.nodeName?this.rangeElement=s:(this.rangeElement=s.lastElementChild,i=!0))}else{if(this.rangeElement===this.parent.inputElement||"TABLE"===this.rangeElement.tagName||!f(this.rangeElement.previousElementSibling)&&"TABLE"===this.rangeElement.previousElementSibling.tagName)return;this.oldRangeElement=this.rangeElement.previousElementSibling}if(f(this.oldRangeElement))return;if(("OL"===this.oldRangeElement.tagName||"UL"===this.oldRangeElement.tagName)&&(this.oldRangeElement=this.oldRangeElement.lastElementChild.lastElementChild?this.oldRangeElement.lastElementChild.lastElementChild:this.oldRangeElement.lastElementChild),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),this.oldRangeElement,this.oldRangeElement.childNodes.length),this.oldRangeElement.querySelector("BR")&&te(this.oldRangeElement.querySelector("BR")),!f(this.rangeElement)&&this.oldRangeElement!==this.rangeElement){for(;this.rangeElement.firstChild;)this.oldRangeElement.appendChild(this.rangeElement.childNodes[0]);te(i?this.rangeElement.parentElement:this.rangeElement),this.oldRangeElement.normalize()}}}deleteCleanup(e,t){let s,r,i=!1;if("Delete"===e.args.code&&46===e.args.keyCode&&0!==this.parent.contentModule.getText().trim().length&&0===this.parent.getSelection().length&&"TD"!==t.startContainer.parentElement.tagName&&"TH"!==t.startContainer.parentElement.tagName){if(this.deleteRangeElement=r=this.getRootBlockNode(t.startContainer),"OL"===this.deleteRangeElement.tagName||"UL"===this.deleteRangeElement.tagName)s=this.getRangeLiNode(t.startContainer),s.nextElementSibling&&s.nextElementSibling.childElementCount>0&&!s.nextElementSibling.querySelector("BR")?f(s.lastElementChild)?this.deleteRangeElement=s:(this.deleteRangeElement=s.lastElementChild,i=!0):this.deleteRangeElement=this.getRangeElement(s);else if(3===this.deleteRangeElement.nodeType||"TABLE"===this.deleteRangeElement.tagName||!f(this.deleteRangeElement.nextElementSibling)&&"TABLE"===this.deleteRangeElement.nextElementSibling.tagName)return;if(this.getCaretIndex(t,this.deleteRangeElement)===this.deleteRangeElement.textContent.length){if(this.deleteOldRangeElement=f(s)?this.deleteRangeElement.nextElementSibling:i||!f(s.nextElementSibling)?this.getRangeElement(s.nextElementSibling):r.nextElementSibling,f(this.deleteOldRangeElement))return;if(0===t.startOffset&&1===t.endOffset&&"IMG"===this.deleteRangeElement.childNodes[0].nodeName?(this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(),this.deleteRangeElement,this.deleteRangeElement,0,1),this.isImageDelete=!0):(this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),this.deleteRangeElement,this.deleteRangeElement.childNodes.length),this.isImageDelete=!1),this.deleteRangeElement.querySelector("BR")&&te(this.deleteRangeElement.querySelector("BR")),f(this.deleteRangeElement)||"OL"===this.deleteOldRangeElement.tagName||"UL"===this.deleteOldRangeElement.tagName||this.deleteOldRangeElement===this.deleteRangeElement)this.deleteRangeElement=null,this.deleteOldRangeElement=null;else{for(;this.deleteOldRangeElement.firstChild;)this.deleteRangeElement.appendChild(this.deleteOldRangeElement.childNodes[0]);te(i?this.deleteOldRangeElement.parentElement:this.deleteOldRangeElement),this.deleteRangeElement.normalize()}}else this.deleteRangeElement=null}}getCaretIndex(e,t){let i=0;if(0!==this.parent.contentModule.getDocument().getSelection().rangeCount){const s=e.cloneRange();s.selectNodeContents(t),s.setEnd(e.endContainer,e.endOffset),i=s.toString().length}return i}getRangeElement(e){return e.lastElementChild?"BR"===e.lastElementChild.tagName?e.lastElementChild.previousElementSibling?e.lastElementChild.previousElementSibling:e:e.lastElementChild:e}getRootBlockNode(e){for(;e&&this.parent&&this.parent.inputElement!==e&&e.parentElement!==this.parent.inputElement;e=e)e=e.parentElement;return e}getRangeLiNode(e){let t=e.parentElement;for(;t!==this.parent.inputElement&&(1!==t.nodeType||"LI"!==t.tagName);)t=t.parentElement;return t}onPaste(e){const t=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(e.text.match(t)){if(e.isWordPaste)return;e.args.preventDefault();const i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),r=(this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument()),new RegExp(/([^\S]|^)(((https?\:\/\/)))/gi)),o=new RegExp(/([^\S]|^)(((www\.))(\S+))/gi),a=e.text.split("\n");let l="";for(let m=0;m<a.length;m++)if(""===a[m].trim())l+=AQ(this.parent);else{let b="",v=!0;const w=a[m].split(" ");for(let E=0;E<w.length;E++)""===w[E].trim()?b+=v?"&nbsp;":" ":(v=!1,b+=w[E]+" ");l+=0===m?"<span>"+b.trim()+"</span>":"<p>"+b.trim()+"</p>"}const h=this.parent.createElement("div");h.setAttribute("class","pasteContent"),h.style.display="inline",h.innerHTML=l.replace("&para","&amp;para");const c=h.querySelectorAll("span, p");for(let m=0;m<c.length;m++){const b=c[m].innerHTML.split(" ");let v="";for(let w=0;w<b.length;w++)b[w].match(r)||b[w].match(o)?v+='<a className="e-rte-anchor" href="'+b[w]+'" title="'+b[w]+'"target="_blank">'+b[w]+" </a>":v+=b[w]+" ";c[m].innerHTML=v.trim()}f(this.parent.pasteCleanupModule)?this.parent.formatter.editorManager.execCommand("insertHTML",null,null,null,h):e.callBack(h.innerHTML)}}spaceLink(e){const t=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),i=this.nodeSelectionObj.getParentNodeCollection(t),s=t.startContainer.textContent.substr(0,t.endOffset),r=s.split(" ");let o=r[r.length-1];o=o.slice(0,t.startOffset-(s.length-r[r.length-1].length));const l=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if("A"!==i[0].nodeName&&o.match(l)){const h=this.nodeSelectionObj.save(t,this.parent.contentModule.getDocument()),c=o.indexOf("http")>-1?o:"http://"+o,m=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t);this.parent.formatter.process(this.parent,{item:{command:"Links",subCommand:"CreateLink"}},e,{url:c,selection:h,selectParent:m,text:o,title:"",target:"_blank"})}}onToolbarClick(e){let t,i,s;const r=e.item,o=B(e.originalEvent.target,".e-rte-quick-popup");if(o&&!o.classList.contains("e-rte-inline-popup")){if("SourceCode"!==r.subCommand&&"Preview"!==r.subCommand&&"FontColor"!==r.subCommand&&"BackgroundColor"!==r.subCommand){Vu()&&"Images"===r.command&&this.nodeSelectionObj.restore();const a=this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());t=this.nodeSelectionObj.save(a,this.parent.contentModule.getDocument()),i=this.nodeSelectionObj.getNodeCollection(a),s=this.nodeSelectionObj.getParentNodeCollection(a)}"Images"===r.command&&this.parent.notify(OX,{member:"image",args:e,selectNode:i,selection:t,selectParent:s}),"Links"===r.command&&this.parent.notify(PX,{member:"link",args:e,selectNode:i,selection:t,selectParent:s}),"Table"===r.command&&this.parent.notify("table-toolbar-action",{member:"table",args:e,selectNode:i,selection:t,selectParent:s})}else{const a=document.getElementById(this.parent.getID()+"_rtelink"),l=document.getElementById(this.parent.getID()+"_image");if("SourceCode"!==r.subCommand&&"Preview"!==r.subCommand&&"FontColor"!==r.subCommand&&"BackgroundColor"!==r.subCommand){const h=this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());f(a)&&f(l)&&(t=this.nodeSelectionObj.save(h,this.parent.contentModule.getDocument())),i=this.nodeSelectionObj.getNodeCollection(h),s=this.nodeSelectionObj.getParentNodeCollection(h)}switch(r.subCommand){case"Maximize":this.parent.notify(g6,{args:e});break;case"Minimize":this.parent.notify(b6,{args:e});break;case"CreateLink":this.parent.notify(y6,{member:"link",args:e,selectNode:i,selection:t,selectParent:s});break;case"RemoveLink":this.parent.notify(v6,{member:"link",args:e,selectNode:i,selection:t,selectParent:s});break;case"Print":this.parent.print();break;case"Image":this.parent.notify(QF,{member:"image",args:e,selectNode:i,selection:t,selectParent:s});break;case"CreateTable":this.parent.notify("createTable",{member:"table",args:e,selection:t});break;case"SourceCode":this.parent.notify(G1,{member:"viewSource",args:e});break;case"Preview":this.parent.notify(eN,{member:"updateSource",args:e});break;case"FontColor":case"BackgroundColor":break;case"File":this.parent.notify(S6,{member:"fileManager",args:e,selectNode:i,selection:t,selectParent:s});break;default:this.parent.formatter.process(this.parent,e,e.originalEvent,null)}}}renderColorPicker(e){this.colorPickerModule.renderColorPickerInput(e)}instantiateRenderer(){this.renderFactory.addRenderer(Gs.Content,this.parent.iframeSettings.enable?new pHe(this.parent,this.locator):new xge(this.parent,this.locator))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(cl,this.render),this.parent.off(Ul,this.onPropertyChanged),this.parent.off(kX,this.onToolbarClick),this.parent.off(m6,this.renderColorPicker),this.parent.off(Cs,this.destroy),this.parent.off(Xd,this.onKeyDown),this.parent.off($F,this.instantiateRenderer),this.parent.off(oN,this.selectAll),this.parent.off(w6,this.selectRange),this.parent.off(aN,this.getSelectedHtml),this.parent.off(vy,this.onSelectionSave),this.parent.off(Lg,this.onSelectionRestore),this.parent.off(lN,this.updateReadOnly),this.parent.off($1,this.onPaste))}render(){this.contentRenderer=this.renderFactory.getRenderer(Gs.Content);const e=this.contentRenderer.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};if(f(this.parent.formatter)){const i=new hHe({currentDocument:this.contentRenderer.getDocument(),element:e,options:t});this.parent.setProperties({formatter:i},!0)}else this.parent.formatter.updateFormatter(e,this.contentRenderer.getDocument(),t);this.parent.enableXhtml&&this.parent.notify(hN,{}),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new dHe(this.parent)),this.parent.inlineMode.enable&&(f(this.parent.fontFamily.default)||(e.style.fontFamily=this.parent.fontFamily.default),f(this.parent.fontSize.default)||(e.style.fontSize=this.parent.fontSize.default)),this.parent.notify(f6,{})}onPropertyChanged(e){if(!f(e.newProp.formatter)){const t=this.contentRenderer.getEditPanel(),i={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter.updateFormatter(t,this.contentRenderer.getDocument(),i)}}getModuleName(){return"htmlEditor"}selectAll(){const e=Mme(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel());e.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(),e[0],e[e.length-1],0,e[e.length-1].textContent.length)}selectRange(e){this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.contentModule.getDocument(),e.range)}getSelectedHtml(e){e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).toString())}}};function Yi(n){return null!=n&&"false"!=`${n}`}function PS(n,e=0){return function BHe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function Mge(n){return Array.isArray(n)?n:[n]}function ql(n){return null==n?"":"string"==typeof n?n:`${n}px`}function oI(n){return n instanceof d.SBq?n.nativeElement:n}function Ko(n){return(0,Mo.e)((e,t)=>{(0,yh.Xf)(n).subscribe((0,gn.x)(t,()=>t.complete(),Jie.Z)),!t.closed&&e.subscribe(t)})}var HHe=se(3532);function Oge(n=0,e,t=O0.P){let i=-1;return null!=e&&((0,HHe.K)(e)?t=e:i=e),new Fn.y(s=>{let r=function VHe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;r<0&&(r=0);let o=0;return t.schedule(function(){s.closed||(s.next(o++),0<=i?this.schedule(void 0,i):s.complete())},r)})}var zHe=se(1144);const jHe=["addListener","removeListener"],UHe=["addEventListener","removeEventListener"],qHe=["on","off"];function aI(n,e,t,i){if((0,rc.m)(t)&&(i=t,t=void 0),i)return aI(n,e,t).pipe(tf(i));const[s,r]=function $He(n){return(0,rc.m)(n.addEventListener)&&(0,rc.m)(n.removeEventListener)}(n)?UHe.map(o=>a=>n[o](e,a,t)):function WHe(n){return(0,rc.m)(n.addListener)&&(0,rc.m)(n.removeListener)}(n)?jHe.map(Pge(n,e)):function GHe(n){return(0,rc.m)(n.on)&&(0,rc.m)(n.off)}(n)?qHe.map(Pge(n,e)):[];if(!s&&(0,zHe.z)(n))return(0,ho.z)(o=>aI(o,e,t))((0,yh.Xf)(n));if(!s)throw new TypeError("Invalid event target");return new Fn.y(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return s(a),()=>r(a)})}function Pge(n,e){return t=>i=>n[t](e,i)}var Fge=se(4408);const IN={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=IN;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const s=e(r=>{t=void 0,n(r)});return new fl.w0(()=>null==t?void 0:t(s))},requestAnimationFrame(...n){const{delegate:e}=IN;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=IN;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var Nge=se(7565);const Bge=new class YHe extends Nge.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let s;e=e||i.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,s){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw s}}}(class KHe extends Fge.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=IN.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(s=>s.id===t)||(IN.cancelAnimationFrame(t),e._scheduled=void 0)}});let WQ;try{WQ="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){WQ=!1}let TN,lI,$Q,Qf=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?hn(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!WQ)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function GQ(n){return function ZHe(){if(null==TN&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>TN=!0}))}finally{TN=TN||!1}return TN}()?n:!!n.capture}function XHe(){if(null==lI){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return lI=!1,lI;if("scrollBehavior"in document.documentElement.style)lI=!0;else{const n=Element.prototype.scrollTo;lI=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return lI}function hI(n){return n.composedPath?n.composedPath()[0]:n.target}function KQ(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function cI(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}let qge=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fVe=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=oI(t);return new Fn.y(s=>{const o=this._observeElement(i).subscribe(s);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new _s.x,s=this._mutationObserverFactory.create(r=>i.next(r));s&&s.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:s,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:s}=this._observedElements.get(t);i&&i.disconnect(),s.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qge))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mVe=(()=>{class n{constructor(t,i,s){this._contentObserver=t,this._elementRef=i,this._ngZone=s,this.event=new d.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Yi(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=PS(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(ip(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fVe),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Wge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[qge]}),n})();class Kge{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new _s.x,this._typeaheadSubscription=fl.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new _s.x,this.change=new _s.x,e instanceof d.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const s=t.toArray().indexOf(this._activeItem);s>-1&&s!==this._activeItemIndex&&(this._activeItemIndex=s)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,ya.b)(t=>this._pressedLetters.push(t)),ip(e),Un(()=>this._pressedLetters.length>0),(0,Ni.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let s=1;s<i.length+1;s++){const r=(this._activeItemIndex+s)%i.length,o=i[r];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(r);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,s=["altKey","ctrlKey","metaKey","shiftKey"].every(r=>!e[r]||this._allowedModifierKeys.indexOf(r)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&s){this.setNextItemActive();break}return;case 38:if(this._vertical&&s){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&s){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&s){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&s){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&s){this.setLastItemActive();break}return;default:return void((s||cI(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),s=t[i];this._activeItem=null==s?null:s,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const s=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[s]))return void this.setActiveItem(s)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof d.n_E?this._items.toArray():this._items}}class yVe extends Kge{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class vVe extends Kge{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let CVe=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function SVe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function wVe(n){try{return n.frameElement}catch(e){return null}}(function RVe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===Zge(i)||!this.isVisible(i)))return!1;let s=t.nodeName.toLowerCase(),r=Zge(t);return t.hasAttribute("contenteditable")?-1!==r:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function DVe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===s?!!t.hasAttribute("controls")&&-1!==r:"video"===s?-1!==r&&(null!==r||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function kVe(n){return!function EVe(n){return function IVe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function xVe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function _Ve(n){return function TVe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||Yge(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Qf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yge(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function Zge(n){if(!Yge(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class AVe{constructor(e,t,i,s,r=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const s=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(s)return s}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const s=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(s)return s}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,tl.q)(1)).subscribe(e)}}let LVe=(()=>{class n{constructor(t,i,s){this._checker=t,this._ngZone=i,this._document=s}create(t,i=!1){return new AVe(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(CVe),d.LFG(d.R0b),d.LFG(Pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MVe=(()=>{class n{constructor(t,i,s){this._elementRef=t,this._focusTrapFactory=i,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=Yi(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=Yi(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const i=t.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=function eVe(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}(),this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(LVe),d.Y36(Pe))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[d.TTD]}),n})();function Xge(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Qge(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const OVe=new d.OlP("cdk-input-modality-detector-options"),PVe={ignoreKeys:[18,17,224,91,16]},lR=GQ({passive:!0,capture:!0});let FVe=(()=>{class n{constructor(t,i,s,r){this._platform=t,this._mostRecentTarget=null,this._modality=new el(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(h=>h===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=hI(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Xge(o)?"keyboard":"mouse"),this._mostRecentTarget=hI(o))},this._onTouchstart=o=>{Qge(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=hI(o))},this._options=Object.assign(Object.assign({},PVe),r),this.modalityDetected=this._modality.pipe(function pVe(n){return Un((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(QA()),t.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,lR),s.addEventListener("mousedown",this._onMousedown,lR),s.addEventListener("touchstart",this._onTouchstart,lR)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,lR),document.removeEventListener("mousedown",this._onMousedown,lR),document.removeEventListener("touchstart",this._onTouchstart,lR))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Qf),d.LFG(d.R0b),d.LFG(Pe),d.LFG(OVe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const NVe=new d.OlP("liveAnnouncerElement",{providedIn:"root",factory:function BVe(){return null}}),HVe=new d.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let VVe=(()=>{class n{constructor(t,i,s,r){this._ngZone=i,this._defaultOptions=r,this._document=s,this._liveElement=t||this._createLiveElement()}announce(t,...i){const s=this._defaultOptions;let r,o;return 1===i.length&&"number"==typeof i[0]?o=i[0]:[r,o]=i,this.clear(),clearTimeout(this._previousTimeout),r||(r=s&&s.politeness?s.politeness:"polite"),null==o&&s&&(o=s.duration),this._liveElement.setAttribute("aria-live",r),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t,i;clearTimeout(this._previousTimeout),null===(t=this._liveElement)||void 0===t||t.remove(),this._liveElement=null,null===(i=this._currentResolve)||void 0===i||i.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),s=this._document.createElement("div");for(let r=0;r<i.length;r++)i[r].remove();return s.classList.add(t),s.classList.add("cdk-visually-hidden"),s.setAttribute("aria-atomic","true"),s.setAttribute("aria-live","polite"),this._document.body.appendChild(s),s}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(NVe,8),d.LFG(d.R0b),d.LFG(Pe),d.LFG(HVe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zVe=new d.OlP("cdk-focus-monitor-default-options"),tU=GQ({passive:!0,capture:!0});let jVe=(()=>{class n{constructor(t,i,s,r,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new _s.x,this._rootNodeFocusAndBlurListener=a=>{const l=hI(a),h="focus"===a.type?this._onFocus:this._onBlur;for(let c=l;c;c=c.parentElement)h.call(this,a,c)},this._document=r,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,i=!1){const s=oI(t);if(!this._platform.isBrowser||1!==s.nodeType)return ei(null);const r=function JHe(n){if(function QHe(){if(null==$Q){const n="undefined"!=typeof document?document.head:null;$Q=!(!n||!n.createShadowRoot&&!n.attachShadow)}return $Q}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(s)||this._getDocument(),o=this._elementInfo.get(s);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new _s.x,rootNode:r};return this._elementInfo.set(s,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=oI(t),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(t,i,s){const r=oI(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof r.focus&&r.focus(s))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const s=this._elementInfo.get(i),r=hI(t);!s||!s.checkChildren&&i!==r||this._originChanged(i,this._getFocusOrigin(r),s)}_onBlur(t,i){const s=this._elementInfo.get(i);!s||s.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(s.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,tU),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,tU)}),this._rootNodeFocusListenerCount.set(i,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ko(this._stopInputModalityDetector)).subscribe(r=>{this._setOrigin(r,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,tU),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,tU),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,s){this._setClasses(t,i),this._emitOrigin(s.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((s,r)=>{(r===t||s.checkChildren&&r.contains(t))&&i.push([r,s])}),i}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(Qf),d.LFG(FVe),d.LFG(Pe,8),d.LFG(zVe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ebe="cdk-high-contrast-black-on-white",tbe="cdk-high-contrast-white-on-black",QQ="cdk-high-contrast-active";let ibe=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(t):null,r=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(QQ),t.remove(ebe),t.remove(tbe),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(QQ),t.add(ebe)):2===i&&(t.add(QQ),t.add(tbe))}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Qf),d.LFG(Pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UVe=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ibe))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Wge]]}),n})();const Mg=["*"],qVe=["mdbBtn",""],WVe=["card"];function GVe(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",6)(1,"a",7),d.NdJ("click",function(){return d.CHM(t),d.oxw().previousSlide()}),d._UZ(2,"i",8),d.qZA(),d.TgZ(3,"a",7),d.NdJ("click",function(){return d.CHM(t),d.oxw().nextSlide()}),d._UZ(4,"i",9),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.ekj("disabled",0===t.activeSlide&&t.noWrap),d.xp6(2),d.ekj("disabled",t.isLast(t.activeSlide)&&t.noWrap)}}function $Ve(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",12),d.NdJ("click",function(){const r=d.CHM(t).index;return d.oxw(2).selectSlide(r)}),d.qZA()}2&n&&d.ekj("active",!0===e.$implicit.active)}function KVe(n,e){if(1&n&&(d.TgZ(0,"ol",10),d.YNc(1,$Ve,1,2,"li",11),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.slides)}}function YVe(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",12),d.NdJ("click",function(){const r=d.CHM(t).index;return d.oxw(2).selectSlide(r)}),d._UZ(1,"img",13),d.qZA()}if(2&n){const t=e.$implicit,i=d.oxw(2);d.ekj("active",!0===t.active),d.xp6(1),d.s9C("src",i.getImg(t),d.LSH)}}function ZVe(n,e){if(1&n&&(d.TgZ(0,"ol",10),d.YNc(1,YVe,2,3,"li",11),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.slides)}}function XVe(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",14),d.NdJ("click",function(){return d.CHM(t),d.oxw().previousSlide()}),d._UZ(1,"span",15),d.TgZ(2,"span",16),d._uU(3,"Previous"),d.qZA()()}if(2&n){const t=d.oxw();d.ekj("disabled",0===t.activeSlide&&t.noWrap)}}function QVe(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",17),d.NdJ("click",function(){return d.CHM(t),d.oxw().nextSlide()}),d._UZ(1,"span",18),d.TgZ(2,"span",16),d._uU(3,"Next"),d.qZA()()}if(2&n){const t=d.oxw();d.ekj("disabled",t.isLast(t.activeSlide)&&t.noWrap)}}const JVe=["input"],eze=function(n,e,t,i){return{"custom-control custom-checkbox":n,"form-check":e,"custom-control-inline":t,"form-check-inline":i}},tze=function(n,e,t){return{"filled-in":n,"custom-control-input":e,"form-check-input":t}},ize=function(n,e,t,i,s){return{"custom-control-label":n,"form-check-label":e,"label-before":t,"checkbox-rounded":i,disabled:s}},nze=["navbar"],rze=["mobile"],oze=["nav"],aze=["container"],lze=["toggler"];function hze(n,e){1&n&&d.Hsn(0,4,["*ngIf","this.doubleNav == true"])}function cze(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",7,8),d.NdJ("click",function(s){return d.CHM(t),d.oxw(2).toggle(),s.preventDefault()}),d._UZ(2,"span",9),d.qZA()}if(2&n){const t=d.oxw(2);d.uIk("aria-controls",t.collapseId)("aria-expanded",t.ariaExpanded)}}function dze(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,cze,3,2,"button",6),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",0!==t.el.nativeElement.children.length)}}const uze=[[["mdb-navbar-brand"]],[["logo"]],"*",[["links"]],[["navlinks"]]],pze=function(n){return{container:n}},fze=function(n){return{display:n}},mze=function(n,e,t){return{collapse:n,show:e,collapsing:t}},gze=["mdb-navbar-brand","logo","*","links","navlinks"];let iU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),sU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Lo]]}),n})(),zu=(()=>{class n{constructor(t,i){this.el=t,this.renderer=i,this.color="",this._rounded=!1,this.gradient="",this._outline=!1,this._flat=!1,this.size="",this._block=!1,this._floating=!1}get rounded(){return this._rounded}set rounded(t){this._rounded=Yi(t)}get outline(){return this._outline}set outline(t){this._outline=Yi(t)}get flat(){return this._flat}set flat(t){this._flat=Yi(t)}get block(){return this._block}set block(t){this._block=Yi(t)}get floating(){return this._floating}set floating(t){this._floating=Yi(t)}ngOnInit(){this.colorClass="btn-"+this.color,this.gradientClass=this.gradient+"-gradient",this.outlineClass="btn-outline-"+this.color,this.flatClass="btn-flat",this.roundedClass="btn-rounded",this.sizeClass="btn-"+this.size,this.blockClass="btn-block",this.floatingClass="btn-floating",this.renderer.addClass(this.el.nativeElement,"btn"),this.initClasses()}ngOnChanges(t){if(t.color&&(this.renderer.removeClass(this.el.nativeElement,this.colorClass),this.color&&""!==this.color&&(this.colorClass="btn-"+this.color,this.renderer.addClass(this.el.nativeElement,this.colorClass)),this.outline)){const i=this.outlineClass;this.outlineClass="btn-outline-"+this.color,this.renderer.removeClass(this.el.nativeElement,i),this.renderer.addClass(this.el.nativeElement,this.outlineClass)}t.gradient&&(this.renderer.removeClass(this.el.nativeElement,this.gradientClass),""!==this.gradient&&(this.gradientClass=this.gradient+"-gradient",this.renderer.addClass(this.el.nativeElement,this.gradientClass))),t.outline&&(this.outline||this.renderer.removeClass(this.el.nativeElement,this.outlineClass),this.outline&&(this.renderer.removeClass(this.el.nativeElement,this.colorClass),this.renderer.addClass(this.el.nativeElement,this.outlineClass)),this.outlineClass="btn-outline-"+this.color),t.flat&&(this.renderer.removeClass(this.el.nativeElement,this.flatClass),this.flat&&(this.color&&this.renderer.removeClass(this.el.nativeElement,this.colorClass),this.gradient&&this.renderer.removeClass(this.el.nativeElement,this.gradientClass),this.outline&&this.renderer.removeClass(this.el.nativeElement,this.outlineClass),this.rounded&&this.renderer.removeClass(this.el.nativeElement,this.roundedClass),this.renderer.addClass(this.el.nativeElement,this.flatClass))),t.rounded&&(this.renderer.removeClass(this.el.nativeElement,this.roundedClass),this.rounded&&(this.roundedClass="btn-rounded",this.renderer.addClass(this.el.nativeElement,this.roundedClass))),t.size&&(this.renderer.removeClass(this.el.nativeElement,this.sizeClass),""!==this.size&&(this.sizeClass="btn-"+this.size,this.renderer.addClass(this.el.nativeElement,this.sizeClass))),t.block&&(this.renderer.removeClass(this.el.nativeElement,this.blockClass),this.block&&(this.blockClass="btn-block",this.renderer.addClass(this.el.nativeElement,this.blockClass))),t.floating&&(this.floating||(this.renderer.removeClass(this.el.nativeElement,this.floatingClass),this.renderer.addClass(this.el.nativeElement,"btn")),this.floating&&(this.floatingClass="btn-floating",this.renderer.addClass(this.el.nativeElement,this.floatingClass),this.renderer.removeClass(this.el.nativeElement,"btn")))}initClasses(){""!==this.color&&this.renderer.addClass(this.el.nativeElement,this.colorClass),this.rounded&&this.renderer.addClass(this.el.nativeElement,this.roundedClass),this.gradient&&(""!==this.color&&this.renderer.removeClass(this.el.nativeElement,this.colorClass),this.renderer.addClass(this.el.nativeElement,this.gradientClass)),this.outline&&(this.renderer.removeClass(this.el.nativeElement,this.colorClass),this.renderer.addClass(this.el.nativeElement,this.outlineClass)),this.flat&&(this.color&&this.renderer.removeClass(this.el.nativeElement,this.colorClass),this.gradient&&this.renderer.removeClass(this.el.nativeElement,this.gradientClass),this.outline&&this.renderer.removeClass(this.el.nativeElement,this.outlineClass),this.rounded&&this.renderer.removeClass(this.el.nativeElement,this.roundedClass),this.renderer.addClass(this.el.nativeElement,this.flatClass)),this.size&&this.renderer.addClass(this.el.nativeElement,this.sizeClass),this.block&&this.renderer.addClass(this.el.nativeElement,this.blockClass),this.floating&&(this.renderer.addClass(this.el.nativeElement,this.floatingClass),this.renderer.removeClass(this.el.nativeElement,"btn"))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275cmp=d.Xpm({type:n,selectors:[["","mdbBtn",""]],inputs:{color:"color",rounded:"rounded",gradient:"gradient",outline:"outline",flat:"flat",size:"size",block:"block",floating:"floating"},features:[d.TTD],attrs:qVe,ngContentSelectors:Mg,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},styles:[".btn{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;padding:.84rem 2.14rem;font-size:.81rem;transition:all .2s ease-in-out;margin:.375rem;border:0;border-radius:.125rem;cursor:pointer;text-transform:uppercase;white-space:normal;word-wrap:break-word;color:inherit}.btn:hover,.btn:active,.btn:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;outline:0}.btn:not([disabled]):not(.disabled):active,.btn:not([disabled]):not(.disabled).active{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn .fas,.btn .fab,.btn .far{position:relative;font-size:.9rem}.btn .fas.right,.btn .fab.right,.btn .far.right{margin-left:.3rem}.btn .fas.left,.btn .fab.left,.btn .far.left{margin-right:.3rem}.btn.btn-lg .fas,.btn.btn-lg .fab,.btn.btn-lg .far{font-size:1rem}.btn.btn-md .fas,.btn.btn-md .fab,.btn.btn-md .far{font-size:.8rem}.btn.btn-sm .fas,.btn.btn-sm .fab,.btn.btn-sm .far{font-size:.7rem}.btn.btn-tb{padding:.3rem 1rem}.btn.disabled:active,.btn.disabled:focus,.btn.disabled:hover,.btn:disabled:active,.btn:disabled:focus,.btn:disabled:hover{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f}.btn.btn-block{margin:inherit}.btn.btn-link{color:#000;box-shadow:none;background-color:transparent}.btn.btn-link:active,.btn.btn-link:focus,.btn.btn-link:hover{box-shadow:none!important;background-color:transparent}.btn[class*=btn-outline-]{padding-top:.7rem;padding-bottom:.7rem}.btn[class*=btn-outline-].btn-lg{padding-top:.88rem;padding-bottom:.88rem}.btn[class*=btn-outline-].btn-md{padding-top:.58rem;padding-bottom:.58rem}.btn[class*=btn-outline-].btn-sm{padding-top:.38rem;padding-bottom:.38rem}.btn-group .btn{margin:0}.btn .fa-lg,.btn-floating .fa-lg{font-size:1.33333em!important}.btn .fa-xs,.btn-floating .fa-xs{font-size:.75em!important}.btn .fa-sm,.btn-floating .fa-sm{font-size:.875em!important}.btn .fa-1x,.btn-floating .fa-1x{font-size:1em!important}.btn .fa-2x,.btn-floating .fa-2x{font-size:2em!important}.btn .fa-3x,.btn-floating .fa-3x{font-size:3em!important}.btn .fa-4x,.btn-floating .fa-4x{font-size:4em!important}.btn .fa-5x,.btn-floating .fa-5x{font-size:5em!important}.btn .fa-6x,.btn-floating .fa-6x{font-size:6em!important}.btn .fa-7x,.btn-floating .fa-7x{font-size:7em!important}.btn .fa-8x,.btn-floating .fa-8x{font-size:8em!important}.btn .fa-9x,.btn-floating .fa-9x{font-size:9em!important}.btn .fa-10x,.btn-floating .fa-10x{font-size:10em!important}.btn-primary{background-color:#4285f4!important;color:#fff}.btn-primary:hover{background-color:#5a95f5;color:#fff}.btn-primary:focus,.btn-primary.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-primary:focus,.btn-primary:active,.btn-primary.active{background-color:#0b51c5}.btn-primary.dropdown-toggle{background-color:#4285f4!important}.btn-primary.dropdown-toggle:hover,.btn-primary.dropdown-toggle:focus{background-color:#5a95f5!important}.btn-primary:not([disabled]):not(.disabled):active,.btn-primary:not([disabled]):not(.disabled).active,.show>.btn-primary.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#0b51c5!important}.btn-primary:not([disabled]):not(.disabled):active:focus,.btn-primary:not([disabled]):not(.disabled).active:focus,.show>.btn-primary.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.primary-ic{color:#4285f4!important}.primary-ic:hover,.primary-ic:focus{color:#4285f4}table.table a.btn.btn-primary{color:#fff}.btn-outline-primary{border:2px solid #4285f4!important;background-color:transparent!important;color:#4285f4!important}.btn-outline-primary:hover,.btn-outline-primary:focus,.btn-outline-primary:active,.btn-outline-primary:active:focus,.btn-outline-primary.active{border-color:#4285f4!important;background-color:transparent!important;color:#4285f4!important}.btn-outline-primary:not([disabled]):not(.disabled):active,.btn-outline-primary:not([disabled]):not(.disabled).active,.show>.btn-outline-primary.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#4285f4!important}.btn-outline-primary:not([disabled]):not(.disabled):active:focus,.btn-outline-primary:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-primary.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-danger{background-color:#ff3547!important;color:#fff}.btn-danger:hover{background-color:#ff4f5e;color:#fff}.btn-danger:focus,.btn-danger.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-danger:focus,.btn-danger:active,.btn-danger.active{background-color:#ce0012}.btn-danger.dropdown-toggle{background-color:#ff3547!important}.btn-danger.dropdown-toggle:hover,.btn-danger.dropdown-toggle:focus{background-color:#ff4f5e!important}.btn-danger:not([disabled]):not(.disabled):active,.btn-danger:not([disabled]):not(.disabled).active,.show>.btn-danger.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#ce0012!important}.btn-danger:not([disabled]):not(.disabled):active:focus,.btn-danger:not([disabled]):not(.disabled).active:focus,.show>.btn-danger.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.danger-ic{color:#ff3547!important}.danger-ic:hover,.danger-ic:focus{color:#ff3547}table.table a.btn.btn-danger{color:#fff}.btn-outline-danger{border:2px solid #ff3547!important;background-color:transparent!important;color:#ff3547!important}.btn-outline-danger:hover,.btn-outline-danger:focus,.btn-outline-danger:active,.btn-outline-danger:active:focus,.btn-outline-danger.active{border-color:#ff3547!important;background-color:transparent!important;color:#ff3547!important}.btn-outline-danger:not([disabled]):not(.disabled):active,.btn-outline-danger:not([disabled]):not(.disabled).active,.show>.btn-outline-danger.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#ff3547!important}.btn-outline-danger:not([disabled]):not(.disabled):active:focus,.btn-outline-danger:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-danger.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-warning{background-color:#fb3!important;color:#fff}.btn-warning:hover{background-color:#ffc44d;color:#fff}.btn-warning:focus,.btn-warning.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-warning:focus,.btn-warning:active,.btn-warning.active{background-color:#c80}.btn-warning.dropdown-toggle{background-color:#fb3!important}.btn-warning.dropdown-toggle:hover,.btn-warning.dropdown-toggle:focus{background-color:#ffc44d!important}.btn-warning:not([disabled]):not(.disabled):active,.btn-warning:not([disabled]):not(.disabled).active,.show>.btn-warning.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#c80!important}.btn-warning:not([disabled]):not(.disabled):active:focus,.btn-warning:not([disabled]):not(.disabled).active:focus,.show>.btn-warning.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.warning-ic{color:#fb3!important}.warning-ic:hover,.warning-ic:focus{color:#fb3}table.table a.btn.btn-warning{color:#fff}.btn-outline-warning{border:2px solid #ffbb33!important;background-color:transparent!important;color:#fb3!important}.btn-outline-warning:hover,.btn-outline-warning:focus,.btn-outline-warning:active,.btn-outline-warning:active:focus,.btn-outline-warning.active{border-color:#fb3!important;background-color:transparent!important;color:#fb3!important}.btn-outline-warning:not([disabled]):not(.disabled):active,.btn-outline-warning:not([disabled]):not(.disabled).active,.show>.btn-outline-warning.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#fb3!important}.btn-outline-warning:not([disabled]):not(.disabled):active:focus,.btn-outline-warning:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-warning.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-success{background-color:#00c851!important;color:#fff}.btn-success:hover{background-color:#00e25b;color:#fff}.btn-success:focus,.btn-success.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-success:focus,.btn-success:active,.btn-success.active{background-color:#006228}.btn-success.dropdown-toggle{background-color:#00c851!important}.btn-success.dropdown-toggle:hover,.btn-success.dropdown-toggle:focus{background-color:#00e25b!important}.btn-success:not([disabled]):not(.disabled):active,.btn-success:not([disabled]):not(.disabled).active,.show>.btn-success.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#006228!important}.btn-success:not([disabled]):not(.disabled):active:focus,.btn-success:not([disabled]):not(.disabled).active:focus,.show>.btn-success.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.success-ic{color:#00c851!important}.success-ic:hover,.success-ic:focus{color:#00c851}table.table a.btn.btn-success{color:#fff}.btn-outline-success{border:2px solid #00c851!important;background-color:transparent!important;color:#00c851!important}.btn-outline-success:hover,.btn-outline-success:focus,.btn-outline-success:active,.btn-outline-success:active:focus,.btn-outline-success.active{border-color:#00c851!important;background-color:transparent!important;color:#00c851!important}.btn-outline-success:not([disabled]):not(.disabled):active,.btn-outline-success:not([disabled]):not(.disabled).active,.show>.btn-outline-success.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#00c851!important}.btn-outline-success:not([disabled]):not(.disabled):active:focus,.btn-outline-success:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-success.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-info{background-color:#33b5e5!important;color:#fff}.btn-info:hover{background-color:#4abde8;color:#fff}.btn-info:focus,.btn-info.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-info:focus,.btn-info:active,.btn-info.active{background-color:#14799e}.btn-info.dropdown-toggle{background-color:#33b5e5!important}.btn-info.dropdown-toggle:hover,.btn-info.dropdown-toggle:focus{background-color:#4abde8!important}.btn-info:not([disabled]):not(.disabled):active,.btn-info:not([disabled]):not(.disabled).active,.show>.btn-info.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#14799e!important}.btn-info:not([disabled]):not(.disabled):active:focus,.btn-info:not([disabled]):not(.disabled).active:focus,.show>.btn-info.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.info-ic{color:#33b5e5!important}.info-ic:hover,.info-ic:focus{color:#33b5e5}table.table a.btn.btn-info{color:#fff}.btn-outline-info{border:2px solid #33b5e5!important;background-color:transparent!important;color:#33b5e5!important}.btn-outline-info:hover,.btn-outline-info:focus,.btn-outline-info:active,.btn-outline-info:active:focus,.btn-outline-info.active{border-color:#33b5e5!important;background-color:transparent!important;color:#33b5e5!important}.btn-outline-info:not([disabled]):not(.disabled):active,.btn-outline-info:not([disabled]):not(.disabled).active,.show>.btn-outline-info.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#33b5e5!important}.btn-outline-info:not([disabled]):not(.disabled):active:focus,.btn-outline-info:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-info.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-default{background-color:#2bbbad!important;color:#fff}.btn-default:hover{background-color:#30cfc0;color:#fff}.btn-default:focus,.btn-default.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-default:focus,.btn-default:active,.btn-default.active{background-color:#186860}.btn-default.dropdown-toggle{background-color:#2bbbad!important}.btn-default.dropdown-toggle:hover,.btn-default.dropdown-toggle:focus{background-color:#30cfc0!important}.btn-default:not([disabled]):not(.disabled):active,.btn-default:not([disabled]):not(.disabled).active,.show>.btn-default.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#186860!important}.btn-default:not([disabled]):not(.disabled):active:focus,.btn-default:not([disabled]):not(.disabled).active:focus,.show>.btn-default.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.default-ic{color:#2bbbad!important}.default-ic:hover,.default-ic:focus{color:#2bbbad}table.table a.btn.btn-default{color:#fff}.btn-outline-default{border:2px solid #2bbbad!important;background-color:transparent!important;color:#2bbbad!important}.btn-outline-default:hover,.btn-outline-default:focus,.btn-outline-default:active,.btn-outline-default:active:focus,.btn-outline-default.active{border-color:#2bbbad!important;background-color:transparent!important;color:#2bbbad!important}.btn-outline-default:not([disabled]):not(.disabled):active,.btn-outline-default:not([disabled]):not(.disabled).active,.show>.btn-outline-default.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#2bbbad!important}.btn-outline-default:not([disabled]):not(.disabled):active:focus,.btn-outline-default:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-default.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-secondary{background-color:#a6c!important;color:#fff}.btn-secondary:hover{background-color:#b579d2;color:#fff}.btn-secondary:focus,.btn-secondary.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-secondary:focus,.btn-secondary:active,.btn-secondary.active{background-color:#739}.btn-secondary.dropdown-toggle{background-color:#a6c!important}.btn-secondary.dropdown-toggle:hover,.btn-secondary.dropdown-toggle:focus{background-color:#b579d2!important}.btn-secondary:not([disabled]):not(.disabled):active,.btn-secondary:not([disabled]):not(.disabled).active,.show>.btn-secondary.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#739!important}.btn-secondary:not([disabled]):not(.disabled):active:focus,.btn-secondary:not([disabled]):not(.disabled).active:focus,.show>.btn-secondary.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.secondary-ic{color:#a6c!important}.secondary-ic:hover,.secondary-ic:focus{color:#a6c}table.table a.btn.btn-secondary{color:#fff}.btn-outline-secondary{border:2px solid #aa66cc!important;background-color:transparent!important;color:#a6c!important}.btn-outline-secondary:hover,.btn-outline-secondary:focus,.btn-outline-secondary:active,.btn-outline-secondary:active:focus,.btn-outline-secondary.active{border-color:#a6c!important;background-color:transparent!important;color:#a6c!important}.btn-outline-secondary:not([disabled]):not(.disabled):active,.btn-outline-secondary:not([disabled]):not(.disabled).active,.show>.btn-outline-secondary.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#a6c!important}.btn-outline-secondary:not([disabled]):not(.disabled):active:focus,.btn-outline-secondary:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-secondary.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-elegant{background-color:#2e2e2e!important;color:#fff}.btn-elegant:hover{background-color:#3b3b3b;color:#fff}.btn-elegant:focus,.btn-elegant.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-elegant:focus,.btn-elegant:active,.btn-elegant.active{background-color:#000}.btn-elegant.dropdown-toggle{background-color:#2e2e2e!important}.btn-elegant.dropdown-toggle:hover,.btn-elegant.dropdown-toggle:focus{background-color:#3b3b3b!important}.btn-elegant:not([disabled]):not(.disabled):active,.btn-elegant:not([disabled]):not(.disabled).active,.show>.btn-elegant.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#000!important}.btn-elegant:not([disabled]):not(.disabled):active:focus,.btn-elegant:not([disabled]):not(.disabled).active:focus,.show>.btn-elegant.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.elegant-ic{color:#2e2e2e!important}.elegant-ic:hover,.elegant-ic:focus{color:#2e2e2e}table.table a.btn.btn-elegant{color:#fff}.btn-outline-elegant{border:2px solid #2e2e2e!important;background-color:transparent!important;color:#2e2e2e!important}.btn-outline-elegant:hover,.btn-outline-elegant:focus,.btn-outline-elegant:active,.btn-outline-elegant:active:focus,.btn-outline-elegant.active{border-color:#2e2e2e!important;background-color:transparent!important;color:#2e2e2e!important}.btn-outline-elegant:not([disabled]):not(.disabled):active,.btn-outline-elegant:not([disabled]):not(.disabled).active,.show>.btn-outline-elegant.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#2e2e2e!important}.btn-outline-elegant:not([disabled]):not(.disabled):active:focus,.btn-outline-elegant:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-elegant.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-unique{background-color:#880e4f!important;color:#fff}.btn-unique:hover{background-color:#9f105c;color:#fff}.btn-unique:focus,.btn-unique.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-unique:focus,.btn-unique:active,.btn-unique.active{background-color:#2c0419}.btn-unique.dropdown-toggle{background-color:#880e4f!important}.btn-unique.dropdown-toggle:hover,.btn-unique.dropdown-toggle:focus{background-color:#9f105c!important}.btn-unique:not([disabled]):not(.disabled):active,.btn-unique:not([disabled]):not(.disabled).active,.show>.btn-unique.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#2c0419!important}.btn-unique:not([disabled]):not(.disabled):active:focus,.btn-unique:not([disabled]):not(.disabled).active:focus,.show>.btn-unique.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.unique-ic{color:#880e4f!important}.unique-ic:hover,.unique-ic:focus{color:#880e4f}table.table a.btn.btn-unique{color:#fff}.btn-outline-unique{border:2px solid #880e4f!important;background-color:transparent!important;color:#880e4f!important}.btn-outline-unique:hover,.btn-outline-unique:focus,.btn-outline-unique:active,.btn-outline-unique:active:focus,.btn-outline-unique.active{border-color:#880e4f!important;background-color:transparent!important;color:#880e4f!important}.btn-outline-unique:not([disabled]):not(.disabled):active,.btn-outline-unique:not([disabled]):not(.disabled).active,.show>.btn-outline-unique.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#880e4f!important}.btn-outline-unique:not([disabled]):not(.disabled):active:focus,.btn-outline-unique:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-unique.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-dark-green{background-color:#388e3c!important;color:#fff}.btn-dark-green:hover{background-color:#3fa044;color:#fff}.btn-dark-green:focus,.btn-dark-green.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-dark-green:focus,.btn-dark-green:active,.btn-dark-green.active{background-color:#1b451d}.btn-dark-green.dropdown-toggle{background-color:#388e3c!important}.btn-dark-green.dropdown-toggle:hover,.btn-dark-green.dropdown-toggle:focus{background-color:#3fa044!important}.btn-dark-green:not([disabled]):not(.disabled):active,.btn-dark-green:not([disabled]):not(.disabled).active,.show>.btn-dark-green.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#1b451d!important}.btn-dark-green:not([disabled]):not(.disabled):active:focus,.btn-dark-green:not([disabled]):not(.disabled).active:focus,.show>.btn-dark-green.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.dark-green-ic{color:#388e3c!important}.dark-green-ic:hover,.dark-green-ic:focus{color:#388e3c}table.table a.btn.btn-dark-green{color:#fff}.btn-outline-dark-green{border:2px solid #388e3c!important;background-color:transparent!important;color:#388e3c!important}.btn-outline-dark-green:hover,.btn-outline-dark-green:focus,.btn-outline-dark-green:active,.btn-outline-dark-green:active:focus,.btn-outline-dark-green.active{border-color:#388e3c!important;background-color:transparent!important;color:#388e3c!important}.btn-outline-dark-green:not([disabled]):not(.disabled):active,.btn-outline-dark-green:not([disabled]):not(.disabled).active,.show>.btn-outline-dark-green.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#388e3c!important}.btn-outline-dark-green:not([disabled]):not(.disabled):active:focus,.btn-outline-dark-green:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-dark-green.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-mdb-color{background-color:#59698d!important;color:#fff}.btn-mdb-color:hover{background-color:#63759d;color:#fff}.btn-mdb-color:focus,.btn-mdb-color.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-mdb-color:focus,.btn-mdb-color:active,.btn-mdb-color.active{background-color:#323a4e}.btn-mdb-color.dropdown-toggle{background-color:#59698d!important}.btn-mdb-color.dropdown-toggle:hover,.btn-mdb-color.dropdown-toggle:focus{background-color:#63759d!important}.btn-mdb-color:not([disabled]):not(.disabled):active,.btn-mdb-color:not([disabled]):not(.disabled).active,.show>.btn-mdb-color.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#323a4e!important}.btn-mdb-color:not([disabled]):not(.disabled):active:focus,.btn-mdb-color:not([disabled]):not(.disabled).active:focus,.show>.btn-mdb-color.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.mdb-color-ic{color:#59698d!important}.mdb-color-ic:hover,.mdb-color-ic:focus{color:#59698d}table.table a.btn.btn-mdb-color{color:#fff}.btn-outline-mdb-color{border:2px solid #59698d!important;background-color:transparent!important;color:#59698d!important}.btn-outline-mdb-color:hover,.btn-outline-mdb-color:focus,.btn-outline-mdb-color:active,.btn-outline-mdb-color:active:focus,.btn-outline-mdb-color.active{border-color:#59698d!important;background-color:transparent!important;color:#59698d!important}.btn-outline-mdb-color:not([disabled]):not(.disabled):active,.btn-outline-mdb-color:not([disabled]):not(.disabled).active,.show>.btn-outline-mdb-color.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#59698d!important}.btn-outline-mdb-color:not([disabled]):not(.disabled):active:focus,.btn-outline-mdb-color:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-mdb-color.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-red{background-color:#d32f2f!important;color:#fff}.btn-red:hover{background-color:#d74444;color:#fff}.btn-red:focus,.btn-red.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-red:focus,.btn-red:active,.btn-red.active{background-color:#811b1b}.btn-red.dropdown-toggle{background-color:#d32f2f!important}.btn-red.dropdown-toggle:hover,.btn-red.dropdown-toggle:focus{background-color:#d74444!important}.btn-red:not([disabled]):not(.disabled):active,.btn-red:not([disabled]):not(.disabled).active,.show>.btn-red.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#811b1b!important}.btn-red:not([disabled]):not(.disabled):active:focus,.btn-red:not([disabled]):not(.disabled).active:focus,.show>.btn-red.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.red-ic{color:#d32f2f!important}.red-ic:hover,.red-ic:focus{color:#d32f2f}table.table a.btn.btn-red{color:#fff}.btn-outline-red{border:2px solid #d32f2f!important;background-color:transparent!important;color:#d32f2f!important}.btn-outline-red:hover,.btn-outline-red:focus,.btn-outline-red:active,.btn-outline-red:active:focus,.btn-outline-red.active{border-color:#d32f2f!important;background-color:transparent!important;color:#d32f2f!important}.btn-outline-red:not([disabled]):not(.disabled):active,.btn-outline-red:not([disabled]):not(.disabled).active,.show>.btn-outline-red.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#d32f2f!important}.btn-outline-red:not([disabled]):not(.disabled):active:focus,.btn-outline-red:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-red.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-pink{background-color:#ec407a!important;color:#fff}.btn-pink:hover{background-color:#ee578a;color:#fff}.btn-pink:focus,.btn-pink.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-pink:focus,.btn-pink:active,.btn-pink.active{background-color:#b41249}.btn-pink.dropdown-toggle{background-color:#ec407a!important}.btn-pink.dropdown-toggle:hover,.btn-pink.dropdown-toggle:focus{background-color:#ee578a!important}.btn-pink:not([disabled]):not(.disabled):active,.btn-pink:not([disabled]):not(.disabled).active,.show>.btn-pink.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#b41249!important}.btn-pink:not([disabled]):not(.disabled):active:focus,.btn-pink:not([disabled]):not(.disabled).active:focus,.show>.btn-pink.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.pink-ic{color:#ec407a!important}.pink-ic:hover,.pink-ic:focus{color:#ec407a}table.table a.btn.btn-pink{color:#fff}.btn-outline-pink{border:2px solid #ec407a!important;background-color:transparent!important;color:#ec407a!important}.btn-outline-pink:hover,.btn-outline-pink:focus,.btn-outline-pink:active,.btn-outline-pink:active:focus,.btn-outline-pink.active{border-color:#ec407a!important;background-color:transparent!important;color:#ec407a!important}.btn-outline-pink:not([disabled]):not(.disabled):active,.btn-outline-pink:not([disabled]):not(.disabled).active,.show>.btn-outline-pink.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#ec407a!important}.btn-outline-pink:not([disabled]):not(.disabled):active:focus,.btn-outline-pink:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-pink.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-purple{background-color:#8e24aa!important;color:#fff}.btn-purple:hover{background-color:#a028bf;color:#fff}.btn-purple:focus,.btn-purple.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-purple:focus,.btn-purple:active,.btn-purple.active{background-color:#481256}.btn-purple.dropdown-toggle{background-color:#8e24aa!important}.btn-purple.dropdown-toggle:hover,.btn-purple.dropdown-toggle:focus{background-color:#a028bf!important}.btn-purple:not([disabled]):not(.disabled):active,.btn-purple:not([disabled]):not(.disabled).active,.show>.btn-purple.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#481256!important}.btn-purple:not([disabled]):not(.disabled):active:focus,.btn-purple:not([disabled]):not(.disabled).active:focus,.show>.btn-purple.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.purple-ic{color:#8e24aa!important}.purple-ic:hover,.purple-ic:focus{color:#8e24aa}table.table a.btn.btn-purple{color:#fff}.btn-outline-purple{border:2px solid #8e24aa!important;background-color:transparent!important;color:#8e24aa!important}.btn-outline-purple:hover,.btn-outline-purple:focus,.btn-outline-purple:active,.btn-outline-purple:active:focus,.btn-outline-purple.active{border-color:#8e24aa!important;background-color:transparent!important;color:#8e24aa!important}.btn-outline-purple:not([disabled]):not(.disabled):active,.btn-outline-purple:not([disabled]):not(.disabled).active,.show>.btn-outline-purple.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#8e24aa!important}.btn-outline-purple:not([disabled]):not(.disabled):active:focus,.btn-outline-purple:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-purple.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-deep-purple{background-color:#512da8!important;color:#fff}.btn-deep-purple:hover{background-color:#5b32bc;color:#fff}.btn-deep-purple:focus,.btn-deep-purple.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-deep-purple:focus,.btn-deep-purple:active,.btn-deep-purple.active{background-color:#2a1758}.btn-deep-purple.dropdown-toggle{background-color:#512da8!important}.btn-deep-purple.dropdown-toggle:hover,.btn-deep-purple.dropdown-toggle:focus{background-color:#5b32bc!important}.btn-deep-purple:not([disabled]):not(.disabled):active,.btn-deep-purple:not([disabled]):not(.disabled).active,.show>.btn-deep-purple.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#2a1758!important}.btn-deep-purple:not([disabled]):not(.disabled):active:focus,.btn-deep-purple:not([disabled]):not(.disabled).active:focus,.show>.btn-deep-purple.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.deep-purple-ic{color:#512da8!important}.deep-purple-ic:hover,.deep-purple-ic:focus{color:#512da8}table.table a.btn.btn-deep-purple{color:#fff}.btn-outline-deep-purple{border:2px solid #512da8!important;background-color:transparent!important;color:#512da8!important}.btn-outline-deep-purple:hover,.btn-outline-deep-purple:focus,.btn-outline-deep-purple:active,.btn-outline-deep-purple:active:focus,.btn-outline-deep-purple.active{border-color:#512da8!important;background-color:transparent!important;color:#512da8!important}.btn-outline-deep-purple:not([disabled]):not(.disabled):active,.btn-outline-deep-purple:not([disabled]):not(.disabled).active,.show>.btn-outline-deep-purple.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#512da8!important}.btn-outline-deep-purple:not([disabled]):not(.disabled):active:focus,.btn-outline-deep-purple:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-deep-purple.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-indigo{background-color:#3f51b5!important;color:#fff}.btn-indigo:hover{background-color:#4d5ec1;color:#fff}.btn-indigo:focus,.btn-indigo.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-indigo:focus,.btn-indigo:active,.btn-indigo.active{background-color:#252f69}.btn-indigo.dropdown-toggle{background-color:#3f51b5!important}.btn-indigo.dropdown-toggle:hover,.btn-indigo.dropdown-toggle:focus{background-color:#4d5ec1!important}.btn-indigo:not([disabled]):not(.disabled):active,.btn-indigo:not([disabled]):not(.disabled).active,.show>.btn-indigo.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#252f69!important}.btn-indigo:not([disabled]):not(.disabled):active:focus,.btn-indigo:not([disabled]):not(.disabled).active:focus,.show>.btn-indigo.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.indigo-ic{color:#3f51b5!important}.indigo-ic:hover,.indigo-ic:focus{color:#3f51b5}table.table a.btn.btn-indigo{color:#fff}.btn-outline-indigo{border:2px solid #3f51b5!important;background-color:transparent!important;color:#3f51b5!important}.btn-outline-indigo:hover,.btn-outline-indigo:focus,.btn-outline-indigo:active,.btn-outline-indigo:active:focus,.btn-outline-indigo.active{border-color:#3f51b5!important;background-color:transparent!important;color:#3f51b5!important}.btn-outline-indigo:not([disabled]):not(.disabled):active,.btn-outline-indigo:not([disabled]):not(.disabled).active,.show>.btn-outline-indigo.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#3f51b5!important}.btn-outline-indigo:not([disabled]):not(.disabled):active:focus,.btn-outline-indigo:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-indigo.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-blue{background-color:#1976d2!important;color:#fff}.btn-blue:hover{background-color:#2083e4;color:#fff}.btn-blue:focus,.btn-blue.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-blue:focus,.btn-blue:active,.btn-blue.active{background-color:#0e4377}.btn-blue.dropdown-toggle{background-color:#1976d2!important}.btn-blue.dropdown-toggle:hover,.btn-blue.dropdown-toggle:focus{background-color:#2083e4!important}.btn-blue:not([disabled]):not(.disabled):active,.btn-blue:not([disabled]):not(.disabled).active,.show>.btn-blue.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#0e4377!important}.btn-blue:not([disabled]):not(.disabled):active:focus,.btn-blue:not([disabled]):not(.disabled).active:focus,.show>.btn-blue.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.blue-ic{color:#1976d2!important}.blue-ic:hover,.blue-ic:focus{color:#1976d2}table.table a.btn.btn-blue{color:#fff}.btn-outline-blue{border:2px solid #1976d2!important;background-color:transparent!important;color:#1976d2!important}.btn-outline-blue:hover,.btn-outline-blue:focus,.btn-outline-blue:active,.btn-outline-blue:active:focus,.btn-outline-blue.active{border-color:#1976d2!important;background-color:transparent!important;color:#1976d2!important}.btn-outline-blue:not([disabled]):not(.disabled):active,.btn-outline-blue:not([disabled]):not(.disabled).active,.show>.btn-outline-blue.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#1976d2!important}.btn-outline-blue:not([disabled]):not(.disabled):active:focus,.btn-outline-blue:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-blue.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-light-blue{background-color:#82b1ff!important;color:#fff}.btn-light-blue:hover{background-color:#9cc1ff;color:#fff}.btn-light-blue:focus,.btn-light-blue.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-light-blue:focus,.btn-light-blue:active,.btn-light-blue.active{background-color:#1c71ff}.btn-light-blue.dropdown-toggle{background-color:#82b1ff!important}.btn-light-blue.dropdown-toggle:hover,.btn-light-blue.dropdown-toggle:focus{background-color:#9cc1ff!important}.btn-light-blue:not([disabled]):not(.disabled):active,.btn-light-blue:not([disabled]):not(.disabled).active,.show>.btn-light-blue.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#1c71ff!important}.btn-light-blue:not([disabled]):not(.disabled):active:focus,.btn-light-blue:not([disabled]):not(.disabled).active:focus,.show>.btn-light-blue.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.light-blue-ic{color:#82b1ff!important}.light-blue-ic:hover,.light-blue-ic:focus{color:#82b1ff}table.table a.btn.btn-light-blue{color:#fff}.btn-outline-light-blue{border:2px solid #82b1ff!important;background-color:transparent!important;color:#82b1ff!important}.btn-outline-light-blue:hover,.btn-outline-light-blue:focus,.btn-outline-light-blue:active,.btn-outline-light-blue:active:focus,.btn-outline-light-blue.active{border-color:#82b1ff!important;background-color:transparent!important;color:#82b1ff!important}.btn-outline-light-blue:not([disabled]):not(.disabled):active,.btn-outline-light-blue:not([disabled]):not(.disabled).active,.show>.btn-outline-light-blue.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#82b1ff!important}.btn-outline-light-blue:not([disabled]):not(.disabled):active:focus,.btn-outline-light-blue:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-light-blue.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-cyan{background-color:#00bcd4!important;color:#fff}.btn-cyan:hover{background-color:#00d3ee;color:#fff}.btn-cyan:focus,.btn-cyan.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-cyan:focus,.btn-cyan:active,.btn-cyan.active{background-color:#00626e}.btn-cyan.dropdown-toggle{background-color:#00bcd4!important}.btn-cyan.dropdown-toggle:hover,.btn-cyan.dropdown-toggle:focus{background-color:#00d3ee!important}.btn-cyan:not([disabled]):not(.disabled):active,.btn-cyan:not([disabled]):not(.disabled).active,.show>.btn-cyan.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#00626e!important}.btn-cyan:not([disabled]):not(.disabled):active:focus,.btn-cyan:not([disabled]):not(.disabled).active:focus,.show>.btn-cyan.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.cyan-ic{color:#00bcd4!important}.cyan-ic:hover,.cyan-ic:focus{color:#00bcd4}table.table a.btn.btn-cyan{color:#fff}.btn-outline-cyan{border:2px solid #00bcd4!important;background-color:transparent!important;color:#00bcd4!important}.btn-outline-cyan:hover,.btn-outline-cyan:focus,.btn-outline-cyan:active,.btn-outline-cyan:active:focus,.btn-outline-cyan.active{border-color:#00bcd4!important;background-color:transparent!important;color:#00bcd4!important}.btn-outline-cyan:not([disabled]):not(.disabled):active,.btn-outline-cyan:not([disabled]):not(.disabled).active,.show>.btn-outline-cyan.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#00bcd4!important}.btn-outline-cyan:not([disabled]):not(.disabled):active:focus,.btn-outline-cyan:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-cyan.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-teal{background-color:#00796b!important;color:#fff}.btn-teal:hover{background-color:#009382;color:#fff}.btn-teal:focus,.btn-teal.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-teal:focus,.btn-teal:active,.btn-teal.active{background-color:#001311}.btn-teal.dropdown-toggle{background-color:#00796b!important}.btn-teal.dropdown-toggle:hover,.btn-teal.dropdown-toggle:focus{background-color:#009382!important}.btn-teal:not([disabled]):not(.disabled):active,.btn-teal:not([disabled]):not(.disabled).active,.show>.btn-teal.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#001311!important}.btn-teal:not([disabled]):not(.disabled):active:focus,.btn-teal:not([disabled]):not(.disabled).active:focus,.show>.btn-teal.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.teal-ic{color:#00796b!important}.teal-ic:hover,.teal-ic:focus{color:#00796b}table.table a.btn.btn-teal{color:#fff}.btn-outline-teal{border:2px solid #00796b!important;background-color:transparent!important;color:#00796b!important}.btn-outline-teal:hover,.btn-outline-teal:focus,.btn-outline-teal:active,.btn-outline-teal:active:focus,.btn-outline-teal.active{border-color:#00796b!important;background-color:transparent!important;color:#00796b!important}.btn-outline-teal:not([disabled]):not(.disabled):active,.btn-outline-teal:not([disabled]):not(.disabled).active,.show>.btn-outline-teal.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#00796b!important}.btn-outline-teal:not([disabled]):not(.disabled):active:focus,.btn-outline-teal:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-teal.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-green{background-color:#388e3c!important;color:#fff}.btn-green:hover{background-color:#3fa044;color:#fff}.btn-green:focus,.btn-green.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-green:focus,.btn-green:active,.btn-green.active{background-color:#1b451d}.btn-green.dropdown-toggle{background-color:#388e3c!important}.btn-green.dropdown-toggle:hover,.btn-green.dropdown-toggle:focus{background-color:#3fa044!important}.btn-green:not([disabled]):not(.disabled):active,.btn-green:not([disabled]):not(.disabled).active,.show>.btn-green.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#1b451d!important}.btn-green:not([disabled]):not(.disabled):active:focus,.btn-green:not([disabled]):not(.disabled).active:focus,.show>.btn-green.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.green-ic{color:#388e3c!important}.green-ic:hover,.green-ic:focus{color:#388e3c}table.table a.btn.btn-green{color:#fff}.btn-outline-green{border:2px solid #388e3c!important;background-color:transparent!important;color:#388e3c!important}.btn-outline-green:hover,.btn-outline-green:focus,.btn-outline-green:active,.btn-outline-green:active:focus,.btn-outline-green.active{border-color:#388e3c!important;background-color:transparent!important;color:#388e3c!important}.btn-outline-green:not([disabled]):not(.disabled):active,.btn-outline-green:not([disabled]):not(.disabled).active,.show>.btn-outline-green.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#388e3c!important}.btn-outline-green:not([disabled]):not(.disabled):active:focus,.btn-outline-green:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-green.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-light-green{background-color:#8bc34a!important;color:#fff}.btn-light-green:hover{background-color:#97c95d;color:#fff}.btn-light-green:focus,.btn-light-green.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-light-green:focus,.btn-light-green:active,.btn-light-green.active{background-color:#577d2a}.btn-light-green.dropdown-toggle{background-color:#8bc34a!important}.btn-light-green.dropdown-toggle:hover,.btn-light-green.dropdown-toggle:focus{background-color:#97c95d!important}.btn-light-green:not([disabled]):not(.disabled):active,.btn-light-green:not([disabled]):not(.disabled).active,.show>.btn-light-green.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#577d2a!important}.btn-light-green:not([disabled]):not(.disabled):active:focus,.btn-light-green:not([disabled]):not(.disabled).active:focus,.show>.btn-light-green.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.light-green-ic{color:#8bc34a!important}.light-green-ic:hover,.light-green-ic:focus{color:#8bc34a}table.table a.btn.btn-light-green{color:#fff}.btn-outline-light-green{border:2px solid #8bc34a!important;background-color:transparent!important;color:#8bc34a!important}.btn-outline-light-green:hover,.btn-outline-light-green:focus,.btn-outline-light-green:active,.btn-outline-light-green:active:focus,.btn-outline-light-green.active{border-color:#8bc34a!important;background-color:transparent!important;color:#8bc34a!important}.btn-outline-light-green:not([disabled]):not(.disabled):active,.btn-outline-light-green:not([disabled]):not(.disabled).active,.show>.btn-outline-light-green.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#8bc34a!important}.btn-outline-light-green:not([disabled]):not(.disabled):active:focus,.btn-outline-light-green:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-light-green.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-lime{background-color:#afb42b!important;color:#fff}.btn-lime:hover{background-color:#c3c930;color:#fff}.btn-lime:focus,.btn-lime.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-lime:focus,.btn-lime:active,.btn-lime.active{background-color:#5f6217}.btn-lime.dropdown-toggle{background-color:#afb42b!important}.btn-lime.dropdown-toggle:hover,.btn-lime.dropdown-toggle:focus{background-color:#c3c930!important}.btn-lime:not([disabled]):not(.disabled):active,.btn-lime:not([disabled]):not(.disabled).active,.show>.btn-lime.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#5f6217!important}.btn-lime:not([disabled]):not(.disabled):active:focus,.btn-lime:not([disabled]):not(.disabled).active:focus,.show>.btn-lime.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.lime-ic{color:#afb42b!important}.lime-ic:hover,.lime-ic:focus{color:#afb42b}table.table a.btn.btn-lime{color:#fff}.btn-outline-lime{border:2px solid #afb42b!important;background-color:transparent!important;color:#afb42b!important}.btn-outline-lime:hover,.btn-outline-lime:focus,.btn-outline-lime:active,.btn-outline-lime:active:focus,.btn-outline-lime.active{border-color:#afb42b!important;background-color:transparent!important;color:#afb42b!important}.btn-outline-lime:not([disabled]):not(.disabled):active,.btn-outline-lime:not([disabled]):not(.disabled).active,.show>.btn-outline-lime.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#afb42b!important}.btn-outline-lime:not([disabled]):not(.disabled):active:focus,.btn-outline-lime:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-lime.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-yellow{background-color:#fbc02d!important;color:#fff}.btn-yellow:hover{background-color:#fbc846;color:#fff}.btn-yellow:focus,.btn-yellow.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-yellow:focus,.btn-yellow:active,.btn-yellow.active{background-color:#be8904}.btn-yellow.dropdown-toggle{background-color:#fbc02d!important}.btn-yellow.dropdown-toggle:hover,.btn-yellow.dropdown-toggle:focus{background-color:#fbc846!important}.btn-yellow:not([disabled]):not(.disabled):active,.btn-yellow:not([disabled]):not(.disabled).active,.show>.btn-yellow.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#be8904!important}.btn-yellow:not([disabled]):not(.disabled):active:focus,.btn-yellow:not([disabled]):not(.disabled).active:focus,.show>.btn-yellow.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.yellow-ic{color:#fbc02d!important}.yellow-ic:hover,.yellow-ic:focus{color:#fbc02d}table.table a.btn.btn-yellow{color:#fff}.btn-outline-yellow{border:2px solid #fbc02d!important;background-color:transparent!important;color:#fbc02d!important}.btn-outline-yellow:hover,.btn-outline-yellow:focus,.btn-outline-yellow:active,.btn-outline-yellow:active:focus,.btn-outline-yellow.active{border-color:#fbc02d!important;background-color:transparent!important;color:#fbc02d!important}.btn-outline-yellow:not([disabled]):not(.disabled):active,.btn-outline-yellow:not([disabled]):not(.disabled).active,.show>.btn-outline-yellow.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#fbc02d!important}.btn-outline-yellow:not([disabled]):not(.disabled):active:focus,.btn-outline-yellow:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-yellow.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-amber{background-color:#ffa000!important;color:#fff}.btn-amber:hover{background-color:#ffaa1a;color:#fff}.btn-amber:focus,.btn-amber.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-amber:focus,.btn-amber:active,.btn-amber.active{background-color:#996000}.btn-amber.dropdown-toggle{background-color:#ffa000!important}.btn-amber.dropdown-toggle:hover,.btn-amber.dropdown-toggle:focus{background-color:#ffaa1a!important}.btn-amber:not([disabled]):not(.disabled):active,.btn-amber:not([disabled]):not(.disabled).active,.show>.btn-amber.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#996000!important}.btn-amber:not([disabled]):not(.disabled):active:focus,.btn-amber:not([disabled]):not(.disabled).active:focus,.show>.btn-amber.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.amber-ic{color:#ffa000!important}.amber-ic:hover,.amber-ic:focus{color:#ffa000}table.table a.btn.btn-amber{color:#fff}.btn-outline-amber{border:2px solid #ffa000!important;background-color:transparent!important;color:#ffa000!important}.btn-outline-amber:hover,.btn-outline-amber:focus,.btn-outline-amber:active,.btn-outline-amber:active:focus,.btn-outline-amber.active{border-color:#ffa000!important;background-color:transparent!important;color:#ffa000!important}.btn-outline-amber:not([disabled]):not(.disabled):active,.btn-outline-amber:not([disabled]):not(.disabled).active,.show>.btn-outline-amber.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#ffa000!important}.btn-outline-amber:not([disabled]):not(.disabled):active:focus,.btn-outline-amber:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-amber.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-orange{background-color:#f57c00!important;color:#fff}.btn-orange:hover{background-color:#ff8910;color:#fff}.btn-orange:focus,.btn-orange.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-orange:focus,.btn-orange:active,.btn-orange.active{background-color:#8f4800}.btn-orange.dropdown-toggle{background-color:#f57c00!important}.btn-orange.dropdown-toggle:hover,.btn-orange.dropdown-toggle:focus{background-color:#ff8910!important}.btn-orange:not([disabled]):not(.disabled):active,.btn-orange:not([disabled]):not(.disabled).active,.show>.btn-orange.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#8f4800!important}.btn-orange:not([disabled]):not(.disabled):active:focus,.btn-orange:not([disabled]):not(.disabled).active:focus,.show>.btn-orange.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.orange-ic{color:#f57c00!important}.orange-ic:hover,.orange-ic:focus{color:#f57c00}table.table a.btn.btn-orange{color:#fff}.btn-outline-orange{border:2px solid #f57c00!important;background-color:transparent!important;color:#f57c00!important}.btn-outline-orange:hover,.btn-outline-orange:focus,.btn-outline-orange:active,.btn-outline-orange:active:focus,.btn-outline-orange.active{border-color:#f57c00!important;background-color:transparent!important;color:#f57c00!important}.btn-outline-orange:not([disabled]):not(.disabled):active,.btn-outline-orange:not([disabled]):not(.disabled).active,.show>.btn-outline-orange.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#f57c00!important}.btn-outline-orange:not([disabled]):not(.disabled):active:focus,.btn-outline-orange:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-orange.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-deep-orange{background-color:#ff7043!important;color:#fff}.btn-deep-orange:hover{background-color:#ff835d;color:#fff}.btn-deep-orange:focus,.btn-deep-orange.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-deep-orange:focus,.btn-deep-orange:active,.btn-deep-orange.active{background-color:#dc3500}.btn-deep-orange.dropdown-toggle{background-color:#ff7043!important}.btn-deep-orange.dropdown-toggle:hover,.btn-deep-orange.dropdown-toggle:focus{background-color:#ff835d!important}.btn-deep-orange:not([disabled]):not(.disabled):active,.btn-deep-orange:not([disabled]):not(.disabled).active,.show>.btn-deep-orange.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#dc3500!important}.btn-deep-orange:not([disabled]):not(.disabled):active:focus,.btn-deep-orange:not([disabled]):not(.disabled).active:focus,.show>.btn-deep-orange.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.deep-orange-ic{color:#ff7043!important}.deep-orange-ic:hover,.deep-orange-ic:focus{color:#ff7043}table.table a.btn.btn-deep-orange{color:#fff}.btn-outline-deep-orange{border:2px solid #ff7043!important;background-color:transparent!important;color:#ff7043!important}.btn-outline-deep-orange:hover,.btn-outline-deep-orange:focus,.btn-outline-deep-orange:active,.btn-outline-deep-orange:active:focus,.btn-outline-deep-orange.active{border-color:#ff7043!important;background-color:transparent!important;color:#ff7043!important}.btn-outline-deep-orange:not([disabled]):not(.disabled):active,.btn-outline-deep-orange:not([disabled]):not(.disabled).active,.show>.btn-outline-deep-orange.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#ff7043!important}.btn-outline-deep-orange:not([disabled]):not(.disabled):active:focus,.btn-outline-deep-orange:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-deep-orange.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-brown{background-color:#795548!important;color:#fff}.btn-brown:hover{background-color:#896052;color:#fff}.btn-brown:focus,.btn-brown.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-brown:focus,.btn-brown:active,.btn-brown.active{background-color:#392822}.btn-brown.dropdown-toggle{background-color:#795548!important}.btn-brown.dropdown-toggle:hover,.btn-brown.dropdown-toggle:focus{background-color:#896052!important}.btn-brown:not([disabled]):not(.disabled):active,.btn-brown:not([disabled]):not(.disabled).active,.show>.btn-brown.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#392822!important}.btn-brown:not([disabled]):not(.disabled):active:focus,.btn-brown:not([disabled]):not(.disabled).active:focus,.show>.btn-brown.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.brown-ic{color:#795548!important}.brown-ic:hover,.brown-ic:focus{color:#795548}table.table a.btn.btn-brown{color:#fff}.btn-outline-brown{border:2px solid #795548!important;background-color:transparent!important;color:#795548!important}.btn-outline-brown:hover,.btn-outline-brown:focus,.btn-outline-brown:active,.btn-outline-brown:active:focus,.btn-outline-brown.active{border-color:#795548!important;background-color:transparent!important;color:#795548!important}.btn-outline-brown:not([disabled]):not(.disabled):active,.btn-outline-brown:not([disabled]):not(.disabled).active,.show>.btn-outline-brown.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#795548!important}.btn-outline-brown:not([disabled]):not(.disabled):active:focus,.btn-outline-brown:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-brown.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-grey{background-color:#616161!important;color:#fff}.btn-grey:hover{background-color:#6e6e6e;color:#fff}.btn-grey:focus,.btn-grey.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-grey:focus,.btn-grey:active,.btn-grey.active{background-color:#2e2e2e}.btn-grey.dropdown-toggle{background-color:#616161!important}.btn-grey.dropdown-toggle:hover,.btn-grey.dropdown-toggle:focus{background-color:#6e6e6e!important}.btn-grey:not([disabled]):not(.disabled):active,.btn-grey:not([disabled]):not(.disabled).active,.show>.btn-grey.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#2e2e2e!important}.btn-grey:not([disabled]):not(.disabled):active:focus,.btn-grey:not([disabled]):not(.disabled).active:focus,.show>.btn-grey.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.grey-ic{color:#616161!important}.grey-ic:hover,.grey-ic:focus{color:#616161}table.table a.btn.btn-grey{color:#fff}.btn-outline-grey{border:2px solid #616161!important;background-color:transparent!important;color:#616161!important}.btn-outline-grey:hover,.btn-outline-grey:focus,.btn-outline-grey:active,.btn-outline-grey:active:focus,.btn-outline-grey.active{border-color:#616161!important;background-color:transparent!important;color:#616161!important}.btn-outline-grey:not([disabled]):not(.disabled):active,.btn-outline-grey:not([disabled]):not(.disabled).active,.show>.btn-outline-grey.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#616161!important}.btn-outline-grey:not([disabled]):not(.disabled):active:focus,.btn-outline-grey:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-grey.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-blue-grey{background-color:#78909c!important;color:#fff}.btn-blue-grey:hover{background-color:#879ca7;color:#fff}.btn-blue-grey:focus,.btn-blue-grey.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-blue-grey:focus,.btn-blue-grey:active,.btn-blue-grey.active{background-color:#4a5b64}.btn-blue-grey.dropdown-toggle{background-color:#78909c!important}.btn-blue-grey.dropdown-toggle:hover,.btn-blue-grey.dropdown-toggle:focus{background-color:#879ca7!important}.btn-blue-grey:not([disabled]):not(.disabled):active,.btn-blue-grey:not([disabled]):not(.disabled).active,.show>.btn-blue-grey.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#4a5b64!important}.btn-blue-grey:not([disabled]):not(.disabled):active:focus,.btn-blue-grey:not([disabled]):not(.disabled).active:focus,.show>.btn-blue-grey.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.blue-grey-ic{color:#78909c!important}.blue-grey-ic:hover,.blue-grey-ic:focus{color:#78909c}table.table a.btn.btn-blue-grey{color:#fff}.btn-outline-blue-grey{border:2px solid #78909c!important;background-color:transparent!important;color:#78909c!important}.btn-outline-blue-grey:hover,.btn-outline-blue-grey:focus,.btn-outline-blue-grey:active,.btn-outline-blue-grey:active:focus,.btn-outline-blue-grey.active{border-color:#78909c!important;background-color:transparent!important;color:#78909c!important}.btn-outline-blue-grey:not([disabled]):not(.disabled):active,.btn-outline-blue-grey:not([disabled]):not(.disabled).active,.show>.btn-outline-blue-grey.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#78909c!important}.btn-outline-blue-grey:not([disabled]):not(.disabled):active:focus,.btn-outline-blue-grey:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-blue-grey.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-dark{background-color:#212121!important;color:#fff}.btn-dark:hover{background-color:#2e2e2e;color:#fff}.btn-dark:focus,.btn-dark.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-dark:focus,.btn-dark:active,.btn-dark.active{background-color:#000}.btn-dark.dropdown-toggle{background-color:#212121!important}.btn-dark.dropdown-toggle:hover,.btn-dark.dropdown-toggle:focus{background-color:#2e2e2e!important}.btn-dark:not([disabled]):not(.disabled):active,.btn-dark:not([disabled]):not(.disabled).active,.show>.btn-dark.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#000!important}.btn-dark:not([disabled]):not(.disabled):active:focus,.btn-dark:not([disabled]):not(.disabled).active:focus,.show>.btn-dark.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.dark-ic{color:#212121!important}.dark-ic:hover,.dark-ic:focus{color:#212121}table.table a.btn.btn-dark{color:#fff}.btn-outline-dark{border:2px solid #212121!important;background-color:transparent!important;color:#212121!important}.btn-outline-dark:hover,.btn-outline-dark:focus,.btn-outline-dark:active,.btn-outline-dark:active:focus,.btn-outline-dark.active{border-color:#212121!important;background-color:transparent!important;color:#212121!important}.btn-outline-dark:not([disabled]):not(.disabled):active,.btn-outline-dark:not([disabled]):not(.disabled).active,.show>.btn-outline-dark.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#212121!important}.btn-outline-dark:not([disabled]):not(.disabled):active:focus,.btn-outline-dark:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-dark.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-light{background-color:#e0e0e0!important;color:#000}.btn-light:hover{background-color:#ededed;color:#000}.btn-light:focus,.btn-light.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-light:focus,.btn-light:active,.btn-light.active{background-color:#adadad}.btn-light.dropdown-toggle{background-color:#e0e0e0!important}.btn-light.dropdown-toggle:hover,.btn-light.dropdown-toggle:focus{background-color:#ededed!important}.btn-light:not([disabled]):not(.disabled):active,.btn-light:not([disabled]):not(.disabled).active,.show>.btn-light.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#adadad!important}.btn-light:not([disabled]):not(.disabled):active:focus,.btn-light:not([disabled]):not(.disabled).active:focus,.show>.btn-light.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.light-ic{color:#e0e0e0!important}.light-ic:hover,.light-ic:focus{color:#e0e0e0}table.table a.btn.btn-light{color:#000}.btn-outline-light{border:2px solid #e0e0e0!important;background-color:transparent!important;color:#e0e0e0!important}.btn-outline-light:hover,.btn-outline-light:focus,.btn-outline-light:active,.btn-outline-light:active:focus,.btn-outline-light.active{border-color:#e0e0e0!important;background-color:transparent!important;color:#e0e0e0!important}.btn-outline-light:not([disabled]):not(.disabled):active,.btn-outline-light:not([disabled]):not(.disabled).active,.show>.btn-outline-light.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#e0e0e0!important}.btn-outline-light:not([disabled]):not(.disabled):active:focus,.btn-outline-light:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-light.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-white{background-color:#fff!important;color:#000}.btn-white:hover{background-color:#fff;color:#000}.btn-white:focus,.btn-white.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-white:focus,.btn-white:active,.btn-white.active{background-color:#ccc}.btn-white.dropdown-toggle{background-color:#fff!important}.btn-white.dropdown-toggle:hover,.btn-white.dropdown-toggle:focus{background-color:#fff!important}.btn-white:not([disabled]):not(.disabled):active,.btn-white:not([disabled]):not(.disabled).active,.show>.btn-white.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#ccc!important}.btn-white:not([disabled]):not(.disabled):active:focus,.btn-white:not([disabled]):not(.disabled).active:focus,.show>.btn-white.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.white-ic{color:#fff!important}.white-ic:hover,.white-ic:focus{color:#fff}a.btn:not([href]):not([tabindex]),a.btn:not([href]):not([tabindex]):focus,a.btn:not([href]):not([tabindex]):hover{color:#000}table.table a.btn.btn-white{color:#000}.btn-outline-white{border:2px solid #fff!important;background-color:transparent!important;color:#fff!important}.btn-outline-white:hover,.btn-outline-white:focus,.btn-outline-white:active,.btn-outline-white:active:focus,.btn-outline-white.active{border-color:#fff!important;background-color:transparent!important;color:#fff!important}.btn-outline-white:not([disabled]):not(.disabled):active,.btn-outline-white:not([disabled]):not(.disabled).active,.show>.btn-outline-white.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#fff!important}.btn-outline-white:not([disabled]):not(.disabled):active:focus,.btn-outline-white:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-white.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-black{background-color:#000!important;color:#fff}.btn-black:hover{background-color:#0d0d0d;color:#fff}.btn-black:focus,.btn-black.focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-black:focus,.btn-black:active,.btn-black.active{background-color:#000}.btn-black.dropdown-toggle{background-color:#000!important}.btn-black.dropdown-toggle:hover,.btn-black.dropdown-toggle:focus{background-color:#0d0d0d!important}.btn-black:not([disabled]):not(.disabled):active,.btn-black:not([disabled]):not(.disabled).active,.show>.btn-black.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:#000!important}.btn-black:not([disabled]):not(.disabled):active:focus,.btn-black:not([disabled]):not(.disabled).active:focus,.show>.btn-black.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.black-ic{color:#000!important}.black-ic:hover,.black-ic:focus{color:#000}a.btn:not([href]):not([tabindex]),a.btn:not([href]):not([tabindex]):focus,a.btn:not([href]):not([tabindex]):hover{color:#fff}table.table a.btn.btn-black{color:#fff}.btn-outline-black{border:2px solid #000!important;background-color:transparent!important;color:#000!important}.btn-outline-black:hover,.btn-outline-black:focus,.btn-outline-black:active,.btn-outline-black:active:focus,.btn-outline-black.active{border-color:#000!important;background-color:transparent!important;color:#000!important}.btn-outline-black:not([disabled]):not(.disabled):active,.btn-outline-black:not([disabled]):not(.disabled).active,.show>.btn-outline-black.dropdown-toggle{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;background-color:transparent!important;border-color:#000!important}.btn-outline-black:not([disabled]):not(.disabled):active:focus,.btn-outline-black:not([disabled]):not(.disabled).active:focus,.show>.btn-outline-black.dropdown-toggle:focus{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026}.btn-warning:not(:disabled):not(.disabled).active,.btn-warning:not(:disabled):not(.disabled):active,.show>.btn-warning.dropdown-toggle{color:#fff}.btn.purple-gradient{transition:.5s ease;color:#fff}.btn.purple-gradient:hover,.btn.purple-gradient:focus,.btn.purple-gradient:active,.btn.purple-gradient:active:focus .btn.purple-gradient.active{background:linear-gradient(#ff88ce,#8f8bf7)}.btn.peach-gradient{transition:.5s ease;color:#fff}.btn.peach-gradient:hover,.btn.peach-gradient:focus,.btn.peach-gradient:active,.btn.peach-gradient:active:focus .btn.peach-gradient.active{background:linear-gradient(#ffdf89,#fc7b7b)}.btn.aqua-gradient{transition:.5s ease;color:#fff}.btn.aqua-gradient:hover,.btn.aqua-gradient:focus,.btn.aqua-gradient:active,.btn.aqua-gradient:active:focus .btn.aqua-gradient.active{background:linear-gradient(#3aa2ff,#1fffac)}.btn.blue-gradient{transition:.5s ease;color:#fff}.btn.blue-gradient:hover,.btn.blue-gradient:focus,.btn.blue-gradient:active,.btn.blue-gradient:active:focus .btn.blue-gradient.active{background:linear-gradient(#5ed1fc,#3647b3)}.btn mdb-icon{position:relative;font-size:.9rem}.btn mdb-icon.right{margin-left:.3rem}.btn mdb-icon.left{margin-right:.3rem}.btn.btn-lg{padding:1rem 2.4rem;font-size:.94rem}.btn.btn-lg mdb-icon{font-size:1rem}.btn.btn-md{padding:.7rem 1.6rem;font-size:.7rem}.btn.btn-md mdb-icon{font-size:.8rem}.btn.btn-sm{padding:.5rem 1.6rem;font-size:.64rem}.btn.btn-sm mdb-icon{font-size:.7rem}\n"],encapsulation:2}),n})();const bze={provide:ku,useExisting:(0,d.Gpc)(()=>yze),multi:!0};let yze=(()=>{class n{constructor(){this.btnCheckboxTrue=!0,this.btnCheckboxFalse=!1,this.state=!1,this.onChange=Function.prototype,this.onTouched=Function.prototype}onClick(){this.isDisabled||(this.toggle(!this.state),this.onChange(this.value))}ngOnInit(){this.toggle(this.trueValue===this.value)}get trueValue(){return void 0===this.btnCheckboxTrue||this.btnCheckboxTrue}get falseValue(){return void 0!==this.btnCheckboxFalse&&this.btnCheckboxFalse}toggle(t){this.state=t,this.value=this.state?this.trueValue:this.falseValue}writeValue(t){this.state=this.trueValue===t,this.value=t?this.trueValue:this.falseValue}setDisabledState(t){this.isDisabled=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","mdbCheckbox",""]],hostVars:2,hostBindings:function(t,i){1&t&&d.NdJ("click",function(){return i.onClick()}),2&t&&d.ekj("active",i.state)},inputs:{btnCheckboxTrue:"btnCheckboxTrue",btnCheckboxFalse:"btnCheckboxFalse"},features:[d._Bn([bze])]}),n})();const vze={provide:ku,useExisting:(0,d.Gpc)(()=>Cze),multi:!0};let Cze=(()=>{class n{constructor(t,i){this.el=t,this.renderer=i,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.radioElementsArray=[],this._uncheckable=!1,this.disabled=!1}get uncheckable(){return this._uncheckable}set uncheckable(t){this._uncheckable=Yi(t)}get isActive(){return this.mdbRadio===this.value}onClick(t){if(!this.disabled){try{this.el.nativeElement.parentElement.childNodes.forEach(i=>{this.radioElementsArray.push(i)}),this.radioElementsArray.forEach(i=>{this.renderer.removeClass(i,"active")}),this.renderer.addClass(t.target,"active")}catch(i){}this.el.nativeElement.attributes.disabled||(this.value=this.uncheckable&&this.mdbRadio===this.value?void 0:this.mdbRadio,this.onTouched(),this.onChange(this.value))}}ngOnInit(){this.uncheckable=void 0!==this.uncheckable}onBlur(){this.onTouched()}writeValue(t){this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","mdbRadio",""]],hostVars:4,hostBindings:function(t,i){1&t&&d.NdJ("click",function(r){return i.onClick(r)}),2&t&&d.ekj("disabled",i.disabled)("active",i.isActive)},inputs:{mdbRadio:"mdbRadio",uncheckable:"uncheckable",value:"value",disabled:"disabled"},features:[d._Bn([vze])]}),n})(),DN=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),wze=(()=>{class n{constructor(t,i){this._el=t,this._r=i}ngOnInit(){this._r.addClass(this._el.nativeElement,"card-title")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mdb-card-title"]],ngContentSelectors:Mg,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),Sze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["mdb-card-text"]],inputs:{class:"class"},ngContentSelectors:Mg,decls:2,vars:3,template:function(t,i){1&t&&(d.F$t(),d.TgZ(0,"p"),d.Hsn(1),d.qZA()),2&t&&d.Gre("card-text ",i.class," ")},encapsulation:2,changeDetection:0}),n})(),xze=(()=>{class n{constructor(t,i){this._el=t,this._r=i}set cascade(t){Yi(t)&&this._r.addClass(this._el.nativeElement,"card-body-cascade")}ngOnInit(){this._r.addClass(this._el.nativeElement,"card-body"),this.class&&this.class.split(" ").forEach(t=>{this._r.addClass(this._el.nativeElement,t)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mdb-card-body"]],inputs:{class:"class",cascade:"cascade"},ngContentSelectors:Mg,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),Eze=(()=>{class n{constructor(t,i){this._el=t,this._r=i,this._cascade=!1,this._wider=!1}get cascade(){return this._cascade}set cascade(t){this._cascade=Yi(t)}get wider(){return this._wider}set wider(t){this._wider=Yi(t)}set narrower(t){const i=Yi(t);i?this._r.addClass(this._el.nativeElement,"narrower"):!i&&this._el.nativeElement.classList.contains("narrower")&&this._r.removeClass(this._el.nativeElement,"narrower")}set reverse(t){const i=Yi(t);i?this._r.addClass(this._el.nativeElement,"reverse"):!i&&this._el.nativeElement.classList.contains("reserse")&&this._r.removeClass(this._el.nativeElement,"reverse")}set dark(t){const i=Yi(t);i?this._r.addClass(this._el.nativeElement,"card-dark"):!i&&this._el.nativeElement.classList.contains("card-dark")&&this._r.removeClass(this._el.nativeElement,"card-dark")}set bgColor(t){t&&this._r.addClass(this._el.nativeElement,t)}set borderColor(t){t&&this._r.addClass(this._el.nativeElement,t)}ngOnInit(){this._r.addClass(this._el.nativeElement,"card"),this.cascade&&this._r.addClass(this._el.nativeElement,"card-cascade"),this.wider&&this._r.addClass(this._el.nativeElement,"wider"),this.narrower&&this._r.addClass(this._el.nativeElement,"narrower"),this.class&&this.class.split(" ").forEach(t=>{this._r.addClass(this._el.nativeElement,t)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mdb-card"]],viewQuery:function(t,i){if(1&t&&d.Gf(WVe,7),2&t){let s;d.iGM(s=d.CRH())&&(i.card=s.first)}},inputs:{class:"class",cascade:"cascade",wider:"wider",imageBackground:"imageBackground",narrower:"narrower",reverse:"reverse",dark:"dark",bgColor:"bgColor",borderColor:"borderColor"},ngContentSelectors:Mg,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},styles:[".card{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;border:0;font-weight:400}.card[class*=border]{border:1px solid #9e9e9e;box-shadow:none}.card .card-body h1,.card .card-body h2,.card .card-body h3,.card .card-body h4,.card .card-body h5,.card .card-body h6{font-weight:400}.card .card-body .card-title a,.card .card-body .card-title a:hover{transition:.2s ease-in-out}.card .card-body .card-text{color:#747373;font-size:.9rem;font-weight:400}.card .md-form label{font-weight:300}.card-text:last-child{margin-bottom:1rem!important}mdb-card-img img.img-fluid{width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),_ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["mdb-card-img"]],inputs:{src:"src",alt:"alt"},decls:1,vars:2,consts:[[1,"img-fluid",3,"src","alt"]],template:function(t,i){1&t&&d._UZ(0,"img",0),2&t&&d.Q6J("src",i.src,d.LSH)("alt",i.alt)},encapsulation:2,changeDetection:0}),n})(),nU=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Lo]]}),n})();var Zh="undefined"!=typeof window&&window||{},dI=Zh.document;function hR(){return"bs4"===Zh.__theme}let sbe=(()=>{class n{constructor(t){this.animated=!1,this.directionNext=!1,this.directionLeft=!1,this.directionPrev=!1,this.directionRight=!1,this.el=null,this.el=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mdb-slide"],["mdb-carousel-item"]],hostVars:14,hostBindings:function(t,i){2&t&&d.ekj("active",i.active)("animated",i.animated)("carousel-item-next",i.directionNext)("carousel-item-left",i.directionLeft)("carousel-item-prev",i.directionPrev)("carousel-item-right",i.directionRight)("carousel-item",i.el)},inputs:{active:"active"},ngContentSelectors:Mg,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},encapsulation:2}),n})(),nbe=(()=>{class n{constructor(){this.interval=5e3,this.noPause=!1,this.noWrap=!1,this.keyboard=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();var Ya=(()=>(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NEXT=1]="NEXT",n[n.PREV=2]="PREV"}(Ya||(Ya={})),Ya))();let Dze=(()=>{class n{constructor(t,i,s,r,o){this.el=i,this.cdRef=r,this.renderer=o,this.SWIPE_ACTION={LEFT:"swipeleft",RIGHT:"swiperight"},this._destroy$=new _s.x,this.destroyed=!1,this.animationEnd=!0,this.isBrowser=!1,this._noWrap=!1,this._noPause=!1,this._isControls=!0,this._keyboard=!1,this.class="",this.type="",this.animation="",this._allowSwipe=!0,this.activeSlideChange=new d.vpe(!1),this.isBrowser=hn(s),Object.assign(this,t)}get slides(){return this._slidesList.toArray()}get noWrap(){return this._noWrap}set noWrap(t){this._noWrap=Yi(t)}get noPause(){return this._noPause}set noPause(t){this._noPause=Yi(t)}get isControls(){return this._isControls}set isControls(t){this._isControls=Yi(t)}get keyboard(){return this._keyboard}set keyboard(t){this._keyboard=Yi(t)}get activeSlideIndex(){return this._activeSlideIndex}set activeSlideIndex(t){this._activeSlideIndex=PS(t)}get allowSwipe(){return this._allowSwipe}set allowSwipe(t){this._allowSwipe=Yi(t)}set activeSlide(t){const i=PS(t);this._slidesList&&i!==this._currentActiveSlide&&this._select(i)}get activeSlide(){return this._currentActiveSlide}checkNavigation(){return"carousel-multi-item"!==this.type}checkDots(){return"carousel-thumbnails"!==this.type}getImg(t){return t.el.nativeElement.querySelector("img").src}get interval(){return this._interval}set interval(t){this._interval=PS(t),this.restartTimer()}get isBs4(){return!hR()}ngOnDestroy(){this.destroyed=!0,this._destroy$.next(),this._destroy$.complete()}ngAfterViewInit(){this.play(),this._slidesList.changes.pipe(Ko(this._destroy$)).subscribe(t=>{this._slidesList=t,setTimeout(()=>{this._select(0)},0)}),this.activeSlideIndex?setTimeout(()=>{this._select(this.activeSlideIndex),this.activeSlideChange.emit({relatedTarget:this.activeSlide})},0):setTimeout(()=>{this._select(0)},0),this.isControls&&(this.carouselIndicators=this.el.nativeElement.querySelectorAll(".carousel-indicators > li"),this.carouselIndicators.length&&this.activeSlideIndex?this.renderer.addClass(this.carouselIndicators[this.activeSlideIndex],"active"):this.carouselIndicators.length&&this.renderer.addClass(this.carouselIndicators[0],"active"))}swipe(t=this.SWIPE_ACTION.RIGHT){this.allowSwipe&&(t===this.SWIPE_ACTION.RIGHT&&(this.previousSlide(),this.cdRef.markForCheck()),t===this.SWIPE_ACTION.LEFT&&(this.nextSlide(),this.cdRef.markForCheck()))}nextSlide(t=!1){this.restartTimer();const i=this.el.nativeElement.getElementsByTagName("video"),r=this.findNextSlideIndex(Ya.NEXT,t);if(i.length>0)for(let o=0;o<i.length;o++)o===r?i[o].play():i[o].pause();"slide"===this.animation?(this.pause(),this.slideAnimation(this.findNextSlideIndex(Ya.NEXT,t),Ya.NEXT),this.cdRef.markForCheck()):"fade"===this.animation?(this.pause(),this.fadeAnimation(this.findNextSlideIndex(Ya.NEXT,t),Ya.NEXT),this.cdRef.markForCheck()):(this.activeSlide=this.findNextSlideIndex(Ya.NEXT,t),this.cdRef.markForCheck()),this.animation||this.activeSlideChange.emit({direction:"Next",relatedTarget:this.activeSlide})}previousSlide(t=!1){this.restartTimer();const i=this.el.nativeElement.getElementsByTagName("video"),s=Ya.PREV,r=this.findNextSlideIndex(s,t);if(i.length>0)for(let o=0;o<i.length;o++)o===r?i[o].play():i[o].pause();"slide"===this.animation?(this.pause(),this.slideAnimation(this.findNextSlideIndex(s,t),s),this.cdRef.markForCheck()):"fade"===this.animation?(this.pause(),this.fadeAnimation(this.findNextSlideIndex(Ya.PREV,t),Ya.PREV),this.cdRef.markForCheck()):(this.activeSlide=this.findNextSlideIndex(Ya.PREV,t),this.cdRef.markForCheck()),this.animation||this.activeSlideChange.emit({direction:"Prev",relatedTarget:this.activeSlide})}fadeAnimation(t,i){const s=this.slides[t];this.animationEnd&&(this.animationEnd=!1,s.directionNext=!0,this.isBrowser&&setTimeout(()=>{const r=this.slides[this._currentActiveSlide].el.nativeElement;this.renderer.setStyle(r,"display","none"),this.renderer.setStyle(r,"transition","all 600ms"),this.renderer.setStyle(s.el.nativeElement,"display","block"),this.renderer.setStyle(s.el.nativeElement,"transition","all 600ms"),s.directionNext=!1,this.animationEnd=!0,this.activeSlide=t,this.activeSlideChange.emit(1===i?{direction:"Next",relatedTarget:this.activeSlide}:2===i?{direction:"Prev",relatedTarget:this.activeSlide}:{direction:t<this.activeSlide?"Prev":"Next",relatedTarget:this.activeSlide}),this.play(),this.cdRef.markForCheck()},0))}slideAnimation(t,i){const s=this.slides[this._currentActiveSlide],r=this.slides[t];this.animationEnd&&(i===Ya.NEXT&&(this.animationEnd=!1,r.directionNext=!0,this.isBrowser&&setTimeout(()=>{r.directionLeft=!0,s.directionLeft=!0,this.cdRef.markForCheck()},100)),i===Ya.PREV&&(this.animationEnd=!1,r.directionPrev=!0,this.isBrowser&&setTimeout(()=>{r.directionRight=!0,s.directionRight=!0,this.cdRef.markForCheck()},100)),this.isBrowser&&setTimeout(()=>{let o;r.directionLeft=!1,r.directionNext=!1,s.directionLeft=!1,s.directionNext=!1,r.directionRight=!1,r.directionPrev=!1,s.directionRight=!1,s.directionPrev=!1,this.animationEnd=!0,this.activeSlide=t,i===Ya.NEXT?o="Next":i===Ya.PREV&&(o="Prev"),this.activeSlideChange.emit({direction:o,relatedTarget:this.activeSlide}),this.play(),this.cdRef.markForCheck()},700))}selectSlide(t){this.pause(),"slide"===this.animation?this.activeSlide<t?this.slideAnimation(t,Ya.NEXT):this.activeSlide>t&&this.slideAnimation(t,Ya.PREV):"fade"===this.animation?t!==this.activeSlide&&this.fadeAnimation(t):this.animation||setTimeout(()=>{const i=t<this.activeSlide?"Prev":"Next";this._select(t),this.activeSlideChange.emit({direction:i,relatedTarget:this.activeSlide})},0),this.play()}play(){this.isPlaying||(this.isPlaying=!0,this.restartTimer(),this.cdRef.markForCheck())}pause(){this.noPause||(this.isPlaying=!1,this.resetTimer(),this.cdRef.markForCheck())}getCurrentSlideIndex(){return this.slides.findIndex(t=>t.active)}isLast(t){return t+1>=this.slides.length}findNextSlideIndex(t,i){let s=0;if(i||!this.isLast(this.activeSlide)||t===Ya.PREV||!this.noWrap){switch(t){case Ya.NEXT:s=this.isLast(this._currentActiveSlide)?!i&&this.noWrap?this._currentActiveSlide:0:this._currentActiveSlide+1;break;case Ya.PREV:s=this._currentActiveSlide>0?this._currentActiveSlide-1:!i&&this.noWrap?this._currentActiveSlide:this.slides.length-1;break;default:throw new Error("Unknown direction")}return s}}_select(t){if(isNaN(t))return void this.pause();const i=this.slides[this._currentActiveSlide];i&&(i.active=!1);const s=this.slides[t];s&&(this._currentActiveSlide=t,s.active=!0,this.activeSlide=t),this.cdRef.markForCheck()}restartTimer(){if(this.resetTimer(),this.isBrowser){const t=+this.interval;!isNaN(t)&&t>0&&(this.currentInterval=setInterval(()=>{const i=+this.interval;this.isPlaying&&!isNaN(this.interval)&&i>0&&this.slides.length?this.nextSlide():this.pause()},t))}}resetTimer(){this.isBrowser&&this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0)}hasClass(t,i){return t.classList?t.classList.contains(i):!!t.className.match(new RegExp("(\\s|^)"+i+"(\\s|$)"))}classAdd(t,i){t.classList?t.classList.add(i):this.hasClass(t,i)||(t.className+=" "+i)}removeClass(t,i){if(t.classList)t.classList.remove(i);else if(this.hasClass(t,i)){const s=new RegExp("(\\s|^)"+i+"(\\s|$)");t.className=t.className.replace(s," ")}}keyboardControl(t){this.keyboard&&(39===t.keyCode&&this.nextSlide(),37===t.keyCode&&this.previousSlide())}focus(){this.el.nativeElement.focus()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(nbe),d.Y36(d.SBq),d.Y36(d.Lbi),d.Y36(d.sBO),d.Y36(d.Qsj))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mdb-carousel"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,sbe,4),2&t){let r;d.iGM(r=d.CRH())&&(i._slidesList=r)}},hostBindings:function(t,i){1&t&&d.NdJ("mouseleave",function(){return i.play()})("mouseenter",function(){return i.pause()})("keyup",function(r){return i.keyboardControl(r)})("click",function(){return i.focus()})},inputs:{noWrap:"noWrap",noPause:"noPause",isControls:"isControls",keyboard:"keyboard",class:"class",type:"type",animation:"animation",activeSlideIndex:"activeSlideIndex",allowSwipe:"allowSwipe",activeSlide:"activeSlide",interval:"interval"},outputs:{activeSlideChange:"activeSlideChange"},ngContentSelectors:Mg,decls:8,vars:9,consts:[["tabindex","0",3,"swipeleft","swiperight","mouseenter","mouseleave","mouseup"],["class","controls-top",4,"ngIf"],["class","carousel-indicators",4,"ngIf"],[1,"carousel-inner"],["class","carousel-control-prev",3,"disabled","click",4,"ngIf"],["class","carousel-control-next",3,"disabled","click",4,"ngIf"],[1,"controls-top"],["mdbBtn","","floating","true",3,"click"],[1,"fas","fa-chevron-left"],[1,"fas","fa-chevron-right"],[1,"carousel-indicators"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],[1,"d-block","w-100","img-fluid",3,"src"],[1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],[1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"]],template:function(t,i){1&t&&(d.F$t(),d.TgZ(0,"div",0),d.NdJ("swipeleft",function(r){return i.swipe(r.type)})("swiperight",function(r){return i.swipe(r.type)})("mouseenter",function(){return i.pause()})("mouseleave",function(){return i.play()})("mouseup",function(){return i.play()}),d.YNc(1,GVe,5,4,"div",1),d.YNc(2,KVe,2,1,"ol",2),d.TgZ(3,"div",3),d.Hsn(4),d.qZA(),d.YNc(5,ZVe,2,1,"ol",2),d.YNc(6,XVe,4,2,"a",4),d.YNc(7,QVe,4,2,"a",5),d.qZA()),2&t&&(d.MT6("carousel ",i.class," ",i.type,""),d.xp6(1),d.Q6J("ngIf",i.slides.length>1&&!i.checkNavigation()&&i.isControls),d.xp6(1),d.Q6J("ngIf",i.slides.length>1&&i.checkDots()&&i.isControls),d.xp6(3),d.Q6J("ngIf",i.slides.length>1&&!i.checkDots()&&i.isControls),d.xp6(1),d.Q6J("ngIf",i.slides.length>1&&i.checkNavigation()&&i.isControls),d.xp6(1),d.Q6J("ngIf",i.slides.length>1&&i.checkNavigation()&&i.isControls))},directives:[zu,Ar,vr],styles:[".carousel .carousel-control-prev-icon,.carousel .carousel-control-next-icon{width:2.25rem;height:2.25rem}.carousel .carousel-indicators li{width:.625rem;height:.625rem;border-radius:50%;cursor:pointer}.carousel-fade .carousel-item{opacity:0;transition-duration:.6s;transition-property:opacity}.carousel-fade .carousel-item.active,.carousel-fade .carousel-item-next.carousel-item-left,.carousel-fade .carousel-item-prev.carousel-item-right{opacity:1}.carousel-fade .carousel-item-left.active,.carousel-fade .carousel-item-right.active{opacity:0}.carousel-fade .carousel-item-next,.carousel-fade .carousel-item-prev,.carousel-fade .carousel-item.active,.carousel-fade .carousel-item-left.active,.carousel-fade .carousel-item-prev.active{transform:translate(0)}@supports (transform-style: preserve-3d){.carousel-fade .carousel-item-next,.carousel-fade .carousel-item-prev,.carousel-fade .carousel-item.active,.carousel-fade .carousel-item-left.active,.carousel-fade .carousel-item-prev.active{transform:translateZ(0)}}.carousel-item.active,.carousel-item-next,.carousel-item-prev,.carousel-control-prev,.carousel-control-next{display:flex;overflow:hidden}.carousel,.carousel-multi-item,.carousel-thumbnails{outline:none}.carousel-fade .carousel-inner .carousel-item{opacity:0;transition-property:opacity}.carousel-fade .carousel-inner .active{opacity:1;transition:all .6s}.carousel-fade .carousel-inner>.carousel-item.active,.carousel-fade .carousel-inner>.carousel-item.next.left,.carousel-fade .carousel-inner>.carousel-item.prev.right{opacity:1;transition:all .6s;transform:translateZ(0)}\n"],encapsulation:2,changeDetection:0}),n})(),rU=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[nbe],imports:[[Lo,DN]]}),n})(),oU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Mze={provide:ku,useExisting:(0,d.Gpc)(()=>Fze),multi:!0};let Oze=0;class Pze{}let Fze=(()=>{class n{constructor(t){this._cdRef=t,this.defaultId="mdb-checkbox-"+ ++Oze,this.checkboxId=this.defaultId,this._required=!1,this._checked=!1,this._filledIn=!1,this._indeterminate=!1,this._disabled=!1,this._rounded=!1,this.checkboxPosition="left",this._default=!1,this._inline=!1,this.change=new d.vpe,this.checkboxClicked=new _s.x,this.onChange=i=>{},this.onTouched=()=>{}}get required(){return this._required}set required(t){this._required=Yi(t)}get checked(){return this._checked}set checked(t){this._checked=Yi(t)}get filledIn(){return this._filledIn}set filledIn(t){this._filledIn=Yi(t)}get indeterminate(){return this._indeterminate}set indeterminate(t){this._indeterminate=Yi(t)}get disabled(){return this._disabled}set disabled(t){this._disabled=Yi(t)}get rounded(){return this._rounded}set rounded(t){this._rounded=Yi(t)}get default(){return this._default}set default(t){this._default=Yi(t)}get inline(){return this._inline}set inline(t){this._inline=Yi(t)}get tabIndex(){return this._tabIndex}set tabIndex(t){this._tabIndex=PS(t)}onLabelClick(t){t.stopPropagation(),this.checkboxClicked.next(!0)}onDocumentClick(){this.checkboxClicked.next(!1)}ngOnInit(){this.indeterminate&&!this.filledIn&&!this.rounded&&(this.inputEl.indeterminate=!0)}ngOnChanges(t){t.hasOwnProperty("checked")&&(this.checked=t.checked.currentValue)}get changeEvent(){const t=new Pze;return t.element=this,t.checked=this.checked,t}toggle(){this.disabled||(this.checked=!this.checked,this.indeterminate=!1,this.onChange(this.checked),this._cdRef.markForCheck())}onCheckboxClick(t){t.stopPropagation(),this.toggle()}onCheckboxChange(t){t.stopPropagation(),Oge(0).subscribe(()=>this.change.emit(this.changeEvent))}onBlur(){this.checkboxClicked.pipe((0,tl.q)(1)).subscribe(t=>{t||this.onTouched()})}writeValue(t){this.value=t,this.checked=!!t,this._cdRef.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mdb-checkbox"]],viewQuery:function(t,i){if(1&t&&d.Gf(JVe,7),2&t){let s;d.iGM(s=d.CRH())&&(i.inputEl=s.first)}},hostBindings:function(t,i){1&t&&d.NdJ("click",function(r){return i.onLabelClick(r)})("click",function(){return i.onDocumentClick()},!1,d.evT)},inputs:{class:"class",checkboxId:"checkboxId",required:"required",name:"name",value:"value",checked:"checked",filledIn:"filledIn",indeterminate:"indeterminate",disabled:"disabled",rounded:"rounded",checkboxPosition:"checkboxPosition",default:"default",inline:"inline",tabIndex:"tabIndex"},outputs:{change:"change"},features:[d._Bn([Mze]),d.TTD],ngContentSelectors:Mg,decls:5,vars:27,consts:[[3,"ngClass"],["type","checkbox",1,"custom-control-input",3,"ngClass","id","checked","disabled","required","indeterminate","tabIndex","blur","click","change"],["input",""]],template:function(t,i){1&t&&(d.F$t(),d.TgZ(0,"div",0)(1,"input",1,2),d.NdJ("blur",function(){return i.onBlur()})("click",function(r){return i.onCheckboxClick(r)})("change",function(r){return i.onCheckboxChange(r)}),d.qZA(),d.TgZ(3,"label",0),d.Hsn(4),d.qZA()()),2&t&&(d.Q6J("ngClass",d.l5B(12,eze,i.default,!i.default,i.inline,i.inline&&!i.default)),d.xp6(1),d.Q6J("ngClass",d.kEZ(17,tze,i.filledIn||i.rounded,i.default,!i.default))("id",i.checkboxId)("checked",i.checked)("disabled",i.disabled)("required",i.required)("indeterminate",i.indeterminate)("tabIndex",i.tabIndex),d.uIk("name",i.name)("value",i.value),d.xp6(2),d.Q6J("ngClass",d.qbA(21,ize,i.default,!i.default,"right"===i.checkboxPosition,i.rounded,i.disabled)),d.uIk("for",i.checkboxId))},directives:[$l],encapsulation:2,changeDetection:0}),n})(),aU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Lo,pTe]]}),n})(),lU=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),Nze=(()=>{class n{constructor(){this.direction="down",this.isOpenChange=new d.vpe,this.isDisabledChange=new d.vpe,this.toggleClick=new d.vpe,this.dropdownMenu=new Promise(t=>{this.resolveDropdownMenu=t})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Bze{constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const Hze={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};"undefined"!=typeof window&&window,"undefined"==typeof console||console;class RN{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}class Wze{constructor(e,t,i,s,r,o,a,l){this._viewContainerRef=e,this._renderer=t,this._elementRef=i,this._injector=s,this._componentFactoryResolver=r,this._ngZone=o,this._applicationRef=a,this._posService=l,this.onBeforeShow=new d.vpe,this.onShown=new d.vpe,this.onBeforeHide=new d.vpe,this.onHidden=new d.vpe,this.shown=new d.vpe,this.hidden=new d.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=null,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.data);const t=d.zs3.create({providers:this._providers,parent:this._injector});if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof d.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const i=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);i&&i.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const e=this._componentRef.location.nativeElement;return e.parentNode.removeChild(e),this._contentRef.componentRef&&this._contentRef.componentRef.destroy(),this._componentRef.destroy(),this._viewContainerRef&&this._contentRef.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._contentRef=null,this._componentRef=null,this._removeGlobalListener(),this.onHidden.emit(),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||this._elementRef.nativeElement;const t=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),i=this._listenOpts.show=r=>{e.show?e.show(r):this.show(r),r()};return this._unregisterListenersFn=function Vze(n,e){const t=function lbe(n,e=Hze){const t=(n||"").trim();if(0===t.length)return[];const i=t.split(/\s+/).map(r=>r.split(":")).map(r=>{const o=e[r[0]]||r;return new Bze(o[0],o[1])}),s=i.filter(r=>r.isManual());if(s.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===s.length&&i.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return i}(e.triggers),i=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const s=[],r=[],o=()=>{r.forEach(a=>s.push(a())),r.length=0};return t.forEach(a=>{const l=a.open===a.close,h=l?e.toggle:e.show;l||r.push(()=>n.listen(i,a.close,e.hide)),s.push(n.listen(i,a.open,()=>h(o)))}),()=>{s.forEach(a=>a())}}(this._renderer,{target:e.target,triggers:e.triggers,show:i,hide:t,toggle:r=>{this.isShown?t():i(r)}}),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=null)}attachInline(e,t){return this._inlineViewRef=e.createEmbeddedView(t),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts&&this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._globalListener=function zze(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(i=>i.contains(t.target))||e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide()})})}this._listenOpts.outsideEsc&&(this._globalListener=function jze(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(i=>i.contains(t.target))||e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=null)}_getContentRef(e,t){if(!e)return new RN([]);if(e instanceof d.Rgc){if(this._viewContainerRef){const s=this._viewContainerRef.createEmbeddedView(e);return s.markForCheck(),new RN([s.rootNodes],s)}const i=e.createEmbeddedView({});return this._applicationRef.attachView(i),new RN([i.rootNodes],i)}if("function"==typeof e){const i=this._componentFactoryResolver.resolveComponentFactory(e),s=d.zs3.create({providers:this._providers,parent:this._injector}),r=i.create(s);return Object.assign(r.instance,t),this._applicationRef.attachView(r.hostView),new RN([[r.location.nativeElement]],r.hostView,r)}return new RN([[this._renderer.createText(`${e}`)]])}}function uI(n,e){if(1!==n.nodeType)return[];const i=n.ownerDocument.defaultView.getComputedStyle(n,null);return e?i[e]:i}function tJ(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function iJ(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:i}=uI(n);return/(auto|scroll|overlay)/.test(String(e)+String(i)+String(t))?n:iJ(tJ(n))}const cbe="undefined"!=typeof window&&"undefined"!=typeof document,dbe=cbe&&!(!window.MSInputMethodContext||!document.documentMode),ube=cbe&&!(!window.MSInputMethodContext||!/MSIE 10/.test(navigator.userAgent));function cR(n){return 11===n?dbe:10===n?ube:dbe||ube}function sJ(n){if(!n)return document.documentElement;const e=cR(10)?document.body:null;let i,t=n.offsetParent||null;for(;t===e&&n.nextElementSibling&&"BODY"!==n.nodeName;)i=n.nextElementSibling,t=i.offsetParent;const s=t&&t.nodeName;return s&&"BODY"!==s&&"HTML"!==s?-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===uI(t,"position")?sJ(t):t:i?i.ownerDocument.documentElement:document.documentElement}function nJ(n){return null!==n.parentNode?nJ(n.parentNode):n}function hU(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=t?n:e,s=t?e:n,r=document.createRange();r.setStart(i,0),r.setEnd(s,0);const{commonAncestorContainer:o}=r;if(n!==o&&e!==o||i.contains(s))return function Gze(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||sJ(n.firstElementChild)===n)}(o)?o:sJ(o);const a=nJ(n);return a.host?hU(a.host,e):hU(n,nJ(e).host)}function pbe(n,e){const t="x"===e?"Left":"Top",i="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${i}Width`])}function fbe(n,e,t,i){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],cR(10)?parseInt(t[`offset${n}`],10)+parseInt(i["margin"+("Height"===n?"Top":"Left")],10)+parseInt(i["margin"+("Height"===n?"Bottom":"Right")],10):0)}function mbe(n){const e=n.body,t=n.documentElement,i=cR(10)&&getComputedStyle(t);return{height:fbe("Height",e,t,i),width:fbe("Width",e,t,i)}}function dR(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",i=n.nodeName;if("BODY"===i||"HTML"===i){const s=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||s)[t]}return n[t]}function AN(n){return Object.assign(Object.assign({},n),{right:n.left+n.width,bottom:n.top+n.height})}function gbe(n){let e={};try{if(cR(10)){e=n.getBoundingClientRect();const l=dR(n,"top"),h=dR(n,"left");e.top+=l,e.left+=h,e.bottom+=l,e.right+=h}else e=n.getBoundingClientRect()}catch(l){return}const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},i="HTML"===n.nodeName?mbe(n.ownerDocument):{};let o=n.offsetWidth-(i.width||n.clientWidth||t.right-t.left),a=n.offsetHeight-(i.height||n.clientHeight||t.bottom-t.top);if(o||a){const l=uI(n);o-=pbe(l,"x"),a-=pbe(l,"y"),t.width-=o,t.height-=a}return AN(t)}function rJ(n,e,t=!1){const i=cR(10),s="HTML"===e.nodeName,r=gbe(n),o=gbe(e),a=iJ(n),l=uI(e),h=parseFloat(l.borderTopWidth),c=parseFloat(l.borderLeftWidth);t&&s&&(o.top=Math.max(o.top,0),o.left=Math.max(o.left,0));let m=AN({top:r.top-o.top-h,left:r.left-o.left-c,width:r.width,height:r.height});if(m.marginTop=0,m.marginLeft=0,!i&&s){const b=parseFloat(l.marginTop),v=parseFloat(l.marginLeft);m.top-=h-b,m.bottom-=h-b,m.left-=c-v,m.right-=c-v,m.marginTop=b,m.marginLeft=v}return(i&&!t?e.contains(a):e===a&&"BODY"!==a.nodeName)&&(m=function $ze(n,e,t=!1){const i=dR(e,"top"),s=dR(e,"left"),r=t?-1:1;return n.top+=i*r,n.bottom+=i*r,n.left+=s*r,n.right+=s*r,n}(m,e)),m}function bbe(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===uI(n,"position")||bbe(tJ(n)))}function ybe(n){if(!n||!n.parentElement||cR())return document.documentElement;let e=n.parentElement;for(;e&&"none"===uI(e,"transform");)e=e.parentElement;return e||document.documentElement}function oJ(n,e,t=0,i,s=!1){let r={top:0,left:0};const o=s?ybe(n):hU(n,e);if("viewport"===i)r=function Kze(n,e=!1){const t=n.ownerDocument.documentElement,i=rJ(n,t),s=Math.max(t.clientWidth,window.innerWidth||0),r=Math.max(t.clientHeight,window.innerHeight||0),o=e?0:dR(t),a=e?0:dR(t,"left");return AN({top:o-Number(i.top)+Number(i.marginTop),left:a-Number(i.left)+Number(i.marginLeft),width:s,height:r})}(o,s);else{let a;"scrollParent"===i?(a=iJ(tJ(e)),"BODY"===a.nodeName&&(a=n.ownerDocument.documentElement)):a="window"===i?n.ownerDocument.documentElement:i;const l=rJ(a,o,s);if("HTML"!==a.nodeName||bbe(o))r=l;else{const{height:h,width:c}=mbe(n.ownerDocument);r.top+=l.top-l.marginTop,r.bottom=Number(h)+Number(l.top),r.left+=l.left-l.marginLeft,r.right=Number(c)+Number(l.left)}}return r.left+=t,r.top+=t,r.right-=t,r.bottom-=t,r}function Yze({width:n,height:e}){return n*e}function aJ(n,e,t,i,s=["top","left","bottom","right"],r="viewport",o=0){if(-1===n.indexOf("auto"))return n;const a=oJ(t,i,o,r),l={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},h=Object.keys(l).map(v=>Object.assign(Object.assign({key:v},l[v]),{area:Yze(l[v])})).sort((v,w)=>w.area-v.area);let c=h.filter(({width:v,height:w})=>v>=t.clientWidth&&w>=t.clientHeight);c=s.reduce((v,w)=>Object.assign(Object.assign({},v),{[w]:c[w]}),{});const m=c.length>0?c[0].key:h[0].key,b=n.split(" ")[1];return t.className=t.className.replace(/auto/g,m),m+(b?`-${b}`:"")}function vbe(n){const t=n.ownerDocument.defaultView.getComputedStyle(n),i=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),s=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:Number(n.offsetWidth)+s,height:Number(n.offsetHeight)+i}}function Cbe(n,e,t=null){return rJ(e,t?ybe(n):hU(n,e),t)}function lJ(n,e,t){const i=t.split(" ")[0],s=vbe(n),r={width:s.width,height:s.height},o=-1!==["right","left"].indexOf(i),a=o?"top":"left",l=o?"left":"top",h=o?"height":"width",c=o?"width":"height";return r[a]=e[a]+e[h]/2-s[h]/2,r[l]=i===l?e[l]-s[c]:e[function Xze(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(l)],r}function wbe(n,e){return n&&n.modifiers&&n.modifiers[e]&&n.modifiers[e].enabled}function Sbe(n,e,t){Object.keys(e).forEach(i=>{let s="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&function Jze(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(n)}(e[i])&&(s="px"),t?t.setStyle(n,i,`${String(e[i])}${s}`):n.style[i]=String(e[i])+s})}function t5e(n){let e=n.offsets.target;const t=n.instance.target.querySelector(".arrow");if(!t)return n;const i=-1!==["left","right"].indexOf(n.placement),s=i?"height":"width",r=i?"Top":"Left",o=r.toLowerCase(),a=i?"left":"top",l=i?"bottom":"right",h=vbe(t)[s];n.offsets.host[l]-h<e[o]&&(e[o]-=e[o]-(n.offsets.host[l]-h)),Number(n.offsets.host[o])+Number(h)>e[l]&&(e[o]+=Number(n.offsets.host[o])+Number(h)-Number(e[l])),e=AN(e);const c=Number(n.offsets.host[o])+Number(n.offsets.host[s]/2-h/2),m=uI(n.instance.target),b=parseFloat(m[`margin${r}`]),v=parseFloat(m[`border${r}Width`]);let w=c-e[o]-b-v;return w=Math.max(Math.min(e[s]-h,w),0),n.offsets.arrow={[o]:Math.round(w),[a]:""},n.instance.arrow=t,n}function i5e(n){if(n.offsets.target=AN(n.offsets.target),!wbe(n.options,"flip"))return n.offsets.target=Object.assign(Object.assign({},n.offsets.target),lJ(n.instance.target,n.offsets.host,n.placement)),n;const e=oJ(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],i=n.placement.split(" ")[1]||"";const s=n.offsets.host,r=n.instance.target,o=n.instance.host,a=i?aJ("auto",s,r,o,["top","bottom"]):aJ("auto",s,r,o),l=[t,a];return l.forEach((h,c)=>{if(t!==h||l.length===c+1)return n;t=n.placement.split(" ")[0];const m="left"===t&&Math.floor(n.offsets.target.right)>Math.floor(n.offsets.host.left)||"right"===t&&Math.floor(n.offsets.target.left)<Math.floor(n.offsets.host.right)||"top"===t&&Math.floor(n.offsets.target.bottom)>Math.floor(n.offsets.host.top)||"bottom"===t&&Math.floor(n.offsets.target.top)<Math.floor(n.offsets.host.bottom),b=Math.floor(n.offsets.target.left)<Math.floor(e.left),v=Math.floor(n.offsets.target.right)>Math.floor(e.right),w=Math.floor(n.offsets.target.top)<Math.floor(e.top),E=Math.floor(n.offsets.target.bottom)>Math.floor(e.bottom),D="left"===t&&b||"right"===t&&v||"top"===t&&w||"bottom"===t&&E,L=-1!==["top","bottom"].indexOf(t),N=L&&"left"===i&&b||L&&"right"===i&&v||!L&&"left"===i&&w||!L&&"right"===i&&E;(m||D||N)&&((m||D)&&(t=l[c+1]),N&&(i=function Qze(n){return"right"===n?"left":"left"===n?"right":n}(i)),n.placement=t+(i?` ${i}`:""),n.offsets.target=Object.assign(Object.assign({},n.offsets.target),lJ(n.instance.target,n.offsets.host,n.placement)))}),n}function n5e(n){if(!wbe(n.options,"preventOverflow"))return n;const e="transform",t=n.instance.target.style,{top:i,left:s,[e]:r}=t;t.top="",t.left="",t[e]="";const o=oJ(n.instance.target,n.instance.host,0,"scrollParent",!1);t.top=i,t.left=s,t[e]=r;const l={primary(c){let m=n.offsets.target[c];return n.offsets.target[c]<o[c]&&(m=Math.max(n.offsets.target[c],o[c])),{[c]:m}},secondary(c){const m="right"===c?"left":"top";let b=n.offsets.target[m];return n.offsets.target[c]>o[c]&&(b=Math.min(n.offsets.target[m],o[c]-("right"===c?n.offsets.target.width:n.offsets.target.height))),{[m]:b}}};let h;return["left","right","top","bottom"].forEach(c=>{h=-1!==["left","top"].indexOf(c)?"primary":"secondary",n.offsets.target=Object.assign(Object.assign({},n.offsets.target),l[h](c))}),n}function r5e(n){const e=n.placement,t=e.split(" ")[0],i=e.split(" ")[1];if(i){const{host:s,target:r}=n.offsets,o=-1!==["bottom","top"].indexOf(t),a=o?"left":"top",l=o?"width":"height",h={left:{[a]:s[a]},right:{[a]:s[a]+s[l]-s[l]}};n.offsets.target=Object.assign(Object.assign({},r),h[i])}return n}const a5e=new class o5e{position(e,t){return this.offset(e,t)}offset(e,t){return Cbe(t,e)}positionElements(e,t,i,s,r){return[i5e,r5e,n5e,t5e].reduce((a,l)=>l(a),function s5e(n,e,t,i){const s=Cbe(n,e),r=!!t.match(/auto/g);let o=t.match(/auto\s(left|right|top|bottom)/g)?t.split(" ")[1]||"":t;const a=lJ(n,s,o);return o=aJ(o,s,n,e),{options:i,instance:{target:n,host:e,arrow:null},offsets:{target:a,host:s,arrow:null},positionFixed:!1,placement:o,placementAuto:r}}(t,e,i,r))}};let LN=(()=>{class n{constructor(t,i,s){this._ngZone=s,this.update$$=new _s.x,this.positionElements=new Map,hn(i)&&this._ngZone.runOutsideAngular(()=>{(0,Sh.T)(aI(window,"scroll"),aI(window,"resize"),ei(0,Bge),this.update$$).subscribe(()=>{this.positionElements.forEach(r=>{!function l5e(n,e,t,i,s,r){!function e5e(n,e){const t=n.instance.target,i=function Zze(n){return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(n.offsets.target.left),top:Math.round(n.offsets.target.top),bottom:Math.round(n.offsets.target.bottom),right:Math.floor(n.offsets.target.right)}}(n);Sbe(t,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${i.left}px, ${i.top}px, 0px)`},e),n.instance.arrow&&Sbe(n.instance.arrow,n.offsets.arrow,e),n.placementAuto&&(e?(e.setAttribute(t,"class",t.className.replace(/bs-popover-auto/g,`bs-popover-${n.placement}`)),e.setAttribute(t,"class",t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${n.placement}`)),e.setAttribute(t,"class",t.className.replace(/\sauto/g,`s${n.placement}`)),t.className.match(/popover/g)&&e.addClass(t,"popover-auto"),t.className.match(/tooltip/g)&&e.addClass(t,"tooltip-auto")):(t.className=t.className.replace(/bs-popover-auto/g,`bs-popover-${n.placement}`),t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${n.placement}`),t.className=t.className.replace(/\sauto/g,`s${n.placement}`),t.className.match(/popover/g)&&t.classList.add("popover-auto"),t.className.match(/tooltip/g)&&t.classList.add("tooltip-auto"))),e?e.setAttribute(t,"class",t.className.replace(/left|right|top|bottom/g,`${n.placement.split(" ")[0]}`)):t.className=t.className.replace(/left|right|top|bottom/g,`${n.placement.split(" ")[0]}`)}(a5e.positionElements(n,e,t,i,s),r)}(cU(r.target),cU(r.element),r.attachment,r.appendToBody,this.options,t.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}addPositionElement(t){this.positionElements.set(cU(t.element),t)}calcPosition(){this.update$$.next()}deletePositionElement(t){this.positionElements.delete(cU(t))}setOptions(t){this.options=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(d.Lbi),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function cU(n){return n&&"string"==typeof n?document.querySelector(n):n instanceof d.SBq?n.nativeElement:n}let MN=(()=>{class n{constructor(t,i,s,r,o){this._componentFactoryResolver=t,this._ngZone=i,this._injector=s,this._posService=r,this._applicationRef=o}createLoader(t,i,s){return new Wze(i,s,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d._Vd),d.LFG(d.R0b),d.LFG(d.zs3),d.LFG(LN),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),h5e=(()=>{class n{constructor(){this.autoClose=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),dU=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[MN,LN,Nze,{provide:h5e,useValue:t||{autoClose:!0}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();let uU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Lo]]}),n})(),pU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Lo]]}),n})(),fU=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),Ebe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),_be=(()=>{class n{hide(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ibe={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,scroll:!1,data:{}};let c5e=(()=>{class n{constructor(t,i){this.element=t,this.renderer=i,this.classNameBackDrop=!0,this._isShown=!1}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?(this.renderer.addClass(this.element.nativeElement,"in"),hR()||this.renderer.addClass(this.element.nativeElement,"show")):(this.renderer.removeClass(this.element.nativeElement,"in"),hR()||this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.renderer.addClass(this.element.nativeElement,"fade"),class xbe{constructor(){}static reflow(e){}static getStyles(e){let t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=Zh),t.getComputedStyle(e)}focusTrapModal(e,t){let i,s,r;i=t.nativeElement.querySelectorAll("a[href], button, textarea, input, select, form, mdb-select, mdb-auto-completer, mdb-checkbox, mdb-range-input"),s=i[0],r=i[i.length-1],("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?dI&&dI.activeElement===s&&(r.focus(),e.preventDefault()):dI&&dI.activeElement===r&&(s.focus(),e.preventDefault()))}getClosestEl(e,t){for(;e&&e!==dI;e=e.parentNode)if(e.matches&&e.matches(t))return e;return null}getCoords(e){const t=e.getBoundingClientRect(),i=dI.body,s=dI.documentElement,c=t.left+(Zh.pageXOffset||s.scrollLeft||i.scrollLeft)-(s.clientLeft||i.clientLeft||0);return{top:Math.round(t.top+(Zh.pageYOffset||s.scrollTop||i.scrollTop)-(s.clientTop||i.clientTop||0)),left:Math.round(c)}}}.reflow(this.element.nativeElement),this.isShown=!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mdb-modal-backdrop"]],hostVars:2,hostBindings:function(t,i){2&t&&d.ekj("modal-backdrop",i.classNameBackDrop)},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),d5e=(()=>{class n{constructor(t,i,s){this._renderer=s,this.modalClass="modal",this.tabindex=-1,this.role="dialog",this.modal=!0,this.isShown=!1,this.isModalHiding=!1,this._element=i,this.config=Object.assign({},t)}onClick(t){this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||(this.mdbModalService.setDismissReason("backdrop-click"),this.hide())}onEsc(){this.config.keyboard&&this.level===this.mdbModalService.getModalsCount()&&(this.mdbModalService.setDismissReason("esc"),this.hide())}ngOnInit(){this.config.animated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),window&&-1!==window.navigator.userAgent.indexOf("Edge")&&this.config&&-1===this.config.toString().indexOf("side-modal")||window&&-1!==window.navigator.userAgent.indexOf("Edge")&&this.config&&-1===this.config.toString().indexOf("modal-full-height")?(this.isShown=!0,this._renderer.addClass(this._element.nativeElement,hR()?"in":"show"),this._renderer.setStyle(this._element.nativeElement,"transition","transform 0.3s ease-out"),this._renderer.setStyle(this._element.nativeElement,"transform","translate(0, 25px)")):setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,hR()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(1===this.mdbModalService.getModalsCount()&&(this.mdbModalService.checkScrollbar(),this.mdbModalService.setScrollbar()),this._renderer.addClass(document.body,"modal-open")),this.config.containerClass&&this.updateContainerClass(),this.config.scroll&&this._renderer.setStyle(this._element.nativeElement,"overflow-y","auto")}focusModalElement(){this.config.focus&&this._element.nativeElement.focus()}updateContainerClass(){if(this.config.containerClass){const i=this.config.containerClass.split(" ");for(let s=0;s<i.length;s++)this._renderer.addClass(this._element.nativeElement,i[s])}}ngOnDestroy(){this.isShown&&this.hide()}hide(){if(this.isModalHiding||!this.isShown)return;this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,hR()?"in":"show");const t=Array.from(this._element.nativeElement.querySelectorAll("iframe")),i=Array.from(this._element.nativeElement.querySelectorAll("video"));t.forEach(s=>{const r=s.getAttribute("src");this._renderer.setAttribute(s,"src",r)}),i.forEach(s=>{s.pause()}),setTimeout(()=>{this.isShown=!1,document&&document.body&&1===this.mdbModalService.getModalsCount()&&this._renderer.removeClass(document.body,"modal-open"),this.mdbModalService.hide(this.level),this.isModalHiding=!1},this.isAnimated?300:0)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ebe),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mdb-modal-container"]],hostVars:4,hostBindings:function(t,i){1&t&&d.NdJ("click",function(r){return i.onClick(r)})("keydown.esc",function(){return i.onEsc()},!1,d.Jf7),2&t&&(d.Ikx("tabindex",i.tabindex),d.uIk("role",i.role),d.ekj("modal",i.modal))},ngContentSelectors:Mg,decls:3,vars:2,consts:[["role","document","cdkTrapFocus",""],[1,"modal-content","modal-dynamic"]],template:function(t,i){1&t&&(d.F$t(),d.TgZ(0,"div",0)(1,"div",1),d.Hsn(2),d.qZA()()),2&t&&d.Tol("modal-dialog"+(i.config.class?" "+i.config.class:""))},directives:[MVe],styles:[".img-fluid,.modal-dialog.cascading-modal.modal-avatar .modal-header,.video-fluid{max-width:100%;height:auto}.flex-center{display:flex;justify-content:center;align-items:center;height:100%}.flex-center p{margin:0}.flex-center ul{text-align:center}.flex-center ul li{margin-bottom:1rem}.flex-center ul li:last-of-type{margin-bottom:0}.hr-light{border-top:1px solid #fff}.hr-dark{border-top:1px solid #666}.w-responsive{width:75%}@media (max-width: 740px){.w-responsive{width:100%}}.collapsible-body{display:none}.jumbotron{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;border-radius:.125rem;background-color:#fff}.bg-primary{background-color:#4285f4!important}a.bg-primary:hover,a.bg-primary:focus,button.bg-primary:hover,button.bg-primary:focus{background-color:#1266f1!important}.border-primary{border-color:#4285f4!important}.bg-danger{background-color:#ff3547!important}a.bg-danger:hover,a.bg-danger:focus,button.bg-danger:hover,button.bg-danger:focus{background-color:#ff0219!important}.border-danger{border-color:#ff3547!important}.bg-warning{background-color:#fb3!important}a.bg-warning:hover,a.bg-warning:focus,button.bg-warning:hover,button.bg-warning:focus{background-color:#fa0!important}.border-warning{border-color:#fb3!important}.bg-success{background-color:#00c851!important}a.bg-success:hover,a.bg-success:focus,button.bg-success:hover,button.bg-success:focus{background-color:#00953c!important}.border-success{border-color:#00c851!important}.bg-info{background-color:#33b5e5!important}a.bg-info:hover,a.bg-info:focus,button.bg-info:hover,button.bg-info:focus{background-color:#1a9bcb!important}.border-info{border-color:#33b5e5!important}.bg-default{background-color:#2bbbad!important}a.bg-default:hover,a.bg-default:focus,button.bg-default:hover,button.bg-default:focus{background-color:#219287!important}.border-default{border-color:#2bbbad!important}.bg-secondary{background-color:#a6c!important}a.bg-secondary:hover,a.bg-secondary:focus,button.bg-secondary:hover,button.bg-secondary:focus{background-color:#9540bf!important}.border-secondary{border-color:#a6c!important}.bg-dark{background-color:#212121!important}a.bg-dark:hover,a.bg-dark:focus,button.bg-dark:hover,button.bg-dark:focus{background-color:#080808!important}.border-dark{border-color:#212121!important}.bg-light{background-color:#e0e0e0!important}a.bg-light:hover,a.bg-light:focus,button.bg-light:hover,button.bg-light:focus{background-color:#c7c7c7!important}.border-light{border-color:#e0e0e0!important}.card-img-100{width:100px;height:100px}.card-img-64{width:64px;height:64px}.mml-1{margin-left:-.25rem!important}.flex-1{flex:1}body.modal-open{overflow:auto}body.scrollable{overflow-y:auto}.modal-dialog .modal-content{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;border:0;border-radius:.125rem}.modal-dialog .modal-content .modal-header{border-top-left-radius:.125rem;border-top-right-radius:.125rem}.modal-dialog.cascading-modal{margin-top:10%}.modal-dialog.cascading-modal .close{opacity:1;text-shadow:none;color:#fff;outline:0}.modal-dialog.cascading-modal .modal-header{box-shadow:0 5px 11px #0000002e,0 4px 15px #00000026;margin:-2rem 1rem 1rem;border:none;border-radius:.125rem;padding:1.5rem;text-align:center}.modal-dialog.cascading-modal .modal-header .close{margin-right:1rem}.modal-dialog.cascading-modal .modal-header .title{margin-bottom:0;width:100%;font-size:1.25rem}.modal-dialog.cascading-modal .modal-header .title .fas,.modal-dialog.cascading-modal .modal-header .title .fab,.modal-dialog.cascading-modal .modal-header .title .far{margin-right:9px}.modal-dialog.cascading-modal .modal-header .social-buttons{margin-top:1.5rem}.modal-dialog.cascading-modal .modal-header .social-buttons a{font-size:1rem}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;margin:-1.5rem 1rem 0;display:flex}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs li{flex:1}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs li a{text-align:center}.modal-dialog.cascading-modal .modal-c-tabs .tab-content{padding:1.7rem 0 0;box-shadow:unset}.modal-dialog.cascading-modal .modal-body,.modal-dialog.cascading-modal .modal-footer{padding-left:2rem;padding-right:2rem;color:#616161}.modal-dialog.cascading-modal .modal-body .additional-option,.modal-dialog.cascading-modal .modal-footer .additional-option{margin-top:1rem;text-align:center}.modal-dialog.cascading-modal.modal-avatar{margin-top:6rem}.modal-dialog.cascading-modal.modal-avatar .modal-header{box-shadow:none;margin:-6rem 0 -1rem}.modal-dialog.cascading-modal.modal-avatar .modal-header img{width:130px;box-shadow:0 8px 17px #0003,0 6px 20px #00000030;margin-left:auto;margin-right:auto}.modal-dialog.modal-notify .heading{margin:0;padding:.3rem;font-size:1.15rem;color:#fff}.modal-dialog.modal-notify .modal-header{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;border:0}.modal-dialog.modal-notify .close{opacity:1}.modal-dialog.modal-notify .modal-body{padding:1.5rem;color:#616161}.modal-dialog.modal-notify.modal-primary .modal-header{background-color:#4285f4}.modal-dialog.modal-notify.modal-primary .fas,.modal-dialog.modal-notify.modal-primary .fab,.modal-dialog.modal-notify.modal-primary .far{color:#4285f4}.modal-dialog.modal-notify.modal-primary .badge{background-color:#4285f4}.modal-dialog.modal-notify.modal-primary .btn .fas,.modal-dialog.modal-notify.modal-primary .btn .fab,.modal-dialog.modal-notify.modal-primary .btn .far{color:#fff}.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .fas,.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .fab,.modal-dialog.modal-notify.modal-primary .btn.btn-outline-primary .far{color:#4285f4}.modal-dialog.modal-notify.modal-danger .modal-header{background-color:#ff3547}.modal-dialog.modal-notify.modal-danger .fas,.modal-dialog.modal-notify.modal-danger .fab,.modal-dialog.modal-notify.modal-danger .far{color:#ff3547}.modal-dialog.modal-notify.modal-danger .badge{background-color:#ff3547}.modal-dialog.modal-notify.modal-danger .btn .fas,.modal-dialog.modal-notify.modal-danger .btn .fab,.modal-dialog.modal-notify.modal-danger .btn .far{color:#fff}.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .fas,.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .fab,.modal-dialog.modal-notify.modal-danger .btn.btn-outline-danger .far{color:#ff3547}.modal-dialog.modal-notify.modal-warning .modal-header{background-color:#fb3}.modal-dialog.modal-notify.modal-warning .fas,.modal-dialog.modal-notify.modal-warning .fab,.modal-dialog.modal-notify.modal-warning .far{color:#fb3}.modal-dialog.modal-notify.modal-warning .badge{background-color:#fb3}.modal-dialog.modal-notify.modal-warning .btn .fas,.modal-dialog.modal-notify.modal-warning .btn .fab,.modal-dialog.modal-notify.modal-warning .btn .far{color:#fff}.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .fas,.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .fab,.modal-dialog.modal-notify.modal-warning .btn.btn-outline-warning .far{color:#fb3}.modal-dialog.modal-notify.modal-success .modal-header{background-color:#00c851}.modal-dialog.modal-notify.modal-success .fas,.modal-dialog.modal-notify.modal-success .fab,.modal-dialog.modal-notify.modal-success .far{color:#00c851}.modal-dialog.modal-notify.modal-success .badge{background-color:#00c851}.modal-dialog.modal-notify.modal-success .btn .fas,.modal-dialog.modal-notify.modal-success .btn .fab,.modal-dialog.modal-notify.modal-success .btn .far{color:#fff}.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .fas,.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .fab,.modal-dialog.modal-notify.modal-success .btn.btn-outline-success .far{color:#00c851}.modal-dialog.modal-notify.modal-info .modal-header{background-color:#33b5e5}.modal-dialog.modal-notify.modal-info .fas,.modal-dialog.modal-notify.modal-info .fab,.modal-dialog.modal-notify.modal-info .far{color:#33b5e5}.modal-dialog.modal-notify.modal-info .badge{background-color:#33b5e5}.modal-dialog.modal-notify.modal-info .btn .fas,.modal-dialog.modal-notify.modal-info .btn .fab,.modal-dialog.modal-notify.modal-info .btn .far{color:#fff}.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .fas,.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .fab,.modal-dialog.modal-notify.modal-info .btn.btn-outline-info .far{color:#33b5e5}.modal{padding-right:0!important}@media (min-width: 768px){.modal .modal-dialog.modal-top{top:0}.modal .modal-dialog.modal-left{left:0}.modal .modal-dialog.modal-right{right:0}.modal .modal-dialog.modal-bottom{bottom:0}.modal .modal-dialog.modal-top-left{top:10px;left:10px}.modal .modal-dialog.modal-top-right{top:10px;right:10px}.modal .modal-dialog.modal-bottom-left{bottom:10px;left:10px}.modal .modal-dialog.modal-bottom-right{bottom:10px;right:10px}}.modal.fade.top:not(.show) .modal-dialog{transform:translate3d(0,-25%,0)}.modal.fade.left:not(.show) .modal-dialog{transform:translate3d(-25%,0,0)}.modal.fade.right:not(.show) .modal-dialog{transform:translate3d(25%,0,0)}.modal.fade.bottom:not(.show) .modal-dialog{transform:translate3d(0,25%,0)}@media (min-width: 992px){.modal.modal-scrolling{position:relative}.modal.modal-scrolling .modal-dialog{position:fixed;z-index:1050}.modal.modal-content-clickable{top:auto;bottom:auto}.modal.modal-content-clickable .modal-dialog{position:fixed}.modal .modal-fluid{width:100%;max-width:100%}.modal .modal-fluid .modal-content{width:100%}.modal .modal-frame{position:absolute;margin:0!important;width:100%;max-width:100%!important}.modal .modal-frame.modal-bottom{bottom:0}.modal .modal-frame.modal-dialog{height:inherit}.modal .modal-full-height{position:absolute;display:flex;margin:0;width:400px;height:auto;min-height:100%;top:0;right:0}.modal .modal-full-height.modal-top,.modal .modal-full-height.modal-bottom{display:block;width:100%;max-width:100%;height:auto}.modal .modal-full-height.modal-top{bottom:auto}.modal .modal-full-height.modal-bottom{min-height:0;top:auto}.modal .modal-full-height .modal-content{width:100%}.modal .modal-full-height.modal-lg{width:90%;max-width:90%}}@media (min-width: 992px) and (min-width: 992px){.modal .modal-full-height.modal-lg{width:800px;max-width:800px}}@media (min-width: 992px) and (min-width: 1200px){.modal .modal-full-height.modal-lg{width:1000px;max-width:1000px}}@media (min-width: 992px){.modal .modal-side{position:absolute;bottom:10px;right:10px;margin:0;width:400px}}body.scrollable{overflow-y:auto}.modal-dialog .modal-content{border:0}.modal{padding-right:0!important}@media (min-width: 768px){.modal .modal-dialog.modal-top{top:0;left:0;right:0}.modal .modal-dialog.modal-left{left:0}.modal .modal-dialog.modal-right{right:0}.modal .modal-dialog.modal-bottom>.modal-content{position:absolute;bottom:0}.modal .modal-dialog.modal-top-left{top:10px;left:10px}.modal .modal-dialog.modal-top-right{top:10px;right:10px}.modal .modal-dialog.modal-bottom-left{left:10px;bottom:10px}.modal .modal-dialog.modal-bottom-right{right:10px;bottom:10px}}.modal .modal-side.modal-top{top:0}.modal .modal-side.modal-left{left:0}.modal .modal-side.modal-right{right:0}.modal .modal-side.modal-bottom{bottom:0}.modal .modal-side.modal-top-left{top:10px;left:10px}.modal .modal-side.modal-top-right{top:10px;right:10px}.modal .modal-side.modal-bottom-left{left:10px;bottom:10px}.modal .modal-side.modal-bottom-right{right:10px;bottom:10px}.modal.fade.top:not(.show) .modal-dialog{transform:translate3d(0,-25%,0)}.modal.fade.left:not(.show) .modal-dialog{transform:translate3d(-25%,0,0)}.modal.fade.right:not(.show) .modal-dialog{transform:translate3d(25%,0,0)}.modal.fade.bottom:not(.show) .modal-dialog{transform:translate3d(0,25%,0)}.modal.fade.in{opacity:1}.modal.fade.in .modal-dialog{transform:translate(0)}.modal.fade.in .modal-dialog .relative{display:inline-block}.modal.modal-scrolling{position:relative}.modal.modal-scrolling .modal-dialog{position:fixed;z-index:1050}.modal.modal-content-clickable{top:auto;bottom:auto}.modal.modal-content-clickable .modal-dialog{position:fixed}.modal .modal-fluid{width:100%;max-width:100%}.modal .modal-fluid .modal-content{width:100%}.modal .modal-frame{position:absolute;width:100%;max-width:100%;margin:0}@media (max-width: 767px){.modal .modal-frame{padding:.5rem}}.modal .modal-frame.modal-bottom{bottom:0}.modal .modal-full-height{display:flex;position:absolute;width:400px;min-height:100%;margin:0;top:0;right:0}@media (max-width: 576px){.modal .modal-full-height{width:100%;padding:.5rem}}@media (max-width: 992px){.modal .modal-full-height{width:100%;height:unset;position:unset}}@media (max-width: 992px){.modal .modal-full-height.modal-top,.modal .modal-full-height.modal-left,.modal .modal-full-height.modal-right{margin:1.75rem auto;min-height:unset}}@media (max-width: 768px){.modal .modal-full-height.modal-bottom{margin-top:1.75rem}}@media (min-width: 768px) and (max-width: 992px){.modal .modal-full-height.modal-bottom{margin-bottom:1.75rem}.modal .modal-full-height.modal-bottom .modal-content{bottom:1rem}}@media (max-width: 992px){.modal .modal-full-height.modal-top,.modal .modal-full-height.modal-bottom,.modal .modal-full-height.modal-left,.modal .modal-full-height.modal-right{margin-left:auto;margin-right:auto}}.modal .modal-full-height.modal-top,.modal .modal-full-height.modal-bottom{display:block;width:100%;height:auto}.modal .modal-full-height.modal-top{bottom:auto}.modal .modal-full-height.modal-bottom{bottom:0}.modal .modal-full-height .modal-content{width:100%}.modal .modal-full-height.modal-lg{max-width:90%;width:90%}@media (min-width: 992px){.modal .modal-full-height.modal-lg{max-width:800px;width:800px}}@media (min-width: 1200px){.modal .modal-full-height.modal-lg{max-width:1000px;width:1000px}}.modal .modal-side{position:absolute;right:10px;bottom:10px;margin:0;min-width:100px}@media (max-width: 768px){.modal .modal-side{padding-left:.5rem}}.modal-dialog.cascading-modal{margin-top:10%}.modal-dialog.cascading-modal .modal-header{text-align:center;margin:-2rem 1rem 1rem;padding:1.5rem;border:none;flex-direction:column}.modal-dialog.cascading-modal .modal-header .close{margin-right:2.5rem}.modal-dialog.cascading-modal .modal-header.white-text .close{color:#fff;opacity:1}.modal-dialog.cascading-modal .modal-header .title{width:100%;margin-bottom:0;font-size:1.25rem}.modal-dialog.cascading-modal .modal-header .title .fa{margin-right:9px}.modal-dialog.cascading-modal .modal-header .social-buttons{margin-top:1.5rem}.modal-dialog.cascading-modal .modal-header .social-buttons a{font-size:1rem}.modal-dialog.cascading-modal .modal-c-tabs .md-tabs{margin:-1.5rem 1rem 0}.modal-dialog.cascading-modal .modal-c-tabs .tab-content{padding:1.7rem 0 0}.modal-dialog.cascading-modal .modal-body,.modal-dialog.cascading-modal .modal-footer{color:#616161;padding-right:2rem;padding-left:2rem}.modal-dialog.cascading-modal .modal-body .additional-option,.modal-dialog.cascading-modal .modal-footer .additional-option{text-align:center;margin-top:1rem}.modal-dialog.cascading-modal.modal-avatar{margin-top:6rem}.modal-dialog.cascading-modal.modal-avatar .modal-header{margin:-6rem 2rem -1rem}.modal-dialog.cascading-modal.modal-avatar .modal-header img{width:130px}.modal-dialog.modal-notify .heading{margin:0;padding:.3rem;color:#fff;font-size:1.15rem}.modal-dialog.modal-notify .modal-header{border:0}.modal-dialog.modal-notify .close{opacity:1}.modal-dialog.modal-notify .modal-body{padding:1.5rem;color:#616161}.modal-dialog.modal-notify .btn-outline-secondary-modal{background-color:transparent}.modal-dialog.modal-notify.modal-info .modal-header{background-color:#5394ff}.modal-dialog.modal-notify.modal-info .fa{color:#5394ff}.modal-dialog.modal-notify.modal-info .badge{background-color:#5394ff}.modal-dialog.modal-notify.modal-info .btn-primary-modal{background:#5394ff}.modal-dialog.modal-notify.modal-info .btn-primary-modal:hover,.modal-dialog.modal-notify.modal-info .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-info .btn-primary-modal:active{background-color:#6da4ff!important}.modal-dialog.modal-notify.modal-info .btn-primary-modal.active{background-color:#0059ec!important}.modal-dialog.modal-notify.modal-info .btn-outline-secondary-modal{border:2px solid #5394ff;color:#5394ff!important}.modal-dialog.modal-notify.modal-warning .modal-header{background-color:#ff8e38}.modal-dialog.modal-notify.modal-warning .fa{color:#ff8e38}.modal-dialog.modal-notify.modal-warning .badge{background-color:#ff8e38}.modal-dialog.modal-notify.modal-warning .btn-primary-modal{background:#ff8e38}.modal-dialog.modal-notify.modal-warning .btn-primary-modal:hover,.modal-dialog.modal-notify.modal-warning .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-warning .btn-primary-modal:active{background-color:#ff9c52!important}.modal-dialog.modal-notify.modal-warning .btn-primary-modal.active{background-color:#d15a00!important}.modal-dialog.modal-notify.modal-warning .btn-outline-secondary-modal{border:2px solid #ff8e38;color:#ff8e38!important}.modal-dialog.modal-notify.modal-success .modal-header{background-color:#01d36b}.modal-dialog.modal-notify.modal-success .fa{color:#01d36b}.modal-dialog.modal-notify.modal-success .badge{background-color:#01d36b}.modal-dialog.modal-notify.modal-success .btn-primary-modal{background:#01d36b}.modal-dialog.modal-notify.modal-success .btn-primary-modal:hover,.modal-dialog.modal-notify.modal-success .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-success .btn-primary-modal:active{background-color:#01ec78!important}.modal-dialog.modal-notify.modal-success .btn-primary-modal.active{background-color:#016d38!important}.modal-dialog.modal-notify.modal-success .btn-outline-secondary-modal{border:2px solid #01d36b;color:#01d36b!important}.modal-dialog.modal-notify.modal-danger .modal-header{background-color:#ff4b4b}.modal-dialog.modal-notify.modal-danger .fa{color:#ff4b4b}.modal-dialog.modal-notify.modal-danger .badge{background-color:#ff4b4b}.modal-dialog.modal-notify.modal-danger .btn-primary-modal{background:#ff4b4b}.modal-dialog.modal-notify.modal-danger .btn-primary-modal:hover,.modal-dialog.modal-notify.modal-danger .btn-primary-modal:focus,.modal-dialog.modal-notify.modal-danger .btn-primary-modal:active{background-color:#ff6565!important}.modal-dialog.modal-notify.modal-danger .btn-primary-modal.active{background-color:#e40000!important}.modal-dialog.modal-notify.modal-danger .btn-outline-secondary-modal{border:2px solid #ff4b4b;color:#ff4b4b!important}.modal-sm .modal-content{margin:0 auto;max-width:300px}@media (min-width: 768px){.modal-sm{max-width:300px}}.modal .modal-fluid,.modal .modal-frame{width:100%;max-width:100%}.modal-ext .modal-content .modal-header{text-align:center}.modal-ext .modal-content .options{float:left}.modal-ext .modal-content .modal-body .text-xs-center fieldset{margin-top:20px}.modal-ext .modal-content .call{margin-top:1rem}.modal-ext .modal-content .modal-body{padding:2rem 2rem 1rem}.modal-content:not(.card-image) .close{position:absolute;right:15px}.modal-cart li p{margin:5px;font-weight:400}.modal-cart li p .badge{margin-left:10px;margin-top:3px;font-weight:400;position:absolute}.modal-cart li p .quantity{font-size:16px;margin-right:7px;font-weight:300}.modal-cart .cartPageLink{margin-left:10px}.modal-cart .cartPageLink a{text-decoration:underline;color:#666}.modal-cart .total{float:right;font-weight:400}.cf-phone{margin-left:7px}.side-modal{position:fixed;width:400px;height:100%;width:100%;z-index:9999}.side-modal .modal-dialog{position:absolute;bottom:10px;right:10px;width:400px;margin:10px}@media (max-width: 760px){.side-modal .modal-dialog{display:none}}.side-modal .modal-header{padding:1rem}.side-modal .modal-header .heading{margin:0;padding:0}.side-modal .modal-content{border:none}.modal-dynamic>:first-child{display:flex;flex-direction:column;height:100%}.side-modal.fade:not(.show) .modal-dialog{transform:translate3d(25%,0,0)}.transparent-bd{opacity:0!important}.modal-backdrop.in,.modal-backdrop{opacity:.5}#exampleModalScroll{overflow-x:hidden;overflow-y:auto}.modal-open .modal{overflow-x:hidden;overflow-y:hidden}.form-dark .card-image{background-size:100%}\n"],encapsulation:2}),n})(),u5e=(()=>{class n{constructor(t,i){this.clf=i,this.config=Ibe,this.open=new d.vpe,this.opened=new d.vpe,this.close=new d.vpe,this.closed=new d.vpe,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.lastDismissReason="",this.loaders=[],this._backdropLoader=this.clf.createLoader(this.el,this.vcr,this.renderer),this.renderer=t.createRenderer(null,null)}show(t,i){return this.modalsCount++,this._createLoaders(),this.config=Object.assign({},Ibe,i),this._showBackdrop(),this.lastDismissReason=null,this._showModal(t)}hide(t){1===this.modalsCount&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=this.config.backdrop||"static"===this.config.backdrop,i=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&i&&(this._backdropLoader.attach(c5e).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){const i=this.loaders[this.loaders.length-1],s=new _be,r=i.provide({provide:Ebe,useValue:this.config}).provide({provide:_be,useValue:s}).attach(d5e).to("body").show({content:t,isAnimated:this.config.animated,data:this.config.data,mdbModalService:this});return r.instance.focusModalElement(),r.instance.level=this.getModalsCount(),s.hide=()=>{r.instance.hide()},s.content=i.getInnerComponent()||null,s}_hideModal(t){const i=this.loaders[t-1];i&&i.hide()}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._backdropLoader.hide(),this.backdropRef=null}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!document||(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10))}resetScrollbar(){document.body.style.paddingRight=this.originalBodyPadding+"px"}getScrollbarWidth(){const t=this.renderer.createElement("div");this.renderer.addClass(t,"modal-scrollbar-measure"),this.renderer.appendChild(document.body,t);const i=t.offsetWidth-t.clientWidth;return this.renderer.removeChild(document.body,t),i}_createLoaders(){const t=this.clf.createLoader(this.el,this.vcr,this.renderer);this.copyEvent(t.onBeforeShow,this.open),this.copyEvent(t.onShown,this.opened),this.copyEvent(t.onBeforeHide,this.close),this.copyEvent(t.onHidden,this.closed),this.loaders.push(t)}removeLoaders(t){this.loaders.splice(t-1,1),this.loaders.forEach((i,s)=>{i.instance.level=s+1})}copyEvent(t,i){t.subscribe(()=>{i.emit(this.lastDismissReason)})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(MN))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),gU=(()=>{class n{static forRoot(){return{ngModule:n,providers:[u5e,MN,LN]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[UVe]]}),n})(),hJ=(()=>{class n{constructor(){this.navbarLinkClicks=new _s.x}getNavbarLinkClicks(){return this.navbarLinkClicks.asObservable()}setNavbarLinkClicks(){this.navbarLinkClicks.next()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),bU=(()=>{class n{constructor(t,i){this._navbarService=t,this.renderer=i,this.linkClick=new d.vpe}ngAfterContentInit(){setTimeout(()=>{this.links.forEach(t=>{this.renderer.listen(t.nativeElement,"click",()=>{this._navbarService.setNavbarLinkClicks()})})},0)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(hJ),d.Y36(d.Qsj))},n.\u0275cmp=d.Xpm({type:n,selectors:[["links"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,kd,5,d.SBq),2&t){let r;d.iGM(r=d.CRH())&&(i.links=r)}},outputs:{linkClick:"linkClick"},ngContentSelectors:Mg,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},encapsulation:2}),n})(),cJ=(()=>{class n{constructor(t,i,s,r,o){this.renderer=t,this._navbarService=i,this._cdRef=s,this._ngZone=r,this._document=o,this._containerInside=!0,this.collapseId="navbarCollapse",this._scrollSensitivity=120,this._scrollableNavbar=!1,this.shown=new d.vpe,this.hidden=new d.vpe,this._destroy$=new _s.x,this.isShown=!1,this.duration=350,this.collapse=!0,this.showClass=!1,this.collapsing=!1,this._itemsLength=0,this.ariaExpanded=!1,this._navbarService.getNavbarLinkClicks().pipe(Ko(this._destroy$)).subscribe(a=>{this.closeNavbarOnClick(a)})}get containerInside(){return this._containerInside}set containerInside(t){this._containerInside=Yi(t)}get scrollSensitivity(){return this._scrollSensitivity}set scrollSensitivity(t){this._scrollSensitivity=PS(t)}get scrollableNavbar(){return this._scrollableNavbar}set scrollableNavbar(t){this._scrollableNavbar=Yi(t)}closeNavbarOnClick(t){this.navbarLinkClicks=t,this.showClass&&this.hide()}addTogglerIconClasses(){this.iconBackground&&(Array.isArray(this.iconBackground)?this.iconBackground.forEach(t=>{this.renderer.addClass(this.toggler.nativeElement,t)}):this.renderer.addClass(this.toggler.nativeElement,this.iconBackground))}_listenToScroll(){this._ngZone.runOutsideAngular(()=>{aI(this._document,"scroll").pipe(Ko(this._destroy$)).subscribe(()=>{window.pageYOffset>this.scrollSensitivity?this.renderer.addClass(this.navbar.nativeElement,"top-nav-collapse"):this.renderer.removeClass(this.navbar.nativeElement,"top-nav-collapse")})})}ngOnInit(){const t=this.SideClass.split(" ");this.doubleNav=-1!==t.indexOf("double-nav")}ngAfterViewInit(){this.containerInside||Array.from(this.container.nativeElement.children).forEach(i=>{this.renderer.appendChild(this.navbar.nativeElement,i),this.container.nativeElement.remove()}),0===this.el.nativeElement.children.length&&this.el.nativeElement.remove(),this.addTogglerIconClasses(),this.scrollableNavbar&&this.renderer.addClass(this.el.nativeElement,"collapsed-navbar-scroll"),this.navbar.nativeElement.classList.contains("scrolling-navbar")&&this._listenToScroll()}toggle(){this.collapsing||(this.isShown?this.hide():this.show())}show(){this.isShown=!0,this.collapse=!1,this.collapsing=!0,this.ariaExpanded=!0,setTimeout(()=>{this.height=this.el.nativeElement.scrollHeight,this.renderer.setStyle(this.el.nativeElement,"height",this.height+"px")},0),setTimeout(()=>{this.collapsing=!1,this.collapse=!0,this.showClass=!0,this.shown.emit()},this.duration),this._cdRef.markForCheck()}hide(){this.isShown&&(this.isShown=!1,this.collapse=!1,this.showClass=!1,this.collapsing=!0,this.ariaExpanded=!1,setTimeout(()=>{this.renderer.setStyle(this.el.nativeElement,"height","0px")},0),setTimeout(()=>{this.collapsing=!1,this.collapse=!0,this.hidden.emit()},this.duration)),this._cdRef.markForCheck()}get displayStyle(){return this.containerInside?"":"flex"}onResize(t){let i=0;i=this.SideClass.includes("navbar-expand-xl")?1200:this.SideClass.includes("navbar-expand-lg")?992:this.SideClass.includes("navbar-expand-md")?768:this.SideClass.includes("navbar-expand-sm")?576:t.target.innerWidth+1,t.target.innerWidth<i?this.isShown||(this.collapse=!1,this.renderer.setStyle(this.el.nativeElement,"height","0px"),this.renderer.setStyle(this.el.nativeElement,"opacity","0"),setTimeout(()=>{this.height=this.el.nativeElement.scrollHeight,this.collapse=!0,this.renderer.setStyle(this.el.nativeElement,"opacity","")},4)):(this.collapsing=!1,this.isShown=!1,this.showClass=!1,this.collapse=!0,this.ariaExpanded=!1,this.renderer.setStyle(this.el.nativeElement,"height",""))}ngAfterContentChecked(){this.el.nativeElement.firstElementChild&&(this._itemsLength!==this.el.nativeElement.firstElementChild.firstElementChild.children.length&&(this.height=this.el.nativeElement.firstElementChild.firstElementChild.clientHeight,this.renderer.setStyle(this.el.nativeElement,"height",this.height+"px")),this._itemsLength=this.el.nativeElement.firstElementChild.firstElementChild.children.length),this._cdRef.markForCheck()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(hJ),d.Y36(d.sBO),d.Y36(d.R0b),d.Y36(Pe))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mdb-navbar"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,bU,5),2&t){let r;d.iGM(r=d.CRH())&&(i.links=r.first)}},viewQuery:function(t,i){if(1&t&&(d.Gf(nze,7),d.Gf(rze,5),d.Gf(oze,7),d.Gf(aze,7),d.Gf(lze,5)),2&t){let s;d.iGM(s=d.CRH())&&(i.el=s.first),d.iGM(s=d.CRH())&&(i.mobile=s.first),d.iGM(s=d.CRH())&&(i.navbar=s.first),d.iGM(s=d.CRH())&&(i.container=s.first),d.iGM(s=d.CRH())&&(i.toggler=s.first)}},hostBindings:function(t,i){1&t&&d.NdJ("resize",function(r){return i.onResize(r)},!1,d.Jf7)},inputs:{iconBackground:"iconBackground",SideClass:"SideClass",containerInside:"containerInside",collapseId:"collapseId",scrollSensitivity:"scrollSensitivity",scrollableNavbar:"scrollableNavbar"},outputs:{shown:"shown",hidden:"hidden"},ngContentSelectors:gze,decls:12,vars:19,consts:[["nav",""],[3,"ngClass","ngStyle"],["container",""],[4,"ngIf"],[1,"navbar-collapse","collapse",3,"ngClass"],["navbar",""],["class","navbar-toggler","type","button","aria-label","Toggle navigation","mdbWavesEffect","",3,"click",4,"ngIf"],["type","button","aria-label","Toggle navigation","mdbWavesEffect","",1,"navbar-toggler",3,"click"],["toggler",""],[1,"navbar-toggler-icon"]],template:function(t,i){1&t&&(d.F$t(uze),d.TgZ(0,"nav",null,0)(2,"div",1,2),d.Hsn(4),d.Hsn(5,1),d.Hsn(6,2),d.YNc(7,hze,1,0,"ng-content",3),d.YNc(8,dze,2,1,"div",3),d.TgZ(9,"div",4,5),d.Hsn(11,3),d.qZA()()()),2&t&&(d.Tol(i.SideClass),d.xp6(2),d.Q6J("ngClass",d.VKq(11,pze,i.containerInside))("ngStyle",d.VKq(13,fze,i.displayStyle)),d.xp6(5),d.Q6J("ngIf",1==i.doubleNav),d.xp6(1),d.Q6J("ngIf",0==i.doubleNav),d.xp6(1),d.Udp("height",i.height),d.Q6J("ngClass",d.kEZ(15,mze,i.collapse,i.showClass,i.collapsing)),d.uIk("id",i.collapseId))},directives:[$l,Gp,Ar],styles:[".navbar{box-shadow:0 2px 5px #00000029,0 2px 10px #0000001f;font-weight:300}.navbar form .md-form input{margin:0 5px 1px 8px}.navbar .breadcrumb{margin:0;padding:.3rem 0 0 1rem;background-color:inherit;font-size:15px;font-weight:300}.navbar .breadcrumb .breadcrumb-item{color:#fff}.navbar .breadcrumb .breadcrumb-item.active{color:#ffffffa6}.navbar .breadcrumb .breadcrumb-item:before{color:#ffffffa6}.navbar .navbar-toggler{outline:0;border-width:0}.navbar .nav-flex-icons{flex-direction:row}@media (max-width: 992px){.navbar .container{width:100%}.navbar .container .navbar-toggler-right{right:0}}.navbar .nav-item .nav-link{display:block}.navbar .nav-item .nav-link.disabled:active{pointer-events:none}.navbar .nav-item .nav-link .fas,.navbar .nav-item .nav-link .fab,.navbar .nav-item .nav-link .far{padding-right:3px;padding-left:3px}@media (max-width: 992px){.navbar .nav-item .nav-link{padding-right:6px;padding-left:6px}}.navbar .dropdown-menu{position:absolute!important;margin-top:0}.navbar .dropdown-menu a{padding:10px;font-size:.9375rem;font-weight:300;color:#000}@media (max-width: 600px){.navbar .dropdown-menu form{width:17rem}}@media (min-width: 600px){.navbar .dropdown-menu form{width:22rem}}.navbar.navbar-light .navbar-nav .nav-item .nav-link.disbled,.navbar.navbar-light .navbar-nav .nav-item .nav-link.disbled:hover{color:#00000080}.navbar.navbar-light .navbar-toggler-icon{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba(0, 0, 0, 0.9)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 8h24M4 16h24M4 24h24'/%3E%3C/svg%3E\");cursor:pointer}.navbar.navbar-light .breadcrumb .nav-item .nav-link,.navbar.navbar-light .navbar-nav .nav-item .nav-link{color:#000;transition:.35s}.navbar.navbar-light .breadcrumb .nav-item .nav-link:hover,.navbar.navbar-light .navbar-nav .nav-item .nav-link:hover{color:#000000bf}.navbar.navbar-light .breadcrumb .nav-item.active>.nav-link,.navbar.navbar-light .navbar-nav .nav-item.active>.nav-link{background-color:#0000001a}.navbar.navbar-light .breadcrumb .nav-item.active>.nav-link:hover,.navbar.navbar-light .navbar-nav .nav-item.active>.nav-link:hover{color:#000}.navbar.navbar-light .navbar-toggler{color:#000}.navbar.navbar-light form .md-form input{border-bottom:1px solid #000}.navbar.navbar-light form .md-form input:focus:not([readonly]){border-color:#4285f4}.navbar.navbar-light form .md-form .form-control{color:#000}.navbar.navbar-light form .md-form .form-control::placeholder{color:#000;font-weight:300}.navbar.navbar-dark .navbar-nav .nav-item .nav-link.disbled,.navbar.navbar-dark .navbar-nav .nav-item .nav-link.disbled:hover{color:#ffffff80}.navbar.navbar-dark .navbar-toggler-icon{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba(255, 255, 255, 0.9)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 8h24M4 16h24M4 24h24'/%3E%3C/svg%3E\");cursor:pointer}.navbar.navbar-dark .breadcrumb .nav-item .nav-link,.navbar.navbar-dark .navbar-nav .nav-item .nav-link{color:#fff;transition:.35s}.navbar.navbar-dark .breadcrumb .nav-item .nav-link:hover,.navbar.navbar-dark .navbar-nav .nav-item .nav-link:hover{color:#ffffffbf}.navbar.navbar-dark .breadcrumb .nav-item.active>.nav-link,.navbar.navbar-dark .navbar-nav .nav-item.active>.nav-link{background-color:#ffffff1a}.navbar.navbar-dark .breadcrumb .nav-item.active>.nav-link:hover,.navbar.navbar-dark .navbar-nav .nav-item.active>.nav-link:hover{color:#fff}.navbar.navbar-dark .navbar-toggler{color:#fff}.navbar.navbar-dark form .md-form input{border-bottom:1px solid #fff}.navbar.navbar-dark form .md-form input:focus:not([readonly]){border-color:#4285f4}.navbar.navbar-dark form .md-form .form-control{color:#fff}.navbar.navbar-dark form .md-form .form-control::placeholder{color:#fff;font-weight:300}@media (min-width: 600px){.navbar.scrolling-navbar{transition:background .5s ease-in-out,padding .5s ease-in-out;padding-top:12px;padding-bottom:12px}.navbar.scrolling-navbar .navbar-nav>li{transition-duration:1s}.navbar.scrolling-navbar.top-nav-collapse{padding-top:5px;padding-bottom:5px}}@media (min-width: 1200px){.navbar.navbar-expand-xl links,.navbar.navbar-expand-xl navlinks{display:flex;flex-direction:row;align-items:center!important;align-self:center!important;width:100%}}@media (min-width: 992px){.navbar>logo>div>a img{margin-left:20px}.navbar.navbar-expand-lg links,.navbar.navbar-expand-lg navlinks{display:flex;flex-direction:row;align-items:center!important;align-self:center!important;width:100%}}@media (min-width: 768px){.navbar.navbar-expand-md links,.navbar.navbar-expand-md navlinks{display:flex;flex-direction:row;width:100%}}@media (min-width: 576px){.navbar.navbar-expand-sm links,.navbar.navbar-expand-sm navlinks{display:flex;flex-direction:row;width:100%}}@media all and (max-width: 992px){.collapsed-navbar-scroll{max-height:calc(100vh - 40px);overflow-y:scroll}}.navbar-container{order:-1;width:50px!important;padding-left:5px;padding-right:5px}.navbar-nav .dropdown-menu-right.dropdown-menu{left:unset}.navbar-nav .dropdown-menu{top:100%!important;transform:translateZ(0)!important}.breadcrumbs{display:flex;padding-left:5px;padding-right:5px;order:0;align-items:center}@media (min-width: 1441px){.breadcrumbs{margin-left:-.6rem}}@supports (-ms-ime-align: auto){@media all and (min-width: 992px){.ie-nav .navbar-nav.nav-flex-icons{position:absolute;top:30%;right:0}.ie-nav .navbar-nav{position:absolute;top:30%;margin-left:88px}.ie-nav .navbar-brand>img{margin-top:-2px;padding-right:16px}}.ie-nav .navbar-toggler{position:absolute;margin-top:-40px;right:0}@media all and (min-width: 992px){.intro-non-fixed-nav>links .navbar-collapse{display:inline-flex!important;align-items:center!important;justify-content:space-between!important}}@media all and (min-width: 992px){.intro-fixed-nav .navbar-nav.nav-flex-icons{position:absolute;top:30%;right:0}.intro-fixed-nav .navbar-nav{position:absolute;top:30%;margin-left:88px}.intro-fixed-nav .navbar-brand img{margin-top:-2px;padding-right:16px}}.intro-fixed-nav .navbar-toggler{position:absolute;margin-top:-40px;right:0}}@media all and (-ms-high-contrast: none) and (min-width: 992px),(-ms-high-contrast: active) and (min-width: 992px){.ie-nav .navbar-nav.nav-flex-icons{position:absolute;top:30%;right:0}.ie-nav .navbar-nav{position:absolute;top:30%;margin-left:88px}.ie-nav .navbar-brand>img{margin-top:-2px;padding-right:16px}}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ie-nav .navbar-toggler{position:absolute;margin-top:-40px;right:0}}@media all and (-ms-high-contrast: none) and (min-width: 992px),(-ms-high-contrast: active) and (min-width: 992px){.intro-non-fixed-nav>links .navbar-collapse{display:inline-flex!important;align-items:center!important;justify-content:space-between!important}}@media all and (-ms-high-contrast: none) and (min-width: 992px),(-ms-high-contrast: active) and (min-width: 992px){.intro-fixed-nav .navbar-nav.nav-flex-icons{position:absolute;top:30%;right:0}.intro-fixed-nav .navbar-nav{position:absolute;top:30%;margin-left:88px}.intro-fixed-nav .navbar-brand img{margin-top:-2px;padding-right:16px}}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.intro-fixed-nav .navbar-toggler{position:absolute;margin-top:-40px;right:0}}button,html [type=button],[type=reset],[type=submit]{-webkit-appearance:none}\n"],encapsulation:2,changeDetection:0}),n})(),dJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["logo"],["mdb-navbar-brand"]],ngContentSelectors:Mg,decls:1,vars:0,template:function(t,i){1&t&&(d.F$t(),d.Hsn(0))},encapsulation:2}),n})(),yU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[hJ],imports:[[Lo]]}),n})(),p5e=(()=>{class n{constructor(){this.placement="top",this.triggers="click"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),vU=(()=>{class n{static forRoot(){return{ngModule:n,providers:[p5e,MN,LN]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Lo]]}),n})(),f5e=(()=>{class n{constructor(){this._dataSource=[],this._dataSourceChanged=new _s.x}addRow(t){this.getDataSource().push(t)}addRowAfter(t,i){this.getDataSource().splice(t,0,i)}removeRow(t){this.getDataSource().splice(t,1)}rowRemoved(){return new Fn.y(i=>{i.next(!0)})}removeLastRow(){this.getDataSource().pop()}getDataSource(){return this._dataSource}setDataSource(t){this._dataSource=t,this._dataSourceChanged.next(this.getDataSource())}dataSourceChange(){return this._dataSourceChanged}filterLocalDataBy(t){return this.getDataSource().filter(i=>Object.keys(i).some(s=>{if(i[s])return i[s].toString().toLowerCase().includes(t)}))}searchLocalDataBy(t){return t?t?this.filterLocalDataBy(t.toLowerCase()):void 0:this.getDataSource()}searchDataObservable(t){return new Fn.y(s=>{s.next(this.searchLocalDataBy(t))})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[f5e],imports:[[Lo]]}),n})(),m5e=(()=>{class n{constructor(){this.placement="top",this.triggers="hover focus"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),wU=(()=>{class n{static forRoot(){return{ngModule:n,providers:[m5e,MN,LN]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Lo]]}),n})(),zp=(()=>{class n{constructor(t){this.el=t}click(t){if(!this.el.nativeElement.classList.contains("disabled")){const i=this.el.nativeElement;i.classList.contains("waves-effect")||(i.className+=" waves-effect");const s=t.clientX-i.getBoundingClientRect().left,r=t.clientY-i.getBoundingClientRect().top,o=document.createElement("div");o.className+="waves-ripple waves-rippling";const a=i.appendChild(o),h=s+"px";o.style.top=r+"px",o.style.left=h;const c="scale("+i.clientWidth/100*3+") translate(0,0)";o.style.webkitTransform=c,o.style.transform=c,o.style.opacity="1";const m=750;o.style.webkitTransitionDuration=m+"ms",o.style.transitionDuration=m+"ms",this.removeRipple(i,a)}}removeRipple(t,i){i.classList.remove("waves-rippling"),setTimeout(()=>{i.style.opacity="0",setTimeout(()=>{t.removeChild(i)},750)},200)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","mdbWavesEffect",""]],hostBindings:function(t,i){1&t&&d.NdJ("click",function(r){return i.click(r)})}}),n})(),SU=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),xU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Lo]]}),n})(),g5e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[DN,SU.forRoot(),fU.forRoot(),yU,dU.forRoot(),rU.forRoot(),oU,lU.forRoot(),gU.forRoot(),wU.forRoot(),vU.forRoot(),uU,nU.forRoot(),aU,CU,iU,sU,pU,xU],DN,nU,SU,fU,yU,dU,rU,oU,lU,gU,wU,vU,uU,aU,CU,iU,sU,pU,xU]}),n})(),b5e=(()=>{class n{static forRoot(){return{ngModule:g5e}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[DN,nU,SU,fU,yU,dU,rU,oU,lU,gU,wU,vU,uU,aU,CU,iU,sU,pU,xU]}),n})();var y5e=se(4929);let jp=(()=>{class n{constructor(t,i,s,r){this.afs=t,this.afAuth=i,this.router=s,this.ngZone=r,this.afAuth.authState.subscribe(o=>{o?(this.userData=o,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,i){return this.afAuth.signInWithEmailAndPassword(t,i).then(s=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(s.user)}).catch(s=>{window.alert(s.message)})}SignUp(t,i){return this.afAuth.createUserWithEmailAndPassword(t,i).then(s=>{this.SendVerificationMail(),this.SetUserData(s.user)}).catch(s=>{window.alert(s.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new y5e.N).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["mainn"])})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Qie),d.LFG(M0),d.LFG(eh),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),v5e=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jp))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-sign-in"]],decls:34,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["routerLink","/mainn","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","80","width","80","alt","There supposed to be a logo somewhere"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","",2,"text-align","center",3,"click"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Nazwa uzytkownika","required","",1,"formControl"],["userName",""],["type","password","placeholder","Has\u0142o","required","",1,"formControl"],["userPassword",""],["type","button","value","Zaloguj si\u0119",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,i){if(1&t){const s=d.EpF();d.TgZ(0,"nav",0)(1,"a",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"button",3),d.NdJ("click",function(){return i.authService.SignOut()}),d._uU(4,"Powr\xf3t do strony g\u0142\xf3wnej"),d.qZA()(),d.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"h3"),d._uU(9,"Zaloguj si\u0119"),d.qZA(),d.TgZ(10,"div",7),d._UZ(11,"input",8,9),d.qZA(),d.TgZ(13,"div",7),d._UZ(14,"input",10,11),d.qZA(),d.TgZ(16,"div",7)(17,"input",12),d.NdJ("click",function(){d.CHM(s);const o=d.MAs(12),a=d.MAs(15);return i.authService.SignIn(o.value,a.value)}),d.qZA()(),d.TgZ(18,"div",7)(19,"span",13)(20,"span",14),d._uU(21,"Albo"),d.qZA()()(),d.TgZ(22,"div",7)(23,"button",15),d.NdJ("click",function(){return i.authService.GoogleAuth()}),d._UZ(24,"i",16),d._uU(25," Zaloguj si\u0119 z Google "),d.qZA()(),d.TgZ(26,"div",17)(27,"span",18),d._uU(28,"Zapomnia\u0142e\u015b has\u0142a?"),d.qZA()()(),d.TgZ(29,"div",19)(30,"span"),d._uU(31,"Chcia\u0142by\u015b do\u0142\u0105czy\u0107?"),d.TgZ(32,"span",20),d._uU(33," Do\u0142\u0105cz"),d.qZA()()()()()}},directives:[th,Gc,zu,zp],styles:[""]}),n})(),C5e=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jp))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-sign-up"]],decls:31,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["routerLink","/mainn","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","80","width","80","alt","There supposed to be a logo somewhere"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","",2,"text-align","center",3,"click"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Has\u0142o","required","",1,"formControl"],["userPwd",""],["type","button","value","Do\u0142\u0105cz",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,i){if(1&t){const s=d.EpF();d.TgZ(0,"nav",0)(1,"a",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"button",3),d.NdJ("click",function(){return i.authService.SignOut()}),d._uU(4,"Powr\xf3t do strony g\u0142\xf3wnej"),d.qZA()(),d.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"h3"),d._uU(9,"Do\u0142\u0105cz do nas"),d.qZA(),d.TgZ(10,"div",7),d._UZ(11,"input",8,9),d.qZA(),d.TgZ(13,"div",7),d._UZ(14,"input",10,11),d.qZA(),d.TgZ(16,"div",7)(17,"input",12),d.NdJ("click",function(){d.CHM(s);const o=d.MAs(12),a=d.MAs(15);return i.authService.SignUp(o.value,a.value)}),d.qZA()(),d.TgZ(18,"div",7)(19,"span",13)(20,"span",14),d._uU(21,"Albo"),d.qZA()()(),d.TgZ(22,"div",7)(23,"button",15),d.NdJ("click",function(){return i.authService.GoogleAuth()}),d._UZ(24,"i",16),d._uU(25," Kontynuuj z Google "),d.qZA()()(),d.TgZ(26,"div",17)(27,"span"),d._uU(28,"Maszju konto? "),d.TgZ(29,"span",18),d._uU(30,"Zaloguj si\u0119"),d.qZA()()()()()}},directives:[th,Gc,zu,zp],styles:[""]}),n})();function w5e(n,e){if(1&n&&(d.TgZ(0,"div",5)(1,"div",31)(2,"div",32),d._UZ(3,"img",33),d.TgZ(4,"div",34)(5,"h1"),d._uU(6,"Witaj "),d.TgZ(7,"strong"),d._uU(8),d.qZA()(),d.TgZ(9,"p"),d._uU(10,"Twoje ID: "),d.TgZ(11,"strong"),d._uU(12),d.qZA()(),d.TgZ(13,"p"),d._uU(14,"Tw\xf3j E-mail: "),d.TgZ(15,"strong"),d._uU(16),d.qZA()(),d.TgZ(17,"p"),d._uU(18,"Czy juz go zweryfikowa\u0142e\u015b: "),d.TgZ(19,"strong"),d._uU(20),d.qZA()()()()()()),2&n){const t=e.ngIf;d.xp6(3),d.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",d.LSH),d.s9C("alt",t.displayName),d.xp6(5),d.Oqu(t.displayName?t.displayName:"User"),d.xp6(4),d.Oqu(t.uid),d.xp6(4),d.Oqu(t.email),d.xp6(4),d.Oqu(t.emailVerified)}}let S5e=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jp))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-dashboard"]],decls:47,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["routerLink","/dashboard","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","50","width","50","alt","There supposed to be a logo somewhere"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","",2,"text-align","center",3,"click"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-user"],["routerLink","/game","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-dice-d20"],["routerLink","/video","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-circle-notch"],["routerLink","/form","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-envelope"],["routerLink","/spotify","routerLinkActive","active",1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-spotify"],["d","M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.669 11.538a.498.498 0 0 1-.686.165c-1.879-1.147-4.243-1.407-7.028-.77a.499.499 0 0 1-.222-.973c3.048-.696 5.662-.397 7.77.892a.5.5 0 0 1 .166.686zm.979-2.178a.624.624 0 0 1-.858.205c-2.15-1.321-5.428-1.704-7.972-.932a.625.625 0 0 1-.362-1.194c2.905-.881 6.517-.454 8.986 1.063a.624.624 0 0 1 .206.858zm.084-2.268C10.154 5.56 5.9 5.419 3.438 6.166a.748.748 0 1 1-.434-1.432c2.825-.857 7.523-.692 10.492 1.07a.747.747 0 1 1-.764 1.288z"],["routerLink","/editor","routerLinkActive","active",1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-body-text"],["fill-rule","evenodd","d","M0 .5A.5.5 0 0 1 .5 0h4a.5.5 0 0 1 0 1h-4A.5.5 0 0 1 0 .5Zm0 2A.5.5 0 0 1 .5 2h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm9 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-9 2A.5.5 0 0 1 .5 4h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm5 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm-12 2A.5.5 0 0 1 .5 6h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5Zm8 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-8 2A.5.5 0 0 1 .5 8h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm-7 2a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,i){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"button",3),d.NdJ("click",function(){return i.authService.SignOut()}),d._uU(4,"Wyloguj si\u0119"),d.qZA()(),d.TgZ(5,"div",4)(6,"div",5)(7,"nav",6)(8,"div",7),d._UZ(9,"p"),d.TgZ(10,"ul",8)(11,"li",9)(12,"a",10),d._UZ(13,"i",11),d._uU(14,"Tw\xf3j profil"),d.qZA()(),d.TgZ(15,"li",9)(16,"a",12),d._UZ(17,"i",13),d._uU(18,"Gra"),d.qZA()(),d.TgZ(19,"li",9)(20,"a",14),d._UZ(21,"i",15),d._uU(22,"Wideo"),d.qZA()(),d.TgZ(23,"li",9)(24,"a",16),d._UZ(25,"i",17),d._uU(26,"Kontakt"),d.qZA()(),d.TgZ(27,"li",9)(28,"a",18),d.O4$(),d.TgZ(29,"svg",19),d._UZ(30,"path",20),d.qZA(),d._uU(31,"Spotify"),d.qZA()(),d.kcU(),d.TgZ(32,"li",9)(33,"a",21),d.O4$(),d.TgZ(34,"svg",22),d._UZ(35,"path",23),d.qZA(),d._uU(36,"Edytor Tekstu"),d.qZA()(),d.kcU(),d.TgZ(37,"li",9)(38,"a",24),d.NdJ("click",function(){return i.authService.SignOut()}),d._UZ(39,"i",25),d._uU(40,"Wyloguj si\u0119 "),d.qZA()()()()(),d.TgZ(41,"main",26)(42,"div",27)(43,"div",28)(44,"h1",29),d._uU(45,"Tw\xf3j profil"),d.qZA()(),d.YNc(46,w5e,21,6,"div",30),d.qZA()()()()),2&t&&(d.xp6(46),d.Q6J("ngIf",i.authService.userData))},directives:[th,Gc,zu,zp,kd,Ar],styles:[""]}),n})(),x5e=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jp))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-forgot-password"]],decls:22,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["routerLink","/mainn","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","80","width","80","alt","There supposed to be a logo somewhere"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","",2,"text-align","center",3,"click"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Resetuj has\u0142o",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,i){if(1&t){const s=d.EpF();d.TgZ(0,"nav",0)(1,"a",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"button",3),d.NdJ("click",function(){return i.authService.SignOut()}),d._uU(4,"Powr\xf3t do strony g\u0142\xf3wnej"),d.qZA()(),d.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"h3"),d._uU(9,"Resetuj has\u0142o"),d.qZA(),d.TgZ(10,"p",7),d._uU(11," Wpisz sw\xf3j E-mail,aby zresetowa\u0107 has\u0142o "),d.qZA(),d.TgZ(12,"div",8),d._UZ(13,"input",9,10),d.qZA(),d.TgZ(15,"div",8)(16,"input",11),d.NdJ("click",function(){d.CHM(s);const o=d.MAs(14);return i.authService.ForgotPassword(o.value)}),d.qZA()()(),d.TgZ(17,"div",12)(18,"span"),d._uU(19,"Chcesz wr\xf3ci\u0107 ? "),d.TgZ(20,"span",13),d._uU(21,"Logowanie"),d.qZA()()()()()}},directives:[th,Gc,zu,zp],styles:[""]}),n})();function E5e(n,e){if(1&n&&(d.TgZ(0,"div",8)(1,"p",13),d._uU(2," Wys\u0142ali\u015bmy email weryfikacyjny do: "),d.TgZ(3,"strong"),d._uU(4),d.qZA(),d._uU(5,". "),d.qZA(),d.TgZ(6,"p",13),d._uU(7," Sprawd\u017a swoj\u0105 poczt\u0119, aby zweryfikowa\u0107 konto "),d.qZA()()),2&n){const t=e.ngIf;d.xp6(4),d.Oqu(t.email)}}let _5e=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jp))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-verify-email"]],decls:20,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["routerLink","/mainn","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","80","width","80","alt","There supposed to be a logo somewhere"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","",2,"text-align","center",3,"click"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,i){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"button",3),d.NdJ("click",function(){return i.authService.SignOut()}),d._uU(4,"Powr\xf3t do strony g\u0142\xf3wnej"),d.qZA()(),d.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"h3"),d._uU(9,"Dzi\u0119kujemy za rejestracj\u0119"),d.qZA(),d.YNc(10,E5e,8,1,"div",7),d.TgZ(11,"div",8)(12,"button",9),d.NdJ("click",function(){return i.authService.SendVerificationMail()}),d._UZ(13,"i",10),d._uU(14," Wy\u015blij link jeszcze raz "),d.qZA()()(),d.TgZ(15,"div",11)(16,"span"),d._uU(17,"Chcesz wr\xf3ci\u0107?"),d.TgZ(18,"span",12),d._uU(19," Logowanie"),d.qZA()()()()()),2&t&&(d.xp6(10),d.Q6J("ngIf",i.authService.userData))},directives:[th,Gc,zu,zp,Ar],styles:[""]}),n})(),I5e=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jp))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-game"]],decls:44,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["routerLink","/dashboard","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","50","width","50","alt","There supposed to be a logo somewhere"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","",2,"text-align","center",3,"click"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-user"],["routerLink","/game","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-dice-d20"],["routerLink","/video","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-circle-notch"],["routerLink","/form","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-envelope"],["routerLink","/spotify","routerLinkActive","active",1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-spotify"],["d","M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.669 11.538a.498.498 0 0 1-.686.165c-1.879-1.147-4.243-1.407-7.028-.77a.499.499 0 0 1-.222-.973c3.048-.696 5.662-.397 7.77.892a.5.5 0 0 1 .166.686zm.979-2.178a.624.624 0 0 1-.858.205c-2.15-1.321-5.428-1.704-7.972-.932a.625.625 0 0 1-.362-1.194c2.905-.881 6.517-.454 8.986 1.063a.624.624 0 0 1 .206.858zm.084-2.268C10.154 5.56 5.9 5.419 3.438 6.166a.748.748 0 1 1-.434-1.432c2.825-.857 7.523-.692 10.492 1.07a.747.747 0 1 1-.764 1.288z"],["routerLink","/editor","routerLinkActive","active",1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-body-text"],["fill-rule","evenodd","d","M0 .5A.5.5 0 0 1 .5 0h4a.5.5 0 0 1 0 1h-4A.5.5 0 0 1 0 .5Zm0 2A.5.5 0 0 1 .5 2h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm9 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-9 2A.5.5 0 0 1 .5 4h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm5 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm-12 2A.5.5 0 0 1 .5 6h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5Zm8 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-8 2A.5.5 0 0 1 .5 8h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm-7 2a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],["width","100%","height","800","src","https://js13kgames.com/games/konnekt/index.html","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen",""]],template:function(t,i){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"button",3),d.NdJ("click",function(){return i.authService.SignOut()}),d._uU(4,"Wyloguj si\u0119"),d.qZA()(),d.TgZ(5,"div",4)(6,"div",5)(7,"nav",6)(8,"div",7),d._UZ(9,"p"),d.TgZ(10,"ul",8)(11,"li",9)(12,"a",10),d._UZ(13,"i",11),d._uU(14,"Tw\xf3j profil"),d.qZA()(),d.TgZ(15,"li",9)(16,"a",12),d._UZ(17,"i",13),d._uU(18,"Gra"),d.qZA()(),d.TgZ(19,"li",9)(20,"a",14),d._UZ(21,"i",15),d._uU(22,"Wideo"),d.qZA()(),d.TgZ(23,"li",9)(24,"a",16),d._UZ(25,"i",17),d._uU(26,"Kontakt"),d.qZA()(),d.TgZ(27,"li",9)(28,"a",18),d.O4$(),d.TgZ(29,"svg",19),d._UZ(30,"path",20),d.qZA(),d._uU(31,"Spotify"),d.qZA()(),d.kcU(),d.TgZ(32,"li",9)(33,"a",21),d.O4$(),d.TgZ(34,"svg",22),d._UZ(35,"path",23),d.qZA(),d._uU(36,"Edytor Tekstu"),d.qZA()(),d.kcU(),d.TgZ(37,"li",9)(38,"a",24),d.NdJ("click",function(){return i.authService.SignOut()}),d._UZ(39,"i",25),d._uU(40,"Wyloguj si\u0119 "),d.qZA()()()()(),d.TgZ(41,"main",26)(42,"div",27),d._UZ(43,"iframe",28),d.qZA()()()())},directives:[th,Gc,zu,zp,kd],styles:[""]}),n})(),T5e=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jp))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-game"]],decls:44,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["routerLink","/dashboard","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","50","width","50","alt","There supposed to be a logo somewhere"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","",2,"text-align","center",3,"click"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-user"],["routerLink","/game","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-dice-d20"],["routerLink","/video","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-circle-notch"],["routerLink","/form","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-envelope"],["routerLink","/spotify","routerLinkActive","active",1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-spotify"],["d","M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.669 11.538a.498.498 0 0 1-.686.165c-1.879-1.147-4.243-1.407-7.028-.77a.499.499 0 0 1-.222-.973c3.048-.696 5.662-.397 7.77.892a.5.5 0 0 1 .166.686zm.979-2.178a.624.624 0 0 1-.858.205c-2.15-1.321-5.428-1.704-7.972-.932a.625.625 0 0 1-.362-1.194c2.905-.881 6.517-.454 8.986 1.063a.624.624 0 0 1 .206.858zm.084-2.268C10.154 5.56 5.9 5.419 3.438 6.166a.748.748 0 1 1-.434-1.432c2.825-.857 7.523-.692 10.492 1.07a.747.747 0 1 1-.764 1.288z"],["routerLink","/editor","routerLinkActive","active",1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-body-text"],["fill-rule","evenodd","d","M0 .5A.5.5 0 0 1 .5 0h4a.5.5 0 0 1 0 1h-4A.5.5 0 0 1 0 .5Zm0 2A.5.5 0 0 1 .5 2h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm9 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-9 2A.5.5 0 0 1 .5 4h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm5 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm-12 2A.5.5 0 0 1 .5 6h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5Zm8 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-8 2A.5.5 0 0 1 .5 8h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm-7 2a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],["width","100%","height","800","src","https://www.youtube.com/embed/7H7cTSml5zk","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen",""]],template:function(t,i){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"button",3),d.NdJ("click",function(){return i.authService.SignOut()}),d._uU(4,"Wyloguj si\u0119"),d.qZA()(),d.TgZ(5,"div",4)(6,"div",5)(7,"nav",6)(8,"div",7),d._UZ(9,"p"),d.TgZ(10,"ul",8)(11,"li",9)(12,"a",10),d._UZ(13,"i",11),d._uU(14,"Tw\xf3j profil"),d.qZA()(),d.TgZ(15,"li",9)(16,"a",12),d._UZ(17,"i",13),d._uU(18,"Gra"),d.qZA()(),d.TgZ(19,"li",9)(20,"a",14),d._UZ(21,"i",15),d._uU(22,"Wideo"),d.qZA()(),d.TgZ(23,"li",9)(24,"a",16),d._UZ(25,"i",17),d._uU(26,"Kontakt"),d.qZA()(),d.TgZ(27,"li",9)(28,"a",18),d.O4$(),d.TgZ(29,"svg",19),d._UZ(30,"path",20),d.qZA(),d._uU(31,"Spotify"),d.qZA()(),d.kcU(),d.TgZ(32,"li",9)(33,"a",21),d.O4$(),d.TgZ(34,"svg",22),d._UZ(35,"path",23),d.qZA(),d._uU(36,"Edytor Tekstu"),d.qZA()(),d.kcU(),d.TgZ(37,"li",9)(38,"a",24),d.NdJ("click",function(){return i.authService.SignOut()}),d._UZ(39,"i",25),d._uU(40,"Wyloguj si\u0119 "),d.qZA()()()()(),d.TgZ(41,"main",26)(42,"div",27),d._UZ(43,"iframe",28),d.qZA()()()())},directives:[th,Gc,zu,zp,kd],styles:[""]}),n})();const ON={_origin:"https://api.emailjs.com"};class kbe{constructor(e){this.status=e.status,this.text=e.responseText}}const A5e_sendForm=(n,e,t,i)=>{const s=i||ON._userID,r=(n=>{let e;if(e="string"==typeof n?document.querySelector(n):n,!e||"FORM"!==e.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e})(t);((n,e,t)=>{if(!n)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(s,n,e);const o=new FormData(r);return o.append("lib_version","3.6.2"),o.append("service_id",n),o.append("template_id",e),o.append("user_id",s),((n,e,t={})=>new Promise((i,s)=>{const r=new XMLHttpRequest;r.addEventListener("load",({target:o})=>{const a=new kbe(o);200===a.status||"OK"===a.text?i(a):s(a)}),r.addEventListener("error",({target:o})=>{s(new kbe(o))}),r.open("POST",ON._origin+n,!0),Object.keys(t).forEach(o=>{r.setRequestHeader(o,t[o])}),r.send(e)}))("/api/v1.0/email/send-form",o)};let L5e=(()=>{class n{constructor(t){this.authService=t}sendEmail(t){t.preventDefault(),A5e_sendForm("service_oc18hkw","template_dek7grl",t.target,"NL5viIUx7IL-01Z5t").then(i=>{console.log(i.text)},i=>{console.log(i.text)})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jp))},n.\u0275cmp=d.Xpm({type:n,selectors:[["contact-us"]],decls:60,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["routerLink","/dashboard","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","50","width","50","alt","There supposed to be a logo somewhere"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","",2,"text-align","center",3,"click"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-user"],["routerLink","/game","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-dice-d20"],["routerLink","/video","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-circle-notch"],["routerLink","/form","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-envelope"],["routerLink","/spotify","routerLinkActive","active",1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-spotify"],["d","M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.669 11.538a.498.498 0 0 1-.686.165c-1.879-1.147-4.243-1.407-7.028-.77a.499.499 0 0 1-.222-.973c3.048-.696 5.662-.397 7.77.892a.5.5 0 0 1 .166.686zm.979-2.178a.624.624 0 0 1-.858.205c-2.15-1.321-5.428-1.704-7.972-.932a.625.625 0 0 1-.362-1.194c2.905-.881 6.517-.454 8.986 1.063a.624.624 0 0 1 .206.858zm.084-2.268C10.154 5.56 5.9 5.419 3.438 6.166a.748.748 0 1 1-.434-1.432c2.825-.857 7.523-.692 10.492 1.07a.747.747 0 1 1-.764 1.288z"],["routerLink","/editor","routerLinkActive","active",1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-body-text"],["fill-rule","evenodd","d","M0 .5A.5.5 0 0 1 .5 0h4a.5.5 0 0 1 0 1h-4A.5.5 0 0 1 0 .5Zm0 2A.5.5 0 0 1 .5 2h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm9 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-9 2A.5.5 0 0 1 .5 4h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm5 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm-12 2A.5.5 0 0 1 .5 6h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5Zm8 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-8 2A.5.5 0 0 1 .5 8h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm-7 2a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"center"],[1,"contact-form",3,"submit"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["id","exampleInputEmail1","type","text","name","user_name",1,"form-control"],["for","exampleInputPassword1",1,"form-label"],["type","email","name","user_email","id","exampleInputEmail1",1,"form-control"],["id","emailHelp",1,"form-text"],["id","exampleInputEmail1","name","message",1,"form-control"],["mdbBtn","","type","submit","gradient","aqua","rounded","true","mdbWavesEffect","","onclick",'alert("Dziekujemy za twoja opinie")']],template:function(t,i){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"button",3),d.NdJ("click",function(){return i.authService.SignOut()}),d._uU(4,"Wyloguj si\u0119"),d.qZA()(),d.TgZ(5,"div",4)(6,"div",5)(7,"nav",6)(8,"div",7),d._UZ(9,"p"),d.TgZ(10,"ul",8)(11,"li",9)(12,"a",10),d._UZ(13,"i",11),d._uU(14,"Tw\xf3j profil"),d.qZA()(),d.TgZ(15,"li",9)(16,"a",12),d._UZ(17,"i",13),d._uU(18,"Gra"),d.qZA()(),d.TgZ(19,"li",9)(20,"a",14),d._UZ(21,"i",15),d._uU(22,"Wideo"),d.qZA()(),d.TgZ(23,"li",9)(24,"a",16),d._UZ(25,"i",17),d._uU(26,"Kontakt"),d.qZA()(),d.TgZ(27,"li",9)(28,"a",18),d.O4$(),d.TgZ(29,"svg",19),d._UZ(30,"path",20),d.qZA(),d._uU(31,"Spotify"),d.qZA()(),d.kcU(),d.TgZ(32,"li",9)(33,"a",21),d.O4$(),d.TgZ(34,"svg",22),d._UZ(35,"path",23),d.qZA(),d._uU(36,"Edytor Tekstu"),d.qZA()(),d.kcU(),d.TgZ(37,"li",9)(38,"a",24),d.NdJ("click",function(){return i.authService.SignOut()}),d._UZ(39,"i",25),d._uU(40,"Wyloguj si\u0119 "),d.qZA()()()()(),d.TgZ(41,"main",26)(42,"div",27)(43,"form",28),d.NdJ("submit",function(r){return i.sendEmail(r)}),d.TgZ(44,"div",29)(45,"label",30),d._uU(46,"Imi\u0119"),d.qZA(),d._UZ(47,"input",31),d.qZA(),d.TgZ(48,"div",29)(49,"label",32),d._uU(50,"E-mail"),d.qZA(),d._UZ(51,"input",33),d.TgZ(52,"div",34),d._uU(53,"Nie udost\u0119pniamy danych naszych uytkownik\xf3w"),d.qZA()(),d.TgZ(54,"div",29)(55,"label",32),d._uU(56,"Wiadomo\u015b\u0107"),d.qZA(),d._UZ(57,"textarea",35),d.qZA(),d.TgZ(58,"button",36),d._uU(59,"Wy\u015blij"),d.qZA()()()()()())},directives:[th,Gc,zu,zp,kd],styles:[".center[_ngcontent-%COMP%]{text-align:center;margin-top:10%;font-size:xx-large;width:50%;margin-left:20%}"]}),n})(),uR=(()=>{class n{constructor(t,i){this.authService=t,this.router=i}canActivate(t,i){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(jp),d.LFG(eh))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),M5e=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jp))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-game"]],decls:44,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["routerLink","/dashboard","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","50","width","50","alt","There supposed to be a logo somewhere"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","",2,"text-align","center",3,"click"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-user"],["routerLink","/game","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-dice-d20"],["routerLink","/video","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-circle-notch"],["routerLink","/form","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-envelope"],["routerLink","/spotify","routerLinkActive","active",1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-spotify"],["d","M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.669 11.538a.498.498 0 0 1-.686.165c-1.879-1.147-4.243-1.407-7.028-.77a.499.499 0 0 1-.222-.973c3.048-.696 5.662-.397 7.77.892a.5.5 0 0 1 .166.686zm.979-2.178a.624.624 0 0 1-.858.205c-2.15-1.321-5.428-1.704-7.972-.932a.625.625 0 0 1-.362-1.194c2.905-.881 6.517-.454 8.986 1.063a.624.624 0 0 1 .206.858zm.084-2.268C10.154 5.56 5.9 5.419 3.438 6.166a.748.748 0 1 1-.434-1.432c2.825-.857 7.523-.692 10.492 1.07a.747.747 0 1 1-.764 1.288z"],["routerLink","/editor","routerLinkActive","active",1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-body-text"],["fill-rule","evenodd","d","M0 .5A.5.5 0 0 1 .5 0h4a.5.5 0 0 1 0 1h-4A.5.5 0 0 1 0 .5Zm0 2A.5.5 0 0 1 .5 2h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm9 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-9 2A.5.5 0 0 1 .5 4h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm5 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm-12 2A.5.5 0 0 1 .5 6h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5Zm8 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-8 2A.5.5 0 0 1 .5 8h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm-7 2a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],["src","https://open.spotify.com/embed/playlist/37i9dQZF1DX3rxVfibe1L0?utm_source=generator","width","100%","height","380","frameBorder","0","allowfullscreen","","allow","autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",2,"border-radius","12px","margin-top","10%"]],template:function(t,i){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"button",3),d.NdJ("click",function(){return i.authService.SignOut()}),d._uU(4,"Wyloguj si\u0119"),d.qZA()(),d.TgZ(5,"div",4)(6,"div",5)(7,"nav",6)(8,"div",7),d._UZ(9,"p"),d.TgZ(10,"ul",8)(11,"li",9)(12,"a",10),d._UZ(13,"i",11),d._uU(14,"Tw\xf3j profil"),d.qZA()(),d.TgZ(15,"li",9)(16,"a",12),d._UZ(17,"i",13),d._uU(18,"Gra"),d.qZA()(),d.TgZ(19,"li",9)(20,"a",14),d._UZ(21,"i",15),d._uU(22,"Wideo"),d.qZA()(),d.TgZ(23,"li",9)(24,"a",16),d._UZ(25,"i",17),d._uU(26,"Kontakt"),d.qZA()(),d.TgZ(27,"li",9)(28,"a",18),d.O4$(),d.TgZ(29,"svg",19),d._UZ(30,"path",20),d.qZA(),d._uU(31,"Spotify"),d.qZA()(),d.kcU(),d.TgZ(32,"li",9)(33,"a",21),d.O4$(),d.TgZ(34,"svg",22),d._UZ(35,"path",23),d.qZA(),d._uU(36,"Edytor Tekstu"),d.qZA()(),d.kcU(),d.TgZ(37,"li",9)(38,"a",24),d.NdJ("click",function(){return i.authService.SignOut()}),d._UZ(39,"i",25),d._uU(40,"Wyloguj si\u0119 "),d.qZA()()()()(),d.TgZ(41,"main",26)(42,"div",27),d._UZ(43,"iframe",28),d.qZA()()()())},directives:[th,Gc,zu,zp,kd],styles:[""]}),n})();function O5e(n,e){1&n&&(d.TgZ(0,"p"),d._uU(1,'The Rich Text Editor component is WYSIWYG ("what you see is what you get") editor that provides the best user experience to create and update the content. Users can format their content using standard toolbar commands.'),d.qZA())}let P5e=(()=>{class n{constructor(t){this.authService=t,this.tools={items:["Undo","Redo","|","Bold","Italic","Underline","StrikeThrough","|","FontName","FontSize","FontColor","BackgroundColor","|","SubScript","SuperScript","|","LowerCase","UpperCase","|","Formats","Alignments","|","OrderedList","UnorderedList","|","Indent","Outdent","|","CreateLink","Image","|","ClearFormat","Print","SourceCode","|","FullScreen"]},this.iframe={enable:!0},this.height=500}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jp))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],features:[d._Bn([kge,Rge,Age,Lge])],decls:62,vars:0,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["routerLink","/dashboard","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","50","width","50","alt","There supposed to be a logo somewhere"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","",2,"text-align","center",3,"click"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-user"],["routerLink","/game","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-dice-d20"],["routerLink","/video","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-circle-notch"],["routerLink","/form","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-envelope"],["routerLink","/spotify","routerLinkActive","active",1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-spotify"],["d","M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.669 11.538a.498.498 0 0 1-.686.165c-1.879-1.147-4.243-1.407-7.028-.77a.499.499 0 0 1-.222-.973c3.048-.696 5.662-.397 7.77.892a.5.5 0 0 1 .166.686zm.979-2.178a.624.624 0 0 1-.858.205c-2.15-1.321-5.428-1.704-7.972-.932a.625.625 0 0 1-.362-1.194c2.905-.881 6.517-.454 8.986 1.063a.624.624 0 0 1 .206.858zm.084-2.268C10.154 5.56 5.9 5.419 3.438 6.166a.748.748 0 1 1-.434-1.432c2.825-.857 7.523-.692 10.492 1.07a.747.747 0 1 1-.764 1.288z"],["routerLink","/editor","routerLinkActive","active",1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-body-text"],["fill-rule","evenodd","d","M0 .5A.5.5 0 0 1 .5 0h4a.5.5 0 0 1 0 1h-4A.5.5 0 0 1 0 .5Zm0 2A.5.5 0 0 1 .5 2h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm9 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-9 2A.5.5 0 0 1 .5 4h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm5 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5Zm-12 2A.5.5 0 0 1 .5 6h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5Zm8 0a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm-8 2A.5.5 0 0 1 .5 8h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm7 0a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm-7 2a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Z"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust",2,"margin-top","3%"],["id","defaultRTE"],["valueTemplate",""],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["name","description","content","Typescript UI Controls"],["name","author","content","Syncfusion"],["href","//cdn.syncfusion.com/ej2/20.1.52/ej2-richtexteditor/styles/material.css","rel","stylesheet"],["href","//cdn.syncfusion.com/ej2/20.1.52/ej2-base/styles/material.css","rel","stylesheet"],["href","//cdn.syncfusion.com/ej2/20.1.52/ej2-dropdowns/styles/material.css","rel","stylesheet"],["href","//cdn.syncfusion.com/ej2/20.1.52/ej2-lists/styles/material.css","rel","stylesheet"],["href","//cdn.syncfusion.com/ej2/20.1.52/ej2-popups/styles/material.css","rel","stylesheet"],["href","//cdn.syncfusion.com/ej2/20.1.52/ej2-buttons/styles/material.css","rel","stylesheet"],["href","//cdn.syncfusion.com/ej2/20.1.52/ej2-splitbuttons/styles/material.css","rel","stylesheet"],["href","//cdn.syncfusion.com/ej2/20.1.52/ej2-inputs/styles/material.css","rel","stylesheet"],["href","//cdn.syncfusion.com/ej2/20.1.52/ej2-navigations/styles/material.css","rel","stylesheet"],["href","https://jsplayground.syncfusion.com/16.1.0.24/scripts/web/codemirror/codemirror.min.css","rel","stylesheet"]],template:function(t,i){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"button",3),d.NdJ("click",function(){return i.authService.SignOut()}),d._uU(4,"Wyloguj si\u0119"),d.qZA()(),d.TgZ(5,"div",4)(6,"div",5)(7,"nav",6)(8,"div",7),d._UZ(9,"p"),d.TgZ(10,"ul",8)(11,"li",9)(12,"a",10),d._UZ(13,"i",11),d._uU(14,"Tw\xf3j profil"),d.qZA()(),d.TgZ(15,"li",9)(16,"a",12),d._UZ(17,"i",13),d._uU(18,"Gra"),d.qZA()(),d.TgZ(19,"li",9)(20,"a",14),d._UZ(21,"i",15),d._uU(22,"Wideo"),d.qZA()(),d.TgZ(23,"li",9)(24,"a",16),d._UZ(25,"i",17),d._uU(26,"Kontakt"),d.qZA()(),d.TgZ(27,"li",9)(28,"a",18),d.O4$(),d.TgZ(29,"svg",19),d._UZ(30,"path",20),d.qZA(),d._uU(31,"Spotify"),d.qZA()(),d.kcU(),d.TgZ(32,"li",9)(33,"a",21),d.O4$(),d.TgZ(34,"svg",22),d._UZ(35,"path",23),d.qZA(),d._uU(36,"Edytor Tekstu"),d.qZA()(),d.kcU(),d.TgZ(37,"li",9)(38,"a",24),d.NdJ("click",function(){return i.authService.SignOut()}),d._UZ(39,"i",25),d._uU(40,"Wyloguj si\u0119 "),d.qZA()()()()(),d.TgZ(41,"main",26)(42,"div",27)(43,"ejs-richtexteditor",28),d.YNc(44,O5e,2,0,"ng-template",null,29,d.W1O),d.qZA(),d.TgZ(46,"title"),d._uU(47,"Syncfusion Angular Rich Text Editor"),d.qZA(),d._UZ(48,"meta",30)(49,"meta",31)(50,"meta",32)(51,"meta",33)(52,"link",34)(53,"link",35)(54,"link",36)(55,"link",37)(56,"link",38)(57,"link",39)(58,"link",40)(59,"link",41)(60,"link",42)(61,"link",43),d.qZA()()()())},directives:[th,Gc,zu,zp,kd,Ay],styles:["","#loader[_ngcontent-%COMP%] {\n            color: #008cff;\n            font-family:  'Helvetica Neue','calibiri';\n            font-size: 16px;\n            height: 40px;\n            left: 45%;\n            position: absolute;\n            top: 45%;\n            width: 30%;\n        }\n         .e-code-mirror[_ngcontent-%COMP%]::before {\n            content: '\\e345';\n        }\n        .CodeMirror-linenumber[_ngcontent-%COMP%], .CodeMirror-gutters[_ngcontent-%COMP%] {\n            display: none;\n        }\n    \n        .char_block.e-active[_ngcontent-%COMP%] {\n            \n            outline: 1.5px solid;\n        }\n    \n        .char_block[_ngcontent-%COMP%] {\n            width: 30px;\n            height: 30px;\n            line-height: 30px;\n            margin: 0 5px 5px 0;\n            text-align: center;\n            vertical-align: middle;\n            border: 1px solid #DDDDDD;\n            font-size: 20px;\n            cursor: pointer;\n            user-select: none;\n        }\n    \n      .e-rte-quick-popup[_ngcontent-%COMP%]   .e-rte-quick-toolbar[_ngcontent-%COMP%]   .e-roatate-left[_ngcontent-%COMP%]::before {\n            content: \"\\e76e\";\n        }\n    \n        .e-rte-quick-popup[_ngcontent-%COMP%]   .e-rte-quick-toolbar[_ngcontent-%COMP%]   .e-roatate-right[_ngcontent-%COMP%]::before {\n            content: \"\\e726\";\n        }\n    \n        .e-richtexteditor[_ngcontent-%COMP%]   textarea.e-content[_ngcontent-%COMP%] {\n          float: left;\n        }\n        .e-richtexteditor[_ngcontent-%COMP%]   .e-rte-content[_ngcontent-%COMP%] {\n          overflow: hidden;\n        }\n        .e-rte-content[_ngcontent-%COMP%]   .e-content.e-pre-source[_ngcontent-%COMP%]{\n          width: 100%;\n        }\n    \n        .e-icon-btn.e-active[_ngcontent-%COMP%]   .e-md-preview[_ngcontent-%COMP%]::before {\n            content: '\\e350';\n        }\n    \n      .e-icon-btn[_ngcontent-%COMP%]   .e-md-preview.e-icons[_ngcontent-%COMP%]::before {\n        content: '\\e345';\n      }"]}),n})(),F5e=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jp))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-game"]],decls:106,vars:3,consts:[[1,"body"],[1,"h-100"],["SideClass","navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar intro-fixed-nav",3,"containerInside"],["routerLink","/mainn",1,"logo","navbar-brand"],["routerLink","/mainn","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","80","width","80","alt","There supposed to be a logo somewhere"],[1,"navbar-nav","mr-auto"],["mdbWavesEffect","",1,"nav-item","active","waves-light"],["mdbBtn","","type","submit","gradient","peach","rounded","true","mdbWavesEffect","","onclick",'alert("Dziekujemy za twoja opinie")'],[1,"sr-only"],["mdbWavesEffect","",1,"nav-item","waves-light"],["mdbBtn","","type","submit","gradient","aqua","rounded","true","mdbWavesEffect","","onclick",'alert("Dziekujemy za twoja opinie")'],["mdbBtn","","type","submit","gradient","purple","rounded","true","mdbWavesEffect","","onclick",'alert("Dziekujemy za twoja opinie")'],["mdbBtn","","type","submit","gradient","purple","rounded","true","mdbWavesEffect","","routerLink","/homepage"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","","routerLink","/register-user",2,"text-align","center"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","","routerLink","/sign-in",2,"text-align","center"],[1,"view","intro-2"],[1,"full-bg-img"],[1,"mask","rgba-white-light","flex-center",2,"background-image","url('https://res.cloudinary.com/djjocjsr5/image/upload/v1653302105/wp2675445-wallpaper-hd-pc_1_madkuz.jpg')"],[1,"container","text-center","white-text","wow","fadeInUp"],[1,"text-center","py-5"],[1,"col-md-12"],[1,"card-deck"],["mdbWavesEffect",""],["src","https://mdbootstrap.com/img/Photos/Others/images/16.webp","alt","Card image cap"],["href","#","mdbBtn","","color","primary","mdbWavesEffect",""],["src","https://mdbootstrap.com/img/Photos/Others/images/14.webp","alt","Card image cap"],["src","https://mdbootstrap.com/img/Photos/Others/images/15.webp","alt","Card image cap"],[2,"margin","1%"],[1,"carousel","slide","carousel-fade",3,"isControls","animation"],["autoplay","","loop","",1,"video-fluid"],["src","https://mdbootstrap.com/img/video/Tropical.mp4","type","video/mp4"],["src","https://mdbootstrap.com/img/video/forest.mp4","type","video/mp4"],["stickybottom","",1,"bg-light","text-center","text-white"],[1,"container","p-4","pb-0"],[1,"mb-4"],["href","#!","role","button",1,"btn","btn-primary","btn-floating","m-1",2,"background-color","#3b5998"],[1,"fab","fa-facebook-f"],["href","#!","role","button",1,"btn","btn-primary","btn-floating","m-1",2,"background-color","#55acee"],[1,"fab","fa-twitter"],["href","#!","role","button",1,"btn","btn-primary","btn-floating","m-1",2,"background-color","#dd4b39"],[1,"fab","fa-google"],["href","#!","role","button",1,"btn","btn-primary","btn-floating","m-1",2,"background-color","#ac2bac"],[1,"fab","fa-instagram"],["href","#!","role","button",1,"btn","btn-primary","btn-floating","m-1",2,"background-color","#0082ca"],[1,"fab","fa-linkedin-in"],["href","#!","role","button",1,"btn","btn-primary","btn-floating","m-1",2,"background-color","#333333"],[1,"fab","fa-github"],[1,"text-center","p-3",2,"background-color","rgba(0, 0, 0, 0.2)"],["href","https://mdbootstrap.com/",1,"text-white"]],template:function(t,i){1&t&&(d.TgZ(0,"div",0)(1,"header",1)(2,"mdb-navbar",2)(3,"mdb-navbar-brand")(4,"a",3),d._UZ(5,"img",4),d.qZA()(),d.TgZ(6,"links")(7,"ul",5)(8,"li",6)(9,"button",7),d._uU(10,"Strona G\u0142\xf3wna"),d.qZA(),d.TgZ(11,"span",8),d._uU(12,"(current)"),d.qZA()(),d.TgZ(13,"li",9)(14,"button",10),d._uU(15,"O nas"),d.qZA()(),d.TgZ(16,"li",9)(17,"button",11),d._uU(18,"Cennik"),d.qZA()(),d.TgZ(19,"li",9)(20,"button",12),d._uU(21,"Sklep"),d.qZA()()(),d.TgZ(22,"button",13),d._uU(23,"Rejestracja"),d.qZA(),d.TgZ(24,"button",14),d._uU(25,"Logowanie"),d.qZA()()(),d.TgZ(26,"div",15)(27,"div",16)(28,"div",17)(29,"div",18)(30,"h2"),d._uU(31,"This Navbar is fixed and transparent"),d.qZA(),d._UZ(32,"br"),d.TgZ(33,"h5"),d._uU(34,"It will always stay visible on the top, even when you scroll down"),d.qZA(),d.TgZ(35,"p"),d._uU(36,"Navbar's background will switch from transparent to solid color while scrolling down"),d.qZA(),d._UZ(37,"br"),d.TgZ(38,"p"),d._uU(39,"Full page intro with background image will be always displayed in full screen mode, regardless of device "),d.qZA()()()()()(),d.TgZ(40,"main",19)(41,"div",20)(42,"div",21)(43,"mdb-card")(44,"div",22),d._UZ(45,"mdb-card-img",23),d.qZA(),d.TgZ(46,"mdb-card-body")(47,"mdb-card-title")(48,"h4"),d._uU(49,"Card Title"),d.qZA()(),d.TgZ(50,"mdb-card-text"),d._uU(51," Some quick example text to build on the card title and make up the bulk of the card's content. "),d.qZA(),d.TgZ(52,"a",24),d._uU(53,"Button"),d.qZA()()(),d.TgZ(54,"mdb-card")(55,"div",22),d._UZ(56,"mdb-card-img",25),d.qZA(),d.TgZ(57,"mdb-card-body")(58,"mdb-card-title")(59,"h4"),d._uU(60,"Card Title"),d.qZA()(),d.TgZ(61,"mdb-card-text"),d._uU(62," Some quick example text to build on the card title and make up the bulk of the card's content. "),d.qZA(),d.TgZ(63,"a",24),d._uU(64,"Button"),d.qZA()()(),d.TgZ(65,"mdb-card")(66,"div",22),d._UZ(67,"mdb-card-img",26),d.qZA(),d.TgZ(68,"mdb-card-body")(69,"mdb-card-title")(70,"h4"),d._uU(71,"Card Title"),d.qZA()(),d.TgZ(72,"mdb-card-text"),d._uU(73," Some quick example text to build on the card title and make up the bulk of the card's content. "),d.qZA(),d.TgZ(74,"a",24),d._uU(75,"Button"),d.qZA()()()(),d.TgZ(76,"div",27)(77,"mdb-carousel",28)(78,"mdb-carousel-item")(79,"video",29),d._UZ(80,"source",30),d.qZA()(),d.TgZ(81,"mdb-carousel-item")(82,"video",29),d._UZ(83,"source",31),d.qZA()(),d.TgZ(84,"mdb-carousel-item")(85,"video",29),d._UZ(86,"source",30),d.qZA()()()()()(),d.TgZ(87,"footer",32)(88,"div",33)(89,"section",34)(90,"a",35),d._UZ(91,"i",36),d.qZA(),d.TgZ(92,"a",37),d._UZ(93,"i",38),d.qZA(),d.TgZ(94,"a",39),d._UZ(95,"i",40),d.qZA(),d.TgZ(96,"a",41),d._UZ(97,"i",42),d.qZA(),d.TgZ(98,"a",43),d._UZ(99,"i",44),d.qZA(),d.TgZ(100,"a",45),d._UZ(101,"i",46),d.qZA()()(),d.TgZ(102,"div",47),d._uU(103," \xa9 2022 No Copyright: "),d.TgZ(104,"a",48),d._uU(105,"Mariusz Kuc"),d.qZA()()()()),2&t&&(d.xp6(2),d.Q6J("containerInside",!1),d.xp6(75),d.Q6J("isControls",!0)("animation","fade"))},directives:[cJ,dJ,kd,th,Gc,bU,zp,zu,Eze,_ze,xze,wze,Sze,Dze,sbe],styles:[".view[_ngcontent-%COMP%]{background:url(https://wallpaperaccess.com/full/5030514.jpg) no-repeat center center;background-size:cover;height:100vh}.navbar[_ngcontent-%COMP%]{background-color:transparent}.top-nav-collapse[_ngcontent-%COMP%]{background-color:#4285f4}@media only screen and (max-width: 768px){.navbar[_ngcontent-%COMP%]{background-color:#4285f4}}.body[_ngcontent-%COMP%]{background-color:#f5f5f5}"]}),n})();const N5e=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function B5e(){return(0,d.f3M)(Pe)}}),H5e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let pI=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new d.vpe,t){const s=t.documentElement?t.documentElement.dir:null;this.value=function V5e(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?H5e.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||s||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(N5e,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Abe(n){for(let e in n){let t=n[e]||"";switch(e){case"display":n.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+e]=t;break;case"flex-direction":t=t||"row",n["-webkit-flex-direction"]=t,n["flex-direction"]=t;break;case"order":n.order=n["-webkit-"+e]=isNaN(+t)?"0":t}}return n}const uJ="inline",EU=["row","column","row-reverse","column-reverse"];function Lbe(n){let[e,t,i]=Mbe(n);return function j5e(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,i)}function Mbe(n){var e;n=null!==(e=null==n?void 0:n.toLowerCase())&&void 0!==e?e:"";let[t,i,s]=n.split(" ");return EU.find(r=>r===t)||(t=EU[0]),i===uJ&&(i=s!==uJ?s:"",s=uJ),[t,z5e(i),!!s]}function PN(n){let[e]=Mbe(n);return e.indexOf("row")>-1}function z5e(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function $C(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}const q5e={provide:d.tb,useFactory:function U5e(n,e){return()=>{if(hn(e)){const t=Array.from(n.querySelectorAll(`[class*=${Obe}]`)),i=/\bflex-layout-.+?\b/g;t.forEach(s=>{s.classList.contains(`${Obe}ssr`)&&s.parentNode?s.parentNode.removeChild(s):s.className.replace(i,"")})}}},deps:[Pe,d.Lbi],multi:!0},Obe="flex-layout-";let pJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[q5e]}),n})();class fI{constructor(e=!1,t="all",i="",s="",r=0){this.matches=e,this.mediaQuery=t,this.mqAlias=i,this.suffix=s,this.priority=r,this.property=""}clone(){return new fI(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let W5e=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(t,i,s){const r=this.stylesheet.get(t);r?r.set(i,s):this.stylesheet.set(t,new Map([[i,s]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,i){const s=this.stylesheet.get(t);let r="";if(s){const o=s.get(i);("number"==typeof o||"string"==typeof o)&&(r=o+"")}return r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fJ={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Og=new d.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>fJ}),fR=new d.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),mJ=new d.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function Pbe(n,e){return n=n?n.clone():new fI,e&&(n.mqAlias=e.alias,n.mediaQuery=e.mediaQuery,n.suffix=e.suffix,n.priority=e.priority),n}class Za{constructor(){this.shouldCache=!0}sideEffect(e,t,i){}}let Yo=(()=>{class n{constructor(t,i,s,r){this._serverStylesheet=t,this._serverModuleLoaded=i,this._platformId=s,this.layoutConfig=r}applyStyleToElement(t,i,s=null){let r={};"string"==typeof i&&(r[i]=s,i=r),r=this.layoutConfig.disableVendorPrefixes?i:Abe(i),this._applyMultiValueStyleToElement(r,t)}applyStyleToElements(t,i=[]){const s=this.layoutConfig.disableVendorPrefixes?t:Abe(t);i.forEach(r=>{this._applyMultiValueStyleToElement(s,r)})}getFlowDirection(t){const i="flex-direction";let s=this.lookupStyle(t,i);return[s||"row",this.lookupInlineStyle(t,i)||tc(this._platformId)&&this._serverModuleLoaded?s:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,i){var s;return null!==(s=t.getAttribute(i))&&void 0!==s?s:""}lookupInlineStyle(t,i){return hn(this._platformId)?t.style.getPropertyValue(i):function G5e(n,e){var t;return null!==(t=Fbe(n)[e])&&void 0!==t?t:""}(t,i)}lookupStyle(t,i,s=!1){let r="";return t&&((r=this.lookupInlineStyle(t,i))||(hn(this._platformId)?s||(r=getComputedStyle(t).getPropertyValue(i)):this._serverModuleLoaded&&(r=this._serverStylesheet.getStyleForElement(t,i)))),r?r.trim():""}_applyMultiValueStyleToElement(t,i){Object.keys(t).sort().forEach(s=>{const r=t[s],o=Array.isArray(r)?r:[r];o.sort();for(let a of o)a=a?a+"":"",hn(this._platformId)||!this._serverModuleLoaded?hn(this._platformId)?i.style.setProperty(s,a):$5e(i,s,a):this._serverStylesheet.addStyleToElement(i,s,a)})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(W5e),d.LFG(fR),d.LFG(d.Lbi),d.LFG(Og))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $5e(n,e,t){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=Fbe(n);i[e]=null!=t?t:"",function K5e(n,e){let t="";for(const i in e)e[i]&&(t+=`${i}:${e[i]};`);n.setAttribute("style",t)}(n,i)}function Fbe(n){const e={},t=n.getAttribute("style");if(t){const i=t.split(/;+/g);for(let s=0;s<i.length;s++){const r=i[s].trim();if(r.length>0){const o=r.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${r}`);e[r.substr(0,o).trim()]=r.substr(o+1).trim()}}}return e}function FN(n,e){return(e&&e.priority||0)-(n&&n.priority||0)}function Y5e(n,e){return(n.priority||0)-(e.priority||0)}let gJ=(()=>{class n{constructor(t,i,s){this._zone=t,this._platformId=i,this._document=s,this.source=new el(new fI(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((i,s)=>{i.matches&&t.push(s)}),t}isActive(t){var i;const s=this.registry.get(t);return null!==(i=null==s?void 0:s.matches)&&void 0!==i?i:this.registerQuery(t).some(r=>r.matches)}observe(t,i=!1){if(t&&t.length){const s=this._observable$.pipe(Un(o=>!i||t.indexOf(o.mediaQuery)>-1)),r=new Fn.y(o=>{const a=this.registerQuery(t);if(a.length){const l=a.pop();a.forEach(h=>{o.next(h)}),this.source.next(l)}o.complete()});return(0,Sh.T)(r,s)}return this._observable$}registerQuery(t){const i=Array.isArray(t)?t:[t],s=[];return function Z5e(n,e){const t=n.filter(i=>!Nbe[i]);if(t.length>0){const i=t.join(", ");try{const s=e.createElement("style");s.setAttribute("type","text/css"),s.styleSheet||s.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),e.head.appendChild(s),t.forEach(r=>Nbe[r]=s)}catch(s){console.error(s)}}}(i,this._document),i.forEach(r=>{const o=l=>{this._zone.run(()=>this.source.next(new fI(l.matches,r)))};let a=this.registry.get(r);a||(a=this.buildMQL(r),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(r,a)),a.matches&&s.push(new fI(!0,r))}),s}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function X5e(n,e){return e&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,hn(this._platformId))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(d.Lbi),d.LFG(Pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nbe={},Q5e=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],Bbe="(orientation: portrait) and (max-width: 599.98px)",Hbe="(orientation: landscape) and (max-width: 959.98px)",Vbe="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",zbe="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",jbe="(orientation: portrait) and (min-width: 840px)",Ube="(orientation: landscape) and (min-width: 1280px)",KC={HANDSET:`${Bbe}, ${Hbe}`,TABLET:`${Vbe} , ${zbe}`,WEB:`${jbe}, ${Ube} `,HANDSET_PORTRAIT:`${Bbe}`,TABLET_PORTRAIT:`${Vbe} `,WEB_PORTRAIT:`${jbe}`,HANDSET_LANDSCAPE:`${Hbe}`,TABLET_LANDSCAPE:`${zbe}`,WEB_LANDSCAPE:`${Ube}`},J5e=[{alias:"handset",priority:2e3,mediaQuery:KC.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:KC.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:KC.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:KC.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:KC.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:KC.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:KC.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:KC.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:KC.WEB_PORTRAIT,overlapping:!0}],eje=/(\.|-|_)/g;function tje(n){let e=n.length>0?n.charAt(0):"",t=n.length>1?n.slice(1):"";return e.toUpperCase()+t}const rje=new d.OlP("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=(0,d.f3M)(mJ),e=(0,d.f3M)(Og),t=[].concat.apply([],(n||[]).map(s=>Array.isArray(s)?s:[s]));return function nje(n,e=[]){const t={};return n.forEach(i=>{t[i.alias]=i}),e.forEach(i=>{t[i.alias]?$C(t[i.alias],i):t[i.alias]=i}),function sje(n){return n.forEach(e=>{e.suffix||(e.suffix=function ije(n){return n.replace(eje,"|").split("|").map(tje).join("")}(e.alias),e.overlapping=!!e.overlapping)}),n}(Object.keys(t).map(i=>t[i]))}((e.disableDefaultBps?[]:Q5e).concat(e.addOrientationBps?J5e:[]),t)}});let bJ=(()=>{class n{constructor(t){this.findByMap=new Map,this.items=[...t].sort(Y5e)}findByAlias(t){return t?this.findWithPredicate(t,i=>i.alias===t):null}findByQuery(t){return this.findWithPredicate(t,i=>i.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>{var i;return null!==(i=null==t?void 0:t.suffix)&&void 0!==i?i:""})}findWithPredicate(t,i){var s;let r=this.findByMap.get(t);return r||(r=null!==(s=this.items.find(i))&&void 0!==s?s:null,this.findByMap.set(t,r)),null!=r?r:null}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(rje))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mR="print",oje={alias:mR,mediaQuery:mR,priority:1e3};let aje=(()=>{class n{constructor(t,i,s){this.breakpoints=t,this.layoutConfig=i,this._document=s,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new lje,this.deactivations=[]}withPrintQuery(t){return[...t,mR]}isPrintEvent(t){return t.mediaQuery.startsWith(mR)}get printAlias(){var t;return[...null!==(t=this.layoutConfig.printWithBreakpoints)&&void 0!==t?t:[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const i=this.breakpoints.findByQuery(t);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(FN)}updateEvent(t){var i;let s=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(s=this.getEventBreakpoints(t)[0],t.mediaQuery=null!==(i=null==s?void 0:s.mediaQuery)&&void 0!==i?i:""),Pbe(t,s)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new fI(!0,mR))),t.updateStyles())},s=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",s),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(s)}interceptEvents(t){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(i)),t.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,i)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,i){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const s=this.breakpoints.findByQuery(i.mediaQuery);if(s){const r=this.formerActivations&&this.formerActivations.includes(s),o=!this.formerActivations&&t.activatedBreakpoints.includes(s);(r||o)&&(this.deactivations.push(s),this.deactivations.sort(FN))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(bJ),d.LFG(Og),d.LFG(Pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class lje{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(oje),e.sort(FN),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function hje(n){var e;return null!==(e=null==n?void 0:n.mediaQuery.startsWith(mR))&&void 0!==e&&e}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}let fa=(()=>{class n{constructor(t,i,s){this.matchMedia=t,this.breakpoints=i,this.hook=s,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new _s.x,this.observeActivations()}get activatedAlias(){var t,i;return null!==(i=null===(t=this.activatedBreakpoints[0])||void 0===t?void 0:t.alias)&&void 0!==i?i:""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const i=this.findByQuery(t.mediaQuery);if(i){t=Pbe(t,i);const s=this.activatedBreakpoints.indexOf(i);t.matches&&-1===s?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(FN),this.updateStyles()):!t.matches&&-1!==s&&(this._activatedBreakpoints.splice(s,1),this._activatedBreakpoints.sort(FN),this.updateStyles())}}init(t,i,s,r,o=[]){qbe(this.updateMap,t,i,s),qbe(this.clearMap,t,i,r),this.buildElementKeyMap(t,i),this.watchExtraTriggers(t,i,o)}getValue(t,i,s){const r=this.elementMap.get(t);if(r){const o=void 0!==s?r.get(s):this.getActivatedValues(r,i);if(o)return o.get(i)}}hasValue(t,i){const s=this.elementMap.get(t);if(s){const r=this.getActivatedValues(s,i);if(r)return void 0!==r.get(i)||!1}return!1}setValue(t,i,s,r){var o;let a=this.elementMap.get(t);if(a){const h=(null!==(o=a.get(r))&&void 0!==o?o:new Map).set(i,s);a.set(r,h),this.elementMap.set(t,a)}else a=(new Map).set(r,(new Map).set(i,s)),this.elementMap.set(t,a);const l=this.getValue(t,i);void 0!==l&&this.updateElement(t,i,l)}trackValue(t,i){return this.subject.asObservable().pipe(Un(s=>s.element===t&&s.key===i))}updateStyles(){this.elementMap.forEach((t,i)=>{const s=new Set(this.elementKeyMap.get(i));let r=this.getActivatedValues(t);r&&r.forEach((o,a)=>{this.updateElement(i,a,o),s.delete(a)}),s.forEach(o=>{if(r=this.getActivatedValues(t,o),r){const a=r.get(o);this.updateElement(i,o,a)}else this.clearElement(i,o)})})}clearElement(t,i){const s=this.clearMap.get(t);if(s){const r=s.get(i);r&&(r(),this.subject.next({element:t,key:i,value:""}))}}updateElement(t,i,s){const r=this.updateMap.get(t);if(r){const o=r.get(i);o&&(o(s),this.subject.next({element:t,key:i,value:s}))}}releaseElement(t){const i=this.watcherMap.get(t);i&&(i.forEach(r=>r.unsubscribe()),this.watcherMap.delete(t));const s=this.elementMap.get(t);s&&(s.forEach((r,o)=>s.delete(o)),this.elementMap.delete(t))}triggerUpdate(t,i){const s=this.elementMap.get(t);if(s){const r=this.getActivatedValues(s,i);r&&(i?this.updateElement(t,i,r.get(i)):r.forEach((o,a)=>this.updateElement(t,a,o)))}}buildElementKeyMap(t,i){let s=this.elementKeyMap.get(t);s||(s=new Set,this.elementKeyMap.set(t,s)),s.add(i)}watchExtraTriggers(t,i,s){if(s&&s.length){let r=this.watcherMap.get(t);if(r||(r=new Map,this.watcherMap.set(t,r)),!r.get(i)){const a=(0,Sh.T)(...s).subscribe(()=>{const l=this.getValue(t,i);this.updateElement(t,i,l)});r.set(i,a)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,i){for(let r=0;r<this.activatedBreakpoints.length;r++){const a=t.get(this.activatedBreakpoints[r].alias);if(a&&(void 0===i||a.has(i)&&null!=a.get(i)))return a}if(!this._useFallbacks)return;const s=t.get("");return void 0===i||s&&s.has(i)?s:void 0}observeActivations(){const t=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe((0,ya.b)(this.hook.interceptEvents(this)),Un(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gJ),d.LFG(bJ),d.LFG(aje))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qbe(n,e,t,i){var s;if(void 0!==i){const r=null!==(s=n.get(e))&&void 0!==s?s:new Map;r.set(t,i),n.set(e,r)}}let La=(()=>{class n{constructor(t,i,s,r){this.elementRef=t,this.styleBuilder=i,this.styler=s,this.marshal=r,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new _s.x,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const s=i.split(".").slice(1).join(".");this.setValue(t[i].currentValue,s)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,i){const s=this.styleBuilder,r=s.shouldCache;let o=this.styleCache.get(t);(!o||!r)&&(o=s.buildStyles(t,i),r&&this.styleCache.set(t,o)),this.mru=Object.assign({},o),this.applyStyleToElement(o),s.sideEffect(t,o,i)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,i=!1){if(t){const[s,r]=this.styler.getFlowDirection(t);if(!r&&i){const o=Lbe(s);this.styler.applyStyleToElements(o,[t])}return s.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,i,s=this.nativeElement){this.styler.applyStyleToElement(s,t,i)}setValue(t,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,i)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Za),d.Y36(Yo),d.Y36(fa))},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})(),uje=(()=>{class n extends Za{buildStyles(t,{display:i}){const s=Lbe(t);return Object.assign(Object.assign({},s),{display:"none"===i?i:s.display})}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=d.n5z(n)))(i||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pje=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let fje=(()=>{class n extends La{constructor(t,i,s,r,o){super(t,s,i,r),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){var i;const r=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=null!==(i=Kbe.get(r))&&void 0!==i?i:new Map,Kbe.set(r,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:r}),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Yo),d.Y36(uje),d.Y36(fa),d.Y36(Og))},n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})(),IU=(()=>{class n extends fje{constructor(){super(...arguments),this.inputs=pje}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=d.n5z(n)))(i||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[d.qOj]}),n})();const Kbe=new Map;let i3e=(()=>{class n extends Za{buildStyles(t,i){const s={},[r,o]=t.split(" ");switch(r){case"center":s["justify-content"]="center";break;case"space-around":s["justify-content"]="space-around";break;case"space-between":s["justify-content"]="space-between";break;case"space-evenly":s["justify-content"]="space-evenly";break;case"end":case"flex-end":s["justify-content"]="flex-end";break;default:s["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":s["align-items"]=s["align-content"]="flex-start";break;case"center":s["align-items"]=s["align-content"]="center";break;case"end":case"flex-end":s["align-items"]=s["align-content"]="flex-end";break;case"space-between":s["align-content"]="space-between",s["align-items"]="stretch";break;case"space-around":s["align-content"]="space-around",s["align-items"]="stretch";break;case"baseline":s["align-content"]="stretch",s["align-items"]="baseline";break;default:s["align-items"]=s["align-content"]="stretch"}return $C(s,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===o?PN(i.layout)?null:"100%":null,"max-height":"stretch"===o&&PN(i.layout)?"100%":null})}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=d.n5z(n)))(i||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const s3e=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let n3e=(()=>{class n extends La{constructor(t,i,s,r){super(t,s,i,r),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(Ko(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const i=this.layout||"row",s=this.inline;"row"===i&&s?this.styleCache=h3e:"row"!==i||s?"row-reverse"===i&&s?this.styleCache=d3e:"row-reverse"!==i||s?"column"===i&&s?this.styleCache=c3e:"column"!==i||s?"column-reverse"===i&&s?this.styleCache=u3e:"column-reverse"===i&&!s&&(this.styleCache=l3e):this.styleCache=o3e:this.styleCache=a3e:this.styleCache=r3e,this.addStyles(t,{layout:i,inline:s})}onLayoutChange(t){const i=t.value.split(" ");this.layout=i[0],this.inline=t.value.includes("inline"),EU.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Yo),d.Y36(i3e),d.Y36(fa))},n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})(),yJ=(()=>{class n extends n3e{constructor(){super(...arguments),this.inputs=s3e}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=d.n5z(n)))(i||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[d.qOj]}),n})();const r3e=new Map,o3e=new Map,a3e=new Map,l3e=new Map,h3e=new Map,c3e=new Map,d3e=new Map,u3e=new Map;let Xbe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[pJ,pR]]}),n})();var jr=(()=>(function(n){n.SMALL="dla dziecka",n.MEDIUM="dla doros\u0142ych",n.LARGE="dla mam"}(jr||(jr={})),jr))();const Qbe=[{id:1,name:"Ice Cream",imageUrls:["../assets/ice-cream-prune.svg","../assets/ice-cream-cherry.svg","../assets/ice-cream-squash.svg"],price:10,flavors:[{name:"prune",color:"#5A188E"},{name:"squash",color:"#F88532"},{name:"cherry",color:"#E91E63"}],sizes:[jr.SMALL,jr.MEDIUM,jr.LARGE]},{id:2,name:"Popsicle",imageUrls:["../assets/popsicle-lime.svg","../assets/popsicle-lettuce.svg","../assets/popsicle-cherry.svg"],price:8,flavors:[{name:"lime",color:"#00CACA"},{name:"lettuce",color:"#80DC0B"},{name:"cherry",color:"#E91E63"}],sizes:[jr.SMALL,jr.LARGE]},{id:3,name:"Popsicle",imageUrls:["../assets/popsicle-lime.svg","../assets/popsicle-lettuce.svg","../assets/popsicle-cherry.svg"],price:8,flavors:[{name:"lime",color:"#00CACA"},{name:"lettuce",color:"#80DC0B"},{name:"cherry",color:"#E91E63"}],sizes:[jr.SMALL,jr.LARGE]},{id:4,name:"Popsicle",imageUrls:["../assets/popsicle-lime.svg","../assets/popsicle-lettuce.svg","../assets/popsicle-cherry.svg"],price:8,flavors:[{name:"lime",color:"#00CACA"},{name:"lettuce",color:"#80DC0B"},{name:"cherry",color:"#E91E63"}],sizes:[jr.SMALL,jr.LARGE]},{id:5,name:"Ice Cream",imageUrls:["../assets/ice-cream-prune.svg","../assets/ice-cream-cherry.svg","../assets/ice-cream-squash.svg"],price:10,flavors:[{name:"prune",color:"#5A188E"},{name:"squash",color:"#F88532"},{name:"cherry",color:"#E91E63"}],sizes:[jr.SMALL,jr.MEDIUM,jr.LARGE]},{id:6,name:"Ice Cream",imageUrls:["../assets/ice-cream-prune.svg","../assets/ice-cream-cherry.svg","../assets/ice-cream-squash.svg"],price:10,flavors:[{name:"prune",color:"#5A188E"},{name:"squash",color:"#F88532"},{name:"cherry",color:"#E91E63"}],sizes:[jr.SMALL,jr.MEDIUM,jr.LARGE]},{id:7,name:"Ice Cream",imageUrls:["../assets/ice-cream-prune.svg","../assets/ice-cream-cherry.svg","../assets/ice-cream-squash.svg"],price:10,flavors:[{name:"prune",color:"#5A188E"},{name:"squash",color:"#F88532"},{name:"cherry",color:"#E91E63"}],sizes:[jr.SMALL,jr.MEDIUM,jr.LARGE]},{id:8,name:"Ice Cream",imageUrls:["../assets/ice-cream-prune.svg","../assets/ice-cream-cherry.svg","../assets/ice-cream-squash.svg"],price:10,flavors:[{name:"prune",color:"#5A188E"},{name:"squash",color:"#F88532"},{name:"cherry",color:"#E91E63"}],sizes:[jr.SMALL,jr.MEDIUM,jr.LARGE]},{id:9,name:"Ice Cream",imageUrls:["../assets/ice-cream-prune.svg","../assets/ice-cream-cherry.svg","../assets/ice-cream-squash.svg"],price:10,flavors:[{name:"prune",color:"#5A188E"},{name:"squash",color:"#F88532"},{name:"cherry",color:"#E91E63"}],sizes:[jr.SMALL,jr.MEDIUM,jr.LARGE]}];let Jbe=(()=>{class n{constructor(){}getProducts(){return Qbe}getProduct(t){return ei(Qbe.find(s=>s.id===t))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function p3e(n,e){if(1&n&&(d.TgZ(0,"div",7),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Oqu(t.counter)}}function f3e(n,e){if(1&n&&d._UZ(0,"img",11),2&n){const t=d.oxw(2).index,i=d.oxw();d.Udp("object-fit",i.objectFit),d.Q6J("src",i.getImage(t).image.path,d.LSH)}}function m3e(n,e){if(1&n&&(d.TgZ(0,"div",9),d.YNc(1,f3e,1,3,"img",10),d.qZA()),2&n){const t=d.oxw().index,i=d.oxw();d.Udp("width",i.getCellWidth()+"px")("border-radius",i.borderRadius+"px"),d.xp6(1),d.Q6J("ngIf",i.getImage(t)&&i.getImage(t).image)}}function g3e(n,e){if(1&n&&d.YNc(0,m3e,2,5,"div",8),2&n){const t=e.index,i=d.oxw();d.Q6J("ngIf",t<i.cellLimit)}}function b3e(n,e){if(1&n&&d._UZ(0,"div",14),2&n){const t=e.index,i=d.oxw(2);d.ekj("carousel-dot-active",t===i.activeDotIndex)}}function y3e(n,e){if(1&n&&(d.TgZ(0,"div",12),d.YNc(1,b3e,1,2,"div",13),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.dotsArr)}}function v3e(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",15)(1,"div",16),d.NdJ("click",function(){return d.CHM(t),d.oxw().prev()}),d.qZA(),d.TgZ(2,"div",17),d.NdJ("click",function(){return d.CHM(t),d.oxw().next()}),d.qZA()()}if(2&n){const t=d.oxw();d.ekj("carousel-arrows-outside",t.arrowsOutside)("carousel-dark-arrows","dark"===t.arrowsTheme),d.xp6(1),d.ekj("carousel-arrow-disabled",t.isPrevArrowDisabled()),d.xp6(1),d.ekj("carousel-arrow-disabled",t.isNextArrowDisabled())}}const C3e=["*"];class w3e{constructor(e){this.eventType=void 0,this.handlers={},this.startX=0,this.startY=0,this.lastTap=0,this.doubleTapMinTimeout=300,this.tapMinTimeout=200,this.touchstartTime=0,this.i=0,this.isMousedown=!1,this._touchListeners={touchstart:"handleTouchstart",touchmove:"handleTouchmove",touchend:"handleTouchend"},this._mouseListeners={mousedown:"handleMousedown",mousemove:"handleMousemove",mouseup:"handleMouseup",wheel:"handleWheel"},this._otherListeners={resize:"handleResize"},this.handleTouchstart=t=>{this.elementPosition=this.getElementPosition(),this.touchstartTime=(new Date).getTime(),void 0===this.eventType&&this.getTouchstartPosition(t),this.runHandler("touchstart",t)},this.handleTouchmove=t=>{switch(this.detectPan(t.touches)&&this.runHandler("pan",t),this.detectPinch(t)&&this.runHandler("pinch",t),this.detectLinearSwipe(t)){case"horizontal-swipe":t.swipeType="horizontal-swipe",this.runHandler("horizontal-swipe",t);break;case"vertical-swipe":t.swipeType="vertical-swipe",this.runHandler("vertical-swipe",t)}(this.detectLinearSwipe(t)||"horizontal-swipe"===this.eventType||"vertical-swipe"===this.eventType)&&this.handleLinearSwipe(t)},this.handleTouchend=t=>{const i=t.touches;this.detectDoubleTap()&&this.runHandler("double-tap",t),this.detectTap(),this.runHandler("touchend",t),this.eventType="touchend",i&&0===i.length&&(this.eventType=void 0,this.i=0)},this.handleMousedown=t=>{this.isMousedown=!0,this.elementPosition=this.getElementPosition(),this.touchstartTime=(new Date).getTime(),void 0===this.eventType&&this.getMousedownPosition(t),this.runHandler("mousedown",t)},this.handleMousemove=t=>{if(this.isMousedown){switch(this.runHandler("pan",t),this.detectLinearSwipe(t)){case"horizontal-swipe":t.swipeType="horizontal-swipe",this.runHandler("horizontal-swipe",t);break;case"vertical-swipe":t.swipeType="vertical-swipe",this.runHandler("vertical-swipe",t)}(this.detectLinearSwipe(t)||"horizontal-swipe"===this.eventType||"vertical-swipe"===this.eventType)&&this.handleLinearSwipe(t)}},this.handleMouseup=t=>{this.detectTap(),this.isMousedown=!1,this.runHandler("mouseup",t),this.eventType=void 0,this.i=0},this.handleWheel=t=>{this.runHandler("wheel",t)},this.handleResize=t=>{this.runHandler("resize",t)},this.properties=e,this.element=this.properties.element,this.elementPosition=this.getElementPosition(),this.toggleEventListeners("addEventListener")}get touchListeners(){return this.properties.touchListeners?this.properties.touchListeners:this._touchListeners}get mouseListeners(){return this.properties.mouseListeners?this.properties.mouseListeners:this._mouseListeners}get otherListeners(){return this.properties.otherListeners?this.properties.otherListeners:this._otherListeners}destroy(){this.toggleEventListeners("removeEventListener")}toggleEventListeners(e){let t;for(var i in t="mouse and touch"===this.properties.listeners?Object.assign(this.touchListeners,this.mouseListeners):this.detectTouchScreen()?this.touchListeners:this.mouseListeners,this.properties.resize&&(t=Object.assign(t,this.otherListeners)),t){const s=t[i];"resize"===i?("addEventListener"===e&&window.addEventListener(i,this[s],!1),"removeEventListener"===e&&window.removeEventListener(i,this[s],!1)):"mouseup"===i||"mousemove"===i?("addEventListener"===e&&document.addEventListener(i,this[s],{passive:!1}),"removeEventListener"===e&&document.removeEventListener(i,this[s],!1)):("addEventListener"===e&&this.element.addEventListener(i,this[s],!1),"removeEventListener"===e&&this.element.removeEventListener(i,this[s],!1))}}addEventListeners(e){window.addEventListener(e,this[this._mouseListeners[e]],!1)}removeEventListeners(e){window.removeEventListener(e,this[this._mouseListeners[e]],!1)}handleLinearSwipe(e){this.i++,this.i>3&&(this.eventType=this.getLinearSwipeType(e)),"horizontal-swipe"===this.eventType&&this.runHandler("horizontal-swipe",e),"vertical-swipe"===this.eventType&&this.runHandler("vertical-swipe",e)}runHandler(e,t){this.handlers[e]&&this.handlers[e](t)}detectPan(e){return 1===e.length&&!this.eventType||"pan"===this.eventType}detectDoubleTap(){if(null!=this.eventType)return;const e=(new Date).getTime(),t=e-this.lastTap;if(clearTimeout(this.doubleTapTimeout),t<this.doubleTapMinTimeout&&t>0)return!0;this.doubleTapTimeout=setTimeout(()=>{clearTimeout(this.doubleTapTimeout)},this.doubleTapMinTimeout),this.lastTap=e}detectTap(){if(null!=this.eventType)return;const t=(new Date).getTime()-this.touchstartTime;t>0&&this.runHandler(t<this.tapMinTimeout?"tap":"longtap",event)}detectPinch(e){return 2===e.touches.length&&void 0===this.eventType||"pinch"===this.eventType}detectLinearSwipe(e){const t=e.touches;if(t){if(1===t.length&&!this.eventType||"horizontal-swipe"===this.eventType||"vertical-swipe"===this.eventType)return this.getLinearSwipeType(e)}else if(!this.eventType||"horizontal-swipe"===this.eventType||"vertical-swipe"===this.eventType)return this.getLinearSwipeType(e)}getLinearSwipeType(e){if("horizontal-swipe"!==this.eventType&&"vertical-swipe"!==this.eventType){const t=Math.abs(this.moveLeft(0,e)-this.startX);return 3*Math.abs(this.moveTop(0,e)-this.startY)>t?"vertical-swipe":"horizontal-swipe"}return this.eventType}getElementPosition(){return this.element.getBoundingClientRect()}getTouchstartPosition(e){this.startX=e.touches[0].clientX-this.elementPosition.left,this.startY=e.touches[0].clientY-this.elementPosition.top}getMousedownPosition(e){this.startX=e.clientX-this.elementPosition.left,this.startY=e.clientY-this.elementPosition.top}moveLeft(e,t){const i=t.touches;return i?i[e].clientX-this.elementPosition.left:t.clientX-this.elementPosition.left}moveTop(e,t){const i=t.touches;return i?i[e].clientY-this.elementPosition.top:t.clientY-this.elementPosition.top}detectTouchScreen(){var e=" -webkit- -moz- -o- -ms- ".split(" ");if("ontouchstart"in window)return!0;var i=["(",e.join("touch-enabled),("),"heartz",")"].join("");return window.matchMedia(i).matches}on(e,t){e&&(this.handlers[e]=t)}}class S3e{constructor(e,t,i,s,r){this.properties=e,this.utils=t,this.cells=i,this.container=s,this.slide=r,this.isSlideLengthLimited=!1,this.isContentImages=!0,this.isLazyLoad=!0,this.isContainerLocked=!0,this.alignCells="left",this.initialContainerPosition=0,this.containerPullLimit=100,this.handleTouchstart=o=>{this.container.handleTouchstart(),this.slide.handleTouchstart(o)},this.handleHorizontalSwipe=o=>{this.container.handleHorizontalSwipe()},this.handleTouchend=o=>{this.properties.freeScroll?this.container.handleTouchend():(this.container.handleTouchend(!0),this.slide.handleTouchend(o))},this.isNextArrowDisabled=()=>this.slide.isNextArrowDisabled(),this.isPrevArrowDisabled=()=>this.slide.isPrevArrowDisabled(),this.init()}get cellLength(){return this.cells.cellLength}get cellLengthInLightDOMMode(){if(this.images){let e=this.numberOfVisibleCells+2*this.overflowCellsLimit;return e>this.images.length&&(e=this.images.length),e}return this.cellLength}get lastCellIndex(){return this.images.length?this.images.length-1:this.cells.cellLength-1}get overflowCellsLimit(){return this.utils.overflowCellsLimit}get cellLimit(){if(this.isLightDOM){let e=this.numberOfVisibleCells+2*this.overflowCellsLimit;return e<this.numberOfVisibleCells&&(e=this.numberOfVisibleCells),e}return this.properties.images.length}get isLightDOM(){return this.properties.lightDOM||this.properties.loop}get images(){return this.properties.images}get margin(){return this.properties.margin}get minSwipeDistance(){return this.properties.minSwipeDistance}get transitionDuration(){return this.properties.transitionDuration}get transitionTimingFunction(){return this.properties.transitionTimingFunction}get fullCellWidth(){return this.properties.cellWidth+this.margin}get numberOfVisibleCells(){return this.utils.numberOfVisibleCells}get lapCounter(){return Math.floor(this.slide.counter/this.cellLengthInLightDOMMode)}get slideCounter(){return this.slide.counter}updateProperties(e){this.properties=e}init(){this.cellsElement=this.properties.cellsElement,this.visibleWidth=this.properties.visibleWidth||this.cellsElement.parentElement.clientWidth}destroy(){clearInterval(this.autoplayId)}lineUpCells(){this.cells.lineUp()}handleTransitionend(){this.slide.handleTransitionend()}getImage(e){return this.cells.getImage(e)}next(e=1){this.isNextArrowDisabled()||this.slide.next(e)}prev(e=1){this.slide.prev(e)}autoplay(){this.autoplayId=setInterval(()=>{this.next()},this.properties.autoplayInterval)}stopAutoplay(){this.autoplayId&&clearInterval(this.autoplayId)}}class x3e{constructor(e,t,i){this.carouselProperties=e,this.utils=t,this.cells=i,this.newPositionIndex=0,this.isPositionCorrection=!1,this.initialPositionX=0,this.initialElementPositionX=0,this.isLocked=!0,this.pullLimit=100,this.startTime=0,this.startX=0,this.moveX=0,this.isSwipeInProgress=!1,this.init()}get visibleWidth(){return this.utils.visibleWidth}get overflowCellsLimit(){return this.utils.overflowCellsLimit}get images(){return this.carouselProperties.images}get element(){return this.carouselProperties.cellsElement}get freeScroll(){return this.carouselProperties.freeScroll}get fullCellWidth(){return this.carouselProperties.cellWidth+this.carouselProperties.margin}get numberOfVisibleCells(){return this.utils.numberOfVisibleCells}get transitionDuration(){return this.carouselProperties.transitionDuration}get transitionTimingFunction(){return this.carouselProperties.transitionTimingFunction}get cellLength(){return this.images?this.images.length:this.cells.cellLength}get cellLengthInLightDOMMode(){if(this.images){let e=this.numberOfVisibleCells+2*this.overflowCellsLimit;return e>this.images.length&&(e=this.images.length),e}return this.cellLength}get tooFewCells(){return this.numberOfVisibleCells>this.cellLength}get disabled(){return this.tooFewCells}get margin(){return this.carouselProperties.margin}get isLightDOM(){return this.carouselProperties.lightDOM||this.carouselProperties.loop}updateProperties(e){this.carouselProperties=e}init(){this.setWidth()}handleTouchstart(){this.startX=this.utils.getStartX(event),this.startTime=(new Date).getTime(),this.initialElementPositionX=this.getInitialElementPositionX()}handleHorizontalSwipe(){this.disabled||(this.isSwipeInProgress||(this.startX=this.utils.getStartX(event),this.startTime=(new Date).getTime(),this.initialElementPositionX=this.getInitialElementPositionX()),this.isSwipeInProgress=!0,this.moveX=this.utils.getMoveX(event),this.move())}handleTouchend(e=!1){if(!this.disabled){if(e)return void(this.isSwipeInProgress=!1);this.isSwipeInProgress=!1,this.finishMoving(),this.clearInitialValues()}}move(){let e=this.getMovePositionX();const t=this.detectPulled(),i=this.getDirection();t&&("left"===t.edge&&"right"===i||"right"===t.edge&&"left"===i)&&(e=this.slowdownOnPull(e)),this.transformPositionX(e,0),this.freeScroll&&(this.initialPositionX=e),t&&("left"===t.edge&&t.overflowX>this.pullLimit&&(this.initialPositionX=0),"right"===t.edge&&t.overflowX>this.pullLimit&&(this.initialPositionX=e))}getMovePositionX(){const e=this.getDistance();return this.initialElementPositionX-e}getDistance(){return this.startX-this.moveX}detectPulled(){const e=this.getCurrentPositionX();return e>0?{edge:"left",positionX:e,overflowX:Math.abs(e)}:e<this.getEndPosition()?{edge:"right",positionX:e,overflowX:Math.abs(e-this.getEndPosition())}:void 0}slowdownOnPull(e){let t=Math.abs(this.getDistance());const i=this.getEndPosition(),s=this.detectPulled();if(!s)return 0;const r=3+s.overflowX/50;let o=0;if("left"===s.edge){this.initialElementPositionX<0&&(t-=Math.abs(this.initialElementPositionX));const a=t/r;o=a,this.initialElementPositionX>0&&(o=this.initialElementPositionX+a),o>this.pullLimit&&(o=this.pullLimit)}if("right"===s.edge){const a=i+(this.initialElementPositionX-t-i)/r,l=this.getWidth();o=a,this.initialElementPositionX<-(l-this.visibleWidth)&&(o=l-this.visibleWidth+this.initialElementPositionX+a),o<i-this.pullLimit&&(o=i-this.pullLimit)}return o}finishMoving(){const e=this.getMovePositionX();let t=0;this.freeScroll&&(t=this.getInertia()),t=this.getAlignedPositionOnPull(t),this.transformPositionX(t),this.setInitialPosition(e)}getInertia(){const e=this.getDistance(),i=(new Date).getTime()-this.startTime;return this.initialPositionX-e/i*100}getAlignedPositionOnPull(e){const t=this.getDirection();if("left"===t){let i=this.getEndPosition();if(e<i)return i}return"right"===t&&e>0?0:e}getCurrentPositionX(){const e=this.element.parentElement.getBoundingClientRect();return this.element.getBoundingClientRect().left-e.left}getEndPosition(){if(this.isLightDOM)return-(this.cells.imageUtils.getImages().length*this.fullCellWidth-this.visibleWidth-this.margin);{const e=this.getWidth();return this.element.parentElement.clientWidth-e}}transformPositionX(e,t=this.transitionDuration){void 0!==e&&(this.element.style.transition="transform "+t+"ms "+this.transitionTimingFunction,this.element.style.transform="translateX("+e+"px)")}getWidth(){let e=this.cellLengthInLightDOMMode*this.fullCellWidth,t=this.cellLength*this.fullCellWidth;return t<e&&(e=t),this.isLightDOM?e:t}setWidth(){const e=this.getWidth();this.element.style.width=e+"px"}setInitialPosition(e){this.initialPositionX=e}getElementPosition(){return this.element.getBoundingClientRect()}getInitialElementPositionX(){const e=this.utils.getCarouselElementPosition().left;return this.getElementPosition().left-e}clearInitialValues(){this.startX=this.moveX=0}getDirection(){const e=Math.sign(this.startX-this.moveX);return-1===e?"right":1===e?"left":void 0}}class E3e{constructor(e){this.cellStack=[],this.element=e}getImages(){return this.cellStack.filter(this.filter)}filter(e){return void 0!==e.img}}class _3e{constructor(e,t){this.carouselProperties=e,this.utils=t,this.counter=0,this.imageUtils=new E3e(this.element),this.init(e)}get images(){return this.carouselProperties.images}get cellLength(){return this.cells?this.cells.length:0}get fullCellWidth(){return this.carouselProperties.cellWidth+this.carouselProperties.margin}get cellLengthInLightDOMMode(){if(this.images){let e=this.numberOfVisibleCells+2*this.overflowCellsLimit;return e>this.images.length&&(e=this.images.length),e}return this.cellLength}get numberOfVisibleCells(){return this.utils.numberOfVisibleCells}get overflowCellsLimit(){return this.utils.overflowCellsLimit}get isLightDOM(){return this.carouselProperties.lightDOM||this.carouselProperties.loop}updateProperties(e){this.carouselProperties=e}lineUp(){const e=this.element?this.element.children:[];this.imageUtils.cellStack=[];for(var t=0;t<e.length;t++){let i=e[t],s=this.getCellPositionInContainer(t);i.style.transform="translateX("+s+"px)",i.style.width=this.carouselProperties.cellWidth+"px",this.getImage(t)&&this.imageUtils.cellStack.push({index:t,positionX:s,img:this.getImage(t).image})}}ifSequenceOfCellsIsChanged(){return"translateX(0px)"!==this.element.children[0].style.transform}getCellPositionInContainer(e){return this.getCellIndexInContainer(e)*this.fullCellWidth}getCellIndexInContainer(e){let t;if(!this.isLightDOM)return e;let i=this.cellLengthInLightDOMMode,s=this.counter-this.overflowCellsLimit;return s>i&&(s%=i),s<0?e:(t=e-s,t<0&&(t=i+t),t)}getImage(e){if(!this.images)return;let t=this.getImageIndex(e),i=this.images[t];return i&&!i.type&&(i.type="image"),{image:this.images[t],imageIndex:t}}getImageIndex(e){const t=this.getCellIndexInContainer(e);let i;return this.counter>this.overflowCellsLimit?(i=t+(this.counter-this.overflowCellsLimit),this.images&&this.carouselProperties.loop&&(i%=this.images.length)):i=e,i}setCounter(e){this.counter=e}init(e){this.element=this.carouselProperties.cellsElement,this.cells=this.element.children,this.visibleWidth=this.carouselProperties.visibleWidth||this.element.parentElement.clientWidth}}class I3e{constructor(e,t,i,s){this.carouselProperties=e,this.utils=t,this.cells=i,this.container=s,this.slideLength=0,this.isSlideInProgress=!1,this.counter=0,this._counter=0,this.distance=0,this.distanceAbs=0,this.isNotClickOnArrow=!1,this.initialPositionX=0,this.currentPositionX=0,this.isSlideLengthLimited=!1,this.init()}get fullCellWidth(){return this.carouselProperties.cellWidth+this.carouselProperties.margin}get margin(){return this.carouselProperties.margin}get minSwipeDistance(){return this.carouselProperties.minSwipeDistance}get numberOfVisibleCells(){return this.utils.numberOfVisibleCells}get visibleCellsOverflowContainer(){return this.utils.visibleCellsOverflowContainer}get fixedContainerPosition(){return-this.overflowCellsLimit*this.fullCellWidth}get overflowCellsLimit(){return this.utils.overflowCellsLimit}get images(){return this.carouselProperties.images}get cellLength(){return this.isLightDOM?this.cells.cellLengthInLightDOMMode:this.images?this.images.length:this.cells.cellLength}get isLightDOM(){return this.carouselProperties.lightDOM||this.carouselProperties.loop}updateProperties(e){this.carouselProperties=e,this.setVisibleWidth()}init(){this.visibleWidth=this.carouselProperties.visibleWidth||this.carouselProperties.hostElement.clientWidth}handleTouchstart(){this.isNotClickOnArrow=!0,this.isSlideLengthLimited=!1,this.isSlideInProgress||(this.initialPositionX=this.container.getCurrentPositionX())}handleTouchend(){!this.isNotClickOnArrow||(this.currentPositionX=this.container.getCurrentPositionX(),this.distanceAbs=Math.abs(this.initialPositionX-this.currentPositionX),this.distance=this.initialPositionX-this.currentPositionX,this.direction=this.getDirection(),this.isNotClickOnArrow=!1,this.handleSlide())}handleTransitionend(){this.setCounter(),this.isSlideInProgress=!1,this.isLightDOM&&this.alignContainerFast()}handleSlide(e){let i;if(!(e&&this.isSlideInProgress||!this.direction)){if(e?(this.slideLength=this.limitSlideLength(e),this.isSlideInProgress||(this.initialPositionX=this.container.getCurrentPositionX())):this.slideLength=this.getSlideLength(this.distanceAbs),this._counter=this.getPreliminaryCounter(),"left"===this.direction){e||(this.slideLength=this.limitSlideLength(this.getSlideLength(this.distanceAbs))),this._counter=this.getPreliminaryCounter();let s=this.isSlidesEnd(this._counter);i=this.getPositionByIndex(this._counter),s&&(this._counter=this.counter,i=this.getPositionByIndex(this.counter),this.slideLength=0)}"right"===this.direction&&(e||(this.slideLength=this.getSlideLength(this.distanceAbs)),this._counter<0&&(this._counter=this.counter,this.slideLength=this.counter),i=this.getPositionByIndex(this.counter-this.slideLength)),this.container.getCurrentPositionX()!==i&&(this.isSlideInProgress=!0,this.container.transformPositionX(i))}}next(e=1){this.direction="left",this.handleSlide(e)}prev(e=1){this.direction="right",this.handleSlide(e)}select(e){e>this.cellLength-1||(e>this.counter&&this.next(e-this.counter),e<this.counter&&this.prev(this.counter-e))}getPreliminaryCounter(){return"left"===this.direction?this.counter+this.slideLength:"right"===this.direction?this.counter-this.slideLength:0}limitSlideLength(e){if(e>1)for(var t=0;t<e;t++)if(!this.isSlidesEnd(this.counter+(e-t))){e-=t,this.isSlideLengthLimited=t>0;break}return e}getPositionCorrection(e){let t=0,i=this.isLastSlide(e);return this.carouselProperties.loop||"right"===this.direction?0:((this.isSlideLengthLimited||i)&&(this.visibleWidth<this.cells.cellLengthInLightDOMMode*this.fullCellWidth&&(t=-(this.numberOfVisibleCells*this.fullCellWidth-this.visibleWidth-this.margin)),t>=-this.margin&&(t=0)),t)}getSlideLength(e){this.isLastSlide(this.counter)&&"right"===this.direction&&(e+=this.visibleWidth%this.fullCellWidth);let i=Math.floor(e/this.fullCellWidth);return e%this.fullCellWidth>=this.minSwipeDistance&&i++,i}getDistanceAbs(){return Math.abs(this.initialPositionX-this.currentPositionX)}getDirection(){const e=Math.sign(this.initialPositionX-this.currentPositionX);return-1===e?"right":1===e?"left":void 0}isSlidesEnd(e){return!this.carouselProperties.loop&&(this.images?this.images.length:this.cells.cellLength)-e+(this.visibleCellsOverflowContainer?1:0)<this.numberOfVisibleCells}isLastSlide(e){return this.isSlidesEnd(e+1)}setCounter(){"left"===this.direction&&(this.counter=this.counter+this.slideLength),"right"===this.direction&&(this.counter=this.counter-this.slideLength)}getPositionByIndex(e){let i,t=this.getPositionCorrection(this.counter+this.slideLength);return 0!==t&&(t+=this.fullCellWidth),"right"===this.direction&&(t=0),i=this.isLightDOM&&this.isLightDOMMode(e)||this.isLightDOM&&this.ifLeftDOMModeAtEnd(e)?this.getPositionWithoutCorrection(this.initialPositionX)-((e-this.counter)*this.fullCellWidth-t):-(e*this.fullCellWidth-t),i=this.provideSafePosition(i),i}provideSafePosition(e){const t=this.container.getEndPosition();return"left"===this.direction&&e>0&&(e=0),"right"===this.direction&&e<t&&(e=t),e}getPositionWithoutCorrection(e){let t=Math.round(e)%this.fullCellWidth;return 0!==t?e-(this.fullCellWidth+t):e}isNextArrowDisabled(){return this.isLastSlide(this.counter)||!this.visibleCellsOverflowContainer&&this.cellLength<=this.numberOfVisibleCells||this.visibleCellsOverflowContainer&&this.cellLength<this.numberOfVisibleCells}isPrevArrowDisabled(){return 0===this.counter}alignContainerFast(){if(this.isLightDOMMode(this.counter))this.container.transformPositionX(this.fixedContainerPosition,0),this.cells.setCounter(this.counter),this.cells.lineUp();else if(this.ifLeftDOMModeToBeginning(this.counter))this.cells.ifSequenceOfCellsIsChanged()&&(this.container.transformPositionX(-this.counter*this.fullCellWidth,0),this.cells.setCounter(this.counter),this.cells.lineUp());else if(this.ifLeftDOMModeAtEnd(this.counter)){let e=this.container.getCurrentPositionX(),t=this.container.getWidth();if(this.isLastSlide(this.counter)&&t+e>=this.visibleWidth)return;let i=this.getPositionCorrection(this.counter);0!==i&&(i+=this.fullCellWidth),"right"===this.direction&&(i=0),this.container.transformPositionX(this.fixedContainerPosition+i,0),this.cells.setCounter(this.counter),this.cells.lineUp()}}isLightDOMMode(e){let t,i=this.images.length-this.overflowCellsLimit-this.numberOfVisibleCells;return!!this.isLightDOM&&(e>this.overflowCellsLimit&&"left"===this.direction&&e<=i&&(t=!0),e>=this.overflowCellsLimit&&"right"===this.direction&&e<i&&(t=!0),this.counter>this.overflowCellsLimit&&"left"===this.direction&&this.counter<=i&&(t=!0),this.counter>=this.overflowCellsLimit&&"right"===this.direction&&this.counter<i&&(t=!0),t)}ifLeftDOMModeAtEnd(e){let t,i=this.images.length-this.overflowCellsLimit-this.numberOfVisibleCells;return e>=i&&(t=!0),this.counter>=i&&(t=!0),t}ifLeftDOMModeToBeginning(e){let t;return e<=this.overflowCellsLimit&&(t=!0),this.counter<=this.overflowCellsLimit&&(t=!0),t}setVisibleWidth(){this.visibleWidth=this.carouselProperties.visibleWidth||this.carouselProperties.hostElement.clientWidth}}class T3e{constructor(e){this.carouselProperties=e}get images(){return this.carouselProperties.images}get margin(){return this.carouselProperties.margin}get overflowCellsLimit(){if(this.images&&this.isImagesLessCellLimit){let e=Math.floor((this.images.length-this.numberOfVisibleCells)/2);return e<0&&(e=0),e}return this.carouselProperties.overflowCellsLimit}get isImagesLessCellLimit(){return 2*this.carouselProperties.overflowCellsLimit+this.numberOfVisibleCells>this.images.length}get numberOfVisibleCells(){return Math.ceil(this.visibleWidth/this.fullCellWidth)}get visibleCellsOverflowContainer(){return this.numberOfVisibleCells*this.fullCellWidth-this.margin>this.visibleWidth}get fullCellWidth(){return this.carouselProperties.cellWidth+this.carouselProperties.margin}get visibleWidth(){return this.carouselProperties.visibleWidth||this.carouselProperties.cellsElement.parentElement.clientWidth}updateProperties(e){this.carouselProperties=e}getStartX(e){const t=e.touches,i=this.getCarouselElementPosition().left;let s;return s=t?t[0].clientX-i:e.clientX-i,s}getMoveX(e){const t=e.touches,i=this.getCarouselElementPosition().left;return t?t[0].clientX-i:e.clientX-i}getCarouselElementPosition(){return this.carouselProperties.hostElement.getBoundingClientRect()}}let D3e=(()=>{class n{constructor(t,i){this.elementRef=t,this.ref=i,this.minTimeout=30,this.isVideoPlaying=!1,this._isCounter=!1,this._cellWidth=200,this._loop=!1,this._lightDOM=!1,this.isMoving=!1,this.isNgContent=!1,this.events=new d.vpe,this.height=200,this.autoplay=!1,this.autoplayInterval=5e3,this.pauseOnHover=!0,this.dots=!1,this.margin=10,this.objectFit="cover",this.minSwipeDistance=10,this.transitionDuration=200,this.transitionTimingFunction="ease-out",this.counterSeparator=" / ",this.overflowCellsLimit=3,this.listeners="mouse and touch",this.cellsToScroll=1,this.freeScroll=!1,this.arrows=!0,this.arrowsOutside=!1,this.arrowsTheme="light",this.hostClassCarousel=!0,this.handleTouchstart=s=>{this.touches.addEventListeners("mousemove","handleMousemove"),this.carousel.handleTouchstart(s),this.isMoving=!0},this.handleHorizontalSwipe=s=>{s.preventDefault(),this.carousel.handleHorizontalSwipe(s)},this.handleTouchend=s=>{this.carousel.handleTouchend(s),this.touches.removeEventListeners("mousemove","handleMousemove"),this.isMoving=!1},this.handleTap=s=>{let o=Array.prototype.slice.call(this.cellsElement.children),a=s.srcElement.closest(".carousel-cell");o.indexOf(a),o.indexOf(a)}}get isContainerLocked(){if(this.carousel)return this.carousel.isContainerLocked}get slideCounter(){if(this.carousel)return this.carousel.slideCounter}get lapCounter(){if(this.carousel)return this.carousel.lapCounter}get isLandscape(){return window.innerWidth>window.innerHeight}get isSafari(){const t=navigator.userAgent.toLowerCase();if(-1!==t.indexOf("safari"))return!(t.indexOf("chrome")>-1)}get counter(){let t;return t=this.loop?this.slideCounter%this.cellLength:this.slideCounter,t+1+this.counterSeparator+this.cellLength}get cellsElement(){return this.elementRef.nativeElement.querySelector(".carousel-cells")}get isArrows(){return this.arrows&&!this.freeScroll}get isCounter(){return this._isCounter&&this.cellLength>1}get activeDotIndex(){return this.slideCounter%this.cellLength}get cellLimit(){if(this.carousel)return this.carousel.cellLimit}get carouselWidth(){return this.elementRef.nativeElement.clientWidth}set images(t){this._images=t}get images(){return this._images}set cellWidth(t){t&&(this._cellWidth=t)}set isCounter(t){t&&(this._isCounter=t)}set loop(t){t&&(this._loop=t)}get loop(){return!!this.images&&this._loop}set lightDOM(t){t&&(this._lightDOM=t)}get lightDOM(){return!!this.images&&this._lightDOM}onWindowResize(t){this.utils.visibleWidth!==this.savedCarouselWidth&&this.resize()}onMousemove(t){this.autoplay&&this.pauseOnHover&&this.carousel.stopAutoplay()}onMouseleave(t){this.autoplay&&this.pauseOnHover&&this.carousel.autoplay()}ngOnInit(){this.isNgContent=this.cellsElement.children.length>0,this.touches=new w3e({element:this.cellsElement,listeners:this.listeners,mouseListeners:{mousedown:"handleMousedown",mouseup:"handleMouseup"}}),this.touches.on("touchstart",this.handleTouchstart),this.touches.on("horizontal-swipe",this.handleHorizontalSwipe),this.touches.on("touchend",this.handleTouchend),this.touches.on("mousedown",this.handleTouchstart),this.touches.on("mouseup",this.handleTouchend),this.touches.on("tap",this.handleTap),this.setDimensions()}ngAfterViewInit(){this.initCarousel(),this.cellLength=this.getCellLength(),this.dotsArr=Array(this.cellLength).fill(1),this.ref.detectChanges(),this.carousel.lineUpCells(),this.savedCarouselWidth=this.carouselWidth,this.detectDomChanges()}ngOnChanges(t){(t.width||t.height||t.images)&&(this.setDimensions(),this.initCarousel(),this.carousel.lineUpCells(),this.ref.detectChanges())}ngOnDestroy(){this.touches.destroy()}initCarousel(){this.carouselProperties={id:this.id,cellsElement:this.elementRef.nativeElement.querySelector(".carousel-cells"),hostElement:this.elementRef.nativeElement,images:this.images,cellWidth:this.getCellWidth(),loop:this.loop,autoplayInterval:this.autoplayInterval,overflowCellsLimit:this.overflowCellsLimit,visibleWidth:this.width,margin:this.margin,minSwipeDistance:this.minSwipeDistance,transitionDuration:this.transitionDuration,transitionTimingFunction:this.transitionTimingFunction,videoProperties:this.videoProperties,eventHandler:this.events,freeScroll:this.freeScroll,lightDOM:this.lightDOM},this.utils=new T3e(this.carouselProperties),this.cells=new _3e(this.carouselProperties,this.utils),this.container=new x3e(this.carouselProperties,this.utils,this.cells),this.slide=new I3e(this.carouselProperties,this.utils,this.cells,this.container),this.carousel=new S3e(this.carouselProperties,this.utils,this.cells,this.container,this.slide),this.autoplay&&this.carousel.autoplay()}resize(){this.landscapeMode=this.isLandscape,this.savedCarouselWidth=this.carouselWidth,this.carouselProperties.cellWidth=this.getCellWidth(),this.cells.updateProperties(this.carouselProperties),this.carousel.updateProperties(this.carouselProperties),this.container.updateProperties(this.carouselProperties),this.slide.updateProperties(this.carouselProperties),this.utils.updateProperties(this.carouselProperties),this.carousel.lineUpCells(),this.slide.select(0),this.ref.detectChanges()}detectDomChanges(){new MutationObserver(s=>{this.onDomChanges()}).observe(this.cellsElement,{attributes:!0,childList:!0,characterData:!0})}onDomChanges(){this.cellLength=this.getCellLength(),this.carousel.lineUpCells(),this.ref.detectChanges()}setDimensions(){this.hostStyleHeight=this.height+"px",this.hostStyleWidth=this.width+"px"}getImage(t){return this.carousel.getImage(t)}handleTransitionendCellContainer(t){"carousel-cells"===t.target.className&&this.carousel.handleTransitionend()}getCellWidth(){let t=this.carouselWidth;return this.cellsToShow?(t-(this.cellsToShow>1?this.margin:0)*(this.cellsToShow-1))/this.cellsToShow:"100%"===this._cellWidth?t:this._cellWidth}next(){this.carousel.next(this.cellsToScroll),this.carousel.stopAutoplay()}prev(){this.carousel.prev(this.cellsToScroll),this.carousel.stopAutoplay()}isNextArrowDisabled(){if(this.carousel)return this.carousel.isNextArrowDisabled()}isPrevArrowDisabled(){if(this.carousel)return this.carousel.isPrevArrowDisabled()}getCellLength(){return this.images?this.images.length:this.cellsElement.children.length}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["carousel"],["","carousel",""]],hostVars:6,hostBindings:function(t,i){1&t&&d.NdJ("resize",function(r){return i.onWindowResize(r)},!1,d.Jf7)("mousemove",function(r){return i.onMousemove(r)})("mouseleave",function(r){return i.onMouseleave(r)}),2&t&&(d.Udp("height",i.hostStyleHeight)("width",i.hostStyleWidth),d.ekj("carousel",i.hostClassCarousel))},inputs:{height:"height",autoplay:"autoplay",autoplayInterval:"autoplayInterval",pauseOnHover:"pauseOnHover",dots:"dots",margin:"margin",objectFit:"objectFit",minSwipeDistance:"minSwipeDistance",transitionDuration:"transitionDuration",transitionTimingFunction:"transitionTimingFunction",counterSeparator:"counterSeparator",overflowCellsLimit:"overflowCellsLimit",listeners:"listeners",cellsToScroll:"cellsToScroll",freeScroll:"freeScroll",arrows:"arrows",arrowsOutside:"arrowsOutside",arrowsTheme:"arrowsTheme",isCounter:["counter","isCounter"],images:"images",cellWidth:"cellWidth",loop:"loop",lightDOM:"lightDOM",id:"id",width:"width",borderRadius:"borderRadius",videoProperties:"videoProperties",cellsToShow:"cellsToShow"},outputs:{events:"events"},features:[d.TTD],ngContentSelectors:C3e,decls:8,vars:6,consts:[["class","carousel-counter",4,"ngIf"],[1,"carousel-container"],[1,"carousel-cells",3,"transitionend"],["cells",""],["ngFor","",3,"ngForOf"],["class","carousel-dots",4,"ngIf"],["class","carousel-arrows",3,"carousel-arrows-outside","carousel-dark-arrows",4,"ngIf"],[1,"carousel-counter"],["class","carousel-cell",3,"width","border-radius",4,"ngIf"],[1,"carousel-cell"],["draggable","false",3,"src","object-fit",4,"ngIf"],["draggable","false",3,"src"],[1,"carousel-dots"],["class","carousel-dot",3,"carousel-dot-active",4,"ngFor","ngForOf"],[1,"carousel-dot"],[1,"carousel-arrows"],[1,"carousel-arrow","carousel-arrow-prev",3,"click"],[1,"carousel-arrow","carousel-arrow-next",3,"click"]],template:function(t,i){1&t&&(d.F$t(),d.YNc(0,p3e,2,1,"div",0),d.TgZ(1,"div",1)(2,"div",2,3),d.NdJ("transitionend",function(r){return i.handleTransitionendCellContainer(r)}),d.Hsn(4),d.YNc(5,g3e,1,1,"ng-template",4),d.qZA(),d.YNc(6,y3e,2,1,"div",5),d.qZA(),d.YNc(7,v3e,3,8,"div",6)),2&t&&(d.Q6J("ngIf",i.isCounter),d.xp6(1),d.ekj("carousel-moving",i.isMoving),d.xp6(4),d.Q6J("ngForOf",i.images),d.xp6(1),d.Q6J("ngIf",i.dots),d.xp6(1),d.Q6J("ngIf",i.isArrows))},directives:[Ar,vr],styles:["[_nghost-%COMP%]{position:relative;display:block;top:0;left:0;width:100%;height:100%;-webkit-user-select:none;user-select:none;z-index:10000;transform-origin:top left;box-sizing:border-box}[_nghost-%COMP%]   .carousel-container[_ngcontent-%COMP%]{overflow:hidden;width:100%;height:100%;cursor:grab}[_nghost-%COMP%]   .carousel-container.carousel-moving[_ngcontent-%COMP%]{cursor:grabbing}[_nghost-%COMP%]   .carousel-counter[_ngcontent-%COMP%]{text-align:right;position:absolute;z-index:30;transition:opacity .2s;top:8px;right:24px;border-radius:13px;background-color:rgba(23,37,68,.3);font-size:11px;color:#fff;padding:5px 7px;line-height:normal}[_nghost-%COMP%]     .carousel-cells{transition:transform .2s;width:100%;height:100%;display:block;will-change:transform}[_nghost-%COMP%]     .carousel-cells .carousel-cell.swiper-prev-image{transform:translate3d(-100%,0,0)}[_nghost-%COMP%]     .carousel-cells .carousel-cell.swiper-next-image{transform:translate3d(100%,0,0)}[_nghost-%COMP%]     .carousel-cells .carousel-cell{width:100%;height:100%;position:absolute;overflow:hidden}[_nghost-%COMP%]     .carousel-cells .carousel-cell img, [_nghost-%COMP%]     .carousel-cells .carousel-cell video{width:100%;height:100%;position:relative;object-fit:contain}[_nghost-%COMP%]     .carousel-cells .carousel-cell img.swiper-hide{display:none}[_nghost-%COMP%]     .carousel-cells .carousel-cell .carousel-play{position:absolute;top:0;left:0;bottom:0;right:0;z-index:1}[_nghost-%COMP%]   .carousel-arrow[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#fff;background-repeat:no-repeat;background-size:31px;background-position:50%;border-radius:100px;position:absolute;top:50%;margin-top:-20px;z-index:10;cursor:pointer;box-shadow:0 0 5px rgba(0,0,0,.15)}[_nghost-%COMP%]   .carousel-arrow-prev[_ngcontent-%COMP%]{left:10px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0Ij48cGF0aCBkPSJNMTUuNDEgMTYuNTlMMTAuODMgMTJsNC41OC00LjU5TDE0IDZsLTYgNiA2IDYgMS40MS0xLjQxeiIvPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMFYweiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==)}[_nghost-%COMP%]   .carousel-arrow-next[_ngcontent-%COMP%]{right:10px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0Ij48cGF0aCBkPSJNOC41OSAxNi41OUwxMy4xNyAxMiA4LjU5IDcuNDEgMTAgNmw2IDYtNiA2LTEuNDEtMS40MXoiLz48cGF0aCBkPSJNMCAwaDI0djI0SDBWMHoiIGZpbGw9Im5vbmUiLz48L3N2Zz4=)}[_nghost-%COMP%]   .carousel-arrows-outside[_ngcontent-%COMP%]   .carousel-arrow-prev[_ngcontent-%COMP%]{left:-60px}[_nghost-%COMP%]   .carousel-arrows-outside[_ngcontent-%COMP%]   .carousel-arrow-next[_ngcontent-%COMP%]{right:-60px}[_nghost-%COMP%]   .carousel-dark-arrows[_ngcontent-%COMP%]   .carousel-arrow[_ngcontent-%COMP%]{filter:invert(1)}[_nghost-%COMP%]   .carousel-arrow-disabled[_ngcontent-%COMP%]{cursor:default;opacity:.5}[_nghost-%COMP%]   .carousel-dots[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;z-index:10;text-align:center}[_nghost-%COMP%]   .carousel-dots[_ngcontent-%COMP%]   .carousel-dot[_ngcontent-%COMP%]{display:inline-block;border:2px solid #fff;border-radius:100px;margin:4px;width:8px;height:8px}[_nghost-%COMP%]   .carousel-dots[_ngcontent-%COMP%]   .carousel-dot-active[_ngcontent-%COMP%]{background-color:#fff}"]}),n})(),k3e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[],imports:[[Lo]]}),n})();class eye{}const YC="*";function vJ(n,e){return{type:7,name:n,definitions:e,options:{}}}function CJ(n,e=null){return{type:4,styles:e,timings:n}}function tye(n,e=null){return{type:2,steps:n,options:e}}function FS(n){return{type:6,styles:n,offset:null}}function DU(n,e,t){return{type:0,name:n,styles:e,options:t}}function kU(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function A3e(n=null){return{type:9,options:n}}function L3e(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function iye(n){Promise.resolve(null).then(n)}class NN{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){iye(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class sye{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,s=0;const r=this.players.length;0==r?iye(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==r&&this._onFinish()}),o.onDestroy(()=>{++i==r&&this._onDestroy()}),o.onStart(()=>{++s==r&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const s=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(s)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Pn=!1;function nye(n){return new d.vHH(3e3,Pn)}function p6e(){return"undefined"!=typeof window&&void 0!==window.document}function SJ(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function NS(n){switch(n.length){case 0:return new NN;case 1:return n[0];default:return new sye(n)}}function rye(n,e,t,i,s={},r={}){const o=[],a=[];let l=-1,h=null;if(i.forEach(c=>{const m=c.offset,b=m==l,v=b&&h||{};Object.keys(c).forEach(w=>{let E=w,D=c[w];if("offset"!==w)switch(E=e.normalizePropertyName(E,o),D){case"!":D=s[w];break;case YC:D=r[w];break;default:D=e.normalizeStyleValue(w,E,D,o)}v[E]=D}),b||a.push(v),h=v,l=m}),o.length)throw function i6e(n){return new d.vHH(3502,Pn)}();return a}function xJ(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&EJ(t,"start",n)));break;case"done":n.onDone(()=>i(t&&EJ(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&EJ(t,"destroy",n)))}}function EJ(n,e,t){const i=t.totalTime,r=_J(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),o=n._data;return null!=o&&(r._data=o),r}function _J(n,e,t,i,s="",r=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:s,totalTime:r,disabled:!!o}}function Up(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function oye(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let IJ=(n,e)=>!1,aye=(n,e,t)=>[];(SJ()||"undefined"!=typeof Element)&&(IJ=p6e()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),aye=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let mI=null,lye=!1;function hye(n){mI||(mI=function m6e(){return"undefined"!=typeof document?document.body:null}()||{},lye=!!mI.style&&"WebkitAppearance"in mI.style);let e=!0;return mI.style&&!function f6e(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in mI.style,!e&&lye&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in mI.style)),e}const cye=IJ,dye=aye;let uye=(()=>{class n{validateStyleProperty(t){return hye(t)}matchesElement(t,i){return!1}containsElement(t,i){return cye(t,i)}query(t,i,s){return dye(t,i,s)}computeStyle(t,i,s){return s||""}animate(t,i,s,r,o,a=[],l){return new NN(s,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),TJ=(()=>{class n{}return n.NOOP=new uye,n})();const DJ="ng-enter",AU="ng-leave",LU="ng-trigger",MU=".ng-trigger",fye="ng-animating",kJ=".ng-animating";function gI(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:RJ(parseFloat(e[1]),e[2])}function RJ(n,e){return"s"===e?1e3*n:n}function OU(n,e,t){return n.hasOwnProperty("duration")?n:function y6e(n,e,t){let s,r=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(nye()),{duration:0,delay:0,easing:""};s=RJ(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(r=RJ(parseFloat(l),a[4]));const h=a[5];h&&(o=h)}else s=n;if(!t){let a=!1,l=e.length;s<0&&(e.push(function M3e(){return new d.vHH(3100,Pn)}()),a=!0),r<0&&(e.push(function O3e(){return new d.vHH(3101,Pn)}()),a=!0),a&&e.splice(l,0,nye())}return{duration:s,delay:r,easing:o}}(n,e,t)}function gR(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function BS(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else gR(n,t);return t}function gye(n,e,t){return t?e+":"+t+";":""}function bye(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=gye(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=gye(0,w6e(t),n.style[t]));n.setAttribute("style",e)}function Ly(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const s=LJ(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[s]),n.style[s]=e[i]}),SJ()&&bye(n))}function bI(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=LJ(t);n.style[i]=""}),SJ()&&bye(n))}function BN(n){return Array.isArray(n)?1==n.length?n[0]:tye(n):n}const AJ=new RegExp("{{\\s*(.+?)\\s*}}","g");function yye(n){let e=[];if("string"==typeof n){let t;for(;t=AJ.exec(n);)e.push(t[1]);AJ.lastIndex=0}return e}function PU(n,e,t){const i=n.toString(),s=i.replace(AJ,(r,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(function F3e(n){return new d.vHH(3003,Pn)}()),a=""),a.toString()});return s==i?n:s}function FU(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const C6e=/-+([a-z0-9])/g;function LJ(n){return n.replace(C6e,(...e)=>e[1].toUpperCase())}function w6e(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function qp(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function N3e(n){return new d.vHH(3004,Pn)}()}}function vye(n,e){return window.getComputedStyle(n)[e]}function E6e(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function _6e(n,e,t){if(":"==n[0]){const l=function I6e(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Q3e(n){return new d.vHH(3016,Pn)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function X3e(n){return new d.vHH(3015,Pn)}()),e;const s=i[1],r=i[2],o=i[3];e.push(Cye(s,o));"<"==r[0]&&!("*"==s&&"*"==o)&&e.push(Cye(o,s))}(i,t,e)):t.push(n),t}const BU=new Set(["true","1"]),HU=new Set(["false","0"]);function Cye(n,e){const t=BU.has(n)||HU.has(n),i=BU.has(e)||HU.has(e);return(s,r)=>{let o="*"==n||n==s,a="*"==e||e==r;return!o&&t&&"boolean"==typeof s&&(o=s?BU.has(n):HU.has(n)),!a&&i&&"boolean"==typeof r&&(a=r?BU.has(e):HU.has(e)),o&&a}}const T6e=new RegExp("s*:selfs*,?","g");function MJ(n,e,t){return new D6e(n).build(e,t)}class D6e{constructor(e){this._driver=e}build(e,t){const i=new A6e(t);return this._resetContextStyleTimingState(i),qp(this,BN(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,s=t.depCount=0;const r=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function H3e(){return new d.vHH(3006,Pn)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,h=l.name;h.toString().split(/\s*,\s*/).forEach(c=>{l.name=c,r.push(this.visitState(l,t))}),l.name=h}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,s+=l.depCount,o.push(l)}else t.errors.push(function V3e(){return new d.vHH(3007,Pn)}())}),{type:7,name:e.name,states:r,transitions:o,queryCount:i,depCount:s,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(i.containsDynamicStyles){const r=new Set,o=s||{};i.styles.forEach(a=>{if(VU(a)){const l=a;Object.keys(l).forEach(h=>{yye(l[h]).forEach(c=>{o.hasOwnProperty(c)||r.add(c)})})}}),r.size&&(FU(r.values()),t.errors.push(function z3e(n,e){return new d.vHH(3008,Pn)}()))}return{type:0,name:e.name,style:i,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=qp(this,BN(e.animation),t);return{type:1,matchers:E6e(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:yI(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>qp(this,i,t)),options:yI(e.options)}}visitGroup(e,t){const i=t.currentTime;let s=0;const r=e.steps.map(o=>{t.currentTime=i;const a=qp(this,o,t);return s=Math.max(s,t.currentTime),a});return t.currentTime=s,{type:3,steps:r,options:yI(e.options)}}visitAnimate(e,t){const i=function M6e(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return OJ(OU(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(r=>"{"==r.charAt(0)&&"{"==r.charAt(1))){const r=OJ(0,0,"");return r.dynamic=!0,r.strValue=i,r}return t=t||OU(i,e),OJ(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let s,r=e.styles?e.styles:FS({});if(5==r.type)s=this.visitKeyframes(r,t);else{let o=e.styles,a=!1;if(!o){a=!0;const h={};i.easing&&(h.easing=i.easing),o=FS(h)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,s=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:s,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==YC?i.push(o):t.errors.push(function j3e(n){return new d.vHH(3002,Pn)}()):i.push(o)}):i.push(e.styles);let s=!1,r=null;return i.forEach(o=>{if(VU(o)){const a=o,l=a.easing;if(l&&(r=l,delete a.easing),!s)for(let h in a)if(a[h].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:i,easing:r,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let s=t.currentTime,r=t.currentTime;i&&r>0&&(r-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void t.errors.push(function U3e(n){return new d.vHH(3009,Pn)}());const l=t.collectedStyles[t.currentQuerySelector],h=l[a];let c=!0;h&&(r!=s&&r>=h.startTime&&s<=h.endTime&&(t.errors.push(function q3e(n,e,t,i,s){return new d.vHH(3010,Pn)}()),c=!1),r=h.startTime),c&&(l[a]={startTime:r,endTime:s}),t.options&&function v6e(n,e,t){const i=e.params||{},s=yye(n);s.length&&s.forEach(r=>{i.hasOwnProperty(r)||t.push(function P3e(n){return new d.vHH(3001,Pn)}())})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function W3e(){return new d.vHH(3011,Pn)}()),i;let r=0;const o=[];let a=!1,l=!1,h=0;const c=e.steps.map(L=>{const N=this._makeStyleAst(L,t);let V=null!=N.offset?N.offset:function L6e(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(VU(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(VU(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(N.styles),$=0;return null!=V&&(r++,$=N.offset=V),l=l||$<0||$>1,a=a||$<h,h=$,o.push($),N});l&&t.errors.push(function G3e(){return new d.vHH(3012,Pn)}()),a&&t.errors.push(function $3e(){return new d.vHH(3200,Pn)}());const m=e.steps.length;let b=0;r>0&&r<m?t.errors.push(function K3e(){return new d.vHH(3202,Pn)}()):0==r&&(b=1/(m-1));const v=m-1,w=t.currentTime,E=t.currentAnimateTimings,D=E.duration;return c.forEach((L,N)=>{const V=b>0?N==v?1:b*N:o[N],$=V*D;t.currentTime=w+E.delay+$,E.duration=$,this._validateStyleAst(L,t),L.offset=V,i.styles.push(L)}),i}visitReference(e,t){return{type:8,animation:qp(this,BN(e.animation),t),options:yI(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:yI(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:yI(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[r,o]=function k6e(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(T6e,"")),n=n.replace(/@\*/g,MU).replace(/@\w+/g,t=>MU+"-"+t.substr(1)).replace(/:animating/g,kJ),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+r:r,Up(t.collectedStyles,t.currentQuerySelector,{});const a=qp(this,BN(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:r,limit:s.limit||0,optional:!!s.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:yI(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Y3e(){return new d.vHH(3013,Pn)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:OU(e.timings,t.errors,!0);return{type:12,animation:qp(this,BN(e.animation),t),timings:i,options:null}}}class A6e{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function VU(n){return!Array.isArray(n)&&"object"==typeof n}function yI(n){return n?(n=gR(n)).params&&(n.params=function R6e(n){return n?gR(n):null}(n.params)):n={},n}function OJ(n,e,t){return{duration:n,delay:e,easing:t}}function PJ(n,e,t,i,s,r,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:s,delay:r,totalTime:s+r,easing:o,subTimeline:a}}class zU{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const F6e=new RegExp(":enter","g"),B6e=new RegExp(":leave","g");function FJ(n,e,t,i,s,r={},o={},a,l,h=[]){return(new H6e).buildKeyframes(n,e,t,i,s,r,o,a,l,h)}class H6e{buildKeyframes(e,t,i,s,r,o,a,l,h,c=[]){h=h||new zU;const m=new NJ(e,t,h,s,r,c,[]);m.options=l,m.currentTimeline.setStyles([o],null,m.errors,l),qp(this,i,m);const b=m.timelines.filter(v=>v.containsAnimation());if(Object.keys(a).length){let v;for(let w=b.length-1;w>=0;w--){const E=b[w];if(E.element===t){v=E;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,m.errors,l)}return b.length?b.map(v=>v.buildKeyframes()):[PJ(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const s=t.createSubContext(e.options),r=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,s,s.options);r!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let r=t.currentTimeline.currentTime;const o=null!=i.duration?gI(i.duration):null,a=null!=i.delay?gI(i.delay):null;return 0!==o&&e.forEach(l=>{const h=t.appendInstructionToTimeline(l,o,a);r=Math.max(r,h.duration+h.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),qp(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let s=t;const r=e.options;if(r&&(r.params||r.delay)&&(s=t.createSubContext(r),s.transformIntoNewTimeline(),null!=r.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=jU);const o=gI(r.delay);s.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>qp(this,o,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>i&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let s=t.currentTimeline.currentTime;const r=e.options&&e.options.delay?gI(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);r&&a.delayNextStep(r),qp(this,o,a),s=Math.max(s,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return OU(t.params?PU(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),s.snapshotCurrentStyles());const r=e.style;5==r.type?this.visitKeyframes(r,t):(t.incrementTime(i.duration),this.visitStyle(r,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,s=t.currentAnimateTimings;!s&&i.getCurrentStyleProperties().length&&i.forwardFrame();const r=s&&s.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(r):i.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,s=t.currentTimeline.duration,r=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*r),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(s+r),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,s=e.options||{},r=s.delay?gI(s.delay):0;r&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=jU);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((h,c)=>{t.currentQueryIndex=c;const m=t.createSubContext(e.options,h);r&&m.delayNextStep(r),h===t.element&&(l=m.currentTimeline),qp(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,s=t.currentTimeline,r=e.timings,o=Math.abs(r.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const c=t.currentTimeline;l&&c.delayNextStep(l);const m=c.currentTime;qp(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=s.currentTime-m+(s.startTime-i.currentTimeline.startTime)}}const jU={};class NJ{constructor(e,t,i,s,r,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=s,this._leaveClassName=r,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=jU,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new UU(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let s=this.options;null!=i.duration&&(s.duration=gI(i.duration)),null!=i.delay&&(s.delay=gI(i.delay));const r=i.params;if(r){let o=s.params;o||(o=this.options.params={}),Object.keys(r).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=PU(r[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(s=>{i[s]=t[s]})}}return e}createSubContext(e=null,t,i){const s=t||this.element,r=new NJ(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,i||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(e),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(e){return this.previousNode=jU,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const s={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},r=new V6e(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(r),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,s,r,o){let a=[];if(s&&a.push(this.element),e.length>0){e=(e=e.replace(F6e,"."+this._enterClassName)).replace(B6e,"."+this._leaveClassName);let h=this._driver.query(this.element,e,1!=i);0!==i&&(h=i<0?h.slice(h.length+i,h.length):h.slice(0,i)),a.push(...h)}return!r&&0==a.length&&o.push(function Z3e(n){return new d.vHH(3014,Pn)}()),a}}class UU{constructor(e,t,i,s){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new UU(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||YC,this._currentKeyframe[t]=YC}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,s){t&&(this._previousKeyframe.easing=t);const r=s&&s.params||{},o=function z6e(n,e){const t={};let i;return n.forEach(s=>{"*"===s?(i=i||Object.keys(e),i.forEach(r=>{t[r]=YC})):BS(s,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=PU(o[a],r,i);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:YC),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],s=e._styleSummary[t];(!i||s.time>i.time)&&this._updateStyle(t,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((a,l)=>{const h=BS(a,!0);Object.keys(h).forEach(c=>{const m=h[c];"!"==m?e.add(c):m==YC&&t.add(c)}),i||(h.offset=l/this.duration),s.push(h)});const r=e.size?FU(e.values()):[],o=t.size?FU(t.values()):[];if(i){const a=s[0],l=gR(a);a.offset=0,l.offset=1,s=[a,l]}return PJ(this.element,s,r,o,this.duration,this.startTime,this.easing,!1)}}class V6e extends UU{constructor(e,t,i,s,r,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=s,this.postStyleProps=r,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const r=[],o=i+t,a=t/o,l=BS(e[0],!1);l.offset=0,r.push(l);const h=BS(e[0],!1);h.offset=xye(a),r.push(h);const c=e.length-1;for(let m=1;m<=c;m++){let b=BS(e[m],!1);b.offset=xye((t+b.offset*i)/o),r.push(b)}i=o,t=0,s="",e=r}return PJ(this.element,e,this.preStyleProps,this.postStyleProps,i,t,s,!0)}}function xye(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class BJ{}class j6e extends BJ{normalizePropertyName(e,t){return LJ(e)}normalizeStyleValue(e,t,i,s){let r="";const o=i.toString().trim();if(U6e[t]&&0!==i&&"0"!==i)if("number"==typeof i)r="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&s.push(function B3e(n,e){return new d.vHH(3005,Pn)}())}return o+r}}const U6e=(()=>function q6e(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Eye(n,e,t,i,s,r,o,a,l,h,c,m,b){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:r,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:h,postStyleProps:c,totalTime:m,errors:b}}const HJ={};class _ye{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,s){return function W6e(n,e,t,i,s){return n.some(r=>r(e,t,i,s))}(this.ast.matchers,e,t,i,s)}buildStyles(e,t,i){const s=this._stateStyles["*"],r=this._stateStyles[e],o=s?s.buildStyles(t,i):{};return r?r.buildStyles(t,i):o}build(e,t,i,s,r,o,a,l,h,c){const m=[],b=this.ast.options&&this.ast.options.params||HJ,w=this.buildStyles(i,a&&a.params||HJ,m),E=l&&l.params||HJ,D=this.buildStyles(s,E,m),L=new Set,N=new Map,V=new Map,$="void"===s,ie={params:Object.assign(Object.assign({},b),E)},Q=c?[]:FJ(e,t,this.ast.animation,r,o,w,D,ie,h,m);let le=0;if(Q.forEach(Ye=>{le=Math.max(Ye.duration+Ye.delay,le)}),m.length)return Eye(t,this._triggerName,i,s,$,w,D,[],[],N,V,le,m);Q.forEach(Ye=>{const Nt=Ye.element,Le=Up(N,Nt,{});Ye.preStyleProps.forEach(We=>Le[We]=!0);const nt=Up(V,Nt,{});Ye.postStyleProps.forEach(We=>nt[We]=!0),Nt!==t&&L.add(Nt)});const ke=FU(L.values());return Eye(t,this._triggerName,i,s,$,w,D,Q,ke,N,V,le)}}class G6e{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},s=gR(this.defaultParams);return Object.keys(e).forEach(r=>{const o=e[r];null!=o&&(s[r]=o)}),this.styles.styles.forEach(r=>{if("string"!=typeof r){const o=r;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=PU(l,s,t));const h=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,h,l,t),i[h]=l})}}),i}}class K6e{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(s=>{this.states[s.name]=new G6e(s.style,s.options&&s.options.params||{},i)}),Iye(this.states,"true","1"),Iye(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new _ye(e,s,this.states))}),this.fallbackTransition=function Y6e(n,e,t){return new _ye(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,s){return this.transitionFactories.find(o=>o.match(e,t,i,s))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function Iye(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Z6e=new zU;class X6e{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],s=MJ(this._driver,t,i);if(i.length)throw function s6e(n){return new d.vHH(3503,Pn)}();this._animations[e]=s}_buildPlayer(e,t,i){const s=e.element,r=rye(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(s,r,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const s=[],r=this._animations[e];let o;const a=new Map;if(r?(o=FJ(this._driver,t,r,DJ,AU,{},{},i,Z6e,s),o.forEach(c=>{const m=Up(a,c.element,{});c.postStyleProps.forEach(b=>m[b]=null)})):(s.push(function n6e(){return new d.vHH(3300,Pn)}()),o=[]),s.length)throw function r6e(n){return new d.vHH(3504,Pn)}();a.forEach((c,m)=>{Object.keys(c).forEach(b=>{c[b]=this._driver.computeStyle(m,b,YC)})});const h=NS(o.map(c=>{const m=a.get(c.element);return this._buildPlayer(c,{},m)}));return this._playersById[e]=h,h.onDestroy(()=>this.destroy(e)),this.players.push(h),h}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function o6e(n){return new d.vHH(3301,Pn)}();return t}listen(e,t,i,s){const r=_J(t,"","","");return xJ(this._getPlayer(e),i,r,s),()=>{}}command(e,t,i,s){if("register"==i)return void this.register(e,s[0]);if("create"==i)return void this.create(e,t,s[0]||{});const r=this._getPlayer(e);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const Tye="ng-animate-queued",VJ="ng-animate-disabled",iUe=[],Dye={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},sUe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Jf="__ng_removed";class zJ{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function aUe(n){return null!=n?n:null}(i?e.value:e),i){const r=gR(e);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(s=>{null==i[s]&&(i[s]=t[s])})}}}const HN="void",jJ=new zJ(HN);class nUe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,em(t,this._hostClassName)}listen(e,t,i,s){if(!this._triggers.hasOwnProperty(t))throw function a6e(n,e){return new d.vHH(3302,Pn)}();if(null==i||0==i.length)throw function l6e(n){return new d.vHH(3303,Pn)}();if(!function lUe(n){return"start"==n||"done"==n}(i))throw function h6e(n,e){return new d.vHH(3400,Pn)}();const r=Up(this._elementListeners,e,[]),o={name:t,phase:i,callback:s};r.push(o);const a=Up(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(em(e,LU),em(e,LU+"-"+t),a[t]=jJ),()=>{this._engine.afterFlush(()=>{const l=r.indexOf(o);l>=0&&r.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function c6e(n){return new d.vHH(3401,Pn)}();return t}trigger(e,t,i,s=!0){const r=this._getTrigger(t),o=new UJ(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(em(e,LU),em(e,LU+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const h=new zJ(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&h.absorbOptions(l.options),a[t]=h,l||(l=jJ),h.value!==HN&&l.value===h.value){if(!function dUe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s=0;s<t.length;s++){const r=t[s];if(!e.hasOwnProperty(r)||n[r]!==e[r])return!1}return!0}(l.params,h.params)){const E=[],D=r.matchStyles(l.value,l.params,E),L=r.matchStyles(h.value,h.params,E);E.length?this._engine.reportError(E):this._engine.afterFlush(()=>{bI(e,D),Ly(e,L)})}return}const b=Up(this._engine.playersByElement,e,[]);b.forEach(E=>{E.namespaceId==this.id&&E.triggerName==t&&E.queued&&E.destroy()});let v=r.matchTransition(l.value,h.value,e,h.params),w=!1;if(!v){if(!s)return;v=r.fallbackTransition,w=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:v,fromState:l,toState:h,player:o,isFallbackTransition:w}),w||(em(e,Tye),o.onStart(()=>{bR(e,Tye)})),o.onDone(()=>{let E=this.players.indexOf(o);E>=0&&this.players.splice(E,1);const D=this._engine.playersByElement.get(e);if(D){let L=D.indexOf(o);L>=0&&D.splice(L,1)}}),this.players.push(o),b.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,MU,!0);i.forEach(s=>{if(s[Jf])return;const r=this._engine.fetchNamespacesByElement(s);r.size?r.forEach(o=>o.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,i,s){const r=this._engine.statesByElement.get(e),o=new Map;if(r){const a=[];if(Object.keys(r).forEach(l=>{if(o.set(l,r[l].value),this._triggers[l]){const h=this.trigger(e,l,HN,s);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&NS(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const s=new Set;t.forEach(r=>{const o=r.name;if(s.has(o))return;s.add(o);const l=this._triggers[o].fallbackTransition,h=i[o]||jJ,c=new zJ(HN),m=new UJ(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:h,toState:c,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(i.totalAnimations){const r=i.players.length?i.playersByQueriedElement.get(e):[];if(r&&r.length)s=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)i.markElementAsRemoved(this.id,e,!1,t);else{const r=e[Jf];(!r||r===Dye)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){em(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const s=i.player;if(s.destroyed)return;const r=i.element,o=this._elementListeners.get(r);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=_J(r,i.triggerName,i.fromState.value,i.toState.value);l._data=e,xJ(i.player,a.phase,l,a.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(i)}),this._queue=[],t.sort((i,s)=>{const r=i.transition.ast.depCount,o=s.transition.ast.depCount;return 0==r||0==o?r-o:this._engine.driver.containsElement(i.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class rUe{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,r)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new nUe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList.length-1;if(i>=0){let s=!1;for(let r=i;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,t)){this._namespaceList.splice(r+1,0,e),s=!0;break}s||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let s=this._namespaceLookup[e];s&&s.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(i);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const s=Object.keys(i);for(let r=0;r<s.length;r++){const o=i[s[r]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,i,s){if(qU(t)){const r=this._fetchNamespace(e);if(r)return r.trigger(t,i,s),!0}return!1}insertNode(e,t,i,s){if(!qU(t))return;const r=t[Jf];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),em(e,VJ)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),bR(e,VJ))}removeNode(e,t,i,s){if(qU(t)){const r=e?this._fetchNamespace(e):null;if(r?r.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,i,s,r){this.collectedLeaveElements.push(t),t[Jf]={namespaceId:e,setForRemoval:s,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:r}}listen(e,t,i,s,r){return qU(t)?this._fetchNamespace(e).listen(t,i,s,r):()=>{}}_buildInstruction(e,t,i,s,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,s,e.fromState.options,e.toState.options,t,r)}destroyInnerAnimations(e){let t=this.driver.query(e,MU,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,kJ,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return NS(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[Jf];if(i&&i.setForRemoval){if(e[Jf]=Dye,i.namespaceId){this.destroyInnerAnimations(e);const s=this._fetchNamespace(i.namespaceId);s&&s.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(VJ))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,s)=>this._balanceNamespaceList(i,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)em(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let s=0;s<i.length;s++)i[s]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?NS(t).onDone(()=>{i.forEach(s=>s())}):i.forEach(s=>s())}}reportError(e){throw function d6e(n){return new d.vHH(3402,Pn)}()}_flushAnimations(e,t){const i=new zU,s=[],r=new Map,o=[],a=new Map,l=new Map,h=new Map,c=new Set;this.disabledNodes.forEach(ue=>{c.add(ue);const ae=this.driver.query(ue,".ng-animate-queued",!0);for(let ge=0;ge<ae.length;ge++)c.add(ae[ge])});const m=this.bodyNode,b=Array.from(this.statesByElement.keys()),v=Aye(b,this.collectedEnterElements),w=new Map;let E=0;v.forEach((ue,ae)=>{const ge=DJ+E++;w.set(ae,ge),ue.forEach(Ve=>em(Ve,ge))});const D=[],L=new Set,N=new Set;for(let ue=0;ue<this.collectedLeaveElements.length;ue++){const ae=this.collectedLeaveElements[ue],ge=ae[Jf];ge&&ge.setForRemoval&&(D.push(ae),L.add(ae),ge.hasAnimation?this.driver.query(ae,".ng-star-inserted",!0).forEach(Ve=>L.add(Ve)):N.add(ae))}const V=new Map,$=Aye(b,Array.from(L));$.forEach((ue,ae)=>{const ge=AU+E++;V.set(ae,ge),ue.forEach(Ve=>em(Ve,ge))}),e.push(()=>{v.forEach((ue,ae)=>{const ge=w.get(ae);ue.forEach(Ve=>bR(Ve,ge))}),$.forEach((ue,ae)=>{const ge=V.get(ae);ue.forEach(Ve=>bR(Ve,ge))}),D.forEach(ue=>{this.processLeaveNode(ue)})});const ie=[],Q=[];for(let ue=this._namespaceList.length-1;ue>=0;ue--)this._namespaceList[ue].drainQueuedTransitions(t).forEach(ge=>{const Ve=ge.player,yt=ge.element;if(ie.push(Ve),this.collectedEnterElements.length){const ce=yt[Jf];if(ce&&ce.setForMove){if(ce.previousTriggersValues&&ce.previousTriggersValues.has(ge.triggerName)){const Ee=ce.previousTriggersValues.get(ge.triggerName),wt=this.statesByElement.get(ge.element);wt&&wt[ge.triggerName]&&(wt[ge.triggerName].value=Ee)}return void Ve.destroy()}}const bi=!m||!this.driver.containsElement(m,yt),ci=V.get(yt),ss=w.get(yt),Ei=this._buildInstruction(ge,i,ss,ci,bi);if(Ei.errors&&Ei.errors.length)return void Q.push(Ei);if(bi)return Ve.onStart(()=>bI(yt,Ei.fromStyles)),Ve.onDestroy(()=>Ly(yt,Ei.toStyles)),void s.push(Ve);if(ge.isFallbackTransition)return Ve.onStart(()=>bI(yt,Ei.fromStyles)),Ve.onDestroy(()=>Ly(yt,Ei.toStyles)),void s.push(Ve);const ts=[];Ei.timelines.forEach(ce=>{ce.stretchStartingKeyframe=!0,this.disabledNodes.has(ce.element)||ts.push(ce)}),Ei.timelines=ts,i.append(yt,Ei.timelines),o.push({instruction:Ei,player:Ve,element:yt}),Ei.queriedElements.forEach(ce=>Up(a,ce,[]).push(Ve)),Ei.preStyleProps.forEach((ce,Ee)=>{const wt=Object.keys(ce);if(wt.length){let Qt=l.get(Ee);Qt||l.set(Ee,Qt=new Set),wt.forEach(Ds=>Qt.add(Ds))}}),Ei.postStyleProps.forEach((ce,Ee)=>{const wt=Object.keys(ce);let Qt=h.get(Ee);Qt||h.set(Ee,Qt=new Set),wt.forEach(Ds=>Qt.add(Ds))})});if(Q.length){const ue=[];Q.forEach(ae=>{ue.push(function u6e(n,e){return new d.vHH(3505,Pn)}())}),ie.forEach(ae=>ae.destroy()),this.reportError(ue)}const le=new Map,ke=new Map;o.forEach(ue=>{const ae=ue.element;i.has(ae)&&(ke.set(ae,ae),this._beforeAnimationBuild(ue.player.namespaceId,ue.instruction,le))}),s.forEach(ue=>{const ae=ue.element;this._getPreviousPlayers(ae,!1,ue.namespaceId,ue.triggerName,null).forEach(Ve=>{Up(le,ae,[]).push(Ve),Ve.destroy()})});const Ye=D.filter(ue=>Mye(ue,l,h)),Nt=new Map;Rye(Nt,this.driver,N,h,YC).forEach(ue=>{Mye(ue,l,h)&&Ye.push(ue)});const nt=new Map;v.forEach((ue,ae)=>{Rye(nt,this.driver,new Set(ue),l,"!")}),Ye.forEach(ue=>{const ae=Nt.get(ue),ge=nt.get(ue);Nt.set(ue,Object.assign(Object.assign({},ae),ge))});const We=[],xe=[],Me={};o.forEach(ue=>{const{element:ae,player:ge,instruction:Ve}=ue;if(i.has(ae)){if(c.has(ae))return ge.onDestroy(()=>Ly(ae,Ve.toStyles)),ge.disabled=!0,ge.overrideTotalTime(Ve.totalTime),void s.push(ge);let yt=Me;if(ke.size>1){let ci=ae;const ss=[];for(;ci=ci.parentNode;){const Ei=ke.get(ci);if(Ei){yt=Ei;break}ss.push(ci)}ss.forEach(Ei=>ke.set(Ei,yt))}const bi=this._buildAnimation(ge.namespaceId,Ve,le,r,nt,Nt);if(ge.setRealPlayer(bi),yt===Me)We.push(ge);else{const ci=this.playersByElement.get(yt);ci&&ci.length&&(ge.parentPlayer=NS(ci)),s.push(ge)}}else bI(ae,Ve.fromStyles),ge.onDestroy(()=>Ly(ae,Ve.toStyles)),xe.push(ge),c.has(ae)&&s.push(ge)}),xe.forEach(ue=>{const ae=r.get(ue.element);if(ae&&ae.length){const ge=NS(ae);ue.setRealPlayer(ge)}}),s.forEach(ue=>{ue.parentPlayer?ue.syncPlayerEvents(ue.parentPlayer):ue.destroy()});for(let ue=0;ue<D.length;ue++){const ae=D[ue],ge=ae[Jf];if(bR(ae,AU),ge&&ge.hasAnimation)continue;let Ve=[];if(a.size){let bi=a.get(ae);bi&&bi.length&&Ve.push(...bi);let ci=this.driver.query(ae,kJ,!0);for(let ss=0;ss<ci.length;ss++){let Ei=a.get(ci[ss]);Ei&&Ei.length&&Ve.push(...Ei)}}const yt=Ve.filter(bi=>!bi.destroyed);yt.length?hUe(this,ae,yt):this.processLeaveNode(ae)}return D.length=0,We.forEach(ue=>{this.players.push(ue),ue.onDone(()=>{ue.destroy();const ae=this.players.indexOf(ue);this.players.splice(ae,1)}),ue.play()}),We}elementContainsData(e,t){let i=!1;const s=t[Jf];return s&&s.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,s,r){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!r||r==HN;a.forEach(h=>{h.queued||!l&&h.triggerName!=s||o.push(h)})}}return(i||s)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||s&&s!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const r=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const h=l.element,c=h!==r,m=Up(i,h,[]);this._getPreviousPlayers(h,c,o,a,t.toState).forEach(v=>{const w=v.getRealPlayer();w.beforeDestroy&&w.beforeDestroy(),v.destroy(),m.push(v)})}bI(r,t.fromStyles)}_buildAnimation(e,t,i,s,r,o){const a=t.triggerName,l=t.element,h=[],c=new Set,m=new Set,b=t.timelines.map(w=>{const E=w.element;c.add(E);const D=E[Jf];if(D&&D.removedBeforeQueried)return new NN(w.duration,w.delay);const L=E!==l,N=function cUe(n){const e=[];return Lye(n,e),e}((i.get(E)||iUe).map(le=>le.getRealPlayer())).filter(le=>!!le.element&&le.element===E),V=r.get(E),$=o.get(E),ie=rye(0,this._normalizer,0,w.keyframes,V,$),Q=this._buildPlayer(w,ie,N);if(w.subTimeline&&s&&m.add(E),L){const le=new UJ(e,a,E);le.setRealPlayer(Q),h.push(le)}return Q});h.forEach(w=>{Up(this.playersByQueriedElement,w.element,[]).push(w),w.onDone(()=>function oUe(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const s=i.indexOf(t);i.splice(s,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const s=i.indexOf(t);i.splice(s,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,w.element,w))}),c.forEach(w=>em(w,fye));const v=NS(b);return v.onDestroy(()=>{c.forEach(w=>bR(w,fye)),Ly(l,t.toStyles)}),m.forEach(w=>{Up(s,w,[]).push(v)}),v}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new NN(e.duration,e.delay)}}class UJ{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new NN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>xJ(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Up(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function qU(n){return n&&1===n.nodeType}function kye(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function Rye(n,e,t,i,s){const r=[];t.forEach(l=>r.push(kye(l)));const o=[];i.forEach((l,h)=>{const c={};l.forEach(m=>{const b=c[m]=e.computeStyle(h,m,s);(!b||0==b.length)&&(h[Jf]=sUe,o.push(h))}),n.set(h,c)});let a=0;return t.forEach(l=>kye(l,r[a++])),o}function Aye(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const s=new Set(e),r=new Map;function o(a){if(!a)return 1;let l=r.get(a);if(l)return l;const h=a.parentNode;return l=t.has(h)?h:s.has(h)?1:o(h),r.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function em(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function bR(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function hUe(n,e,t){NS(t).onDone(()=>n.processLeaveNode(e))}function Lye(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof sye?Lye(i.players,e):e.push(i)}}function Mye(n,e,t){const i=t.get(n);if(!i)return!1;let s=e.get(n);return s?i.forEach(r=>s.add(r)):e.set(n,i),t.delete(n),!0}class WU{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(s,r)=>{},this._transitionEngine=new rUe(e,t,i),this._timelineEngine=new X6e(e,t,i),this._transitionEngine.onRemovalComplete=(s,r)=>this.onRemovalComplete(s,r)}registerTrigger(e,t,i,s,r){const o=e+"-"+s;let a=this._triggerCache[o];if(!a){const l=[],h=MJ(this._driver,r,l);if(l.length)throw function t6e(n,e){return new d.vHH(3404,Pn)}();a=function $6e(n,e,t){return new K6e(n,e,t)}(s,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,s,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,s){this._transitionEngine.insertNode(e,t,i,s)}onRemove(e,t,i,s){this._transitionEngine.removeNode(e,t,s||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,s){if("@"==i.charAt(0)){const[r,o]=oye(i);this._timelineEngine.command(r,t,o,s)}else this._transitionEngine.trigger(e,t,i,s)}listen(e,t,i,s,r){if("@"==i.charAt(0)){const[o,a]=oye(i);return this._timelineEngine.listen(o,t,a,r)}return this._transitionEngine.listen(e,t,i,s,r)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let pUe=(()=>{class n{constructor(t,i,s){this._element=t,this._startStyles=i,this._endStyles=s,this._state=0;let r=n.initialStylesByElement.get(t);r||n.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Ly(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ly(this._element,this._initialStyles),this._endStyles&&(Ly(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(bI(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(bI(this._element,this._endStyles),this._endStyles=null),Ly(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function qJ(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const s=t[i];fUe(s)&&(e=e||{},e[s]=n[s])}return e}function fUe(n){return"display"===n||"position"===n}class Oye{constructor(e,t,i,s){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:vye(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class mUe{validateStyleProperty(e){return hye(e)}matchesElement(e,t){return!1}containsElement(e,t){return cye(e,t)}query(e,t,i){return dye(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,s,r,o=[]){const l={duration:i,delay:s,fill:0==s?"both":"forwards"};r&&(l.easing=r);const h={},c=o.filter(b=>b instanceof Oye);(function S6e(n,e){return 0===n||0===e})(i,s)&&c.forEach(b=>{let v=b.currentSnapshot;Object.keys(v).forEach(w=>h[w]=v[w])}),t=function x6e(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let r=e[0],o=[];if(i.forEach(a=>{r.hasOwnProperty(a)||o.push(a),r[a]=t[a]}),o.length)for(var s=1;s<e.length;s++){let a=e[s];o.forEach(function(l){a[l]=vye(n,l)})}}return e}(e,t=t.map(b=>BS(b,!1)),h);const m=function uUe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=qJ(e[0]),e.length>1&&(i=qJ(e[e.length-1]))):e&&(t=qJ(e)),t||i?new pUe(n,t,i):null}(e,t);return new Oye(e,t,l,m)}}let gUe=(()=>{class n extends eye{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?tye(t):t;return Pye(this._renderer,null,i,"register",[s]),new bUe(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(Pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class bUe extends class R3e{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new yUe(this._id,e,t||{},this._renderer)}}class yUe{constructor(e,t,i,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Pye(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Pye(n,e,t,i,s){return n.setProperty(e,`@@${t}:${i}`,s)}const Fye="@.disabled";let vUe=(()=>{class n{constructor(t,i,s){this.delegate=t,this.engine=i,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(r,o)=>{const a=null==o?void 0:o.parentNode(r);a&&o.removeChild(a,r)}}createRenderer(t,i){const r=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let c=this._rendererCache.get(r);return c||(c=new Nye("",r,this.engine),this._rendererCache.set(r,c)),c}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=c=>{Array.isArray(c)?c.forEach(l):this.engine.registerTrigger(o,a,t,c.name,c)};return i.data.animation.forEach(l),new CUe(this,a,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,s){t>=0&&t<this._microtaskId?this._zone.run(()=>i(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(r=>{const[o,a]=r;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(WU),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Nye{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,s=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,s){this.delegate.setAttribute(e,t,i,s)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,s){this.delegate.setStyle(e,t,i,s)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==Fye?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class CUe extends Nye{constructor(e,t,i,s){super(t,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Fye?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const s=function wUe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let r=t.substr(1),o="";return"@"!=r.charAt(0)&&([r,o]=function SUe(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,s,r,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let xUe=(()=>{class n extends WU{constructor(t,i,s){super(t.body,i,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Pe),d.LFG(TJ),d.LFG(BJ))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const HS=new d.OlP("AnimationModuleType"),Bye=[{provide:eye,useClass:gUe},{provide:BJ,useFactory:function EUe(){return new j6e}},{provide:WU,useClass:xUe},{provide:d.FYo,useFactory:function _Ue(n,e,t){return new vUe(n,e,t)},deps:[mr,WU,d.R0b]}],Hye=[{provide:TJ,useFactory:()=>new mUe},{provide:HS,useValue:"BrowserAnimations"},...Bye],IUe=[{provide:TJ,useClass:uye},{provide:HS,useValue:"NoopAnimations"},...Bye];let TUe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?IUe:Hye}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Hye,imports:[Qp]}),n})();function DUe(n,e){if(1&n&&d._UZ(0,"mat-pseudo-checkbox",4),2&n){const t=d.oxw();d.Q6J("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function kUe(n,e){if(1&n&&(d.TgZ(0,"span",5),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.hij("(",t.group.label,")")}}const RUe=["*"],LUe=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function AUe(){return!0}});let Rc=(()=>{class n{constructor(t,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!KQ()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ibe),d.LFG(LUe,8),d.LFG(Pe))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[pR],pR]}),n})();function jye(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Yi(e)}}}function WJ(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function GJ(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Yi(e)}}}function Uye(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?PS(t):this.defaultTabIndex}}}function qye(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new _s.x,this.errorState=!1}updateErrorState(){const e=this.errorState,r=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);r!==e&&(this.errorState=r,this.stateChanges.next())}}}let $J=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class OUe{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Wye={enterDuration:225,exitDuration:150},KJ=GQ({passive:!0}),Gye=["mousedown","touchstart"],$ye=["mouseup","mouseleave","touchend","touchcancel"];class Kye{constructor(e,t,i,s){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=oI(i))}fadeInRipple(e,t,i={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=Object.assign(Object.assign({},Wye),i.animation);i.centered&&(e=s.left+s.width/2,t=s.top+s.height/2);const o=i.radius||function NUe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),s=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+s*s)}(e,t,s),a=e-s.left,l=t-s.top,h=r.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=a-o+"px",c.style.top=l-o+"px",c.style.height=2*o+"px",c.style.width=2*o+"px",null!=i.color&&(c.style.backgroundColor=i.color),c.style.transitionDuration=`${h}ms`,this._containerElement.appendChild(c),function FUe(n){window.getComputedStyle(n).getPropertyValue("opacity")}(c),c.style.transform="scale(1)";const m=new OUe(this,c,i);return m.state=0,this._activeRipples.add(m),i.persistent||(this._mostRecentTransientRipple=m),this._runTimeoutOutsideZone(()=>{const b=m===this._mostRecentTransientRipple;m.state=1,!i.persistent&&(!b||!this._isPointerDown)&&m.fadeOut()},h),m}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,s=Object.assign(Object.assign({},Wye),e.config.animation);i.style.transitionDuration=`${s.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},s.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=oI(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(Gye))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents($ye),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=Xge(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Qge(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,KJ)})})}_removeTriggerEvents(){this._triggerElement&&(Gye.forEach(e=>{this._triggerElement.removeEventListener(e,this,KJ)}),this._pointerUpEventsRegistered&&$ye.forEach(e=>{this._triggerElement.removeEventListener(e,this,KJ)}))}}const Yye=new d.OlP("mat-ripple-global-options");let YJ=(()=>{class n{constructor(t,i,s,r,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new Kye(this,i,t,s)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,s){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(Qf),d.Y36(Yye,8),d.Y36(HS,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&d.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Zye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Rc],Rc]}),n})(),BUe=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(HS,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,i){2&t&&d.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),HUe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Rc]]}),n})();const Xye=new d.OlP("MAT_OPTION_PARENT_COMPONENT"),Qye=new d.OlP("MatOptgroup");let VUe=0;class zUe{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let jUe=(()=>{class n{constructor(t,i,s,r){this._element=t,this._changeDetectorRef=i,this._parent=s,this.group=r,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+VUe++,this.onSelectionChange=new d.vpe,this._stateChanges=new _s.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=Yi(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,i){const s=this._getHostElement();"function"==typeof s.focus&&s.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!cI(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new zUe(this,t))}}return n.\u0275fac=function(t){d.$Z()},n.\u0275dir=d.lG2({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),Jye=(()=>{class n extends jUe{constructor(t,i,s,r){super(t,i,s,r)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(Xye,8),d.Y36(Qye,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,i){1&t&&d.NdJ("click",function(){return i._selectViaInteraction()})("keydown",function(r){return i._handleKeydown(r)}),2&t&&(d.Ikx("id",i.id),d.uIk("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),d.ekj("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[d.qOj],ngContentSelectors:RUe,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,i){1&t&&(d.F$t(),d.YNc(0,DUe,1,2,"mat-pseudo-checkbox",0),d.TgZ(1,"span",1),d.Hsn(2),d.qZA(),d.YNc(3,kUe,2,1,"span",2),d._UZ(4,"div",3)),2&t&&(d.Q6J("ngIf",i.multiple),d.xp6(3),d.Q6J("ngIf",i.group&&i.group._inert),d.xp6(1),d.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},directives:[BUe,Ar,YJ],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function eve(n,e,t){if(t.length){let i=e.toArray(),s=t.toArray(),r=0;for(let o=0;o<n+1;o++)i[o].group&&i[o].group===s[r]&&r++;return r}return 0}let tve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Zye,Lo,Rc,HUe]]}),n})();const qUe=["*",[["mat-card-footer"]]],WUe=["*","mat-card-footer"];let GUe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),ive=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),$Ue=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,i){2&t&&d.ekj("mat-card-actions-align-end","end"===i.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),sve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),n})(),nve=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(HS,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,i){2&t&&d.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:WUe,decls:2,vars:0,template:function(t,i){1&t&&(d.F$t(qUe),d.Hsn(0),d.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),KUe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Rc],Rc]}),n})(),YUe=(()=>{class n{constructor(){this.imageUrl=""}ngOnInit(){var t,i;this.imageUrl=null!==(i=null===(t=this.product)||void 0===t?void 0:t.imageUrls[0])&&void 0!==i?i:""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-product"]],inputs:{product:"product"},decls:5,vars:3,consts:[[1,"product-card",3,"routerLink"],["mat-card-image","",3,"src"]],template:function(t,i){1&t&&(d.TgZ(0,"carousel")(1,"mat-card",0)(2,"mat-card-title"),d._uU(3),d.qZA(),d._UZ(4,"img",1),d.qZA()()),2&t&&(d.xp6(1),d.Q6J("routerLink","/product/"+(null==i.product?null:i.product.id)),d.xp6(2),d.Oqu(null==i.product?null:i.product.name),d.xp6(1),d.Q6J("src",i.imageUrl,d.LSH))},directives:[D3e,nve,th,ive,sve],styles:[".product-card[_ngcontent-%COMP%]{background-color:#4242aa88;color:#000;font-family:Helvetica,cursive;height:100%;width:80%}.product-card[_ngcontent-%COMP%]:hover{cursor:pointer}.mat-card-image[_ngcontent-%COMP%]{object-fit:contain;max-height:290px}"]}),n})();function ZUe(n,e){1&n&&d._UZ(0,"app-product",15),2&n&&d.Q6J("product",e.$implicit)}let XUe=(()=>{class n{constructor(t){this.productService=t,this.products=[]}getProducts(){this.products=this.productService.getProducts()}ngOnInit(){this.getProducts()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Jbe))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-products"]],decls:27,vars:2,consts:[["SideClass","navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar intro-fixed-nav",3,"containerInside"],["routerLink","/mainn",1,"logo","navbar-brand"],["routerLink","/mainn","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","80","width","80","alt","There supposed to be a logo somewhere"],[1,"navbar-nav","mr-auto"],["mdbWavesEffect","",1,"nav-item","active","waves-light"],["mdbBtn","","type","submit","gradient","peach","rounded","true","mdbWavesEffect","","onclick",'alert("Dziekujemy za twoja opinie")'],[1,"sr-only"],["mdbWavesEffect","",1,"nav-item","waves-light"],["mdbBtn","","type","submit","gradient","aqua","rounded","true","mdbWavesEffect","","onclick",'alert("Dziekujemy za twoja opinie")'],["mdbBtn","","type","submit","gradient","purple","rounded","true","mdbWavesEffect","","onclick",'alert("Dziekujemy za twoja opinie")'],["mdbBtn","","type","submit","gradient","purple","rounded","true","mdbWavesEffect","","routerLink","/homepage"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","","routerLink","/register-user",2,"text-align","center"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","","routerLink","/sign-in",2,"text-align","center"],["fxLayout","row"],[3,"product",4,"ngFor","ngForOf"],[3,"product"]],template:function(t,i){1&t&&(d.TgZ(0,"mdb-navbar",0)(1,"mdb-navbar-brand")(2,"a",1),d._UZ(3,"img",2),d.qZA()(),d.TgZ(4,"links")(5,"ul",3)(6,"li",4)(7,"button",5),d._uU(8,"Strona G\u0142\xf3wna"),d.qZA(),d.TgZ(9,"span",6),d._uU(10,"(current)"),d.qZA()(),d.TgZ(11,"li",7)(12,"button",8),d._uU(13,"O nas"),d.qZA()(),d.TgZ(14,"li",7)(15,"button",9),d._uU(16,"Cennik"),d.qZA()(),d.TgZ(17,"li",7)(18,"button",10),d._uU(19,"Sklep"),d.qZA()()(),d.TgZ(20,"button",11),d._uU(21,"Rejestracja"),d.qZA(),d.TgZ(22,"button",12),d._uU(23,"Logowanie"),d.qZA()()(),d.TgZ(24,"div")(25,"ul",13),d.YNc(26,ZUe,1,1,"app-product",14),d.qZA()()),2&t&&(d.Q6J("containerInside",!1),d.xp6(26),d.Q6J("ngForOf",i.products))},directives:[cJ,dJ,kd,th,Gc,bU,zp,zu,IU,vr,YUe],styles:["ul[_ngcontent-%COMP%]{margin:0;padding:0}"]}),n})(),QUe=(()=>{class n{constructor(){this.title="Wybierz co\u015b dla siebie",this.subtitle="Na co masz ochot\u0119?"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-homepage"]],decls:5,vars:1,consts:[["hidden","","id","snipcart","data-api-key","NzI2MzE4YjgtY2VkYi00ODE1LTk4NzYtMWYwNmQ5MGYzMjdjNjM3NTY3ODUxNDM3NTM1Njk5","data-config-modal-style","side"],["fxLayout","column","fxLayoutAlign","center center",1,"header"]],template:function(t,i){1&t&&(d._UZ(0,"div",0),d.TgZ(1,"div",1)(2,"h2"),d._uU(3),d.qZA()(),d._UZ(4,"app-products")),2&t&&(d.xp6(3),d.Oqu(i.subtitle))},directives:[IU,yJ,XUe],styles:["h3[_ngcontent-%COMP%]{text-align:left;margin-left:2%}.padd[_ngcontent-%COMP%]{padding:0 0 5%}@media (min-width: 0px){h2[_ngcontent-%COMP%]{font-size:26px;padding:5%;margin-top:5%}.header[_ngcontent-%COMP%]{padding:5%;margin-top:5%}.jumbo[_ngcontent-%COMP%]{font-size:48px}}@media (min-width: 900px){h2[_ngcontent-%COMP%]{font-size:100px;padding:5%;margin-top:5%}.header[_ngcontent-%COMP%]{padding:5%;margin-top:5%}.jumbo[_ngcontent-%COMP%]{font-size:48px}}"]}),n})();const JUe=["connectionContainer"],eqe=["inputContainer"],tqe=["label"];function iqe(n,e){1&n&&(d.ynx(0),d.TgZ(1,"div",14),d._UZ(2,"div",15)(3,"div",16)(4,"div",17),d.qZA(),d.TgZ(5,"div",18),d._UZ(6,"div",15)(7,"div",16)(8,"div",17),d.qZA(),d.BQk())}function sqe(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",19),d.NdJ("cdkObserveContent",function(){return d.CHM(t),d.oxw().updateOutlineGap()}),d.Hsn(1,1),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function nqe(n,e){if(1&n&&(d.ynx(0),d.Hsn(1,2),d.TgZ(2,"span"),d._uU(3),d.qZA(),d.BQk()),2&n){const t=d.oxw(2);d.xp6(3),d.Oqu(t._control.placeholder)}}function rqe(n,e){1&n&&d.Hsn(0,3,["*ngSwitchCase","true"])}function oqe(n,e){1&n&&(d.TgZ(0,"span",23),d._uU(1," *"),d.qZA())}function aqe(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"label",20,21),d.NdJ("cdkObserveContent",function(){return d.CHM(t),d.oxw().updateOutlineGap()}),d.YNc(2,nqe,4,1,"ng-container",12),d.YNc(3,rqe,1,0,"ng-content",12),d.YNc(4,oqe,2,0,"span",22),d.qZA()}if(2&n){const t=d.oxw();d.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),d.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),d.uIk("for",t._control.id)("aria-owns",t._control.id),d.xp6(2),d.Q6J("ngSwitchCase",!1),d.xp6(1),d.Q6J("ngSwitchCase",!0),d.xp6(1),d.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function lqe(n,e){1&n&&(d.TgZ(0,"div",24),d.Hsn(1,4),d.qZA())}function hqe(n,e){if(1&n&&(d.TgZ(0,"div",25),d._UZ(1,"span",26),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function cqe(n,e){if(1&n&&(d.TgZ(0,"div"),d.Hsn(1,5),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState)}}function dqe(n,e){if(1&n&&(d.TgZ(0,"div",30),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.Q6J("id",t._hintLabelId),d.xp6(1),d.Oqu(t.hintLabel)}}function uqe(n,e){if(1&n&&(d.TgZ(0,"div",27),d.YNc(1,dqe,2,2,"div",28),d.Hsn(2,6),d._UZ(3,"div",29),d.Hsn(4,7),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState),d.xp6(1),d.Q6J("ngIf",t.hintLabel)}}const pqe=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],fqe=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],mqe=new d.OlP("MatError"),gqe={transitionMessages:vJ("transitionMessages",[DU("enter",FS({opacity:1,transform:"translateY(0%)"})),kU("void => enter",[FS({opacity:0,transform:"translateY(-5px)"}),CJ("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let $U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n}),n})();const bqe=new d.OlP("MatHint");let ZJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-label"]]}),n})(),yqe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const vqe=new d.OlP("MatPrefix"),Cqe=new d.OlP("MatSuffix");let rve=0;const Sqe=WJ(class{constructor(n){this._elementRef=n}},"primary"),xqe=new d.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),ave=new d.OlP("MatFormField");let XJ,Eqe=(()=>{class n extends Sqe{constructor(t,i,s,r,o,a,l){super(t),this._changeDetectorRef=i,this._dir=s,this._defaults=r,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new _s.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+rve++,this._labelId="mat-form-field-label-"+rve++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=r&&r.appearance?r.appearance:"legacy",this._hideRequiredMarker=!(!r||null==r.hideRequiredMarker)&&r.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Yi(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Yl(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Ko(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ko(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Sh.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Yl(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Yl(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Ko(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,aI(this._label.nativeElement,"transitionend").pipe((0,tl.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(r=>"start"===r.align):null,s=this._hintChildren?this._hintChildren.find(r=>"end"===r.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),s&&t.push(s.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,s=".mat-form-field-outline-start",r=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const c=i.querySelectorAll(`${s}, ${r}`);for(let m=0;m<c.length;m++)c[m].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=i.querySelectorAll(s),h=i.querySelectorAll(r);if(this._label&&this._label.nativeElement.children.length){const c=i.getBoundingClientRect();if(0===c.width&&0===c.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const m=this._getStartEnd(c),b=t.children,v=this._getStartEnd(b[0].getBoundingClientRect());let w=0;for(let E=0;E<b.length;E++)w+=b[E].offsetWidth;o=Math.abs(v-m)-5,a=w>0?.75*w+10:0}for(let c=0;c<l.length;c++)l[c].style.width=`${o}px`;for(let c=0;c<h.length;c++)h[c].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(pI,8),d.Y36(xqe,8),d.Y36(Qf),d.Y36(d.R0b),d.Y36(HS,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,s){if(1&t&&(d.Suo(s,$U,5),d.Suo(s,$U,7),d.Suo(s,ZJ,5),d.Suo(s,ZJ,7),d.Suo(s,yqe,5),d.Suo(s,mqe,5),d.Suo(s,bqe,5),d.Suo(s,vqe,5),d.Suo(s,Cqe,5)),2&t){let r;d.iGM(r=d.CRH())&&(i._controlNonStatic=r.first),d.iGM(r=d.CRH())&&(i._controlStatic=r.first),d.iGM(r=d.CRH())&&(i._labelChildNonStatic=r.first),d.iGM(r=d.CRH())&&(i._labelChildStatic=r.first),d.iGM(r=d.CRH())&&(i._placeholderChild=r.first),d.iGM(r=d.CRH())&&(i._errorChildren=r),d.iGM(r=d.CRH())&&(i._hintChildren=r),d.iGM(r=d.CRH())&&(i._prefixChildren=r),d.iGM(r=d.CRH())&&(i._suffixChildren=r)}},viewQuery:function(t,i){if(1&t&&(d.Gf(JUe,7),d.Gf(eqe,5),d.Gf(tqe,5)),2&t){let s;d.iGM(s=d.CRH())&&(i._connectionContainerRef=s.first),d.iGM(s=d.CRH())&&(i._inputContainerRef=s.first),d.iGM(s=d.CRH())&&(i._label=s.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&d.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[d._Bn([{provide:ave,useExisting:n}]),d.qOj],ngContentSelectors:fqe,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(d.F$t(pqe),d.TgZ(0,"div",0)(1,"div",1,2),d.NdJ("click",function(r){return i._control.onContainerClick&&i._control.onContainerClick(r)}),d.YNc(3,iqe,9,0,"ng-container",3),d.YNc(4,sqe,2,1,"div",4),d.TgZ(5,"div",5,6),d.Hsn(7),d.TgZ(8,"span",7),d.YNc(9,aqe,5,16,"label",8),d.qZA()(),d.YNc(10,lqe,2,0,"div",9),d.qZA(),d.YNc(11,hqe,2,4,"div",10),d.TgZ(12,"div",11),d.YNc(13,cqe,2,1,"div",12),d.YNc(14,uqe,5,2,"div",13),d.qZA()()),2&t&&(d.xp6(3),d.Q6J("ngIf","outline"==i.appearance),d.xp6(1),d.Q6J("ngIf",i._prefixChildren.length),d.xp6(5),d.Q6J("ngIf",i._hasFloatingLabel()),d.xp6(1),d.Q6J("ngIf",i._suffixChildren.length),d.xp6(1),d.Q6J("ngIf","outline"!=i.appearance),d.xp6(1),d.Q6J("ngSwitch",i._getDisplayedMessages()),d.xp6(1),d.Q6J("ngSwitchCase","error"),d.xp6(1),d.Q6J("ngSwitchCase","hint"))},directives:[Ar,mVe,Ja,mh],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[gqe.transitionMessages]},changeDetection:0}),n})(),_qe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Lo,Rc,Wge],Rc]}),n})(),Iqe=1;const KU={};function lve(n){return n in KU&&(delete KU[n],!0)}const Tqe={setImmediate(n){const e=Iqe++;return KU[e]=!0,XJ||(XJ=Promise.resolve()),XJ.then(()=>lve(e)&&n()),e},clearImmediate(n){lve(n)}},{setImmediate:Dqe,clearImmediate:kqe}=Tqe,YU={setImmediate(...n){const{delegate:e}=YU;return((null==e?void 0:e.setImmediate)||Dqe)(...n)},clearImmediate(n){const{delegate:e}=YU;return((null==e?void 0:e.clearImmediate)||kqe)(n)},delegate:void 0};new class Aqe extends Nge.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let s;e=e||i.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,s){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw s}}}(class Rqe extends Fge.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=YU.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(s=>s.id===t)||(YU.clearImmediate(t),e._scheduled=void 0)}});function hve(n,e=O0.z){return function Mqe(n){return(0,Mo.e)((e,t)=>{let i=!1,s=null,r=null,o=!1;const a=()=>{if(null==r||r.unsubscribe(),r=null,i){i=!1;const h=s;s=null,t.next(h)}o&&t.complete()},l=()=>{r=null,o&&t.complete()};e.subscribe((0,gn.x)(t,h=>{i=!0,s=h,r||(0,yh.Xf)(n(h)).subscribe(r=(0,gn.x)(t,a,l))},()=>{o=!0,(!i||!r||r.closed)&&t.complete()}))})}(()=>Oge(n,e))}let Pqe=(()=>{class n{constructor(t,i,s){this._ngZone=t,this._platform=i,this._scrolled=new _s.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Fn.y(i=>{this._globalSubscription||this._addGlobalListener();const s=t>0?this._scrolled.pipe(hve(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ei()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const s=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Un(r=>!r||s.indexOf(r)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((s,r)=>{this._scrollableContainsElement(r,t)&&i.push(r)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let s=oI(i),r=t.getElementRef().nativeElement;do{if(s==r)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>aI(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(Qf),d.LFG(Pe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QJ=(()=>{class n{constructor(t,i,s){this._platform=t,this._change=new _s.x,this._changeListener=r=>{this._change.next(r)},this._document=s,i.runOutsideAngular(()=>{if(t.isBrowser){const r=this._getWindow();r.addEventListener("resize",this._changeListener),r.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+s,right:t.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),s=t.documentElement,r=s.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||i.scrollY||s.scrollTop||0,left:-r.left||t.body.scrollLeft||i.scrollX||s.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(hve(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Qf),d.LFG(d.R0b),d.LFG(Pe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),cve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[pR,JJ],pR,JJ]}),n})();class eee{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Nqe extends eee{constructor(e,t,i,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=s}}class dve extends eee{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Bqe extends eee{constructor(e){super(),this.element=e instanceof d.SBq?e.nativeElement:e}}class Vqe extends class Hqe{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Nqe?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof dve?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Bqe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,i,s,r){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=s,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=r}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let s;return e.viewContainerRef?(s=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>s.destroy())):(s=i.create(e.injector||this._defaultInjector||d.zs3.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=e,s}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(s=>this.outletElement.appendChild(s)),i.detectChanges(),this.setDisposeFn(()=>{let s=t.indexOf(i);-1!==s&&t.remove(s)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let zqe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const uve=XHe();class Uqe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ql(-this._previousScrollPosition.left),e.style.top=ql(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,s=this._document.body.style,r=i.scrollBehavior||"",o=s.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),uve&&(i.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),uve&&(i.scrollBehavior=r,s.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class qqe{constructor(e,t,i,s){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class pve{enable(){}disable(){}attach(){}}function tee(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function fve(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Wqe{constructor(e,t,i,s){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=s,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:s}=this._viewportRuler.getViewportSize();tee(t,[{width:i,height:s,bottom:s,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Gqe=(()=>{class n{constructor(t,i,s,r){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new pve,this.close=o=>new qqe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Uqe(this._viewportRuler,this._document),this.reposition=o=>new Wqe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=r}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Pqe),d.LFG(QJ),d.LFG(d.R0b),d.LFG(Pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class mve{constructor(e){if(this.scrollStrategy=new pve,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class $qe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class Kqe{constructor(e,t,i,s,r,o,a,l,h){this._portalOutlet=e,this._host=t,this._pane=i,this._config=s,this._ngZone=r,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=h,this._backdropElement=null,this._backdropClick=new _s.x,this._attachments=new _s.x,this._detachments=new _s.x,this._locationChanges=fl.w0.EMPTY,this._backdropClickHandler=c=>this._backdropClick.next(c),this._backdropTransitionendHandler=c=>{this._disposeBackdrop(c.target)},this._keydownEvents=new _s.x,this._outsidePointerEvents=new _s.x,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,tl.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ql(this._config.width),e.height=ql(this._config.height),e.minWidth=ql(this._config.minWidth),e.minHeight=ql(this._config.minHeight),e.maxWidth=ql(this._config.maxWidth),e.maxHeight=ql(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,i){const s=Mge(t||[]).filter(r=>!!r);s.length&&(i?e.classList.add(...s):e.classList.remove(...s))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Ko((0,Sh.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let gve=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||KQ()){const s=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let r=0;r<s.length;r++)s[r].remove()}const i=this._document.createElement("div");i.classList.add(t),KQ()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Pe),d.LFG(Qf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bve="cdk-overlay-connected-position-bounding-box",Yqe=/([A-Za-z%]+)$/;class Zqe{constructor(e,t,i,s,r){this._viewportRuler=t,this._document=i,this._platform=s,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new _s.x,this._resizeSubscription=fl.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(bve),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,s=this._containerRect,r=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,s,a),h=this._getOverlayPoint(l,t,a),c=this._getOverlayFit(h,t,i,a);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(c,h,i)?r.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<c.visibleArea)&&(o={overlayFit:c,overlayPoint:h,originPoint:l,position:a,overlayRect:t})}if(r.length){let a=null,l=-1;for(const h of r){const c=h.boundingBoxRect.width*h.boundingBoxRect.height*(h.position.weight||1);c>l&&(l=c,a=h)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&vI(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(bve),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let s,r;if("center"==i.originX)s=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;s="start"==i.originX?o:a}return t.left<0&&(s-=t.left),r="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(r-=t.top),{x:s,y:r}}_getOverlayPoint(e,t,i){let s,r;return s="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,r="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+s,y:e.y+r}}_getOverlayFit(e,t,i,s){const r=vve(t);let{x:o,y:a}=e,l=this._getOffset(s,"x"),h=this._getOffset(s,"y");l&&(o+=l),h&&(a+=h);let b=0-a,v=a+r.height-i.height,w=this._subtractOverflows(r.width,0-o,o+r.width-i.width),E=this._subtractOverflows(r.height,b,v),D=w*E;return{visibleArea:D,isCompletelyWithinViewport:r.width*r.height===D,fitsInViewportVertically:E===r.height,fitsInViewportHorizontally:w==r.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const s=i.bottom-t.y,r=i.right-t.x,o=yve(this._overlayRef.getConfig().minHeight),a=yve(this._overlayRef.getConfig().minWidth),h=e.fitsInViewportHorizontally||null!=a&&a<=r;return(e.fitsInViewportVertically||null!=o&&o<=s)&&h}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const s=vve(t),r=this._viewportRect,o=Math.max(e.x+s.width-r.width,0),a=Math.max(e.y+s.height-r.height,0),l=Math.max(r.top-i.top-e.y,0),h=Math.max(r.left-i.left-e.x,0);let c=0,m=0;return c=s.width<=r.width?h||-o:e.x<this._viewportMargin?r.left-i.left-e.x:0,m=s.height<=r.height?l||-a:e.y<this._viewportMargin?r.top-i.top-e.y:0,this._previousPushAmount={x:c,y:m},{x:e.x+c,y:e.y+m}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),s=new $qe(e,i);this._positionChanges.next(s)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,s=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let r=0;r<t.length;r++)t[r].style.transformOrigin=`${i} ${s}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,s=this._isRtl();let r,o,a,c,m,b;if("top"===t.overlayY)o=e.y,r=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,r=i.height-a+this._viewportMargin;else{const v=Math.min(i.bottom-e.y+i.top,e.y),w=this._lastBoundingBoxSize.height;r=2*v,o=e.y-v,r>w&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-w/2)}if("end"===t.overlayX&&!s||"start"===t.overlayX&&s)b=i.width-e.x+this._viewportMargin,c=e.x-this._viewportMargin;else if("start"===t.overlayX&&!s||"end"===t.overlayX&&s)m=e.x,c=i.right-e.x;else{const v=Math.min(i.right-e.x+i.left,e.x),w=this._lastBoundingBoxSize.width;c=2*v,m=e.x-v,c>w&&!this._isInitialRender&&!this._growAfterOpen&&(m=e.x-w/2)}return{top:o,left:m,bottom:a,right:b,width:c,height:r}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const r=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;s.height=ql(i.height),s.top=ql(i.top),s.bottom=ql(i.bottom),s.width=ql(i.width),s.left=ql(i.left),s.right=ql(i.right),s.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",s.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",r&&(s.maxHeight=ql(r)),o&&(s.maxWidth=ql(o))}this._lastBoundingBoxSize=i,vI(this._boundingBox.style,s)}_resetBoundingBoxStyles(){vI(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){vI(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},s=this._hasExactPosition(),r=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(s){const c=this._viewportRuler.getViewportScrollPosition();vI(i,this._getExactOverlayY(t,e,c)),vI(i,this._getExactOverlayX(t,e,c))}else i.position="static";let a="",l=this._getOffset(t,"x"),h=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),h&&(a+=`translateY(${h}px)`),i.transform=a.trim(),o.maxHeight&&(s?i.maxHeight=ql(o.maxHeight):r&&(i.maxHeight="")),o.maxWidth&&(s?i.maxWidth=ql(o.maxWidth):r&&(i.maxWidth="")),vI(this._pane.style,i)}_getExactOverlayY(e,t,i){let s={top:"",bottom:""},r=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),"bottom"===e.overlayY?s.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":s.top=ql(r.y),s}_getExactOverlayX(e,t,i){let o,s={left:"",right:""},r=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?s.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":s.left=ql(r.x),s}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:fve(e,i),isOriginOutsideView:tee(e,i),isOverlayClipped:fve(t,i),isOverlayOutsideView:tee(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,s)=>i-Math.max(s,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Mge(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof d.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function vI(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function yve(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Yqe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function vve(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Cve="cdk-global-overlay-wrapper";class Xqe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Cve),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:s,height:r,maxWidth:o,maxHeight:a}=i,l=!("100%"!==s&&"100vw"!==s||o&&"100%"!==o&&"100vw"!==o),h=!("100%"!==r&&"100vh"!==r||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=l?"0":this._leftOffset,e.marginTop=h?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,l?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Cve),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Qqe=(()=>{class n{constructor(t,i,s,r){this._viewportRuler=t,this._document=i,this._platform=s,this._overlayContainer=r}global(){return new Xqe}flexibleConnectedTo(t){return new Zqe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(QJ),d.LFG(Pe),d.LFG(Qf),d.LFG(gve))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wve=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jqe=(()=>{class n extends wve{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=s=>{const r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){const a=r[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(s)):a.next(s);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Pe),d.LFG(d.R0b,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),e4e=(()=>{class n extends wve{constructor(t,i,s){super(t),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=hI(r)},this._clickListener=r=>{const o=hI(r),a="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let h=l.length-1;h>-1;h--){const c=l[h];if(c._outsidePointerEvents.observers.length<1||!c.hasAttached())continue;if(c.overlayElement.contains(o)||c.overlayElement.contains(a))break;const m=c._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>m.next(r)):m.next(r)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Pe),d.LFG(Qf),d.LFG(d.R0b,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),t4e=0,ZU=(()=>{class n{constructor(t,i,s,r,o,a,l,h,c,m,b){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=r,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=h,this._directionality=c,this._location=m,this._outsideClickDispatcher=b}create(t){const i=this._createHostElement(),s=this._createPaneElement(i),r=this._createPortalOutlet(s),o=new mve(t);return o.direction=o.direction||this._directionality.value,new Kqe(r,i,s,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+t4e++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(d.z2F)),new Vqe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Gqe),d.LFG(gve),d.LFG(d._Vd),d.LFG(Qqe),d.LFG(Jqe),d.LFG(d.zs3),d.LFG(d.R0b),d.LFG(Pe),d.LFG(pI),d.LFG(vt),d.LFG(e4e))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const i4e=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Sve=new d.OlP("cdk-connected-overlay-scroll-strategy");let xve=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),Eve=(()=>{class n{constructor(t,i,s,r,o){this._overlay=t,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=fl.w0.EMPTY,this._attachSubscription=fl.w0.EMPTY,this._detachSubscription=fl.w0.EMPTY,this._positionSubscription=fl.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new d.vpe,this.positionChange=new d.vpe,this.attach=new d.vpe,this.detach=new d.vpe,this.overlayKeydown=new d.vpe,this.overlayOutsideClick=new d.vpe,this._templatePortal=new dve(i,s),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Yi(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=Yi(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=Yi(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=Yi(t)}get push(){return this._push}set push(t){this._push=Yi(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=i4e);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!cI(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),i=new mve({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(t){const i=this.positions.map(s=>({originX:s.originX,originY:s.originY,overlayX:s.overlayX,overlayY:s.overlayY,offsetX:s.offsetX||this.offsetX,offsetY:s.offsetY||this.offsetY,panelClass:s.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof xve?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function jqe(n,e=!1){return(0,Mo.e)((t,i)=>{let s=0;t.subscribe((0,gn.x)(i,r=>{const o=n(r,s++);(o||e)&&i.next(r),!o&&i.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ZU),d.Y36(d.Rgc),d.Y36(d.s_b),d.Y36(Sve),d.Y36(pI,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[d.TTD]}),n})();const n4e={provide:Sve,deps:[ZU],useFactory:function s4e(n){return()=>n.scrollStrategies.reposition()}};let r4e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[ZU,n4e],imports:[[pR,zqe,cve],cve]}),n})();class _ve{constructor(e=!1,t,i=!0){this._multiple=e,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new _s.x,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}const o4e=["trigger"],a4e=["panel"];function l4e(n,e){if(1&n&&(d.TgZ(0,"span",8),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Oqu(t.placeholder)}}function h4e(n,e){if(1&n&&(d.TgZ(0,"span",12),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.triggerValue)}}function c4e(n,e){1&n&&d.Hsn(0,0,["*ngSwitchCase","true"])}function d4e(n,e){if(1&n&&(d.TgZ(0,"span",9),d.YNc(1,h4e,2,1,"span",10),d.YNc(2,c4e,1,0,"ng-content",11),d.qZA()),2&n){const t=d.oxw();d.Q6J("ngSwitch",!!t.customTrigger),d.xp6(2),d.Q6J("ngSwitchCase",!0)}}function u4e(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",13)(1,"div",14,15),d.NdJ("@transformPanel.done",function(s){return d.CHM(t),d.oxw()._panelDoneAnimatingStream.next(s.toState)})("keydown",function(s){return d.CHM(t),d.oxw()._handleKeydown(s)}),d.Hsn(3,1),d.qZA()()}if(2&n){const t=d.oxw();d.Q6J("@transformPanelWrap",void 0),d.xp6(1),d.Gre("mat-select-panel ",t._getPanelTheme(),""),d.Udp("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),d.Q6J("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),d.uIk("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const p4e=[[["mat-select-trigger"]],"*"],f4e=["mat-select-trigger","*"],Ive={transformPanelWrap:vJ("transformPanelWrap",[kU("* => void",L3e("@transformPanel",[A3e()],{optional:!0}))]),transformPanel:vJ("transformPanel",[DU("void",FS({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),DU("showing",FS({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),DU("showing-multiple",FS({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),kU("void => *",CJ("120ms cubic-bezier(0, 0, 0.2, 1)")),kU("* => void",CJ("100ms 25ms linear",FS({opacity:0})))])};let Tve=0;const kve=new d.OlP("mat-select-scroll-strategy"),y4e=new d.OlP("MAT_SELECT_CONFIG"),v4e={provide:kve,deps:[ZU],useFactory:function b4e(n){return()=>n.scrollStrategies.reposition()}};class C4e{constructor(e,t){this.source=e,this.value=t}}const w4e=GJ(Uye(jye(qye(class{constructor(n,e,t,i,s){this._elementRef=n,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=i,this.ngControl=s}})))),S4e=new d.OlP("MatSelectTrigger");let x4e=(()=>{class n extends w4e{constructor(t,i,s,r,o,a,l,h,c,m,b,v,w,E){var D,L,N;super(o,r,l,h,m),this._viewportRuler=t,this._changeDetectorRef=i,this._ngZone=s,this._dir=a,this._parentFormField=c,this._liveAnnouncer=w,this._defaultOptions=E,this._panelOpen=!1,this._compareWith=(V,$)=>V===$,this._uid="mat-select-"+Tve++,this._triggerAriaLabelledBy=null,this._destroy=new _s.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Tve++,this._panelDoneAnimatingStream=new _s.x,this._overlayPanelClass=(null===(D=this._defaultOptions)||void 0===D?void 0:D.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(N=null===(L=this._defaultOptions)||void 0===L?void 0:L.disableOptionCentering)&&void 0!==N&&N,this.ariaLabel="",this.optionSelectionChanges=Xg(()=>{const V=this.options;return V?V.changes.pipe(Yl(V),lr(()=>(0,Sh.T)(...V.map($=>$.onSelectionChange)))):this._ngZone.onStable.pipe((0,tl.q)(1),lr(()=>this.optionSelectionChanges))}),this.openedChange=new d.vpe,this._openedStream=this.openedChange.pipe(Un(V=>V),(0,Ni.U)(()=>{})),this._closedStream=this.openedChange.pipe(Un(V=>!V),(0,Ni.U)(()=>{})),this.selectionChange=new d.vpe,this.valueChange=new d.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==E?void 0:E.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=E.typeaheadDebounceInterval),this._scrollStrategyFactory=v,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(b)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){var t,i,s,r;return null!==(r=null!==(t=this._required)&&void 0!==t?t:null===(s=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===s?void 0:s.hasValidator(Sre.required))&&void 0!==r&&r}set required(t){this._required=Yi(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=Yi(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=Yi(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=PS(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new _ve(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(QA(),Ko(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Ko(this._destroy)).subscribe(t=>{t.added.forEach(i=>i.select()),t.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Yl(null),Ko(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),i=this.ngControl;if(t!==this._triggerAriaLabelledBy){const s=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?s.setAttribute("aria-labelledby",t):s.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(t){t.disabled&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var t,i;return this.multiple?(null===(t=this._selectionModel)||void 0===t?void 0:t.selected)||[]:null===(i=this._selectionModel)||void 0===i?void 0:i.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const i=t.keyCode,s=40===i||38===i||37===i||39===i,r=13===i||32===i,o=this._keyManager;if(!o.isTyping()&&r&&!cI(t)||(this.multiple||t.altKey)&&s)t.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(t);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(t){const i=this._keyManager,s=t.keyCode,r=40===s||38===s,o=i.isTyping();if(r&&t.altKey)t.preventDefault(),this.close();else if(o||13!==s&&32!==s||!i.activeItem||cI(t))if(!o&&this._multiple&&65===s&&t.ctrlKey){t.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=i.activeItemIndex;i.onKeydown(t),this._multiple&&r&&t.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}else t.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,tl.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(t);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const i=this.options.find(s=>{if(this._selectionModel.isSelected(s))return!1;try{return null!=s.value&&this._compareWith(s.value,t)}catch(r){return!1}});return i&&this._selectionModel.select(i),i}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new yVe(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Ko(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Ko(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=(0,Sh.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Ko(t)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Sh.T)(...this.options.map(i=>i._stateChanges)).pipe(Ko(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,i){const s=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(s!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),i&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),i&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),s!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((i,s)=>this.sortComparator?this.sortComparator(i,s,t):t.indexOf(i)-t.indexOf(s)),this.stateChanges.next()}}_propagateChanges(t){let i=null;i=this.multiple?this.selected.map(s=>s.value):this.selected?this.selected.value:t,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var t;return!this._panelOpen&&!this.disabled&&(null===(t=this.options)||void 0===t?void 0:t.length)>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){var t;if(this.ariaLabel)return null;const i=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();return this.ariaLabelledby?(i?i+" ":"")+this.ariaLabelledby:i}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var t;if(this.ariaLabel)return null;const i=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();let s=(i?i+" ":"")+this._valueId;return this.ariaLabelledby&&(s+=" "+this.ariaLabelledby),s}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(QJ),d.Y36(d.sBO),d.Y36(d.R0b),d.Y36($J),d.Y36(d.SBq),d.Y36(pI,8),d.Y36(dO,8),d.Y36(uO,8),d.Y36(ave,8),d.Y36(Ub,10),d.$8M("tabindex"),d.Y36(kve),d.Y36(VVe),d.Y36(y4e,8))},n.\u0275dir=d.lG2({type:n,viewQuery:function(t,i){if(1&t&&(d.Gf(o4e,5),d.Gf(a4e,5),d.Gf(Eve,5)),2&t){let s;d.iGM(s=d.CRH())&&(i.trigger=s.first),d.iGM(s=d.CRH())&&(i.panel=s.first),d.iGM(s=d.CRH())&&(i._overlayDir=s.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[d.qOj,d.TTD]}),n})(),E4e=(()=>{class n extends x4e{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,i,s){const r=this._getItemHeight();return Math.min(Math.max(0,r*t-i+r/2),s)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Ko(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,tl.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const i=eve(t,this.options,this.optionGroups),s=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===i?0:function UUe(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}((t+i)*s,s,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new C4e(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),s=this._isRtl(),r=this.multiple?56:32;let o;if(this.multiple)o=40;else if(this.disableOptionCentering)o=16;else{let h=this._selectionModel.selected[0]||this.options.first;o=h&&h.group?32:16}s||(o*=-1);const a=0-(t.left+o-(s?r:0)),l=t.right+o-i.width+(s?0:r);a>0?o+=a+8:l>0&&(o-=l+8),this._overlayDir.offsetX=Math.round(o),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,i,s){const r=this._getItemHeight(),o=(r-this._triggerRect.height)/2,a=Math.floor(256/r);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?t*r:this._scrollTop===s?(t-(this._getItemCount()-a))*r+(r-(this._getItemCount()*r-256)%r):i-r/2,Math.round(-1*l-o))}_checkOverlayWithinViewport(t){const i=this._getItemHeight(),s=this._viewportRuler.getViewportSize(),r=this._triggerRect.top-8,o=s.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),h=Math.min(this._getItemCount()*i,256)-a-this._triggerRect.height;h>o?this._adjustPanelUp(h,o):a>r?this._adjustPanelDown(a,r,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,i){const s=Math.round(t-i);this._scrollTop-=s,this._offsetY-=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,i,s){const r=Math.round(t-i);if(this._scrollTop+=r,this._offsetY+=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=s)return this._scrollTop=s,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),i=this._getItemCount(),s=Math.min(i*t,256),o=i*t-s;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=eve(a,this.options,this.optionGroups);const l=s/2;this._scrollTop=this._calculateOverlayScroll(a,l,o),this._offsetY=this._calculateOverlayOffsetY(a,l,o),this._checkOverlayWithinViewport(o)}_getOriginBasedOnOption(){const t=this._getItemHeight(),i=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-i+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=d.n5z(n)))(i||n)}}(),n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-select"]],contentQueries:function(t,i,s){if(1&t&&(d.Suo(s,S4e,5),d.Suo(s,Jye,5),d.Suo(s,Qye,5)),2&t){let r;d.iGM(r=d.CRH())&&(i.customTrigger=r.first),d.iGM(r=d.CRH())&&(i.options=r),d.iGM(r=d.CRH())&&(i.optionGroups=r)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(t,i){1&t&&d.NdJ("keydown",function(r){return i._handleKeydown(r)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&t&&(d.uIk("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-describedby",i._ariaDescribedby||null)("aria-activedescendant",i._getAriaActiveDescendant()),d.ekj("mat-select-disabled",i.disabled)("mat-select-invalid",i.errorState)("mat-select-required",i.required)("mat-select-empty",i.empty)("mat-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[d._Bn([{provide:$U,useExisting:n},{provide:Xye,useExisting:n}]),d.qOj],ngContentSelectors:f4e,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,i){if(1&t&&(d.F$t(p4e),d.TgZ(0,"div",0,1),d.NdJ("click",function(){return i.toggle()}),d.TgZ(3,"div",2),d.YNc(4,l4e,2,1,"span",3),d.YNc(5,d4e,3,2,"span",4),d.qZA(),d.TgZ(6,"div",5),d._UZ(7,"div",6),d.qZA()(),d.YNc(8,u4e,4,14,"ng-template",7),d.NdJ("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&t){const s=d.MAs(1);d.uIk("aria-owns",i.panelOpen?i.id+"-panel":null),d.xp6(3),d.Q6J("ngSwitch",i.empty),d.uIk("id",i._valueId),d.xp6(1),d.Q6J("ngSwitchCase",!0),d.xp6(1),d.Q6J("ngSwitchCase",!1),d.xp6(3),d.Q6J("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",s)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayMinWidth",null==i._triggerRect?null:i._triggerRect.width)("cdkConnectedOverlayOffsetY",i._offsetY)}},directives:[xve,Ja,mh,nm,Eve,$l],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[Ive.transformPanelWrap,Ive.transformPanel]},changeDetection:0}),n})(),_4e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[v4e],imports:[[Lo,r4e,tve,Rc],JJ,_qe,tve,Rc]}),n})();const I4e=["*"],Rve=new d.OlP("MatChipRemove"),Ave=new d.OlP("MatChipAvatar"),Lve=new d.OlP("MatChipTrailingIcon");class T4e{constructor(e){this._elementRef=e}}const D4e=Uye(WJ(GJ(T4e),"primary"),-1);let QU=(()=>{class n extends D4e{constructor(t,i,s,r,o,a,l,h){super(t),this._ngZone=i,this._changeDetectorRef=o,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new _s.x,this._onBlur=new _s.x,this.selectionChange=new d.vpe,this.destroyed=new d.vpe,this.removed=new d.vpe,this._addHostClassName(),this._chipRippleTarget=a.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new Kye(this,i,this._chipRippleTarget,s),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=r||{},this._animationsDisabled="NoopAnimations"===l,this.tabIndex=null!=h&&parseInt(h)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const i=Yi(t);i!==this._selected&&(this._selected=i,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=Yi(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=Yi(t)}get removable(){return this._removable}set removable(t){this._removable=Yi(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t="mat-basic-chip",i=this._elementRef.nativeElement;i.hasAttribute(t)||i.tagName.toLowerCase()===t?i.classList.add(t):i.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled&&t.preventDefault()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case 46:case 8:this.remove(),t.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe((0,tl.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(Qf),d.Y36(Yye,8),d.Y36(d.sBO),d.Y36(Pe),d.Y36(HS,8),d.$8M("tabindex"))},n.\u0275dir=d.lG2({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,i,s){if(1&t&&(d.Suo(s,Ave,5),d.Suo(s,Lve,5),d.Suo(s,Rve,5)),2&t){let r;d.iGM(r=d.CRH())&&(i.avatar=r.first),d.iGM(r=d.CRH())&&(i.trailingIcon=r.first),d.iGM(r=d.CRH())&&(i.removeIcon=r.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,i){1&t&&d.NdJ("click",function(r){return i._handleClick(r)})("keydown",function(r){return i._handleKeydown(r)})("focus",function(){return i.focus()})("blur",function(){return i._blur()}),2&t&&(d.uIk("tabindex",i.disabled?null:i.tabIndex)("disabled",i.disabled||null)("aria-disabled",i.disabled.toString())("aria-selected",i.ariaSelected),d.ekj("mat-chip-selected",i.selected)("mat-chip-with-avatar",i.avatar)("mat-chip-with-trailing-icon",i.trailingIcon||i.removeIcon)("mat-chip-disabled",i.disabled)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[d.qOj]}),n})();const Mve=new d.OlP("mat-chips-default-options"),O4e=qye(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i}});let P4e=0;class F4e{constructor(e,t){this.source=e,this.value=t}}let Ove=(()=>{class n extends O4e{constructor(t,i,s,r,o,a,l){super(a,r,o,l),this._elementRef=t,this._changeDetectorRef=i,this._dir=s,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new _s.x,this._uid="mat-chip-list-"+P4e++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(h,c)=>h===c,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new d.vpe,this.valueChange=new d.vpe,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){var t,i;return this.multiple?(null===(t=this._selectionModel)||void 0===t?void 0:t.selected)||[]:null===(i=this._selectionModel)||void 0===i?void 0:i.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=Yi(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){var t,i,s,r;return null!==(r=null!==(t=this._required)&&void 0!==t?t:null===(s=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===s?void 0:s.hasValidator(Sre.required))&&void 0!==r&&r}set required(t){this._required=Yi(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Yi(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=Yi(t),this.chips&&this.chips.forEach(i=>i.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return(0,Sh.T)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return(0,Sh.T)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return(0,Sh.T)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return(0,Sh.T)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new vVe(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Ko(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(Ko(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Yl(null),Ko(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new _ve(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const i=t.target;i&&i.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_setSelectionByValue(t,i=!0){if(this._clearSelection(),this.chips.forEach(s=>s.deselect()),Array.isArray(t))t.forEach(s=>this._selectValue(s,i)),this._sortValues();else{const s=this._selectValue(t,i);s&&i&&this._keyManager.setActiveItem(s)}}_selectValue(t,i=!0){const s=this.chips.find(r=>null!=r.value&&this._compareWith(r.value,t));return s&&(i?s.selectViaInteraction():s.select(),this._selectionModel.select(s)),s}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(i=>{i!==t&&i.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let i=null;i=Array.isArray(this.selected)?this.selected.map(s=>s.value):this.selected?this.selected.value:t,this._value=i,this.change.emit(new F4e(this,i)),this.valueChange.emit(i),this._onChange(i),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(i=>{!this._selectionModel.isSelected(i)&&i.selected&&i.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let i=this.chips.toArray().indexOf(t.chip);this._isValidIndex(i)&&this._keyManager.updateActiveItem(i),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const i=t.chip,s=this.chips.toArray().indexOf(t.chip);this._isValidIndex(s)&&i._hasFocus&&(this._lastDestroyedChipIndex=s)})}_originatesFromChip(t){let i=t.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList.contains("mat-chip"))return!0;i=i.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(pI,8),d.Y36(dO,8),d.Y36(uO,8),d.Y36($J),d.Y36(Ub,10))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-chip-list"]],contentQueries:function(t,i,s){if(1&t&&d.Suo(s,QU,5),2&t){let r;d.iGM(r=d.CRH())&&(i.chips=r)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,i){1&t&&d.NdJ("focus",function(){return i.focus()})("blur",function(){return i._blur()})("keydown",function(r){return i._keydown(r)}),2&t&&(d.Ikx("id",i._uid),d.uIk("tabindex",i.disabled?null:i._tabIndex)("aria-describedby",i._ariaDescribedby||null)("aria-required",i.role?i.required:null)("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-multiselectable",i.multiple)("role",i.role)("aria-orientation",i.ariaOrientation),d.ekj("mat-chip-list-disabled",i.disabled)("mat-chip-list-invalid",i.errorState)("mat-chip-list-required",i.required))},inputs:{errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[d._Bn([{provide:$U,useExisting:n}]),d.qOj],ngContentSelectors:I4e,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,i){1&t&&(d.F$t(),d.TgZ(0,"div",0),d.Hsn(1),d.qZA())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),n})(),N4e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[$J,{provide:Mve,useValue:{separatorKeyCodes:[13]}}],imports:[[Rc]]}),n})();const B4e=["mat-button",""],H4e=["*"],z4e=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],j4e=WJ(jye(GJ(class{constructor(n){this._elementRef=n}})));let U4e=(()=>{class n extends j4e{constructor(t,i,s){super(t),this._focusMonitor=i,this._animationMode=s,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of z4e)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(jVe),d.Y36(HS,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&d.Gf(YJ,5),2&t){let s;d.iGM(s=d.CRH())&&(i.ripple=s.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(d.uIk("disabled",i.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[d.qOj],attrs:B4e,ngContentSelectors:H4e,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(d.F$t(),d.TgZ(0,"span",0),d.Hsn(1),d.qZA(),d._UZ(2,"span",1)(3,"span",2)),2&t&&(d.xp6(2),d.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),d.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[YJ],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),q4e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Zye,Rc],Rc]}),n})();function W4e(n,e){if(1&n&&(d.TgZ(0,"mat-option",24),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("value",t),d.xp6(1),d.hij(" ",t," ")}}function G4e(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"mat-chip",25),d.NdJ("click",function(){const r=d.CHM(t).$implicit,o=d.oxw();return o.updateSelectedProductAttributes(r,null==o.selectedAttributes?null:o.selectedAttributes.size)}),d._uU(1),d.qZA()}if(2&n){const t=e.$implicit;d.Udp("background-color",t.color),d.xp6(1),d.hij(" ",t.name," ")}}const $4e=[{path:"",redirectTo:"/mainn",pathMatch:"full"},{path:"sign-in",component:v5e},{path:"register-user",component:C5e},{path:"dashboard",component:S5e,canActivate:[uR]},{path:"forgot-password",component:x5e},{path:"verify-email-address",component:_5e},{path:"game",component:I5e,canActivate:[uR]},{path:"video",component:T5e,canActivate:[uR]},{path:"form",component:L5e,canActivate:[uR]},{path:"spotify",component:M5e,canActivate:[uR]},{path:"editor",component:P5e,canActivate:[uR]},{path:"mainn",component:F5e},{path:"product/:id",component:(()=>{class n{constructor(t,i){this.route=t,this.productService=i,this.imageUrl="",this.selectedAttributes={flavor:void 0,size:void 0}}getProduct(){const t=Number(this.route.snapshot.paramMap.get("id"));this.productService.getProduct(t).subscribe(i=>this.product=i)}get flavorOptions(){var t,i,s;return null!==(s=null===(i=null===(t=this.product)||void 0===t?void 0:t.flavors)||void 0===i?void 0:i.map(r=>r.name).join("|"))&&void 0!==s?s:"yolii"}get sizeOptions(){var t,i,s;return null!==(s=null===(i=null===(t=this.product)||void 0===t?void 0:t.sizes)||void 0===i?void 0:i.join("|"))&&void 0!==s?s:"yolii"}setImageUrl(t){var i;const s=null===(i=this.product)||void 0===i?void 0:i.imageUrls.find(r=>r.includes(t.name));if(!s)throw Error(`No flavor for ${t.name} value`);this.imageUrl=s}ngOnInit(){var t,i,s;this.getProduct(),this.setSelectedAttributes(null===(t=this.product)||void 0===t?void 0:t.flavors[0],null===(i=this.product)||void 0===i?void 0:i.sizes[0]),(null===(s=this.selectedAttributes)||void 0===s?void 0:s.flavor)&&this.setImageUrl(this.selectedAttributes.flavor)}updateSelectedProductAttributes(t,i){this.setSelectedAttributes(null!=t?t:{name:"none",color:"#DDD"},null!=i?i:jr.SMALL),this.selectedAttributes.flavor&&this.setImageUrl(this.selectedAttributes.flavor)}setSelectedAttributes(t,i){this.selectedAttributes={flavor:t,size:i}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ju),d.Y36(Jbe))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-product-page"]],decls:41,vars:14,consts:[["SideClass","navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar intro-fixed-nav",3,"containerInside"],["routerLink","/mainn",1,"logo","navbar-brand"],["routerLink","/mainn","routerLinkActive","active","src","https://res.cloudinary.com/djjocjsr5/image/upload/v1652018740/lazy_notes-logos_transparent_xlllqg.png","width","80","width","80","alt","There supposed to be a logo somewhere"],[1,"navbar-nav","mr-auto"],["mdbWavesEffect","",1,"nav-item","active","waves-light"],["mdbBtn","","type","submit","gradient","peach","rounded","true","mdbWavesEffect","","routerLink","/mainn"],[1,"sr-only"],["mdbWavesEffect","",1,"nav-item","waves-light"],["mdbBtn","","type","submit","gradient","aqua","rounded","true","mdbWavesEffect","","onclick",'alert("Dziekujemy za twoja opinie")'],["mdbBtn","","type","submit","gradient","purple","rounded","true","mdbWavesEffect","","onclick",'alert("Dziekujemy za twoja opinie")'],["mdbBtn","","type","submit","gradient","purple","rounded","true","mdbWavesEffect","","routerLink","/homepage"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","","routerLink","/register-user",2,"text-align","center"],["mdbBtn","","type","button","gradient","purple","rounded","true","mdbWavesEffect","","routerLink","/sign-in",2,"text-align","center"],[1,"product-page-card"],["fxLayout","row","fxAlign","center",1,"product-page-card-title"],["mat-card-image","",3,"src"],["fxLayout","column","fxLayoutAlign","space-around center"],["appearance","fill"],["required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Flavors selection"],["class","chip mat-elevation-6",3,"background-color","click",4,"ngFor","ngForOf"],["fxLayoutAlign","center"],["mat-raised-button","","color","primary","data-item-custom1-name","Flavor","data-item-custom2-name","Size",1,"snipcart-add-item"],[3,"value"],[1,"chip","mat-elevation-6",3,"click"]],template:function(t,i){1&t&&(d.TgZ(0,"mdb-navbar",0)(1,"mdb-navbar-brand")(2,"a",1),d._UZ(3,"img",2),d.qZA()(),d.TgZ(4,"links")(5,"ul",3)(6,"li",4)(7,"button",5),d._uU(8,"Strona G\u0142\xf3wna"),d.qZA(),d.TgZ(9,"span",6),d._uU(10,"(current)"),d.qZA()(),d.TgZ(11,"li",7)(12,"button",8),d._uU(13,"O nas"),d.qZA()(),d.TgZ(14,"li",7)(15,"button",9),d._uU(16,"Cennik"),d.qZA()(),d.TgZ(17,"li",7)(18,"button",10),d._uU(19,"Sklep"),d.qZA()()(),d.TgZ(20,"button",11),d._uU(21,"Rejestracja"),d.qZA(),d.TgZ(22,"button",12),d._uU(23,"Logowanie"),d.qZA()()(),d.TgZ(24,"mat-card",13)(25,"mat-card-title",14),d._uU(26),d.qZA(),d._UZ(27,"img",15),d.TgZ(28,"mat-card-content",16)(29,"mat-form-field",17)(30,"mat-label"),d._uU(31,"Size"),d.qZA(),d.TgZ(32,"mat-select",18),d.NdJ("selectionChange",function(r){return i.updateSelectedProductAttributes(null==i.selectedAttributes?null:i.selectedAttributes.flavor,r.value)}),d.YNc(33,W4e,2,2,"mat-option",19),d.qZA()(),d.TgZ(34,"h4"),d._uU(35,"Select your flavor:"),d.qZA(),d.TgZ(36,"mat-chip-list",20),d.YNc(37,G4e,2,3,"mat-chip",21),d.qZA()(),d.TgZ(38,"mat-card-actions",22)(39,"button",23),d._uU(40," Add to cart "),d.qZA()()()),2&t&&(d.Q6J("containerInside",!1),d.xp6(26),d.hij(" ",null==i.product?null:i.product.name,""),d.xp6(1),d.Q6J("src",i.imageUrl,d.LSH),d.xp6(6),d.Q6J("ngForOf",null==i.product?null:i.product.sizes),d.xp6(4),d.Q6J("ngForOf",null==i.product?null:i.product.flavors),d.xp6(2),d.uIk("data-item-id",null==i.product?null:i.product.id)("data-item-price",null==i.product?null:i.product.price)("data-item-url","api/products"+(null==i.product?null:i.product.id))("data-item-image",i.imageUrl)("data-item-name",null==i.product?null:i.product.name)("data-item-custom1-options",i.flavorOptions)("data-item-custom1-value",null==i.selectedAttributes||null==i.selectedAttributes.flavor?null:i.selectedAttributes.flavor.name)("data-item-custom2-options",i.sizeOptions)("data-item-custom2-value",null==i.selectedAttributes?null:i.selectedAttributes.size))},directives:[cJ,dJ,kd,th,Gc,bU,zp,zu,nve,ive,IU,sve,GUe,yJ,Eqe,ZJ,E4e,vr,Jye,Ove,QU,$Ue,U4e],styles:[".product-page-card-title[_ngcontent-%COMP%]{display:flex;justify-content:center;font-family:Pacifico,cursive;padding:1em 0}.product-page-card[_ngcontent-%COMP%]{margin-top:6em}.product-page-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;max-height:260px}.chip[_ngcontent-%COMP%]{font-size:18px;color:#fdf6eb}@media (min-width: 900px){.product-page-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain}.chip[_ngcontent-%COMP%]:hover{cursor:pointer}}"]}),n})()},{path:"**",component:QUe}];let K4e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[dB.forRoot($4e)],dB]}),n})(),Y4e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Rc],Rc]}),n})(),uWe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Rc],Rc]}),n})(),Xve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[pJ]]}),n})(),rCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[pJ]]}),n})(),Q8e=(()=>{class n{constructor(t,i){tc(i)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,i=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:Og,useValue:Object.assign(Object.assign({},fJ),t)},{provide:mJ,useValue:i,multi:!0},{provide:fR,useValue:!0}]:[{provide:Og,useValue:Object.assign(Object.assign({},fJ),t)},{provide:mJ,useValue:i,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fR),d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Xbe,Xve,rCe],Xbe,Xve,rCe]}),n})(),J8e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[dx]}),n.\u0275inj=d.cJS({providers:[jp],imports:[[Qp,nl.hO.initializeApp(bre_firebase),HB,iSe,L2,pIe,K4e,qQ,b5e.forRoot(),TUe,Q8e,q4e,KUe,N4e,uWe,_4e,Y4e,k3e]]}),n})();(0,d.G48)(),Gg().bootstrapModule(J8e).catch(n=>console.error(n))},5867:(Li,Et,se)=>{"use strict";se.d(Et,{Mq:()=>d.getApp,C6:()=>d.getApps});var d=se(9681);(0,d.registerVersion)("firebase","9.6.7","app")},127:(Li,Et,se)=>{"use strict";se.d(Et,{Z:()=>d.Z});var d=se(3942);d.Z.registerVersion("firebase","9.6.7","app-compat")},5881:(Li,Et,se)=>{"use strict";se.r(Et);var d=se(5861),he=se(3942),J=se(4929),Ge=se(2090),Pe=(se(9681),se(1877),se(4859));function $e(){return window}function pe(){return(pe=(0,d.Z)(function*(qe,we,ve){var xt;const{BuildInfo:Jt}=$e();(0,J.ap)(we.sessionId,"AuthEvent did not contain a session ID");const Mi=yield Xe(we.sessionId),Ss={};return(0,J.aq)()?Ss.ibi=Jt.packageName:(0,J.ar)()?Ss.apn=Jt.packageName:(0,J.as)(qe,"operation-not-supported-in-this-environment"),Jt.displayName&&(Ss.appDisplayName=Jt.displayName),Ss.sessionId=Mi,(0,J.at)(qe,ve,we.type,void 0,null!==(xt=we.eventId)&&void 0!==xt?xt:void 0,Ss)})).apply(this,arguments)}function $t(){return($t=(0,d.Z)(function*(qe){const{BuildInfo:we}=$e(),ve={};(0,J.aq)()?ve.iosBundleId=we.packageName:(0,J.ar)()?ve.androidPackageName=we.packageName:(0,J.as)(qe,"operation-not-supported-in-this-environment"),yield(0,J.au)(qe,ve)})).apply(this,arguments)}function Wt(){return(Wt=(0,d.Z)(function*(qe,we,ve){const{cordova:xt}=$e();let Jt=()=>{};try{yield new Promise((Mi,Ss)=>{let $s=null;function Ps(){var Fs;Mi();const Qa=null===(Fs=xt.plugins.browsertab)||void 0===Fs?void 0:Fs.close;"function"==typeof Qa&&Qa(),"function"==typeof(null==ve?void 0:ve.close)&&ve.close()}function no(){$s||($s=window.setTimeout(()=>{Ss((0,J.av)(qe,"redirect-cancelled-by-user"))},2e3))}function Wl(){"visible"===(null==document?void 0:document.visibilityState)&&no()}we.addPassiveListener(Ps),document.addEventListener("resume",no,!1),(0,J.ar)()&&document.addEventListener("visibilitychange",Wl,!1),Jt=()=>{we.removePassiveListener(Ps),document.removeEventListener("resume",no,!1),document.removeEventListener("visibilitychange",Wl,!1),$s&&window.clearTimeout($s)}})}finally{Jt()}})).apply(this,arguments)}function Xe(qe){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(qe){const we=kt(qe),ve=yield crypto.subtle.digest("SHA-256",we);return Array.from(new Uint8Array(ve)).map(Jt=>Jt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function kt(qe){if((0,J.ap)(/[0-9a-zA-Z]+/.test(qe),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(qe);const we=new ArrayBuffer(qe.length),ve=new Uint8Array(we);for(let xt=0;xt<qe.length;xt++)ve[xt]=qe.charCodeAt(xt);return ve}class vt extends J.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(we=>{this.resolveInialized=we})}addPassiveListener(we){this.passiveListeners.add(we)}removePassiveListener(we){this.passiveListeners.delete(we)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(we){return this.resolveInialized(),this.passiveListeners.forEach(ve=>ve(we)),super.onEvent(we)}initialized(){var we=this;return(0,d.Z)(function*(){yield we.initPromise})()}}function He(qe){return pi.apply(this,arguments)}function pi(){return(pi=(0,d.Z)(function*(qe){const we=yield tt()._get(lt(qe));return we&&(yield tt()._remove(lt(qe))),we})).apply(this,arguments)}function it(){const qe=[],we="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let ve=0;ve<20;ve++){const xt=Math.floor(Math.random()*we.length);qe.push(we.charAt(xt))}return qe.join("")}function tt(){return(0,J.ax)(J.b)}function lt(qe){return(0,J.ay)("authEvent",qe.config.apiKey,qe.name)}function ns(qe){if(!(null==qe?void 0:qe.includes("?")))return{};const[we,...ve]=qe.split("?");return(0,Ge.zd)(ve.join("?"))}function Ri(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,J.av)("no-auth-event")}}function ln(){var qe;return(null===(qe=null==self?void 0:self.location)||void 0===qe?void 0:qe.protocol)||null}function fr(qe=(0,Ge.z$)()){return!("file:"!==ln()&&"ionic:"!==ln()||!qe.toLowerCase().match(/iphone|ipad|ipod|android/))}function fh(){try{const qe=self.localStorage,we=J.aG();if(qe)return qe.setItem(we,"1"),qe.removeItem(we),!function Lc(qe=(0,Ge.z$)()){return function To(){return(0,Ge.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ma(qe=(0,Ge.z$)()){return/Edge\/\d+/.test(qe)}(qe)}()||(0,Ge.hl)()}catch(qe){return Qh()&&(0,Ge.hl)()}return!1}function Qh(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function so(){return(function An(){return"http:"===ln()||"https:"===ln()}()||(0,Ge.ru)()||fr())&&!function Xh(){return(0,Ge.b$)()||(0,Ge.UG)()}()&&fh()&&!Qh()}function Mc(){return fr()&&"undefined"!=typeof document}function Xa(){return(Xa=(0,d.Z)(function*(){return!!Mc()&&new Promise(qe=>{const we=setTimeout(()=>{qe(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(we),qe(!0)})})})).apply(this,arguments)}const fn={LOCAL:"local",NONE:"none",SESSION:"session"},Oa=J.aw,qi="persistence";function fs(qe){return _n.apply(this,arguments)}function _n(){return(_n=(0,d.Z)(function*(qe){yield qe._initializationPromise;const we=ws(),ve=J.ay(qi,qe.config.apiKey,qe.name);we&&we.setItem(ve,qe._getPersistence())})).apply(this,arguments)}function ws(){var qe;try{return(null===(qe=function Rr(){return"undefined"!=typeof window?window:null}())||void 0===qe?void 0:qe.sessionStorage)||null}catch(we){return null}}const Ai=J.aw;class fi{constructor(){this.browserResolver=J.ax(J.k),this.cordovaResolver=J.ax(class Ur{constructor(){this._redirectPersistence=J.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=J.aA}_initialize(we){var ve=this;return(0,d.Z)(function*(){const xt=we._key();let Jt=ve.eventManagers.get(xt);return Jt||(Jt=new vt(we),ve.eventManagers.set(xt,Jt),ve.attachCallbackListeners(we,Jt)),Jt})()}_openPopup(we){(0,J.as)(we,"operation-not-supported-in-this-environment")}_openRedirect(we,ve,xt,Jt){var Mi=this;return(0,d.Z)(function*(){!function Ie(qe){var we,ve,xt,Jt,Mi,Ss,$s,Ps,no,Wl;const Fs=$e();(0,J.aw)("function"==typeof(null===(we=null==Fs?void 0:Fs.universalLinks)||void 0===we?void 0:we.subscribe),qe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,J.aw)(void 0!==(null===(ve=null==Fs?void 0:Fs.BuildInfo)||void 0===ve?void 0:ve.packageName),qe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,J.aw)("function"==typeof(null===(Mi=null===(Jt=null===(xt=null==Fs?void 0:Fs.cordova)||void 0===xt?void 0:xt.plugins)||void 0===Jt?void 0:Jt.browsertab)||void 0===Mi?void 0:Mi.openUrl),qe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,J.aw)("function"==typeof(null===(Ps=null===($s=null===(Ss=null==Fs?void 0:Fs.cordova)||void 0===Ss?void 0:Ss.plugins)||void 0===$s?void 0:$s.browsertab)||void 0===Ps?void 0:Ps.isAvailable),qe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,J.aw)("function"==typeof(null===(Wl=null===(no=null==Fs?void 0:Fs.cordova)||void 0===no?void 0:no.InAppBrowser)||void 0===Wl?void 0:Wl.open),qe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(we);const Ss=yield Mi._initialize(we);yield Ss.initialized(),Ss.resetRedirect(),(0,J.aB)(),yield Mi._originValidation(we);const $s=function ct(qe,we,ve=null){return{type:we,eventId:ve,urlResponse:null,sessionId:it(),postBody:null,tenantId:qe.tenantId,error:(0,J.av)(qe,"no-auth-event")}}(we,xt,Jt);yield function ni(qe,we){return tt()._set(lt(qe),we)}(we,$s);const Ps=yield function be(qe,we,ve){return pe.apply(this,arguments)}(we,$s,ve),no=yield function Tt(qe){const{cordova:we}=$e();return new Promise(ve=>{we.plugins.browsertab.isAvailable(xt=>{let Jt=null;xt?we.plugins.browsertab.openUrl(qe):Jt=we.InAppBrowser.open(qe,(0,J.ao)()?"_blank":"_system","location=yes"),ve(Jt)})})}(Ps);return function Ft(qe,we,ve){return Wt.apply(this,arguments)}(we,Ss,no)})()}_isIframeWebStorageSupported(we,ve){throw new Error("Method not implemented.")}_originValidation(we){const ve=we._key();return this.originValidationPromises[ve]||(this.originValidationPromises[ve]=function Ne(qe){return $t.apply(this,arguments)}(we)),this.originValidationPromises[ve]}attachCallbackListeners(we,ve){const{universalLinks:xt,handleOpenURL:Jt,BuildInfo:Mi}=$e(),Ss=setTimeout((0,d.Z)(function*(){yield He(we),ve.onEvent(Ri())}),500),$s=function(){var Wl=(0,d.Z)(function*(Fs){clearTimeout(Ss);const Qa=yield He(we);let Oc=null;Qa&&(null==Fs?void 0:Fs.url)&&(Oc=function Re(qe,we){var ve,xt;const Jt=function Qe(qe){const we=ns(qe),ve=we.link?decodeURIComponent(we.link):void 0,xt=ns(ve).link,Jt=we.deep_link_id?decodeURIComponent(we.deep_link_id):void 0;return ns(Jt).link||Jt||xt||ve||qe}(we);if(Jt.includes("/__/auth/callback")){const Mi=ns(Jt),Ss=Mi.firebaseError?function Ht(qe){try{return JSON.parse(qe)}catch(we){return null}}(decodeURIComponent(Mi.firebaseError)):null,$s=null===(xt=null===(ve=null==Ss?void 0:Ss.code)||void 0===ve?void 0:ve.split("auth/"))||void 0===xt?void 0:xt[1],Ps=$s?(0,J.av)($s):null;return Ps?{type:qe.type,eventId:qe.eventId,tenantId:qe.tenantId,error:Ps,urlResponse:null,sessionId:null,postBody:null}:{type:qe.type,eventId:qe.eventId,tenantId:qe.tenantId,sessionId:qe.sessionId,urlResponse:Jt,postBody:null}}return null}(Qa,Fs.url)),ve.onEvent(Oc||Ri())});return function(Qa){return Wl.apply(this,arguments)}}();void 0!==xt&&"function"==typeof xt.subscribe&&xt.subscribe(null,$s);const Ps=Jt,no=`${Mi.packageName.toLowerCase()}://`;$e().handleOpenURL=function(){var Wl=(0,d.Z)(function*(Fs){if(Fs.toLowerCase().startsWith(no)&&$s({url:Fs}),"function"==typeof Ps)try{Ps(Fs)}catch(Qa){console.error(Qa)}});return function(Fs){return Wl.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=J.a,this._completeRedirectFn=J.aA}_initialize(we){var ve=this;return(0,d.Z)(function*(){return yield ve.selectUnderlyingResolver(),ve.assertedUnderlyingResolver._initialize(we)})()}_openPopup(we,ve,xt,Jt){var Mi=this;return(0,d.Z)(function*(){return yield Mi.selectUnderlyingResolver(),Mi.assertedUnderlyingResolver._openPopup(we,ve,xt,Jt)})()}_openRedirect(we,ve,xt,Jt){var Mi=this;return(0,d.Z)(function*(){return yield Mi.selectUnderlyingResolver(),Mi.assertedUnderlyingResolver._openRedirect(we,ve,xt,Jt)})()}_isIframeWebStorageSupported(we,ve){this.assertedUnderlyingResolver._isIframeWebStorageSupported(we,ve)}_originValidation(we){return this.assertedUnderlyingResolver._originValidation(we)}get _shouldInitProactively(){return Mc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ai(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var we=this;return(0,d.Z)(function*(){if(we.underlyingResolver)return;const ve=yield function Gi(){return Xa.apply(this,arguments)}();we.underlyingResolver=ve?we.cordovaResolver:we.browserResolver})()}}function iu(qe){return qe.unwrap()}function Xs(qe){return Do(qe)}function Do(qe){const{_tokenResponse:we}=qe instanceof Ge.ZR?qe.customData:qe;if(!we)return null;if(!(qe instanceof Ge.ZR)&&"temporaryProof"in we&&"phoneNumber"in we)return J.P.credentialFromResult(qe);const ve=we.providerId;if(!ve||ve===J.o.PASSWORD)return null;let xt;switch(ve){case J.o.GOOGLE:xt=J.N;break;case J.o.FACEBOOK:xt=J.M;break;case J.o.GITHUB:xt=J.Q;break;case J.o.TWITTER:xt=J.V;break;default:const{oauthIdToken:Jt,oauthAccessToken:Mi,oauthTokenSecret:Ss,pendingToken:$s,nonce:Ps}=we;return Mi||Ss||Jt||$s?$s?ve.startsWith("saml.")?J.aJ._create(ve,$s):J.I._fromParams({providerId:ve,signInMethod:ve,pendingToken:$s,idToken:Jt,accessToken:Mi}):new J.T(ve).credential({idToken:Jt,accessToken:Mi,rawNonce:Ps}):null}return qe instanceof Ge.ZR?xt.credentialFromError(qe):xt.credentialFromResult(qe)}function ar(qe,we){return we.catch(ve=>{throw ve instanceof Ge.ZR&&function su(qe,we){var ve;const xt=null===(ve=we.customData)||void 0===ve?void 0:ve._tokenResponse;if("auth/multi-factor-auth-required"===we.code)we.resolver=new Se(qe,J.am(qe,we));else if(xt){const Jt=Do(we),Mi=we;Jt&&(Mi.credential=Jt,Mi.tenantId=xt.tenantId||void 0,Mi.email=xt.email||void 0,Mi.phoneNumber=xt.phoneNumber||void 0)}}(qe,ve),ve}).then(ve=>{const Jt=ve.user;return{operationType:ve.operationType,credential:Xs(ve),additionalUserInfo:J.ak(ve),user:gt.getOrCreate(Jt)}})}function de(qe,we){return ye.apply(this,arguments)}function ye(){return(ye=(0,d.Z)(function*(qe,we){const ve=yield we;return{verificationId:ve.verificationId,confirm:xt=>ar(qe,ve.confirm(xt))}})).apply(this,arguments)}class Se{constructor(we,ve){this.resolver=ve,this.auth=function gd(qe){return qe.wrapped()}(we)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(we){return ar(iu(this.auth),this.resolver.resolveSignIn(we))}}class gt{constructor(we){this._delegate=we,this.multiFactor=J.an(we)}static getOrCreate(we){return gt.USER_MAP.has(we)||gt.USER_MAP.set(we,new gt(we)),gt.USER_MAP.get(we)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(we){return this._delegate.getIdTokenResult(we)}getIdToken(we){return this._delegate.getIdToken(we)}linkAndRetrieveDataWithCredential(we){return this.linkWithCredential(we)}linkWithCredential(we){var ve=this;return(0,d.Z)(function*(){return ar(ve.auth,J.Y(ve._delegate,we))})()}linkWithPhoneNumber(we,ve){var xt=this;return(0,d.Z)(function*(){return de(xt.auth,J.l(xt._delegate,we,ve))})()}linkWithPopup(we){var ve=this;return(0,d.Z)(function*(){return ar(ve.auth,J.d(ve._delegate,we,fi))})()}linkWithRedirect(we){var ve=this;return(0,d.Z)(function*(){return yield fs(J.aC(ve.auth)),J.g(ve._delegate,we,fi)})()}reauthenticateAndRetrieveDataWithCredential(we){return this.reauthenticateWithCredential(we)}reauthenticateWithCredential(we){var ve=this;return(0,d.Z)(function*(){return ar(ve.auth,J.Z(ve._delegate,we))})()}reauthenticateWithPhoneNumber(we,ve){return de(this.auth,J.r(this._delegate,we,ve))}reauthenticateWithPopup(we){return ar(this.auth,J.e(this._delegate,we,fi))}reauthenticateWithRedirect(we){var ve=this;return(0,d.Z)(function*(){return yield fs(J.aC(ve.auth)),J.h(ve._delegate,we,fi)})()}sendEmailVerification(we){return J.aa(this._delegate,we)}unlink(we){var ve=this;return(0,d.Z)(function*(){return yield J.aj(ve._delegate,we),ve})()}updateEmail(we){return J.af(this._delegate,we)}updatePassword(we){return J.ag(this._delegate,we)}updatePhoneNumber(we){return J.u(this._delegate,we)}updateProfile(we){return J.ae(this._delegate,we)}verifyBeforeUpdateEmail(we,ve){return J.ab(this._delegate,we,ve)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}gt.USER_MAP=new WeakMap;const ze=J.aw;let ri=(()=>{class qe{constructor(ve,xt){if(this.app=ve,xt.isInitialized())return this._delegate=xt.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Jt}=ve.options;ze(Jt,"invalid-api-key",{appName:ve.name}),ze(Jt,"invalid-api-key",{appName:ve.name});const Mi="undefined"!=typeof window?fi:void 0;this._delegate=xt.initialize({options:{persistence:mn(Jt,ve.name),popupRedirectResolver:Mi}}),this._delegate._updateErrorMap(J.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?gt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(ve){this._delegate.languageCode=ve}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(ve){this._delegate.tenantId=ve}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(ve,xt){J.E(this._delegate,ve,xt)}applyActionCode(ve){return J.a1(this._delegate,ve)}checkActionCode(ve){return J.a2(this._delegate,ve)}confirmPasswordReset(ve,xt){return J.a0(this._delegate,ve,xt)}createUserWithEmailAndPassword(ve,xt){var Jt=this;return(0,d.Z)(function*(){return ar(Jt._delegate,J.a4(Jt._delegate,ve,xt))})()}fetchProvidersForEmail(ve){return this.fetchSignInMethodsForEmail(ve)}fetchSignInMethodsForEmail(ve){return J.a9(this._delegate,ve)}isSignInWithEmailLink(ve){return J.a7(this._delegate,ve)}getRedirectResult(){var ve=this;return(0,d.Z)(function*(){ze(so(),ve._delegate,"operation-not-supported-in-this-environment");const xt=yield J.j(ve._delegate,fi);return xt?ar(ve._delegate,Promise.resolve(xt)):{credential:null,user:null}})()}addFrameworkForLogging(ve){!function Zo(qe,we){(0,J.aC)(qe)._logFramework(we)}(this._delegate,ve)}onAuthStateChanged(ve,xt,Jt){const{next:Mi,error:Ss,complete:$s}=Wi(ve,xt,Jt);return this._delegate.onAuthStateChanged(Mi,Ss,$s)}onIdTokenChanged(ve,xt,Jt){const{next:Mi,error:Ss,complete:$s}=Wi(ve,xt,Jt);return this._delegate.onIdTokenChanged(Mi,Ss,$s)}sendSignInLinkToEmail(ve,xt){return J.a6(this._delegate,ve,xt)}sendPasswordResetEmail(ve,xt){return J.$(this._delegate,ve,xt||void 0)}setPersistence(ve){var xt=this;return(0,d.Z)(function*(){let Jt;switch(function Fi(qe,we){Oa(Object.values(fn).includes(we),qe,"invalid-persistence-type"),(0,Ge.b$)()?Oa(we!==fn.SESSION,qe,"unsupported-persistence-type"):(0,Ge.UG)()?Oa(we===fn.NONE,qe,"unsupported-persistence-type"):Qh()?Oa(we===fn.NONE||we===fn.LOCAL&&(0,Ge.hl)(),qe,"unsupported-persistence-type"):Oa(we===fn.NONE||fh(),qe,"unsupported-persistence-type")}(xt._delegate,ve),ve){case fn.SESSION:Jt=J.a;break;case fn.LOCAL:Jt=(yield J.ax(J.i)._isAvailable())?J.i:J.b;break;case fn.NONE:Jt=J.K;break;default:return J.as("argument-error",{appName:xt._delegate.name})}return xt._delegate.setPersistence(Jt)})()}signInAndRetrieveDataWithCredential(ve){return this.signInWithCredential(ve)}signInAnonymously(){return ar(this._delegate,J.W(this._delegate))}signInWithCredential(ve){return ar(this._delegate,J.X(this._delegate,ve))}signInWithCustomToken(ve){return ar(this._delegate,J._(this._delegate,ve))}signInWithEmailAndPassword(ve,xt){return ar(this._delegate,J.a5(this._delegate,ve,xt))}signInWithEmailLink(ve,xt){return ar(this._delegate,J.a8(this._delegate,ve,xt))}signInWithPhoneNumber(ve,xt){return de(this._delegate,J.s(this._delegate,ve,xt))}signInWithPopup(ve){var xt=this;return(0,d.Z)(function*(){return ze(so(),xt._delegate,"operation-not-supported-in-this-environment"),ar(xt._delegate,J.c(xt._delegate,ve,fi))})()}signInWithRedirect(ve){var xt=this;return(0,d.Z)(function*(){return ze(so(),xt._delegate,"operation-not-supported-in-this-environment"),yield fs(xt._delegate),J.f(xt._delegate,ve,fi)})()}updateCurrentUser(ve){return this._delegate.updateCurrentUser(ve)}verifyPasswordResetCode(ve){return J.a3(this._delegate,ve)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return qe.Persistence=fn,qe})();function Wi(qe,we,ve){let xt=qe;"function"!=typeof qe&&({next:xt,error:we,complete:ve}=qe);const Jt=xt;return{next:Ss=>Jt(Ss&&gt.getOrCreate(Ss)),error:we,complete:ve}}function mn(qe,we){const ve=function Xo(qe,we){const ve=ws();if(!ve)return[];const xt=J.ay(qi,qe,we);switch(ve.getItem(xt)){case fn.NONE:return[J.K];case fn.LOCAL:return[J.i,J.a];case fn.SESSION:return[J.a];default:return[]}}(qe,we);if("undefined"!=typeof self&&!ve.includes(J.i)&&ve.push(J.i),"undefined"!=typeof window)for(const xt of[J.b,J.a])ve.includes(xt)||ve.push(xt);return ve.includes(J.K)||ve.push(J.K),ve}class zn{constructor(){this.providerId="phone",this._delegate=new J.P(iu(he.Z.auth()))}static credential(we,ve){return J.P.credential(we,ve)}verifyPhoneNumber(we,ve){return this._delegate.verifyPhoneNumber(we,ve)}unwrap(){return this._delegate}}zn.PHONE_SIGN_IN_METHOD=J.P.PHONE_SIGN_IN_METHOD,zn.PROVIDER_ID=J.P.PROVIDER_ID;const ko=J.aw;class Qo{constructor(we,ve,xt=he.Z.app()){var Jt;ko(null===(Jt=xt.options)||void 0===Jt?void 0:Jt.apiKey,"invalid-api-key",{appName:xt.name}),this._delegate=new J.R(we,ve,xt.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ro(qe){qe.INTERNAL.registerComponent(new Pe.wA("auth-compat",we=>{const ve=we.getProvider("app-compat").getImmediate(),xt=we.getProvider("auth");return new ri(ve,xt)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:J.A.EMAIL_SIGNIN,PASSWORD_RESET:J.A.PASSWORD_RESET,RECOVER_EMAIL:J.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:J.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:J.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:J.A.VERIFY_EMAIL}},EmailAuthProvider:J.L,FacebookAuthProvider:J.M,GithubAuthProvider:J.Q,GoogleAuthProvider:J.N,OAuthProvider:J.T,SAMLAuthProvider:J.U,PhoneAuthProvider:zn,PhoneMultiFactorGenerator:J.m,RecaptchaVerifier:Qo,TwitterAuthProvider:J.V,Auth:ri,AuthCredential:J.G,Error:Ge.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),qe.registerVersion("@firebase/auth-compat","0.2.9")}(he.Z)},2940:function(Li,Et){!function(se){"use strict";function d(Ie){return Array.prototype.slice.call(Ie)}function he(Ie){return new Promise(function(Xe,Dt){Ie.onsuccess=function(){Xe(Ie.result)},Ie.onerror=function(){Dt(Ie.error)}})}function J(Ie,Xe,Dt){var kt,et=new Promise(function(vt,ct){he(kt=Ie[Xe].apply(Ie,Dt)).then(vt,ct)});return et.request=kt,et}function Ge(Ie,Xe,Dt){var kt=J(Ie,Xe,Dt);return kt.then(function(et){if(et)return new be(et,kt.request)})}function Ue(Ie,Xe,Dt){Dt.forEach(function(kt){Object.defineProperty(Ie.prototype,kt,{get:function(){return this[Xe][kt]},set:function(et){this[Xe][kt]=et}})})}function ot(Ie,Xe,Dt,kt){kt.forEach(function(et){et in Dt.prototype&&(Ie.prototype[et]=function(){return J(this[Xe],et,arguments)})})}function Pe(Ie,Xe,Dt,kt){kt.forEach(function(et){et in Dt.prototype&&(Ie.prototype[et]=function(){return this[Xe][et].apply(this[Xe],arguments)})})}function $e(Ie,Xe,Dt,kt){kt.forEach(function(et){et in Dt.prototype&&(Ie.prototype[et]=function(){return Ge(this[Xe],et,arguments)})})}function at(Ie){this._index=Ie}function be(Ie,Xe){this._cursor=Ie,this._request=Xe}function pe(Ie){this._store=Ie}function Ne(Ie){this._tx=Ie,this.complete=new Promise(function(Xe,Dt){Ie.oncomplete=function(){Xe()},Ie.onerror=function(){Dt(Ie.error)},Ie.onabort=function(){Dt(Ie.error)}})}function $t(Ie,Xe,Dt){this._db=Ie,this.oldVersion=Xe,this.transaction=new Ne(Dt)}function Tt(Ie){this._db=Ie}Ue(at,"_index",["name","keyPath","multiEntry","unique"]),ot(at,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),$e(at,"_index",IDBIndex,["openCursor","openKeyCursor"]),Ue(be,"_cursor",["direction","key","primaryKey","value"]),ot(be,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Ie){Ie in IDBCursor.prototype&&(be.prototype[Ie]=function(){var Xe=this,Dt=arguments;return Promise.resolve().then(function(){return Xe._cursor[Ie].apply(Xe._cursor,Dt),he(Xe._request).then(function(kt){if(kt)return new be(kt,Xe._request)})})})}),pe.prototype.createIndex=function(){return new at(this._store.createIndex.apply(this._store,arguments))},pe.prototype.index=function(){return new at(this._store.index.apply(this._store,arguments))},Ue(pe,"_store",["name","keyPath","indexNames","autoIncrement"]),ot(pe,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),$e(pe,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Pe(pe,"_store",IDBObjectStore,["deleteIndex"]),Ne.prototype.objectStore=function(){return new pe(this._tx.objectStore.apply(this._tx,arguments))},Ue(Ne,"_tx",["objectStoreNames","mode"]),Pe(Ne,"_tx",IDBTransaction,["abort"]),$t.prototype.createObjectStore=function(){return new pe(this._db.createObjectStore.apply(this._db,arguments))},Ue($t,"_db",["name","version","objectStoreNames"]),Pe($t,"_db",IDBDatabase,["deleteObjectStore","close"]),Tt.prototype.transaction=function(){return new Ne(this._db.transaction.apply(this._db,arguments))},Ue(Tt,"_db",["name","version","objectStoreNames"]),Pe(Tt,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Ie){[pe,at].forEach(function(Xe){Ie in Xe.prototype&&(Xe.prototype[Ie.replace("open","iterate")]=function(){var Dt=d(arguments),kt=Dt[Dt.length-1],et=this._store||this._index,vt=et[Ie].apply(et,Dt.slice(0,-1));vt.onsuccess=function(){kt(vt.result)}})})}),[at,pe].forEach(function(Ie){Ie.prototype.getAll||(Ie.prototype.getAll=function(Xe,Dt){var kt=this,et=[];return new Promise(function(vt){kt.iterateCursor(Xe,function(ct){ct?(et.push(ct.value),void 0===Dt||et.length!=Dt?ct.continue():vt(et)):vt(et)})})})}),se.openDb=function Ft(Ie,Xe,Dt){var kt=J(indexedDB,"open",[Ie,Xe]),et=kt.request;return et&&(et.onupgradeneeded=function(vt){Dt&&Dt(new $t(et.result,vt.oldVersion,et.transaction))}),kt.then(function(vt){return new Tt(vt)})},se.deleteDb=function Wt(Ie){return J(indexedDB,"deleteDatabase",[Ie])},Object.defineProperty(se,"__esModule",{value:!0})}(Et)},8306:(Li,Et,se)=>{"use strict";se.d(Et,{y:()=>be});var d=se(930),he=se(727),J=se(8822),Ge=se(4671);var Pe=se(2416),$e=se(576),at=se(2806);let be=(()=>{class Tt{constructor(Wt){Wt&&(this._subscribe=Wt)}lift(Wt){const Ie=new Tt;return Ie.source=this,Ie.operator=Wt,Ie}subscribe(Wt,Ie,Xe){const Dt=function $t(Tt){return Tt&&Tt instanceof d.Lv||function Ne(Tt){return Tt&&(0,$e.m)(Tt.next)&&(0,$e.m)(Tt.error)&&(0,$e.m)(Tt.complete)}(Tt)&&(0,he.Nn)(Tt)}(Wt)?Wt:new d.Hp(Wt,Ie,Xe);return(0,at.x)(()=>{const{operator:kt,source:et}=this;Dt.add(kt?kt.call(Dt,et):et?this._subscribe(Dt):this._trySubscribe(Dt))}),Dt}_trySubscribe(Wt){try{return this._subscribe(Wt)}catch(Ie){Wt.error(Ie)}}forEach(Wt,Ie){return new(Ie=pe(Ie))((Xe,Dt)=>{const kt=new d.Hp({next:et=>{try{Wt(et)}catch(vt){Dt(vt),kt.unsubscribe()}},error:Dt,complete:Xe});this.subscribe(kt)})}_subscribe(Wt){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Wt)}[J.L](){return this}pipe(...Wt){return function ot(Tt){return 0===Tt.length?Ge.y:1===Tt.length?Tt[0]:function(Wt){return Tt.reduce((Ie,Xe)=>Xe(Ie),Wt)}}(Wt)(this)}toPromise(Wt){return new(Wt=pe(Wt))((Ie,Xe)=>{let Dt;this.subscribe(kt=>Dt=kt,kt=>Xe(kt),()=>Ie(Dt))})}}return Tt.create=Ft=>new Tt(Ft),Tt})();function pe(Tt){var Ft;return null!==(Ft=null!=Tt?Tt:Pe.v.Promise)&&void 0!==Ft?Ft:Promise}},7579:(Li,Et,se)=>{"use strict";se.d(Et,{x:()=>Pe});var d=se(8306),he=se(727);const Ge=(0,se(3888).d)(at=>function(){at(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=se(8737),ot=se(2806);let Pe=(()=>{class at extends d.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(pe){const Ne=new $e(this,this);return Ne.operator=pe,Ne}_throwIfClosed(){if(this.closed)throw new Ge}next(pe){(0,ot.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Ne=this.observers.slice();for(const $t of Ne)$t.next(pe)}})}error(pe){(0,ot.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=pe;const{observers:Ne}=this;for(;Ne.length;)Ne.shift().error(pe)}})}complete(){(0,ot.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:pe}=this;for(;pe.length;)pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var pe;return(null===(pe=this.observers)||void 0===pe?void 0:pe.length)>0}_trySubscribe(pe){return this._throwIfClosed(),super._trySubscribe(pe)}_subscribe(pe){return this._throwIfClosed(),this._checkFinalizedStatuses(pe),this._innerSubscribe(pe)}_innerSubscribe(pe){const{hasError:Ne,isStopped:$t,observers:Tt}=this;return Ne||$t?he.Lc:(Tt.push(pe),new he.w0(()=>(0,Ue.P)(Tt,pe)))}_checkFinalizedStatuses(pe){const{hasError:Ne,thrownError:$t,isStopped:Tt}=this;Ne?pe.error($t):Tt&&pe.complete()}asObservable(){const pe=new d.y;return pe.source=this,pe}}return at.create=(be,pe)=>new $e(be,pe),at})();class $e extends Pe{constructor(be,pe){super(),this.destination=be,this.source=pe}next(be){var pe,Ne;null===(Ne=null===(pe=this.destination)||void 0===pe?void 0:pe.next)||void 0===Ne||Ne.call(pe,be)}error(be){var pe,Ne;null===(Ne=null===(pe=this.destination)||void 0===pe?void 0:pe.error)||void 0===Ne||Ne.call(pe,be)}complete(){var be,pe;null===(pe=null===(be=this.destination)||void 0===be?void 0:be.complete)||void 0===pe||pe.call(be)}_subscribe(be){var pe,Ne;return null!==(Ne=null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(be))&&void 0!==Ne?Ne:he.Lc}}},930:(Li,Et,se)=>{"use strict";se.d(Et,{Hp:()=>Wt,Lv:()=>Ne});var d=se(576),he=se(727),J=se(2416),Ge=se(7849),Ue=se(5032);const ot=at("C",void 0,void 0);function at(et,vt,ct){return{kind:et,value:vt,error:ct}}var be=se(3410),pe=se(2806);class Ne extends he.w0{constructor(vt){super(),this.isStopped=!1,vt?(this.destination=vt,(0,he.Nn)(vt)&&vt.add(this)):this.destination=kt}static create(vt,ct,ni){return new Wt(vt,ct,ni)}next(vt){this.isStopped?Dt(function $e(et){return at("N",et,void 0)}(vt),this):this._next(vt)}error(vt){this.isStopped?Dt(function Pe(et){return at("E",void 0,et)}(vt),this):(this.isStopped=!0,this._error(vt))}complete(){this.isStopped?Dt(ot,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(vt){this.destination.next(vt)}_error(vt){try{this.destination.error(vt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $t=Function.prototype.bind;function Tt(et,vt){return $t.call(et,vt)}class Ft{constructor(vt){this.partialObserver=vt}next(vt){const{partialObserver:ct}=this;if(ct.next)try{ct.next(vt)}catch(ni){Ie(ni)}}error(vt){const{partialObserver:ct}=this;if(ct.error)try{ct.error(vt)}catch(ni){Ie(ni)}else Ie(vt)}complete(){const{partialObserver:vt}=this;if(vt.complete)try{vt.complete()}catch(ct){Ie(ct)}}}class Wt extends Ne{constructor(vt,ct,ni){let He;if(super(),(0,d.m)(vt)||!vt)He={next:null!=vt?vt:void 0,error:null!=ct?ct:void 0,complete:null!=ni?ni:void 0};else{let pi;this&&J.v.useDeprecatedNextContext?(pi=Object.create(vt),pi.unsubscribe=()=>this.unsubscribe(),He={next:vt.next&&Tt(vt.next,pi),error:vt.error&&Tt(vt.error,pi),complete:vt.complete&&Tt(vt.complete,pi)}):He=vt}this.destination=new Ft(He)}}function Ie(et){J.v.useDeprecatedSynchronousErrorHandling?(0,pe.O)(et):(0,Ge.h)(et)}function Dt(et,vt){const{onStoppedNotification:ct}=J.v;ct&&be.z.setTimeout(()=>ct(et,vt))}const kt={closed:!0,next:Ue.Z,error:function Xe(et){throw et},complete:Ue.Z}},727:(Li,Et,se)=>{"use strict";se.d(Et,{Lc:()=>ot,w0:()=>Ue,Nn:()=>Pe});var d=se(576);const J=(0,se(3888).d)(at=>function(pe){at(this),this.message=pe?`${pe.length} errors occurred during unsubscription:\n${pe.map((Ne,$t)=>`${$t+1}) ${Ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=pe});var Ge=se(8737);class Ue{constructor(be){this.initialTeardown=be,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let be;if(!this.closed){this.closed=!0;const{_parentage:pe}=this;if(pe)if(this._parentage=null,Array.isArray(pe))for(const Tt of pe)Tt.remove(this);else pe.remove(this);const{initialTeardown:Ne}=this;if((0,d.m)(Ne))try{Ne()}catch(Tt){be=Tt instanceof J?Tt.errors:[Tt]}const{_teardowns:$t}=this;if($t){this._teardowns=null;for(const Tt of $t)try{$e(Tt)}catch(Ft){be=null!=be?be:[],Ft instanceof J?be=[...be,...Ft.errors]:be.push(Ft)}}if(be)throw new J(be)}}add(be){var pe;if(be&&be!==this)if(this.closed)$e(be);else{if(be instanceof Ue){if(be.closed||be._hasParent(this))return;be._addParent(this)}(this._teardowns=null!==(pe=this._teardowns)&&void 0!==pe?pe:[]).push(be)}}_hasParent(be){const{_parentage:pe}=this;return pe===be||Array.isArray(pe)&&pe.includes(be)}_addParent(be){const{_parentage:pe}=this;this._parentage=Array.isArray(pe)?(pe.push(be),pe):pe?[pe,be]:be}_removeParent(be){const{_parentage:pe}=this;pe===be?this._parentage=null:Array.isArray(pe)&&(0,Ge.P)(pe,be)}remove(be){const{_teardowns:pe}=this;pe&&(0,Ge.P)(pe,be),be instanceof Ue&&be._removeParent(this)}}Ue.EMPTY=(()=>{const at=new Ue;return at.closed=!0,at})();const ot=Ue.EMPTY;function Pe(at){return at instanceof Ue||at&&"closed"in at&&(0,d.m)(at.remove)&&(0,d.m)(at.add)&&(0,d.m)(at.unsubscribe)}function $e(at){(0,d.m)(at)?at():at.unsubscribe()}},2416:(Li,Et,se)=>{"use strict";se.d(Et,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Li,Et,se)=>{"use strict";se.d(Et,{E:()=>he});const he=new(se(8306).y)(Ue=>Ue.complete())},8996:(Li,Et,se)=>{"use strict";se.d(Et,{D:()=>vt});var d=se(8421),he=se(5363),J=se(9468),ot=se(8306),$e=se(2202),at=se(576),be=se(9672);function Ne(ct,ni){if(!ct)throw new Error("Iterable cannot be null");return new ot.y(He=>{(0,be.f)(He,ni,()=>{const pi=ct[Symbol.asyncIterator]();(0,be.f)(He,ni,()=>{pi.next().then(Re=>{Re.done?He.complete():He.next(Re.value)})},0,!0)})})}var $t=se(3670),Tt=se(8239),Ft=se(1144),Wt=se(6495),Ie=se(2206),Xe=se(4532),Dt=se(3260);function vt(ct,ni){return ni?function et(ct,ni){if(null!=ct){if((0,$t.c)(ct))return function Ge(ct,ni){return(0,d.Xf)(ct).pipe((0,J.R)(ni),(0,he.Q)(ni))}(ct,ni);if((0,Ft.z)(ct))return function Pe(ct,ni){return new ot.y(He=>{let pi=0;return ni.schedule(function(){pi===ct.length?He.complete():(He.next(ct[pi++]),He.closed||this.schedule())})})}(ct,ni);if((0,Tt.t)(ct))return function Ue(ct,ni){return(0,d.Xf)(ct).pipe((0,J.R)(ni),(0,he.Q)(ni))}(ct,ni);if((0,Ie.D)(ct))return Ne(ct,ni);if((0,Wt.T)(ct))return function pe(ct,ni){return new ot.y(He=>{let pi;return(0,be.f)(He,ni,()=>{pi=ct[$e.h](),(0,be.f)(He,ni,()=>{let Re,it;try{({value:Re,done:it}=pi.next())}catch(tt){return void He.error(tt)}it?He.complete():He.next(Re)},0,!0)}),()=>(0,at.m)(null==pi?void 0:pi.return)&&pi.return()})}(ct,ni);if((0,Dt.L)(ct))return function kt(ct,ni){return Ne((0,Dt.Q)(ct),ni)}(ct,ni)}throw(0,Xe.z)(ct)}(ct,ni):(0,d.Xf)(ct)}},8421:(Li,Et,se)=>{"use strict";se.d(Et,{Xf:()=>$t});var d=se(655),he=se(1144),J=se(8239),Ge=se(8306),Ue=se(3670),ot=se(2206),Pe=se(4532),$e=se(6495),at=se(3260),be=se(576),pe=se(7849),Ne=se(8822);function $t(et){if(et instanceof Ge.y)return et;if(null!=et){if((0,Ue.c)(et))return function Tt(et){return new Ge.y(vt=>{const ct=et[Ne.L]();if((0,be.m)(ct.subscribe))return ct.subscribe(vt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(et);if((0,he.z)(et))return function Ft(et){return new Ge.y(vt=>{for(let ct=0;ct<et.length&&!vt.closed;ct++)vt.next(et[ct]);vt.complete()})}(et);if((0,J.t)(et))return function Wt(et){return new Ge.y(vt=>{et.then(ct=>{vt.closed||(vt.next(ct),vt.complete())},ct=>vt.error(ct)).then(null,pe.h)})}(et);if((0,ot.D)(et))return Xe(et);if((0,$e.T)(et))return function Ie(et){return new Ge.y(vt=>{for(const ct of et)if(vt.next(ct),vt.closed)return;vt.complete()})}(et);if((0,at.L)(et))return function Dt(et){return Xe((0,at.Q)(et))}(et)}throw(0,Pe.z)(et)}function Xe(et){return new Ge.y(vt=>{(function kt(et,vt){var ct,ni,He,pi;return(0,d.mG)(this,void 0,void 0,function*(){try{for(ct=(0,d.KL)(et);!(ni=yield ct.next()).done;)if(vt.next(ni.value),vt.closed)return}catch(Re){He={error:Re}}finally{try{ni&&!ni.done&&(pi=ct.return)&&(yield pi.call(ct))}finally{if(He)throw He.error}}vt.complete()})})(et,vt).catch(ct=>vt.error(ct))})}},6451:(Li,Et,se)=>{"use strict";se.d(Et,{T:()=>ot});var d=se(8189),he=se(8421),J=se(515),Ge=se(3269),Ue=se(8996);function ot(...Pe){const $e=(0,Ge.yG)(Pe),at=(0,Ge._6)(Pe,1/0),be=Pe;return be.length?1===be.length?(0,he.Xf)(be[0]):(0,d.J)(at)((0,Ue.D)(be,$e)):J.E}},5403:(Li,Et,se)=>{"use strict";se.d(Et,{x:()=>he});var d=se(930);function he(Ge,Ue,ot,Pe,$e){return new J(Ge,Ue,ot,Pe,$e)}class J extends d.Lv{constructor(Ue,ot,Pe,$e,at,be){super(Ue),this.onFinalize=at,this.shouldUnsubscribe=be,this._next=ot?function(pe){try{ot(pe)}catch(Ne){Ue.error(Ne)}}:super._next,this._error=$e?function(pe){try{$e(pe)}catch(Ne){Ue.error(Ne)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(pe){Ue.error(pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ot}=this;super.unsubscribe(),!ot&&(null===(Ue=this.onFinalize)||void 0===Ue||Ue.call(this))}}}},4004:(Li,Et,se)=>{"use strict";se.d(Et,{U:()=>J});var d=se(4482),he=se(5403);function J(Ge,Ue){return(0,d.e)((ot,Pe)=>{let $e=0;ot.subscribe((0,he.x)(Pe,at=>{Pe.next(Ge.call(Ue,at,$e++))}))})}},8189:(Li,Et,se)=>{"use strict";se.d(Et,{J:()=>J});var d=se(5577),he=se(4671);function J(Ge=1/0){return(0,d.z)(he.y,Ge)}},5577:(Li,Et,se)=>{"use strict";se.d(Et,{z:()=>$e});var d=se(4004),he=se(8421),J=se(4482),Ge=se(9672),Ue=se(5403),Pe=se(576);function $e(at,be,pe=1/0){return(0,Pe.m)(be)?$e((Ne,$t)=>(0,d.U)((Tt,Ft)=>be(Ne,Tt,$t,Ft))((0,he.Xf)(at(Ne,$t))),pe):("number"==typeof be&&(pe=be),(0,J.e)((Ne,$t)=>function ot(at,be,pe,Ne,$t,Tt,Ft,Wt){const Ie=[];let Xe=0,Dt=0,kt=!1;const et=()=>{kt&&!Ie.length&&!Xe&&be.complete()},vt=ni=>Xe<Ne?ct(ni):Ie.push(ni),ct=ni=>{Tt&&be.next(ni),Xe++;let He=!1;(0,he.Xf)(pe(ni,Dt++)).subscribe((0,Ue.x)(be,pi=>{null==$t||$t(pi),Tt?vt(pi):be.next(pi)},()=>{He=!0},void 0,()=>{if(He)try{for(Xe--;Ie.length&&Xe<Ne;){const pi=Ie.shift();Ft?(0,Ge.f)(be,Ft,()=>ct(pi)):ct(pi)}et()}catch(pi){be.error(pi)}}))};return at.subscribe((0,Ue.x)(be,vt,()=>{kt=!0,et()})),()=>{null==Wt||Wt()}}(Ne,$t,at,pe)))}},5363:(Li,Et,se)=>{"use strict";se.d(Et,{Q:()=>Ge});var d=se(9672),he=se(4482),J=se(5403);function Ge(Ue,ot=0){return(0,he.e)((Pe,$e)=>{Pe.subscribe((0,J.x)($e,at=>(0,d.f)($e,Ue,()=>$e.next(at),ot),()=>(0,d.f)($e,Ue,()=>$e.complete(),ot),at=>(0,d.f)($e,Ue,()=>$e.error(at),ot)))})}},3099:(Li,Et,se)=>{"use strict";se.d(Et,{B:()=>ot});var d=se(8996),he=se(5698),J=se(7579),Ge=se(930),Ue=se(4482);function ot($e={}){const{connector:at=(()=>new J.x),resetOnError:be=!0,resetOnComplete:pe=!0,resetOnRefCountZero:Ne=!0}=$e;return $t=>{let Tt=null,Ft=null,Wt=null,Ie=0,Xe=!1,Dt=!1;const kt=()=>{null==Ft||Ft.unsubscribe(),Ft=null},et=()=>{kt(),Tt=Wt=null,Xe=Dt=!1},vt=()=>{const ct=Tt;et(),null==ct||ct.unsubscribe()};return(0,Ue.e)((ct,ni)=>{Ie++,!Dt&&!Xe&&kt();const He=Wt=null!=Wt?Wt:at();ni.add(()=>{Ie--,0===Ie&&!Dt&&!Xe&&(Ft=Pe(vt,Ne))}),He.subscribe(ni),Tt||(Tt=new Ge.Hp({next:pi=>He.next(pi),error:pi=>{Dt=!0,kt(),Ft=Pe(et,be,pi),He.error(pi)},complete:()=>{Xe=!0,kt(),Ft=Pe(et,pe),He.complete()}}),(0,d.D)(ct).subscribe(Tt))})($t)}}function Pe($e,at,...be){return!0===at?($e(),null):!1===at?null:at(...be).pipe((0,he.q)(1)).subscribe(()=>$e())}},9468:(Li,Et,se)=>{"use strict";se.d(Et,{R:()=>he});var d=se(4482);function he(J,Ge=0){return(0,d.e)((Ue,ot)=>{ot.add(J.schedule(()=>Ue.subscribe(ot),Ge))})}},5698:(Li,Et,se)=>{"use strict";se.d(Et,{q:()=>Ge});var d=se(515),he=se(4482),J=se(5403);function Ge(Ue){return Ue<=0?()=>d.E:(0,he.e)((ot,Pe)=>{let $e=0;ot.subscribe((0,J.x)(Pe,at=>{++$e<=Ue&&(Pe.next(at),Ue<=$e&&Pe.complete())}))})}},8505:(Li,Et,se)=>{"use strict";se.d(Et,{b:()=>Ue});var d=se(576),he=se(4482),J=se(5403),Ge=se(4671);function Ue(ot,Pe,$e){const at=(0,d.m)(ot)||Pe||$e?{next:ot,error:Pe,complete:$e}:ot;return at?(0,he.e)((be,pe)=>{var Ne;null===(Ne=at.subscribe)||void 0===Ne||Ne.call(at);let $t=!0;be.subscribe((0,J.x)(pe,Tt=>{var Ft;null===(Ft=at.next)||void 0===Ft||Ft.call(at,Tt),pe.next(Tt)},()=>{var Tt;$t=!1,null===(Tt=at.complete)||void 0===Tt||Tt.call(at),pe.complete()},Tt=>{var Ft;$t=!1,null===(Ft=at.error)||void 0===Ft||Ft.call(at,Tt),pe.error(Tt)},()=>{var Tt,Ft;$t&&(null===(Tt=at.unsubscribe)||void 0===Tt||Tt.call(at)),null===(Ft=at.finalize)||void 0===Ft||Ft.call(at)}))}):Ge.y}},4408:(Li,Et,se)=>{"use strict";se.d(Et,{o:()=>Ue});var d=se(727);class he extends d.w0{constructor(Pe,$e){super()}schedule(Pe,$e=0){return this}}const J={setInterval(...ot){const{delegate:Pe}=J;return((null==Pe?void 0:Pe.setInterval)||setInterval)(...ot)},clearInterval(ot){const{delegate:Pe}=J;return((null==Pe?void 0:Pe.clearInterval)||clearInterval)(ot)},delegate:void 0};var Ge=se(8737);class Ue extends he{constructor(Pe,$e){super(Pe,$e),this.scheduler=Pe,this.work=$e,this.pending=!1}schedule(Pe,$e=0){if(this.closed)return this;this.state=Pe;const at=this.id,be=this.scheduler;return null!=at&&(this.id=this.recycleAsyncId(be,at,$e)),this.pending=!0,this.delay=$e,this.id=this.id||this.requestAsyncId(be,this.id,$e),this}requestAsyncId(Pe,$e,at=0){return J.setInterval(Pe.flush.bind(Pe,this),at)}recycleAsyncId(Pe,$e,at=0){if(null!=at&&this.delay===at&&!1===this.pending)return $e;J.clearInterval($e)}execute(Pe,$e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const at=this._execute(Pe,$e);if(at)return at;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Pe,$e){let be,at=!1;try{this.work(Pe)}catch(pe){at=!0,be=pe||new Error("Scheduled action threw falsy error")}if(at)return this.unsubscribe(),be}unsubscribe(){if(!this.closed){const{id:Pe,scheduler:$e}=this,{actions:at}=$e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ge.P)(at,this),null!=Pe&&(this.id=this.recycleAsyncId($e,Pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(Li,Et,se)=>{"use strict";se.d(Et,{v:()=>J});var d=se(6063);class he{constructor(Ue,ot=he.now){this.schedulerActionCtor=Ue,this.now=ot}schedule(Ue,ot=0,Pe){return new this.schedulerActionCtor(this,Ue).schedule(Pe,ot)}}he.now=d.l.now;class J extends he{constructor(Ue,ot=he.now){super(Ue,ot),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Ue){const{actions:ot}=this;if(this._active)return void ot.push(Ue);let Pe;this._active=!0;do{if(Pe=Ue.execute(Ue.state,Ue.delay))break}while(Ue=ot.shift());if(this._active=!1,Pe){for(;Ue=ot.shift();)Ue.unsubscribe();throw Pe}}}},4986:(Li,Et,se)=>{"use strict";se.d(Et,{z:()=>J,P:()=>Ge});var d=se(4408);const J=new(se(7565).v)(d.o),Ge=J},6063:(Li,Et,se)=>{"use strict";se.d(Et,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(Li,Et,se)=>{"use strict";se.d(Et,{z:()=>d});const d={setTimeout(...he){const{delegate:J}=d;return((null==J?void 0:J.setTimeout)||setTimeout)(...he)},clearTimeout(he){const{delegate:J}=d;return((null==J?void 0:J.clearTimeout)||clearTimeout)(he)},delegate:void 0}},2202:(Li,Et,se)=>{"use strict";se.d(Et,{h:()=>he});const he=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Li,Et,se)=>{"use strict";se.d(Et,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Li,Et,se)=>{"use strict";se.d(Et,{jO:()=>Ge,yG:()=>Ue,_6:()=>ot});var d=se(576),he=se(3532);function J(Pe){return Pe[Pe.length-1]}function Ge(Pe){return(0,d.m)(J(Pe))?Pe.pop():void 0}function Ue(Pe){return(0,he.K)(J(Pe))?Pe.pop():void 0}function ot(Pe,$e){return"number"==typeof J(Pe)?Pe.pop():$e}},8737:(Li,Et,se)=>{"use strict";function d(he,J){if(he){const Ge=he.indexOf(J);0<=Ge&&he.splice(Ge,1)}}se.d(Et,{P:()=>d})},3888:(Li,Et,se)=>{"use strict";function d(he){const Ge=he(Ue=>{Error.call(Ue),Ue.stack=(new Error).stack});return Ge.prototype=Object.create(Error.prototype),Ge.prototype.constructor=Ge,Ge}se.d(Et,{d:()=>d})},2806:(Li,Et,se)=>{"use strict";se.d(Et,{x:()=>J,O:()=>Ge});var d=se(2416);let he=null;function J(Ue){if(d.v.useDeprecatedSynchronousErrorHandling){const ot=!he;if(ot&&(he={errorThrown:!1,error:null}),Ue(),ot){const{errorThrown:Pe,error:$e}=he;if(he=null,Pe)throw $e}}else Ue()}function Ge(Ue){d.v.useDeprecatedSynchronousErrorHandling&&he&&(he.errorThrown=!0,he.error=Ue)}},9672:(Li,Et,se)=>{"use strict";function d(he,J,Ge,Ue=0,ot=!1){const Pe=J.schedule(function(){Ge(),ot?he.add(this.schedule(null,Ue)):this.unsubscribe()},Ue);if(he.add(Pe),!ot)return Pe}se.d(Et,{f:()=>d})},4671:(Li,Et,se)=>{"use strict";function d(he){return he}se.d(Et,{y:()=>d})},1144:(Li,Et,se)=>{"use strict";se.d(Et,{z:()=>d});const d=he=>he&&"number"==typeof he.length&&"function"!=typeof he},2206:(Li,Et,se)=>{"use strict";se.d(Et,{D:()=>he});var d=se(576);function he(J){return Symbol.asyncIterator&&(0,d.m)(null==J?void 0:J[Symbol.asyncIterator])}},576:(Li,Et,se)=>{"use strict";function d(he){return"function"==typeof he}se.d(Et,{m:()=>d})},3670:(Li,Et,se)=>{"use strict";se.d(Et,{c:()=>J});var d=se(8822),he=se(576);function J(Ge){return(0,he.m)(Ge[d.L])}},6495:(Li,Et,se)=>{"use strict";se.d(Et,{T:()=>J});var d=se(2202),he=se(576);function J(Ge){return(0,he.m)(null==Ge?void 0:Ge[d.h])}},8239:(Li,Et,se)=>{"use strict";se.d(Et,{t:()=>he});var d=se(576);function he(J){return(0,d.m)(null==J?void 0:J.then)}},3260:(Li,Et,se)=>{"use strict";se.d(Et,{Q:()=>J,L:()=>Ge});var d=se(655),he=se(576);function J(Ue){return(0,d.FC)(this,arguments,function*(){const Pe=Ue.getReader();try{for(;;){const{value:$e,done:at}=yield(0,d.qq)(Pe.read());if(at)return yield(0,d.qq)(void 0);yield yield(0,d.qq)($e)}}finally{Pe.releaseLock()}})}function Ge(Ue){return(0,he.m)(null==Ue?void 0:Ue.getReader)}},3532:(Li,Et,se)=>{"use strict";se.d(Et,{K:()=>he});var d=se(576);function he(J){return J&&(0,d.m)(J.schedule)}},4482:(Li,Et,se)=>{"use strict";se.d(Et,{A:()=>he,e:()=>J});var d=se(576);function he(Ge){return(0,d.m)(null==Ge?void 0:Ge.lift)}function J(Ge){return Ue=>{if(he(Ue))return Ue.lift(function(ot){try{return Ge(ot,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Li,Et,se)=>{"use strict";function d(){}se.d(Et,{Z:()=>d})},7849:(Li,Et,se)=>{"use strict";se.d(Et,{h:()=>J});var d=se(2416),he=se(3410);function J(Ge){he.z.setTimeout(()=>{const{onUnhandledError:Ue}=d.v;if(!Ue)throw Ge;Ue(Ge)})}},4532:(Li,Et,se)=>{"use strict";function d(he){return new TypeError(`You provided ${null!==he&&"object"==typeof he?"an invalid object":`'${he}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}se.d(Et,{z:()=>d})},655:(Li,Et,se)=>{"use strict";function Ge(Re,it){var tt={};for(var lt in Re)Object.prototype.hasOwnProperty.call(Re,lt)&&it.indexOf(lt)<0&&(tt[lt]=Re[lt]);if(null!=Re&&"function"==typeof Object.getOwnPropertySymbols){var Ht=0;for(lt=Object.getOwnPropertySymbols(Re);Ht<lt.length;Ht++)it.indexOf(lt[Ht])<0&&Object.prototype.propertyIsEnumerable.call(Re,lt[Ht])&&(tt[lt[Ht]]=Re[lt[Ht]])}return tt}function $e(Re,it,tt,lt){return new(tt||(tt=Promise))(function(Qe,ns){function xn(Ri){try{Pi(lt.next(Ri))}catch(Zo){ns(Zo)}}function Ur(Ri){try{Pi(lt.throw(Ri))}catch(Zo){ns(Zo)}}function Pi(Ri){Ri.done?Qe(Ri.value):function Ht(Qe){return Qe instanceof tt?Qe:new tt(function(ns){ns(Qe)})}(Ri.value).then(xn,Ur)}Pi((lt=lt.apply(Re,it||[])).next())})}function Ie(Re){return this instanceof Ie?(this.v=Re,this):new Ie(Re)}function Xe(Re,it,tt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ht,lt=tt.apply(Re,it||[]),Qe=[];return Ht={},ns("next"),ns("throw"),ns("return"),Ht[Symbol.asyncIterator]=function(){return this},Ht;function ns(Vn){lt[Vn]&&(Ht[Vn]=function(ma){return new Promise(function(En,ln){Qe.push([Vn,ma,En,ln])>1||xn(Vn,ma)})})}function xn(Vn,ma){try{!function Ur(Vn){Vn.value instanceof Ie?Promise.resolve(Vn.value.v).then(Pi,Ri):Zo(Qe[0][2],Vn)}(lt[Vn](ma))}catch(En){Zo(Qe[0][3],En)}}function Pi(Vn){xn("next",Vn)}function Ri(Vn){xn("throw",Vn)}function Zo(Vn,ma){Vn(ma),Qe.shift(),Qe.length&&xn(Qe[0][0],Qe[0][1])}}function kt(Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var tt,it=Re[Symbol.asyncIterator];return it?it.call(Re):(Re=function Ne(Re){var it="function"==typeof Symbol&&Symbol.iterator,tt=it&&Re[it],lt=0;if(tt)return tt.call(Re);if(Re&&"number"==typeof Re.length)return{next:function(){return Re&&lt>=Re.length&&(Re=void 0),{value:Re&&Re[lt++],done:!Re}}};throw new TypeError(it?"Object is not iterable.":"Symbol.iterator is not defined.")}(Re),tt={},lt("next"),lt("throw"),lt("return"),tt[Symbol.asyncIterator]=function(){return this},tt);function lt(Qe){tt[Qe]=Re[Qe]&&function(ns){return new Promise(function(xn,Ur){!function Ht(Qe,ns,xn,Ur){Promise.resolve(Ur).then(function(Pi){Qe({value:Pi,done:xn})},ns)}(xn,Ur,(ns=Re[Qe](ns)).done,ns.value)})}}}se.d(Et,{_T:()=>Ge,mG:()=>$e,qq:()=>Ie,FC:()=>Xe,KL:()=>kt})},5e3:(Li,Et,se)=>{"use strict";se.d(Et,{deG:()=>YS,tb:()=>iE,AFp:()=>xD,ip1:()=>SD,CZH:()=>Rb,hGG:()=>Xc,z2F:()=>Gv,sBO:()=>rV,Sil:()=>Ab,_Vd:()=>qx,aQ5:()=>sv,EJc:()=>Uv,SBq:()=>iw,qLn:()=>hx,vpe:()=>Cr,tBr:()=>pu,XFs:()=>Gi,OlP:()=>Wr,zs3:()=>gu,ZZ4:()=>LD,aQg:()=>Ca,soG:()=>sE,YKP:()=>VL,h0i:()=>Lv,PXZ:()=>tV,R0b:()=>Wn,FiY:()=>sl,Lbi:()=>iM,g9A:()=>tM,n_E:()=>hD,Qsj:()=>qm,FYo:()=>PL,JOm:()=>cf,q3G:()=>ia,tp0:()=>yl,Rgc:()=>Zx,dDg:()=>Lb,q4F:()=>NL,GfV:()=>sw,s_b:()=>cD,ifc:()=>ws,eFA:()=>oE,G48:()=>hE,Gpc:()=>pe,f3M:()=>bn,X6Q:()=>lE,_c5:()=>Mb,VLi:()=>eV,c2e:()=>ZH,zSh:()=>yx,wAp:()=>rs,vHH:()=>Ft,EiD:()=>BI,mCW:()=>Y,qzn:()=>Dd,JVY:()=>v0,pB0:()=>TR,eBb:()=>FI,L6k:()=>PI,LAX:()=>C0,cg1:()=>Rx,kL8:()=>J2,yhl:()=>y0,dqk:()=>Xs,sIi:()=>Bm,CqO:()=>$A,QGY:()=>z0,F4k:()=>GA,RDi:()=>n0,AaK:()=>$e,z3N:()=>Wc,qOj:()=>IA,TTD:()=>am,_Bn:()=>tw,xp6:()=>Mq,uIk:()=>vu,Tol:()=>F2,Gre:()=>W2,MT6:()=>G2,ekj:()=>eL,Suo:()=>Tb,Xpm:()=>zn,lG2:()=>xt,Yz7:()=>En,cJS:()=>An,oAB:()=>qe,Yjl:()=>Jt,Y36:()=>Sx,_UZ:()=>UA,BQk:()=>WA,ynx:()=>qA,qZA:()=>xx,TgZ:()=>TT,EpF:()=>w2,n5z:()=>tl,Ikx:()=>W0,LFG:()=>Gt,$8M:()=>Tm,$Z:()=>v2,NdJ:()=>op,CRH:()=>uD,kcU:()=>CR,O4$:()=>vR,oxw:()=>_2,Hsn:()=>ZA,F$t:()=>I2,Q6J:()=>zA,s9C:()=>j0,VKq:()=>DH,kEZ:()=>oD,l5B:()=>kH,qbA:()=>RH,iGM:()=>$m,MAs:()=>l2,evT:()=>Cq,Jf7:()=>FR,CHM:()=>Vy,LSH:()=>E0,kYT:()=>we,Udp:()=>JA,YNc:()=>AA,W1O:()=>hw,_uU:()=>rL,Oqu:()=>oL,hij:()=>Ix,Gf:()=>No});var d=se(7579),he=se(727),J=se(8306),Ge=se(6451),Ue=se(3099);function ot(u){for(let p in u)if(u[p]===ot)return p;throw Error("Could not find renamed property on target object.")}function Pe(u,p){for(const g in p)p.hasOwnProperty(g)&&!u.hasOwnProperty(g)&&(u[g]=p[g])}function $e(u){if("string"==typeof u)return u;if(Array.isArray(u))return"["+u.map($e).join(", ")+"]";if(null==u)return""+u;if(u.overriddenName)return`${u.overriddenName}`;if(u.name)return`${u.name}`;const p=u.toString();if(null==p)return""+p;const g=p.indexOf("\n");return-1===g?p:p.substring(0,g)}function at(u,p){return null==u||""===u?null===p?"":p:null==p||""===p?u:u+" "+p}const be=ot({__forward_ref__:ot});function pe(u){return u.__forward_ref__=pe,u.toString=function(){return $e(this())},u}function Ne(u){return $t(u)?u():u}function $t(u){return"function"==typeof u&&u.hasOwnProperty(be)&&u.__forward_ref__===pe}class Ft extends Error{constructor(p,g){super(function Wt(u,p){return`NG0${Math.abs(u)}${p?": "+p:""}`}(p,g)),this.code=p}}function Ie(u){return"string"==typeof u?u:null==u?"":String(u)}function Xe(u){return"function"==typeof u?u.name||u.toString():"object"==typeof u&&null!=u&&"function"==typeof u.type?u.type.name||u.type.toString():Ie(u)}function vt(u,p){const g=p?` in ${p}`:"";throw new Ft(-201,`No provider for ${Xe(u)} found${g}`)}function Pi(u,p){null==u&&function Ri(u,p,g,y){throw new Error(`ASSERTION ERROR: ${u}`+(null==y?"":` [Expected=> ${g} ${y} ${p} <=Actual]`))}(p,u,null,"!=")}function En(u){return{token:u.token,providedIn:u.providedIn||null,factory:u.factory,value:void 0}}function An(u){return{providers:u.providers||[],imports:u.imports||[]}}function fr(u){return Xh(u,fh)||Xh(u,so)}function Xh(u,p){return u.hasOwnProperty(p)?u[p]:null}function Lc(u){return u&&(u.hasOwnProperty(Qh)||u.hasOwnProperty(Mc))?u[Qh]:null}const fh=ot({\u0275prov:ot}),Qh=ot({\u0275inj:ot}),so=ot({ngInjectableDef:ot}),Mc=ot({ngInjectorDef:ot});var Gi=(()=>((Gi=Gi||{})[Gi.Default=0]="Default",Gi[Gi.Host=1]="Host",Gi[Gi.Self=2]="Self",Gi[Gi.SkipSelf=4]="SkipSelf",Gi[Gi.Optional=8]="Optional",Gi))();let Xa;function fn(u){const p=Xa;return Xa=u,p}function Oa(u,p,g){const y=fr(u);return y&&"root"==y.providedIn?void 0===y.value?y.value=y.factory():y.value:g&Gi.Optional?null:void 0!==p?p:void vt($e(u),"Injector")}function Fi(u){return{toString:u}.toString()}var fs=(()=>((fs=fs||{})[fs.OnPush=0]="OnPush",fs[fs.Default=1]="Default",fs))(),ws=(()=>{return(u=ws||(ws={}))[u.Emulated=0]="Emulated",u[u.None=2]="None",u[u.ShadowDom=3]="ShadowDom",ws;var u})();const Ai="undefined"!=typeof globalThis&&globalThis,fi="undefined"!=typeof window&&window,iu="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Xs=Ai||"undefined"!=typeof global&&global||fi||iu,ar={},de=[],ye=ot({\u0275cmp:ot}),Se=ot({\u0275dir:ot}),gt=ot({\u0275pipe:ot}),ze=ot({\u0275mod:ot}),ri=ot({\u0275fac:ot}),Wi=ot({__NG_ELEMENT_ID__:ot});let mn=0;function zn(u){return Fi(()=>{const g={},y={type:u.type,providersResolver:null,decls:u.decls,vars:u.vars,factory:null,template:u.template||null,consts:u.consts||null,ngContentSelectors:u.ngContentSelectors,hostBindings:u.hostBindings||null,hostVars:u.hostVars||0,hostAttrs:u.hostAttrs||null,contentQueries:u.contentQueries||null,declaredInputs:g,inputs:null,outputs:null,exportAs:u.exportAs||null,onPush:u.changeDetection===fs.OnPush,directiveDefs:null,pipeDefs:null,selectors:u.selectors||de,viewQuery:u.viewQuery||null,features:u.features||null,data:u.data||{},encapsulation:u.encapsulation||ws.Emulated,id:"c",styles:u.styles||de,_:null,setInput:null,schemas:u.schemas||null,tView:null},C=u.directives,S=u.features,T=u.pipes;return y.id+=mn++,y.inputs=ve(u.inputs,g),y.outputs=ve(u.outputs),S&&S.forEach(A=>A(y)),y.directiveDefs=C?()=>("function"==typeof C?C():C).map(Qo):null,y.pipeDefs=T?()=>("function"==typeof T?T():T).map(Rs):null,y})}function Qo(u){return Mi(u)||function Ss(u){return u[Se]||null}(u)}function Rs(u){return function $s(u){return u[gt]||null}(u)}const Ro={};function qe(u){return Fi(()=>{const p={type:u.type,bootstrap:u.bootstrap||de,declarations:u.declarations||de,imports:u.imports||de,exports:u.exports||de,transitiveCompileScopes:null,schemas:u.schemas||null,id:u.id||null};return null!=u.id&&(Ro[u.id]=u.type),p})}function we(u,p){return Fi(()=>{const g=Ps(u,!0);g.declarations=p.declarations||de,g.imports=p.imports||de,g.exports=p.exports||de})}function ve(u,p){if(null==u)return ar;const g={};for(const y in u)if(u.hasOwnProperty(y)){let C=u[y],S=C;Array.isArray(C)&&(S=C[1],C=C[0]),g[C]=y,p&&(p[C]=S)}return g}const xt=zn;function Jt(u){return{type:u.type,name:u.name,factory:null,pure:!1!==u.pure,onDestroy:u.type.prototype.ngOnDestroy||null}}function Mi(u){return u[ye]||null}function Ps(u,p){const g=u[ze]||null;if(!g&&!0===p)throw new Error(`Type ${$e(u)} does not have '\u0275mod' property.`);return g}function Ja(u){return Array.isArray(u)&&"object"==typeof u[1]}function mh(u){return Array.isArray(u)&&!0===u[1]}function nm(u){return 0!=(8&u.flags)}function ZC(u){return 2==(2&u.flags)}function Fc(u){return 1==(1&u.flags)}function Nc(u){return null!==u.template}function Gp(u){return 0!=(512&u[2])}function ec(u,p){return u.hasOwnProperty(ri)?u[ri]:null}class t0{constructor(p,g,y){this.previousValue=p,this.currentValue=g,this.firstChange=y}isFirstChange(){return this.firstChange}}function am(){return lm}function lm(u){return u.type.prototype.ngOnChanges&&(u.setInput=hm),jS}function jS(){const u=cm(this),p=null==u?void 0:u.current;if(p){const g=u.previous;if(g===ar)u.previous=p;else for(let y in p)g[y]=p[y];u.current=null,this.ngOnChanges(p)}}function hm(u,p,g,y){const C=cm(u)||function Kp(u,p){return u[Lo]=p}(u,{previous:ar,current:null}),S=C.current||(C.current={}),T=C.previous,A=this.declaredInputs[g],O=T[A];S[A]=new t0(O&&O.currentValue,p,T===ar),u[y]=p}am.ngInherit=!0;const Lo="__ngSimpleChanges__";function cm(u){return u[Lo]||null}let zg;function n0(u){zg=u}function tr(u){return!!u.listen}const Yp={createRenderer:(u,p)=>function ic(){return void 0!==zg?zg:"undefined"!=typeof document?document:void 0}()};function Zn(u){for(;Array.isArray(u);)u=u[0];return u}function lu(u,p){return Zn(p[u])}function Jo(u,p){return Zn(p[u.index])}function oo(u,p){return u.data[p]}function Pa(u,p){const g=p[u];return Ja(g)?g:g[0]}function qu(u){return 4==(4&u[2])}function hu(u){return 128==(128&u[2])}function sc(u,p){return null==p?null:u[p]}function Hc(u){u[18]=0}function yd(u,p){u[5]+=p;let g=u,y=u[3];for(;null!==y&&(1===p&&1===g[5]||-1===p&&0===g[5]);)y[5]+=p,g=y,y=y[3]}const Xi={lFrame:Gy(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function fm(){return Xi.bindingsEnabled}function _t(){return Xi.lFrame.lView}function Bs(){return Xi.lFrame.tView}function Vy(u){return Xi.lFrame.contextLView=u,u[8]}function mr(){let u=Xp();for(;null!==u&&64===u.type;)u=u.parent;return u}function Xp(){return Xi.lFrame.currentTNode}function bh(u,p){const g=Xi.lFrame;g.currentTNode=u,g.isParent=p}function zy(){return Xi.lFrame.isParent}function mm(){Xi.lFrame.isParent=!1}function Gu(){return Xi.isInCheckNoChangesMode}function qg(u){Xi.isInCheckNoChangesMode=u}function ao(){const u=Xi.lFrame;let p=u.bindingRootIndex;return-1===p&&(p=u.bindingRootIndex=u.tView.bindingStartIndex),p}function cu(){return Xi.lFrame.bindingIndex++}function nc(u){const p=Xi.lFrame,g=p.bindingIndex;return p.bindingIndex=p.bindingIndex+u,g}function Uy(u,p){const g=Xi.lFrame;g.bindingIndex=g.bindingRootIndex=u,bm(p)}function bm(u){Xi.lFrame.currentDirectiveIndex=u}function qy(){return Xi.lFrame.currentQueryIndex}function Wy(u){Xi.lFrame.currentQueryIndex=u}function qS(u){const p=u[1];return 2===p.type?p.declTNode:1===p.type?u[6]:null}function ym(u,p,g){if(g&Gi.SkipSelf){let C=p,S=u;for(;!(C=C.parent,null!==C||g&Gi.Host||(C=qS(S),null===C||(S=S[15],10&C.type))););if(null===C)return!1;p=C,u=S}const y=Xi.lFrame=du();return y.currentTNode=p,y.lView=u,!0}function vm(u){const p=du(),g=u[1];Xi.lFrame=p,p.currentTNode=g.firstChild,p.lView=u,p.tView=g,p.contextLView=u,p.bindingIndex=g.bindingStartIndex,p.inI18n=!1}function du(){const u=Xi.lFrame,p=null===u?null:u.child;return null===p?Gy(u):p}function Gy(u){const p={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:u,child:null,inI18n:!1};return null!==u&&(u.child=p),p}function WS(){const u=Xi.lFrame;return Xi.lFrame=u.parent,u.currentTNode=null,u.lView=null,u}const GS=WS;function Jp(){const u=WS();u.isParent=!0,u.tView=null,u.selectedIndex=-1,u.contextLView=null,u.elementDepthCount=0,u.currentDirectiveIndex=-1,u.currentNamespace=null,u.bindingRootIndex=-1,u.bindingIndex=-1,u.currentQueryIndex=0}function Fa(){return Xi.lFrame.selectedIndex}function Cd(u){Xi.lFrame.selectedIndex=u}function qr(){const u=Xi.lFrame;return oo(u.tView,u.selectedIndex)}function vR(){Xi.lFrame.currentNamespace="svg"}function CR(){!function wR(){Xi.lFrame.currentNamespace=null}()}function wm(u,p){for(let g=p.directiveStart,y=p.directiveEnd;g<y;g++){const S=u.data[g].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:A,ngAfterViewInit:O,ngAfterViewChecked:j,ngOnDestroy:K}=S;T&&(u.contentHooks||(u.contentHooks=[])).push(-g,T),A&&((u.contentHooks||(u.contentHooks=[])).push(g,A),(u.contentCheckHooks||(u.contentCheckHooks=[])).push(g,A)),O&&(u.viewHooks||(u.viewHooks=[])).push(-g,O),j&&((u.viewHooks||(u.viewHooks=[])).push(g,j),(u.viewCheckHooks||(u.viewCheckHooks=[])).push(g,j)),null!=K&&(u.destroyHooks||(u.destroyHooks=[])).push(g,K)}}function $y(u,p,g){ba(u,p,3,g)}function Ky(u,p,g,y){(3&u[2])===g&&ba(u,p,g,y)}function $g(u,p){let g=u[2];(3&g)===p&&(g&=2047,g+=1,u[2]=g)}function ba(u,p,g,y){const S=null!=y?y:-1,T=p.length-1;let A=0;for(let O=void 0!==y?65535&u[18]:0;O<T;O++)if("number"==typeof p[O+1]){if(A=p[O],null!=y&&A>=y)break}else p[O]<0&&(u[18]+=65536),(A<S||-1==S)&&(Yy(u,g,p,O),u[18]=(4294901760&u[18])+O+2),O++}function Yy(u,p,g,y){const C=g[y]<0,S=g[y+1],A=u[C?-g[y]:g[y]];if(C){if(u[2]>>11<u[18]>>16&&(3&u[2])===p){u[2]+=2048;try{S.call(A)}finally{}}}else try{S.call(A)}finally{}}class Kg{constructor(p,g,y){this.factory=p,this.resolving=!1,this.canSeeViewProviders=g,this.injectImpl=y}}function ei(u,p,g){const y=tr(u);let C=0;for(;C<g.length;){const S=g[C];if("number"==typeof S){if(0!==S)break;C++;const T=g[C++],A=g[C++],O=g[C++];y?u.setAttribute(p,A,O,T):p.setAttributeNS(T,A,O)}else{const T=S,A=g[++C];el(T)?y&&u.setProperty(p,T,A):y?u.setAttribute(p,T,A):p.setAttribute(T,A),C++}}return C}function _s(u){return 3===u||4===u||6===u}function el(u){return 64===u.charCodeAt(0)}function Fn(u,p){if(null!==p&&0!==p.length)if(null===u||0===u.length)u=p.slice();else{let g=-1;for(let y=0;y<p.length;y++){const C=p[y];"number"==typeof C?g=C:0===g||Qy(u,g,C,null,-1===g||2===g?p[++y]:null)}}return u}function Qy(u,p,g,y,C){let S=0,T=u.length;if(-1===p)T=-1;else for(;S<u.length;){const A=u[S++];if("number"==typeof A){if(A===p){T=-1;break}if(A>p){T=S-1;break}}}for(;S<u.length;){const A=u[S];if("number"==typeof A)break;if(A===g){if(null===y)return void(null!==C&&(u[S+1]=C));if(y===u[S+1])return void(u[S+2]=C)}S++,null!==y&&S++,null!==C&&S++}-1!==T&&(u.splice(T,0,p),S=T+1),u.splice(S++,0,g),null!==y&&u.splice(S++,0,y),null!==C&&u.splice(S++,0,C)}function lo(u){return-1!==u}function ef(u){return 32767&u}function Ku(u,p){let g=function Em(u){return u>>16}(u),y=p;for(;g>0;)y=y[15],g--;return y}let Yu=!0;function zc(u){const p=Yu;return Yu=u,p}let tf=0;function gn(u,p){const g=_m(u,p);if(-1!==g)return g;const y=p[1];y.firstCreatePass&&(u.injectorIndex=p.length,sf(y.data,u),sf(p,null),sf(y.blueprint,null));const C=nf(u,p),S=u.injectorIndex;if(lo(C)){const T=ef(C),A=Ku(C,p),O=A[1].data;for(let j=0;j<8;j++)p[S+j]=A[T+j]|O[T+j]}return p[S+8]=C,S}function sf(u,p){u.push(0,0,0,0,0,0,0,0,p)}function _m(u,p){return-1===u.injectorIndex||u.parent&&u.parent.injectorIndex===u.injectorIndex||null===p[u.injectorIndex+8]?-1:u.injectorIndex}function nf(u,p){if(u.parent&&-1!==u.parent.injectorIndex)return u.parent.injectorIndex;let g=0,y=null,C=p;for(;null!==C;){const S=C[1],T=S.type;if(y=2===T?S.declTNode:1===T?C[6]:null,null===y)return-1;if(g++,C=C[15],-1!==y.injectorIndex)return y.injectorIndex|g<<16}return-1}function pl(u,p,g){!function ev(u,p,g){let y;"string"==typeof g?y=g.charCodeAt(0)||0:g.hasOwnProperty(Wi)&&(y=g[Wi]),null==y&&(y=g[Wi]=tf++);const C=255&y;p.data[u+(C>>5)]|=1<<C}(u,p,g)}function rf(u,p,g){if(g&Gi.Optional)return u;vt(p,"NodeInjector")}function jc(u,p,g,y){if(g&Gi.Optional&&void 0===y&&(y=null),0==(g&(Gi.Self|Gi.Host))){const C=u[9],S=fn(void 0);try{return C?C.get(p,y,g&Gi.Optional):Oa(p,y,g&Gi.Optional)}finally{fn(S)}}return rf(y,p,g)}function Zg(u,p,g,y=Gi.Default,C){if(null!==u){const S=function Mo(u){if("string"==typeof u)return u.charCodeAt(0)||0;const p=u.hasOwnProperty(Wi)?u[Wi]:void 0;return"number"==typeof p?p>=0?255&p:yh:p}(g);if("function"==typeof S){if(!ym(p,u,y))return y&Gi.Host?rf(C,g,y):jc(p,g,y,C);try{const T=S(y);if(null!=T||y&Gi.Optional)return T;vt(g)}finally{GS()}}else if("number"==typeof S){let T=null,A=_m(u,p),O=-1,j=y&Gi.Host?p[16][6]:null;for((-1===A||y&Gi.SkipSelf)&&(O=-1===A?nf(u,p):p[A+8],-1!==O&&af(y,!1)?(T=p[1],A=ef(O),p=Ku(O,p)):A=-1);-1!==A;){const K=p[1];if(tv(S,A,K.data)){const re=Xg(A,p,g,T,y,j);if(re!==Im)return re}O=p[A+8],-1!==O&&af(y,p[1].data[A+8]===j)&&tv(S,A,p)?(T=K,A=ef(O),p=Ku(O,p)):A=-1}}}return jc(p,g,y,C)}const Im={};function yh(){return new lr(mr(),_t())}function Xg(u,p,g,y,C,S){const T=p[1],A=T.data[u+8],K=Sd(A,T,g,null==y?ZC(A)&&Yu:y!=T&&0!=(3&A.type),C&Gi.Host&&S===A);return null!==K?fl(p,T,K,A):Im}function Sd(u,p,g,y,C){const S=u.providerIndexes,T=p.data,A=1048575&S,O=u.directiveStart,K=S>>20,fe=C?A+K:u.directiveEnd;for(let Oe=y?A:A+K;Oe<fe;Oe++){const ft=T[Oe];if(Oe<O&&g===ft||Oe>=O&&ft.type===g)return Oe}if(C){const Oe=T[O];if(Oe&&Nc(Oe)&&Oe.type===g)return O}return null}function fl(u,p,g,y){let C=u[g];const S=p.data;if(function Zy(u){return u instanceof Kg}(C)){const T=C;T.resolving&&function Dt(u,p){const g=p?`. Dependency path: ${p.join(" > ")} > ${u}`:"";throw new Ft(-200,`Circular dependency in DI detected for ${u}${g}`)}(Xe(S[g]));const A=zc(T.canSeeViewProviders);T.resolving=!0;const O=T.injectImpl?fn(T.injectImpl):null;ym(u,y,Gi.Default);try{C=u[g]=T.factory(void 0,S,u,y),p.firstCreatePass&&g>=y.directiveStart&&function $u(u,p,g){const{ngOnChanges:y,ngOnInit:C,ngDoCheck:S}=p.type.prototype;if(y){const T=lm(p);(g.preOrderHooks||(g.preOrderHooks=[])).push(u,T),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(u,T)}C&&(g.preOrderHooks||(g.preOrderHooks=[])).push(0-u,C),S&&((g.preOrderHooks||(g.preOrderHooks=[])).push(u,S),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(u,S))}(g,S[g],p)}finally{null!==O&&fn(O),zc(A),T.resolving=!1,GS()}}return C}function tv(u,p,g){return!!(g[p+(u>>5)]&1<<u)}function af(u,p){return!(u&Gi.Self||u&Gi.Host&&p)}class lr{constructor(p,g){this._tNode=p,this._lView=g}get(p,g,y){return Zg(this._tNode,this._lView,p,y,g)}}function tl(u){return Fi(()=>{const p=u.prototype.constructor,g=p[ri]||Yl(p),y=Object.prototype;let C=Object.getPrototypeOf(u.prototype).constructor;for(;C&&C!==y;){const S=C[ri]||Yl(C);if(S&&S!==g)return S;C=Object.getPrototypeOf(C)}return S=>new S})}function Yl(u){return $t(u)?()=>{const p=Yl(Ne(u));return p&&p()}:ec(u)}function Tm(u){return function Yg(u,p){if("class"===p)return u.classes;if("style"===p)return u.styles;const g=u.attrs;if(g){const y=g.length;let C=0;for(;C<y;){const S=g[C];if(_s(S))break;if(0===S)C+=2;else if("number"==typeof S)for(C++;C<y&&"string"==typeof g[C];)C++;else{if(S===p)return g[C+1];C+=2}}}return null}(mr(),u)}const Un="__parameters__",ml="__prop__metadata__";function rc(u){return function(...g){if(u){const y=u(...g);for(const C in y)this[C]=y[C]}}}function Zl(u,p,g){return Fi(()=>{const y=rc(p);function C(...S){if(this instanceof C)return y.apply(this,S),this;const T=new C(...S);return A.annotation=T,A;function A(O,j,K){const re=O.hasOwnProperty(Un)?O[Un]:Object.defineProperty(O,Un,{value:[]})[Un];for(;re.length<=K;)re.push(null);return(re[K]=re[K]||[]).push(T),O}}return g&&(C.prototype=Object.create(g.prototype)),C.prototype.ngMetadataName=u,C.annotationCls=C,C})}function iv(u,p,g,y){return Fi(()=>{const C=rc(p);function S(...T){if(this instanceof S)return C.apply(this,T),this;const A=new S(...T);return function O(j,K){const re=j.constructor,fe=re.hasOwnProperty(ml)?re[ml]:Object.defineProperty(re,ml,{value:{}})[ml];fe[K]=fe.hasOwnProperty(K)&&fe[K]||[],fe[K].unshift(A),y&&y(j,K,...T)}}return g&&(S.prototype=Object.create(g.prototype)),S.prototype.ngMetadataName=u,S.annotationCls=S,S})}class Wr{constructor(p,g){this._desc=p,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof g?this.__NG_ELEMENT_ID__=g:void 0!==g&&(this.\u0275prov=En({token:this,providedIn:g.providedIn||"root",factory:g.factory}))}toString(){return`InjectionToken ${this._desc}`}}const YS=new Wr("AnalyzeForEntryComponents");class Zu{}const sv=iv("ContentChild",(u,p={})=>Object.assign({selector:u,first:!0,isViewQuery:!1,descendants:!0},p),Zu);function gl(u,p){void 0===p&&(p=u);for(let g=0;g<u.length;g++){let y=u[g];Array.isArray(y)?(p===u&&(p=u.slice(0,g)),gl(y,p)):p!==u&&p.push(y)}return p}function Ch(u,p){u.forEach(g=>Array.isArray(g)?Ch(g,p):p(g))}function Rm(u,p,g){p>=u.length?u.push(g):u.splice(p,0,g)}function tb(u,p){return p>=u.length-1?u.pop():u.splice(p,1)[0]}function Xl(u,p){const g=[];for(let y=0;y<u;y++)g.push(p);return g}function Ql(u,p,g){let y=Xu(u,p);return y>=0?u[1|y]=g:(y=~y,function ib(u,p,g,y){let C=u.length;if(C==p)u.push(g,y);else if(1===C)u.push(y,u[0]),u[0]=g;else{for(C--,u.push(u[C-1],u[C]);C>p;)u[C]=u[C-2],C--;u[p]=g,u[p+1]=y}}(u,y,p,g)),y}function nb(u,p){const g=Xu(u,p);if(g>=0)return u[1|g]}function Xu(u,p){return function rb(u,p,g){let y=0,C=u.length>>g;for(;C!==y;){const S=y+(C-y>>1),T=u[S<<g];if(p===T)return S<<g;T>p?C=S:y=S+1}return~(C<<g)}(u,p,1)}const Id={},ab="__NG_DI_FLAG__",Lm="ngTempTokenPath",P=/\n/gm,Z="__source",oe=ot({provide:String,useValue:ot});let _e;function De(u){const p=_e;return _e=u,p}function Ot(u,p=Gi.Default){if(void 0===_e)throw new Ft(203,"");return null===_e?Oa(u,void 0,p):_e.get(u,p&Gi.Optional?null:void 0,p)}function Gt(u,p=Gi.Default){return(function Rr(){return Xa}()||Ot)(Ne(u),p)}const bn=Gt;function In(u){const p=[];for(let g=0;g<u.length;g++){const y=Ne(u[g]);if(Array.isArray(y)){if(0===y.length)throw new Ft(900,"");let C,S=Gi.Default;for(let T=0;T<y.length;T++){const A=y[T],O=bl(A);"number"==typeof O?-1===O?C=A.token:S|=O:C=A}p.push(Gt(C,S))}else p.push(Gt(y))}return p}function co(u,p){return u[ab]=p,u.prototype[ab]=p,u}function bl(u){return u[ab]}const pu=co(Zl("Inject",u=>({token:u})),-1),sl=co(Zl("Optional"),8),yl=co(Zl("SkipSelf"),4);let lv;function ub(u){var p;return(null===(p=function p0(){if(void 0===lv&&(lv=null,Xs.trustedTypes))try{lv=Xs.trustedTypes.createPolicy("angular",{createHTML:u=>u,createScript:u=>u,createScriptURL:u=>u})}catch(u){}return lv}())||void 0===p?void 0:p.createHTML(u))||u}class ep{constructor(p){this.changingThisBreaksApplicationSecurity=p}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class _R extends ep{getTypeName(){return"HTML"}}class hv extends ep{getTypeName(){return"Style"}}class JS extends ep{getTypeName(){return"Script"}}class IR extends ep{getTypeName(){return"URL"}}class ex extends ep{getTypeName(){return"ResourceURL"}}function Wc(u){return u instanceof ep?u.changingThisBreaksApplicationSecurity:u}function Dd(u,p){const g=y0(u);if(null!=g&&g!==p){if("ResourceURL"===g&&"URL"===p)return!0;throw new Error(`Required a safe ${p}, got a ${g} (see https://g.co/ng/security#xss)`)}return g===p}function y0(u){return u instanceof ep&&u.getTypeName()||null}function v0(u){return new _R(u)}function PI(u){return new hv(u)}function FI(u){return new JS(u)}function C0(u){return new IR(u)}function TR(u){return new ex(u)}class DR{constructor(p){this.inertDocumentHelper=p}getInertBodyElement(p){p="<body><remove></remove>"+p;try{const g=(new window.DOMParser).parseFromString(ub(p),"text/html").body;return null===g?this.inertDocumentHelper.getInertBodyElement(p):(g.removeChild(g.firstChild),g)}catch(g){return null}}}class kR{constructor(p){if(this.defaultDoc=p,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const g=this.inertDocument.createElement("html");this.inertDocument.appendChild(g);const y=this.inertDocument.createElement("body");g.appendChild(y)}}getInertBodyElement(p){const g=this.inertDocument.createElement("template");if("content"in g)return g.innerHTML=ub(p),g;const y=this.inertDocument.createElement("body");return y.innerHTML=ub(p),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(y),y}stripCustomNsAttrs(p){const g=p.attributes;for(let C=g.length-1;0<C;C--){const T=g.item(C).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&p.removeAttribute(T)}let y=p.firstChild;for(;y;)y.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(y),y=y.nextSibling}}const x=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,M=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Y(u){return(u=String(u)).match(x)||u.match(M)?u:"unsafe:"+u}function Fe(u){const p={};for(const g of u.split(","))p[g]=!0;return p}function At(...u){const p={};for(const g of u)for(const y in g)g.hasOwnProperty(y)&&(p[y]=!0);return p}const Ii=Fe("area,br,col,hr,img,wbr"),es=Fe("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ms=Fe("rp,rt"),pb=At(Ii,At(es,Fe("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),At(ms,Fe("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),At(ms,es)),w0=Fe("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cv=Fe("srcset"),S0=At(w0,cv,Fe("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fe("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fb=Fe("script,style,template");class x0{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(p){let g=p.firstChild,y=!0;for(;g;)if(g.nodeType===Node.ELEMENT_NODE?y=this.startElement(g):g.nodeType===Node.TEXT_NODE?this.chars(g.nodeValue):this.sanitizedSomething=!0,y&&g.firstChild)g=g.firstChild;else for(;g;){g.nodeType===Node.ELEMENT_NODE&&this.endElement(g);let C=this.checkClobberedElement(g,g.nextSibling);if(C){g=C;break}g=this.checkClobberedElement(g,g.parentNode)}return this.buf.join("")}startElement(p){const g=p.nodeName.toLowerCase();if(!pb.hasOwnProperty(g))return this.sanitizedSomething=!0,!fb.hasOwnProperty(g);this.buf.push("<"),this.buf.push(g);const y=p.attributes;for(let C=0;C<y.length;C++){const S=y.item(C),T=S.name,A=T.toLowerCase();if(!S0.hasOwnProperty(A)){this.sanitizedSomething=!0;continue}let O=S.value;w0[A]&&(O=Y(O)),cv[A]&&(u=O,O=(u=String(u)).split(",").map(p=>Y(p.trim())).join(", ")),this.buf.push(" ",T,'="',sx(O),'"')}var u;return this.buf.push(">"),!0}endElement(p){const g=p.nodeName.toLowerCase();pb.hasOwnProperty(g)&&!Ii.hasOwnProperty(g)&&(this.buf.push("</"),this.buf.push(g),this.buf.push(">"))}chars(p){this.buf.push(sx(p))}checkClobberedElement(p,g){if(g&&(p.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${p.outerHTML}`);return g}}const tx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ix=/([^\#-~ |!])/g;function sx(u){return u.replace(/&/g,"&amp;").replace(tx,function(p){return"&#"+(1024*(p.charCodeAt(0)-55296)+(p.charCodeAt(1)-56320)+65536)+";"}).replace(ix,function(p){return"&#"+p.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let mb;function BI(u,p){let g=null;try{mb=mb||function NI(u){const p=new kR(u);return function R(){try{return!!(new window.DOMParser).parseFromString(ub(""),"text/html")}catch(u){return!1}}()?new DR(p):p}(u);let y=p?String(p):"";g=mb.getInertBodyElement(y);let C=5,S=y;do{if(0===C)throw new Error("Failed to sanitize html because the input is unstable");C--,y=S,S=g.innerHTML,g=mb.getInertBodyElement(y)}while(y!==S);return ub((new x0).sanitizeChildren(nx(g)||g))}finally{if(g){const y=nx(g)||g;for(;y.firstChild;)y.removeChild(y.firstChild)}}}function nx(u){return"content"in u&&function fu(u){return u.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===u.nodeName}(u)?u.content:null}var ia=(()=>((ia=ia||{})[ia.NONE=0]="NONE",ia[ia.HTML=1]="HTML",ia[ia.STYLE=2]="STYLE",ia[ia.SCRIPT=3]="SCRIPT",ia[ia.URL=4]="URL",ia[ia.RESOURCE_URL=5]="RESOURCE_URL",ia))();function E0(u){const p=function _0(){const u=_t();return u&&u[12]}();return p?p.sanitize(ia.URL,u)||"":Dd(u,"URL")?Wc(u):Y(Ie(u))}const XN="__ngContext__";function wh(u,p){u[XN]=p}function RR(u){const p=function rx(u){return u[XN]||null}(u);return p?Array.isArray(p)?p:p.lView:null}function OR(u){return u.ngOriginalError}function cq(u,...p){u.error(...p)}class hx{constructor(){this._console=console}handleError(p){const g=this._findOriginalError(p),y=function hq(u){return u&&u.ngErrorLogger||cq}(p);y(this._console,"ERROR",p),g&&y(this._console,"ORIGINAL ERROR",g)}_findOriginalError(p){let g=p&&OR(p);for(;g&&OR(g);)g=OR(g);return g||null}}const JN=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Xs))();function FR(u){return u.ownerDocument.defaultView}function Cq(u){return u.ownerDocument}function tp(u){return u instanceof Function?u():u}var cf=(()=>((cf=cf||{})[cf.Important=1]="Important",cf[cf.DashCase=2]="DashCase",cf))();function NR(u,p){return undefined(u,p)}function cx(u){const p=u[3];return mh(p)?p[3]:p}function GI(u){return nB(u[13])}function HR(u){return nB(u[4])}function nB(u){for(;null!==u&&!mh(u);)u=u[4];return u}function I0(u,p,g,y,C){if(null!=y){let S,T=!1;mh(y)?S=y:Ja(y)&&(T=!0,y=y[0]);const A=Zn(y);0===u&&null!==g?null==C?hB(p,g,A):bb(p,g,A,C||null,!0):1===u&&null!==g?bb(p,g,A,C||null,!0):2===u?function gB(u,p,g){const y=XI(u,p);y&&function dB(u,p,g,y){tr(u)?u.removeChild(p,g,y):p.removeChild(g)}(u,y,p,g)}(p,A,T):3===u&&p.destroyNode(A),null!=S&&function eT(u,p,g,y,C){const S=g[7];S!==Zn(g)&&I0(p,u,y,S,C);for(let A=10;A<g.length;A++){const O=g[A];dx(O[1],O,u,p,y,S)}}(p,u,S,g,C)}}function eh(u,p,g){if(tr(u))return u.createElement(p,g);{const y=null!==g?function s0(u){const p=u.toLowerCase();return"svg"===p?"http://www.w3.org/2000/svg":"math"===p?"http://www.w3.org/1998/MathML/":null}(g):null;return null===y?u.createElement(p):u.createElementNS(y,p)}}function oB(u,p){const g=u[9],y=g.indexOf(p),C=p[3];1024&p[2]&&(p[2]&=-1025,yd(C,-1)),g.splice(y,1)}function YI(u,p){if(u.length<=10)return;const g=10+p,y=u[g];if(y){const C=y[17];null!==C&&C!==u&&oB(C,y),p>0&&(u[g-1][4]=y[4]);const S=tb(u,10+p);!function xq(u,p){dx(u,p,p[11],2,null,null),p[0]=null,p[6]=null}(y[1],y);const T=S[19];null!==T&&T.detachView(S[1]),y[3]=null,y[4]=null,y[2]&=-129}return y}function aB(u,p){if(!(256&p[2])){const g=p[11];tr(g)&&g.destroyNode&&dx(u,p,g,3,null,null),function kd(u){let p=u[13];if(!p)return ZI(u[1],u);for(;p;){let g=null;if(Ja(p))g=p[13];else{const y=p[10];y&&(g=y)}if(!g){for(;p&&!p[4]&&p!==u;)Ja(p)&&ZI(p[1],p),p=p[3];null===p&&(p=u),Ja(p)&&ZI(p[1],p),g=p&&p[4]}p=g}}(p)}}function ZI(u,p){if(!(256&p[2])){p[2]&=-129,p[2]|=256,function VR(u,p){let g;if(null!=u&&null!=(g=u.destroyHooks))for(let y=0;y<g.length;y+=2){const C=p[g[y]];if(!(C instanceof Kg)){const S=g[y+1];if(Array.isArray(S))for(let T=0;T<S.length;T+=2){const A=C[S[T]],O=S[T+1];try{O.call(A)}finally{}}else try{S.call(C)}finally{}}}}(u,p),function lB(u,p){const g=u.cleanup,y=p[7];let C=-1;if(null!==g)for(let S=0;S<g.length-1;S+=2)if("string"==typeof g[S]){const T=g[S+1],A="function"==typeof T?T(p):Zn(p[T]),O=y[C=g[S+2]],j=g[S+3];"boolean"==typeof j?A.removeEventListener(g[S],O,j):j>=0?y[C=j]():y[C=-j].unsubscribe(),S+=2}else{const T=y[C=g[S+1]];g[S].call(T)}if(null!==y){for(let S=C+1;S<y.length;S++)y[S]();p[7]=null}}(u,p),1===p[1].type&&tr(p[11])&&p[11].destroy();const g=p[17];if(null!==g&&mh(p[3])){g!==p[3]&&oB(g,p);const y=p[19];null!==y&&y.detachView(u)}}}function Eq(u,p,g){return function gb(u,p,g){let y=p;for(;null!==y&&40&y.type;)y=(p=y).parent;if(null===y)return g[0];if(2&y.flags){const C=u.data[y.directiveStart].encapsulation;if(C===ws.None||C===ws.Emulated)return null}return Jo(y,g)}(u,p.parent,g)}function bb(u,p,g,y,C){tr(u)?u.insertBefore(p,g,y,C):p.insertBefore(g,y,C)}function hB(u,p,g){tr(u)?u.appendChild(p,g):p.appendChild(g)}function cB(u,p,g,y,C){null!==y?bb(u,p,g,y,C):hB(u,p,g)}function XI(u,p){return tr(u)?u.parentNode(p):p.parentNode}function uB(u,p,g){return pB(u,p,g)}let pB=function zR(u,p,g){return 40&u.type?Jo(u,g):null};function D0(u,p,g,y){const C=Eq(u,y,p),S=p[11],A=uB(y.parent||p[6],y,p);if(null!=C)if(Array.isArray(g))for(let O=0;O<g.length;O++)cB(S,C,g[O],A,!1);else cB(S,C,g,A,!1)}function QI(u,p){if(null!==p){const g=p.type;if(3&g)return Jo(p,u);if(4&g)return JI(-1,u[p.index]);if(8&g){const y=p.child;if(null!==y)return QI(u,y);{const C=u[p.index];return mh(C)?JI(-1,C):Zn(C)}}if(32&g)return NR(p,u)()||Zn(u[p.index]);{const y=mB(u,p);return null!==y?Array.isArray(y)?y[0]:QI(cx(u[16]),y):QI(u,p.next)}}return null}function mB(u,p){return null!==p?u[16][6].projection[p.projection]:null}function JI(u,p){const g=10+u+1;if(g<p.length){const y=p[g],C=y[1].firstChild;if(null!==C)return QI(y,C)}return p[7]}function bB(u,p,g,y,C,S,T){for(;null!=g;){const A=y[g.index],O=g.type;if(T&&0===p&&(A&&wh(Zn(A),y),g.flags|=4),64!=(64&g.flags))if(8&O)bB(u,p,g.child,y,C,S,!1),I0(p,u,C,A,S);else if(32&O){const j=NR(g,y);let K;for(;K=j();)I0(p,u,C,K,S);I0(p,u,C,A,S)}else 16&O?Sh(u,p,y,g,C,S):I0(p,u,C,A,S);g=T?g.projectionNext:g.next}}function dx(u,p,g,y,C,S){bB(g,y,u.firstChild,p,C,S,!1)}function Sh(u,p,g,y,C,S){const T=g[16],O=T[6].projection[y.projection];if(Array.isArray(O))for(let j=0;j<O.length;j++)I0(p,u,C,O[j],S);else bB(u,p,O,T[3],C,S,!0)}function yB(u,p,g){tr(u)?u.setAttribute(p,"style",g):p.style.cssText=g}function ux(u,p,g){tr(u)?""===g?u.removeAttribute(p,"class"):u.setAttribute(p,"class",g):p.className=g}function UR(u,p,g){let y=u.length;for(;;){const C=u.indexOf(p,g);if(-1===C)return C;if(0===C||u.charCodeAt(C-1)<=32){const S=p.length;if(C+S===y||u.charCodeAt(C+S)<=32)return C}g=C+1}}const tT="ng-template";function qn(u,p,g){let y=0;for(;y<u.length;){let C=u[y++];if(g&&"class"===C){if(C=u[y],-1!==UR(C.toLowerCase(),p,0))return!0}else if(1===C){for(;y<u.length&&"string"==typeof(C=u[y++]);)if(C.toLowerCase()===p)return!0;return!1}}return!1}function qR(u){return 4===u.type&&u.value!==tT}function iT(u,p,g){return p===(4!==u.type||g?u.value:tT)}function Dq(u,p,g){let y=4;const C=u.attrs||[],S=function uee(u){for(let p=0;p<u.length;p++)if(_s(u[p]))return p;return u.length}(C);let T=!1;for(let A=0;A<p.length;A++){const O=p[A];if("number"!=typeof O){if(!T)if(4&y){if(y=2|1&y,""!==O&&!iT(u,O,g)||""===O&&1===p.length){if(df(y))return!1;T=!0}}else{const j=8&y?O:p[++A];if(8&y&&null!==u.attrs){if(!qn(u.attrs,j,g)){if(df(y))return!1;T=!0}continue}const re=kq(8&y?"class":O,C,qR(u),g);if(-1===re){if(df(y))return!1;T=!0;continue}if(""!==j){let fe;fe=re>S?"":C[re+1].toLowerCase();const Oe=8&y?fe:null;if(Oe&&-1!==UR(Oe,j,0)||2&y&&j!==fe){if(df(y))return!1;T=!0}}}}else{if(!T&&!df(y)&&!df(O))return!1;if(T&&df(O))continue;T=!1,y=O|1&y}}return df(y)||T}function df(u){return 0==(1&u)}function kq(u,p,g,y){if(null===p)return-1;let C=0;if(y||!g){let S=!1;for(;C<p.length;){const T=p[C];if(T===u)return C;if(3===T||6===T)S=!0;else{if(1===T||2===T){let A=p[++C];for(;"string"==typeof A;)A=p[++C];continue}if(4===T)break;if(0===T){C+=4;continue}}C+=S?1:2}return-1}return function Rq(u,p){let g=u.indexOf(4);if(g>-1)for(g++;g<u.length;){const y=u[g];if("number"==typeof y)return-1;if(y===p)return g;g++}return-1}(p,u)}function sT(u,p,g=!1){for(let y=0;y<p.length;y++)if(Dq(u,p[y],g))return!0;return!1}function Aq(u,p){e:for(let g=0;g<p.length;g++){const y=p[g];if(u.length===y.length){for(let C=0;C<u.length;C++)if(u[C]!==y[C])continue e;return!0}}return!1}function Lq(u,p){return u?":not("+p.trim()+")":p}function pee(u){let p=u[0],g=1,y=2,C="",S=!1;for(;g<u.length;){let T=u[g];if("string"==typeof T)if(2&y){const A=u[++g];C+="["+T+(A.length>0?'="'+A+'"':"")+"]"}else 8&y?C+="."+T:4&y&&(C+=" "+T);else""!==C&&!df(T)&&(p+=Lq(S,C),C=""),y=T,S=S||!df(y);g++}return""!==C&&(p+=Lq(S,C)),p}const Ls={};function Mq(u){Oq(Bs(),_t(),Fa()+u,Gu())}function Oq(u,p,g,y){if(!y)if(3==(3&p[2])){const S=u.preOrderCheckHooks;null!==S&&$y(p,S,g)}else{const S=u.preOrderHooks;null!==S&&Ky(p,S,0,g)}Cd(g)}function dt(u,p){return u<<17|p<<2}function Kr(u){return u>>17&32767}function Rd(u){return 2|u}function uf(u){return(131068&u)>>2}function WR(u,p){return-131069&u|p<<2}function Na(u){return 1|u}function sA(u,p){const g=u.contentQueries;if(null!==g)for(let y=0;y<g.length;y+=2){const C=g[y],S=g[y+1];if(-1!==S){const T=u.data[S];Wy(C),T.contentQueries(2,p[S],S)}}}function gx(u,p,g,y,C,S,T,A,O,j){const K=p.blueprint.slice();return K[0]=C,K[2]=140|y,Hc(K),K[3]=K[15]=u,K[8]=g,K[10]=T||u&&u[10],K[11]=A||u&&u[11],K[12]=O||u&&u[12]||null,K[9]=j||u&&u[9]||null,K[6]=S,K[16]=2==p.type?u[16]:K,K}function k0(u,p,g,y,C){let S=u.data[p];if(null===S)S=function R0(u,p,g,y,C){const S=Xp(),T=zy(),O=u.data[p]=function Wq(u,p,g,y,C,S){return{type:g,index:y,insertBeforeIndex:null,injectorIndex:p?p.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:C,attrs:S,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:p,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?S:S&&S.parent,g,p,y,C);return null===u.firstChild&&(u.firstChild=O),null!==S&&(T?null==S.child&&null!==O.parent&&(S.child=O):null===S.next&&(S.next=O)),O}(u,p,g,y,C),function jy(){return Xi.lFrame.inI18n}()&&(S.flags|=64);else if(64&S.type){S.type=g,S.value=y,S.attrs=C;const T=function Wu(){const u=Xi.lFrame,p=u.currentTNode;return u.isParent?p:p.parent}();S.injectorIndex=null===T?-1:T.injectorIndex}return bh(S,!0),S}function vb(u,p,g,y){if(0===g)return-1;const C=p.length;for(let S=0;S<g;S++)p.push(y),u.blueprint.push(y),u.data.push(null);return C}function mv(u,p,g){vm(p);try{const y=u.viewQuery;null!==y&&bx(1,y,g);const C=u.template;null!==C&&xB(u,p,C,1,g),u.firstCreatePass&&(u.firstCreatePass=!1),u.staticContentQueries&&sA(u,p),u.staticViewQueries&&bx(2,u.viewQuery,g);const S=u.components;null!==S&&function Uq(u,p){for(let g=0;g<p.length;g++)t4(u,p[g])}(p,S)}catch(y){throw u.firstCreatePass&&(u.incompleteFirstPass=!0,u.firstCreatePass=!1),y}finally{p[2]&=-5,Jp()}}function Cb(u,p,g,y){const C=p[2];if(256==(256&C))return;vm(p);const S=Gu();try{Hc(p),function gm(u){return Xi.lFrame.bindingIndex=u}(u.bindingStartIndex),null!==g&&xB(u,p,g,2,y);const T=3==(3&C);if(!S)if(T){const j=u.preOrderCheckHooks;null!==j&&$y(p,j,null)}else{const j=u.preOrderHooks;null!==j&&Ky(p,j,0,null),$g(p,0)}if(function e4(u){for(let p=GI(u);null!==p;p=HR(p)){if(!p[2])continue;const g=p[9];for(let y=0;y<g.length;y++){const C=g[y],S=C[3];0==(1024&C[2])&&yd(S,1),C[2]|=1024}}}(p),function Jq(u){for(let p=GI(u);null!==p;p=HR(p))for(let g=10;g<p.length;g++){const y=p[g],C=y[1];hu(y)&&Cb(C,y,C.template,y[8])}}(p),null!==u.contentQueries&&sA(u,p),!S)if(T){const j=u.contentCheckHooks;null!==j&&$y(p,j)}else{const j=u.contentHooks;null!==j&&Ky(p,j,1),$g(p,1)}!function wB(u,p){const g=u.hostBindingOpCodes;if(null!==g)try{for(let y=0;y<g.length;y++){const C=g[y];if(C<0)Cd(~C);else{const S=C,T=g[++y],A=g[++y];Uy(T,S),A(2,p[S])}}}finally{Cd(-1)}}(u,p);const A=u.components;null!==A&&function nA(u,p){for(let g=0;g<p.length;g++)Aee(u,p[g])}(p,A);const O=u.viewQuery;if(null!==O&&bx(2,O,y),!S)if(T){const j=u.viewCheckHooks;null!==j&&$y(p,j)}else{const j=u.viewHooks;null!==j&&Ky(p,j,2),$g(p,2)}!0===u.firstUpdatePass&&(u.firstUpdatePass=!1),S||(p[2]&=-73),1024&p[2]&&(p[2]&=-1025,yd(p[3],-1))}finally{Jp()}}function SB(u,p,g,y){const C=p[10],S=!Gu(),T=qu(p);try{S&&!T&&C.begin&&C.begin(),T&&mv(u,p,y),Cb(u,p,g,y)}finally{S&&!T&&C.end&&C.end()}}function xB(u,p,g,y,C){const S=Fa(),T=2&y;try{Cd(-1),T&&p.length>20&&Oq(u,p,20,Gu()),g(y,C)}finally{Cd(S)}}function rA(u,p,g){if(nm(p)){const C=p.directiveEnd;for(let S=p.directiveStart;S<C;S++){const T=u.data[S];T.contentQueries&&T.contentQueries(1,g[S],S)}}}function A0(u,p,g){!fm()||(function Kq(u,p,g,y){const C=g.directiveStart,S=g.directiveEnd;u.firstCreatePass||gn(g,p),wh(y,p);const T=g.initialInputs;for(let A=C;A<S;A++){const O=u.data[A],j=Nc(O);j&&uA(p,g,O);const K=fl(p,u,A,g);wh(K,p),null!==T&&pA(0,A-C,K,O,0,T),j&&(Pa(g.index,p)[8]=K)}}(u,p,g,Jo(g,p)),128==(128&g.flags)&&function Dee(u,p,g){const y=g.directiveStart,C=g.directiveEnd,T=g.index,A=function Gg(){return Xi.lFrame.currentDirectiveIndex}();try{Cd(T);for(let O=y;O<C;O++){const j=u.data[O],K=p[O];bm(O),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&Yq(j,K)}}finally{Cd(-1),bm(A)}}(u,p,g))}function oA(u,p,g=Jo){const y=p.localNames;if(null!==y){let C=p.index+1;for(let S=0;S<y.length;S+=2){const T=y[S+1],A=-1===T?g(p,u):u[T];u[C++]=A}}}function EB(u){const p=u.tView;return null===p||p.incompleteFirstPass?u.tView=uT(1,null,u.template,u.decls,u.vars,u.directiveDefs,u.pipeDefs,u.viewQuery,u.schemas,u.consts):p}function uT(u,p,g,y,C,S,T,A,O,j){const K=20+y,re=K+C,fe=function qq(u,p){const g=[];for(let y=0;y<p;y++)g.push(y<u?null:Ls);return g}(K,re),Oe="function"==typeof j?j():j;return fe[1]={type:u,blueprint:fe,template:g,queries:null,viewQuery:A,declTNode:p,data:fe.slice().fill(null,K),bindingStartIndex:K,expandoStartIndex:re,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof S?S():S,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:O,consts:Oe,incompleteFirstPass:!1}}function TB(u,p,g,y){const C=mT(p);null===g?C.push(y):(C.push(g),u.firstCreatePass&&gT(u).push(y,C.length-1))}function DB(u,p,g){for(let y in u)if(u.hasOwnProperty(y)){const C=u[y];(g=null===g?{}:g).hasOwnProperty(y)?g[y].push(p,C):g[y]=[p,C]}return g}function $c(u,p,g,y,C,S,T,A){const O=Jo(p,g);let K,j=p.inputs;!A&&null!=j&&(K=j[y])?(O0(u,g,K,y,C),ZC(p)&&function aA(u,p){const g=Pa(p,u);16&g[2]||(g[2]|=64)}(g,p.index)):3&p.type&&(y=function kB(u){return"class"===u?"className":"for"===u?"htmlFor":"formaction"===u?"formAction":"innerHtml"===u?"innerHTML":"readonly"===u?"readOnly":"tabindex"===u?"tabIndex":u}(y),C=null!=T?T(C,p.value||"",y):C,tr(S)?S.setProperty(O,y,C):el(y)||(O.setProperty?O.setProperty(y,C):O[y]=C))}function fT(u,p,g,y){let C=!1;if(fm()){const S=function cA(u,p,g){const y=u.directiveRegistry;let C=null;if(y)for(let S=0;S<y.length;S++){const T=y[S];sT(g,T.selectors,!1)&&(C||(C=[]),pl(gn(g,p),u,T.type),Nc(T)?(Zq(u,g),C.unshift(T)):C.push(T))}return C}(u,p,g),T=null===y?null:{"":-1};if(null!==S){C=!0,LB(g,u.data.length,S.length);for(let K=0;K<S.length;K++){const re=S[K];re.providersResolver&&re.providersResolver(re)}let A=!1,O=!1,j=vb(u,p,S.length,null);for(let K=0;K<S.length;K++){const re=S[K];g.mergedAttrs=Fn(g.mergedAttrs,re.hostAttrs),dA(u,g,p,j,re),AB(j,re,T),null!==re.contentQueries&&(g.flags|=8),(null!==re.hostBindings||null!==re.hostAttrs||0!==re.hostVars)&&(g.flags|=128);const fe=re.type.prototype;!A&&(fe.ngOnChanges||fe.ngOnInit||fe.ngDoCheck)&&((u.preOrderHooks||(u.preOrderHooks=[])).push(g.index),A=!0),!O&&(fe.ngOnChanges||fe.ngDoCheck)&&((u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(g.index),O=!0),j++}!function pT(u,p){const y=p.directiveEnd,C=u.data,S=p.attrs,T=[];let A=null,O=null;for(let j=p.directiveStart;j<y;j++){const K=C[j],re=K.inputs,fe=null===S||qR(p)?null:kee(re,S);T.push(fe),A=DB(re,j,A),O=DB(K.outputs,j,O)}null!==A&&(A.hasOwnProperty("class")&&(p.flags|=16),A.hasOwnProperty("style")&&(p.flags|=32)),p.initialInputs=T,p.inputs=A,p.outputs=O}(u,g)}T&&function Xq(u,p,g){if(p){const y=u.localNames=[];for(let C=0;C<p.length;C+=2){const S=g[p[C+1]];if(null==S)throw new Ft(-301,!1);y.push(p[C],S)}}}(g,y,T)}return g.mergedAttrs=Fn(g.mergedAttrs,g.attrs),C}function hA(u,p,g,y,C,S){const T=S.hostBindings;if(T){let A=u.hostBindingOpCodes;null===A&&(A=u.hostBindingOpCodes=[]);const O=~p.index;(function Tee(u){let p=u.length;for(;p>0;){const g=u[--p];if("number"==typeof g&&g<0)return g}return 0})(A)!=O&&A.push(O),A.push(y,C,T)}}function Yq(u,p){null!==u.hostBindings&&u.hostBindings(1,p)}function Zq(u,p){p.flags|=2,(u.components||(u.components=[])).push(p.index)}function AB(u,p,g){if(g){if(p.exportAs)for(let y=0;y<p.exportAs.length;y++)g[p.exportAs[y]]=u;Nc(p)&&(g[""]=u)}}function LB(u,p,g){u.flags|=1,u.directiveStart=p,u.directiveEnd=p+g,u.providerIndexes=p}function dA(u,p,g,y,C){u.data[y]=C;const S=C.factory||(C.factory=ec(C.type)),T=new Kg(S,Nc(C),null);u.blueprint[y]=T,g[y]=T,hA(u,p,0,y,vb(u,g,C.hostVars,Ls),C)}function uA(u,p,g){const y=Jo(p,u),C=EB(g),S=u[10],T=fA(u,gx(u,C,null,g.onPush?64:16,y,p,S,S.createRenderer(y,g),null,null));u[p.index]=T}function Kc(u,p,g,y,C,S){const T=Jo(u,p);!function MB(u,p,g,y,C,S,T){if(null==S)tr(u)?u.removeAttribute(p,C,g):p.removeAttribute(C);else{const A=null==T?Ie(S):T(S,y||"",C);tr(u)?u.setAttribute(p,C,A,g):g?p.setAttributeNS(g,C,A):p.setAttribute(C,A)}}(p[11],T,S,u.value,g,y,C)}function pA(u,p,g,y,C,S){const T=S[p];if(null!==T){const A=y.setInput;for(let O=0;O<T.length;){const j=T[O++],K=T[O++],re=T[O++];null!==A?y.setInput(g,re,j,K):g[K]=re}}}function kee(u,p){let g=null,y=0;for(;y<p.length;){const C=p[y];if(0!==C)if(5!==C){if("number"==typeof C)break;u.hasOwnProperty(C)&&(null===g&&(g=[]),g.push(C,u[C],p[y+1])),y+=2}else y+=2;else y+=4}return g}function Qq(u,p,g,y){return new Array(u,!0,!1,p,null,0,y,g,null,null)}function Aee(u,p){const g=Pa(p,u);if(hu(g)){const y=g[1];80&g[2]?Cb(y,g,y.template,g[8]):g[5]>0&&OB(g)}}function OB(u){for(let y=GI(u);null!==y;y=HR(y))for(let C=10;C<y.length;C++){const S=y[C];if(1024&S[2]){const T=S[1];Cb(T,S,T.template,S[8])}else S[5]>0&&OB(S)}const g=u[1].components;if(null!==g)for(let y=0;y<g.length;y++){const C=Pa(g[y],u);hu(C)&&C[5]>0&&OB(C)}}function t4(u,p){const g=Pa(p,u),y=g[1];(function Lee(u,p){for(let g=p.length;g<u.blueprint.length;g++)p.push(u.blueprint[g])})(y,g),mv(y,g,g[8])}function fA(u,p){return u[13]?u[14][4]=p:u[13]=p,u[14]=p,p}function PB(u){for(;u;){u[2]|=64;const p=cx(u);if(Gp(u)&&!p)return u;u=p}return null}function L0(u,p,g){const y=p[10];y.begin&&y.begin();try{Cb(u,p,u.template,g)}catch(C){throw HB(p,C),C}finally{y.end&&y.end()}}function NB(u){!function FB(u){for(let p=0;p<u.components.length;p++){const g=u.components[p],y=RR(g),C=y[1];SB(C,y,C.template,g)}}(u[8])}function bx(u,p,g){Wy(0),p(u,g)}const bA=(()=>Promise.resolve(null))();function mT(u){return u[7]||(u[7]=[])}function gT(u){return u.cleanup||(u.cleanup=[])}function HB(u,p){const g=u[9],y=g?g.get(hx,null):null;y&&y.handleError(p)}function O0(u,p,g,y,C){for(let S=0;S<g.length;){const T=g[S++],A=g[S++],O=p[T],j=u.data[T];null!==j.setInput?j.setInput(O,C,y,A):O[A]=C}}function ip(u,p,g){const y=lu(p,u);!function rB(u,p,g){tr(u)?u.setValue(p,g):p.textContent=g}(u[11],y,g)}function P0(u,p,g){let y=g?u.styles:null,C=g?u.classes:null,S=0;if(null!==p)for(let T=0;T<p.length;T++){const A=p[T];"number"==typeof A?S=A:1==S?C=at(C,A):2==S&&(y=at(y,A+": "+p[++T]+";"))}g?u.styles=y:u.stylesWithoutHost=y,g?u.classes=C:u.classesWithoutHost=C}const yA=new Wr("INJECTOR",-1);class Po{get(p,g=Id){if(g===Id){const y=new Error(`NullInjectorError: No provider for ${$e(p)}!`);throw y.name="NullInjectorError",y}return g}}const yx=new Wr("Set Injector scope."),gv={},i4={};let vA;function jB(){return void 0===vA&&(vA=new Po),vA}function UB(u,p=null,g=null,y){const C=qB(u,p,g,y);return C._resolveInjectorDefTypes(),C}function qB(u,p=null,g=null,y){return new s4(u,g,p||jB(),y)}class s4{constructor(p,g,y,C=null){this.parent=y,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const S=[];g&&Ch(g,A=>this.processProvider(A,p,g)),Ch([p],A=>this.processInjectorType(A,[],S)),this.records.set(yA,bv(void 0,this));const T=this.records.get(yx);this.scope=null!=T?T.value:null,this.source=C||("object"==typeof p?null:$e(p))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(p=>p.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(p,g=Id,y=Gi.Default){this.assertNotDestroyed();const C=De(this),S=fn(void 0);try{if(!(y&Gi.SkipSelf)){let A=this.records.get(p);if(void 0===A){const O=function xh(u){return"function"==typeof u||"object"==typeof u&&u instanceof Wr}(p)&&fr(p);A=O&&this.injectableDefInScope(O)?bv(bT(p),gv):null,this.records.set(p,A)}if(null!=A)return this.hydrate(p,A)}return(y&Gi.Self?jB():this.parent).get(p,g=y&Gi.Optional&&g===Id?null:g)}catch(T){if("NullInjectorError"===T.name){if((T[Lm]=T[Lm]||[]).unshift($e(p)),C)throw T;return function Gr(u,p,g,y){const C=u[Lm];throw p[Z]&&C.unshift(p[Z]),u.message=function qc(u,p,g,y=null){u=u&&"\n"===u.charAt(0)&&"\u0275"==u.charAt(1)?u.substr(2):u;let C=$e(p);if(Array.isArray(p))C=p.map($e).join(" -> ");else if("object"==typeof p){let S=[];for(let T in p)if(p.hasOwnProperty(T)){let A=p[T];S.push(T+":"+("string"==typeof A?JSON.stringify(A):$e(A)))}C=`{${S.join(", ")}}`}return`${g}${y?"("+y+")":""}[${C}]: ${u.replace(P,"\n  ")}`}("\n"+u.message,C,g,y),u.ngTokenPath=C,u[Lm]=null,u}(T,p,"R3InjectorError",this.source)}throw T}finally{fn(S),De(C)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(p=>this.get(p))}toString(){const p=[];return this.records.forEach((y,C)=>p.push($e(C))),`R3Injector[${p.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ft(205,!1)}processInjectorType(p,g,y){if(!(p=Ne(p)))return!1;let C=Lc(p);const S=null==C&&p.ngModule||void 0,T=void 0===S?p:S,A=-1!==y.indexOf(T);if(void 0!==S&&(C=Lc(S)),null==C)return!1;if(null!=C.imports&&!A){let K;y.push(T);try{Ch(C.imports,re=>{this.processInjectorType(re,g,y)&&(void 0===K&&(K=[]),K.push(re))})}finally{}if(void 0!==K)for(let re=0;re<K.length;re++){const{ngModule:fe,providers:Oe}=K[re];Ch(Oe,ft=>this.processProvider(ft,fe,Oe||de))}}this.injectorDefTypes.add(T);const O=ec(T)||(()=>new T);this.records.set(T,bv(O,gv));const j=C.providers;if(null!=j&&!A){const K=p;Ch(j,re=>this.processProvider(re,K,j))}return void 0!==S&&void 0!==p.providers}processProvider(p,g,y){let C=yv(p=Ne(p))?p:Ne(p&&p.provide);const S=function r4(u,p,g){return GB(u)?bv(void 0,u.useValue):bv(WB(u),gv)}(p);if(yv(p)||!0!==p.multi)this.records.get(C);else{let T=this.records.get(C);T||(T=bv(void 0,gv,!0),T.factory=()=>In(T.multi),this.records.set(C,T)),C=p,T.multi.push(p)}this.records.set(C,S)}hydrate(p,g){return g.value===gv&&(g.value=i4,g.value=g.factory()),"object"==typeof g.value&&g.value&&function Cx(u){return null!==u&&"object"==typeof u&&"function"==typeof u.ngOnDestroy}(g.value)&&this.onDestroy.add(g.value),g.value}injectableDefInScope(p){if(!p.providedIn)return!1;const g=Ne(p.providedIn);return"string"==typeof g?"any"===g||g===this.scope:this.injectorDefTypes.has(g)}}function bT(u){const p=fr(u),g=null!==p?p.factory:ec(u);if(null!==g)return g;if(u instanceof Wr)throw new Ft(204,!1);if(u instanceof Function)return function n4(u){const p=u.length;if(p>0)throw Xl(p,"?"),new Ft(204,!1);const g=function To(u){const p=u&&(u[fh]||u[so]);if(p){const g=function Ma(u){if(u.hasOwnProperty("name"))return u.name;const p=(""+u).match(/^function\s*([^\s(]+)/);return null===p?"":p[1]}(u);return console.warn(`DEPRECATED: DI is instantiating a token "${g}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${g}" class.`),p}return null}(u);return null!==g?()=>g.factory(u):()=>new u}(u);throw new Ft(204,!1)}function WB(u,p,g){let y;if(yv(u)){const C=Ne(u);return ec(C)||bT(C)}if(GB(u))y=()=>Ne(u.useValue);else if(function F0(u){return!(!u||!u.useFactory)}(u))y=()=>u.useFactory(...In(u.deps||[]));else if(function o4(u){return!(!u||!u.useExisting)}(u))y=()=>Gt(Ne(u.useExisting));else{const C=Ne(u&&(u.useClass||u.provide));if(!function vx(u){return!!u.deps}(u))return ec(C)||bT(C);y=()=>new C(...In(u.deps))}return y}function bv(u,p,g=!1){return{factory:u,value:p,multi:g?[]:void 0}}function GB(u){return null!==u&&"object"==typeof u&&oe in u}function yv(u){return"function"==typeof u}let gu=(()=>{class u{static create(g,y){var C;if(Array.isArray(g))return UB({name:""},y,g,"");{const S=null!==(C=g.name)&&void 0!==C?C:"";return UB({name:S},g.parent,g.providers,S)}}}return u.THROW_IF_NOT_FOUND=Id,u.NULL=new Po,u.\u0275prov=En({token:u,providedIn:"any",factory:()=>Gt(yA)}),u.__NG_ELEMENT_ID__=-1,u})();function c4(u,p){wm(RR(u)[1],mr())}function IA(u){let p=function _A(u){return Object.getPrototypeOf(u.prototype).constructor}(u.type),g=!0;const y=[u];for(;p;){let C;if(Nc(u))C=p.\u0275cmp||p.\u0275dir;else{if(p.\u0275cmp)throw new Ft(903,"");C=p.\u0275dir}if(C){if(g){y.push(C);const T=u;T.inputs=TA(u.inputs),T.declaredInputs=TA(u.declaredInputs),T.outputs=TA(u.outputs);const A=C.hostBindings;A&&p4(u,A);const O=C.viewQuery,j=C.contentQueries;if(O&&gf(u,O),j&&DA(u,j),Pe(u.inputs,C.inputs),Pe(u.declaredInputs,C.declaredInputs),Pe(u.outputs,C.outputs),Nc(C)&&C.data.animation){const K=u.data;K.animation=(K.animation||[]).concat(C.data.animation)}}const S=C.features;if(S)for(let T=0;T<S.length;T++){const A=S[T];A&&A.ngInherit&&A(u),A===IA&&(g=!1)}}p=Object.getPrototypeOf(p)}!function u4(u){let p=0,g=null;for(let y=u.length-1;y>=0;y--){const C=u[y];C.hostVars=p+=C.hostVars,C.hostAttrs=Fn(C.hostAttrs,g=Fn(g,C.hostAttrs))}}(y)}function TA(u){return u===ar?{}:u===de?[]:u}function gf(u,p){const g=u.viewQuery;u.viewQuery=g?(y,C)=>{p(y,C),g(y,C)}:p}function DA(u,p){const g=u.contentQueries;u.contentQueries=g?(y,C,S)=>{p(y,C,S),g(y,C,S)}:p}function p4(u,p){const g=u.hostBindings;u.hostBindings=g?(y,C)=>{p(y,C),g(y,C)}:p}let Cl=null;function Nm(){if(!Cl){const u=Xs.Symbol;if(u&&u.iterator)Cl=u.iterator;else{const p=Object.getOwnPropertyNames(Map.prototype);for(let g=0;g<p.length;++g){const y=p[g];"entries"!==y&&"size"!==y&&Map.prototype[y]===Map.prototype.entries&&(Cl=y)}}}return Cl}function Bm(u){return!!ST(u)&&(Array.isArray(u)||!(u instanceof Map)&&Nm()in u)}function ST(u){return null!==u&&("function"==typeof u||"object"==typeof u)}function bf(u,p,g){return u[p]=g}function ih(u,p,g){return!Object.is(u[p],g)&&(u[p]=g,!0)}function wb(u,p,g,y){const C=ih(u,p,g);return ih(u,p+1,y)||C}function yu(u,p,g,y,C,S){const T=wb(u,p,g,y);return wb(u,p+2,C,S)||T}function vu(u,p,g,y){const C=_t();return ih(C,cu(),p)&&(Bs(),Kc(qr(),C,u,p,g,y)),vu}function Hm(u,p,g,y){return ih(u,cu(),g)?p+Ie(g)+y:Ls}function N0(u,p,g,y,C,S){const A=wb(u,function vd(){return Xi.lFrame.bindingIndex}(),g,C);return nc(2),A?p+Ie(g)+y+Ie(C)+S:Ls}function AA(u,p,g,y,C,S,T,A){const O=_t(),j=Bs(),K=u+20,re=j.firstCreatePass?function v4(u,p,g,y,C,S,T,A,O){const j=p.consts,K=k0(p,u,4,T||null,sc(j,A));fT(p,g,K,sc(j,O)),wm(p,K);const re=K.tViews=uT(2,K,y,C,S,p.directiveRegistry,p.pipeRegistry,null,p.schemas,j);return null!==p.queries&&(p.queries.template(p,K),re.queries=p.queries.embeddedTView(K)),K}(K,j,O,p,g,y,C,S,T):j.data[K];bh(re,!1);const fe=O[11].createComment("");D0(j,O,fe,re),wh(fe,O),fA(O,O[K]=Qq(fe,O,fe,re)),Fc(re)&&A0(j,O,re),null!=T&&oA(O,re,A)}function l2(u){return function Bc(u,p){return u[p]}(function o0(){return Xi.lFrame.contextLView}(),20+u)}function Sx(u,p=Gi.Default){const g=_t();return null===g?Gt(u,p):Zg(mr(),g,Ne(u),p)}function v2(){throw new Error("invalid")}function zA(u,p,g){const y=_t();return ih(y,cu(),p)&&$c(Bs(),qr(),y,u,p,y[11],g,!1),zA}function jA(u,p,g,y,C){const T=C?"class":"style";O0(u,g,p.inputs[T],T,y)}function TT(u,p,g,y){const C=_t(),S=Bs(),T=20+u,A=C[11],O=C[T]=eh(A,p,function Cm(){return Xi.lFrame.currentNamespace}()),j=S.firstCreatePass?function R4(u,p,g,y,C,S,T){const A=p.consts,j=k0(p,u,2,C,sc(A,S));return fT(p,g,j,sc(A,T)),null!==j.attrs&&P0(j,j.attrs,!1),null!==j.mergedAttrs&&P0(j,j.mergedAttrs,!0),null!==p.queries&&p.queries.elementStart(p,j),j}(T,S,C,0,p,g,y):S.data[T];bh(j,!0);const K=j.mergedAttrs;null!==K&&ei(A,O,K);const re=j.classes;null!==re&&ux(A,O,re);const fe=j.styles;return null!==fe&&yB(A,O,fe),64!=(64&j.flags)&&D0(S,C,O,j),0===function r0(){return Xi.lFrame.elementDepthCount}()&&wh(O,C),function Ug(){Xi.lFrame.elementDepthCount++}(),Fc(j)&&(A0(S,C,j),rA(S,j,C)),null!==y&&oA(C,j),TT}function xx(){let u=mr();zy()?mm():(u=u.parent,bh(u,!1));const p=u;!function Ny(){Xi.lFrame.elementDepthCount--}();const g=Bs();return g.firstCreatePass&&(wm(g,u),nm(u)&&g.queries.elementEnd(u)),null!=p.classesWithoutHost&&function a0(u){return 0!=(16&u.flags)}(p)&&jA(g,p,_t(),p.classesWithoutHost,!0),null!=p.stylesWithoutHost&&function SR(u){return 0!=(32&u.flags)}(p)&&jA(g,p,_t(),p.stylesWithoutHost,!1),xx}function UA(u,p,g,y){return TT(u,p,g,y),xx(),UA}function qA(u,p,g){const y=_t(),C=Bs(),S=u+20,T=C.firstCreatePass?function A4(u,p,g,y,C){const S=p.consts,T=sc(S,y),A=k0(p,u,8,"ng-container",T);return null!==T&&P0(A,T,!0),fT(p,g,A,sc(S,C)),null!==p.queries&&p.queries.elementStart(p,A),A}(S,C,y,p,g):C.data[S];bh(T,!0);const A=y[S]=y[11].createComment("");return D0(C,y,A,T),wh(A,y),Fc(T)&&(A0(C,y,T),rA(C,T,y)),null!=g&&oA(y,T),qA}function WA(){let u=mr();const p=Bs();return zy()?mm():(u=u.parent,bh(u,!1)),p.firstCreatePass&&(wm(p,u),nm(u)&&p.queries.elementEnd(u)),WA}function w2(){return _t()}function z0(u){return!!u&&"function"==typeof u.then}function GA(u){return!!u&&"function"==typeof u.subscribe}const $A=GA;function op(u,p,g,y){const C=_t(),S=Bs(),T=mr();return function x2(u,p,g,y,C,S,T,A){const O=Fc(y),K=u.firstCreatePass&&gT(u),re=p[8],fe=mT(p);let Oe=!0;if(3&y.type||A){const Vt=Jo(y,p),_i=A?A(Vt):Vt,It=fe.length,Zi=A?ks=>A(Zn(ks[y.index])):y.index;if(tr(g)){let ks=null;if(!A&&O&&(ks=function S2(u,p,g,y){const C=u.cleanup;if(null!=C)for(let S=0;S<C.length-1;S+=2){const T=C[S];if(T===g&&C[S+1]===y){const A=p[7],O=C[S+2];return A.length>O?A[O]:null}"string"==typeof T&&(S+=2)}return null}(u,p,C,y.index)),null!==ks)(ks.__ngLastListenerFn__||ks).__ngNextListenerFn__=S,ks.__ngLastListenerFn__=S,Oe=!1;else{S=YA(y,p,re,S,!1);const Xn=g.listen(_i,C,S);fe.push(S,Xn),K&&K.push(C,Zi,It,It+1)}}else S=YA(y,p,re,S,!0),_i.addEventListener(C,S,T),fe.push(S),K&&K.push(C,Zi,It,T)}else S=YA(y,p,re,S,!1);const ft=y.outputs;let jt;if(Oe&&null!==ft&&(jt=ft[C])){const Vt=jt.length;if(Vt)for(let _i=0;_i<Vt;_i+=2){const Qc=p[jt[_i]][jt[_i+1]].subscribe(S),Pb=fe.length;fe.push(S,Qc),K&&K.push(C,y.index,Pb,-(Pb+1))}}}(S,C,C[11],T,u,p,!!g,y),op}function E2(u,p,g,y){try{return!1!==g(y)}catch(C){return HB(u,C),!1}}function YA(u,p,g,y,C){return function S(T){if(T===Function)return y;const A=2&u.flags?Pa(u.index,p):p;0==(32&p[2])&&PB(A);let O=E2(p,0,y,T),j=S.__ngNextListenerFn__;for(;j;)O=E2(p,0,j,T)&&O,j=j.__ngNextListenerFn__;return C&&!1===O&&(T.preventDefault(),T.returnValue=!1),O}}function _2(u=1){return function Vc(u){return(Xi.lFrame.contextLView=function $S(u,p){for(;u>0;)p=p[15],u--;return p}(u,Xi.lFrame.contextLView))[8]}(u)}function L4(u,p){let g=null;const y=function dee(u){const p=u.attrs;if(null!=p){const g=p.indexOf(5);if(0==(1&g))return p[g+1]}return null}(u);for(let C=0;C<p.length;C++){const S=p[C];if("*"!==S){if(null===y?sT(u,S,!0):Aq(y,S))return C}else g=C}return g}function I2(u){const p=_t()[16][6];if(!p.projection){const y=p.projection=Xl(u?u.length:1,null),C=y.slice();let S=p.child;for(;null!==S;){const T=u?L4(S,u):0;null!==T&&(C[T]?C[T].projectionNext=S:y[T]=S,C[T]=S),S=S.next}}}function ZA(u,p=0,g){const y=_t(),C=Bs(),S=k0(C,20+u,16,null,g||null);null===S.projection&&(S.projection=p),mm(),64!=(64&S.flags)&&function nl(u,p,g){Sh(p[11],0,p,g,Eq(u,g,p),uB(g.parent||p[6],g,p))}(C,y,S)}function j0(u,p,g){return XA(u,"",p,"",g),j0}function XA(u,p,g,y,C){const S=_t(),T=Hm(S,p,g,y);return T!==Ls&&$c(Bs(),qr(),S,u,T,S[11],C,!1),XA}function M2(u,p,g,y,C){const S=u[g+1],T=null===p;let A=y?Kr(S):uf(S),O=!1;for(;0!==A&&(!1===O||T);){const K=u[A+1];Vm(u[A],p)&&(O=!0,u[A+1]=y?Na(K):Rd(K)),A=y?Kr(K):uf(K)}O&&(u[g+1]=y?Rd(S):Na(S))}function Vm(u,p){return null===u||null==p||(Array.isArray(u)?u[1]:u)===p||!(!Array.isArray(u)||"string"!=typeof p)&&Xu(u,p)>=0}const Xt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function kT(u){return u.substring(Xt.key,Xt.keyEnd)}function AT(u,p){const g=Xt.textEnd;return g===p?-1:(p=Xt.keyEnd=function P4(u,p,g){for(;p<g&&u.charCodeAt(p)>32;)p++;return p}(u,Xt.key=p,g),U0(u,p,g))}function U0(u,p,g){for(;p<g&&u.charCodeAt(p)<=32;)p++;return p}function JA(u,p,g){return Ad(u,p,g,!1),JA}function eL(u,p){return Ad(u,p,null,!0),eL}function F2(u){Yc(Ql,lp,u,!0)}function lp(u,p){for(let g=function RT(u){return function LT(u){Xt.key=0,Xt.keyEnd=0,Xt.value=0,Xt.valueEnd=0,Xt.textEnd=u.length}(u),AT(u,U0(u,0,Xt.textEnd))}(p);g>=0;g=AT(p,g))Ql(u,kT(p),!0)}function Ad(u,p,g,y){const C=_t(),S=Bs(),T=nc(2);S.firstUpdatePass&&_h(S,u,T,y),p!==Ls&&ih(C,T,p)&&V2(S,S.data[Fa()],C,C[11],u,C[T+1]=function j2(u,p){return null==u||("string"==typeof p?u+=p:"object"==typeof u&&(u=$e(Wc(u)))),u}(p,g),y,T)}function Yc(u,p,g,y){const C=Bs(),S=nc(2);C.firstUpdatePass&&_h(C,null,S,y);const T=_t();if(g!==Ls&&ih(T,S,g)){const A=C.data[Fa()];if(OT(A,y)&&!tL(C,S)){let O=y?A.classesWithoutHost:A.stylesWithoutHost;null!==O&&(g=at(O,g||"")),jA(C,A,T,g,y)}else!function nL(u,p,g,y,C,S,T,A){C===Ls&&(C=de);let O=0,j=0,K=0<C.length?C[0]:null,re=0<S.length?S[0]:null;for(;null!==K||null!==re;){const fe=O<C.length?C[O+1]:void 0,Oe=j<S.length?S[j+1]:void 0;let jt,ft=null;K===re?(O+=2,j+=2,fe!==Oe&&(ft=re,jt=Oe)):null===re||null!==K&&K<re?(O+=2,ft=K):(j+=2,ft=re,jt=Oe),null!==ft&&V2(u,p,g,y,ft,jt,T,A),K=O<C.length?C[O]:null,re=j<S.length?S[j]:null}}(C,A,T,T[11],T[S+1],T[S+1]=function H2(u,p,g){if(null==g||""===g)return de;const y=[],C=Wc(g);if(Array.isArray(C))for(let S=0;S<C.length;S++)u(y,C[S],!0);else if("object"==typeof C)for(const S in C)C.hasOwnProperty(S)&&u(y,S,C[S]);else"string"==typeof C&&p(y,C);return y}(u,p,g),y,S)}}function tL(u,p){return p>=u.expandoStartIndex}function _h(u,p,g,y){const C=u.data;if(null===C[g+1]){const S=C[Fa()],T=tL(u,g);OT(S,y)&&null===p&&!T&&(p=!1),p=function iL(u,p,g,y){const C=function Qp(u){const p=Xi.lFrame.currentDirectiveIndex;return-1===p?null:u[p]}(u);let S=y?p.residualClasses:p.residualStyles;if(null===C)0===(y?p.classBindings:p.styleBindings)&&(g=q0(g=_x(null,u,p,g,y),p.attrs,y),S=null);else{const T=p.directiveStylingLast;if(-1===T||u[T]!==C)if(g=_x(C,u,p,g,y),null===S){let O=function lc(u,p,g){const y=g?p.classBindings:p.styleBindings;if(0!==uf(y))return u[Kr(y)]}(u,p,y);void 0!==O&&Array.isArray(O)&&(O=_x(null,u,p,O[1],y),O=q0(O,p.attrs,y),function N2(u,p,g,y){u[Kr(g?p.classBindings:p.styleBindings)]=y}(u,p,y,O))}else S=function B2(u,p,g){let y;const C=p.directiveEnd;for(let S=1+p.directiveStylingLast;S<C;S++)y=q0(y,u[S].hostAttrs,g);return q0(y,p.attrs,g)}(u,p,y)}return void 0!==S&&(y?p.residualClasses=S:p.residualStyles=S),g}(C,S,p,y),function O4(u,p,g,y,C,S){let T=S?p.classBindings:p.styleBindings,A=Kr(T),O=uf(T);u[y]=g;let K,j=!1;if(Array.isArray(g)){const re=g;K=re[1],(null===K||Xu(re,K)>0)&&(j=!0)}else K=g;if(C)if(0!==O){const fe=Kr(u[A+1]);u[y+1]=dt(fe,A),0!==fe&&(u[fe+1]=WR(u[fe+1],y)),u[A+1]=function ee(u,p){return 131071&u|p<<17}(u[A+1],y)}else u[y+1]=dt(A,0),0!==A&&(u[A+1]=WR(u[A+1],y)),A=y;else u[y+1]=dt(O,0),0===A?A=y:u[O+1]=WR(u[O+1],y),O=y;j&&(u[y+1]=Rd(u[y+1])),M2(u,K,y,!0),M2(u,K,y,!1),function Wee(u,p,g,y,C){const S=C?u.residualClasses:u.residualStyles;null!=S&&"string"==typeof p&&Xu(S,p)>=0&&(g[y+1]=Na(g[y+1]))}(p,K,u,y,S),T=dt(A,O),S?p.classBindings=T:p.styleBindings=T}(C,S,p,g,T,y)}}function _x(u,p,g,y,C){let S=null;const T=g.directiveEnd;let A=g.directiveStylingLast;for(-1===A?A=g.directiveStart:A++;A<T&&(S=p[A],y=q0(y,S.hostAttrs,C),S!==u);)A++;return null!==u&&(g.directiveStylingLast=A),y}function q0(u,p,g){const y=g?1:2;let C=-1;if(null!==p)for(let S=0;S<p.length;S++){const T=p[S];"number"==typeof T?C=T:C===y&&(Array.isArray(u)||(u=void 0===u?[]:["",u]),Ql(u,T,!!g||p[++S]))}return void 0===u?null:u}function V2(u,p,g,y,C,S,T,A){if(!(3&p.type))return;const O=u.data,j=O[A+1];zm(function vB(u){return 1==(1&u)}(j)?z2(O,p,g,C,uf(j),T):void 0)||(zm(S)||function mu(u){return 2==(2&u)}(j)&&(S=z2(O,null,g,C,A,T)),function Iq(u,p,g,y,C){const S=tr(u);if(p)C?S?u.addClass(g,y):g.classList.add(y):S?u.removeClass(g,y):g.classList.remove(y);else{let T=-1===y.indexOf("-")?void 0:cf.DashCase;if(null==C)S?u.removeStyle(g,y,T):g.style.removeProperty(y);else{const A="string"==typeof C&&C.endsWith("!important");A&&(C=C.slice(0,-10),T|=cf.Important),S?u.setStyle(g,y,C,T):g.style.setProperty(y,C,A?"important":"")}}}(y,T,lu(Fa(),g),C,S))}function z2(u,p,g,y,C,S){const T=null===p;let A;for(;C>0;){const O=u[C],j=Array.isArray(O),K=j?O[1]:O,re=null===K;let fe=g[C+1];fe===Ls&&(fe=re?de:void 0);let Oe=re?nb(fe,y):K===y?fe:void 0;if(j&&!zm(Oe)&&(Oe=nb(O,y)),zm(Oe)&&(A=Oe,T))return A;const ft=u[C+1];C=T?Kr(ft):uf(ft)}if(null!==p){let O=S?p.residualClasses:p.residualStyles;null!=O&&(A=nb(O,y))}return A}function zm(u){return void 0!==u}function OT(u,p){return 0!=(u.flags&(p?16:32))}function rL(u,p=""){const g=_t(),y=Bs(),C=u+20,S=y.firstCreatePass?k0(y,C,1,p,null):y.data[C],T=g[C]=function $I(u,p){return tr(u)?u.createText(p):u.createTextNode(p)}(g[11],p);D0(y,g,T,S),bh(S,!1)}function oL(u){return Ix("",u,""),oL}function Ix(u,p,g){const y=_t(),C=Hm(y,u,p,g);return C!==Ls&&ip(y,Fa(),C),Ix}function W2(u,p,g){Yc(Ql,lp,Hm(_t(),u,p,g),!0)}function G2(u,p,g,y,C){Yc(Ql,lp,N0(_t(),u,p,g,y,C),!0)}function W0(u,p,g){const y=_t();return ih(y,cu(),p)&&$c(Bs(),qr(),y,u,p,y[11],g,!0),W0}const _v=void 0;var X2=["en",[["a","p"],["AM","PM"],_v],[["AM","PM"],_v,_v],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_v,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_v,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_v,"{1} 'at' {0}",_v],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function z4(u){const g=Math.floor(Math.abs(u)),y=u.toString().replace(/^[^.]*\.?/,"").length;return 1===g&&0===y?1:5}];let G0={};function Rx(u){const p=function $T(u){return u.toLowerCase().replace(/_/g,"-")}(u);let g=GT(p);if(g)return g;const y=p.split("-")[0];if(g=GT(y),g)return g;if("en"===y)return X2;throw new Error(`Missing locale data for the locale "${u}".`)}function J2(u){return Rx(u)[rs.PluralCase]}function GT(u){return u in G0||(G0[u]=Xs.ng&&Xs.ng.common&&Xs.ng.common.locales&&Xs.ng.common.locales[u]),G0[u]}var rs=(()=>((rs=rs||{})[rs.LocaleId=0]="LocaleId",rs[rs.DayPeriodsFormat=1]="DayPeriodsFormat",rs[rs.DayPeriodsStandalone=2]="DayPeriodsStandalone",rs[rs.DaysFormat=3]="DaysFormat",rs[rs.DaysStandalone=4]="DaysStandalone",rs[rs.MonthsFormat=5]="MonthsFormat",rs[rs.MonthsStandalone=6]="MonthsStandalone",rs[rs.Eras=7]="Eras",rs[rs.FirstDayOfWeek=8]="FirstDayOfWeek",rs[rs.WeekendRange=9]="WeekendRange",rs[rs.DateFormat=10]="DateFormat",rs[rs.TimeFormat=11]="TimeFormat",rs[rs.DateTimeFormat=12]="DateTimeFormat",rs[rs.NumberSymbols=13]="NumberSymbols",rs[rs.NumberFormats=14]="NumberFormats",rs[rs.CurrencyCode=15]="CurrencyCode",rs[rs.CurrencySymbol=16]="CurrencySymbol",rs[rs.CurrencyName=17]="CurrencyName",rs[rs.Currencies=18]="Currencies",rs[rs.Directionality=19]="Directionality",rs[rs.PluralCase=20]="PluralCase",rs[rs.ExtraData=21]="ExtraData",rs))();const Ax="en-US";let Mx=Ax;function AL(u,p,g,y,C){if(u=Ne(u),Array.isArray(u))for(let S=0;S<u.length;S++)AL(u[S],p,g,y,C);else{const S=Bs(),T=_t();let A=yv(u)?u:Ne(u.provide),O=WB(u);const j=mr(),K=1048575&j.providerIndexes,re=j.directiveStart,fe=j.providerIndexes>>20;if(yv(u)||!u.multi){const Oe=new Kg(O,C,Sx),ft=ew(A,p,C?K:K+fe,re);-1===ft?(pl(gn(j,T),S,A),LL(S,u,p.length),p.push(A),j.directiveStart++,j.directiveEnd++,C&&(j.providerIndexes+=1048576),g.push(Oe),T.push(Oe)):(g[ft]=Oe,T[ft]=Oe)}else{const Oe=ew(A,p,K+fe,re),ft=ew(A,p,K,K+fe),jt=Oe>=0&&g[Oe],Vt=ft>=0&&g[ft];if(C&&!Vt||!C&&!jt){pl(gn(j,T),S,A);const _i=function yH(u,p,g,y,C){const S=new Kg(u,g,Sx);return S.multi=[],S.index=p,S.componentProviders=0,bH(S,C,y&&!g),S}(C?iD:zx,g.length,C,y,O);!C&&Vt&&(g[ft].providerFactory=_i),LL(S,u,p.length,0),p.push(A),j.directiveStart++,j.directiveEnd++,C&&(j.providerIndexes+=1048576),g.push(_i),T.push(_i)}else LL(S,u,Oe>-1?Oe:ft,bH(g[C?ft:Oe],O,!C&&y));!C&&y&&Vt&&g[ft].componentProviders++}}}function LL(u,p,g,y){const C=yv(p),S=function $B(u){return!!u.useClass}(p);if(C||S){const O=(S?Ne(p.useClass):p).prototype.ngOnDestroy;if(O){const j=u.destroyHooks||(u.destroyHooks=[]);if(!C&&p.multi){const K=j.indexOf(g);-1===K?j.push(g,[y,O]):j[K+1].push(y,O)}else j.push(g,O)}}}function bH(u,p,g){return g&&u.componentProviders++,u.multi.push(p)-1}function ew(u,p,g,y){for(let C=g;C<y;C++)if(p[C]===u)return C;return-1}function zx(u,p,g,y){return jx(this.multi,[])}function iD(u,p,g,y){const C=this.multi;let S;if(this.providerFactory){const T=this.providerFactory.componentProviders,A=fl(g,g[1],this.providerFactory.index,y);S=A.slice(0,T),jx(C,S);for(let O=T;O<A.length;O++)S.push(A[O])}else S=[],jx(C,S);return S}function jx(u,p){for(let g=0;g<u.length;g++)p.push((0,u[g])());return p}function tw(u,p=[]){return g=>{g.providersResolver=(y,C)=>function RL(u,p,g){const y=Bs();if(y.firstCreatePass){const C=Nc(u);AL(g,y.data,y.blueprint,C,!0),AL(p,y.data,y.blueprint,C,!1)}}(y,C?C(u):u,p)}}class vH{}class rW{resolveComponentFactory(p){throw function Ba(u){const p=Error(`No component factory found for ${$e(u)}. Did you add it to @NgModule.entryComponents?`);return p.ngComponent=u,p}(p)}}let qx=(()=>{class u{}return u.NULL=new rW,u})();function oW(){return Rv(mr(),_t())}function Rv(u,p){return new iw(Jo(u,p))}let iw=(()=>{class u{constructor(g){this.nativeElement=g}}return u.__NG_ELEMENT_ID__=oW,u})();function CH(u){return u instanceof iw?u.nativeElement:u}class PL{}let qm=(()=>{class u{}return u.__NG_ELEMENT_ID__=()=>function aW(){const u=_t(),g=Pa(mr().index,u);return function wH(u){return u[11]}(Ja(g)?g:u)}(),u})(),FL=(()=>{class u{}return u.\u0275prov=En({token:u,providedIn:"root",factory:()=>null}),u})();class sw{constructor(p){this.full=p,this.major=p.split(".")[0],this.minor=p.split(".")[1],this.patch=p.split(".").slice(2).join(".")}}const NL=new sw("13.2.3"),Wx={};function Av(u,p,g,y,C=!1){for(;null!==g;){const S=p[g.index];if(null!==S&&y.push(Zn(S)),mh(S))for(let A=10;A<S.length;A++){const O=S[A],j=O[1].firstChild;null!==j&&Av(O[1],O,j,y)}const T=g.type;if(8&T)Av(u,p,g.child,y);else if(32&T){const A=NR(g,p);let O;for(;O=A();)y.push(O)}else if(16&T){const A=mB(p,g);if(Array.isArray(A))y.push(...A);else{const O=cx(p[16]);Av(O[1],O,A,y,!0)}}g=C?g.projectionNext:g.next}return y}class nw{constructor(p,g){this._lView=p,this._cdRefInjectingView=g,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const p=this._lView,g=p[1];return Av(g,p,g.firstChild,[])}get context(){return this._lView[8]}set context(p){this._lView[8]=p}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const p=this._lView[3];if(mh(p)){const g=p[8],y=g?g.indexOf(this):-1;y>-1&&(YI(p,y),tb(g,y))}this._attachedToViewContainer=!1}aB(this._lView[1],this._lView)}onDestroy(p){TB(this._lView[1],this._lView,null,p)}markForCheck(){PB(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){L0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function mA(u,p,g){qg(!0);try{L0(u,p,g)}finally{qg(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ft(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function th(u,p){dx(u,p,p[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(p){if(this._attachedToViewContainer)throw new Ft(902,"");this._appRef=p}}class BL extends nw{constructor(p){super(p),this._view=p}detectChanges(){NB(this._view)}checkNoChanges(){!function gA(u){qg(!0);try{NB(u)}finally{qg(!1)}}(this._view)}get context(){return null}}class Gx extends qx{constructor(p){super(),this.ngModule=p}resolveComponentFactory(p){const g=Mi(p);return new sD(g,this.ngModule)}}function SH(u){const p=[];for(let g in u)u.hasOwnProperty(g)&&p.push({propName:u[g],templateName:g});return p}const $x=new Wr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>JN});class sD extends vH{constructor(p,g){super(),this.componentDef=p,this.ngModule=g,this.componentType=p.type,this.selector=function fee(u){return u.map(pee).join(",")}(p.selectors),this.ngContentSelectors=p.ngContentSelectors?p.ngContentSelectors:[],this.isBoundToModule=!!g}get inputs(){return SH(this.componentDef.inputs)}get outputs(){return SH(this.componentDef.outputs)}create(p,g,y,C){const S=(C=C||this.ngModule)?function EH(u,p){return{get:(g,y,C)=>{const S=u.get(g,Wx,C);return S!==Wx||y===Wx?S:p.get(g,y,C)}}}(p,C.injector):p,T=S.get(PL,Yp),A=S.get(FL,null),O=T.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",K=y?function IB(u,p,g){if(tr(u))return u.selectRootElement(p,g===ws.ShadowDom);let y="string"==typeof p?u.querySelector(p):p;return y.textContent="",y}(O,y,this.componentDef.encapsulation):eh(T.createRenderer(null,this.componentDef),j,function xH(u){const p=u.toLowerCase();return"svg"===p?"svg":"math"===p?"math":null}(j)),re=this.componentDef.onPush?576:528,fe=function EA(u,p){return{components:[],scheduler:u||JN,clean:bA,playerHandler:p||null,flags:0}}(),Oe=uT(0,null,null,1,0,null,null,null,null,null),ft=gx(null,Oe,fe,re,null,null,T,O,A,S);let jt,Vt;vm(ft);try{const _i=function CT(u,p,g,y,C,S){const T=g[1];g[20]=u;const O=k0(T,20,2,"#host",null),j=O.mergedAttrs=p.hostAttrs;null!==j&&(P0(O,j,!0),null!==u&&(ei(C,u,j),null!==O.classes&&ux(C,u,O.classes),null!==O.styles&&yB(C,u,O.styles)));const K=y.createRenderer(u,p),re=gx(g,EB(p),null,p.onPush?64:16,g[20],O,y,K,S||null,null);return T.firstCreatePass&&(pl(gn(O,g),T,p.type),Zq(T,O),LB(O,g.length,1)),fA(g,re),g[20]=re}(K,this.componentDef,ft,T,O);if(K)if(y)ei(O,K,["ng-version",NL.full]);else{const{attrs:It,classes:Zi}=function mee(u){const p=[],g=[];let y=1,C=2;for(;y<u.length;){let S=u[y];if("string"==typeof S)2===C?""!==S&&p.push(S,u[++y]):8===C&&g.push(S);else{if(!df(C))break;C=S}y++}return{attrs:p,classes:g}}(this.componentDef.selectors[0]);It&&ei(O,K,It),Zi&&Zi.length>0&&ux(O,K,Zi.join(" "))}if(Vt=oo(Oe,20),void 0!==g){const It=Vt.projection=[];for(let Zi=0;Zi<this.ngContentSelectors.length;Zi++){const ks=g[Zi];It.push(null!=ks?Array.from(ks):null)}}jt=function wT(u,p,g,y,C){const S=g[1],T=function RB(u,p,g){const y=mr();u.firstCreatePass&&(g.providersResolver&&g.providersResolver(g),dA(u,y,p,vb(u,p,1,null),g));const C=fl(p,u,y.directiveStart,y);wh(C,p);const S=Jo(y,p);return S&&wh(S,p),C}(S,g,p);if(y.components.push(T),u[8]=T,C&&C.forEach(O=>O(T,p)),p.contentQueries){const O=mr();p.contentQueries(1,T,O.directiveStart)}const A=mr();return!S.firstCreatePass||null===p.hostBindings&&null===p.hostAttrs||(Cd(A.index),hA(g[1],A,0,A.directiveStart,A.directiveEnd,p),Yq(p,T)),T}(_i,this.componentDef,ft,fe,[c4]),mv(Oe,ft,null)}finally{Jp()}return new IH(this.componentType,jt,Rv(Vt,ft),ft,Vt)}}class IH extends class Ux{}{constructor(p,g,y,C,S){super(),this.location=y,this._rootLView=C,this._tNode=S,this.instance=g,this.hostView=this.changeDetectorRef=new BL(C),this.componentType=p}get injector(){return new lr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(p){this.hostView.onDestroy(p)}}class Lv{}class VL{}const Cu=new Map;class jL extends Lv{constructor(p,g){super(),this._parent=g,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Gx(this);const y=Ps(p);this._bootstrapComponents=tp(y.bootstrap),this._r3Injector=qB(p,g,[{provide:Lv,useValue:this},{provide:qx,useValue:this.componentFactoryResolver}],$e(p)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(p)}get(p,g=gu.THROW_IF_NOT_FOUND,y=Gi.Default){return p===gu||p===Lv||p===yA?this:this._r3Injector.get(p,g,y)}destroy(){const p=this._r3Injector;!p.destroyed&&p.destroy(),this.destroyCbs.forEach(g=>g()),this.destroyCbs=null}onDestroy(p){this.destroyCbs.push(p)}}class rD extends VL{constructor(p){super(),this.moduleType=p,null!==Ps(p)&&function TH(u){const p=new Set;!function g(y){const C=Ps(y,!0),S=C.id;null!==S&&(function zL(u,p,g){if(p&&p!==g)throw new Error(`Duplicate module registered for ${u} - ${$e(p)} vs ${$e(p.name)}`)}(S,Cu.get(S),y),Cu.set(S,y));const T=tp(C.imports);for(const A of T)p.has(A)||(p.add(A),g(A))}(u)}(p)}create(p){return new jL(this.moduleType,p)}}function DH(u,p,g,y){return function El(u,p,g,y,C,S){const T=p+g;return ih(u,T,C)?bf(u,T+1,S?y.call(S,C):y(C)):ow(u,T+1)}(_t(),ao(),u,p,g,y)}function oD(u,p,g,y,C,S){return function Wm(u,p,g,y,C,S,T,A){const O=p+g;return function xT(u,p,g,y,C){const S=wb(u,p,g,y);return ih(u,p+2,C)||S}(u,O,C,S,T)?bf(u,O+3,A?y.call(A,C,S,T):y(C,S,T)):ow(u,O+3)}(_t(),ao(),u,p,g,y,C,S)}function kH(u,p,g,y,C,S,T){return function lD(u,p,g,y,C,S,T,A,O){const j=p+g;return yu(u,j,C,S,T,A)?bf(u,j+4,O?y.call(O,C,S,T,A):y(C,S,T,A)):ow(u,j+4)}(_t(),ao(),u,p,g,y,C,S,T)}function RH(u,p,g,y,C,S,T,A){const O=ao()+u,j=_t(),K=yu(j,O,g,y,C,S);return ih(j,O+4,T)||K?bf(j,O+5,A?p.call(A,g,y,C,S,T):p(g,y,C,S,T)):function vv(u,p){return u[p]}(j,O+5)}function ow(u,p){const g=u[p];return g===Ls?void 0:g}function Lt(u){return p=>{setTimeout(u,void 0,p)}}const Cr=class rt extends d.x{constructor(p=!1){super(),this.__isAsync=p}emit(p){super.next(p)}subscribe(p,g,y){var C,S,T;let A=p,O=g||(()=>null),j=y;if(p&&"object"==typeof p){const re=p;A=null===(C=re.next)||void 0===C?void 0:C.bind(re),O=null===(S=re.error)||void 0===S?void 0:S.bind(re),j=null===(T=re.complete)||void 0===T?void 0:T.bind(re)}this.__isAsync&&(O=Lt(O),A&&(A=Lt(A)),j&&(j=Lt(j)));const K=super.subscribe({next:A,error:O,complete:j});return p instanceof he.w0&&p.add(K),K}};function MH(){return this._results[Nm()]()}class hD{constructor(p=!1){this._emitDistinctChangesOnly=p,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const g=Nm(),y=hD.prototype;y[g]||(y[g]=MH)}get changes(){return this._changes||(this._changes=new Cr)}get(p){return this._results[p]}map(p){return this._results.map(p)}filter(p){return this._results.filter(p)}find(p){return this._results.find(p)}reduce(p,g){return this._results.reduce(p,g)}forEach(p){this._results.forEach(p)}some(p){return this._results.some(p)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(p,g){const y=this;y.dirty=!1;const C=gl(p);(this._changesDetected=!function eb(u,p,g){if(u.length!==p.length)return!1;for(let y=0;y<u.length;y++){let C=u[y],S=p[y];if(g&&(C=g(C),S=g(S)),S!==C)return!1}return!0}(y._results,C,g))&&(y._results=C,y.length=C.length,y.last=C[this.length-1],y.first=C[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Zx=(()=>{class u{}return u.__NG_ELEMENT_ID__=gW,u})();const fW=Zx,mW=class extends fW{constructor(p,g,y){super(),this._declarationLView=p,this._declarationTContainer=g,this.elementRef=y}createEmbeddedView(p){const g=this._declarationTContainer.tViews,y=gx(this._declarationLView,g,p,16,null,g.declTNode,null,null,null,null);y[17]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[19];return null!==S&&(y[19]=S.createEmbeddedView(g)),mv(g,y,p),new nw(y)}};function gW(){return Xx(mr(),_t())}function Xx(u,p){return 4&u.type?new mW(p,u,Rv(u,p)):null}let cD=(()=>{class u{}return u.__NG_ELEMENT_ID__=Yee,u})();function Yee(){return Ov(mr(),_t())}const Ld=cD,OH=class extends Ld{constructor(p,g,y){super(),this._lContainer=p,this._hostTNode=g,this._hostLView=y}get element(){return Rv(this._hostTNode,this._hostLView)}get injector(){return new lr(this._hostTNode,this._hostLView)}get parentInjector(){const p=nf(this._hostTNode,this._hostLView);if(lo(p)){const g=Ku(p,this._hostLView),y=ef(p);return new lr(g[1].data[y+8],g)}return new lr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(p){const g=qL(this._lContainer);return null!==g&&g[p]||null}get length(){return this._lContainer.length-10}createEmbeddedView(p,g,y){const C=p.createEmbeddedView(g||{});return this.insert(C,y),C}createComponent(p,g,y,C,S){const T=p&&!function km(u){return"function"==typeof u}(p);let A;if(T)A=g;else{const re=g||{};A=re.index,y=re.injector,C=re.projectableNodes,S=re.ngModuleRef}const O=T?p:new sD(Mi(p)),j=y||this.parentInjector;if(!S&&null==O.ngModule){const fe=(T?j:this.parentInjector).get(Lv,null);fe&&(S=fe)}const K=O.create(j,C,void 0,S);return this.insert(K.hostView,A),K}insert(p,g){const y=p._lView,C=y[1];if(function pm(u){return mh(u[3])}(y)){const K=this.indexOf(p);if(-1!==K)this.detach(K);else{const re=y[3],fe=new OH(re,re[6],re[3]);fe.detach(fe.indexOf(p))}}const S=this._adjustIndex(g),T=this._lContainer;!function T0(u,p,g,y){const C=10+y,S=g.length;y>0&&(g[C-1][4]=p),y<S-10?(p[4]=g[C],Rm(g,10+y,p)):(g.push(p),p[4]=null),p[3]=g;const T=p[17];null!==T&&g!==T&&function Gc(u,p){const g=u[9];p[16]!==p[3][3][16]&&(u[2]=!0),null===g?u[9]=[p]:g.push(p)}(T,p);const A=p[19];null!==A&&A.insertView(u),p[2]|=128}(C,y,T,S);const A=JI(S,T),O=y[11],j=XI(O,T[7]);return null!==j&&function KI(u,p,g,y,C,S){y[0]=C,y[6]=p,dx(u,y,g,1,C,S)}(C,T[6],O,y,j,A),p.attachToViewContainerRef(),Rm(sn(T),S,p),p}move(p,g){return this.insert(p,g)}indexOf(p){const g=qL(this._lContainer);return null!==g?g.indexOf(p):-1}remove(p){const g=this._adjustIndex(p,-1),y=YI(this._lContainer,g);y&&(tb(sn(this._lContainer),g),aB(y[1],y))}detach(p){const g=this._adjustIndex(p,-1),y=YI(this._lContainer,g);return y&&null!=tb(sn(this._lContainer),g)?new nw(y):null}_adjustIndex(p,g=0){return null==p?this.length+g:p}};function qL(u){return u[8]}function sn(u){return u[8]||(u[8]=[])}function Ov(u,p){let g;const y=p[u.index];if(mh(y))g=y;else{let C;if(8&u.type)C=Zn(y);else{const S=p[11];C=S.createComment("");const T=Jo(u,p);bb(S,XI(S,T),C,function _q(u,p){return tr(u)?u.nextSibling(p):p.nextSibling}(S,T),!1)}p[u.index]=g=Qq(y,p,C,u),fA(p,g)}return new OH(g,u,p)}class dD{constructor(p){this.queryList=p,this.matches=null}clone(){return new dD(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gm{constructor(p=[]){this.queries=p}createEmbeddedView(p){const g=p.queries;if(null!==g){const y=null!==p.contentQueries?p.contentQueries[0]:g.length,C=[];for(let S=0;S<y;S++){const T=g.getByIndex(S);C.push(this.queries[T.indexInDeclarationView].clone())}return new Gm(C)}return null}insertView(p){this.dirtyQueriesWithMatches(p)}detachView(p){this.dirtyQueriesWithMatches(p)}dirtyQueriesWithMatches(p){for(let g=0;g<this.queries.length;g++)null!==Db(p,g).matches&&this.queries[g].setDirty()}}class WL{constructor(p,g,y=null){this.predicate=p,this.flags=g,this.read=y}}class Pv{constructor(p=[]){this.queries=p}elementStart(p,g){for(let y=0;y<this.queries.length;y++)this.queries[y].elementStart(p,g)}elementEnd(p){for(let g=0;g<this.queries.length;g++)this.queries[g].elementEnd(p)}embeddedTView(p){let g=null;for(let y=0;y<this.length;y++){const C=null!==g?g.length:0,S=this.getByIndex(y).embeddedTView(p,C);S&&(S.indexInDeclarationView=y,null!==g?g.push(S):g=[S])}return null!==g?new Pv(g):null}template(p,g){for(let y=0;y<this.queries.length;y++)this.queries[y].template(p,g)}getByIndex(p){return this.queries[p]}get length(){return this.queries.length}track(p){this.queries.push(p)}}class Ln{constructor(p,g=-1){this.metadata=p,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=g}elementStart(p,g){this.isApplyingToNode(g)&&this.matchTNode(p,g)}elementEnd(p){this._declarationNodeIndex===p.index&&(this._appliesToNextNode=!1)}template(p,g){this.elementStart(p,g)}embeddedTView(p,g){return this.isApplyingToNode(p)?(this.crossesNgTemplate=!0,this.addMatch(-p.index,g),new Ln(this.metadata)):null}isApplyingToNode(p){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const g=this._declarationNodeIndex;let y=p.parent;for(;null!==y&&8&y.type&&y.index!==g;)y=y.parent;return g===(null!==y?y.index:-1)}return this._appliesToNextNode}matchTNode(p,g){const y=this.metadata.predicate;if(Array.isArray(y))for(let C=0;C<y.length;C++){const S=y[C];this.matchTNodeWithReadOption(p,g,bW(g,S)),this.matchTNodeWithReadOption(p,g,Sd(g,p,S,!1,!1))}else y===Zx?4&g.type&&this.matchTNodeWithReadOption(p,g,-1):this.matchTNodeWithReadOption(p,g,Sd(g,p,y,!1,!1))}matchTNodeWithReadOption(p,g,y){if(null!==y){const C=this.metadata.read;if(null!==C)if(C===iw||C===cD||C===Zx&&4&g.type)this.addMatch(g.index,-2);else{const S=Sd(g,p,C,!1,!1);null!==S&&this.addMatch(g.index,S)}else this.addMatch(g.index,y)}}addMatch(p,g){null===this.matches?this.matches=[p,g]:this.matches.push(p,g)}}function bW(u,p){const g=u.localNames;if(null!==g)for(let y=0;y<g.length;y+=2)if(g[y]===p)return g[y+1];return null}function aw(u,p,g,y){return-1===g?function Il(u,p){return 11&u.type?Rv(u,p):4&u.type?Xx(u,p):null}(p,u):-2===g?function yW(u,p,g){return g===iw?Rv(p,u):g===Zx?Xx(p,u):g===cD?Ov(p,u):void 0}(u,p,y):fl(u,u[1],g,p)}function Va(u,p,g,y){const C=p[19].queries[y];if(null===C.matches){const S=u.data,T=g.matches,A=[];for(let O=0;O<T.length;O+=2){const j=T[O];A.push(j<0?null:aw(p,S[j],T[O+1],g.metadata.read))}C.matches=A}return C.matches}function GL(u,p,g,y){const C=u.queries.getByIndex(g),S=C.matches;if(null!==S){const T=Va(u,p,C,g);for(let A=0;A<S.length;A+=2){const O=S[A];if(O>0)y.push(T[A/2]);else{const j=S[A+1],K=p[-O];for(let re=10;re<K.length;re++){const fe=K[re];fe[17]===fe[3]&&GL(fe[1],fe,j,y)}if(null!==K[9]){const re=K[9];for(let fe=0;fe<re.length;fe++){const Oe=re[fe];GL(Oe[1],Oe,j,y)}}}}}return y}function $m(u){const p=_t(),g=Bs(),y=qy();Wy(y+1);const C=Db(g,y);if(u.dirty&&qu(p)===(2==(2&C.metadata.flags))){if(null===C.matches)u.reset([]);else{const S=C.crossesNgTemplate?GL(g,p,y,[]):Va(g,p,C,y);u.reset(S,CH),u.notifyOnChanges()}return!0}return!1}function No(u,p,g){const y=Bs();y.firstCreatePass&&(NH(y,new WL(u,p,g),-1),2==(2&p)&&(y.staticViewQueries=!0)),lw(y,_t(),p)}function Tb(u,p,g,y){const C=Bs();if(C.firstCreatePass){const S=mr();NH(C,new WL(p,g,y),S.index),function Fv(u,p){const g=u.contentQueries||(u.contentQueries=[]);p!==(g.length?g[g.length-1]:-1)&&g.push(u.queries.length-1,p)}(C,u),2==(2&g)&&(C.staticContentQueries=!0)}lw(C,_t(),g)}function uD(){return function FH(u,p){return u[19].queries[p].queryList}(_t(),qy())}function lw(u,p,g){const y=new hD(4==(4&g));TB(u,p,y,y.destroy),null===p[19]&&(p[19]=new Gm),p[19].queries.push(new dD(y))}function NH(u,p,g){null===u.queries&&(u.queries=new Pv),u.queries.track(new Ln(p,g))}function Db(u,p){return u.queries.getByIndex(p)}function hw(u,p){return Xx(u,p)}function tE(...u){}const SD=new Wr("Application Initializer");let Rb=(()=>{class u{constructor(g){this.appInits=g,this.resolve=tE,this.reject=tE,this.initialized=!1,this.done=!1,this.donePromise=new Promise((y,C)=>{this.resolve=y,this.reject=C})}runInitializers(){if(this.initialized)return;const g=[],y=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let C=0;C<this.appInits.length;C++){const S=this.appInits[C]();if(z0(S))g.push(S);else if($A(S)){const T=new Promise((A,O)=>{S.subscribe({complete:A,error:O})});g.push(T)}}Promise.all(g).then(()=>{y()}).catch(C=>{this.reject(C)}),0===g.length&&y(),this.initialized=!0}}return u.\u0275fac=function(g){return new(g||u)(Gt(SD,8))},u.\u0275prov=En({token:u,factory:u.\u0275fac}),u})();const xD=new Wr("AppId"),EW={provide:xD,useFactory:function YH(){return`${ED()}${ED()}${ED()}`},deps:[]};function ED(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tM=new Wr("Platform Initializer"),iM=new Wr("Platform ID"),iE=new Wr("appBootstrapListener");let ZH=(()=>{class u{log(g){console.log(g)}warn(g){console.warn(g)}}return u.\u0275fac=function(g){return new(g||u)},u.\u0275prov=En({token:u,factory:u.\u0275fac}),u})();const sE=new Wr("LocaleId"),Uv=new Wr("DefaultCurrencyCode");class XH{constructor(p,g){this.ngModuleFactory=p,this.componentFactories=g}}let Ab=(()=>{class u{compileModuleSync(g){return new rD(g)}compileModuleAsync(g){return Promise.resolve(this.compileModuleSync(g))}compileModuleAndAllComponentsSync(g){const y=this.compileModuleSync(g),S=tp(Ps(g).declarations).reduce((T,A)=>{const O=Mi(A);return O&&T.push(new sD(O)),T},[]);return new XH(y,S)}compileModuleAndAllComponentsAsync(g){return Promise.resolve(this.compileModuleAndAllComponentsSync(g))}clearCache(){}clearCacheFor(g){}getModuleId(g){}}return u.\u0275fac=function(g){return new(g||u)},u.\u0275prov=En({token:u,factory:u.\u0275fac}),u})();const nE=(()=>Promise.resolve(0))();function sM(u){"undefined"==typeof Zone?nE.then(()=>{u&&u.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",u)}class Wn{constructor({enableLongStackTrace:p=!1,shouldCoalesceEventChangeDetection:g=!1,shouldCoalesceRunChangeDetection:y=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cr(!1),this.onMicrotaskEmpty=new Cr(!1),this.onStable=new Cr(!1),this.onError=new Cr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const C=this;C._nesting=0,C._outer=C._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(C._inner=C._inner.fork(new Zone.TaskTrackingZoneSpec)),p&&Zone.longStackTraceZoneSpec&&(C._inner=C._inner.fork(Zone.longStackTraceZoneSpec)),C.shouldCoalesceEventChangeDetection=!y&&g,C.shouldCoalesceRunChangeDetection=y,C.lastRequestAnimationFrameId=-1,C.nativeRequestAnimationFrame=function TW(){let u=Xs.requestAnimationFrame,p=Xs.cancelAnimationFrame;if("undefined"!=typeof Zone&&u&&p){const g=u[Zone.__symbol__("OriginalDelegate")];g&&(u=g);const y=p[Zone.__symbol__("OriginalDelegate")];y&&(p=y)}return{nativeRequestAnimationFrame:u,nativeCancelAnimationFrame:p}}().nativeRequestAnimationFrame,function nM(u){const p=()=>{!function DW(u){u.isCheckStableRunning||-1!==u.lastRequestAnimationFrameId||(u.lastRequestAnimationFrameId=u.nativeRequestAnimationFrame.call(Xs,()=>{u.fakeTopEventTask||(u.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{u.lastRequestAnimationFrameId=-1,rM(u),u.isCheckStableRunning=!0,gw(u),u.isCheckStableRunning=!1},void 0,()=>{},()=>{})),u.fakeTopEventTask.invoke()}),rM(u))}(u)};u._inner=u._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(g,y,C,S,T,A)=>{try{return oM(u),g.invokeTask(C,S,T,A)}finally{(u.shouldCoalesceEventChangeDetection&&"eventTask"===S.type||u.shouldCoalesceRunChangeDetection)&&p(),aM(u)}},onInvoke:(g,y,C,S,T,A,O)=>{try{return oM(u),g.invoke(C,S,T,A,O)}finally{u.shouldCoalesceRunChangeDetection&&p(),aM(u)}},onHasTask:(g,y,C,S)=>{g.hasTask(C,S),y===C&&("microTask"==S.change?(u._hasPendingMicrotasks=S.microTask,rM(u),gw(u)):"macroTask"==S.change&&(u.hasPendingMacrotasks=S.macroTask))},onHandleError:(g,y,C,S)=>(g.handleError(C,S),u.runOutsideAngular(()=>u.onError.emit(S)),!1)})}(C)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Wn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(p,g,y){return this._inner.run(p,g,y)}runTask(p,g,y,C){const S=this._inner,T=S.scheduleEventTask("NgZoneEvent: "+C,p,_D,tE,tE);try{return S.runTask(T,g,y)}finally{S.cancelTask(T)}}runGuarded(p,g,y){return this._inner.runGuarded(p,g,y)}runOutsideAngular(p){return this._outer.run(p)}}const _D={};function gw(u){if(0==u._nesting&&!u.hasPendingMicrotasks&&!u.isStable)try{u._nesting++,u.onMicrotaskEmpty.emit(null)}finally{if(u._nesting--,!u.hasPendingMicrotasks)try{u.runOutsideAngular(()=>u.onStable.emit(null))}finally{u.isStable=!0}}}function rM(u){u.hasPendingMicrotasks=!!(u._hasPendingMicrotasks||(u.shouldCoalesceEventChangeDetection||u.shouldCoalesceRunChangeDetection)&&-1!==u.lastRequestAnimationFrameId)}function oM(u){u._nesting++,u.isStable&&(u.isStable=!1,u.onUnstable.emit(null))}function aM(u){u._nesting--,gw(u)}class rE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cr,this.onMicrotaskEmpty=new Cr,this.onStable=new Cr,this.onError=new Cr}run(p,g,y){return p.apply(g,y)}runGuarded(p,g,y){return p.apply(g,y)}runOutsideAngular(p){return p()}runTask(p,g,y,C){return p.apply(g,y)}}let Lb=(()=>{class u{constructor(g){this._ngZone=g,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),g.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wn.assertNotInAngularZone(),sM(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sM(()=>{for(;0!==this._callbacks.length;){let g=this._callbacks.pop();clearTimeout(g.timeoutId),g.doneCb(this._didWork)}this._didWork=!1});else{let g=this.getPendingTasks();this._callbacks=this._callbacks.filter(y=>!y.updateCb||!y.updateCb(g)||(clearTimeout(y.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(g=>({source:g.source,creationLocation:g.creationLocation,data:g.data})):[]}addCallback(g,y,C){let S=-1;y&&y>0&&(S=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==S),g(this._didWork,this.getPendingTasks())},y)),this._callbacks.push({doneCb:g,timeoutId:S,updateCb:C})}whenStable(g,y,C){if(C&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(g,y,C),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(g,y,C){return[]}}return u.\u0275fac=function(g){return new(g||u)(Gt(Wn))},u.\u0275prov=En({token:u,factory:u.\u0275fac}),u})(),lM=(()=>{class u{constructor(){this._applications=new Map,qv.addToWindow(this)}registerApplication(g,y){this._applications.set(g,y)}unregisterApplication(g){this._applications.delete(g)}unregisterAllApplications(){this._applications.clear()}getTestability(g){return this._applications.get(g)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(g,y=!0){return qv.findTestabilityInTree(this,g,y)}}return u.\u0275fac=function(g){return new(g||u)},u.\u0275prov=En({token:u,factory:u.\u0275fac}),u})();class JH{addToWindow(p){}findTestabilityInTree(p,g,y){return null}}function eV(u){qv=u}let Md,qv=new JH;const hM=new Wr("AllowMultipleToken");class tV{constructor(p,g){this.name=p,this.token=g}}function oE(u,p,g=[]){const y=`Platform: ${p}`,C=new Wr(y);return(S=[])=>{let T=cM();if(!T||T.injector.get(hM,!1))if(u)u(g.concat(S).concat({provide:C,useValue:!0}));else{const A=g.concat(S).concat({provide:C,useValue:!0},{provide:yx,useValue:"platform"});!function va(u){if(Md&&!Md.destroyed&&!Md.injector.get(hM,!1))throw new Ft(400,"");Md=u.get(Wv);const p=u.get(tM,null);p&&p.forEach(g=>g())}(gu.create({providers:A,name:y}))}return function sh(u){const p=cM();if(!p)throw new Ft(401,"");return p}()}}function cM(){return Md&&!Md.destroyed?Md:null}let Wv=(()=>{class u{constructor(g){this._injector=g,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(g,y){const A=function RW(u,p){let g;return g="noop"===u?new rE:("zone.js"===u?void 0:u)||new Wn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==p?void 0:p.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==p?void 0:p.ngZoneRunCoalescing)}),g}(y?y.ngZone:void 0,{ngZoneEventCoalescing:y&&y.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:y&&y.ngZoneRunCoalescing||!1}),O=[{provide:Wn,useValue:A}];return A.run(()=>{const j=gu.create({providers:O,parent:this.injector,name:g.moduleType.name}),K=g.create(j),re=K.injector.get(hx,null);if(!re)throw new Ft(402,"");return A.runOutsideAngular(()=>{const fe=A.onError.subscribe({next:Oe=>{re.handleError(Oe)}});K.onDestroy(()=>{dM(this._modules,K),fe.unsubscribe()})}),function Su(u,p,g){try{const y=g();return z0(y)?y.catch(C=>{throw p.runOutsideAngular(()=>u.handleError(C)),C}):y}catch(y){throw p.runOutsideAngular(()=>u.handleError(y)),y}}(re,A,()=>{const fe=K.injector.get(Rb);return fe.runInitializers(),fe.donePromise.then(()=>(function W4(u){Pi(u,"Expected localeId to be defined"),"string"==typeof u&&(Mx=u.toLowerCase().replace(/_/g,"-"))}(K.injector.get(sE,Ax)||Ax),this._moduleDoBootstrap(K),K))})})}bootstrapModule(g,y=[]){const C=iV({},y);return function kW(u,p,g){const y=new rD(g);return Promise.resolve(y)}(0,0,g).then(S=>this.bootstrapModuleFactory(S,C))}_moduleDoBootstrap(g){const y=g.injector.get(Gv);if(g._bootstrapComponents.length>0)g._bootstrapComponents.forEach(C=>y.bootstrap(C));else{if(!g.instance.ngDoBootstrap)throw new Ft(403,"");g.instance.ngDoBootstrap(y)}this._modules.push(g)}onDestroy(g){this._destroyListeners.push(g)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ft(404,"");this._modules.slice().forEach(g=>g.destroy()),this._destroyListeners.forEach(g=>g()),this._destroyed=!0}get destroyed(){return this._destroyed}}return u.\u0275fac=function(g){return new(g||u)(Gt(gu))},u.\u0275prov=En({token:u,factory:u.\u0275fac}),u})();function iV(u,p){return Array.isArray(p)?p.reduce(iV,u):Object.assign(Object.assign({},u),p)}let Gv=(()=>{class u{constructor(g,y,C,S,T){this._zone=g,this._injector=y,this._exceptionHandler=C,this._componentFactoryResolver=S,this._initStatus=T,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const A=new J.y(j=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{j.next(this._stable),j.complete()})}),O=new J.y(j=>{let K;this._zone.runOutsideAngular(()=>{K=this._zone.onStable.subscribe(()=>{Wn.assertNotInAngularZone(),sM(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,j.next(!0))})})});const re=this._zone.onUnstable.subscribe(()=>{Wn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{j.next(!1)}))});return()=>{K.unsubscribe(),re.unsubscribe()}});this.isStable=(0,Ge.T)(A,O.pipe((0,Ue.B)()))}bootstrap(g,y){if(!this._initStatus.done)throw new Ft(405,"");let C;C=g instanceof vH?g:this._componentFactoryResolver.resolveComponentFactory(g),this.componentTypes.push(C.componentType);const S=function Mn(u){return u.isBoundToModule}(C)?void 0:this._injector.get(Lv),A=C.create(gu.NULL,[],y||C.selector,S),O=A.location.nativeElement,j=A.injector.get(Lb,null),K=j&&A.injector.get(lM);return j&&K&&K.registerApplication(O,j),A.onDestroy(()=>{this.detachView(A.hostView),dM(this.components,A),K&&K.unregisterApplication(O)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Ft(101,"");try{this._runningTick=!0;for(let g of this._views)g.detectChanges()}catch(g){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(g))}finally{this._runningTick=!1}}attachView(g){const y=g;this._views.push(y),y.attachToAppRef(this)}detachView(g){const y=g;dM(this._views,y),y.detachFromAppRef()}_loadComponent(g){this.attachView(g.hostView),this.tick(),this.components.push(g),this._injector.get(iE,[]).concat(this._bootstrapListeners).forEach(C=>C(g))}ngOnDestroy(){this._views.slice().forEach(g=>g.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return u.\u0275fac=function(g){return new(g||u)(Gt(Wn),Gt(gu),Gt(hx),Gt(qx),Gt(Rb))},u.\u0275prov=En({token:u,factory:u.\u0275fac}),u})();function dM(u,p){const g=u.indexOf(p);g>-1&&u.splice(g,1)}let nV=!0,aE=!1;function lE(){return aE=!0,nV}function hE(){if(aE)throw new Error("Cannot enable prod mode after platform setup.");nV=!1}let rV=(()=>{class u{}return u.__NG_ELEMENT_ID__=LW,u})();function LW(u){return function oV(u,p,g){if(ZC(u)&&!g){const y=Pa(u.index,p);return new nw(y,y)}return 47&u.type?new nw(p[16],p):null}(mr(),_t(),16==(16&u))}class hV{constructor(){}supports(p){return Bm(p)}create(p){return new dV(p)}}const cV=(u,p)=>p;class dV{constructor(p){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=p||cV}forEachItem(p){let g;for(g=this._itHead;null!==g;g=g._next)p(g)}forEachOperation(p){let g=this._itHead,y=this._removalsHead,C=0,S=null;for(;g||y;){const T=!y||g&&g.currentIndex<pV(y,C,S)?g:y,A=pV(T,C,S),O=T.currentIndex;if(T===y)C--,y=y._nextRemoved;else if(g=g._next,null==T.previousIndex)C++;else{S||(S=[]);const j=A-C,K=O-C;if(j!=K){for(let fe=0;fe<j;fe++){const Oe=fe<S.length?S[fe]:S[fe]=0,ft=Oe+fe;K<=ft&&ft<j&&(S[fe]=Oe+1)}S[T.previousIndex]=K-j}}A!==O&&p(T,A,O)}}forEachPreviousItem(p){let g;for(g=this._previousItHead;null!==g;g=g._nextPrevious)p(g)}forEachAddedItem(p){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)p(g)}forEachMovedItem(p){let g;for(g=this._movesHead;null!==g;g=g._nextMoved)p(g)}forEachRemovedItem(p){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)p(g)}forEachIdentityChange(p){let g;for(g=this._identityChangesHead;null!==g;g=g._nextIdentityChange)p(g)}diff(p){if(null==p&&(p=[]),!Bm(p))throw new Ft(900,"");return this.check(p)?this:null}onDestroy(){}check(p){this._reset();let C,S,T,g=this._itHead,y=!1;if(Array.isArray(p)){this.length=p.length;for(let A=0;A<this.length;A++)S=p[A],T=this._trackByFn(A,S),null!==g&&Object.is(g.trackById,T)?(y&&(g=this._verifyReinsertion(g,S,T,A)),Object.is(g.item,S)||this._addIdentityChange(g,S)):(g=this._mismatch(g,S,T,A),y=!0),g=g._next}else C=0,function y4(u,p){if(Array.isArray(u))for(let g=0;g<u.length;g++)p(u[g]);else{const g=u[Nm()]();let y;for(;!(y=g.next()).done;)p(y.value)}}(p,A=>{T=this._trackByFn(C,A),null!==g&&Object.is(g.trackById,T)?(y&&(g=this._verifyReinsertion(g,A,T,C)),Object.is(g.item,A)||this._addIdentityChange(g,A)):(g=this._mismatch(g,A,T,C),y=!0),g=g._next,C++}),this.length=C;return this._truncate(g),this.collection=p,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let p;for(p=this._previousItHead=this._itHead;null!==p;p=p._next)p._nextPrevious=p._next;for(p=this._additionsHead;null!==p;p=p._nextAdded)p.previousIndex=p.currentIndex;for(this._additionsHead=this._additionsTail=null,p=this._movesHead;null!==p;p=p._nextMoved)p.previousIndex=p.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(p,g,y,C){let S;return null===p?S=this._itTail:(S=p._prev,this._remove(p)),null!==(p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(y,null))?(Object.is(p.item,g)||this._addIdentityChange(p,g),this._reinsertAfter(p,S,C)):null!==(p=null===this._linkedRecords?null:this._linkedRecords.get(y,C))?(Object.is(p.item,g)||this._addIdentityChange(p,g),this._moveAfter(p,S,C)):p=this._addAfter(new uV(g,y),S,C),p}_verifyReinsertion(p,g,y,C){let S=null===this._unlinkedRecords?null:this._unlinkedRecords.get(y,null);return null!==S?p=this._reinsertAfter(S,p._prev,C):p.currentIndex!=C&&(p.currentIndex=C,this._addToMoves(p,C)),p}_truncate(p){for(;null!==p;){const g=p._next;this._addToRemovals(this._unlink(p)),p=g}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(p,g,y){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(p);const C=p._prevRemoved,S=p._nextRemoved;return null===C?this._removalsHead=S:C._nextRemoved=S,null===S?this._removalsTail=C:S._prevRemoved=C,this._insertAfter(p,g,y),this._addToMoves(p,y),p}_moveAfter(p,g,y){return this._unlink(p),this._insertAfter(p,g,y),this._addToMoves(p,y),p}_addAfter(p,g,y){return this._insertAfter(p,g,y),this._additionsTail=null===this._additionsTail?this._additionsHead=p:this._additionsTail._nextAdded=p,p}_insertAfter(p,g,y){const C=null===g?this._itHead:g._next;return p._next=C,p._prev=g,null===C?this._itTail=p:C._prev=p,null===g?this._itHead=p:g._next=p,null===this._linkedRecords&&(this._linkedRecords=new gM),this._linkedRecords.put(p),p.currentIndex=y,p}_remove(p){return this._addToRemovals(this._unlink(p))}_unlink(p){null!==this._linkedRecords&&this._linkedRecords.remove(p);const g=p._prev,y=p._next;return null===g?this._itHead=y:g._next=y,null===y?this._itTail=g:y._prev=g,p}_addToMoves(p,g){return p.previousIndex===g||(this._movesTail=null===this._movesTail?this._movesHead=p:this._movesTail._nextMoved=p),p}_addToRemovals(p){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gM),this._unlinkedRecords.put(p),p.currentIndex=null,p._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=p,p._prevRemoved=null):(p._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=p),p}_addIdentityChange(p,g){return p.item=g,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=p:this._identityChangesTail._nextIdentityChange=p,p}}class uV{constructor(p,g){this.item=p,this.trackById=g,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OW{constructor(){this._head=null,this._tail=null}add(p){null===this._head?(this._head=this._tail=p,p._nextDup=null,p._prevDup=null):(this._tail._nextDup=p,p._prevDup=this._tail,p._nextDup=null,this._tail=p)}get(p,g){let y;for(y=this._head;null!==y;y=y._nextDup)if((null===g||g<=y.currentIndex)&&Object.is(y.trackById,p))return y;return null}remove(p){const g=p._prevDup,y=p._nextDup;return null===g?this._head=y:g._nextDup=y,null===y?this._tail=g:y._prevDup=g,null===this._head}}class gM{constructor(){this.map=new Map}put(p){const g=p.trackById;let y=this.map.get(g);y||(y=new OW,this.map.set(g,y)),y.add(p)}get(p,g){const C=this.map.get(p);return C?C.get(p,g):null}remove(p){const g=p.trackById;return this.map.get(g).remove(p)&&this.map.delete(g),p}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pV(u,p,g){const y=u.previousIndex;if(null===y)return y;let C=0;return g&&y<g.length&&(C=g[y]),y+p+C}class fV{constructor(){}supports(p){return p instanceof Map||ST(p)}create(){return new bw}}class bw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(p){let g;for(g=this._mapHead;null!==g;g=g._next)p(g)}forEachPreviousItem(p){let g;for(g=this._previousMapHead;null!==g;g=g._nextPrevious)p(g)}forEachChangedItem(p){let g;for(g=this._changesHead;null!==g;g=g._nextChanged)p(g)}forEachAddedItem(p){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)p(g)}forEachRemovedItem(p){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)p(g)}diff(p){if(p){if(!(p instanceof Map||ST(p)))throw new Ft(900,"")}else p=new Map;return this.check(p)?this:null}onDestroy(){}check(p){this._reset();let g=this._mapHead;if(this._appendAfter=null,this._forEach(p,(y,C)=>{if(g&&g.key===C)this._maybeAddToChanges(g,y),this._appendAfter=g,g=g._next;else{const S=this._getOrCreateRecordForKey(C,y);g=this._insertBeforeOrAppend(g,S)}}),g){g._prev&&(g._prev._next=null),this._removalsHead=g;for(let y=g;null!==y;y=y._nextRemoved)y===this._mapHead&&(this._mapHead=null),this._records.delete(y.key),y._nextRemoved=y._next,y.previousValue=y.currentValue,y.currentValue=null,y._prev=null,y._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(p,g){if(p){const y=p._prev;return g._next=p,g._prev=y,p._prev=g,y&&(y._next=g),p===this._mapHead&&(this._mapHead=g),this._appendAfter=p,p}return this._appendAfter?(this._appendAfter._next=g,g._prev=this._appendAfter):this._mapHead=g,this._appendAfter=g,null}_getOrCreateRecordForKey(p,g){if(this._records.has(p)){const C=this._records.get(p);this._maybeAddToChanges(C,g);const S=C._prev,T=C._next;return S&&(S._next=T),T&&(T._prev=S),C._next=null,C._prev=null,C}const y=new yw(p);return this._records.set(p,y),y.currentValue=g,this._addToAdditions(y),y}_reset(){if(this.isDirty){let p;for(this._previousMapHead=this._mapHead,p=this._previousMapHead;null!==p;p=p._next)p._nextPrevious=p._next;for(p=this._changesHead;null!==p;p=p._nextChanged)p.previousValue=p.currentValue;for(p=this._additionsHead;null!=p;p=p._nextAdded)p.previousValue=p.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(p,g){Object.is(g,p.currentValue)||(p.previousValue=p.currentValue,p.currentValue=g,this._addToChanges(p))}_addToAdditions(p){null===this._additionsHead?this._additionsHead=this._additionsTail=p:(this._additionsTail._nextAdded=p,this._additionsTail=p)}_addToChanges(p){null===this._changesHead?this._changesHead=this._changesTail=p:(this._changesTail._nextChanged=p,this._changesTail=p)}_forEach(p,g){p instanceof Map?p.forEach(g):Object.keys(p).forEach(y=>g(p[y],y))}}class yw{constructor(p){this.key=p,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function mV(){return new LD([new hV])}let LD=(()=>{class u{constructor(g){this.factories=g}static create(g,y){if(null!=y){const C=y.factories.slice();g=g.concat(C)}return new u(g)}static extend(g){return{provide:u,useFactory:y=>u.create(g,y||mV()),deps:[[u,new yl,new sl]]}}find(g){const y=this.factories.find(C=>C.supports(g));if(null!=y)return y;throw new Ft(901,"")}}return u.\u0275prov=En({token:u,providedIn:"root",factory:mV}),u})();function bM(){return new Ca([new fV])}let Ca=(()=>{class u{constructor(g){this.factories=g}static create(g,y){if(y){const C=y.factories.slice();g=g.concat(C)}return new u(g)}static extend(g){return{provide:u,useFactory:y=>u.create(g,y||bM()),deps:[[u,new yl,new sl]]}}find(g){const y=this.factories.find(S=>S.supports(g));if(y)return y;throw new Ft(901,"")}}return u.\u0275prov=En({token:u,providedIn:"root",factory:bM}),u})();const PW=[new fV],Cf=new LD([new hV]),FW=new Ca(PW),Mb=oE(null,"core",[{provide:iM,useValue:"unknown"},{provide:Wv,deps:[gu]},{provide:lM,deps:[]},{provide:ZH,deps:[]}]),sa=[{provide:Gv,useClass:Gv,deps:[Wn,gu,hx,qx,Rb]},{provide:$x,deps:[Wn],useFactory:function wf(u){let p=[];return u.onStable.subscribe(()=>{for(;p.length;)p.pop()()}),function(g){p.push(g)}}},{provide:Rb,useClass:Rb,deps:[[new sl,SD]]},{provide:Ab,useClass:Ab,deps:[]},EW,{provide:LD,useFactory:function Yr(){return Cf},deps:[]},{provide:Ca,useFactory:function kh(){return FW},deps:[]},{provide:sE,useFactory:function NW(u){return u||function BW(){return"undefined"!=typeof $localize&&$localize.locale||Ax}()},deps:[[new pu(sE),new sl,new yl]]},{provide:Uv,useValue:"USD"}];let Xc=(()=>{class u{constructor(g){}}return u.\u0275fac=function(g){return new(g||u)(Gt(Gv))},u.\u0275mod=qe({type:u}),u.\u0275inj=An({providers:sa}),u})()},3942:(Li,Et,se)=>{"use strict";se.d(Et,{Z:()=>Ft});var d=se(2090),he=se(4859),J=se(9681),Ge=se(1877);class Ue{constructor(Ie,Xe){this._delegate=Ie,this.firebase=Xe,(0,J._addComponent)(Ie,new he.wA("app-compat",()=>this,"PUBLIC")),this.container=Ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this._delegate.automaticDataCollectionEnabled=Ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ie=>{this._delegate.checkDestroyed(),Ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,J.deleteApp)(this._delegate)))}_getService(Ie,Xe=J._DEFAULT_ENTRY_NAME){var Dt;this._delegate.checkDestroyed();const kt=this._delegate.container.getProvider(Ie);return!kt.isInitialized()&&"EXPLICIT"===(null===(Dt=kt.getComponent())||void 0===Dt?void 0:Dt.instantiationMode)&&kt.initialize(),kt.getImmediate({identifier:Xe})}_removeServiceInstance(Ie,Xe=J._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ie).clearInstance(Xe)}_addComponent(Ie){(0,J._addComponent)(this._delegate,Ie)}_addOrOverwriteComponent(Ie){(0,J._addOrOverwriteComponent)(this._delegate,Ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pe=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),be=function at(){const Wt=function $e(Wt){const Ie={},Xe={__esModule:!0,initializeApp:function et(He,pi={}){const Re=J.initializeApp(He,pi);if((0,d.r3)(Ie,Re.name))return Ie[Re.name];const it=new Wt(Re,Xe);return Ie[Re.name]=it,it},app:kt,registerVersion:J.registerVersion,setLogLevel:J.setLogLevel,onLog:J.onLog,apps:null,SDK_VERSION:J.SDK_VERSION,INTERNAL:{registerComponent:function ct(He){const pi=He.name,Re=pi.replace("-compat","");if(J._registerComponent(He)&&"PUBLIC"===He.type){const it=(tt=kt())=>{if("function"!=typeof tt[Re])throw Pe.create("invalid-app-argument",{appName:pi});return tt[Re]()};void 0!==He.serviceProps&&(0,d.ZB)(it,He.serviceProps),Xe[Re]=it,Wt.prototype[Re]=function(...tt){return this._getService.bind(this,pi).apply(this,He.multipleInstances?tt:[])}}return"PUBLIC"===He.type?Xe[Re]:null},removeApp:function Dt(He){delete Ie[He]},useAsService:function ni(He,pi){return"serverAuth"===pi?null:pi},modularAPIs:J}};function kt(He){if(!(0,d.r3)(Ie,He=He||J._DEFAULT_ENTRY_NAME))throw Pe.create("no-app",{appName:He});return Ie[He]}return Xe.default=Xe,Object.defineProperty(Xe,"apps",{get:function vt(){return Object.keys(Ie).map(He=>Ie[He])}}),kt.App=Wt,Xe}(Ue);return Wt.INTERNAL=Object.assign(Object.assign({},Wt.INTERNAL),{createFirebaseNamespace:at,extendNamespace:function Ie(Xe){(0,d.ZB)(Wt,Xe)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Wt}(),pe=new Ge.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Wt=self.firebase.SDK_VERSION;Wt&&Wt.indexOf("LITE")>=0&&pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ft=be;!function Tt(Wt){(0,J.registerVersion)("@firebase/app-compat","0.1.18",Wt)}()},9681:(Li,Et,se)=>{"use strict";se.r(Et),se.d(Et,{FirebaseError:()=>Ge.ZR,SDK_VERSION:()=>Lc,_DEFAULT_ENTRY_NAME:()=>Ur,_addComponent:()=>Vn,_addOrOverwriteComponent:()=>ma,_apps:()=>Ri,_clearComponents:()=>fr,_components:()=>Zo,_getProvider:()=>ln,_registerComponent:()=>En,_removeServiceInstance:()=>An,deleteApp:()=>Mc,getApp:()=>Qh,getApps:()=>so,initializeApp:()=>fh,onLog:()=>Rr,registerVersion:()=>Xa,setLogLevel:()=>fn});var d=se(5861),he=se(4859),J=se(1877),Ge=se(2090);class Ue{constructor(Fi){this.container=Fi}getPlatformInfoString(){return this.container.getProviders().map(fs=>{if(function ot(qi){const Fi=qi.getComponent();return"VERSION"===(null==Fi?void 0:Fi.type)}(fs)){const _n=fs.getImmediate();return`${_n.library}/${_n.version}`}return null}).filter(fs=>fs).join(" ")}}const Pe="@firebase/app",at=new J.Yd("@firebase/app"),Ur="[DEFAULT]",Pi={[Pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ri=new Map,Zo=new Map;function Vn(qi,Fi){try{qi.container.addComponent(Fi)}catch(fs){at.debug(`Component ${Fi.name} failed to register with FirebaseApp ${qi.name}`,fs)}}function ma(qi,Fi){qi.container.addOrOverwriteComponent(Fi)}function En(qi){const Fi=qi.name;if(Zo.has(Fi))return at.debug(`There were multiple attempts to register component ${Fi}.`),!1;Zo.set(Fi,qi);for(const fs of Ri.values())Vn(fs,qi);return!0}function ln(qi,Fi){return qi.container.getProvider(Fi)}function An(qi,Fi,fs=Ur){ln(qi,Fi).clearInstance(fs)}function fr(){Zo.clear()}const To=new Ge.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Ma{constructor(Fi,fs,_n){this._isDeleted=!1,this._options=Object.assign({},Fi),this._config=Object.assign({},fs),this._name=fs.name,this._automaticDataCollectionEnabled=fs.automaticDataCollectionEnabled,this._container=_n,this.container.addComponent(new he.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fi){this.checkDestroyed(),this._automaticDataCollectionEnabled=Fi}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Fi){this._isDeleted=Fi}checkDestroyed(){if(this.isDeleted)throw To.create("app-deleted",{appName:this._name})}}const Lc="9.6.7";function fh(qi,Fi={}){"object"!=typeof Fi&&(Fi={name:Fi});const fs=Object.assign({name:Ur,automaticDataCollectionEnabled:!1},Fi),_n=fs.name;if("string"!=typeof _n||!_n)throw To.create("bad-app-name",{appName:String(_n)});const Xo=Ri.get(_n);if(Xo){if((0,Ge.vZ)(qi,Xo.options)&&(0,Ge.vZ)(fs,Xo.config))return Xo;throw To.create("duplicate-app",{appName:_n})}const ws=new he.H0(_n);for(const fi of Zo.values())ws.addComponent(fi);const Ai=new Ma(qi,fs,ws);return Ri.set(_n,Ai),Ai}function Qh(qi=Ur){const Fi=Ri.get(qi);if(!Fi)throw To.create("no-app",{appName:qi});return Fi}function so(){return Array.from(Ri.values())}function Mc(qi){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(qi){const Fi=qi.name;Ri.has(Fi)&&(Ri.delete(Fi),yield Promise.all(qi.container.getProviders().map(fs=>fs.delete())),qi.isDeleted=!0)})).apply(this,arguments)}function Xa(qi,Fi,fs){var _n;let Xo=null!==(_n=Pi[qi])&&void 0!==_n?_n:qi;fs&&(Xo+=`-${fs}`);const ws=Xo.match(/\s|\//),Ai=Fi.match(/\s|\//);if(ws||Ai){const fi=[`Unable to register library "${Xo}" with version "${Fi}":`];return ws&&fi.push(`library name "${Xo}" contains illegal characters (whitespace or "/")`),ws&&Ai&&fi.push("and"),Ai&&fi.push(`version name "${Fi}" contains illegal characters (whitespace or "/")`),void at.warn(fi.join(" "))}En(new he.wA(`${Xo}-version`,()=>({library:Xo,version:Fi}),"VERSION"))}function Rr(qi,Fi){if(null!==qi&&"function"!=typeof qi)throw To.create("invalid-log-argument");(0,J.Am)(qi,Fi)}function fn(qi){(0,J.Ub)(qi)}!function Oa(qi){En(new he.wA("platform-logger",Fi=>new Ue(Fi),"PRIVATE")),Xa(Pe,"0.7.17",qi),Xa(Pe,"0.7.17","esm2017"),Xa("fire-js","")}("")},4859:(Li,Et,se)=>{"use strict";se.d(Et,{wA:()=>J,H0:()=>$e,zt:()=>Ue});var d=se(5861),he=se(2090);class J{constructor(be,pe,Ne){this.name=be,this.instanceFactory=pe,this.type=Ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(be){return this.instantiationMode=be,this}setMultipleInstances(be){return this.multipleInstances=be,this}setServiceProps(be){return this.serviceProps=be,this}setInstanceCreatedCallback(be){return this.onInstanceCreated=be,this}}const Ge="[DEFAULT]";class Ue{constructor(be,pe){this.name=be,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(be){const pe=this.normalizeInstanceIdentifier(be);if(!this.instancesDeferred.has(pe)){const Ne=new he.BH;if(this.instancesDeferred.set(pe,Ne),this.isInitialized(pe)||this.shouldAutoInitialize())try{const $t=this.getOrInitializeService({instanceIdentifier:pe});$t&&Ne.resolve($t)}catch($t){}}return this.instancesDeferred.get(pe).promise}getImmediate(be){var pe;const Ne=this.normalizeInstanceIdentifier(null==be?void 0:be.identifier),$t=null!==(pe=null==be?void 0:be.optional)&&void 0!==pe&&pe;if(!this.isInitialized(Ne)&&!this.shouldAutoInitialize()){if($t)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ne})}catch(Tt){if($t)return null;throw Tt}}getComponent(){return this.component}setComponent(be){if(be.name!==this.name)throw Error(`Mismatching Component ${be.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=be,this.shouldAutoInitialize()){if(function Pe(at){return"EAGER"===at.instantiationMode}(be))try{this.getOrInitializeService({instanceIdentifier:Ge})}catch(pe){}for(const[pe,Ne]of this.instancesDeferred.entries()){const $t=this.normalizeInstanceIdentifier(pe);try{const Tt=this.getOrInitializeService({instanceIdentifier:$t});Ne.resolve(Tt)}catch(Tt){}}}}clearInstance(be=Ge){this.instancesDeferred.delete(be),this.instancesOptions.delete(be),this.instances.delete(be)}delete(){var be=this;return(0,d.Z)(function*(){const pe=Array.from(be.instances.values());yield Promise.all([...pe.filter(Ne=>"INTERNAL"in Ne).map(Ne=>Ne.INTERNAL.delete()),...pe.filter(Ne=>"_delete"in Ne).map(Ne=>Ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(be=Ge){return this.instances.has(be)}getOptions(be=Ge){return this.instancesOptions.get(be)||{}}initialize(be={}){const{options:pe={}}=be,Ne=this.normalizeInstanceIdentifier(be.instanceIdentifier);if(this.isInitialized(Ne))throw Error(`${this.name}(${Ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $t=this.getOrInitializeService({instanceIdentifier:Ne,options:pe});for(const[Tt,Ft]of this.instancesDeferred.entries())Ne===this.normalizeInstanceIdentifier(Tt)&&Ft.resolve($t);return $t}onInit(be,pe){var Ne;const $t=this.normalizeInstanceIdentifier(pe),Tt=null!==(Ne=this.onInitCallbacks.get($t))&&void 0!==Ne?Ne:new Set;Tt.add(be),this.onInitCallbacks.set($t,Tt);const Ft=this.instances.get($t);return Ft&&be(Ft,$t),()=>{Tt.delete(be)}}invokeOnInitCallbacks(be,pe){const Ne=this.onInitCallbacks.get(pe);if(Ne)for(const $t of Ne)try{$t(be,pe)}catch(Tt){}}getOrInitializeService({instanceIdentifier:be,options:pe={}}){let Ne=this.instances.get(be);if(!Ne&&this.component&&(Ne=this.component.instanceFactory(this.container,{instanceIdentifier:(at=be,at===Ge?void 0:at),options:pe}),this.instances.set(be,Ne),this.instancesOptions.set(be,pe),this.invokeOnInitCallbacks(Ne,be),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,be,Ne)}catch($t){}var at;return Ne||null}normalizeInstanceIdentifier(be=Ge){return this.component?this.component.multipleInstances?be:Ge:be}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class $e{constructor(be){this.name=be,this.providers=new Map}addComponent(be){const pe=this.getProvider(be.name);if(pe.isComponentSet())throw new Error(`Component ${be.name} has already been registered with ${this.name}`);pe.setComponent(be)}addOrOverwriteComponent(be){this.getProvider(be.name).isComponentSet()&&this.providers.delete(be.name),this.addComponent(be)}getProvider(be){if(this.providers.has(be))return this.providers.get(be);const pe=new Ue(be,this);return this.providers.set(be,pe),pe}getProviders(){return Array.from(this.providers.values())}}},1877:(Li,Et,se)=>{"use strict";se.d(Et,{in:()=>he,Yd:()=>Pe,Ub:()=>$e,Am:()=>at});const d=[];var he=(()=>{return(be=he||(he={}))[be.DEBUG=0]="DEBUG",be[be.VERBOSE=1]="VERBOSE",be[be.INFO=2]="INFO",be[be.WARN=3]="WARN",be[be.ERROR=4]="ERROR",be[be.SILENT=5]="SILENT",he;var be})();const J={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},Ge=he.INFO,Ue={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},ot=(be,pe,...Ne)=>{if(pe<be.logLevel)return;const $t=(new Date).toISOString(),Tt=Ue[pe];if(!Tt)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[Tt](`[${$t}]  ${be.name}:`,...Ne)};class Pe{constructor(pe){this.name=pe,this._logLevel=Ge,this._logHandler=ot,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in he))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?J[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...pe),this._logHandler(this,he.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...pe),this._logHandler(this,he.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,he.INFO,...pe),this._logHandler(this,he.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,he.WARN,...pe),this._logHandler(this,he.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...pe),this._logHandler(this,he.ERROR,...pe)}}function $e(be){d.forEach(pe=>{pe.setLogLevel(be)})}function at(be,pe){for(const Ne of d){let $t=null;pe&&pe.level&&($t=J[pe.level]),Ne.userLogHandler=null===be?null:(Tt,Ft,...Wt)=>{const Ie=Wt.map(Xe=>{if(null==Xe)return null;if("string"==typeof Xe)return Xe;if("number"==typeof Xe||"boolean"==typeof Xe)return Xe.toString();if(Xe instanceof Error)return Xe.message;try{return JSON.stringify(Xe)}catch(Dt){return null}}).filter(Xe=>Xe).join(" ");Ft>=(null!=$t?$t:Tt.logLevel)&&be({level:he[Ft].toLowerCase(),message:Ie,args:Wt,type:Tt.name})}}}},5861:(Li,Et,se)=>{"use strict";function d(J,Ge,Ue,ot,Pe,$e,at){try{var be=J[$e](at),pe=be.value}catch(Ne){return void Ue(Ne)}be.done?Ge(pe):Promise.resolve(pe).then(ot,Pe)}function he(J){return function(){var Ge=this,Ue=arguments;return new Promise(function(ot,Pe){var $e=J.apply(Ge,Ue);function at(pe){d($e,ot,Pe,at,be,"next",pe)}function be(pe){d($e,ot,Pe,at,be,"throw",pe)}at(void 0)})}}se.d(Et,{Z:()=>he})}},Li=>{Li(Li.s=3858)}]);